<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>【Source Insight】Source Insight的初步使用方法</title>
    <link href="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>Source Insight 是一款专注于代码阅读与分析的集成开发工具（IDE），由 Source Dynamics 公司开发，广泛应用于软件开发领域。</p><p>它的核心优势在于对代码的深度解析能力：能自动构建项目的符号数据库（如函数、变量、类等），支持实时语法高亮、快速跳转到定义 / 引用、调用关系树显示等功能，帮助开发者高效浏览和理解大型代码库（尤其适合 C、C++、Java、Python 等多种编程语言）。</p><p>界面简洁直观，操作轻量化，兼顾编辑与分析功能，是程序员阅读、修改和维护复杂代码时的常用工具，能显著提升代码理解效率和开发 productivity。</p><h1>二、初步使用</h1><h2>2.1 新建一个文件夹，用于放Source Insight工程的文件夹</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/03161de7fd3947c3964e70bc456d3f29.png"></p><h2>2.2 写Source Insight工程名字，以及更改存放这个Source Insight工程的文件夹位置，然后点击ok</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/e33da765df34416e9fe799441aaa0e9b.png"></p><h2>2.3 在红框里，选择你想要导入Source Insight的源码文件夹路径，这里拿STM32的KEIL工程为例，其他选项默认，后续自行研究功能，点击ok</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/de0d988508ef4cf5a94a0913c3297efc.png"></p><h2>2.4 导入源码文件</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/8a300b7ebc1642c1ae886ffe87543f07.png"></p><h3>（1）不勾选只显示只知道的文件类型</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/dce16a5f278049dead157b9c817da24f.png"></p><h3 style="background-color:transparent">（2）按ctrl，鼠标点击多选</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/bf4bf2c7a22a4f7d8e0b5429e0a21af3.png"></p><h3>（3）选择完毕点击add，然后，如果有文件夹，一定要勾选递归添加子文件的选项</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/89e3662adc644948b64750b381d8d07f.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/0d9ae34b18be40b894fa5a30f2542116.png"></p><p>点击ok</p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/dea9632a6ae84a30846967ad9804eb25.png"></p><h2>2.5 添加完毕，点击close关闭窗口</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/02dd8ab4a5a04e978018c137e352f482.png"></p><h2>2.6 如果是空白界面，需要调出窗口，点击view--&gt;panels--&gt;project window，可以到文件夹下选择要查看的文件</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/53c44debcc4248c58addc26ad2be703b.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/a6528a670ba344baa2299ca175e7a726.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/efaa760c5c2341f6b0c07b1e0fb81bcb.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/e5b02a4428ce4500baf3d593df8135aa.png"></p><h2>2.7 打开正文窗口</h2><h3>方法一：点击视图里的功能选项</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/4a972dfe7bbe4b30b88080cd4fe8f212.png"></p><h3>方法二：双击右下的文件</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/b9a6e370d76d4aa784c3ca21ece54d75.png"></p><h2>2.8 同步并解析文件，让各个文件的函数关联起来，勾选第一个选项Force all files to be re-parsed，然后开始</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/b271ad790a3a46f28977a2201deea4e7.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/10b464ac173b4859925595c426be20c1.png"></p><h2>2.9 如果有乱码，请更改文件编码格式</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/a68c67e871144a208cdc9343a11b9943.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/cba5c1761fe442e990ddb0231c00b7b2.png"></p><h2>2.10 然后就是函数定义跳转</h2><h3>方法一：与vscode差不多，按住ctrl，鼠标点击函数名</h3><h3>方法二：选中函数名，然后右击鼠标</h3><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/8c5c6c53d0c04ffd952593e3a71e6b64.png"></p><h2>2.11 高亮出自己想看的部分，options--&gt;Key Assignments...&nbsp; ，找到词语高亮 View:Highlight Word，我的对应的快捷键 F8，选中，按下F8</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/79a96811763a4ec6a2cc9615de2bb0db.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/d85c53157c5b4589baa8c98ad3ad80e4.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/c5373d02286f41cb8d458d2b56ffd1b7.png"></p><p>或者右击菜单里也有</p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/cb1cd371d3a74dcf88a124a3ed16d5ab.png"></p><h2>2.12 比较重要的就是：可以查看调用关系图的功能，先开启窗口，再选中对应的词语或者函数名，窗口下面有横向树状图标，可以开启树状图</h2><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/ae1cdc49fd4f446abba1e018779ab996.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/e361fa0a4ced49818c7ccadb172a39d2.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/e40aa5d8d4e54e369a1a619f4a8cabdb.png"></p><p><img src="/2025/11/15/%E3%80%90Source%20Insight%E3%80%91Source%20Insight%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/ff8abcf2ee504e82829da0815e6e163f.png"></p><p></p><p>注：目前介绍简单功能，等待后续更新</p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Source Insight</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【VSCode】【Clangd】Win下的基于LLVM/Clangd+Clangd插件+MINGW+CMake的VSCode配置C/C++开发环境的详细教程</title>
    <link href="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/"/>
    <url>/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>在 VSCode 中配置 C/C++ 开发环境，主要有两种主流的语言服务器（LSP）方案，它们基于不同的工具链和设计理念，适用于不同的开发需求。要理解这两种方案，需先明确 LSP（语言服务器协议）&nbsp;的概念：它是由微软主导制定的一套跨编辑器 / IDE 的标准化协议，旨在简化编程语言工具（如代码补全、语法检查、跳转定义等）的开发与集成，让开发者在不同编辑器中能获得一致的编程辅助体验。</p><h2>1.1 微软官方 C/C++ 插件方案</h2><p>由微软官方开发维护，是一套 &ldquo;一站式&rdquo; 的 C/C++ 开发解决方案。它集成了 IntelliSense（智能感知）&nbsp;和调试功能，安装后无需额外配置太多依赖即可快速上手。具备代码补全、语法检查、跳转定义、断点调试等完整流程，适合 C/C++ 新手快速搭建开发环境，降低入门门槛。</p><h2>1.2 Clangd插件+LLVM/Clangd 方案</h2><p>由 LLVM 团队开发的<code>Clangd</code>插件，基于 Clang 工具链提供语言服务。它在<strong>代码分析的准确性、大型项目的性能表现</strong>上更具优势，尤其适合追求编译工具链一致性（如用 Clang 编译代码）的场景。但需要注意，<code>Clangd</code>本身不包含调试功能，需搭配<strong><code>CodeLLDB</code></strong>插件才能实现 C/C++ 程序的调试。这种方案更偏向于专业开发场景，尤其是对代码质量和编译流程有深入需求的开发者。</p><p>本文将聚焦<strong>Windows 下基于 Clangd 插件 + LLVM 的 VSCode C/C++ 开发环境</strong>，详细讲解其配置流程与初步使用方法，帮助开发者利用 Clang 工具链的优势打造高效开发环境。</p><h2>1.3 什么是LLVM</h2><p><span style="background-color:#fff5e6">LLVM 命名最早源自于底层虚拟机（Low&nbsp;Level&nbsp;Virtual&nbsp;Machine）的缩写，由于命名带来的混乱，LLVM就是该项目的全称。LLVM&nbsp;核心库提供了与<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="编译器" href="https://baike.baidu.com/item/%E7%BC%96%E8%AF%91%E5%99%A8/8853067?fromModule=lemma_inlink" title="编译器">编译器</a>相关的支持，可以作为多种语言编译器的后台来使用。能够进行<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="程序语言" href="https://baike.baidu.com/item/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/10696489?fromModule=lemma_inlink" title="程序语言">程序语言</a>的编译器优化、链接优化、在线编译优化、<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="代码生成" href="https://baike.baidu.com/item/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/10934969?fromModule=lemma_inlink" title="代码生成">代码生成</a>。LLVM的项目是一个模块化和可重复使用的编译器和工具技术的集合。LLVM是<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="伊利诺伊大学" href="https://baike.baidu.com/item/%E4%BC%8A%E5%88%A9%E8%AF%BA%E4%BC%8A%E5%A4%A7%E5%AD%A6/1373290?fromModule=lemma_inlink" title="伊利诺伊大学">伊利诺伊大学</a>的一个研究项目，提供一个现代化的，基于SSA的编译策略能够同时支持静态和动态的任意<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="编程语言" href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/9845131?fromModule=lemma_inlink" title="编程语言">编程语言</a>的编译目标。自那时以来，已经成长为LLVM的主干项目，由不同的<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="子项目" href="https://baike.baidu.com/item/%E5%AD%90%E9%A1%B9%E7%9B%AE/6866890?fromModule=lemma_inlink" title="子项目">子项目</a>组成，其中许多正在生产中使用的各种商业和开源的项目，以及被广泛用于学术研究。</span></p><p>总之，LLVM 是一个<strong>开源的编译器基础设施项目与框架</strong>，它以模块化、可重用的设计理念，为编译技术领域提供了一套完整的工具链和扩展能力，其核心价值可从以下维度解析：</p><p><span style="background-color:#cbe0f1">（Chris Latter本来只是想写一个底层的虚拟机，这也是LLVM名字的由来，low level&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="virtual" href="https://so.csdn.net/so/search?q=virtual&amp;spm=1001.2101.3001.7020" title="virtual">virtual</a>&nbsp;machine，跟Java的JVM虚拟机一样，可是后来，llvm从来没有被用作过虚拟机，哪怕LLVM的名气已经传开了。所以人们决定仍然叫他LLVM，更多的时候只是当作&ldquo;商标&rdquo;一样的感觉在使用，其实</span><strong><span style="background-color:#cbe0f1">它跟虚拟机没有关系</span></strong><span style="background-color:#cbe0f1">。官方描述如下：</span><br /><span style="background-color:#cbe0f1">The name &quot;LLVM&quot; itself is not an acronym; it is the full name of the project. &ldquo;LLVM&rdquo;这个名称本身不是首字母缩略词; 它是项目的全名。）</span></p><h3>1.3.1 核心定位：编译器生态的 &ldquo;通用底座&rdquo;</h3><p>它并非单一工具，而是一个<strong>包含编译器组件、优化库、工具链的生态系统</strong>，支持从编程语言前端（如 C/C++、Rust、Swift 等）的语法解析，到中间代码优化，再到目标平台（x86、ARM、RISCV 等）机器码生成的全流程。</p><p>简单来说，LLVM 是编译技术的 &ldquo;乐高积木&rdquo;&mdash;&mdash; 开发者可以基于它的模块化组件，快速构建新编程语言的编译器、静态分析工具、代码优化插件等，无需从零实现整个编译流程。</p><h4>（1）传统的编译器架构</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/d98752d7a3e94a32921d6cd652c5279b.png"></p><ul><li><strong>Frontend:前端</strong><br />词法分析、语法分析、语义分析、生成中间代码</li><li><strong>Optimizer:优化器</strong><br />中间代码优化</li><li><strong>Backend:后端</strong><br />生成机器码</li></ul><h4>（2）LLVM架构</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/7130fbeab5d5419f8ba666d459fcea7b.png"></p><ul><li>不同的前端后端使用统一的中间代码LLVM Intermediate Representation (LLVM IR)</li><li>如果需要支持一种新的编程语言，那么只需要实现一个新的前端</li><li>如果需要支持一种新的硬件设备，那么只需要实现一个新的后端</li><li>优化阶段是一个通用的阶段，它针对的是统一的LLVM IR，不论是支持新的编程语言，还是支持新的硬件设备，都不需要对优化阶段做修改</li><li>相比之下，GCC的前端和后端没分得太开，前端后端耦合在了一起。所以GCC为了支持一门新的语言，或者为了支持一个新的目标平台，就变得特别困难</li><li>LLVM现在被作为实现各种静态和运行时编译语言的通用基础结构(GCC家族、Java、.NET、Python、Ruby、Scheme、Haskell等)</li></ul><h3>1.3.2 技术架构：模块化与标准化的突破</h3><p>传统编译器（如 GCC）的<strong>前端（语法分析）和后端（机器码生成）耦合度高</strong>，导致新增一门语言或支持新硬件时，需要大量重复开发。而 LLVM 通过<strong>统一的中间表示（LLVM IR）</strong>&nbsp;实现了 &ldquo;前后端解耦&rdquo;：</p><ul><li><strong>前端</strong>：负责将特定编程语言（如 C++、Rust）转换为<strong>LLVM IR</strong>（一种与平台无关的中间代码）。例如，Clang 就是 LLVM 生态中针对 C/C++/Objective-C 的前端。</li><li><strong>优化器</strong>：对 LLVM IR 进行通用优化（如消除冗余代码、提升执行效率），这一阶段与具体语言、硬件无关。</li><li><strong>后端</strong>：将优化后的 LLVM IR 转换为目标平台的机器码。若需支持新硬件，只需开发对应的后端模块即可。</li></ul><h3>1.3.3 生态与工具：从编译到开发全链路覆盖</h3><p>LLVM 生态包含众多核心工具，支撑不同场景的开发需求：</p><ul><li><strong>Clang</strong>：LLVM 的 C/C++/Objective-C 前端编译器，以<strong>编译速度快、错误提示友好、模块化易集成</strong>著称，是 Xcode等 IDE 的默认 C++ 编译工具之一。</li><li><strong>Clangd</strong>：基于 Clang 的<strong>C/C++ 语言服务器</strong>（支持 LSP 协议），为 VSCode 等编辑器提供代码补全、跳转定义、语法检查等开发辅助功能。</li><li><strong>LLDB</strong>：跨平台调试器，可与 Clangd 配合实现 C++ 程序的断点调试。</li><li><strong>其他衍生工具</strong>：如用于静态分析的<code>Clang Static Analyzer</code>、用于代码混淆的<code>LLVM Obfuscator</code>等。</li></ul><h3>1.3.4 技术价值：跨语言、跨平台的 &ldquo;万能适配&rdquo;</h3><ul><li><strong>跨语言支持</strong>：只要能将某门语言转换为 LLVM IR，就能借助其优化器和后端生成任意平台的可执行代码。因此，Rust、Swift、D 语言等都以 LLVM 为编译基础。</li><li><strong>跨平台能力</strong>：支持几乎所有主流硬件架构（x86、ARM、RISCV 等），开发者无需为不同平台重复开发编译逻辑。</li><li><strong>可扩展性</strong>：基于 LLVM 的模块化设计，开发者可轻松扩展功能 &mdash;&mdash; 比如开发自定义的代码优化 &ldquo;Pass&rdquo;、新增编程语言的前端，或为 IDE 打造智能提示插件（如 Clangd）。</li></ul><h3>1.3.5 行业地位：技术影响力的标杆</h3><ul><li>它是<strong>众多主流技术的底层支撑</strong>：苹果 Swift 语言、Rust 语言的编译器、Linux 内核的 Clang 编译方案、VSCode 的 C++ 开发环境等，都依赖 LLVM 生态。</li><li>曾获<strong>ACM 2012 年软件系统奖</strong>（该奖项此前授予过 Java、UNIX、万维网等里程碑式技术），足以证明其在软件领域的突破性价值。</li></ul><p><span style="background-color:#fefcd8">简言之，LLVM 不仅是一套编译器工具链，更是编译技术的 &ldquo;基础设施框架&rdquo;&mdash;&mdash; 它通过标准化、模块化的设计，大幅降低了编译工具的开发门槛，推动了跨语言、跨平台开发的效率革命。</span></p><h2>1.4 什么是clang</h2><p>Clang 是<strong>LLVM 项目旗下的开源 C/C++/Objective-C 编译器前端</strong>，基于 LLVM 架构设计，专注于将源代码转换为 LLVM 中间表示（LLVM IR），是现代 C/C++ 开发中替代 GCC 的重要工具。其核心定位、技术特点与价值可从以下维度解析：</p><h3>1.4.1 核心角色：LLVM 架构的 &ldquo;前端支柱&rdquo;</h3><p>在 LLVM 的模块化编译流程中，Clang 承担 &ldquo;前端&rdquo; 职责：负责接收 C/C++/Objective-C 源代码，通过<strong>预处理、词法分析、语法分析</strong>生成抽象语法树（AST），最终转换为 LLVM IR（中间代码）。后续的代码优化、机器码生成则由 LLVM 后端完成。</p><p>简单说，Clang 是 &ldquo;源代码到中间代码的转换器&rdquo;，是 LLVM 生态中处理 C/C++ 类语言的核心入口。</p><h3>1.4.2 相比 GCC 的核心优势</h3><p>作为新一代编译器前端，Clang 在性能、易用性和扩展性上显著优于传统的 GCC 前端：</p><ol><li><strong>编译速度更快</strong>：在 Debug 模式下，编译 Objective-C 代码的速度是 GCC 的 3 倍，对大型项目的开发效率提升明显。</li><li><strong>内存占用更低</strong>：生成的抽象语法树（AST）内存占用仅为 GCC 的 1/5，减少了编译过程中的资源消耗。</li><li><strong>模块化设计</strong>：基于库的模块化架构（如 libclang、libTooling），易于集成到 IDE（如 VSCode、Xcode）或开发自定义工具（如静态分析器）。</li><li><strong>诊断信息更友好</strong>：编译错误提示包含详细元数据（如代码位置、错误原因），可读性远超 GCC 的晦涩输出，便于开发者快速定位问题。</li><li><strong>易于扩展</strong>：代码结构清晰，开发者可轻松开发插件（如代码规范检查工具）或扩展语法支持，而 GCC 因架构耦合度高，扩展难度大。</li></ol><h3>1.4.3 工作流程：从源代码到 LLVM IR 的全解析</h3><p>Clang 对源代码的处理遵循编译前端的标准流程，以 Objective-C 文件（<code>main.m</code>）为例：</p><ol><li><strong>预处理</strong>：处理<code>#include</code>、<code>#import</code>、宏定义等，生成预处理后的代码（可通过<code>clang -E main.m</code>查看）。</li><li><strong>词法分析</strong>：将代码拆分为最小语法单元（Token），如关键字（<code>void</code>）、标识符（<code>test</code>）、运算符（<code>+</code>）等（可通过<code>clang -dump-tokens</code>查看）。</li><li><strong>语法分析</strong>：基于 Token 生成抽象语法树（AST），描述代码的语法结构（如函数定义、变量赋值），明确代码逻辑（可通过<code>clang -ast-dump</code>查看）。</li><li><strong>生成 LLVM IR</strong>：将 AST 转换为与平台无关的 LLVM IR（中间代码），供 LLVM 后端优化并生成机器码（可通过<code>clang -S -emit-llvm</code>生成文本格式的<code>.ll</code>文件）。</li></ol><h3>1.4.4 应用场景：从编译到工具开发</h3><ul><li><strong>日常编译</strong>：作为 C/C++/Objective-C 的编译器前端，直接用于代码编译（如 Xcode 默认使用 Clang 编译 iOS/macOS 项目）。</li><li><strong>IDE 集成</strong>：其模块化库（如 libclang）为 VSCode 等编辑器提供代码补全、跳转定义等功能（Clangd 插件即基于此）。</li><li><strong>工具开发</strong>：基于 Clang 可开发静态分析工具（检查命名规范、内存泄漏）、代码重构工具，或通过插件扩展编译器功能。</li></ul><p>简言之，Clang 是 LLVM 生态中为 C/C++/Objective-C 量身打造的 &ldquo;高效、轻量、易扩展&rdquo; 的编译器前端，凭借其性能优势和模块化设计，已成为现代 C/C++ 开发的主流工具之一。</p><h1>二、安装与配置</h1><p><span style="color:#fe2c24">注意：在使用Clangd插件+LLVM 方案时，需要关闭微软官方的C/C++插件，因为会产生冲突。</span></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/980de7d7070443a4ba646dface3de033.png"></p><h2>2.1 安装LLVM，一般GitHub的都带了clang，但是有些渠道下载的可能没有clang，需要注意一下</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Releases · llvm/llvm-project" href="https://github.com/llvm/llvm-project/releases" title="Releases · llvm/llvm-project">Releases &middot; llvm/llvm-project</a></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/5381be2152c94c05b61188d328274800.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/240e5161423e47969ac200d956d3b7fc.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/83b7d8debf32492fadfd5d39a92dfd45.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/d25ffeea9a824ec5b264f5f2e3ae5331.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/bd06e784a20a4f40b982e5555fb931d1.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/16faba45640a4da080d5e8f71928eeff.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/e0567c07a2644ccc96b0f47f3b2b95b1.png"></p><h2>2.2 vscode安装clang插件</h2><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/42685dcf44f243319b103ff66774b435.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/8b2df7bd905d4d0b8f3432eddfa03786.png"></p><p>这里选择不安装，到时候手动配置自己下载的clangd</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/221a3e80692d434bab242e23ffab5d46.png"></p><h2>2.3 下载安装MINGW，记得添加到环境变量</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries" href="https://github.com/niXman/mingw-builds-binaries/releases/tag/15.2.0-rt_v13-rev0" title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries">Release Release of 15.2.0-rt_v13-rev0 &middot; niXman/mingw-builds-binaries</a></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/19bdfce5b5d142e5a30c628ddb0c3d2e.png"></p><h2>2.4 配置需要的功能</h2><p>要配置 Clangd 的<strong>用户级（全局共享）<strong>和</strong>项目级（工程私有）</strong>&nbsp;YAML 配置文件，可按照以下步骤操作：</p><h3>2.4.1 用户配置（全局共享设置）</h3><p>用于存放所有项目通用的配置（如补全样式、提示规则等）。</p><h4>1. 定位配置文件路径</h4><p>根据系统类型，在对应路径创建&nbsp;<code>config.yaml</code>&nbsp;文件：</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/59d03df88fcb42e2838eb9b79f8837ac.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/6cc7f13002da4826a6b951ab2a73f738.png"></p><ul><li><strong>Windows</strong>：路径：<code>%LocalAppData%\clangd\config.yaml</code>（可在文件资源管理器中直接输入&nbsp;<code>%LocalAppData%\clangd</code>，新建&nbsp;<code>config.yaml</code>）</li><li><strong>macOS</strong>：路径：<code>~/Library/Preferences/clangd/config.yaml</code>（在 Finder 中按&nbsp;<code>Shift+Command+G</code>，输入路径并创建文件）</li><li><strong>Linux</strong>：路径：<code>$XDG_CONFIG_HOME/clangd/config.yaml</code>（若&nbsp;<code>XDG_CONFIG_HOME</code>&nbsp;未设置，默认是&nbsp;<code>~/.config/clangd/config.yaml</code>）</li></ul><h4>2. 写入通用配置内容</h4><p>将以下内容复制到&nbsp;<code>config.yaml</code>&nbsp;中（可根据需求调整）：</p><p>yaml</p><pre><code># 参考：https://clangd.llvm.org/config---# 补全配置：参数列表显示分隔符Completion:  ArgumentLists: Delimiters# 嵌入式提示：显示代码块结束、默认参数等InlayHints:  BlockEnd: true        # 显示代码块结束标记（如 `}` 旁标注函数名）  DefaultArguments: true # 显示函数默认参数提示  TypeNameLimit: 0      # 类型名提示无长度限制# 悬停提示：显示别名（AKA）信息Hover:  ShowAKA: true# 全局编译选项（所有项目生效）CompileFlags:  Add: [-Wall]  # 添加 `-Wall` 开启所有警告</code></pre><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/4c224733502043abb5b2daef21192073.png"></p><h3>2.4.2 项目配置（工程私有设置）</h3><h4>官方的配置说明文档链接</h4><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Configuration" href="https://clangd.llvm.org/config#files" title="Configuration">Configuration</a></p><p>用于存放单个项目的专属配置（如编译命令路径、特定编译器等）。</p><h4>1. 创建项目配置目录</h4><p>在<strong>项目根目录</strong>下，创建&nbsp;<code>.clangd</code>&nbsp;文件，使用yaml语法添加选项。</p><p>（创建&nbsp;<code>.clangd</code>&nbsp;文件夹，再在其中新建&nbsp;<code>config.yaml</code>&nbsp;文件。这种方式过时了）</p><h4>2. 写入工程专属配置</h4><p>这里的配置其实除了&nbsp;<code>.clangd</code>&nbsp;文件方法，一般用vscode工作区里的提前增加条件选项。</p><p>通过 &ldquo;用户配置（全局通用）+ 项目配置（工程私有）&rdquo; 的分离，既能保证所有项目共享统一的交互体验，又能针对单个工程做定制化编译配置，大幅提升 C/C++ 开发效率。</p><h2>2.5&nbsp;在VSCode中配置LLVM官方插件Clangd</h2><h3>2.5.1&nbsp;&nbsp;配置工具链本体路径，在设置里搜索Clangd:Path，因为我们最开始下载的时候插件Clangd是个空壳子还要求我们是否下载，取消后这里配置我们自己下载的clangd</h3><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/5f56b55e0a524bee9ad49d7935c08441.png"></p><h3>2.5.2 进入Clangd插件设置使用选项</h3><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/917709db95894f7f9b2eee3336db7d33.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/80c6034fd9864a4bbcedd50271de64f2.png"></p><p>建议改为工作区设置，方便后续每个工作区的定制化改变，不会影响到用户设置</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/f3ab9875e3dd4be092f0005f6fa9c526.png"></p><p>一定要一条一条加进去</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/cc75aa94791b4d10a10f8bced7ec3727.png"></p><pre><code class="language-bash">{    "clangd.arguments": [        // 后台索引（提升大型项目的响应速度）        "--background-index",        "--background-index-priority=low",  // 后台索引优先级设为低，不影响编辑                // 启用代码检查（基于clang-tidy，支持代码规范检查）        "--clang-tidy",                // 补全样式：detailed显示更详细的补全信息（如参数类型）        "--completion-style=detailed",                // 代码风格 fallback：当项目无明确风格时，默认使用Google风格        "--fallback-style=Google",                // 关闭函数参数占位符（避免补全时自动插入`${1}`等占位符）        "--function-arg-placeholders=false",                // 禁止自动插入#include（如需手动控制头文件引入）        "--header-insertion=never",                // 重命名文件时无数量限制（默认可能限制大项目重命名）        "--rename-file-limit=0",                // 启用Clangd的配置文件（即前面提到的user/project级config.yaml）        "--enable-config",                // 并行任务数量（根据CPU核心数调整，如8核设为8，加速索引）        "-j=12",                // PCH（预编译头）存储在内存中，提升解析速度        "--pch-storage=memory",                // 格式化输出日志（方便调试）        "--pretty",                // 【核心】指定compile_commands.json的路径（必须修改！）        // 该文件由CMake、Make等构建工具生成，包含项目编译信息（如头文件路径、宏定义）        // 解释：基于cmake构建管理项目时，使用该命令（--compile-commands-dir=）产生的compile_commands.json会放到指定文件夹下同时该文件帮助你找到头文件信息索引        // 格式：--compile-commands-dir=项目中compile_commands.json所在的文件夹路径        "--compile-commands-dir=${workspaceFolder}/build",  // 示例：项目根目录下的build文件夹                // 【核心】指定编译器路径（解决标准库头文件找不到的问题）        // 通配符匹配编译器路径（如ARM交叉编译器、x86编译器）        // 格式：--query-driver=编译器可执行文件的路径（支持*通配符）        // "--query-driver=${userHome}/tools/gcc-arm-none-eabi-10.3-2021.10/bin/arm-none-eabi-g*"  // 示例：ARM编译器路径        "--query-driver=D:/mingw64/bin"    ]}</code></pre><h4>（1）参数说明（必看）</h4><ol><li><p><strong><code>--compile-commands-dir</code></strong>：必须指向项目中<code>compile_commands.json</code>文件所在的文件夹（该文件是 Clangd 理解项目结构的 &ldquo;地图&rdquo;）。</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;若用 CMake 构建，可在 cmake 命令中添加&lt;code&gt;-DCMAKE_EXPORT_COMPILE_COMMANDS=ON&lt;/code&gt;生成该文件（默认在 build 目录下）。&lt;/li&gt;&lt;li&gt;若项目无该文件，Clangd 可能无法识别头文件路径，导致&lt;code&gt;#include&lt;/code&gt;报错。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;--query-driver&lt;/code&gt;&lt;/strong&gt;：用于告诉 Clangd 项目使用的编译器路径（如交叉编译器、本地 GCC/Clang），确保其能找到编译器自带的标准库头文件（如&lt;code&gt;stdio.h&lt;/code&gt;）。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;路径需用通配符&lt;code&gt;*&lt;/code&gt;匹配编译器可执行文件（如&lt;code&gt;arm-none-eabi-gcc&lt;/code&gt;、&lt;code&gt;arm-none-eabi-g++&lt;/code&gt;可统一用&lt;code&gt;arm-none-eabi-g*&lt;/code&gt;匹配）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h4>（2）验证配置是否生效</h4><ol><li><strong>重启 VSCode</strong>：按下<code>Ctrl+Shift+P</code>，输入 &ldquo;Reload Window&rdquo; 并回车，让配置生效。</li><li><strong>打开项目文件</strong>：如<code>main.c</code>，观察<code>#include</code>语句下方是否有红色波浪线（若消失，说明头文件识别成功）。</li><li><strong>查看 Clangd 日志</strong>：按下<code>Ctrl+~</code>打开终端，切换到 &ldquo;Output&rdquo; 面板，选择 &ldquo;Clangd&rdquo;。<ul><li>若日志中无<code>E[时间戳]</code>开头的错误（如 &ldquo;cannot find header&rdquo;），则配置成功；</li><li>若有错误，检查<code>--compile-commands-dir</code>和<code>--query-driver</code>路径是否正确。</li></ul></li></ol><h4>（3）特别提醒</h4><ul><li><strong>工作区设置 vs 用户设置</strong>：若有多个 C/C++ 项目（如不同架构、不同编译器），务必用 &ldquo;Workspace Settings&rdquo;（仅对当前项目生效），避免配置冲突。</li><li><strong>新项目需重新配置</strong>：每个项目的<code>compile_commands.json</code>路径和编译器路径可能不同，新项目需重新修改<code>--compile-commands-dir</code>和<code>--query-driver</code>。</li><li>确保<code>--query-driver</code>的路径与项目级<code>.clangd/config.yaml</code>中<code>Compiler</code>项一致（若有），否则可能导致标准库识别混乱。</li></ul><p>通过以上步骤，Clangd 插件就能正确解析项目代码，提供准确的代码补全、跳转定义、语法检查等功能了。</p><p>注：验证：打开一个 C/C++ 文件，观察代码补全、跳转定义等功能是否正常工作，同时可通过 VSCode 的 &ldquo;输出&rdquo; 面板（选择 &ldquo;Clangd&rdquo;）查看日志，确认是否成功加载自定义的&nbsp;<code>clangd</code>。</p><h2>2.6 安装cmake</h2><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/94343b98ecc24dbf961ed797ac414c95.png"></p><p>我这里选择的二进制包，你可以下载.msi来安装，这种就是很直观但会增加一些注册表，但是，如果你直接拿源码是不行的，需要自己去编译得到可执行工具链。要下载二进制包，然后将bin文件夹工具链路径加入系统环境变量。这是个人习惯问题。</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/4cef572ea1ee4e199d2a15e316fe25b1.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/056c07c738c04068b5bd1c0a9c10c12b.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/be37655961484fec9626ce73d7e6b176.png"></p><h2>2.7 安装VSCode的CMake插件</h2><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/6188f8b628994d57ae6b8d77f3ae45d5.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/3339aa69f4904df898c9749cd8ddf064.png"></p><h2>2.8 如果后续需要调试，就需要安装这个插件，提示：这个插件会下载很久建议找到VSIX的外部http地址进行下载</h2><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/d8800b25c5a54ff78fd5e7766b351772.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/4162624540da477cb228ab3ff2cc0bdb.png"></p><p>会出现</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/d7fb19b395ef40ddbaf988055c80da68.png"></p><h1>三、初步使用</h1><p><strong>说明：</strong>自己可以尝试当一个大型项目找对应的函数实现，会发现微软那个c/c++插件查找索引会比较慢以及占用内存，相对之下Clangd的效果就好的多。</p><p>目前搭配方案是：MINGW的编译器+Clangd的代码补全以及其他功能。你也可以使用clang++代替c++</p><h2>3.1 未使用CMake版本</h2><p>这里可以写个小代码进行测试，clangd是否运行正常，一般头文件出现下划线，以及传值前面会有函数形参变量名提示，以及能够正常跳转，就表示是正常的</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/2c413ecf695f44dca1ad679211a78d21.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/ab9a025223f44a7a9cda873b9e54e937.png"></p><p>右击鼠标，能够正常跳转</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/a43500105a004612ae82d95f6b212080.png"></p><p>这个配置文件就再指定了一下编译器路径。</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/6c04107a67a64997ba6c1bd57f5ab74b.png"></p><h2>3.2 使用CMake版本</h2><p>参考：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="【Embedded System】【CMake】Windows下CMake+VSCode的开发环境搭建以及初步认识_如何利用vscode和cmake 搭建c++开发环境-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/154009851?spm=1001.2014.3001.5502" title="【Embedded System】【CMake】Windows下CMake+VSCode的开发环境搭建以及初步认识_如何利用vscode和cmake 搭建c++开发环境-CSDN博客">【Embedded System】【CMake】Windows下CMake+VSCode的开发环境搭建以及初步认识_如何利用vscode和cmake 搭建c++开发环境-CSDN博客</a></p><p>错误现象（原因是因为使用clangd+cmake，你需要在cmake顶层文件里开启一个产生特殊文件的选项来让clangd识别到各个头文件）：<br /><!-- <img alt="" height="1031" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/795825607c6a44c78313ca0320e4205f.png" width="1906" /></p> --><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/795825607c6a44c78313ca0320e4205f.png"></p><p>这里简单描述一下怎么使用cmake，需要将加法函数c/h文件放入一个子文件夹，可以将这个子文件夹编译为单独一个静态库提供给根目录下的main文件使用，根目录和add子文件夹分别需要cmake文件，根目录下的cmake文件（顶层cmake）为主</p><h3>3.2.1 代码</h3><h4>（1）add</h4><p>add.h</p><pre><code class="hljs">#ifndef __ADD_H__#define __ADD_H__int add(int a, int b);#endif // !__ADD_H__</code></pre><p>add.c</p><pre><code class="hljs">#include "add.h"int add(int a, int b){    return a+b;}</code></pre><p>CMakeLists.txt</p><pre><code class="hljs">cmake_minimum_required(VERSION 3.10)add_library(add STATIC add.cpp)target_include_directories(add PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})</code></pre><h4>（2）根目录</h4><p>.clangd</p><pre><code class="hljs">CompileFlags:  Add: []  Remove: []  Compiler: D:/mingw64/bin/c++*</code></pre><p>main.cpp</p><pre><code class="hljs">#include &lt;iostream&gt;#include &lt;string&gt;#include "add.h"int main() {    std::string name;    std::cout &lt;&lt; "Enter your name: ";    std::getline(std::cin, name);    std::cout &lt;&lt; "Hello, " &lt;&lt; name &lt;&lt; "!" &lt;&lt; std::endl;    int a = 1;    if (a == 1) {        std::cout &lt;&lt; "a is 1" &lt;&lt; std::endl;    }    std::cout &lt;&lt; "add: " &lt;&lt; add(1, 1) &lt;&lt; "!" &lt;&lt; std::endl;    return 0;}</code></pre><p>E9_clang_test.code-workspace</p><pre><code class="hljs">{"folders": [{"path": "."}],"settings": {"clangd.arguments": ["--background-index","--background-index-priority=low","--clang-tidy","--completion-style=detailed","--fallback-style=Google","--function-arg-placeholders=false","--header-insertion=never","--header-insertion-decorators","--import-insertions","--rename-file-limit=0","--enable-config","-j=18","--pch-storage=memory","--pretty","--compile-commands-dir=${workspaceFolder}/build","--query-driver=D:/mingw64/bin/c++*"]}}</code></pre><p>CMakeLists.txt</p><pre><code class="hljs"># 主目录 CMakeLists.txtcmake_minimum_required(VERSION 3.18)project(E9_clang_test)  # 项目名可保持不变# 开启编译数据库生成（关键！clangd依赖这个文件）set(CMAKE_EXPORT_COMPILE_COMMANDS ON)# 关键：添加子目录（编译add模块）add_subdirectory(add)# 定义可执行程序目标（目标名：E9_clang_test）add_executable(E9_clang_test main.cpp)# 链接add库（目标名必须和上面的add_executable一致）target_link_libraries(E9_clang_test add)</code></pre><p><span style="color:#fe2c24">注意：</span></p><p><span style="color:#fe2c24"># 开启编译数据库生成（关键！clangd依赖这个文件）<br />set(CMAKE_EXPORT_COMPILE_COMMANDS ON)</span></p><h3>3.2.2&nbsp;代码编译执行</h3><h4>（1）cmake配置，选择对应的编译器，然后就会先配置一些东西，此时就会产生<code>compile_commands.json</code>，然后可以<code>clangd: Restart Language Server</code>&nbsp;重启服务</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/84917224c969468eaba08013d298aa02.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/818bde999f004096a38b9afbcbecbb65.png"></p><h4>（2）在 VS Code 中按&nbsp;<code>Ctrl+Shift+P</code>，输入&nbsp;<code>clangd: Restart Language Server</code>&nbsp;重启服务，clangd 会重新读取&nbsp;<code>compile_commands.json，就会发现头文件就不会报红了</code></h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/48c4d9940bad43f0918504d63d5bd4dd.png"></p><h4>（3）在 VS Code 中按&nbsp;<code>Ctrl+Shift+P</code>，输入 cmake build</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/07ab5270fc8a4330ad25d74c133eb5a8.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/6fa385c3e2194668ac6c50fc1343ddf5.png"></p><h4>（4）执行可执行文件</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/65adc71dcbf04ed6809b46cbe00a8b6d.png"></p><h4>（5）尝试调试，点击调试目标设置，通过cmake插件工具进行配置项目的调试方式文件launch.json，或者直接从CodeLLDB的调试按钮开始也可以</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/1b67dad8a4ff436898d8a9cd634d1a74.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/c35412c1978e406d9f3025f0e37b1212.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/ba13409712dd4f12ba3b72789605be73.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/148b8af31f764caca16b515683c35234.png"></p><p>或者CodeLLDB</p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/12c9dfcc73764e4e898b5bf85e90f311.png"></p><h4>（6）查看launch</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/71f8320ef359478d90f9b6419593d3c9.png"></p><h4>（7）现在开始CodeLLDB，左上角直接点击出现错误，要找到可执行文件，&quot;program&quot;: &quot;${workspaceRoot}/build/E9_clang_test.exe&quot;,</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/5e959b7f3b854057a149856f6475899f.png"></p><h4>（8）这里发现我使用的：vscode的 G++编译器+Clangd代码补全+lldb（CodeLLDB） 不能调试（不知道为什么打了断点后，点击使用lldb调试后就马上全部执行并退出，断点灰色且空心），原因可能是：G++编译出来的调试版本的代码的调试符号与lldb不适配，可能需要更换为clang编译出来的文件进行调试。这里我把C/C++ Extension Pack再打开，换为cppdbg调试，可能会跳出一个智能补全类型的功能提示与clang冲突了，点击disable关掉，然后就可以正常进行单步调试。</h4><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/8e641441e566453a96f8c41e5dfa8a7a.png"></p><p><img src="/2025/11/11/%E3%80%90VSCode%E3%80%91%E3%80%90Clangd%E3%80%91Win%E4%B8%8B%E7%9A%84%E5%9F%BA%E4%BA%8ELLVM!Clangd+Clangd%E6%8F%92%E4%BB%B6+MINGW+CMake%E7%9A%84VSCode%E9%85%8D%E7%BD%AEC!C++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/c25bb7d1f3824c8cbecb65da9a2cd421.png"></p><p></p>]]></content>
    
    
    <categories>
      
      <category>VSCode学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vscode c++ ide clangd LLVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】PS的简要安装步骤</title>
    <link href="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/"/>
    <url>/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/a09e2c859c524d229645eb07c1a75a6a.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/d126daab20b242d9af6e698aede553c6.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/96ea5882e70e460a9da419cb157ab2fa.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/8a0a6f3afdfe40d7be50970387196bae.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/2335b82e78484a4ea060bc96c8e14327.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/b14d2a149eee4d25a4204b9a7d4c144c.png"></p><p><img src="/2025/11/11/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91PS%E7%9A%84%E7%AE%80%E8%A6%81%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4/4e46235dbd4040588bca9e94338b354d.png"></p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ps</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【JAVA】在Windows实体机的安装多个JDK，如JDK8、JDK17，并手动切换JDK</title>
    <link href="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/"/>
    <url>/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、下载</h1><p>需要登录账号才能使用</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Java Downloads | Oracle" href="https://www.oracle.com/java/technologies/downloads/" title="Java Downloads | Oracle">Java Downloads | Oracle</a></p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/1201d6c5295b41f1b273b866b35c8e3d.png"></p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/dd225472ce184b57abc1b79c70827915.png"></p><p>解压后</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/f13d75d4aacb4e478ff6f00042eb3be0.png"></p><p>注：往期版本在 java archive&nbsp;归档里</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/2d7447ce32d448ac903991f4a84758ff.png"></p><h1>二、使用系统环境变量管理</h1><p>新建</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/920b171dae8749a3b1050e9e2d584765.png"></p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/20eebfb3b2754122a803e74c37a727ac.png"></p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/20bad93e37684c678c32a1a7dcca6718.png"></p><p>在系统环境变量的Path下新建</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/3fcc1584effb495793a9599f10a97c6f.png"></p><h1>三、效果</h1><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/4e651629f7664034bc0e388f0876e516.png"></p><p>然后，改为JAVA17_HOME,重新开一个窗口</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/be3607de99d34e53adab0417c68b78f6.png"></p><p>成功</p><p><img src="/2025/11/11/%E3%80%90JAVA%E3%80%91%E5%9C%A8Windows%E5%AE%9E%E4%BD%93%E6%9C%BA%E7%9A%84%E5%AE%89%E8%A3%85%E5%A4%9A%E4%B8%AAJDK%EF%BC%8C%E5%A6%82JDK8%E3%80%81JDK17%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2JDK/4240443fda6540be9fe554bdb872cdbc.png"></p><p></p>]]></content>
    
    
    <categories>
      
      <category>高级程序语言学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java JDK管理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Android Studio】Android Studio的安装过程以及初步使用</title>
    <link href="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p><strong>Android Studio 是谷歌官方推出的 Android 应用开发集成开发环境 (IDE)</strong>，基于强大的 IntelliJ IDEA 平台构建，专为 Android 应用开发量身定制，提供一站式开发解决方案。</p><h2>核心特点</h2><ul><li><strong>官方背书</strong>：Google 官方推荐的 Android 开发工具，与 Android 生态深度集成</li><li><strong>多语言支持</strong>：主要支持<strong>Kotlin</strong>(官方推荐)、<strong>Java</strong>和 **C++** 编程语言</li><li><strong>强大编辑器</strong>：智能代码补全、语法高亮、实时代码检查和自动修复</li><li><strong>基于 Gradle 构建</strong>：灵活的构建系统，简化依赖管理和项目配置</li></ul><h2>主要功能</h2><h3>1.&nbsp;<strong>UI 设计工具</strong></h3><ul><li><strong>拖拽式布局编辑器</strong>：直观设计界面，实时预览效果</li><li><strong>Jetpack Compose 支持</strong>：现代化声明式 UI 框架，提高开发效率</li><li><strong>多设备适配</strong>：一键预览应用在不同屏幕尺寸和设备上的显示效果</li></ul><h3>2.&nbsp;<strong>开发与调试</strong></h3><ul><li><strong>Android 模拟器 (AVD)</strong>：无需物理设备即可测试应用</li><li><strong>性能分析工具</strong>：CPU Profiler、Memory Profiler、Network Profiler 等</li><li><strong>代码分析与优化</strong>：内置 Lint 工具检查代码质量，提供改进建议</li></ul><h3>3.&nbsp;<strong>项目管理</strong></h3><ul><li><strong>模块化开发支持</strong>：轻松管理大型项目，实现组件化开发</li><li><strong>版本控制集成</strong>：与 Git 无缝集成，方便团队协作</li><li><strong>SDK 自动管理</strong>：内置 SDK 管理器，一键安装所需 Android 版本&nbsp;</li></ul><h2>最新版本</h2><p>当前最新稳定版本为<strong>Android Studio Narwhal 3 Feature Drop (2025.1.3)</strong>，提供更强大的性能和新特性，如改进的 AI 辅助开发功能。&nbsp;</p><h2>优势</h2><table><thead><tr><th>优势</th><th>说明</th></tr></thead><tbody><tr><td><strong>专业专注</strong></td><td>专为 Android 开发设计，提供全套 Android 开发工具链</td></tr><tr><td><strong>生态集成</strong></td><td>与 Google 服务 (如 Firebase) 无缝集成</td></tr><tr><td><strong>社区支持</strong></td><td>庞大开发者社区，丰富的插件和资源</td></tr><tr><td><strong>持续更新</strong></td><td>Google 定期发布更新，修复问题并添加新功能</td></tr></tbody></table><h2>适用场景</h2><ul><li><strong>Android 应用开发</strong>：从简单 APP 到复杂企业级应用</li><li><strong>跨平台开发</strong>：结合 Kotlin Multiplatform 构建共享代码库</li><li><strong>学习 Android 开发</strong>：提供友好的入门教程和模板</li></ul><h2>总结</h2><p>Android Studio 作为 Android 开发的官方 IDE，集成了从代码编写到应用发布的全流程工具，是 Android 开发者的首选平台。无论您是初学者还是经验丰富的开发者，它都能提供高效、专业的开发体验，帮助您构建优质的 Android 应用。</p><h1>二、安装过程</h1><h2>2.1 官网地址</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="下载 Android Studio 和应用工具 - Android 开发者  |  Android Developers" href="https://developer.android.google.cn/studio?hl=zh-cn" title="下载 Android Studio 和应用工具 - Android 开发者  |  Android Developers">下载 Android Studio 和应用工具 - Android 开发者 &nbsp;|&nbsp; Android Developers</a></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/622c27814fba44aea1ee11ca65215e90.png"></p><p>阅读版本说明里的旧版Android Studio，调为英文模式，如果加载太久可能需要魔法，点击同意就可以下载往期的Android Studio版本了</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/d3faa21ae62f44f088fc95cbf01fb2f6.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/91b201dee8c34bb2abe4225fc7138c61.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/7a9b9aeba3f94978ae26243f218a397d.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ce7642c15af44fef8a52666a28b0addf.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/42d5c5a847ee4c0b90e0b57cb50902f0.png"></p><h2>2.2 我下载最新的版本（非exe安装程序）</h2><p>第二个</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/158181ef0a134f0fa413a2f16bac6d9b.png"></p><h2>2.3 解压打开，存放软件的文件夹必须是英文且不能有空格</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/b038829c5acf4da493459f66425d1e36.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/6eb50ab568a542c9b65ce6abd0facb41.png"></p><h2>2.4 点击打开，选择不发送信息</h2><h2>2.5 NEXT</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c8ce69b1aa1042a7b43a79733c78060f.png"></p><h2>2.6 选择自定义安装，如果弹出没有识别到SDK就取消不要管，后面自定义安装会配置，不然SDK会默认安装到C盘</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/70b377e756854c5e86c55120d1bc21a7.png"></p><h2>2.7 新建一个文件夹放SDK，配置路径</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/656804122b594b6ab0e8403883d474ee.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f3a0536a27184739a02e891a839c7071.png"></p><h2>2.8 点击accept，全部都要下载，NEXT</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/74d6e8ea64974f05aad0610484f97df4.png"></p><h2>2.9 等待下载完毕</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/526c60e18d3148d1b06ef9029ec2ca7b.png"></p><h2>2.10 点击完成finish</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4bdab77276ef46cc96d83ff894fbcb8b.png"></p><h1>三、初步尝试创建项目</h1><h2>3.1 工程模板选择</h2><p>选择中间的模板</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f1dc85644b3748ed9da5557dbdaeb388.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4c7931de5c8c4040abed849c3404a77e.png"></p><h2>3.2 配置工程</h2><p>在 Android Studio 创建 &ldquo;Empty Views Activity&rdquo; 项目时，该模板的配置流程较为简洁，没有后续需要进一步配置的步骤，因此 &ldquo;Next&rdquo; 按钮处于不可点击状态，直接点击 &ldquo;Finish&rdquo; 按钮即可完成项目创建。</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/92ba5abe03cc43df83a5b8595f366a02.png"></p><h2>3.3 等待工程里下载完毕各种依赖，如果很慢，就要开魔法或者选择国内的镜像源进行镜像加速。</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/57aa5543c67c4792b1238247981748fd.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/31780d6096fd443c9d283f85471a5042.png"></p><h2>3.4&nbsp;更改为国内的镜像源进行镜像加速</h2><p>原始：</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/05b15a7637f14061859f7b041a0d17b2.png"></p><p>更换：</p><pre><code>https://mirrors.aliyun.com/macports/distfiles/gradle/gradle-8.13-bin.zip</code></pre><p>点击try again，或者尝试点击锤子按钮</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5891eca5200e45e9b6c0add2cdb9db52.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/eeb0e38136f54b1aa257a7a15f0e0eeb.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/dada8c6e6f734406ba024b1819756327.png"></p><h2>3.5&nbsp;根据自己的实际需求，选择自己的开发平台（设备）：自带的手机模拟器、真实手机、PC模拟器</h2><p>需要连接设备</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c996a8440f964575b5217138ada578ac.png"></p><h3>方法一：Android Studio自带的模拟器</h3><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/e36b25b45e1343c1959c7169915864a4.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/22989fd7394849e59f0b77b2cde97032.png"></p><p>根据需求配置</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/00968c7ab30a4b659a6b4487b37d618b.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5163b76e7e6a48c7b2d9ace626b2874f.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/9a507012137e4e398578259b32db44db.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/6351400bb77a4178b1aff7862affda01.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a0f6bce103c3468c9c3b79debb47bdfd.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/32183cbc667e4d16b8750ea3aded258c.png"></p><h3>方法二：实际手机，开启USB调试模式</h3><p></p><h3>方法三：PC MUMU模拟器，开启网络桥接</h3><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/54045a20c29d428a91ecd7f3aa19351c.png"></p><h2>3.6&nbsp;笔者使用mumu模拟器，然后进行更改模拟器的配置，使其能够让Android Studio能够接入模拟器</h2><p>安装驱动，打开桥接</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c81eb2d415f841dca70f1003c8f6f35f.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/81d5628fae7b479d980b7ed153766de6.png"></p><p>改为手机的配置，然后重启</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5f95aff5f4c046be9e1f6eae421cca58.png"></p><p>如果没有看到，需要将模拟器重启才能识别到</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/fc564f6815f4489c80fdcbe4970c2857.png"></p><h2>3.7 进入app的入口文件</h2><pre>activity_main</pre><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/de04553f33d04abf9f26f6687fb37a44.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/fe7c3ae314494e7d9af56a13179d6967.png"></p><p>切到Android，可以不看到其他的文件</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a52402237a8e494b80377c0acdbb93f9.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/0dea8d35a56a47ab9d35501b7b82dff0.png"></p><h2>3.8 连接设配运行</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/e5247baa55c348409bfebddb8f439203.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a059534f990f4a5d84b1e87b4a962031.png"></p><h2>3.9 打包APK</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/02f36a87c24e42bc892d10ecf26d9a3a.png"></p><p>点击蓝色的</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4f722f705eab47aaa41b46781821c09a.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/d3f41169c279422dbc215225958dec57.png"></p><h2 style="background-color:transparent">3.10 汉化</h2><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a29055ed9d624ae0a490896f57f70e18.png"></p><p>查看版本，安装对应的汉化插件版本，但是最新的没有汉化版本，要么不安装，要么需要改一下插件</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/3292c5942cd04a86a216b59d474775ba.png"></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Chinese (Simplified) Language Pack / 中文语言包 Plugin for JetBrains IDEs | JetBrains Marketplace" href="https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack----/versions" title="Chinese (Simplified) Language Pack / 中文语言包 Plugin for JetBrains IDEs | JetBrains Marketplace">Chinese (Simplified) Language Pack / 中文语言包 Plugin for JetBrains IDEs | JetBrains Marketplace</a></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/79c4c244be4b46bf8bc60cffcbf4cb97.png"></p><p>下载242.152，使用压缩工具打开，再打开.jar文件修改plugin.xml文件的版本描述</p><p>注意：使用更改时，一定要使用压缩工具同意加载更改后的操作</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5576dd16cbaa434a995f504fab9c9620.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/7338fc214e144a009cfbe0ba3fa5b15a.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/1e8a00314ae6497181a1ed1dc38b11d9.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/cadd22cf8b684e538a7a3f00274425df.png"></p><p>选择从磁盘导入外部插件</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ee7ee86ecf7b416ca0415de2839e5365.png"></p><p>到外观下的系统设置的语言与地区设置</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/98b2aa8485f544f3bd5a5d15ac96d5bf.png"></p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/aa653ae99a644cb39bd72544bfb55482.png"></p><p>这个不过是临时方法，以及这个操作不知道会引发什么错误，当如果要进行项目级开发请换回英文，防止插件崩溃导致代码丢失</p><p><img src="/2025/11/07/%E3%80%90Android%20Studio%E3%80%91Android%20Studio%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/55b95fb8d9454f69aac6d5c90f00078d.png"></p>]]></content>
    
    
    <categories>
      
      <category>Android学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>android studio android ide</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】基于SemVer策略的软件版本号管理规范命名规则</title>
    <link href="/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/"/>
    <url>/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、解析企业发布的软件版本号管理规范</h1><p><img src="/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/3f550b2d6b194735af322b19cca7e17c.png"></p><p><img src="/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/aedf0bf4899441e59c6fdf38ae88b3ab.png"></p><p><img src="/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/83bd621a13884cdfaa5daeec6e366d65.png"></p><p>一般以v开头</p><p>然后便是vA.B.C-D（A：jpegxl B：次版本号 C：修订版本号 D：希腊字母版本号）</p><p>也有些时候会是</p><p>示例：1.2.3.20251106_beta（主 1：稳定架构；次 2：新增兼容功能；修订 3：Bug 修复；20251106：修改日期；beta：小范围测试阶段）</p><table><thead><tr><th>组成部分</th><th>格式规则</th><th>约束条件（轻量化落地）</th></tr></thead><tbody><tr><td>主版本号</td><td>非负整数（0/1 起始）</td><td>无前置零（如 &ldquo;1&rdquo; 而非 &ldquo;01&rdquo;），仅递增，开发者自主决策</td></tr><tr><td>次版本号</td><td>非负整数</td><td>无前置零，主版本号变更时归 0，仅递增</td></tr><tr><td>修订版本号</td><td>非负整数</td><td>无前置零，次版本号变更时归 0，仅递增</td></tr><tr><td>日期版本号</td><td>8 位数字（YYYYMMDD）</td><td>每日修改必更新，单日多次修改仅递增修订号（如 1.2.1&rarr;1.2.2，日期不变）</td></tr><tr><td>希腊字母版本号</td><td>小写英文（可加数字后缀）</td><td>标识开发阶段，无需复杂评审，开发者按进度更新（如 beta.1&rarr;beta.2）</td></tr></tbody></table><h1>二、各版本号变更规则</h1><h2>2.1 主版本号（Major）：企业级 &ldquo;突破性变更&rdquo; 标识</h2><h4>变更场景（满足任一即可，独立开发者自主判断）</h4><ol><li>软件架构重构（如从单文件脚本改为模块化项目，核心逻辑重写）；</li><li>API 不兼容变更（如旧版本调用get_data()，新版本改为fetch_data()，需用户改代码）；</li><li>新增重大功能体系（如个人笔记软件新增 &ldquo;云同步模块&rdquo;，从本地工具升级为云端工具）。</li></ol><h4>联动规则：主版本号递增后，次版本号、修订版本号<strong>强制归 0</strong>（如 1.3.2&rarr;2.0.0）。</h4><h2>2.2 次版本号（Minor）：企业级 &ldquo;兼容性功能新增&rdquo; 标识</h2><h4>变更场景（满足任一即可）</h4><ol><li>新增不影响 API 兼容的功能（如笔记软件增加 &ldquo;Markdown 预览&rdquo; 功能，旧用户无需改操作）；</li><li>现有功能优化（如搜索速度提升、界面主题切换，不改变核心逻辑）；</li><li>API 标记 &ldquo;Deprecated&rdquo;（如提示 &ldquo;old_func()将在 2.0 版删除，建议用new_func()&rdquo;，暂不删除旧 API）。</li></ol><h4>联动规则：次版本号递增后，修订版本号<strong>强制归 0</strong>（如 1.2.5&rarr;1.3.0）。</h4><h2>2.3 修订版本号（Revision）：企业级 &ldquo;Bug 修复与小变动&rdquo; 标识</h2><h4>变更场景（满足任一即可，独立开发者灵活判断）</h4><ol><li>修复功能 Bug（如笔记保存失败、导出格式错乱）；</li><li>非功能性调整（如补充 README 文档、优化代码注释、调整日志打印格式）；</li><li>轻微体验优化（如按钮位置调整、弹窗提示文案修改，不影响功能使用）。</li></ol><h4>联动规则：仅独立递增，不影响主 / 次版本号（如 1.3.0&rarr;1.3.1）。</h4><h2>2.4 日期版本号：企业级 &ldquo;时间追溯&rdquo; 核心</h2><ul><li><strong>变更规则</strong>：每日有代码修改（无论功能 / BUG 修复），必须更新为当天日期（如 2025 年 11 月 7 日改为 20251107）；</li></ul><ul><li><strong>责任角色：</strong>独立开发者自行同步，无需报备（适配单人流程）。</li></ul><h3>2.5 希腊字母版本号：企业级 &ldquo;开发阶段&rdquo; 透明化</h3><p>核心用于向用户 / 合作方清晰传递版本状态，<strong>阶段递进时必更新</strong>，独立开发者无需复杂评审，按实际进度调整：</p><table border="1"><tbody><tr><td><p>标识</p></td><td><p>阶段名称</p></td><td><p>企业级场景适配（独立开发者落地）</p></td></tr><tr><td><p>alpha</p></td><td><p>内部测试版</p></td><td><p>功能初步实现，仅自己 / 核心测试用户使用（如发给 1-2 个信任的用户帮忙找 Bug），不对外公开（如 0.2.0.20251110_alpha）</p></td></tr><tr><td><p>beta</p></td><td><p>小范围测试版</p></td><td><p>消除严重 Bug，功能基本完整，开放给 10-20 个潜在用户测试（如开源项目发 GitHub Release 的 Beta 版）（如 0.2.1.20251115_beta.2）</p></td></tr><tr><td><p>rc</p></td><td><p>候选发布版</p></td><td><p>功能冻结（不再加新功能），仅修复测试反馈的 Bug，接近正式版（如客户定制软件的 &ldquo;最终确认版&rdquo;）（如 1.0.0.20251118_rc.1）</p></td></tr><tr><td><p>release</p></td><td><p>正式交付版</p></td><td><p>经多轮测试无关键 Bug，可正式交付用户 / 上架平台（如上传应用商店、给客户最终版本），也可用企业级 &ldquo;GA&rdquo; 替代（如 1.0.0.20251120_GA）</p></td></tr></tbody></table><h1>三、扩展版本标识</h1><p>保留企业级扩展逻辑，仅筛选独立开发者常用标识，格式：核心版本号_扩展标识：</p><table border="1"><tbody><tr><td><p>扩展标识</p></td><td><p>含义</p></td><td><p>企业级场景适配（独立开发者用例）</p></td></tr><tr><td><p>dev</p></td><td><p>开发快照版</p></td><td><p>用于自己记录开发进度（如每日下班前提交的版本，标记1.0.1.dev3.20251107），避免混乱</p></td></tr><tr><td><p>hotfix</p></td><td><p>紧急修复版</p></td><td><p>正式版交付后发现重大 Bug（如客户反馈 &ldquo;无法登录&rdquo;），紧急修复的版本（如 1.0.0.hotfix1.20251122）</p></td></tr><tr><td><p>Trial</p><pre><code class="hljs">&lt;p&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;试用版&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;给潜在客户短期试用（如开放 7 天全功能试用，标记1.0.0.20251120_Trial），便于转化付费用户&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;p&gt;Lite/Pro&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;精简版 / 专业版&lt;/p&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;多版本运营（如工具软件分 &amp;ldquo;Lite 版（免费，限 3 个项目）&amp;rdquo; 和 &amp;ldquo;Pro 版（付费，无限制）&amp;rdquo;，标记1.0.0.20251120_Lite）&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;</code></pre></table><h1>四、企业级特殊规则（独立开发者必遵守）</h1><p><strong>初始阶段标识</strong>：主版本号为 &ldquo;0&rdquo;（如 0.x.x.x）时，表示软件处于原型验证期（企业级 &ldquo;MVP 阶段&rdquo;），API 不稳定，适合快速试错（如 0.1.0.20251106_alpha）；</p><p><strong>版本不可回溯</strong>：版本一经发布（如上传 GitHub、发给用户），不得修改内容；需调整时必须发新版本（如 1.0.0_release 有 Bug，发 1.0.1_release），符合企业级 &ldquo;可追溯&rdquo; 要求；</p><p><strong>无前置零</strong>：主 / 次 / 修订版本号不得出现 &ldquo;01&rdquo;&ldquo;002&rdquo;（如 &ldquo;1.02.3&rdquo; 错误，应为 &ldquo;1.2.3&rdquo;），符合企业级格式规范；</p><p><strong>排序逻辑</strong>：企业级优先级规则（如 1.0.0_beta &lt; 1.0.0_release；beta.1 &lt; beta.2），确保用户 / 平台识别版本顺序。</p><h1>五、企业级版本管理（独立开发者轻量化落地）</h1><p>无需复杂工具，用基础工具实现企业级 &ldquo;可追溯&rdquo;：</p><p><strong>版本记录</strong>：维护简易<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="CHANGELOG.md" href="http://CHANGELOG.md" title="CHANGELOG.md">CHANGELOG.md</a>，记录核心信息（示例如下），替代企业级复杂文档：</p><p><code>## 1.0.0.20251120_release</code></p><p><code>- 新增：云同步功能（兼容旧版本数据）</code></p><p><code>- 修复：导出Excel格式错乱Bug</code></p><p><code>- 负责人：XXX（独立开发者姓名）</code></p><p><code>- 下载地址：[GitHub Release链接]</code></p><p><strong>Git 关联</strong>：</p><ul><li>提交代码时备注版本（如 &ldquo;[V1.0.1] 修复登录 Bug&rdquo;）；</li><li>发布版本时打 Tag（如git tag V1.0.0.20251120_release），便于回溯历史版本；</li></ul><ol><li><strong>文档同步</strong>：需求文档（如需求<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="_V1.0.0.md" href="http://_V1.0.0.md" title="_V1.0.0.md">_V1.0.0.md</a>）、使用手册（如手册_V1.0.0.pdf）标注对应版本，避免用户拿到 &ldquo;旧文档配新版本&rdquo;；</li><li><strong>归档管理</strong>：正式版（release/GA）压缩包命名含版本（如工具_V1.0.0_release_20251120.zip），存放在 &ldquo;版本归档&rdquo; 文件夹，避免混乱。</li></ol><h1>六、独立开发者常见场景示例（企业级规范落地）</h1><table border="1"><tbody><tr><td><p>场景描述</p></td><td><p>版本号命名</p></td><td><p>变更说明（企业级逻辑 + 独立操作）</p></td></tr><tr><td><p>开发个人笔记软件（原型期）</p></td><td><p>0.1.0.20251106_alpha</p></td><td><p>主 0（原型），次 1（首版核心功能：本地笔记），alpha（自己测试）</p></td></tr><tr><td><p>新增 &ldquo;Markdown 编辑&rdquo; 功能</p></td><td><p>0.2.0.20251110_alpha</p></td><td><p>次版本 + 1（兼容新增），修订归 0，继续内部测试</p></td></tr><tr><td><p>修复 &ldquo;笔记保存闪退&rdquo; Bug</p></td><td><p>0.2.1.20251112_beta</p></td><td><p>修订 + 1，日期更新，升级为 beta（发给 5 个用户小范围测试）</p></td></tr><tr><td><p>功能冻结，修复测试反馈 Bug</p></td><td><p>1.0.0.20251118_rc.1</p></td><td><p>主版本升 1（正式阶段），次 / 修订归 0，rc 版（给客户确认最终版）</p></td></tr><tr><td><p>正式上架应用商店</p></td><td><p>1.0.0.20251120_release</p></td><td><p>希腊字母更改为 release，打 Git Tag，归档安装包</p></td></tr><tr><td><p>紧急修复 &ldquo;云同步失败&rdquo; Bug</p></td><td><p>1.0.1.20251122_hotfix.1</p></td><td><p>修订 + 1，加 hotfix 标识，紧急发给用户修复</p></td></tr></tbody></table><h1>七、独立开发者工具适配建议（降低企业级规范落地成本）</h1><ul><li><strong>版本校验</strong>：用 VS Code 插件 &ldquo;SemVer Checker&rdquo; 自动校验版本格式（避免格式错误）；</li></ul><ul><li><strong>提交规范</strong>：用 &ldquo;Commitizen&rdquo; 插件生成标准化提交信息（如fix: 修复云同步Bug），便于后续追溯；</li></ul><ul><li><strong>Tag 管理</strong>：用 Git Desktop 可视化管理版本 Tag（无需记命令，点击即可打 Tag）；</li></ul><ul><li><strong>日志生成</strong>：用 &ldquo;standard-version&rdquo; 工具自动生成<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="CHANGELOG.md" href="http://CHANGELOG.md" title="CHANGELOG.md">CHANGELOG.md</a>（输入命令即可，无需手动写日志）。</li></ul><h1>八、总结</h1><p>&nbsp; &nbsp; &nbsp; &nbsp;在进行个人软件开发时，一般建议使用</p><p>（1）Software_v1.1.0.exe</p><p>（2）Software_v1.1.0.20251010.exe</p><p>（3）Software-1.1.0.exe</p><p>（4）Software-1.1.0-运行平台.exe或者Software-运行平台-1.1.0.exe</p><p>（5）Software-1.1.0-x64-Release.exe</p><p>（6）Software-1.1.0-beta-build003.exe</p><p>等等</p><p>基本上现在的规范都基于SemVer策略</p><p>笔者一般使用</p><p>（1）Software-i386/i686/x86_64-windows/linux-1.1.1-release.exe</p><p>（2）Software-armv7/aarch64-linux-1.1.1-release</p><p>然后，根据实际情况可能做些小删改进行版本号控制</p><p>带不带日期根据自己的需求，有时日期能够帮助我们更好的在软件出错是进行回滚和溯源。</p><p>记得在git提交时，打上tag</p><p>实际上每次进行版本更新不止版本号改变，提交后时，一定要注意注释进行了什么类型的改动，养成良好的软件管理习惯。(细节上的规定根据实际情况而定)</p><p>这将会帮助你在进行CI/CD进阶开发中，更好的形成企业级/产品级项目开发规范。（CI/CD包含了一整套的规范流程）</p><p><img src="/2025/11/05/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%9F%BA%E4%BA%8ESemVer%E7%AD%96%E7%95%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC%E5%8F%B7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/f4b660ef515c41eaa45aff26abe5b034.png"></p><pre><code class="language-cpp">fix(tab): [# 30 36] fix RTC initdel(tab): [# 30 36] del RTC init</code></pre>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>版本号规范 CICD</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Web】基于GitHub Pages+Hexo的学习制作个人博客网页</title>
    <link href="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/"/>
    <url>/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言：</strong><br />如果需要搭建起自己的个人品牌，那么个人博客网站是很需要的，在这里，基于GitHub Pages进行个人博客网页的搭建，因为正常的个人博客网页搭建需要去进行购买一个服务器（如果需要长期使用，即使长期租服务器也会受到容量的限制和经济限制）或者自行搭建一个家庭的服务器（涉及到服务器的维护以及防攻击的部署），需要有一定经济基础可支撑，同时，如果需要安全性就需要备案买一个域名，但是，基于GitHub Pages的公开静态网页免费托管和高容量，是一个很适合初学者的平台，当我们有一定经济基础可支撑，即可搭建完全属于自己的个人博客网页。</p><p>官方的相关说明：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="使用GitHub Page创建个人网站和博客 | GitHub 中文社区" href="https://www.github-zh.com/getting-started/github-pages" title="使用GitHub Page创建个人网站和博客 | GitHub 中文社区">使用GitHub Page创建个人网站和博客 | GitHub 中文社区</a></p><h1>一、部署步骤</h1><h2>1.1 准备GitHub账号</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="GitHub" href="https://github.com/" title="GitHub">GitHub</a></p><h2>1.2 本地安装git</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Git" href="https://git-scm.com/" title="Git">Git</a></p><p>应用部署hexo会用到。</p><h2>1.3&nbsp;安装NodeJS</h2><p>在本地电脑上安装好<code>NodeJS</code>，<code>Hexo</code>是基于<code>NodeJS</code>编写的，所以需要安装<code>NodeJS</code>和<code>npm</code>工具。</p><p>官网下载地址：<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="https://nodejs.org/zh-cn/download/" href="https://nodejs.org/zh-cn/download/" title="https://nodejs.org/zh-cn/download/">https://nodejs.org/zh-cn/download/</a></p><p>方法一：一直点击<code>Next</code>即可，安装完成后，安装包msi格式会自动添加到环境变量。</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/f6a2fd0a855140939bead72435c6d047.png"></p><p>方法二：</p><h3>（1）这里我会使用的独立二进制安装包<img alt="" height="562" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/7be98d72e28f495589c15f799f87caf1.png" width="718" /></h3><h3>（2）Win+r输入sysdm.cpl,进入高级设置环境变量</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/8de68e39e0474ddb9facbd4c226879f7.png"></p><h3>（3）在系统变量栏新建NODE_PATH</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/ec6791664d0942679b40012486f9f83f.png"></p><h3>（4）在path里使用通配符引用NODE_PATH</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/75c9e47a93724e03a259dd8203b890d2.png"></p><h3>（4）查看nodejs的包管理工具的版本和node的版本</h3><pre><code>PS C:\Users\zky&gt; npm -v11.6.1PS C:\Users\zky&gt; node -vv24.11.0PS C:\Users\zky&gt;</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/a325492f67dd457bb3ed89b0ab4ebad4.png"></p><h3>（5）配置全局安装和缓存路径</h3><p>新建<code>node_cache</code>（全局缓存路径）和<code>node_global</code>（全局安装路径）</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/cdd1a490fb264436a7fff7bd0127dd10.png"></p><h3>（6）添加到系统环境的path</h3><p>%NODE_PATH%\node_cache %NODE_PATH%\node_global</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/bb3a2569047d4c16bcd416401d435562.png"></p><h3>（7）如果有多个版本，系统环境变量谁在前就谁用的</h3><h3>（8）配置全局安装和缓存路径，使用管理员权限的命令窗</h3><p>默认状况下，在执行npm install -g XXXX时，下载了一个全局包，这个包的默认存放路径C:\Users\Administrator\AppData\Roaming\npm\node_modules下，能够经过CMD指令<code>npm root -g</code>查看</p><p>&quot;C:\Users\name\.npmrc&quot;</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/2e6103fb962d4d8e8b1e66490a3be46f.png"></p><pre><code>PS C:\Users\zky&gt; npm config set prefix "D:\node\node-v24.11.0-win-x64\node_global"PS C:\Users\zky&gt; npm config set cache "D:\node\node-v24.11.0-win-x64\node_cache"</code></pre><h3>（9）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="npmmirror 镜像站" href="https://npmmirror.com/" title="npmmirror 镜像站">npmmirror 镜像站</a></h3><p>经过npm安装模块时都是去国外的镜像下载的，使用国内镜像&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="淘宝 NPM 镜像" href="https://link.zhihu.com/?target=https%3A//npmmirror.com/" title="淘宝 NPM 镜像">淘宝 NPM 镜像</a>&nbsp;进行镜像加速</p><p><strong>添加国内镜像源：</strong>如果没有梯子的话，可以使用阿里的国内镜像进行加速。</p><ul><li><p>查看安装路径</p></li></ul><p><code>npm config ls // 查看安装路径</code></p><pre><code>npm config set registry https://registry.npm.taobao.org</code></pre><pre><code>PS C:\Users\zky&gt; npm config ls; "user" config from C:\Users\zky\.npmrccache = "D:\\node\\node-v24.11.0-win-x64\\node_cache"prefix = "D:\\node\\node-v24.11.0-win-x64\\node_global"; node bin location = D:\node\node-v24.11.0-win-x64\node.exe; node version = v24.11.0; npm local prefix = C:\Users\zky; npm version = 11.6.1; cwd = C:\Users\zky; HOME = C:\Users\zky; Run `npm config ls -l` to show all defaults.PS C:\Users\zky&gt;=====================================================================分别解释三个参数（1）npm local prefix = C:\Users\zkynpm local prefix 指的是「当前本地项目的前缀路径」，即 npm 识别的「当前项目的根目录」。它的作用是：当你在某个目录下执行 npm install（不带 -g 时，即「本地安装」），npm 会将依赖包安装到这个路径下的 node_modules 文件夹中，同时会读取 / 生成该路径下的 package.json 和 package-lock.json。你当前的情况：因为你在 C:\Users\zky 目录下执行 npm config ls，且这个目录下没有 package.json（非项目目录），所以 npm 会默认将「当前用户的主目录」作为临时的本地前缀（本质是找不到具体项目时的 fallback 机制）。简单说：local prefix 是「当前正在操作的项目的根目录」，本地安装的依赖会存在这里。（2）cwd = C:\Users\zkycwd 是「Current Working Directory（当前工作目录）」的缩写，即你在命令行中「当前所处的目录」。它是操作系统层面的概念，和 npm 无关，但 npm 会基于这个目录执行命令（比如找 package.json、确定 local prefix 等）。例如：你在 D:\my-project 目录下打开命令行，cwd 就会是 D:\my-project，此时 npm local prefix 也会默认是这个路径（如果该目录有项目文件）。（3）HOME = C:\Users\zkyHOME 指的是「当前用户的主目录」（Windows 系统中通常是 C:\Users\用户名）。它是系统级别的用户目录，npm 会在这里查找「用户级配置文件」（比如你的 .npmrc 就存在 C:\Users\zky\.npmrc），同时也是 npm 一些默认路径的基准（比如未修改配置时，默认的缓存和全局路径会基于此目录）。</code></pre><h3><code>npm local prefix</code>&nbsp;和&nbsp;<code>prefix</code>&nbsp;的核心区别</h3><table><thead><tr><th>维度</th><th><code>npm local prefix</code>（本地前缀）</th><th><code>prefix</code>（全局前缀）</th></tr></thead><tbody><tr><td><strong>作用</strong></td><td>存放「当前项目的本地依赖」（<code>npm install</code>&nbsp;不带&nbsp;<code>-g</code>&nbsp;时安装的包）。</td><td>存放「全局安装的依赖」（<code>npm install -g</code>&nbsp;时安装的包）。</td></tr><tr><td><strong>路径来源</strong></td><td>由当前命令行的工作目录（<code>cwd</code>）和项目文件（<code>package.json</code>）决定。</td><td>由用户通过&nbsp;<code>npm config set prefix &quot;路径&quot;</code>&nbsp;手动设置（你已设置到 D 盘）。</td></tr><tr><td><strong>依赖存放位置</strong></td><td>路径下的&nbsp;<code>node_modules</code>&nbsp;文件夹（如&nbsp;<code>C:\Users\zky\node_modules</code>，但仅当在此目录本地安装时）。</td><td>路径下的&nbsp;<code>node_modules</code>&nbsp;文件夹（你的是&nbsp;<code>D:\node\node-v24.11.0-win-x64\node_global\node_modules</code>）。</td></tr><tr><td><strong>典型使用场景</strong></td><td>开发具体项目时，安装项目专属的依赖（仅当前项目可用）。</td><td>安装全局工具（如&nbsp;<code>vue-cli</code>、<code>nodemon</code>），安装后在任何目录都能调用。</td></tr></tbody></table><h3>举个例子理解</h3><ul><li>如果你在&nbsp;<code>D:\my-project</code>&nbsp;目录下初始化一个项目（<code>npm init</code>），此时&nbsp;<code>npm local prefix</code>&nbsp;会变成&nbsp;<code>D:\my-project</code>，执行&nbsp;<code>npm install lodash</code>（本地安装），<code>lodash</code>&nbsp;会存到&nbsp;<code>D:\my-project\node_modules</code>。</li><li>执行&nbsp;<code>npm install -g nodemon</code>（全局安装），<code>nodemon</code>&nbsp;会存到你设置的&nbsp;<code>prefix</code>&nbsp;路径下（<code>D:\node\node-v24.11.0-win-x64\node_global\node_modules</code>），且在任何目录都能直接用&nbsp;<code>nodemon</code>&nbsp;命令。</li></ul><p>简单说：<code>local prefix</code>&nbsp;管「项目本地的依赖」，<code>prefix</code>&nbsp;管「全局可用的工具」，两者各司其职，互不冲突。你当前的配置中，全局路径已移到 D 盘，本地路径随项目位置变化（如果项目在 D 盘，<code>local prefix</code>&nbsp;也会在 D 盘），无需担心 C 盘占用问题。</p><h3>补充：</h3><p>经常使用的命令：</p><ul><li>npm -v：查看npm安装的版本。</li><li>npm init：会引导你建立一个package.json文件，包括名称、版本、作者等信息。</li><li>npm list：查看当前目录下已安装的node包。</li><li>npm ls：查看当前目录下已安装的node包。</li><li>npm install moduleNames：安装Node模块到本地目录node_modules下。</li><li>npm install &lt; name &gt; -g：将包安装到全局环境中。</li><li>npm install &lt; name &gt; --save：安装的同时，将信息写入package.json中，项目路径中若是有package.json文件时，直接使用npm install方法就能够根据dependencies配置安装全部的依赖包，这样代码提交到git时，就不用提交node_modules这个文件夹了。</li><li>npm install &lt; name&gt; --save-dev：安装的同时，将信息写入package.json中项目路径中若是有package.json文件时，直接使用npm install方法就能够根据devDependencies配置安装全部的依赖包，这样代码提交到git时，就不用提交node_modules这个文件夹了。</li><li>npm uninstall moudleName：卸载node模块。</li></ul><h2>1.4 创建github仓库</h2><p>填写仓库名，格式必须为<code>&lt;用户名&gt;.github.io</code>，然后点击<code>Create repository</code>。</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/1ad08b7579eb4bb0a4403b745db86705.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/7a4f9ba42f504ef3a3f6358d0cf751fc.png"></p><h2>1.5 创建示例网页</h2><p>点击<code>creating a new file</code>创建一个新文件，作为网站的主页。</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/47e008c84d29441eb50fa06cb002aad9.png"></p><h2>1.6 访问示例网页</h2><p>GitHub Pages中找到主页的地址为 https://&lt;&gt;.github.io/</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/63dcbb26db6645e7b80ab8a6ca274c4e.png"></p><p>演示<code>GitHub Pages</code>的使用方式</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/de6dbc9350664efe8883b97fe1d95960.png"></p><h2>1.7&nbsp;安装Hexo</h2><p>采用<code>Hexo</code>来创建博客网站，<code>Hexo</code>&nbsp;是一个基于<code>NodeJS</code>的静态博客网站生成器，使用<code>Hexo</code>不需开发，只要进行一些必要的配置即可生成个性化的博客网</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Hexo" href="https://hexo.io/zh-cn/" title="Hexo">Hexo</a></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/61aba4666944452c9d6c462fce99acd9.png"></p><p></p><pre><code class="language-bash"># 安装npm install -g hexo-cli# 查看版本hexo -v# 创建一个示例项目 hexo-blog hexo init hexo-blogcd hexo-blognpm install# 本地启动hexo ghexo server</code></pre><p>安装信息：</p><pre><code class="language-bash">PS C:\Users\zky&gt; npm install -g hexo-cliadded 54 packages in 30s14 packages are looking for funding  run `npm fund` for detailsPS C:\Users\zky&gt; hexo -vhexo-cli: 4.3.2os: win32 10.0.22621 undefinednode: 24.11.0acorn: 8.15.0ada: 3.3.0amaro: 1.1.4ares: 1.34.5brotli: 1.1.0cjs_module_lexer: 2.1.0cldr: 47.0icu: 77.1llhttp: 9.3.0modules: 137napi: 10nbytes: 0.1.1ncrypto: 0.0.1nghttp2: 1.66.0openssl: 3.5.4simdjson: 3.13.0simdutf: 6.4.0sqlite: 3.50.4tz: 2025bundici: 7.16.0unicode: 16.0uv: 1.51.0uvwasi: 0.0.23v8: 13.6.233.10-node.28zlib: 1.3.1-470d3a2zstd: 1.5.7</code></pre><p>浏览器访问 http://localhost:4000</p><pre><code class="language-bash">PS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo&gt; hexo init hexo-blogINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependenciesINFO  Start blogging with Hexo!PS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo&gt; ls    目录: E:\Node_Projects\Node_Programs_Workspaces\EX1_HexoMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----         2025/11/3     12:24                hexo-blogPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo&gt; cd hexo-blogPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; ls    目录: E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blogMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----         2025/11/3     12:23                .githubd-----         2025/11/3     12:24                node_modulesd-----         2025/11/3     12:23                scaffoldsd-----         2025/11/3     12:23                sourced-----         2025/11/3     12:23                themes-a----         2025/11/3     12:23             89 .gitignore-a----         2025/11/3     12:24         105518 package-lock.json-a----         2025/11/3     12:23            641 package.json-a----         2025/11/3     12:23              0 _config.landscape.yml-a----         2025/11/3     12:23           2547 _config.ymlPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; npm installadded 2 packages, and audited 242 packages in 2s37 packages are looking for funding  run `npm fund` for detailsfound 0 vulnerabilitiesPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo gINFO  Validating configINFO  Start processingINFO  Files loaded in 784 msINFO  Generated: archives/index.htmlINFO  Generated: archives/2025/index.htmlINFO  Generated: index.htmlINFO  Generated: css/style.cssINFO  Generated: archives/2025/11/index.htmlINFO  Generated: fancybox/jquery.fancybox.min.cssINFO  Generated: js/jquery-3.6.4.min.jsINFO  Generated: js/script.jsINFO  Generated: fancybox/jquery.fancybox.min.jsINFO  Generated: css/images/banner.jpgINFO  Generated: 2025/11/03/hello-world/index.htmlINFO  11 files generated in 1.14 sPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo serverINFO  Validating configINFO  Start processingINFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/bd86278cb05c478586441bb2f1bbf6aa.png"></p><h2>1.8 Hexo更换主题</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Themes | Hexo" href="https://hexo.io/themes/" title="Themes | Hexo">Themes | Hexo</a></p><p>官方提供了数百种主题供用户选择，可以根据个人喜好更换。这里介绍<code>Fluid</code>，比较喜欢<code>Fluid</code>，后面章节的功能也是以&nbsp;<code>Fluid</code>&nbsp;为基础进行讲解。</p><h3>（1）Fluid主题</h3><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Fluid官网" href="https://github.com/fluid-dev/hexo-theme-fluid" title="Fluid官网">Fluid官网</a></p><h3>（2）<strong>安装主题</strong></h3><p>下载&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="最新 release 版本" href="https://github.com/fluid-dev/hexo-theme-fluid/releases" title="最新 release 版本">最新 release 版本</a>&nbsp;解压到&nbsp;<code>themes</code>&nbsp;目录，并将解压出的文件夹重命名为&nbsp;<code>fluid</code>。</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/fe31d899b7564e1587d347670740a67c.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/1fe62ecec9114efd9a7a31df5d53f1e3.png"></p><p>将fluid放到themes</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/efc771e60a574900bcf80ad8ade4abb6.png"></p><h3>（3）<strong>指定主题</strong></h3><p>如下修改&nbsp;<code>Hexo</code>&nbsp;博客目录中的&nbsp;<code>_config.yml</code>：</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/8877cbde956e4f6d801810179ba496f1.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/4b801215127a4e84be019122138886d1.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/969a11d3c3f24ab4bc363598a1680b9b.png"></p><pre><code class="language-bash">theme: fluid  # 指定主题language: zh-CN  # 指定语言</code></pre><h3>（3）<strong>创建「关于页」</strong></h3><p>首次使用主题的「关于页」需要手动创建</p><pre><code class="language-bash">PS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo new page aboutINFO  Validating configINFO  Created: E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog\source\about\index.mdPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt;</code></pre><p>创建成功后，编辑博客目录下&nbsp;<code>/source/about/index.md</code>，添加&nbsp;<code>layout</code>&nbsp;属性。</p><p>修改后的文件示例如下：</p><pre><code class="language-bash">---title: aboutdate: 2025-01-01 00:00:00layout: about---这里写关于页的正文，支持 Markdown, HTML</code></pre><h3>（4）<strong>本地启动</strong></h3><pre name="code"><code class="language-bash">hexo g -dhexo s</code></pre><h3><code>hexo g -d</code>&nbsp;中&nbsp;<code>-d</code>&nbsp;的含义</h3><ul><li><code>hexo g</code>&nbsp;是&nbsp;<code>hexo generate</code>&nbsp;的缩写，作用是<strong>生成静态文件</strong>：将你的 Markdown 文章、主题配置等源文件，编译为可直接部署的 HTML、CSS、JS 等静态资源（生成的文件默认存放在&nbsp;<code>public</code>&nbsp;文件夹中）。</li><li><code>-d</code>&nbsp;是&nbsp;<code>--deploy</code>&nbsp;的缩写，作为可选参数，它的作用是：在生成静态文件后，<strong>自动执行部署操作</strong>（部署到你在 Hexo 配置文件&nbsp;<code>_config.yml</code>&nbsp;中设置的平台，比如 GitHub Pages、Gitee Pages 等）。</li></ul><p>因此，<code>hexo g -d</code>&nbsp;等价于连续执行两个命令：</p><pre><code>hexo generate  # 生成静态文件hexo deploy    # 部署到远程平台</code></pre><p>过程：</p><pre><code class="language-bash">PS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo g -dINFO  Validating configINFO  Start processingWARN  [Fluid] 推荐你使用覆盖配置功能: https://hexo.fluid-dev.com/docs/guide/#%E8%A6%86%E7%9B%96%E9%85%8D%E7%BD%AEINFO------------------------------------------------|                                              ||     ________  __            _        __      ||    |_   __  |[  |          (_)      |  ]     ||      | |_ \_| | | __   _   __   .--.| |      ||      |  _|    | |[  | | | [  |/ /'`\' |      ||     _| |_     | | | \_/ |, | || \__/  |      ||    |_____|   [___]'.__.'_/[___]'.__.;__]     ||                                              ||             感谢使用 Fluid 主题              ||    文档: https://hexo.fluid-dev.com/docs/    ||                                              |------------------------------------------------INFO  Files loaded in 144 msINFO  Generated: local-search.xmlINFO  Generated: about/index.htmlINFO  Generated: 2025/11/03/hello-world/index.htmlINFO  Generated: archives/2025/index.htmlINFO  Generated: tags/index.htmlINFO  Generated: archives/2025/11/index.htmlINFO  Generated: index.htmlINFO  Generated: img/avatar.pngINFO  Generated: links/index.htmlINFO  Generated: categories/index.htmlINFO  Generated: xml/local-search.xmlINFO  Generated: archives/index.htmlINFO  Generated: img/loading.gifINFO  Generated: 404.htmlINFO  Generated: css/gitalk.cssINFO  Generated: img/fluid.pngINFO  Generated: img/police_beian.pngINFO  Generated: js/events.jsINFO  Generated: js/color-schema.jsINFO  Generated: css/highlight.cssINFO  Generated: js/boot.jsINFO  Generated: css/highlight-dark.cssINFO  Generated: css/main.cssINFO  Generated: js/img-lazyload.jsINFO  Generated: js/utils.jsINFO  Generated: js/local-search.jsINFO  Generated: js/umami-view.jsINFO  Generated: js/plugins.jsINFO  Generated: js/leancloud.jsINFO  Generated: img/default.pngINFO  30 files generated in 423 msPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo sINFO  Validating configINFO  Start processingWARN  [Fluid] 推荐你使用覆盖配置功能: https://hexo.fluid-dev.com/docs/guide/#%E8%A6%86%E7%9B%96%E9%85%8D%E7%BD%AEINFO------------------------------------------------|                                              ||     ________  __            _        __      ||    |_   __  |[  |          (_)      |  ]     ||      | |_ \_| | | __   _   __   .--.| |      ||      |  _|    | |[  | | | [  |/ /'`\' |      ||     _| |_     | | | \_/ |, | || \__/  |      ||    |_____|   [___]'.__.'_/[___]'.__.;__]     ||                                              ||             感谢使用 Fluid 主题              ||    文档: https://hexo.fluid-dev.com/docs/    ||                                              |------------------------------------------------INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/8fd0a5021c724196a6bccf126a97e6a4.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/98196d61e4c44a20bbd060fd7e723f19.png"></p><h3>（5）修改 Hexo 博客目录中的&nbsp;<code>_config.yml</code>，打开这个配置是为了在生成文章的时候生成一个同名的资源目录用于存放图片文件。</h3><pre name="code"><code>post_asset_folder: true</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/41e84e3be6c64f10bfadf9aeed7e1d0d.png"></p><pre><code class="language-bash">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.INFO  Catch you laterPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt; hexo new post test_indexINFO  Validating configINFO  Created: E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog\source\_posts\test-index.mdPS E:\Node_Projects\Node_Programs_Workspaces\EX1_Hexo\hexo-blog&gt;</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/05b07d1cf6ff43aa8c4f5e8c4f4bc565.png"></p><h3>（6）加载图片</h3><p>在<code>测试文章.md</code>中添加内容如下，演示了图片的三种引用方式。第一种为官方推荐用法，第二种为markdown语法，第三种和前两种图片存放位置不一样，是将图片放在<code>\source\images</code>目录下。这三种写法在md文件中图片是无法显示的，但是在页面上能正常显示。</p><p>图片的引入方式可参考官方文档&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="https://hexo.io/zh-cn/docs/asset-folders.html" href="https://hexo.io/zh-cn/docs/asset-folders.html" title="https://hexo.io/zh-cn/docs/asset-folders.html">https://hexo.io/zh-cn/docs/asset-folders.html</a></p><p><strong>方法一/二的图片位置：</strong></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/2d9656ca870d4834aa1be2206e4e5481.png"></p><p><strong>方法三的图片位置：</strong></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/dc08ffddba3b462a89f175b3ab0cec68.png"></p><pre><code class="language-bash">---title: test_indexdate: 2025-01-01 00:00:00tags:- 原创categories:- C---这是一篇测试文章&#123;% asset_img test_img1.png 图片引用方法一 %&#125;&lt;!-- ![图片引用方法二](/2025/01/01/test-index/test_img1.png) # 或者--&gt;![图片引用方法二](test_img1.png)![图片引用方法三](/images/test_img2.png)</code></pre><p>然后运行</p><pre><code class="language-bash">hexo cleanhexo -g -dhexo s</code></pre><h3>（7）浏览器访问 http://localhost:4000 ，加载图片后的网页</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/ec89f5a4ea58486080bdb2dd05b70366.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/ee7376bc5e224a45be3adb3fb1fe782c.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/047974a654824f92ae320b01830734e5.png"></p><h2>1.9 个性化页面</h2><h3>（1）浏览器tab页名称</h3><p>主题目录&nbsp;<code>themes\fluid</code>&nbsp;下&nbsp;<code>_config.yml</code>&nbsp;中的&nbsp;<code>blog_title</code>&nbsp;字段</p><p>themes\fluid\_config.yml</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/e4a8523a471c46fb8e0fe369df8f8d12.png"></p><h3>（2）博客标题</h3><p>themes\fluid\_config.yml的</p><pre><code class="language-bash"> slogan:    enable: true    # 为空则按 hexo config.subtitle 显示    # If empty, text based on `subtitle` in hexo config    text: </code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/f75945e8710c44299b80e30fc36e7882.png"></p><p>&nbsp;顶层配置文件</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/c3ef2e6960354b09b036a0ccf0185756.png"></p><h3>（3）运行，浏览，查看标题改变</h3><pre><code class="language-bash">hexo g -dhexo s</code></pre><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/2994c9a1178a457ab8813e9bb41c570f.png"></p><h2>1.10&nbsp;<code>Leancloud</code>&nbsp;的免费服务来进行添加阅读量统计</h2><p><code>Fluid</code>&nbsp;主题写好了统计阅读量的代码，但是缺少相应配置所以没有开启，需要借助三方服务来统计阅读量，&nbsp;<code>Leancloud</code>&nbsp;的免费服务来进行统计。</p><h3>（1）注册</h3><h3>（2）实名认证</h3><h3>（3）验证邮箱</h3><h3>（4）创建应用，选择<code>开发版</code>即可，免费的</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/31ea360e0eaa424fb160429f5b332dd9.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/3bcc3408c92742e8a802d58bf6b6c218.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/f723db36a1f749538e07ff87d5f6e92e.png"></p><h3>（5）进入该应用的&nbsp;<code>设置-&gt;应用凭证</code>，找到&nbsp;<code>AppID</code>&nbsp;和&nbsp;<code>AppKey</code>，记录下来</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/b147f912efc74a7a8c8fa3522a31bbed.png"></p><h3>（6）修改Fluid配置</h3><p>打开主题目录&nbsp;<code>themes\fluid</code>下的&nbsp;<code>_config.yml</code>&nbsp;文件，修改如下配置</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/31a26b62d27944bcba673a9088c28a5a.png"></p><h3>（7）配置&nbsp;<code>leancloud</code>的&nbsp;<code>app_id</code>&nbsp;和&nbsp;<code>app_key，如果是国内的 leancloud需要加上服务器地址，但是，如果是国内的，如果为了加强安全性，就需要买域名，而国外的 leancloud可能不稳定</code></h3><p>打开主题目录&nbsp;<code>themes\fluid</code>下的&nbsp;<code>_config.yml</code>&nbsp;文件</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/3a47c078246d47d687cbfce03e8e805d.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/b291bc9e558e429b8ee0ddc36b92206f.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/f27fd9be9d2c4b7b8ec62940f1151338.png"></p><h3>（8）打开计数功能，统计来源改为&nbsp;<code>leancloud</code></h3><p>打开主题目录&nbsp;<code>themes\fluid</code>下的&nbsp;<code>_config.yml</code>&nbsp;文件</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/09101738aea14a50a3c3ca5c093c8a14.png"></p><h3>（9）页面底部展示网站的 PV、UV 统计数</h3><p>打开主题目录&nbsp;<code>themes\fluid</code>下的&nbsp;<code>_config.yml</code>&nbsp;文件</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/f37737f83125464f8065b2407782daad.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/882bf9ebe8d840839165a1d3bc7b222f.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/4431bdd85002432ca969428d3319f9ca.png"></p><h2>1.11 添加评论功能</h2><h3>（1）打开主题目录&nbsp;<code>themes\fluid</code>下的&nbsp;<code>_config.yml</code>&nbsp;文件，修改如下配置</h3><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/9e26d687238f4cf9a6af2ab61b107428.png"></p><h3>（2）配置&nbsp;<code>LeanCloud</code>&nbsp;的&nbsp;<code>appId</code>&nbsp;和&nbsp;<code>appkey</code></h3><p><code>注意：空格</code></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/cae5b8ea760648ae88750a38ebdce9bd.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/736297a04b7d40c08138ec6c877dc69a.png"></p><h2>1.12 显示文章更新时间</h2><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/5d88053ac20745a293afe8023f868a9c.png"></p><h2>1.13&nbsp;发布到GitHub Pages</h2><h3>（1）方法一</h3><p>安装hexo-deployer-git</p><pre><code class="language-bash"># Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: https://github.com/Molesidy/Molesidy.github.io.git  branch: main  token: g--------------------------S</code></pre><p>进入GitHub的设置，在左侧，找到下面的选项，</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/5c653e6214f74f2aa1b14bf62e3e5fbe.png"></p><p>进入后</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/29d5a946e13a47f68d7c5455c9722ed4.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/da8fc3a3637c4630b2281d2872a7b7ec.png"></p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/47ffc296fd3e4e0d84fbcce13bdfdebb.png"></p><p>如果不使用http，而是使用ssh地址配置推送，使用ssh记得给tokens开启使用ssh key的权限，但是建议使用ssh，http不稳定的情况，懂得的人自然懂。</p><p>部署到GitHub</p><pre name="code"><code class="language-bash">hexo cleanhexo g -dhexo s</code></pre><h3>（2）方法二</h3><p>直接将&nbsp;<code>public</code>&nbsp;目录中的文件和目录推送至对应的git pages 的&nbsp;<code>GitHub</code>&nbsp;仓库和对应的分支中。</p><p><img src="/2025/11/03/%E3%80%90Web%E3%80%91%E5%9F%BA%E4%BA%8EGitHub%20Pages+Hexo%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/5bbecfba7b624ada941b86033a8834e6.png"></p>]]></content>
    
    
    <categories>
      
      <category>前端学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>学习 web blog git pages</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【QT】QT5.15.2版本的最新下载方式！！！</title>
    <link href="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/"/>
    <url>/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、qt在线下载器</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.4/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9T8" data-link-title="Index of /official_releases/online_installers" href="https://download.qt.io/official_releases/online_installers/" title="Index of /official_releases/online_installers">Index of /official_releases/online_installers</a></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/71792a3d6ac740c7b35a7308f0ced4b9.png"></p><h1>二、安装</h1><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/2e16576d1bf64c6db89530758de8a193.png"></p><p>去QT官网注册账户</p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/b8fde4bd7a6c4993b1247c74b17bf9bd.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/c4f40d2631ad4db78109955c53554a9b.png"></p><p>选择自定义</p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/17bc206c34134a3e9423b25f0c0b4ad2.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/33578e56c4ec469381fb06d90a6a0163.png"></p><p>需要勾选归档，才能下载历史版本，在搜索栏的右边&ldquo;显示&rdquo; 的archive</p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/60c13d1fc808476297234a72501dd544.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/3a0f0e50c0ce443d8c97f44613b8640e.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/b4740394ef3046d0af67066d0ec25e43.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/46d83d7cc2504c51a7b4cacb226120c6.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/bb1f1f9ce9d0411099eb17354e7fff28.png"></p><h1>三、组件说明：</h1><h2>3.1&nbsp;</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/e418d4f4cde44fc7884bb5ba3b394d68.png"></p><p>截图中展示的是<strong>Qt Design Studio</strong>的不同版本选项。Qt Design Studio 是 Qt 官方推出的一款专注于<strong>UI/UX 设计与原型开发</strong>的工具，主要用于快速创建 Qt 应用（尤其是基于 Qt Quick/QML 的界面）的视觉设计、交互原型，并能直接导出可被开发者使用的 QML 代码，实现设计与开发的协作衔接。</p><h3>各版本含义解释：</h3><ol><li><p><strong>Qt Design Studio 4.8.0</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;这是&lt;strong&gt;正式发布版本（Release）&lt;/strong&gt;，经过完整测试，稳定性和兼容性较好，适合用于实际项目的 UI 设计与开发。&lt;/li&gt;&lt;li&gt;包含当前最新的功能迭代，适合需要使用最新设计工具特性的场景。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Design Studio 4.1.1 LTS&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;ldquo;LTS&amp;rdquo; 即&lt;strong&gt;Long Term Support（长期支持）&lt;/strong&gt;，这个版本会获得官方更长时间的维护（通常 3-5 年），主要针对稳定性优化，不会频繁添加新功能，但会持续修复 bug 和安全问题。&lt;/li&gt;&lt;li&gt;适合&lt;strong&gt;长期维护的项目&lt;/strong&gt;或对稳定性要求极高的场景（如工业软件、嵌入式设备 UI），避免因工具版本更新导致的兼容性问题。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Design Studio 4.8.0-beta (2025-09-30)&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;ldquo;beta&amp;rdquo; 是&lt;strong&gt;测试版&lt;/strong&gt;，发布于 2025 年 9 月 30 日，主要用于预览 4.8.0 正式版的新功能，收集用户反馈以修复问题。&lt;/li&gt;&lt;li&gt;特点是包含最新特性，但可能存在未修复的 bug、兼容性问题，&lt;strong&gt;不建议用于生产环境&lt;/strong&gt;，仅适合开发者 / 设计师测试新功能时使用。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h3>选择建议：</h3><ul><li>日常项目设计：优先选<strong>4.8.0 正式版</strong>，平衡功能新鲜度和稳定性。</li><li>长期维护的项目：选<strong>4.1.1 LTS</strong>，确保工具长期可用且少出问题。</li><li>测试新功能：可选<strong>4.8.0-beta</strong>，但需注意可能的 bug 风险。</li></ul><p>如果你的开发主要聚焦于 &ldquo;编写代码&rdquo; 而非 &ldquo;UI 设计&rdquo;，也可以暂时不安装 Qt Design Studio（非必选组件），后续需要时再通过 Qt 维护工具补充安装。</p><h2>3.2</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/b46a40e83d4c486897ec7224244bceb7.png"></p><p>截图中展示的是 Qt 的<strong>扩展组件（Extensions）</strong>&nbsp;选项，这些是 Qt 框架提供的额外功能模块，用于扩展应用程序的特定能力。每个组件都对应不同的 Qt 版本（如 6.10.0、6.9.3 等），以下是具体解释：</p><h3>一、各扩展组件的功能说明</h3><h4>1.&nbsp;<strong>Qt Insight Tracker</strong></h4><ul><li><strong>核心功能</strong>：这是 Qt 提供的<strong>应用程序分析与监控工具</strong>，主要用于收集应用在运行时的使用数据（如功能调用频率、用户操作路径、性能指标等），并生成分析报告。</li><li><strong>用途</strong>：帮助开发者了解用户如何使用应用、定位功能瓶颈或冷门功能，优化产品体验（类似 &ldquo;用户行为分析&rdquo; 工具）。</li><li><strong>适用场景</strong>：商业软件或需要持续优化用户体验的项目，普通学习或小型项目通常用不到。</li></ul><h4>2.&nbsp;<strong>Qt PDF</strong></h4><ul><li><strong>核心功能</strong>：用于<strong>处理 PDF 文件的模块</strong>，提供 PDF 文档的渲染（显示）、解析、打印等功能，允许在 Qt 应用中直接嵌入 PDF 查看器。</li><li><strong>用途</strong>：开发需要查看或处理 PDF 的应用（如文档管理软件、电子书阅读器等）。</li><li><strong>示例</strong>：通过 Qt PDF 组件，可在 Qt 窗口中显示 PDF 文件内容，支持缩放、翻页等基础操作。</li></ul><h4>3.&nbsp;<strong>Qt WebEngine</strong></h4><ul><li><strong>核心功能</strong>：基于 Chromium 内核的<strong>网页渲染引擎</strong>，允许在 Qt 应用中嵌入网页内容，支持 HTML5、CSS3、JavaScript 等 Web 技术。</li><li><strong>用途</strong>：开发需要融合 Web 内容的应用（如带网页预览的工具、内嵌帮助文档的应用，或轻量化浏览器）。</li><li><strong>优势</strong>：无需依赖外部浏览器，可将 Web 内容与 Qt 原生界面无缝结合（例如在 Qt Widgets 窗口中显示一个网页表单）。</li></ul><h3>二、版本号的含义</h3><p>每个扩展组件后的版本号（如 6.10.0、6.9.3 等）<strong>与 Qt 主框架版本一一对应</strong>，遵循以下规则：</p><ul><li>版本号越高，功能越新（如 6.10.0 比 6.9.3 新增更多特性）；</li><li>必须与你安装的<strong>Qt 主版本</strong>匹配（例如：若主框架选了 Qt 6.10.0，扩展组件也应优先选 6.10.0 版本），否则可能出现兼容性问题（如函数接口不匹配、运行时错误）。</li></ul><h3>三、选择建议</h3><p>扩展组件的选择核心是 &ldquo;<strong>按需安装</strong>&rdquo;，避免浪费磁盘空间：</p><ol><li><strong>Qt Insight Tracker</strong>：仅当需要分析应用使用数据时勾选，普通开发（学习、小型工具）建议不装；</li><li><strong>Qt PDF</strong>：若应用需要处理 PDF（显示、打印等）则勾选，否则不装；</li><li><strong>Qt WebEngine</strong>：若应用需要嵌入网页内容（如显示在线文档、网页交互）则勾选，纯本地界面开发（无 Web 需求）建议不装；</li><li><strong>版本匹配</strong>：无论选哪个组件，都要确保其版本号与你安装的 Qt 主框架版本一致（如主框架是 6.10.0，扩展也选 6.10.0）。</li></ol><p>如果暂时不确定需求，也可以先不安装这些扩展，后续需要时通过 &ldquo;Qt Maintenance Tool&rdquo;（Qt 维护工具）补充安装，不影响基础开发。</p><h2>3.3</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/a059f514092440bb846531dbbc34d335.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/8a33b0954aca4453970f15eeda09cd46.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/ab27461a0b824d70aea815ca73eaa11b.png"></p><p>这三张截图展示了 Qt 安装器中<strong>核心框架版本</strong>、<strong>Qt5 遗留版本组件</strong>和<strong>构建工具链</strong>三部分内容，涵盖了 Qt 开发的基础环境和工具支持。以下是详细解释：</p><h3>一、第一张截图：Qt 核心框架版本（Qt 6 系列）</h3><p>这部分是 Qt 6 的主框架版本列表，从<code>Qt 6.2.0</code>到<code>Qt 6.10.0</code>，是当前 Qt 的主流版本（Qt 6 于 2020 年发布，逐步替代 Qt 5）。</p><ul><li><p><strong>版本号规则</strong>：版本号由 &ldquo;主版本。次版本。补丁版本&rdquo; 组成（如<code>6.10.0</code>中，6 是主版本，10 是次版本，0 是补丁版本）。</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;次版本号越高（如 6.10.0 &amp;gt; 6.9.3），功能越新，包含更多新特性和优化（如更好的 QML 性能、新的 UI 组件）；&lt;/li&gt;&lt;li&gt;补丁版本（最后一位）主要修复 bug，不增加新功能（如 6.9.3 是 6.9 系列的第三次 bug 修复）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;核心作用&lt;/strong&gt;：这些版本是 Qt 应用开发的 &amp;ldquo;基础库&amp;rdquo;，包含核心模块（如&lt;code&gt;Qt Core&lt;/code&gt;、&lt;code&gt;Qt GUI&lt;/code&gt;、&lt;code&gt;Qt Widgets&lt;/code&gt;），所有 Qt 程序都依赖于选定的主框架版本。&lt;/p&gt;&lt;/li&gt;</code></pre></ul><h3>二、第二张截图：Qt 5.15.x 版本及组件（Qt 5 遗留版本）</h3><p>这部分是 Qt 5 的最后一个长期支持版本（<code>Qt 5.15.x</code>）及其配套组件，Qt 5 已于 2023 年底停止社区支持，但仍被大量旧项目依赖。</p><ul><li><strong>核心组件说明</strong>：<pre><code class="hljs">&lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;编译器（MSVC/MinGW 等）&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;MSVC 2015/2019&lt;/code&gt;：微软编译器，需搭配对应版本的 Visual Studio 使用，适合 Windows 平台开发；&lt;/li&gt;&lt;li&gt;&lt;code&gt;MinGW 8.1.0&lt;/code&gt;：开源编译器，Qt 安装器自带，无需额外依赖，适合快速开发。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;目标平台&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;UWP&lt;/code&gt;：针对 Windows 通用平台（如应用商店应用）；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Android&lt;/code&gt;：用于开发安卓应用；&lt;/li&gt;&lt;li&gt;无特殊平台需求时，这些可忽略（默认开发 Windows 桌面程序）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;功能模块&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Qt Charts&lt;/code&gt;：图表绘制；&lt;code&gt;Qt WebEngine&lt;/code&gt;：嵌入网页；&lt;code&gt;Qt Quick 3D&lt;/code&gt;：3D 界面等（与 Qt 6 的模块功能类似，仅版本适配 Qt 5）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;其他工具&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Sources&lt;/code&gt;：Qt 5 源码（仅需调试源码时勾选）；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Debug Information Files&lt;/code&gt;：调试信息文件（用于调试程序时查看详细堆栈）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;</code></pre></ul><h3>三、第三张截图：Build Tools（构建工具链）</h3><p>这部分是编译、打包 Qt 程序的辅助工具，是开发环境的 &ldquo;基础设施&rdquo;，无论用 Qt 5 还是 Qt 6 都可能用到。</p><ul><li><strong>核心工具说明</strong>：<pre><code class="hljs">&lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Installer Framework&lt;/strong&gt;：用于制作 Qt 应用的安装包（如&lt;code&gt;.exe&lt;/code&gt;安装程序），支持自定义安装路径、组件选择等，适合发布程序时使用（版本如 4.10、4.9 等，选最新版即可）。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;MinGW 系列&lt;/strong&gt;：多个版本的 MinGW 编译器工具链（如&lt;code&gt;MinGW 13.1.0&lt;/code&gt;、&lt;code&gt;8.1.0&lt;/code&gt;等），与前面 Qt 版本中的 MinGW 对应：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;高版本 MinGW（如 13.1.0）支持更新的 C++ 标准（如 C++20），兼容性更好；&lt;/li&gt;&lt;li&gt;需与所选 Qt 版本匹配（如 Qt 6.10.0 搭配 MinGW 13.1.0，Qt 5.15 搭配 MinGW 8.1.0）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;构建系统工具&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;CMake 3.30.5&lt;/code&gt;：跨平台构建工具，用于生成项目编译脚本（Qt Creator 默认支持）；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Ninja 1.12.1&lt;/code&gt;：轻量级编译工具，比传统 Make 更快，通常与 CMake 配合使用。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Maintenance Tool&lt;/strong&gt;：Qt 的维护工具，用于后续添加 / 删除组件、更新版本（必装，默认勾选）。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;</code></pre></ul><h3>四、选择建议</h3><p>根据开发需求，核心原则是 &ldquo;<strong>版本匹配 + 按需勾选</strong>&rdquo;：</p><ol><li><p><strong>框架版本选择</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;新项目优先选&lt;strong&gt;Qt 6 最新版（如 6.10.0）&lt;/strong&gt;：支持新特性，长期维护；&lt;/li&gt;&lt;li&gt;维护旧项目或依赖 Qt 5 库：选&lt;strong&gt;Qt 5.15.1&lt;/strong&gt;（最后一个 Qt5 LTS 版本）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;编译器选择&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;已装 Visual Studio：选对应&lt;code&gt;MSVC&lt;/code&gt;版本（如 VS2019 对应&lt;code&gt;MSVC 2019 64-bit&lt;/code&gt;）；&lt;/li&gt;&lt;li&gt;未装 VS 或快速开发：选&lt;code&gt;MinGW&lt;/code&gt;（64 位优先，如 MinGW 13.1.0）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;功能模块&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;基础开发：保留默认核心模块（&lt;code&gt;Qt Core&lt;/code&gt;、&lt;code&gt;Qt Widgets&lt;/code&gt;等）；&lt;/li&gt;&lt;li&gt;特殊需求：按需勾选（如图表&amp;rarr;&lt;code&gt;Qt Charts&lt;/code&gt;，网页&amp;rarr;&lt;code&gt;Qt WebEngine&lt;/code&gt;）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;构建工具&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;必选：与 Qt 版本匹配的&lt;code&gt;MinGW&lt;/code&gt;/&lt;code&gt;MSVC&lt;/code&gt;、&lt;code&gt;CMake&lt;/code&gt;、&lt;code&gt;Qt Maintenance Tool&lt;/code&gt;；&lt;/li&gt;&lt;li&gt;发布程序：勾选&lt;code&gt;Qt Installer Framework&lt;/code&gt;（用于制作安装包）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>通过以上选择，可搭建满足需求的 Qt 开发环境，后续如需补充组件，可通过 &ldquo;Qt Maintenance Tool&rdquo; 随时添加。</p><h2>3.4</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/096fdc7e479e4f5ca5c7df7e0d85360a.png"></p><p>这张截图展示了 Qt 安装器中<strong>目标平台（编译器）</strong>&nbsp;和<strong>功能模块</strong>的选择界面，每个选项对应特定的开发需求。以下是详细解释，包括各选项的功能、用途及用户当前勾选状态的含义：</p><h3>一、目标平台 / 编译器（第一部分）</h3><p>这部分决定了 Qt 应用的<strong>编译环境</strong>和<strong>运行平台</strong>，是开发的基础配置：</p><ol><li><p><strong>WebAssembly</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;功能：将 Qt 应用编译为 WebAssembly 格式（一种面向 Web 的二进制指令格式），使应用能直接在浏览器中运行（无需安装，通过网页访问）。&lt;/li&gt;&lt;li&gt;适用场景：开发跨平台 Web 应用（如在线工具、浏览器内运行的交互程序），用户未勾选，说明不涉及 Web 浏览器端开发。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;MSVC 系列（MSVC 2015 64-bit、MSVC 2019 32/64-bit）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：微软 Visual C++ 编译器，依赖对应版本的 Visual Studio（如 MSVC 2019 需安装 VS2019），是 Windows 平台的主流编译器。&lt;/li&gt;&lt;li&gt;特点：对 Windows 系统 API 兼容性最佳，生成的程序运行效率高，适合开发仅在 Windows 运行的商业软件。&lt;/li&gt;&lt;li&gt;用户状态：未勾选，说明不依赖 Visual Studio 环境，可能偏好更轻量的编译器。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;MinGW 8.1.0（32-bit/64-bit）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：开源的 GNU 编译器集合（Minimalist GNU for Windows），Qt 安装器会自带完整工具链，无需额外安装 VS，开箱即用。&lt;/li&gt;&lt;li&gt;特点：跨平台兼容性好（同一代码可轻度移植到 Linux），适合快速开发、学习或中小型 Windows 应用。&lt;/li&gt;&lt;li&gt;用户状态：勾选了&lt;strong&gt;MinGW 8.1.0 64-bit&lt;/strong&gt;，说明选择用 64 位 MinGW 编译程序，适配现代 64 位 Windows 系统（内存支持更大，性能更优）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;UWP 系列（UWP ARMv7、x64 等）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：针对 Windows 通用平台（Universal Windows Platform）的编译器，用于开发可在 Windows 10/11 全设备（PC、平板、Xbox 等）运行的应用，需发布到微软应用商店。&lt;/li&gt;&lt;li&gt;用户状态：未勾选，说明不开发 UWP 应用，专注于传统 Windows 桌面程序。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Android&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：用于将 Qt 应用编译为安卓 APK，支持在安卓手机 / 平板上运行。&lt;/li&gt;&lt;li&gt;用户状态：未勾选，说明不涉及安卓平台开发。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h3>二、功能模块（第二部分）</h3><p>这部分是 Qt 提供的<strong>扩展功能库</strong>，用于增强应用的特定能力，按需勾选：</p><ol><li><p><strong>Sources</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;功能：Qt 框架的源代码文件（.cpp/.h 等），包含 Qt 内部实现逻辑。&lt;/li&gt;&lt;li&gt;用途：&lt;ul&gt;&lt;li&gt;调试时查看 Qt 源码（如跟踪某个 Qt 函数的执行过程）；&lt;/li&gt;&lt;li&gt;自定义 Qt 功能（修改源码后重新编译 Qt 库）；&lt;/li&gt;&lt;li&gt;学习 Qt 内部实现原理（适合深入学习 Qt 的开发者）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;用户状态：勾选，说明可能需要调试 Qt 源码或深入学习其实现。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Charts&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：专业的数据可视化模块，提供折线图、柱状图、饼图、散点图等多种图表类型，支持交互（缩放、拖拽、数据提示）。&lt;/li&gt;&lt;li&gt;适用场景：开发需要数据展示的应用（如仪表盘、统计软件、科学实验工具）。&lt;/li&gt;&lt;li&gt;用户状态：勾选，说明应用需要图表绘制功能。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Quick 3D&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;功能：基于 Qt Quick（QML）的 3D 界面开发模块，无需专业 3D 引擎知识，即可快速创建简单 3D 场景（如 3D 模型展示、交互式 3D 控件）。&lt;/li&gt;&lt;li&gt;特点：比传统 3D 引擎（如 Unity）轻量，与 Qt 的 2D 界面无缝融合（如在 2D 窗口中嵌入 3D 模型）。&lt;/li&gt;&lt;li&gt;适用场景：开发带 3D 元素的应用（如产品 3D 预览、简单 3D 游戏、工业设备 3D 仿真）。&lt;/li&gt;&lt;li&gt;用户状态：勾选，说明应用需要 3D 界面功能。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;其他未勾选模块&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Qt Data Visualization&lt;/code&gt;：更高级的 3D 数据可视化（如 3D 曲面图、体素图），比 Qt Charts 更复杂，用户未勾选说明不需要高级 3D 数据展示；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Qt Lottie Animation&lt;/code&gt;：播放 Lottie 格式动画（UI 动效，如按钮点击动画），未勾选说明对复杂动效需求低；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Qt WebEngine&lt;/code&gt;：嵌入网页内容（如显示 HTML、JavaScript 交互），未勾选说明应用无需 Web 功能；&lt;/li&gt;&lt;li&gt;&lt;code&gt;Qt Purchasing&lt;/code&gt;：应用内购买功能（适合商业软件收费模块），未勾选说明不涉及付费功能。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h2>3.5</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/7614c8e6982341cab0edef9fd493558b.png"></p><p>这张截图展示的是 Qt 安装器中的<strong>构建工具集（Build Tools）</strong>，这些工具是编译、构建和打包 Qt 应用程序的 &ldquo;基础设施&rdquo;，直接影响开发效率和程序发布。以下是每个组件的详细解释及选择逻辑：</p><h3>一、核心工具分类与功能</h3><h4>1.&nbsp;<strong>Qt Installer Framework（安装包制作框架）</strong></h4><ul><li><strong>功能</strong>：用于将开发完成的 Qt 应用程序打包为可分发的安装包（如 Windows 的<code>.exe</code>安装程序、Linux 的<code>.run</code>脚本），支持自定义安装路径、组件选择、许可协议、桌面快捷方式等功能。</li><li><strong>版本说明</strong>：截图中包含<code>4.10</code>、<code>4.9</code>、<code>4.8</code>、<code>4.7</code>等版本，版本越高功能越新（如更好的兼容性、更多自定义选项）。</li><li><strong>用途</strong>：当需要将应用分发给用户时，必须用它制作安装包（否则用户只能直接运行裸程序，体验差）。</li></ul><h4>2.&nbsp;<strong>MinGW 系列（编译器工具链）</strong></h4><p>MinGW（Minimalist GNU for Windows）是开源的 C/C++ 编译器集合，用于将 Qt 代码编译为可执行程序，截图中列出了多个版本（按更新顺序排序）：</p><ul><li><strong>LLVM-MinGW 17.0.6 64-bit</strong>：基于 LLVM 架构的 MinGW 变体，编译速度更快，对 C++ 新标准（如 C++20）支持更完善，适合追求编译效率的场景。</li><li><strong>MinGW 13.1.0 64-bit</strong>&nbsp;/&nbsp;<strong>11.2.0 64-bit</strong>：传统 GNU 架构的 MinGW，版本越高支持的 C++ 标准越新（13.1.0 &gt; 11.2.0 &gt; 8.1.0），兼容性更广泛。</li><li><strong>MinGW 8.1.0 32/64-bit</strong>：较旧的稳定版本，对老项目兼容性更好（如 Qt 5.15 等旧框架），但对新 C++ 特性支持有限。</li><li><strong>32-bit vs 64-bit</strong>：64 位版本支持更大内存（超过 4GB）和现代 CPU 指令集，适合新开发的应用；32 位仅用于兼容旧系统或特定硬件。</li></ul><h4>3.&nbsp;<strong>构建系统工具</strong></h4><ul><li><strong>CMake 3.30.5</strong>：跨平台的构建脚本生成工具，用于将 Qt 项目转换为编译器可识别的构建文件（如 Makefile、Visual Studio 项目），Qt Creator 默认依赖 CMake 管理项目。</li><li><strong>Ninja 1.12.1</strong>：轻量级构建系统，比传统 Make 工具编译速度更快（尤其多线程编译时），通常与 CMake 配合使用（CMake 可生成 Ninja 脚本）。</li></ul><h4>4.&nbsp;<strong>Qt Maintenance Tool</strong></h4><ul><li><strong>功能</strong>：Qt 的维护工具，用于后续管理已安装的组件（如添加 / 删除模块、更新 Qt 版本、修复安装），是必装工具（默认会自动勾选）。</li></ul><h3>二、版本选择的核心逻辑</h3><p>这些工具的选择需遵循 **&ldquo;与 Qt 主版本匹配 + 按需选择&rdquo;** 原则：</p><ol><li><p><strong>Qt Installer Framework</strong>：优先选<strong>最新版本（4.10）</strong>，新版本修复了旧版本的 bug，支持更多打包特性（如数字签名、多语言安装界面），无需考虑旧版本（除非项目强制依赖）。</p></li><li><p><strong>MinGW 编译器</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;若使用&lt;strong&gt;Qt 6.x（如 6.10.0）&lt;/strong&gt;：选&lt;strong&gt;MinGW 13.1.0 64-bit&lt;/strong&gt;或&lt;strong&gt;LLVM-MinGW 17.0.6 64-bit&lt;/strong&gt;，匹配新框架对 C++ 标准的要求（如 C++17/20）。&lt;/li&gt;&lt;li&gt;若使用&lt;strong&gt;Qt 5.15.x&lt;/strong&gt;：选&lt;strong&gt;MinGW 8.1.0 64-bit&lt;/strong&gt;（与 Qt 5.15 兼容性最佳，避免高版本编译器导致的接口不匹配）。&lt;/li&gt;&lt;li&gt;32 位 MinGW 仅在 &amp;ldquo;必须支持 32 位旧系统&amp;rdquo; 时勾选，否则优先 64 位。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;CMake 与 Ninja&lt;/strong&gt;：两者&lt;strong&gt;必须勾选&lt;/strong&gt;：CMake 是 Qt 项目的基础构建系统，Ninja 能显著提升编译速度（尤其大项目），直接选截图中的最新版本（3.30.5 和 1.12.1）即可。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Qt Maintenance Tool&lt;/strong&gt;：强制勾选，否则后续无法更新或补充安装组件。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h2>3.6</h2><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/58ac440c5e1341b9b6a6999c49656c12.png"></p><p>这张截图展示的是 Qt 安装器中<strong>Qt Creator 18.0.0（Qt 官方 IDE）的配套组件</strong>，主要涉及调试功能和插件开发支持。以下是每个选项的详细解释、用途及选择建议：</p><h3>1.&nbsp;<strong>CDB Debugger Support</strong></h3><ul><li><strong>功能</strong>：CDB（Command Debugger）是微软提供的 Windows 系统调试器（属于 Windows 调试工具集的一部分）。该选项用于让 Qt Creator 支持 CDB 调试器，使其能与 CDB 集成，实现对 MSVC 编译器编译的程序的调试。</li><li><strong>核心作用</strong>：当你使用 MSVC 编译器（如前面提到的 MSVC 2019）开发 Qt 程序时，必须依赖 CDB 进行调试（如设置断点、查看变量、单步执行等），否则 Qt Creator 无法调试 MSVC 编译的程序。</li><li><strong>适用场景</strong>：<ul><li>勾选了 MSVC 编译器（如开发 Windows 平台的商业软件）；</li><li>需要调试用 MSVC 编译的 Qt 程序。</li></ul></li></ul><h3>2.&nbsp;<strong>Debugging Tools for Windows</strong></h3><ul><li><strong>功能</strong>：这是 Windows 系统官方的调试工具集（包含 CDB、WinDbg 等工具），是 CDB 调试器的 &ldquo;本体&rdquo;。Qt Creator 的 &ldquo;CDB Debugger Support&rdquo; 仅提供集成接口，而实际的调试功能依赖于这个工具集。</li><li><strong>关联关系</strong>：如果未安装 &ldquo;Debugging Tools for Windows&rdquo;，即使勾选了 &ldquo;CDB Debugger Support&rdquo;，Qt Creator 也无法正常使用 CDB 调试（会提示 &ldquo;找不到调试器&rdquo;）。</li><li><strong>获取方式</strong>：<ul><li>通常随 Visual Studio 自动安装（安装 VS 时勾选 &ldquo;Desktop development with C++&rdquo; 会包含）；</li><li>若未安装 VS，可通过 Qt 安装器勾选此选项单独安装。</li></ul></li><li><strong>建议</strong>：若使用 MSVC 编译器，<strong>必须勾选</strong>（否则调试功能失效）；若仅用 MinGW，可忽略（MinGW 依赖 GDB 调试器，不依赖此工具）。</li></ul><h3>3.&nbsp;<strong>Debug Symbols</strong></h3><ul><li><strong>功能</strong>：调试符号文件（包含变量名、函数名、代码行号与内存地址的映射关系）。当程序崩溃或调试时，调试器通过符号文件能显示具体的函数名、代码位置（如 &ldquo;main.cpp:25 行&rdquo;），而非模糊的内存地址（如 &ldquo;0x00401234&rdquo;）。</li><li><strong>作用</strong>：极大提升调试效率，帮助快速定位 bug 位置（尤其是复杂项目）。</li><li><strong>适用场景</strong>：<ul><li>开发阶段需要深入调试（如追踪 Qt 库内部函数调用）；</li><li>程序崩溃时需要生成包含详细堆栈信息的日志。</li></ul></li><li><strong>建议</strong>：<strong>开发阶段建议勾选</strong>（仅增加约几百 MB 磁盘空间，对调试体验至关重要）；发布程序时无需包含符号文件（可减小安装包体积）。</li></ul><h3>4.&nbsp;<strong>Plugin Development</strong></h3><ul><li><strong>功能</strong>：Qt Creator 的插件开发支持包，包含开发自定义 Qt Creator 插件所需的头文件、库和模板。Qt Creator 本身支持插件扩展（如添加自定义代码检查工具、集成第三方版本控制、扩展 UI 功能等）。</li><li><strong>适用场景</strong>：<ul><li>需要开发 Qt Creator 插件（如为团队定制 IDE 功能）；</li><li>研究 Qt Creator 的插件机制（进阶开发需求）。</li></ul></li><li><strong>建议</strong>：<strong>普通开发无需勾选</strong>（99% 的用户用不到），仅当明确需要开发 Qt Creator 插件时才勾选（会增加约 1GB + 磁盘空间）。</li></ul><h1>笔者的选择：</h1><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/ddfa9f99de6645e9954bfb0685552480.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/e34a63c5d0b340df88c1fdc710ea129b.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/6a7afa09af604b98a3b90e6b354a1f7a.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/7dfcb25c23da462c9840d472c17825a0.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/2e736e29bcf64f75bad59b6ea8721f3c.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/70dc5cc07ec54d6f9b0a8dc131efb4ad.png"></p><p><img src="/2025/10/31/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90QT%E3%80%91QT5.15.2%E7%89%88%E6%9C%AC%E7%9A%84%E6%9C%80%E6%96%B0%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%EF%BC%81%EF%BC%81%EF%BC%81/eb6e3f4fdb9847f2a8152cbc026f2f03.png"></p><p></p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>qt 开发语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Embedded System】嵌入式C语言基础知识</title>
    <link href="/2025/10/30/%E3%80%90Embedded%20System%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2025/10/30/%E3%80%90Embedded%20System%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、基本数据类型</h1><p><img src="/2025/10/30/%E3%80%90Embedded%20System%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/01b504ef70d5416595255d86b4061c1d.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C语言的基本数据类型为：整型、字符型、实数型。这些类型按其在计算机中的存储方式可被分为两个系列，即整数(integer)类型和浮点数(floating-point)类型。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这三种类型之下分别是：short、int、long、char、float、double这六个关键字再加上两个符号说明符signed和unsigned就基本表示了C语言的最常用的数据类型。<br />下面列出了在32位操作系统下常见编译器下的数据类型大小及表示的数据范围：</p><table><thead><tr><th>类型名称</th><th>类型关键字</th><th>占字节数</th><th>其他叫法</th><th>表示的数据范围</th></tr></thead><tbody><tr><td>字符型</td><td>char</td><td>1</td><td>signed char</td><td>-128 ~ 127</td></tr><tr><td>无符号字符型</td><td>unsigned char</td><td>1</td><td>none</td><td>0 ~ 255</td></tr><tr><td>整型</td><td>int</td><td>4</td><td>signed int</td><td>-2,147,483,648 ~ 2,147,483,647</td></tr><tr><td>无符号整型</td><td>unsigned int</td><td>4</td><td>unsigned</td><td>0 ~ 4,294,967,295</td></tr><tr><td>短整型</td><td>short</td><td>2</td><td>short int</td><td>-32,768 ~ 32,767</td></tr><tr><td>无符号短整型</td><td>unsigned short</td><td>2</td><td>unsigned short int</td><td>0 ~ 65,535</td></tr><tr><td>长整型</td><td>long</td><td>4</td><td>long int</td><td>-2,147,483,648 ~ 2,147,483,647</td></tr><tr><td>无符号长整型</td><td>unsigned long</td><td>4</td><td>unsigned long</td><td>0 ~ 4,294,967,295</td></tr><tr><td>单精度浮点数</td><td>float</td><td>4</td><td>none</td><td>3.4E +/- 38 (7 digits)</td></tr><tr><td>双精度浮点数</td><td>double</td><td>8</td><td>none</td><td>1.7E +/- 308 (15 digits)</td></tr><tr><td>长双精度浮点数</td><td>long double</td><td>10</td><td>none</td><td>1.2E +/- 4932 (19 digits)</td></tr><tr><td>长整型</td><td>long long</td><td>8</td><td>__int64</td><td>-9223372036854775808 ~ 9223372036854775808</td></tr></tbody></table><h1>二、命名规则和关键字</h1><p><strong>命名规则</strong></p><ul><li>标识符组成：仅允许数字、字母、下划线，无其他特殊字符；</li><li>开头限制：明确禁止数字开头，避免与数值常量混淆；</li><li>关键字禁用：完全符合标准，关键字是编译器预留的 &ldquo;特殊指令名&rdquo;，不可被用户占用；</li><li>大小写敏感：是 C 语言的显著特性，<code>num</code>和<code>Num</code>会被识别为两个独立标识符。</li></ul><p><strong>C 语言关键字精准分类表（共 32 个）</strong></p><table><thead><tr><th>分类</th><th>关键字列表</th><th>功能简述</th></tr></thead><tbody><tr><td>1. 数据类型关键字（12 个）</td><td><code>char</code>、<code>short</code>、<code>int</code>、<code>long</code>、<code>float</code>、<code>double</code>、<code>unsigned</code>、<code>signed</code>、<code>struct</code>、<code>union</code>、<code>enum</code>、<code>void</code></td><td>定义基础数据类型或复合数据类型（如结构体<code>struct</code>、枚举<code>enum</code>），<code>void</code>表示 &ldquo;无类型&rdquo;。</td></tr><tr><td>2. 控制语句关键字（12 个）</td><td><code>if</code>、<code>else</code>、<code>switch</code>、<code>case</code>、<code>default</code>、<code>for</code>、<code>do</code>、<code>while</code>、<code>break</code>、<code>continue</code>、<code>goto</code>、<code>return</code></td><td>控制程序执行流程，包括条件判断（<code>if/switch</code>）、循环（<code>for/while/do</code>）、跳转（<code>break/return</code>）。</td></tr><tr><td>3. 存储类关键字（4 个）</td><td><code>auto</code>、<code>extern</code>、<code>register</code>、<code>static</code></td><td>控制变量的<strong>存储位置</strong>与生命周期：-&nbsp;<code>static</code>：静态存储（全局生命周期）；-&nbsp;<code>extern</code>：声明外部变量 / 函数；-&nbsp;<code>register</code>：建议存储在寄存器（快取）；-&nbsp;<code>auto</code>：自动存储（默认，函数内局部变量）。</td></tr><tr><td>4. 类型限定符（2 个）</td><td><code>const</code>、<code>volatile</code></td><td>修饰变量的<strong>属性</strong>（不控制存储位置）：-&nbsp;<code>const</code>：定义 &ldquo;只读常量&rdquo;（值不可修改）；-&nbsp;<code>volatile</code>：提醒编译器 &ldquo;变量可能被外部修改&rdquo;（禁止优化）。</td></tr><tr><td>5. 其他关键字（2 个）</td><td><code>sizeof</code>、<code>typedef</code></td><td>-&nbsp;<code>sizeof</code>：计算数据类型或变量的字节数；-&nbsp;<code>typedef</code>：给已有数据类型起 &ldquo;别名&rdquo;（如<code>typedef int INT</code>）。</td></tr></tbody></table><p><strong>bool类型</strong></p><ul><li><p>早期C语言没有布尔类型数据，以0代表逻辑假，非0代表逻辑真</p></li><li><p>C99标准定义了新的关键字_Bool，提供了布尔类型，或者也可以使用stdbool.h中的bool</p></li></ul><h1>三、嵌入式的数据类型</h1><p></p><table><thead><tr><th>C 语言的数据类型</th><th>STM32 对应的数据类型</th><th>功能描述</th></tr></thead><tbody><tr><td>unsigned char</td><td>uint8_t</td><td>8 位无符号数据（0～255）</td></tr><tr><td>unsigned short int</td><td>uint16_t</td><td>16 位无符号数据（0～65535）</td></tr><tr><td>unsigned int</td><td>uint32_t</td><td>32 位无符号数据（0～2&sup3;&sup2;-1）</td></tr><tr><td>unsigned long long</td><td>uint64_t</td><td>64 位无符号数据（0～2⁶⁴-1）</td></tr><tr><td>signed char</td><td>int8_t</td><td>8 位有符号数据（-128～+127）</td></tr><tr><td>signed short int</td><td>int16_t</td><td>16 位有符号数据（-32768～+32767）</td></tr><tr><td>signed int</td><td>int32_t</td><td>32 位有符号数据（-2&sup3;&sup1;～2&sup3;&sup1;-1）</td></tr><tr><td>signed long long</td><td>int64_t</td><td>64 位有符号数据（-2⁶&sup3;～2⁶&sup3;-1）</td></tr></tbody></table><h1>四、嵌入式中部分关键字解释</h1><h2 style="background-color:transparent">4.1 static</h2><ul><li><strong>功能</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;修饰&lt;strong&gt;局部变量&lt;/strong&gt;：将其变为&lt;strong&gt;静态局部变量&lt;/strong&gt;，生命周期延长至整个程序运行期间，仅在第一次调用时初始化，后续调用保留上次值。&lt;/li&gt;&lt;li&gt;修饰&lt;strong&gt;全局变量 / 函数&lt;/strong&gt;：限制其&lt;strong&gt;作用域为当前文件&lt;/strong&gt;（即 &amp;ldquo;文件内私有&amp;rdquo;），避免跨文件的符号冲突，增强代码模块化。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;嵌入式应用场景&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;驱动开发中，用&lt;code&gt;static&lt;/code&gt;修饰仅在当前模块（.c 文件）内调用的函数，如某传感器驱动的内部处理函数&lt;code&gt;static void sensor_process(void)&lt;/code&gt;，防止被其他模块误调用。&lt;/li&gt;&lt;li&gt;实现模块内的 &amp;ldquo;持久化&amp;rdquo; 状态，如按键消抖函数中，用&lt;code&gt;static uint8_t debounce_cnt&lt;/code&gt;记录消抖计数，每次调用时保留计数状态。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h2>4.2 const</h2><ul><li><strong>功能</strong>：定义<strong>只读变量（常量）</strong>，编译时会检查对其的修改操作，防止程序运行中意外篡改。（首先定义一个变量，只进行一次赋值，使用const，使其带上后续不能改变其值的特性。）</li><li><strong>嵌入式应用场景</strong>：<ul><li>配置硬件寄存器的固定参数，如串口波特率、GPIO 模式等，例如：<code>const uint32_t UART_BAUDRATE = 115200;</code>，确保波特率在初始化后不会被错误修改。</li><li>定义硬件地址映射（如外设寄存器基地址），如<code>const uint32_t GPIOA_BASE = 0x40010800;</code>，避免地址被意外覆盖导致硬件操作错误。</li></ul></li></ul><h2>4.3 extern</h2><ul><li><strong>功能</strong>：<strong>声明外部变量 / 函数</strong>，表示该变量或函数在<strong>其他文件中定义</strong>，当前文件可直接使用（实现跨文件的变量 / 函数共享）。</li><li><strong>嵌入式应用场景</strong>：<ul><li>多模块协作的工程中，如 &ldquo;按键模块&rdquo; 定义全局变量<code>uint8_t key_state</code>，在 &ldquo;主控制模块&rdquo; 中用<code>extern uint8_t key_state;</code>声明后，即可读取按键状态进行逻辑处理。</li><li>驱动层与应用层的接口共享，如传感器驱动定义<code>extern float sensor_read(void);</code>，应用层包含头文件后可直接调用该函数获取传感器数据。</li></ul></li></ul><h2>4.4 volatile</h2><ul><li><strong>功能</strong>：告诉编译器 &ldquo;该变量的值可能被<strong>硬件 / 中断 / 其他异步操作意外修改</strong>&rdquo;，禁止编译器对其进行优化（如缓存变量值），确保每次都从内存（或硬件）中读取最新值。</li><li><strong>嵌入式应用场景</strong>：<ul><li>读取硬件寄存器（如状态寄存器），如<code>volatile uint32_t *status_reg = (volatile uint32_t*)0x40001000;</code>，因为寄存器值可能被硬件随时更新（如外设完成一次传输后自动置位），必须用<code>volatile</code>确保每次读取的是真实当前值。</li><li>中断标志位，如<code>volatile uint8_t irq_flag;</code>，在主循环中轮询该标志，而中断服务程序会修改它，<code>volatile</code>保证主循环能及时检测到标志变化。</li></ul></li></ul><h2><strong>4.5&nbsp;<code>typedef</code></strong></h2><p></p><p><strong>功能</strong>：为已有的数据类型定义一个 &ldquo;别名&rdquo;，本质是 &ldquo;类型重命名&rdquo;，不创造新类型。<strong>作用</strong>：简化复杂类型的书写、提高代码可读性、增强跨平台兼容性（统一类型定义）。</p><h4>用法示例：</h4><pre><code class="language-cpp">// 为基本类型起别名（嵌入式中最常见，如标准库的uint8_t等）typedef unsigned char uint8_t;  // 后续可用uint8_t代替unsigned char// 为结构体类型起别名（简化结构体变量定义）typedef struct {    uint8_t year;    uint8_t month;    uint8_t day;} Date;  // 后续可直接用Date定义变量：Date today;// 为指针类型起别名（避免复杂指针声明的混淆）typedef uint8_t* PtrUint8;  // PtrUint8等价于uint8_t*，定义指针：PtrUint8 buf_ptr;</code></pre><h4>嵌入式应用场景：</h4><ol><li><strong>统一跨平台类型</strong>：不同 MCU 的<code>int</code>可能是 16 位或 32 位，用<code>typedef</code>定义<code>int32_t</code>（固定 32 位有符号）、<code>uint16_t</code>（固定 16 位无符号），确保代码在不同平台上的类型长度一致（如 STM32 的<code>stdint.h</code>中大量使用）。</li><li><strong>简化复杂类型</strong>：外设配置结构体（如 SPI 配置）通常较长，用<code>typedef</code>起别名后，变量定义更简洁（如<code>SPI_HandleTypeDef</code>实际是<code>typedef struct _SPI_HandleTypeDef SPI_HandleTypeDef</code>）。</li></ol><h4>注意：</h4><p><code>typedef</code>是 &ldquo;类型别名&rdquo;，有类型检查；与<code>#define</code>的 &ldquo;文本替换&rdquo; 不同（见 4.6）。</p><h2><strong><code>4.6 #define</code></strong></h2><p></p><p><strong>功能</strong>：预处理指令，用于 &ldquo;文本替换&rdquo;（宏定义），在编译前由预处理器完成替换，不参与编译的语法检查。<strong>作用</strong>：定义常量、简化重复代码、实现条件编译（配合<code>#ifdef</code>等）。</p><h4>用法示例：</h4><pre><code class="language-cpp">// 1. 定义常量（硬件相关的固定值，如寄存器地址、引脚）#define GPIOA_BASE 0x40010800  // GPIOA寄存器基地址#define LED_PIN    GPIO_PIN_5  // LED连接的引脚// 2. 定义“函数宏”（简化重复操作，带参数）#define MAX(a, b)  ((a) &gt; (b) ? (a) : (b))  // 求两数最大值// 3. 条件编译（控制代码是否参与编译）#define DEBUG 1  // 定义DEBUG后，下面的调试打印生效#ifdef DEBUG    #define LOG(msg) printf("Debug: %s\n", msg)#else    #define LOG(msg)  // 不定义DEBUG时，LOG为空#endif</code></pre><h4>嵌入式应用场景：</h4><ol><li><strong>硬件地址映射</strong>：MCU 的外设寄存器地址是固定的，用<code>#define</code>定义后，代码中直接使用别名（如<code>#define USART1_SR (*(volatile uint32_t*)(USART1_BASE + 0x00))</code>），避免硬编码数字。</li><li><strong>引脚与参数配置</strong>：板级外设的引脚（如按键、LED）、配置参数（如波特率<code>#define UART_BAUD 115200</code>）用<code>#define</code>定义，修改时只需改一处，便于维护。</li><li><strong>调试开关</strong>：通过<code>#define DEBUG</code>控制调试信息的打印，发布时关闭<code>DEBUG</code>即可移除调试代码，不占用运行资源。</li></ol><h4>注意：</h4><ul><li>宏替换是 &ldquo;纯文本替换&rdquo;，无类型检查，复杂宏需加括号避免歧义（如<code>MAX(a,b)</code>的括号）。</li><li>与<code>typedef</code>的区别：<code>typedef</code>针对类型，<code>#define</code>针对文本（可用于非类型的替换，如引脚、常量）。</li></ul><h2>4.7 inline</h2><p><strong>功能</strong>：建议编译器将函数 &ldquo;内联展开&rdquo;（即把函数体直接插入到调用处，而非通过函数调用指令跳转），减少函数调用的开销（如压栈、跳转、返回的时间）。<strong>作用</strong>：优化频繁调用的小函数的执行效率，适合实时性要求高的场景。</p><h4>用法示例：</h4><pre><code class="language-cpp">// 定义内联函数（在函数声明前加inline）inline uint8_t get_bit(uint8_t data, uint8_t pos) {    return (data &gt;&gt; pos) &amp; 0x01;  // 提取data的第pos位}// 调用时，编译器可能直接展开为：(value &gt;&gt; 3) &amp; 0x01，而非函数调用int main() {    uint8_t value = 0x88;    uint8_t bit = get_bit(value, 3);  // 可能被展开，无函数调用开销}</code></pre><h4>嵌入式应用场景：</h4><ol><li><strong>高频调用的小函数</strong>：如传感器数据的位解析（如从 16 位数据中提取温度的高 8 位）、GPIO 电平读取（<code>inline uint8_t led_state(void) { return GPIO_ReadPin(LED_PORT, LED_PIN); }</code>），这些函数被频繁调用，内联后可减少实时性开销。</li><li><strong>中断服务程序（ISR）中的辅助函数</strong>：ISR 要求执行速度快，其内调用的小函数（如数据校验、标志位处理）用<code>inline</code>可避免函数调用的延迟。</li></ol><h4 style="background-color:transparent">注意：</h4><ul><li><code>inline</code>是 &ldquo;建议&rdquo; 而非 &ldquo;强制&rdquo;：编译器可能忽略（如函数体过大、包含循环 / 递归时），由编译器根据优化策略决定是否展开。</li><li>内联会增加代码体积（函数体被多次复制），因此仅适合<strong>短小简单</strong>的函数（通常 1-5 行代码），避免滥用导致程序体积膨胀。</li></ul><h2><span style="background-color:#fefcd8">4.8 inline</span><span style="background-color:#fefcd8">补充说明</span></h2><p><span style="background-color:#fefcd8">内联函数（</span><code><span style="background-color:#fefcd8">inline function</span></code><span style="background-color:#fefcd8">）和宏（</span><code><span style="background-color:#fefcd8">macro</span></code><span style="background-color:#fefcd8">）在代码展开和效率优化上有相似的表象（都能减少函数调用开销），但本质、功能和安全性有显著区别，尤其在嵌入式开发中，理解这些区别对代码可靠性和性能至关重要。</span></p><p style="background-color:transparent"><strong><span style="background-color:#fefcd8">核心区别对比表</span></strong></p><table><thead><tr><th><strong><span style="background-color:#fefcd8">对比维度</span></strong></th><th><strong><span style="background-color:#fefcd8">宏（</span><code><span style="background-color:#fefcd8">#define</span></code><span style="background-color:#fefcd8">）</span></strong></th><th><strong><span style="background-color:#fefcd8">内联函数（</span><code><span style="background-color:#fefcd8">inline</span></code><span style="background-color:#fefcd8">）</span></strong></th></tr></thead><tbody><tr><td><strong><span style="background-color:#fefcd8">本质</span></strong></td><td><span style="background-color:#fefcd8">预处理阶段的</span><strong><span style="background-color:#fefcd8">文本替换</span></strong><span style="background-color:#fefcd8">（无语法 / 类型检查）</span></td><td><span style="background-color:#fefcd8">编译阶段的</span><strong><span style="background-color:#fefcd8">函数展开建议</span></strong><span style="background-color:#fefcd8">（有完整的函数特性）</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">处理阶段</span></strong></td><td><span style="background-color:#fefcd8">预编译（</span><code><span style="background-color:#fefcd8">cpp</span></code><span style="background-color:#fefcd8">阶段），在代码编译前完成替换</span></td><td><span style="background-color:#fefcd8">编译阶段（</span><code><span style="background-color:#fefcd8">cc1</span></code><span style="background-color:#fefcd8">阶段），由编译器决定是否展开</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">类型安全</span></strong></td><td><span style="background-color:#fefcd8">无类型检查，参数类型错误不会报错（如</span><code><span style="background-color:#fefcd8">int</span></code><span style="background-color:#fefcd8">和</span><code><span style="background-color:#fefcd8">float</span></code><span style="background-color:#fefcd8">混用）</span></td><td><span style="background-color:#fefcd8">有严格的类型检查，参数类型不匹配会编译报错</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">代码展开方式</span></strong></td><td><span style="background-color:#fefcd8">强制替换（无论是否合理，预处理器都会执行文本替换）</span></td><td><span style="background-color:#fefcd8">编译器 &ldquo;建议&rdquo;（可忽略，如函数体过大时不展开）</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">调试支持</span></strong></td><td><span style="background-color:#fefcd8">无法调试（预处理后宏名消失，只剩替换后的代码）</span></td><td><span style="background-color:#fefcd8">可调试（保留函数特性，能设置断点、查看调用栈）</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">复杂逻辑支持</span></strong></td><td><span style="background-color:#fefcd8">处理复杂逻辑（如循环、多语句）容易出错（需加</span><code><span style="background-color:#fefcd8">do-while</span></code><span style="background-color:#fefcd8">包裹）</span></td><td><span style="background-color:#fefcd8">支持任意复杂逻辑（循环、分支、递归等），结构清晰</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">参数副作用</span></strong></td><td><span style="background-color:#fefcd8">可能产生副作用（如</span><code><span style="background-color:#fefcd8">MAX(a++, b++)</span></code><span style="background-color:#fefcd8">会导致</span><code><span style="background-color:#fefcd8">a</span></code><span style="background-color:#fefcd8">或</span><code><span style="background-color:#fefcd8">b</span></code><span style="background-color:#fefcd8">多自增）</span></td><td><span style="background-color:#fefcd8">无副作用（参数先计算再传入，与普通函数一致）</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">作用域</span></strong></td><td><span style="background-color:#fefcd8">无作用域限制（宏定义后全局有效，除非用</span><code><span style="background-color:#fefcd8">#undef</span></code><span style="background-color:#fefcd8">取消）</span></td><td><span style="background-color:#fefcd8">遵循函数作用域（如</span><code><span style="background-color:#fefcd8">static inline</span></code><span style="background-color:#fefcd8">限制在文件内）</span></td></tr><tr><td><strong><span style="background-color:#fefcd8">代码体积影响</span></strong></td><td><span style="background-color:#fefcd8">强制展开可能导致代码体积急剧膨胀（尤其多次调用时）</span></td><td><span style="background-color:#fefcd8">编译器会平衡效率与体积（大函数可能不展开）</span></td></tr></tbody></table><p style="background-color:transparent"><strong><span style="background-color:#fefcd8">关键差异详解</span></strong></p><p style="background-color:transparent"><strong><span style="background-color:#fefcd8">1. 本质与处理阶段不同</span></strong></p><ul><li><span style="background-color:#fefcd8">宏是</span><strong><span style="background-color:#fefcd8">文本替换工具</span></strong><span style="background-color:#fefcd8">，由预处理器处理：比如</span><code><span style="background-color:#fefcd8">#define MAX(a,b) ((a)&gt;(b)?(a):(b))</span></code><span style="background-color:#fefcd8">，预处理器会在编译前将代码中所有</span><code><span style="background-color:#fefcd8">MAX(x,y)</span></code><span style="background-color:#fefcd8">直接替换为</span><code><span style="background-color:#fefcd8">((x)&gt;(y)?(x):(y))</span></code><span style="background-color:#fefcd8">，不理解 &ldquo;函数&rdquo;&ldquo;参数&rdquo; 的含义，仅做字符串替换。</span></li><li><span style="background-color:#fefcd8">内联函数是</span><strong><span style="background-color:#fefcd8">真正的函数</span></strong><span style="background-color:#fefcd8">，由编译器处理：</span><code><span style="background-color:#fefcd8">inline int max(int a, int b) { return a&gt;b?a:b; }</span></code><span style="background-color:#fefcd8">本质是函数，编译器会先检查参数类型、函数体语法，再根据优化策略决定是否将函数体插入到调用处（替代函数调用的跳转 / 压栈操作）。</span></li></ul><p><strong><span style="background-color:#fefcd8">2. 类型安全与错误检查不同</span></strong></p><ul><li><span style="background-color:#fefcd8">宏无类型概念：如果用</span><code><span style="background-color:#fefcd8">MAX(3.14, 5)</span></code><span style="background-color:#fefcd8">（浮点数）和</span><code><span style="background-color:#fefcd8">MAX(10, &#39;a&#39;)</span></code><span style="background-color:#fefcd8">（整数与字符），预处理器都会无脑替换，即使类型不匹配也不会报错，可能导致隐藏 bug。</span></li><li><span style="background-color:#fefcd8">内联函数有严格类型检查：如果定义</span><code><span style="background-color:#fefcd8">inline int max(int a, int b)</span></code><span style="background-color:#fefcd8">，调用时传入</span><code><span style="background-color:#fefcd8">max(3.14, 5)</span></code><span style="background-color:#fefcd8">会因 &ldquo;浮点转整数&rdquo; 报警告，传入</span><code><span style="background-color:#fefcd8">max(&quot;a&quot;, &quot;b&quot;)</span></code><span style="background-color:#fefcd8">（字符串）会直接编译报错，安全性更高。</span></li></ul><h1 style="background-color:transparent">五、了解有STM32CubeMX产生的部分文件结构</h1><p><img src="/2025/10/30/%E3%80%90Embedded%20System%E3%80%91%E5%B5%8C%E5%85%A5%E5%BC%8FC%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2184c48bc305498daeb57d526a1a5071.png"></p><p>为了更清晰体现嵌入式开发的<strong>分层架构逻辑</strong>（从底层驱动到上层应用），以下按 &ldquo;底层支撑&rarr;中层适配&rarr;上层应用&rdquo; 的顺序重新整理各模块定义，同时补充模块间的依赖关系，便于理解各部分的定位与作用：</p><h2 style="background-color:transparent">（1）嵌入式开发各模块整理（按分层逻辑排序）</h2><table><thead><tr><th>模块名称</th><th>核心定义</th><th>关键特性 / 作用</th><th>典型内容 / 示例</th></tr></thead><tbody><tr><td>1. Drivers（厂商 SDK 程序）</td><td>MCU 厂商（如 STM32、ESP32）或 MCU 内部 CPU 厂商提供的<strong>底层驱动库</strong>，是硬件编程的基础支撑。</td><td>1. 为 CPU 和 MCU 内部外设（如内核、时钟、IIC/SPI 接口）提供标准化操作接口；2. 屏蔽硬件底层细节，避免用户直接操作寄存器，降低开发难度；3. 官方维护，兼容性与稳定性强。</td><td>1. 寄存器定义文件（如<code>stm32f10x.h</code>）；2. 外设驱动函数库（如<code>stm32f10x_spi.c</code>）；3. 内核相关接口（如 CMSIS 标准库）。</td></tr><tr><td>2. Core（MCU 驱动程序）</td><td>基于 Drivers 层，<strong>面向 MCU 内部外设的初始化与管理</strong>，是连接底层 SDK 与上层板级逻辑的中间层。</td><td>1. 负责 MCU 内部核心功能的配置（如系统时钟、中断优先级、IIC/SPI 外设参数初始化）；2. 是整个程序的 &ldquo;入口载体&rdquo;，包含主函数，统筹 MCU 整体运行逻辑；3. 不涉及板上外部外设（仅管 MCU 内部）。</td><td>1.&nbsp;<code>main.c</code>（程序入口，包含主循环）；2. 时钟初始化函数（如<code>SystemClock_Config()</code>）；3. 内部外设配置代码（如<code>IIC_Init()</code>）。</td></tr><tr><td>3. BSP（板级支持驱动程序）</td><td>Board Support Package，<strong>负责 MCU 与板上外部外设（非 MCU 内部）的通信与交互</strong>，是硬件板卡的 &ldquo;专属适配层&rdquo;。</td><td>1. 分两种场景适配：- 裸机（如有限状态机）：直接编写外设驱动逻辑，无操作系统依赖；- 操作系统下：编写适配 OS 的驱动（如驱动线程、中断回调绑定）；2. 隔离板级硬件差异，使上层应用无需关心具体板卡的外设连接方式。</td><td>1. 板上传感器驱动（如 MPU6050、DS18B20 驱动）；2. 板载外设接口适配（如 LCD 屏、按键的 GPIO 映射）；3. 裸机 / BSP 驱动函数（如<code>mpu6050_read_data()</code>）。</td></tr><tr><td>4. Middlewares（中间件）</td><td>抽象程度高、可跨项目复用的<strong>通用功能模块</strong>，不依赖具体硬件，专注于 &ldquo;通用能力支撑&rdquo;。</td><td>1. 通用性强：可在不同硬件平台、不同项目中直接移植（如 LVGL 在 STM32/ESP32 上均可使用）；2. 补充核心功能：提供业务无关的通用能力，减少重复开发。</td><td>1. 图形库（LVGL、TouchGFX）；2. 算法库（数学库、快速傅里叶变换 FFT 库）；3. 通信协议栈（如 Modbus、MQTT 客户端库）。</td></tr><tr><td>5. OS/SYSTEM（操作系统层）</td><td>负责系统资源管理与任务调度的核心层，SYSTEM 是 OS 层的 &ldquo;配置补充目录&rdquo;。</td><td>1. OS（如 FreeRTOS、RT-Thread）：提供任务管理、内存分配、中断管理、信号量等核心能力；2. SYSTEM：存放<strong>全局系统配置</strong>（如系统宏定义、全局参数、跨模块共享的头文件），影响整个系统的运行参数。</td><td>1. OS 内核文件（如<code>freertos_kernel.c</code>）；2. SYSTEM 目录下的<code>system.h</code>（全局宏定义）、<code>sys_config.c</code>（系统参数配置）；3. 任务创建与调度代码（如<code>xTaskCreate()</code>）。</td></tr><tr><td>6. 应用层</td><td>基于所有下层模块，<strong>实现具体业务逻辑</strong>，是开发的最终目标（即 &ldquo;产品要做的事&rdquo;）。</td><td>1. 不关心底层硬件细节，仅通过调用上层接口（如 BSP 的传感器读取、OS 的任务接口）实现功能；2. 与产品需求强绑定，不同项目的应用层逻辑完全不同。</td><td>1. 智能家居的 &ldquo;温湿度监测与上报逻辑&rdquo;；2. 工业设备的 &ldquo;参数采集与控制逻辑&rdquo;；3. 消费电子的 &ldquo;UI 交互与功能触发逻辑&rdquo;（如按键控制 LED 亮灭）。</td></tr></tbody></table><h2 style="background-color:transparent">（2）模块间核心依赖关系</h2><p><code>&nbsp; &nbsp;Drivers</code>（底层 SDK）&rarr;&nbsp;<code>Core</code>（MCU 内部驱动）&rarr;&nbsp;<code>BSP</code>（板级外设适配）&rarr;&nbsp;<code>应用层</code>（业务逻辑）<code>Middlewares</code>（通用功能）、<code>OS/SYSTEM</code>（系统管理）&rarr; 跨层支撑（为 Core、BSP、应用层提供通用能力 / 资源管理）</p><p>&nbsp; &nbsp; &nbsp; &nbsp; 这种分层结构的优势是：硬件变更时仅需修改 Drivers/Core/BSP 层，应用层无需改动；通用功能（如 LVGL）可直接复用，大幅提升开发效率。</p>]]></content>
    
    
    <categories>
      
      <category>高级程序语言学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c语言 开发语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>随笔--解决VS2022的C# Windows界面设计的TextBox高度限制问题</title>
    <link href="/2025/10/29/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E8%A7%A3%E5%86%B3VS2022%E7%9A%84C#%20Windows%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E7%9A%84TextBox%E9%AB%98%E5%BA%A6%E9%99%90%E5%88%B6%E9%97%AE%E9%A2%98/"/>
    <url>/2025/10/29/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E8%A7%A3%E5%86%B3VS2022%E7%9A%84C#%20Windows%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E7%9A%84TextBox%E9%AB%98%E5%BA%A6%E9%99%90%E5%88%B6%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img src="/2025/10/29/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E8%A7%A3%E5%86%B3VS2022%E7%9A%84C#%20Windows%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E7%9A%84TextBox%E9%AB%98%E5%BA%A6%E9%99%90%E5%88%B6%E9%97%AE%E9%A2%98/ce3b02928f0c49df94258b8fc4e88e86.png"></p><p>解决方法 开启多行模式</p><p><img src="/2025/10/29/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E8%A7%A3%E5%86%B3VS2022%E7%9A%84C#%20Windows%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1%E7%9A%84TextBox%E9%AB%98%E5%BA%A6%E9%99%90%E5%88%B6%E9%97%AE%E9%A2%98/ba3008d421064d9da5664a9421ecc650.png"></p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C#</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Embedded System】【CMake】Windows下CMake+VSCode的开发环境搭建以及初步认识</title>
    <link href="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/"/>
    <url>/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、安装</h1><h2>1.1 CMake</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="Download CMake" href="https://cmake.org/download/" title="Download CMake">Download CMake</a></p><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/3726e14bea314cccb34bb3b0fcd2447a.png"></p><h2>1.2 MinGw（自行配置gcc/g++的系统环境变量）</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries" href="https://github.com/niXman/mingw-builds-binaries/releases/tag/15.2.0-rt_v13-rev0" title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries">Release Release of 15.2.0-rt_v13-rev0 &middot; niXman/mingw-builds-binaries</a></p><h2>1.3&nbsp;VSCode</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="Visual Studio Code - Code Editing. Redefined" href="https://code.visualstudio.com/" title="Visual Studio Code - Code Editing. Redefined">Visual Studio Code - Code Editing. Redefined</a></p><h2>1.4&nbsp;VSCode插件</h2><ul><li><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="C/C++" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools" title="C/C++">C/C++</a></li><li><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="C/C++ Themes" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools-themes" title="C/C++ Themes">C/C++ Themes</a></li><li><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="CMake" href="https://marketplace.visualstudio.com/items?itemName=twxs.cmake" title="CMake">CMake</a></li><li><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="CMake Tools" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools" title="CMake Tools">CMake Tools</a></li><li>C/C++ Extension Pack（包含前两个和第三个）</li></ul><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/4cd5c19b322b46b6bdeda60e16648149.png"></p><h2>二、初步使用</h2><h2>2.1 创建一个工程文件夹，然后simple_math.h，simple_math.cpp，main.cpp，编写代码</h2><p>simple_math.h</p><pre><code class="language-cpp">#ifndef __SIMPLE_MATH_H__#define __SIMPLE_MATH_H__class SimpleMath {public:    // 1. 构造函数    SimpleMath() = default;    // 2. 析构函数    ~SimpleMath() = default;    // 3. 拷贝构造函数（从另一个对象复制成员）    SimpleMath(const SimpleMath&amp; other) = default;  // 用默认实现（复制base_）    // 4. 移动构造函数（从临时对象“窃取”资源，这里无资源，仅演示）    SimpleMath(SimpleMath&amp;&amp; other) noexcept = default;  // 默认实现（移动base_）    // 5. 拷贝赋值运算符（用另一个对象赋值给当前对象）    SimpleMath&amp; operator=(const SimpleMath&amp; other) = default;  // 默认实现（复制base_）    // 6. 移动赋值运算符（用临时对象赋值给当前对象）    SimpleMath&amp; operator=(SimpleMath&amp;&amp; other) noexcept = default;  // 默认实现（移动base_）    // 原有运算方法    double add(double a, double b);    double subtract(double a, double b);    double multiply(double a, double b);    double divide(double a, double b);private:    double base_ = 0.0;  // 新增一个成员变量（用于演示构造函数的作用）};#endif</code></pre><p>simple_math.cpp</p><pre><code class="language-cpp">#include "simple_math.h"#include &lt;stdexcept&gt;double SimpleMath::add(double a, double b) {    return a + b;}double SimpleMath::subtract(double a, double b) {    return a - b;}double SimpleMath::multiply(double a, double b) {    return a * b;}double SimpleMath::divide(double a, double b) {    if (b == 0) {        throw std::invalid_argument("除数不能为0！");    }    return a / b;}</code></pre><p>main.cpp</p><pre><code class="language-cpp">#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstdint&gt;#include "simple_math.h"using namespace std;int main() {    SimpleMath math;  // 使用默认构造函数    cout &lt;&lt; "加法: " &lt;&lt; math.add(5, 3) &lt;&lt; endl;    cout &lt;&lt; "减法: " &lt;&lt; math.subtract(5, 3) &lt;&lt; endl;    cout &lt;&lt; "乘法: " &lt;&lt; math.multiply(5, 3) &lt;&lt; endl;    try {        cout &lt;&lt; "除法: " &lt;&lt; math.divide(5, 1) &lt;&lt; endl;    } catch (const std::invalid_argument&amp; e) {        cerr &lt;&lt; "错误: " &lt;&lt; e.what() &lt;&lt; endl;    }    return 0;}</code></pre><h2>2.2 编写主要文件 CMakeLists.txt</h2><pre><code class="language-cpp">cmake_minimum_required(VERSION 3.10)project(E7_test_project)add_executable(E7_test_project main.cpp simple_math.cpp)</code></pre><h2>2.3&nbsp;在vscode里按下ctrl+shift+p，输入下面的指令，配置cmake构建工程里编译代码的编译器，选择mingw</h2><pre><code>CMake: configure</code></pre><p>或者在CMakeLists.txt里指定</p><pre><code class="language-cpp">set(CMAKE_C_COMPILER "D:/mingw64/bin/gcc.exe")  # 替换为你MinGW的gcc路径set(CMAKE_CXX_COMPILER "D:/mingw64/bin/g++.exe")  # 替换为你MinGW的g++路径set(CMAKE_SYSTEM_NAME Windows)cmake_minimum_required(VERSION 3.10)project(E7_test_project)add_executable(E7_test_project main.cpp simple_math.cpp)</code></pre><h2>2.4&nbsp;新建文件夹build，cd build 在命令行进入文件夹build，使用cmake .. 构建以及编译</h2><pre><code class="language-cpp">PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake&gt; cd buildPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt; cmake ..-- The C compiler identification is GNU 15.2.0-- The CXX compiler identification is GNU 15.2.0-- Detecting C compiler ABI info-- Detecting C compiler ABI info - done-- Check for working C compiler: D:/mingw64/bin/gcc.exe - skipped-- Detecting C compile features-- Detecting C compile features - done-- Detecting CXX compiler ABI info-- Detecting CXX compiler ABI info - done-- Check for working CXX compiler: D:/mingw64/bin/g++.exe - skipped-- Detecting CXX compile features-- Detecting CXX compile features - done-- Configuring done-- Generating done-- Build files have been written to: E:/VSCode_Projects/VSCode_Examples_Workspaces/E7_test_cmake/build</code></pre><h2>2.5 使用cmake --build . --config Release（如果不使用--config Release，默认的是Debug模式），产生可执行文件</h2><pre><code class="language-cpp">PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt; cmake --build . --config Release[ 33%] Building CXX object CMakeFiles/E7_test_project.dir/main.cpp.obj[ 66%] Building CXX object CMakeFiles/E7_test_project.dir/simple_math.cpp.obj[100%] Linking CXX executable E7_test_project.exe[100%] Built target E7_test_projectPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt; ls    目录: E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\buildMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----        2025/10/28     14:09                .cmaked-----        2025/10/28     14:12                CMakeFiles-a----        2025/10/28     14:12          16872 CMakeCache.txt-a----        2025/10/28     14:12           1646 cmake_install.cmake-a----        2025/10/28     14:12            718 compile_commands.json-a----        2025/10/28     14:13          84570 E7_test_project.exe-a----        2025/10/28     14:12           6617 MakefilePS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt; .\E7_test_project.exe  加法: 8减法: 2乘法: 15除法: 5PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt; ls    目录: E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\buildMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----        2025/10/28     14:09                .cmaked-----        2025/10/28     14:13                CMakeFiles-a----        2025/10/28     14:12          16872 CMakeCache.txt-a----        2025/10/28     14:12           1646 cmake_install.cmake-a----        2025/10/28     14:12            718 compile_commands.json-a----        2025/10/28     14:13          84570 E7_test_project.exe-a----        2025/10/28     14:12           6617 MakefilePS E:\VSCode_Projects\VSCode_Examples_Workspaces\E7_test_cmake\build&gt;</code></pre><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/4b145e7133104df0a7406980f28d33e6.png"></p><h1>三、构建多文件夹组织结构以及制作静态库/动态库</h1><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/14f42d7def55477d880e376783a4b148.png"></p><h2>3.1 在工程文件夹下创建子文件夹hello_world，simple_math，build</h2><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/2e56deee87864320b057bdf6bc5ec1dc.png"></p><h2>3.2&nbsp;hello_world&nbsp;这个作为静态库</h2><p>CMakeLists.txt</p><pre><code class="language-cpp"># 如果不指定，默认生产静态库. 动态库使用 SHARED 关键字# 静态库：Windows 下在 Debug/Release 目录找 helloworld.lib# 动态库：Windows 会同时生成 helloworld.dll（运行时库）和 helloworld.lib（导入库）add_library(helloworld STATIC hello_world.cpp)# 导出头文件路径；${CMAKE_CURRENT_SOURCE_DIR}指向 当前 CMakeLists.txt 所在目录，而非工程根目录# CMAKE_SOURCE_DIR工程根目录（最顶层 CMakeLists.txt 所在目录）# CMAKE_CURRENT_SOURCE_DIR当前处理的 CMakeLists.txt 所在目录target_include_directories(helloworld PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})</code></pre><p>hello_world.cpp</p><pre><code class="language-cpp">#include "hello_world.h"#include &lt;iostream&gt;HelloWorld::HelloWorld() {    // 可选：构造时的逻辑，如打印日志    std::cout &lt;&lt; "HelloWorld 构造函数被调用" &lt;&lt; std::endl;}HelloWorld::~HelloWorld() {    // 可选：析构时的逻辑，如释放资源    std::cout &lt;&lt; "HelloWorld 析构函数被调用" &lt;&lt; std::endl;}void HelloWorld::sayHello() {    std::cout &lt;&lt; "Say: Hello World!" &lt;&lt; std::endl;}</code></pre><p>hello_world.h</p><pre><code class="language-cpp">#ifndef __HELLO_WORLD_H__#define __HELLO_WORLD_H__// #ifdef __cplusplus// extern "C" {// #endif class HelloWorld {public:    HelloWorld();    ~HelloWorld();    void sayHello();private:    // 私有成员变量或方法可在此添加};// #ifdef __cplusplus// }// #endif#endif</code></pre><h2>3.3&nbsp;simple_math 这个作为动态库（注意：作为动态库时，执行可执行程序时才会链接动态库，则需要将.dll动态库放到可执行程序所在的同一文件夹下，修改顶层camke设置自动拷贝动态库）</h2><p>CMakeLists.txt</p><pre><code class="language-cpp">add_library(simplemath SHARED simple_math.cpp)# PUBLIC 表示头文件路径对链接该库的目标可见target_include_directories(simplemath PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})</code></pre><p>simple_math.cpp</p><pre><code class="language-bash">#include "simple_math.h"#include &lt;stdexcept&gt;#include &lt;iostream&gt;// 1. 无参构造函数：初始化 base_ 为默认值 0.0SimpleMath::SimpleMath() : base_(0.0) {    // 可选：添加构造时的日志或额外逻辑（如初始化其他资源）    // 例如：std::cout &lt;&lt; "无参构造函数被调用，base_ 初始化为 0.0" &lt;&lt; std::endl;    std::cout &lt;&lt; "无参构造函数被调用，base_ 初始化为 0.0" &lt;&lt; std::endl;}// 2. 带参数构造函数：用传入的 base 初始化 base_SimpleMath::SimpleMath(double base) : base_(base) {    // 可选：对参数进行校验（如不允许负数，根据业务需求）    if (base &lt; 0) {        throw std::invalid_argument("带参数构造函数初始化失败，base 不能为负数！");    } else {        std::cout &lt;&lt; "带参数构造函数初始化成功，base_ 初始化为 " &lt;&lt; base &lt;&lt; std::endl;    }}// 3. 析构函数：无动态资源（如 new 的内存、文件句柄）时，空实现即可SimpleMath::~SimpleMath() {    // 若有动态资源，需在此释放（如 delete 指针）    // 例如：delete ptr_; （本类无，所以为空）}// 4. 拷贝构造函数：复制 other 的 base_ 到当前对象SimpleMath::SimpleMath(const SimpleMath&amp; other) : base_(other.base_) {    // 核心：将 other 的成员变量值复制到当前对象    // 若有动态资源（如指针），需深拷贝（本类是基本类型，直接复制即可）    // 例如：ptr_ = new int(*other.ptr_); （本类无，所以直接复制 base_）}// 5. 移动构造函数："窃取" other 的 base_，并将 other 的 base_ 置空（语义上的移动）SimpleMath::SimpleMath(SimpleMath&amp;&amp; other) noexcept : base_(other.base_) {    other.base_ = 0.0;  // 置空原对象的资源（基本类型可直接设为默认值）    // 若有动态资源（如指针），需转移所有权：    // ptr_ = other.ptr_;    // other.ptr_ = nullptr; （避免原对象析构时重复释放）}// 6. 拷贝赋值运算符：先释放当前资源（若有），再复制 other 的资源SimpleMath&amp; SimpleMath::operator=(const SimpleMath&amp; other) {    // 防止自我赋值（如 math1 = math1;）    if (this != &amp;other) {        base_ = other.base_;  // 复制 other 的 base_        // 若有动态资源，需先释放当前资源，再深拷贝：        // delete ptr_;        // ptr_ = new int(*other.ptr_);    }    return *this;  // 返回当前对象的引用（支持链式赋值：math1 = math2 = math3;）}// 7. 移动赋值运算符：先释放当前资源（若有），再"窃取" other 的资源SimpleMath&amp; SimpleMath::operator=(SimpleMath&amp;&amp; other) noexcept {    // 防止自我赋值    if (this != &amp;other) {        base_ = other.base_;  // 窃取 other 的 base_        other.base_ = 0.0;    // 置空原对象的资源        // 若有动态资源，需先释放当前资源，再转移所有权：        // delete ptr_;        // ptr_ = other.ptr_;        // other.ptr_ = nullptr;    }    return *this;  // 支持链式赋值}// 原有运算方法的实现（不变）double SimpleMath::add(double a, double b) {    return a + b;}double SimpleMath::subtract(double a, double b) {    return a - b;}double SimpleMath::multiply(double a, double b) {    return a * b;}double SimpleMath::divide(double a, double b) {    if (b == 0) {        throw std::invalid_argument("除数不能为0！");    }    return a / b;}</code></pre><p>simple_math.h</p><pre><code class="language-bash">#ifndef __SIMPLE_MATH_H__#define __SIMPLE_MATH_H__// #ifdef __cplusplus// extern "C" {// #endif class SimpleMath {public:    // 1. 自定义无参构造函数（替代 default）    SimpleMath();    // 2. 自定义带参数构造函数（初始化 base_ 为指定值）    explicit SimpleMath(double base);  // explicit 避免隐式类型转换    // 3. 自定义析构函数（替代 default，无动态资源时可空实现）    ~SimpleMath();    // 4. 自定义拷贝构造函数（复制 other 的 base_）    SimpleMath(const SimpleMath&amp; other);    // 5. 自定义移动构造函数（移动 other 的 base_，并置空 other 的资源）    SimpleMath(SimpleMath&amp;&amp; other) noexcept;    // 6. 自定义拷贝赋值运算符（复制 other 的 base_ 到当前对象）    SimpleMath&amp; operator=(const SimpleMath&amp; other);    // 7. 自定义移动赋值运算符（移动 other 的 base_，并置空 other 的资源）    SimpleMath&amp; operator=(SimpleMath&amp;&amp; other) noexcept;    // 原有运算方法    double add(double a, double b);    double subtract(double a, double b);    double multiply(double a, double b);    double divide(double a, double b);private:    double base_;  // 去掉类内默认初始化，改为在构造函数中初始化};// #ifdef __cplusplus// }// #endif#endif</code></pre><h2>3.4 根目录下</h2><p>CMakeLists.txt</p><pre><code class="language-bash"># 1. 先设置工具链（用户原有代码）set(CMAKE_C_COMPILER "D:/mingw64/bin/gcc.exe")    # C 编译器（MinGW GCC）set(CMAKE_CXX_COMPILER "D:/mingw64/bin/g++.exe")  # C++ 编译器（MinGW G++）set(CMAKE_SYSTEM_NAME Windows)set(CMAKE_CXX_STANDARD 11)# 2. 初始化项目（必须在 project 后打印，部分变量需 project 初始化）cmake_minimum_required(VERSION 3.10)project(E8_test_cmake_multi LANGUAGES CXX)# -------------------------- 核心：打印工具链相关路径 --------------------------# 打印 1：C 编译器（GCC）路径（即用户设置的 CMAKE_C_COMPILER）message(STATUS "【工具链】C 编译器（GCC）路径: ${CMAKE_C_COMPILER}")# 打印 2：C++ 编译器（G++）路径（即用户设置的 CMAKE_CXX_COMPILER）message(STATUS "【工具链】C++ 编译器（G++）路径: ${CMAKE_CXX_COMPILER}")# 打印 3：CMake 自身可执行文件路径（可选，了解 CMake 工具位置）message(STATUS "【工具链】CMake 自身路径: ${CMAKE_COMMAND}")# 打印 4：当前使用的工具链目标系统（验证是否为 Windows）message(STATUS "【工具链】目标系统: ${CMAKE_SYSTEM_NAME}")# -----------------------------------------------------------------------------# 3. 原有逻辑（添加子目录、生成可执行文件、链接库）add_subdirectory(hello_world)add_subdirectory(simple_math)add_executable(E8_test_cmake_multi main.cpp)# ========== 新增：自动复制动态库到 exe 目录 ==========add_custom_command(  TARGET E8_test_cmake_multi POST_BUILD  # 编译 exe 后执行  COMMAND ${CMAKE_COMMAND} -E copy_if_different  # 只在文件变化时复制  "${CMAKE_CURRENT_BINARY_DIR}/simple_math/libsimplemath.dll"  # 动态库源路径  "${CMAKE_CURRENT_BINARY_DIR}/"  # 动态库目标路径（exe 所在目录，即 build/ 根目录）)# =====================================================target_link_libraries(E8_test_cmake_multi helloworld simplemath)</code></pre><p>main.cpp</p><pre><code class="language-bash">#include &lt;iostream&gt;using namespace std;#include "hello_world.h"#include "simple_math.h"int main(){    HelloWorld hw;    hw.sayHello();    SimpleMath sm;    cout &lt;&lt; "5 + 1 = " &lt;&lt; sm.add(5, 1) &lt;&lt; endl;    cout &lt;&lt; "5 - 1 = " &lt;&lt; sm.subtract(5, 1) &lt;&lt; endl;    cout &lt;&lt; "5 * 1 = " &lt;&lt; sm.multiply(5, 1) &lt;&lt; endl;    cout &lt;&lt; "5 / 1 = " &lt;&lt; sm.divide(5, 1) &lt;&lt; endl;    return 0;}</code></pre><h2>3.5 配置工具链，ctrl+shift+p，选择工具链mingw：c++</h2><pre><code class="language-bash">CMake:Configure</code></pre><pre><code class="language-bash">[main] 正在配置项目: E8_test_cmake_multi [proc] 正在执行命令: E:\BasicDocuments\Desktop\RT58X_SDK\Rafael-SDK-SuBG-RT584S\toolchain\cmake-3.31.8\Windows\bin\cmake.EXE -DCMAKE_BUILD_TYPE:STRING=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE -DCMAKE_C_COMPILER:FILEPATH=D:\mingw64\bin\gcc.exe -DCMAKE_CXX_COMPILER:FILEPATH=D:\mingw64\bin\g++.exe --no-warn-unused-cli -S E:/VSCode_Projects/VSCode_Examples_Workspaces/E8_test_cmake_multi -B e:/VSCode_Projects/VSCode_Examples_Workspaces/E8_test_cmake_multi/build -G "MinGW Makefiles"[cmake] Not searching for unused variables given on the command line.[cmake] -- 【工具链】C 编译器（GCC）路径: D:/mingw64/bin/gcc.exe[cmake] -- 【工具链】C++ 编译器（G++）路径: D:/mingw64/bin/g++.exe[cmake] -- 【工具链】CMake 自身路径: E:/BasicDocuments/Desktop/RT58X_SDK/Rafael-SDK-SuBG-RT584S/toolchain/cmake-3.31.8/Windows/bin/cmake.exe[cmake] -- 【工具链】目标系统: Windows[cmake] -- Configuring done (0.2s)[cmake] -- Generating done (0.6s)[cmake] -- Build files have been written to: E:/VSCode_Projects/VSCode_Examples_Workspaces/E8_test_cmake_multi/build</code></pre><h2>3.6 打开vscode终端进入build文件夹下</h2><pre><code class="language-bash">PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; cmake ..-- The CXX compiler identification is GNU 15.2.0-- Detecting CXX compiler ABI info-- Detecting CXX compiler ABI info - done-- Check for working CXX compiler: D:/mingw64/bin/g++.exe - skipped-- Detecting CXX compile features-- Detecting CXX compile features - done-- 【工具链】C 编译器（GCC）路径: D:/mingw64/bin/gcc.exe-- 【工具链】C++ 编译器（G++）路径: D:/mingw64/bin/g++.exe-- 【工具链】CMake 自身路径: D:/WM_IDE/WM_Dev_Suite/wmtools/cmake/bin/cmake.exe-- 【工具链】目标系统: Windows-- Configuring done-- Generating done-- Build files have been written to: E:/VSCode_Projects/VSCode_Examples_Workspaces/E8_test_cmake_multi/buildPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt;</code></pre><h2>3.7 使用 cmake --build . 构建产生可执行程序，乱码由于vscode默认支持UTF-8，但是系统终端支持GBK，这里暂时忽略该问题。</h2><pre><code class="language-bash">PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; cmake --build .[ 16%] Building CXX object hello_world/CMakeFiles/helloworld.dir/hello_world.cpp.obj[ 33%] Linking CXX static library libhelloworld.a[ 33%] Built target helloworld[ 50%] Building CXX object simple_math/CMakeFiles/simplemath.dir/simple_math.cpp.obj[ 66%] Linking CXX shared library libsimplemath.dll[ 66%] Built target simplemath[ 83%] Building CXX object CMakeFiles/E8_test_cmake_multi.dir/main.cpp.obj[100%] Linking CXX executable E8_test_cmake_multi.exe[100%] Built target E8_test_cmake_multiPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; .\E8_test_cmake_multi.exeHelloWorld 鏋勯€犲嚱鏁拌璋冪敤Say: Hello World!鏃犲弬鏋勯€犲嚱鏁拌璋冪敤锛宐ase_ 鍒濆鍖栦负 0.05 + 1 = 65 - 1 = 45 * 1 = 55 / 1 = 5HelloWorld 鏋愭瀯鍑芥暟琚皟鐢PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt;</code></pre><p>或者按下ctrl+shift+p，使用cmake的vscode插件来进行配置(cmake ..)、编译(cmake --build .)</p><h2><img alt="" height="128" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/d371fbae74044f9083f2ba7c8aa1dc6d.png" width="608" /></h2><h2>补充说明：<br />1. 解决编码问题：</h2><h3>（1）vscode的右下角，将.h/.c/.cpp代码的编码格式改为UTF-8</h3><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/fa601e2886af46449cce1f7c86cf7158.png"></p><h3>（2）将cmake的vscode插件里cmake使用时的编码固定为UTF-8，进入vscode的设置搜索encoding，找到扩展的cmake，更改编码</h3><p><img src="/2025/10/29/%E3%80%90Embedded%20System%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8BCMake+VSCode%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/52ab1a716f4a4671b58c5f476301d2eb.png"></p><h3>（3）将vscode里的powershell代理终端切换为UTF-8编码格式，在vscode的总设置文件setting（使用ctrl+shift+p搜索setting）</h3><pre><code class="language-bash">"terminal.integrated.profiles.windows": {          "PowerShell": {            "source": "PowerShell",            "icon": "terminal-powershell",            "args": ["-NoExit","chcp 65001"]        },        "Command Prompt": {            "path": [                "${env:windir}\\Sysnative\\cmd.exe",                "${env:windir}\\System32\\cmd.exe"            ],            "args": ["/K","chcp 65001"],            "icon": "terminal-cmd"        },}</code></pre><p>效果：</p><pre><code class="language-bash">Active code page: 65001PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi&gt; cd buildPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; ls    目录: E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\buildMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----        2025/10/28     20:34                .cmaked-----        2025/10/28     20:34                CMakeFilesd-----        2025/10/28     20:34                hello_worldd-----        2025/10/28     20:34                simple_math-a----        2025/10/28     20:34          15256 CMakeCache.txt-a----        2025/10/28     20:34           2515 cmake_install.cmake-a----        2025/10/28     20:34           1749 compile_commands.json-a----        2025/10/28     20:34           6966 MakefilePS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; cmake --build .[ 16%] Building CXX object hello_world/CMakeFiles/helloworld.dir/hello_world.cpp.obj[ 33%] Linking CXX static library libhelloworld.a[ 33%] Built target helloworld[ 50%] Building CXX object simple_math/CMakeFiles/simplemath.dir/simple_math.cpp.obj[ 66%] Linking CXX shared library libsimplemath.dll[ 66%] Built target simplemath[ 83%] Building CXX object CMakeFiles/E8_test_cmake_multi.dir/main.cpp.obj[100%] Linking CXX executable E8_test_cmake_multi.exe[100%] Built target E8_test_cmake_multiPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; .\E8_test_cmake_multi.exeHelloWorld 构造函数被调用Say: Hello World!无参构造函数被调用，base_ 初始化为 0.05 + 1 = 65 - 1 = 45 * 1 = 55 / 1 = 5HelloWorld 析构函数被调用PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt;</code></pre><h2>四、讲解常用命令以及访问权限修饰词</h2><h2>4.1 注释</h2><pre><code class="language-bash">CMake 使用 # 进行行注释# 注释演示CMake 使用 #[[ ]] 形式进行块注释#[[    注释演示]]</code></pre><h2>4.2 三个基础命令</h2><pre><code class="language-cpp"># 限制cmake的最小版本要求 （可选，非必须，如果不加可能会有警告）cmake_minimum_required(VERSION 3.10)# 定义目标主工程名称project(E7_test_project)# 定义工程生成一个可执行程序add_executable(E7_test_project main.cpp simple_math.cpp)</code></pre><h3>（1）PROJECT 指令的语法</h3><p>可指定工程的版本、工程描述、web主页地址、支持的语言（默认情况支持所有语言）</p><pre><code class="language-cpp">project(&lt;PROJECT-NAME&gt; [&lt;language-name&gt;...])project(&lt;PROJECT-NAME&gt;       [VERSION &lt;major&gt;[.&lt;minor&gt;[.&lt;patch&gt;[.&lt;tweak&gt;]]]]       [DESCRIPTION &lt;project-description-string&gt;]       [HOMEPAGE_URL &lt;url-string&gt;]       [LANGUAGES &lt;language-name&gt;...])</code></pre><p>例如</p><pre><code class="language-cpp"># 项目名称 "NetworkTool"，版本 1.0.2，描述、主页，支持 C 和 Pythonproject(NetworkTool  VERSION 1.0.2  DESCRIPTION "A tool for network packet analysis"  HOMEPAGE_URL "https://example.com/networktool"  LANGUAGES C Python)</code></pre><h3>（2）add_executable 语法</h3><pre><code class="language-cpp">add_executable(app a.c b.c c.c)add_executable(app a.c;b.c;c.c)</code></pre><h2>4.3 cmake执行命令</h2><pre><code class="language-cpp"># 如果当前就在CMakeLists.txt文件所在路径就直接使用cmake# 最好不要污染源代码文件，即创建build文件夹（产生的副文件放在这里），在build文件夹下使用cmake ..# .. 是上一级目录cmake &lt;顶层CMakeLists.txt文件所在路径&gt;</code></pre><h2>4.4 定义变量</h2><p>SET 指令的语法是：</p><pre><code class="language-cpp"># [] 中的参数为可选项, 如不需要可以不写# VAR：变量名# VALUE：变量值SET(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]])</code></pre><p>例如：</p><pre><code class="language-cpp"># 方式1: 各个源文件之间使用空格间隔# set(SRC_LIST a.c  b.c   c.c)# 方式2: 各个源文件之间使用分号 ; 间隔set(SRC_LIST a.c;b.c;c.c)add_executable(app  ${SRC_LIST})</code></pre><h2>4.5 指定编译器标准</h2><pre><code class="language-cpp">$ g++ *.cpp -std=c++11 -o app</code></pre><p>cmake中：</p><p>（1）在cmake文件里</p><pre><code class="language-cpp">#增加-std=c++11set(CMAKE_CXX_STANDARD 11)#增加-std=c++14set(CMAKE_CXX_STANDARD 14)#增加-std=c++17set(CMAKE_CXX_STANDARD 17)</code></pre><p>（2）在cmake执行时</p><pre><code class="language-cpp"># -D 是一个宏相关的指令# 增加-std=c++11cmake &lt;CMakeLists.txt文件路径&gt; -DCMAKE_CXX_STANDARD=11# 增加-std=c++14cmake &lt;CMakeLists.txt文件路径&gt; -DCMAKE_CXX_STANDARD=14# 增加-std=c++17cmake &lt;CMakeLists.txt文件路径&gt; -DCMAKE_CXX_STANDARD=17# 强制开启cmake . -DCMAKE_CXX_STANDARD=17 -DCMAKE_CXX_STANDARD_REQUIRED=ON</code></pre><h2>4.6 指定可执行程序的输出的路径</h2><pre><code class="language-bash"># CMAKE_CURRENT_SOURCE_DIR 表示当前 CMakeLists.txt 所在的源码目录（通常是项目源代码存放的地方）set(EXE $(CMAKE_CURRENT_SOURCE_DIR)/build/bin)set(EXECUTABLE_OUTPUT_PATH $(EXE))# 或者# CMAKE_BINARY_DIR 表示当前的构建目录（即执行 cmake 命令时所在的目录）set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)</code></pre><h2>4.7 搜索文件</h2><h3>4.7.1&nbsp;aux_source_directory命令可以查找某个路径下的所有源文件</h3><p><code>aux</code>&nbsp;是&nbsp;<strong><code>auxiliary</code></strong>&nbsp;的缩写，意为 &ldquo;辅助的、辅助性的&rdquo;</p><pre><code class="language-bash"># dir：目录  variable：变量名aux_source_directory(&lt; dir &gt; &lt; variable &gt;)</code></pre><h3>4.7.2&nbsp;file搜索</h3><p>GLOB: 将指定目录下搜索到的满足条件的所有文件名生成一个列表，并将其存储到变量中。<br />GLOB_RECURSE：递归搜索指定目录，将搜索到的满足条件的文件名生成一个列表，并将其存储到变量中。</p><pre><code class="language-bash">file(GLOB/GLOB_RECURSE 变量名 要搜索的文件路径和文件类型)</code></pre><p>例如：</p><pre><code class="language-bash"># 关于要搜索的文件路径和类型可加双引号，也可不加file(GLOB MAIN_SRC ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)file(GLOB MAIN_HEAD ${CMAKE_CURRENT_SOURCE_DIR}/include/*.h)</code></pre><h2>4.8 包含头文件</h2><pre><code class="language-bash">include_directories(&lt;含头文件的目录&gt;)</code></pre><p>例如：</p><pre><code class="language-bash"># 执行 project(CALC) 后，PROJECT_SOURCE_DIR 会被自动设置为包含该 CMakeLists.txt 的目录（即项目根目录），# 因此 ${PROJECT_SOURCE_DIR}/include 就是 “项目根目录下的 include 文件夹”，用于指定头文件搜索路径。project(CALC)  # 定义项目名称为 CALCinclude_directories(${PROJECT_SOURCE_DIR}/include)  # 使用 PROJECT_SOURCE_DIR</code></pre><h2>4.9&nbsp;&nbsp;制作动态库或静态库</h2><h3>4.9.1&nbsp;制作静态库</h3><pre><code class="language-bash">add_library(库名称 STATIC 源文件1 [源文件2] ...) </code></pre><h3>4.9.2&nbsp;制作动态库</h3><pre><code class="language-bash">add_library(库名称 SHARED 源文件1 [源文件2] ...) </code></pre><h3>4.9.3&nbsp;指定库输出的路径</h3><h4>（1）方式1 - 适用于动态库</h4><p>对于生成的库文件来说和可执行程序一样都可以指定输出路径。由于在Linux下生成的动态库默认是有执行权限的，所以可以按照生成可执行程序的方式去指定它生成的目录：</p><pre><code class="language-bash"># PROJECT_SOURCE_DIR必须在project()指令后使用set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)</code></pre><h4>（2）方式2 - 都适用</h4><p>由于在Linux下生成的静态库默认不具有可执行权限，所以在指定静态库生成的路径的时候就不能使用EXECUTABLE_OUTPUT_PATH宏了，而应该使用LIBRARY_OUTPUT_PATH，这个宏对应静态库文件和动态库文件都适用。</p><pre><code class="language-bash">cmake_minimum_required(VERSION 3.0)project(CALC)include_directories(${PROJECT_SOURCE_DIR}/include)file(GLOB SRC_LIST "${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp")# 设置动态库/静态库生成路径set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)# 生成动态库#add_library(calc SHARED ${SRC_LIST})# 生成静态库add_library(calc STATIC ${SRC_LIST})</code></pre><h2>4.10&nbsp;包含库文件</h2><p>在编写程序的过程中，可能会用到一些系统提供的动态库或者自己制作出的动态库或者静态库文件，cmake中也为我们提供了相关的加载动态库的命令。</p><h3>4.10.1 链接静态库</h3><pre><code class="language-bash"># 参数1：指定出要链接的静态库的名字#  可以是全名 libxxx.a#  也可以是掐头（lib）去尾（.a）之后的名字 xxx# 参数2-N：要链接的其它静态库的名字link_libraries(&lt;static lib&gt; [&lt;static lib&gt;...])</code></pre><h3>4.10.2 指出库的路径</h3><p>如果该静态库不是系统提供的（自己制作或者使用第三方提供的静态库）可能出现静态库找不到的情况，此时可以将静态库的路径也指定出来：</p><pre><code class="language-bash">link_directories(&lt;lib path&gt;)</code></pre><h3>4.10.3&nbsp;链接动态库</h3><pre><code class="language-bash"># target：指定要加载的库的文件的名字# 该文件可能是一个源文件# 该文件可能是一个动态库/静态库文件# 该文件可能是一个可执行文件target_link_libraries(    &lt;target&gt;     &lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...     [&lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...]...)</code></pre><p>PRIVATE|PUBLIC|INTERFACE：动态库的访问权限，默认为PUBLIC</p><p>如果各个动态库之间没有依赖关系，无需做任何设置，三者没有没有区别，一般无需指定，使用默认的 PUBLIC 即可。</p><p>动态库的链接具有传递性，如果动态库 A 链接了动态库B、C，动态库D链接了动态库A，此时动态库D相当于也链接了动态库B、C，并可以使用动态库B、C中定义的方法。</p><pre><code class="language-bash">target_link_libraries(A B C)target_link_libraries(D A)</code></pre><pre><code class="language-bash">PUBLIC：在public后面的库会被Link到前面的target中，并且里面的符号也会被导出，提供给第三方使用。PRIVATE：在private后面的库仅被link到前面的target中，并且终结掉，第三方不能感知你调了啥库INTERFACE：在interface后面引入的库不会被链接到前面的target中，只会导出符号。</code></pre><h3>4.10.4 链接系统动态库</h3><pre><code class="language-bash">target_link_libraries(app pthread)</code></pre><p>动态库的链接和静态库是完全不同的：</p><p>静态库会在生成可执行程序的链接阶段被打包到可执行程序中，所以可执行程序启动，静态库就被加载到内存中了。</p><p>动态库在生成可执行程序的链接阶段不会被打包到可执行程序中，当可执行程序被启动并且调用了动态库中的函数的时候，动态库才会被加载到内存。</p><h3>4.10.5&nbsp;链接第三方动态库</h3><pre><code class="language-bash">link_directories(path)target_link_libraries(app pthread calc)</code></pre><h3>4.10.5 指定目标链接库</h3><p>一般放在add_executable()后</p><pre><code class="language-bash">target_link_libraries(target_name [item1 [item2 [...]]]                      [&lt;debug|optimized|general&gt; &lt;lib1&gt; [&lt;lib2&gt; [...]]])</code></pre><h2>4.11 信息打印</h2><pre><code class="language-bash">message([STATUS|WARNING|AUTHOR_WARNING|FATAL_ERROR|SEND_ERROR] "message to display" ...)</code></pre><p>(无) ：重要消息<br />STATUS ：非重要消息<br />WARNING：CMake 警告, 会继续执行<br />AUTHOR_WARNING：CMake 警告 (dev), 会继续执行<br />SEND_ERROR：CMake 错误, 继续执行，但是会跳过生成的步骤<br />FATAL_ERROR：CMake 错误, 终止所有处理过程</p><h2>4.12&nbsp;追加拼接</h2><h3>4.12.1 set追加</h3><pre><code class="language-bash">set(变量名1 ${变量名1} ${变量名2} ...)</code></pre><p>例如：</p><pre><code class="language-bash">file(GLOB SRC_1 ${PROJECT_SOURCE_DIR}/src1/*.cpp)file(GLOB SRC_2 ${PROJECT_SOURCE_DIR}/src2/*.cpp)# 追加(拼接)set(SRC_1 ${SRC_1} ${SRC_2})</code></pre><p>如果第一个参数中原来有数据会对原数据就行覆盖。</p><h3>4.12.2 list拼接</h3><pre><code class="language-bash">list(APPEND &lt;list&gt; [&lt;element&gt; ...])</code></pre><p><code>list(APPEND SRC_1 ${SRC_1} ${SRC_2})</code>&nbsp;不会 &ldquo;覆盖&rdquo;&nbsp;<code>SRC_1</code>&nbsp;原来的值，而是会<strong>在原有值的基础上追加新内容</strong>，但由于命令中包含&nbsp;<code>${SRC_1}</code>&nbsp;自身，会导致&nbsp;<code>SRC_1</code>&nbsp;的原有内容被<strong>重复添加一次</strong>。</p><pre><code class="language-bash">file(GLOB SRC_1 ${PROJECT_SOURCE_DIR}/src1/*.cpp)file(GLOB SRC_2 ${PROJECT_SOURCE_DIR}/src2/*.cpp)# 追加(拼接)list(APPEND SRC_1 ${SRC_1} ${SRC_2})</code></pre><h2>4.13&nbsp;字符串移除</h2><pre><code class="language-bash">list(REMOVE_ITEM &lt;list&gt; &lt;value&gt; [&lt;value&gt; ...])</code></pre><p>通过 file 命令搜索源文件的时候得到的是文件的绝对路径（在list中每个文件对应的路径都是一个item，并且都是绝对路径），在移除的时候也要将该文件的绝对路径指定出来才可以</p><p>4.14&nbsp;</p><pre><code class="language-bash">在 CMake 中，list 命令用于对列表（以分号分隔的字符串）进行各种操作，包括增删改查、排序、拼接等。以下是 list 命令的全部子命令整理，包含语法、参数说明和功能描述：1. list(LENGTH &lt;list&gt; &lt;output variable&gt;)功能：获取列表的长度（元素数量）。参数：&lt;list&gt;：目标列表（变量名，无需 ${} 包裹）。&lt;output variable&gt;：存储长度的变量（会被创建或覆盖）。示例：cmakeset(my_list a b c)list(LENGTH my_list len)  # len 会被赋值为 3message(${len})  # 输出：32. list(GET &lt;list&gt; &lt;index&gt; [&lt;index&gt;...] &lt;output variable&gt;)功能：获取列表中指定索引的元素（支持多个索引）。参数：&lt;list&gt;：目标列表。&lt;index&gt;：元素索引（从 0 开始；负数表示从末尾计数，-1 为最后一个元素）。&lt;output variable&gt;：存储结果的变量（多个元素会组成新列表）。注意：索引超出范围会报错。示例：cmakeset(my_list a b c d)list(GET my_list 1 -1 out)  # 获取索引 1（b）和 -1（d）message(${out})  # 输出：b;d3. list(JOIN &lt;list&gt; &lt;glue&gt; &lt;output variable&gt;)功能：用指定字符串（glue）连接列表元素，生成单个字符串。参数：&lt;list&gt;：目标列表。&lt;glue&gt;：连接符（字符串，如 ,、- 等）。&lt;output variable&gt;：存储结果字符串的变量。示例：cmakeset(my_list a b c)list(JOIN my_list ", " str)  # 用 ", " 连接message(${str})  # 输出：a, b, c4. list(FIND &lt;list&gt; &lt;value&gt; &lt;output variable&gt;)功能：查找元素在列表中的索引（首次出现的位置）。参数：&lt;list&gt;：目标列表。&lt;value&gt;：要查找的元素。&lt;output variable&gt;：存储结果的变量（找到则返回索引，未找到返回 -1）。示例：cmakeset(my_list a b c b)list(FIND my_list b idx)  # 查找 "b" 首次出现的位置message(${idx})  # 输出：15. list(APPEND &lt;list&gt; [&lt;element&gt;...])功能：向列表末尾追加一个或多个元素。参数：&lt;list&gt;：目标列表（若不存在则创建）。&lt;element&gt;...：要追加的元素（多个元素用空格分隔）。示例：cmakeset(my_list a b)list(APPEND my_list c d)  # 追加 c、dmessage(${my_list})  # 输出：a;b;c;d6. list(INSERT &lt;list&gt; &lt;index&gt; &lt;element&gt; [&lt;element&gt;...])功能：在列表指定索引位置插入一个或多个元素。参数：&lt;list&gt;：目标列表。&lt;index&gt;：插入位置（0 表示开头，超出范围则插入末尾）。&lt;element&gt;...：要插入的元素。示例：cmakeset(my_list a b c)list(INSERT my_list 1 x y)  # 在索引 1 处插入 x、ymessage(${my_list})  # 输出：a;x;y;b;c7. list(PREPEND &lt;list&gt; [&lt;element&gt;...])功能：向列表开头（索引 0 位置）插入一个或多个元素。参数：&lt;list&gt;：目标列表（若不存在则创建）。&lt;element&gt;...：要插入的元素（顺序保留，先加的元素更靠前）。示例：cmakeset(my_list c d)list(PREPEND my_list a b)  # 开头插入 a、bmessage(${my_list})  # 输出：a;b;c;d8. list(POP_BACK &lt;list&gt; [&lt;out-var&gt;...])功能：移除列表最后一个元素（可选：将移除的元素存入变量）。参数：&lt;list&gt;：目标列表（若为空则无操作）。&lt;out-var&gt;...（可选）：存储被移除元素的变量（仅保留最后一个被移除的元素，多变量时多余变量为空）。示例：cmakeset(my_list a b c)list(POP_BACK my_list last)  # 移除最后一个元素 c，存入 lastmessage(${my_list})  # 输出：a;bmessage(${last})     # 输出：c9. list(POP_FRONT &lt;list&gt; [&lt;out-var&gt;...])功能：移除列表第一个元素（可选：将移除的元素存入变量）。参数：与 POP_BACK 类似，区别为移除第一个元素。示例：cmakeset(my_list a b c)list(POP_FRONT my_list first)  # 移除第一个元素 a，存入 firstmessage(${my_list})  # 输出：b;cmessage(${first})    # 输出：a10. list(REMOVE_ITEM &lt;list&gt; &lt;value&gt; [&lt;value&gt;...])功能：移除列表中所有与 &lt;value&gt; 匹配的元素（精确匹配）。参数：&lt;list&gt;：目标列表。&lt;value&gt;...：要移除的元素（可多个）。示例：cmakeset(my_list a b c b a)list(REMOVE_ITEM my_list a)  # 移除所有 "a"message(${my_list})  # 输出：b;c;b11. list(REMOVE_AT &lt;list&gt; &lt;index&gt; [&lt;index&gt;...])功能：移除列表中指定索引的元素（支持多个索引）。参数：&lt;list&gt;：目标列表。&lt;index&gt;...：要移除的元素索引（超出范围则无操作）。示例：cmakeset(my_list a b c d)list(REMOVE_AT my_list 1 3)  # 移除索引 1（b）和 3（d）message(${my_list})  # 输出：a;c12. list(REMOVE_DUPLICATES &lt;list&gt;)功能：移除列表中的重复元素（保留首次出现的元素）。参数：&lt;list&gt;：目标列表。示例：cmakeset(my_list a b a c b)list(REMOVE_DUPLICATES my_list)  # 去重message(${my_list})  # 输出：a;b;c13. list(REVERSE &lt;list&gt;)功能：反转列表中元素的顺序。参数：&lt;list&gt;：目标列表。示例：cmakeset(my_list a b c)list(REVERSE my_list)  # 反转message(${my_list})  # 输出：c;b;a14. list(SORT &lt;list&gt; [COMPARE &lt;compare&gt;] [CASE &lt;case&gt;] [ORDER &lt;order&gt;])功能：对列表元素进行排序（默认按字符串升序、大小写敏感）。可选参数：COMPARE &lt;compare&gt;：排序方式（STRING：字符串排序，默认；FILE_BASENAME：按文件名排序；NATURAL：自然数排序）。CASE &lt;case&gt;：大小写敏感性（SENSITIVE：敏感，默认；INSENSITIVE：不敏感）。ORDER &lt;order&gt;：排序方向（ASCENDING：升序，默认；DESCENDING：降序）。示例：cmakeset(my_list c A b)list(SORT my_list CASE INSENSITIVE)  # 大小写不敏感升序message(${my_list})  # 输出：A;b;c</code></pre><h2>4.14&nbsp;宏定义</h2><pre><code class="language-bash">add_definitions(-D宏名称)</code></pre><h2>4.15&nbsp;预定义宏</h2><table><thead><tr><th>宏</th><th>功能描述</th></tr></thead><tbody><tr><td>PROJECT_SOURCE_DIR</td><td>使用&nbsp;<code>cmake</code>&nbsp;命令时指定的源码目录（通常是工程根目录，即最顶层&nbsp;<code>CMakeLists.txt</code>&nbsp;所在目录）</td></tr><tr><td>PROJECT_BINARY_DIR</td><td>执行&nbsp;<code>cmake</code>&nbsp;命令的目录（构建目录，用于存放构建过程中生成的文件）</td></tr><tr><td>CMAKE_CURRENT_SOURCE_DIR</td><td>当前正在处理的&nbsp;<code>CMakeLists.txt</code>&nbsp;文件所在的路径</td></tr><tr><td>CMAKE_CURRENT_BINARY_DIR</td><td>当前目标（target）的编译目录（存放当前目标的中间编译产物，如&nbsp;<code>.o</code>&nbsp;文件）</td></tr><tr><td>EXECUTABLE_OUTPUT_PATH</td><td>重新定义目标二进制可执行文件的存放位置（需通过&nbsp;<code>set</code>&nbsp;命令手动设置）</td></tr><tr><td>LIBRARY_OUTPUT_PATH</td><td>重新定义目标链接库文件（静态库、动态库）的存放位置（需通过&nbsp;<code>set</code>&nbsp;命令手动设置）</td></tr><tr><td>PROJECT_NAME</td><td>返回通过&nbsp;<code>project()</code>&nbsp;指令定义的项目名称</td></tr><tr><td>CMAKE_BINARY_DIR</td><td>项目实际构建路径（与 PROJECT_BINARY_DIR 一致，通常为执行&nbsp;<code>cmake</code>&nbsp;命令的目录，如&nbsp;<code>build</code>&nbsp;目录）</td></tr></tbody></table><h2>4.16&nbsp;添加子目录</h2><p><strong><code>add_subdirectory()</code>&nbsp;的完整语法如下（方括号&nbsp;<code>[]</code>&nbsp;表示可选参数）：</strong></p><p>cmake</p><pre><code>add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</code></pre><p><strong>参数详解</strong></p><ol><li><p><strong><code>source_dir</code>（必选）</strong>指定包含&nbsp;<code>CMakeLists.txt</code>&nbsp;的子目录路径（源目录）。</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;路径可以是&lt;strong&gt;相对路径&lt;/strong&gt;（相对于当前&amp;nbsp;&lt;code&gt;CMakeLists.txt&lt;/code&gt;&amp;nbsp;所在的目录），或&lt;strong&gt;绝对路径&lt;/strong&gt;。&lt;/li&gt;&lt;li&gt;要求该目录下必须存在&amp;nbsp;&lt;code&gt;CMakeLists.txt&lt;/code&gt;，否则 CMake 会报错（提示 &amp;ldquo;找不到子目录的 CMakeLists.txt&amp;rdquo;）。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;示例：若主目录&amp;nbsp;&lt;code&gt;CMakeLists.txt&lt;/code&gt;&amp;nbsp;所在路径为&amp;nbsp;&lt;code&gt;./project&lt;/code&gt;，子目录&amp;nbsp;&lt;code&gt;./project/module&lt;/code&gt;&amp;nbsp;有&amp;nbsp;&lt;code&gt;CMakeLists.txt&lt;/code&gt;，则可写为：&lt;/p&gt;&lt;p&gt;cmake&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>add_subdirectory(module)  # 相对路径，等价于 add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/module)<br></code></pre><br></li><br><li><br><p><strong><code>binary_dir</code>（可选）</strong>指定子目录构建产物（如&nbsp;<code>.o</code>&nbsp;目标文件、可执行文件、库文件等）的存放目录（二进制目录）。</p></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;若不指定，默认与&amp;nbsp;&lt;code&gt;source_dir&lt;/code&gt;&amp;nbsp;同名，即构建产物会放在&lt;strong&gt;构建目录（&lt;code&gt;build&lt;/code&gt;）下与源目录同名的子目录&lt;/strong&gt;中（例如：&lt;code&gt;build/module&lt;/code&gt;）。&lt;/li&gt;&lt;li&gt;若指定，则构建产物会放在该目录下（路径同样可以是相对路径或绝对路径，相对路径基于当前构建目录）。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;示例：希望&amp;nbsp;&lt;code&gt;module&lt;/code&gt;&amp;nbsp;的构建产物放在&amp;nbsp;&lt;code&gt;build/my_output&lt;/code&gt;&amp;nbsp;目录下：&lt;/p&gt;&lt;p&gt;cmake&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>add_subdirectory(module my_output)  # source_dir=module，binary_dir=my_output<br></code></pre><br></li><br><li><br><p><strong><code>EXCLUDE_FROM_ALL</code>（可选）</strong>一个关键字参数，用于指定子目录的构建目标是否<strong>排除在默认构建流程之外</strong>。</p></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;若添加此参数，子目录的目标（如&amp;nbsp;&lt;code&gt;module&lt;/code&gt;&amp;nbsp;中的库）不会被默认构建（即执行&amp;nbsp;&lt;code&gt;make&lt;/code&gt;&amp;nbsp;或&amp;nbsp;&lt;code&gt;cmake --build&lt;/code&gt;&amp;nbsp;时不会自动编译），需手动指定目标（如&amp;nbsp;&lt;code&gt;make module_lib&lt;/code&gt;）才会构建。&lt;/li&gt;&lt;li&gt;适用于 &amp;ldquo;可选组件&amp;rdquo; 场景（如子目录是一个可选插件，默认不需要编译）。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;示例：子目录&amp;nbsp;&lt;code&gt;plugin&lt;/code&gt;&amp;nbsp;是可选组件，默认不构建：&lt;/p&gt;&lt;p&gt;cmake&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>add_subdirectory(plugin EXCLUDE_FROM_ALL)</code></pre><br></li></p></ol><p>参考链接（如有侵权，请联系删除）：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.3/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P9N6" data-link-title="https://subingwen.cn/cmake/CMake-primer/" href="https://subingwen.cn/cmake/CMake-primer/" title="https://subingwen.cn/cmake/CMake-primer/">https://subingwen.cn/cmake/CMake-primer/</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vscode ide 编辑器 cmake</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【CMake】Windows下cmake构建+编译，代码（UTF-8编码保存）运行时中文字符出现乱码的解决方法</title>
    <link href="/2025/10/28/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8Bcmake%E6%9E%84%E5%BB%BA+%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BB%A3%E7%A0%81%EF%BC%88UTF-8%E7%BC%96%E7%A0%81%E4%BF%9D%E5%AD%98%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E5%87%BA%E7%8E%B0%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2025/10/28/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8Bcmake%E6%9E%84%E5%BB%BA+%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BB%A3%E7%A0%81%EF%BC%88UTF-8%E7%BC%96%E7%A0%81%E4%BF%9D%E5%AD%98%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E5%87%BA%E7%8E%B0%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>&nbsp;1. 解决编码乱码问题：</h1><p><span style="background-color:#ffd900">即需要三端都保持同样的编码：代码保存时+CMake构建时+终端激活UTF-8编码显示</span></p><h2>（1）vscode的右下角，将.h/.c/.cpp代码的编码格式改为UTF-8</h2><p><img src="/2025/10/28/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8Bcmake%E6%9E%84%E5%BB%BA+%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BB%A3%E7%A0%81%EF%BC%88UTF-8%E7%BC%96%E7%A0%81%E4%BF%9D%E5%AD%98%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E5%87%BA%E7%8E%B0%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/fa601e2886af46449cce1f7c86cf7158.png"></p><h2>（2）将cmake的vscode插件里cmake使用时的编码固定为UTF-8，进入vscode的设置搜索encoding，找到扩展的cmake，更改编码</h2><p><img src="/2025/10/28/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90CMake%E3%80%91Windows%E4%B8%8Bcmake%E6%9E%84%E5%BB%BA+%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BB%A3%E7%A0%81%EF%BC%88UTF-8%E7%BC%96%E7%A0%81%E4%BF%9D%E5%AD%98%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E5%87%BA%E7%8E%B0%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/52ab1a716f4a4671b58c5f476301d2eb.png"></p><h2>（3）将vscode里的powershell代理终端切换为UTF-8编码格式，在vscode的总设置文件setting（使用ctrl+shift+p搜索setting）</h2><pre><code class="language-bash">"terminal.integrated.profiles.windows": {          "PowerShell": {            "source": "PowerShell",            "icon": "terminal-powershell",            "args": ["-NoExit","chcp 65001"]        },        "Command Prompt": {            "path": [                "${env:windir}\\Sysnative\\cmd.exe",                "${env:windir}\\System32\\cmd.exe"            ],            "args": ["/K","chcp 65001"],            "icon": "terminal-cmd"        },}</code></pre><p>效果：</p><pre><code class="language-bash">Active code page: 65001PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi&gt; cd buildPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; ls    目录: E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\buildMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----        2025/10/28     20:34                .cmaked-----        2025/10/28     20:34                CMakeFilesd-----        2025/10/28     20:34                hello_worldd-----        2025/10/28     20:34                simple_math-a----        2025/10/28     20:34          15256 CMakeCache.txt-a----        2025/10/28     20:34           2515 cmake_install.cmake-a----        2025/10/28     20:34           1749 compile_commands.json-a----        2025/10/28     20:34           6966 MakefilePS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; cmake --build .[ 16%] Building CXX object hello_world/CMakeFiles/helloworld.dir/hello_world.cpp.obj[ 33%] Linking CXX static library libhelloworld.a[ 33%] Built target helloworld[ 50%] Building CXX object simple_math/CMakeFiles/simplemath.dir/simple_math.cpp.obj[ 66%] Linking CXX shared library libsimplemath.dll[ 66%] Built target simplemath[ 83%] Building CXX object CMakeFiles/E8_test_cmake_multi.dir/main.cpp.obj[100%] Linking CXX executable E8_test_cmake_multi.exe[100%] Built target E8_test_cmake_multiPS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt; .\E8_test_cmake_multi.exeHelloWorld 构造函数被调用Say: Hello World!无参构造函数被调用，base_ 初始化为 0.05 + 1 = 65 - 1 = 45 * 1 = 55 / 1 = 5HelloWorld 析构函数被调用PS E:\VSCode_Projects\VSCode_Examples_Workspaces\E8_test_cmake_multi\build&gt;</code></pre><p></p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>windows cmake UTF-8 乱码</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】【Sourcetree】安装与使用教程</title>
    <link href="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    <url>/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、安装</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Sourcetree | Free Git GUI for Mac and Windows" href="https://www.sourcetreeapp.com/" title="Sourcetree | Free Git GUI for Mac and Windows">Sourcetree | Free Git GUI for Mac and Windows</a></p><p>跳过</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/c631fe3c10c1489ca8a522c79b3a4651.png"></p><p>下一步</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/0f40aa076cb040c3876f20a1c7f7d393.png"></p><p>填写自己的git账户</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/d45841b09a6d4d88a0c4e90c18473755.png"></p><p>点击 是，会让你找到.ppk 格式的私钥，你把ssh生成的私钥拷贝一份然后改为.ppk格式的就可以一样的使用，对应的公钥（ssh的公钥）可通用。</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90Sourcetree%E3%80%91%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/09031cef72c34009bd8d1fc07fb7de24.png"></p><h1 style="background-color:transparent">二、使用</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="【Git】Sourcetree上传项目的过程记录_sourcetree上传本地项目-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/149025939" title="【Git】Sourcetree上传项目的过程记录_sourcetree上传本地项目-CSDN博客">【Git】Sourcetree上传项目的过程记录_sourcetree上传本地项目-CSDN博客</a></p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git sourcetree</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】【TortoiseGit】TortoiseGit安装与基础使用</title>
    <link href="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、TortoiseGit安装</h1><h2>1.1 下载</h2><p>首先，确保安装了git，再安装TortoiseGit。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Git - 安装 Git" href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" title="Git - 安装 Git">Git - 安装 Git</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Download – TortoiseGit – Windows Shell Interface to Git" href="https://tortoisegit.org/download/" title="Download – TortoiseGit – Windows Shell Interface to Git">Download &ndash; TortoiseGit &ndash; Windows Shell Interface to Git</a></p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/2ca71711432a4eaca713b1c66a4ef881.png"></p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/c49bbf68cd1b4e04a04f51d183381a82.png"></p><p>语言包：</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/c955cc6772e7488183cf5c355195942d.png"></p><h2>1.2 双击安装</h2><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/f45a9f2d27a04f6787d0c43d95b5b207.png"></p><p><strong>SSH 客户端选项</strong>：</p><ol></ol><ul><li>选项 1（已选中）：<code>TortoiseGitPlink, based on PuTTY; optimized for TortoiseGit and integrates better with Windows.</code>意思是：<em>TortoiseGitPlink（基于 PuTTY 开发），为 TortoiseGit 做了优化，且与 Windows 系统集成更友好</em>。</li><li>选项 2：<code>OpenSSH, Git default SSH Client</code>意思是：<em>OpenSSH（Git 默认的 SSH 客户端）</em>。</li></ul><p>默认就好</p><p>安装位置</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/b2e179ca2cc94e20bdb275987d38bf03.png"></p><p>然后就直接安装</p><h2>1.3 语言包双击安装</h2><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/6d4ae30b02694f608650c8c14dbad874.png"></p><p>需要安装语言包后，才能设置，直接装</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/6f608f2a85c54944883495ed1a9335fa.png"></p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/e8abab20fa8d493eb985107227523b92.png"></p><h2>1.4 第一次启动</h2><p>TortoiseGit</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/3155c48832324e16abce09509b711e12.png"></p><p>查看帮助文档<br /><img alt="" height="1029" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/a697230559154ba085a0ab44e2ae7008.png" width="1912" /></p><p>进入setting，一般不会需要手动添加git路径，会自动检测<br /><img alt="" height="620" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/96c2a8087e124fa1a50c735648b97131.png" width="764" /></p><h2 style="background-color:transparent">1.5 如果本地git没有配置用户需要自己配置<br /><img alt="" height="626" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/bd667a4d4d404d4faf07b17554c88b96.png" width="764" /></h2><h2>1.6 配置密钥，第四个</h2><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/b9d0af309dfc4b828c37f4c3702c60dd.png"></p><h3>方法一：你可以现场生成一对公钥和私钥，然后的配置就跟Windows的ssh客户端与github的配置方法一样的。</h3><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/a5e288d069c64eb68c31116299615c07.png"></p><h2 style="background-color:transparent">方法二：使用你之前的ssh产生的一对公钥和私钥，将私钥的格式改为id_rsa.ppk，一样能够识别到，然后导入后依然要保存私钥（小乌龟使用的格式），也保存一下公钥防止忘记，实际上小乌龟保存下来的公钥，核心内容与ssh的内容一样，只是格式不同。意思就是你的小乌龟私钥从ssh的私钥转过来，保存下来，后面在pagent把小乌龟私钥添加上，而github上的公钥部分就是ssh的公钥可通用（不用再把小乌龟公钥在添加一遍，比第一个方法少一个在服务端布置一个公钥的步骤）</h2><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/971166ef06b9472d8f41cb7a039fd301.png"></p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/9628b4c9fff74bedb0484fb322334bbe.png"></p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/a033c907e4554358bec1d690b688651f.png"></p><p>这是&nbsp;<strong>PuTTY Key Generator（PuTTY 密钥生成器）</strong>&nbsp;的界面，同时弹出了一个提示框（<code>PuTTYgen Notice</code>），核心内容解释如下：</p><h3>提示框内容</h3><p>提示框显示：&ldquo;<code>Successfully imported foreign key (OpenSSH SSH-2 private key (new format)). To use this key with PuTTY, you need to use the &quot;Save private key&quot; command to save it in PuTTY&#39;s own format.</code>&rdquo;翻译为：<em>&ldquo;成功导入外部密钥（OpenSSH 格式的 SSH-2 私钥（新格式））。要在 PuTTY 中使用此密钥，你需要使用「保存私钥（Save private key）」命令，将其保存为 PuTTY 自身支持的格式。&rdquo;</em></p><h3>主界面（PuTTY Key Generator）</h3><p>主界面是用于<strong>生成、管理 SSH 密钥</strong>的工具，包含以下核心区域：</p><ul><li><strong>菜单栏</strong>：<code>File</code>（文件）、<code>Key</code>（密钥）、<code>Conversions</code>（转换）、<code>Help</code>（帮助），用于密钥的各类操作。</li><li><strong>Key 区域</strong>：显示公钥（<code>Public key for pasting into OpenSSH authorized_keys file</code>，可复制到 OpenSSH 的&nbsp;<code>authorized_keys</code>&nbsp;文件中）、密钥指纹（<code>Key fingerprint</code>）、密钥注释（<code>Key comment</code>）、密钥密码（<code>Key passphrase</code>，用于加密私钥）等。</li><li><strong>Actions 区域</strong>：提供密钥操作按钮，比如&nbsp;<code>Generate a public/private key pair</code>（生成公私钥对）、<code>Load an existing private key</code>（加载已有私钥）、<code>Save the generated key</code>（保存生成的密钥）等。</li><li><strong>Parameters 区域</strong>：选择要生成的<strong>密钥类型</strong>（如 RSA、DSA、ECDSA 等），以及<strong>密钥位数</strong>（<code>Number of bits in a generated key</code>，图中为 2048 位，影响密钥安全性）。</li></ul><h3 style="background-color:transparent">场景背景</h3><p>通常在需要将&nbsp;<strong>OpenSSH 格式的 SSH 私钥</strong>&nbsp;用于 PuTTY 相关工具（比如配合 TortoiseGit 使用 PuTTY 作为 SSH 客户端时），需要通过 PuTTY Key Generator 导入 OpenSSH 私钥，再转换为 PuTTY 专用的&nbsp;<code>.ppk</code>&nbsp;格式，才能被 PuTTY 识别和使用。提示框就是在告知用户 &ldquo;已成功导入 OpenSSH 私钥，但需另存为 PuTTY 格式&rdquo;。</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/869286747e7647ef9cb34684fc477e72.png"></p><p>add key，添加私钥.ppk</p><h1>二、基础使用</h1><p>url是远程仓库地址</p><p>选择本地存储仓库地址</p><p>然后加载Putty的私钥</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/a982b402fcb74a318afffebc23671661.png"></p><p>中间有一个询问你是否信任这个服务器，只要是正确的github地址，就信任，然后就直接克隆成功</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/77cbcf8c91dc497298d6a3f80c3dedb3.png"></p><p>假设这个库是自己的，你要配置远程推送的仓库在下面那里设置</p><p><img src="/2025/10/20/%E3%80%90Git%E3%80%91%E3%80%90TortoiseGit%E3%80%91TortoiseGit%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/13275da471bf45fdb252e353780bd75e.png"></p><p>后续使用方法待后续更新。</p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【W800】基于WM IoT SDK的环境搭建</title>
    <link href="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言</strong><br />（提示：在最开始，在windows进行WM IoT SDK的环境搭建，但是搭建起来进行编译例程编译速度比windows的ESP-IDF还慢，后面在Ubuntu里进行了WM IoT SDK的环境搭建，Linux下编译速度很快，最后找到了问题所在：Windows系统的C盘初始占用和内存初始占用过高。重装系统后在Windows系统里编译速度也比较快了。）</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="快速入门 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/get_started/index.html#compiling-environment" title="快速入门 — WinnerMicro 在线文档">快速入门 &mdash; WinnerMicro 在线文档</a></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/e9eb194477d547d2a3a11400234dd2b7.png"></p><h2>一、Windows系统下的基于WM IoT SDK的环境搭建</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="VS Code — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/get_started/ide.html" title="VS Code — WinnerMicro 在线文档">VS Code &mdash; WinnerMicro 在线文档</a></p><h2>1.1 安装VSCode和MingW，即需要WM-SDK插件和GCC等工具</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Visual Studio Code - Code Editing. Redefined" href="https://code.visualstudio.com/" title="Visual Studio Code - Code Editing. Redefined">Visual Studio Code - Code Editing. Redefined</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="【随笔】【MingW】MingW仓库地址-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/151022947?ops_request_misc=%257B%2522request%255Fid%2522%253A%25225e2413d996e2f7c9e4ad5c49f130e914%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=5e2413d996e2f7c9e4ad5c49f130e914&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-151022947-null-null.142^v102^pc_search_result_base5&amp;utm_term=%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90MingW%E3%80%91MingW%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80&amp;spm=1018.2226.3001.4187" title="【随笔】【MingW】MingW仓库地址-CSDN博客">【随笔】【MingW】MingW仓库地址-CSDN博客</a></p><p>针对 Windows 64 位系统，推荐选择&nbsp;<strong><code>x86_64-15.2.0-release-win32-seh-ucrt_rt_v13-rev0.7z</code></strong></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/10b78852684447da8a5db5cd4cc05608.png"></p><p>这些文件是针对不同<strong>硬件架构、操作系统环境、运行时库</strong>的预编译包，以及源码包，用于适配多样的开发 / 运行场景（比如嵌入式、桌面系统等）。以下是关键维度的拆解：</p><h3>1. 架构与平台维度</h3><ul><li><strong><code>i686</code></strong>：针对&nbsp;<strong>32 位 x86</strong>&nbsp;处理器（兼容早期 Intel/AMD 32 位 CPU）。</li><li><strong><code>x86_64</code></strong>：针对&nbsp;<strong>64 位 x86</strong>&nbsp;处理器（即 AMD64/Intel 64 架构）。</li><li><strong>环境标识</strong>：<code>posix</code>（适配类 Unix 系统，如 Linux、macOS）、<code>win32</code>（适配 Windows 系统）、<code>mcf</code>（可能是特定内存模型 / 兼容配置，用于嵌入式或特殊场景）。</li></ul><h3>2. 编译与调试维度</h3><ul><li><strong>调试 / 异常处理格式</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;code&gt;dwarf&lt;/code&gt;：一种跨平台的&lt;strong&gt;调试信息格式&lt;/strong&gt;，常用于类 Unix 系统，方便调试工具解析符号、断点等。&lt;/li&gt;&lt;li&gt;&lt;code&gt;seh&lt;/code&gt;（Structured Exception Handling）：Windows 专属的&lt;strong&gt;异常处理机制&lt;/strong&gt;，用于捕获 / 处理运行时错误。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;运行时库&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;code&gt;ucrt&lt;/code&gt;（Universal C Runtime）：微软 &amp;ldquo;通用 C 运行时&amp;rdquo;，是现代 Windows / 跨平台场景的标准 C 库。&lt;/li&gt;&lt;li&gt;&lt;code&gt;msvcrt&lt;/code&gt;（Microsoft Visual C Runtime）：传统的微软 VC 运行时库，兼容旧版 Windows 或 legacy 项目。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3>3. 其他组件</h3><ul><li><strong><code>rt_v13</code></strong>：推测是<strong>实时（RT）组件 / 运行时</strong>的版本标识，可能为实时系统、嵌入式场景提供支持。</li><li><strong>源码包</strong>（<code>Source code (zip/tar.gz)</code>）：提供原始代码，便于用户自定义编译、查看实现或适配特殊需求。</li></ul><p>简言之，这些包是为了让软件能在 &ldquo;32 位 / 64 位 x86 处理器 + Windows / 类 Unix 系统 + 不同运行时 / 调试需求&rdquo; 等组合场景下直接使用，也支持用户基于源码二次开发。</p><h2>1.2 安装WM IoT SDK环境的VSCode插件</h2><p><strong>WM-IDE</strong><br /><img alt="" height="781" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/0b3d8340378f4012b7723508255ea99c.png" width="1880" /></p><p>安装后</p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/a3ab49ae990b4724be9320174702d811.png"></p><h2>1.3 配置插件，安装SDK以及toolchains。点击扳手按钮进行配置，Windows的配置非常简单，可以直接下载，但是Linux下的配置就有点麻烦。</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/05370f18b3884f84854cc5165763980b.png"></p><h2>1.4 安装SDK，点击browse选择一个SDK存放路径，在点击Download直接下载</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5bf8f27750f24941a593fb3ead70b1a0.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1bfc899da0fe4efb8a4be6688384a1f6.png"></p><h2>1.5 安装toolchains，击browse选择一个toolchains存放路径，在点击Download直接下载</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/b3f26635b1554b6887752a2724c92516.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/8120e53130a04fe6ad66b72b3d91f53e.png"></p><h2>1.6 点击Advance进行高级配置，都是配置toolchains路径</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/62da41f9f77b4a3a8551d1d40c188012.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/494e0bd050b24b36bb32a92e242bb904.png"></p><h2>1.7 可以下载最新的SDK包进行更换</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Windows 搭建命令行编译环境 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/get_started/windows.html" title="Windows 搭建命令行编译环境 — WinnerMicro 在线文档">Windows 搭建命令行编译环境 &mdash; WinnerMicro 在线文档</a></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/78d1837713b84adf837ae873fe1491f1.png"></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="WM IoT SDK Download Center" href="https://doc.winnermicro.net/download/version/index.html#wincc" title="WM IoT SDK Download Center">WM IoT SDK Download Center</a></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/b513f4ad18444fa79d598a458739229a.png"></p><h2>1.8 进行初步的SDK例程编译</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1c8e024fcea847a2bdafc331d49d186c.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6266350583674ee495b498d0fc34d935.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/f143520480a04a1680a037f3118fbad9.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/7556ced931f84ea58fd702293e5ac505.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/3b75a497734a40c2b645390d06fece82.png"></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5ebbc8398fec4712bf14dd6da5af2010.png"></p><h2>1.9 烧写</h2><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/2129bde68fa0469d87a9c357e8bc4d85.png"></p><h2>1.10 要看某些组件怎么使用，请看官方wiki和SDK里的例程</h2><h1>二、Linux系统下的基于WM IoT SDK的环境搭建</h1><p>（SDK可以直接用，由于Linux的工具链配置非常的麻烦，有待后续更新，可以先移步查看官网wiki的Linux环境搭建）</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Linux 搭建命令行编译环境 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/get_started/linux.html" title="Linux 搭建命令行编译环境 — WinnerMicro 在线文档">Linux 搭建命令行编译环境 &mdash; WinnerMicro 在线文档</a></p><p><img src="/2025/10/18/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/bf8258be45ce4a06aacc78916a8ea230.png"></p><p></p>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>物联网 W800 SoC WM IoT SDK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【SF32】初次体验黄山派的超详细教程</title>
    <link href="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/"/>
    <url>/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>立创黄山派是立创开发板团队打造的一款基于思澈科技 SF32LB52-MOD-1 模组的开发板，也是智能手表手环的原型机。以下是其详细介绍：</p><ul><li><strong>芯片模组</strong>：板载基于 SF32LB52x 芯片的 SF32LB52x-MOD-1-N16R8 模组，标配 SF32LB525UC6 芯片，内置合封配置为 8MB OPI-PSRAM，接口频率 144MHz，128Mb QSPI-NOR Flash，接口频率 72MHz，STR 模式，48MHz 晶体，32.768KHz 晶体，板载 PCBA 天线。</li><li><strong>显示屏幕</strong>：配备 1.85 寸 MOLED 屏幕，型号为 ZC-A1D85W-010，分辨率为 390*450 像素，亮度 800cd/m&sup2;，采用 Quad SPI 显示接口，OLED Driver IC 为 CO5300AF-01，Power IC 为 BV6802W，TP IC 为 FT6146-M00。</li><li><strong>接口方面</strong>：有专用屏幕接口，支持 SPI/DSPI/Quad SPI，支持 DDR 模式 QSPI，通过 22pin FPC 和 40pin 排针引出，也支持 I2C 接口屏幕；Type C-UART 接口，板载 CH340N 串口芯片，可实现程序下载和软件 DEBUG，支持 USB2.0 FS，通过 30p 接口引出；支持采用 SPI 接口的 TF 卡，板载 Micro SD 卡插槽。</li><li><strong>其他外设</strong>：板载集成 Mems MIC，模拟音频输出，板载 Class-D 音频 PA，可外接 GH-1.25mm 接口的 3W/4 欧或 2W/8 欧喇叭；有 1x 功能按键，1x 开关机按键，支持长按 10S 复位功能；1xRGB-LED，SK6812MINI-HS，GPIO 控制；板载马达驱动电路，预留外接马达焊接点；配备六轴 IMU - 惯性测量单元 LSM6DS3TR-C，三轴地磁传感器 MMC5603NJ，环境光传感器 LTR-303ALS-01。</li><li><strong>电源系统</strong>：采用 OVP：SY5320，Charger：SY6103，Loadswitch：LP5240HVF，LDO：ETA5055V330DS2F，支持外接 GH1.25mm 正向线序接口的锂电池，最高充电电压 4.5V，最大充电电流 500mA。</li><li><strong>开发特点</strong>：黄山派的软硬件全部开源，其核心思想是做一个适合大家学习和做产品原型的开发板，定位低功耗、显示、无线场景，可满足手表、码表、小智 AI、mp4 播放器、桌面助手等多种产品的开发需求</li></ul><h1>二、环境搭建</h1><h2>2.1 安装git</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" title="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git">https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git</a></p><h2>2.2 安装python3.9以上版本，但是不要太新的版本</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="https://www.python.org/" href="https://www.python.org/" title="https://www.python.org/">https://www.python.org/</a></p><h2>2.3 克隆SDK</h2><pre><code class="language-bash">git clone --recursive https://github.com/OpenSiFli/SiFli-SDKgit clone --recursive git@gitee.com:SiFli/sifli-sdk.git</code></pre><h2>2.4 在SDK文件夹下打开powershell(管理员运行)&nbsp;</h2><pre><code class="language-bash"># 如果第一次运行出现无法识别.\install.ps1脚本命令Set-ExecutionPolicy RemoteSigned</code></pre><h2>2.5 声明工具链安装路径以及使用国内源加速，运行对应的系统下的脚本，我的是Windows脚本则运行.\install.ps1，通过python工具创建虚拟运行环境，以运行.ps1 windows脚本，如果没有设置toolchains的安装路径，默认在C:\user\name\.sifli其中会安装对应虚拟环境下需要的toolchains</h2><pre><code class="language-bash">$env:SIFLI_SDK_TOOLS_PATH="D:\DevEnv\SIFLI_Toolchain"$env:SIFLI_SDK_GITHUB_ASSETS="downloads.sifli.com/github_assets"$env:PIP_INDEX_URL="https://mirrors.ustc.edu.cn/pypi/simple".\install.ps1</code></pre><h2>2.6 一定注意！！！出现以下结果才可以关闭命令行窗口</h2><pre><code class="language-bash">All done! You can now run:    export.ps1</code></pre><h2>2.7 以后每次启用该SDK，一定要使用.\export.ps1声明环境变量，如果自定义了toolchains路径则需要先声明toolchains路径再使用.\export.ps1</h2><pre><code class="language-bash">cd E:\Git_Projects\sifli-sdk$env:SIFLI_SDK_TOOLS_PATH="D:\DevEnv\SIFLI_Toolchain".\export.ps1</code></pre><p>错误过程记录（可略，原因：权限问题以及python3.14不支持）：</p><pre><code class="language-bash">Windows PowerShell版权所有（C） Microsoft Corporation。保留所有权利。安装最新的 PowerShell，了解新功能和改进！https://aka.ms/PSWindowsPS E:\Git_Projects\sifli-sdk&gt; .\install.ps1.\install.ps1 : 无法加载文件 E:\Git_Projects\sifli-sdk\install.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.microsoft.com/fwlink/?LinkID=135170 中的 about_Execution_Policies。所在位置 行:1 字符: 1+ .\install.ps1+ ~~~~~~~~~~~~~    + CategoryInfo          : SecurityError: (:) []，PSSecurityException    + FullyQualifiedErrorId : UnauthorizedAccessPS E:\Git_Projects\sifli-sdk&gt; Set-ExecutionPolicy RemoteSignedSet-ExecutionPolicy : 对注册表项“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell”的访问被拒绝。 要更改默认(LocalMachine)作用域的执行策略，请使用“以管理员身份运行”选项启动 Windows PowerShell。要更改当前用户的执行策略，请运行 "Set-ExecutionPolicy -Scope CurrentUser"。所在位置 行:1 字符: 1+ Set-ExecutionPolicy RemoteSigned+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    + CategoryInfo          : PermissionDenied: (:) [Set-ExecutionPolicy], UnauthorizedAccessException    + FullyQualifiedErrorId : System.UnauthorizedAccessException,Microsoft.PowerShell.Commands.SetExecutionPolicyComma   ndPS E:\Git_Projects\sifli-sdk&gt; Set-ExecutionPolicy -Scope CurrentUser位于命令管道位置 1 的 cmdlet Set-ExecutionPolicy请为以下参数提供值:ExecutionPolicy: RemoteSignedPS E:\Git_Projects\sifli-sdk&gt; $env:SIFLI_SDK_GITHUB_ASSETS="downloads.sifli.com/github_assets"PS E:\Git_Projects\sifli-sdk&gt; $env:PIP_INDEX_URL="https://mirrors.ustc.edu.cn/pypi/simple"PS E:\Git_Projects\sifli-sdk&gt; .\install.ps1INFO: Using SIFLI_SDK_PATH 'E:\Git_Projects\sifli-sdk' for installation.Setting up Python environmentCreating a new Python environment in C:\Users\zky\.sifli\python_env\sifli-sdk2.4_py3.14_envDownloading https://downloads.sifli.com/dl/sifli-sdk/sdk.constraints.v2.4.txt (SSL verification disabled)Destination: C:\Users\zky\.sifli\sdk.constraints.v2.4.txt.tmpDoneUpgrading pip...Looking in indexes: https://mirrors.ustc.edu.cn/pypi/simpleRequirement already satisfied: pip in c:\users\zky\.sifli\python_env\sifli-sdk2.4_py3.14_env\lib\site-packages (25.2)Upgrading setuptools...Looking in indexes: https://mirrors.ustc.edu.cn/pypi/simpleCollecting setuptools  Downloading https://mirrors.ustc.edu.cn/pypi/packages/01/82/a2c6c0a1612c89bdb21dc4d9196ba9e7dcbc2e285afda93ebdf663ba2ada/setuptools-71.0.0-py3-none-any.whl (908 kB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 908.4/908.4 kB 13.9 MB/s  0:00:00Installing collected packages: setuptoolsSuccessfully installed setuptools-71.0.0Installing Python packages Constraint file: C:\Users\zky\.sifli\sdk.constraints.v2.4.txt Requirement files:  - E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txtLooking in indexes: https://mirrors.ustc.edu.cn/pypi/simple, https://dl.espressif.com/pypiIgnoring importlib_metadata: markers 'python_version &lt; "3.8"' don't match your environmentRequirement already satisfied: setuptools in c:\users\zky\.sifli\python_env\sifli-sdk2.4_py3.14_env\lib\site-packages (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 7)) (71.0.0)Collecting packaging (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 8))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/20/12/38679034af332785aac8774540895e234f4d07f7545804097de4b666afd8/packaging-25.0-py3-none-any.whl (66 kB)Collecting requests (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/1e/db/4254e3eabe8020b458f1a747140d32277ec7a271daf1d235b70dc0b4e6e3/requests-2.32.5-py3-none-any.whl (64 kB)Collecting click (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 12))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/db/d3/9dcc0f5797f070ec8edf30fbadfb200e71d9db6b84d211e3b2085a7589a0/click-8.3.0-py3-none-any.whl (107 kB)Collecting pyserial (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 13))  Downloading https://dl.espressif.cn/pypi/pyserial/pyserial-3.5-py2.py3-none-any.whl (90 kB)Collecting cryptography (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Downloading https://dl.espressif.cn/pypi/cryptography/cryptography-43.0.3-cp39-abi3-win_amd64.whl (3.1 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.1/3.1 MB 16.3 MB/s  0:00:00Collecting pyparsing (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 15))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/10/5e/1aa9a93198c6b64513c9d7752de7422c06402de6600a8767da1524f9570b/pyparsing-3.2.5-py3-none-any.whl (113 kB)Collecting pyelftools (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 16))  Downloading https://dl.espressif.cn/pypi/pyelftools/pyelftools-0.32-py3-none-any.whl (188 kB)Collecting pyclang (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 17))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/fb/78/81a490810908e675b80de332262aa17e4f2b485a412f817819bf78717fb1/pyclang-0.6.3-py3-none-any.whl (12 kB)Collecting construct (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 18))  Downloading https://dl.espressif.cn/pypi/construct/construct-2.10.70-py3-none-any.whl (63 kB)Collecting rich (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/25/7a/b0178788f8dc6cafce37a212c99565fa1fe7872c70c6c9c1e1a372d9d88f/rich-14.2.0-py3-none-any.whl (243 kB)Collecting psutil (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 20))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/bf/e9/b44c4f697276a7a95b8e94d0e320a7bf7f3318521b23de69035540b39838/psutil-7.1.0-cp37-abi3-win_amd64.whl (247 kB)Collecting scons (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 21))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/11/36/25bcc902d714fd0c36cc67642c88126e7a139b2e4b89686450f5aa676052/scons-4.10.0-py3-none-any.whl (4.1 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.1/4.1 MB 47.6 MB/s  0:00:00Collecting esp-idf-kconfig (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.5.0-py3-none-any.whl (143 kB)Collecting pycryptodome (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 23))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/54/2f/e97a1b8294db0daaa87012c24a7bb714147c7ade7656973fd6c736b484ff/pycryptodome-3.23.0-cp37-abi3-win_amd64.whl (1.8 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 37.6 MB/s  0:00:00Collecting pyyaml (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 24))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/23/20/bb6982b26a40bb43951265ba29d4c246ef0ff59c9fdcdf0ed04e0687de4d/pyyaml-6.0.3-cp314-cp314-win_amd64.whl (156 kB)Collecting tqdm (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 25))  Downloading https://dl.espressif.cn/pypi/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)Collecting charset_normalizer&lt;4,&gt;=2 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/ee/7a/36fbcf646e41f710ce0a563c1c9a343c6edf9be80786edeb15b6f62e17db/charset_normalizer-3.4.3-cp314-cp314-win_amd64.whl (107 kB)Collecting idna&lt;4,&gt;=2.5 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://dl.espressif.cn/pypi/idna/idna-3.10-py3-none-any.whl (70 kB)Collecting urllib3&lt;3,&gt;=1.21.1 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://dl.espressif.cn/pypi/urllib3/urllib3-1.26.20-py2.py3-none-any.whl (144 kB)Collecting certifi&gt;=2017.4.17 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl (163 kB)Collecting colorama (from click-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 12))  Downloading https://dl.espressif.cn/pypi/colorama/colorama-0.4.6-py2.py3-none-any.whl (25 kB)Collecting cffi&gt;=1.12 (from cryptography-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/bb/92/882c2d30831744296ce713f0feb4c1cd30f346ef747b530b5318715cc367/cffi-2.0.0-cp314-cp314-win_amd64.whl (185 kB)Collecting markdown-it-py&gt;=2.2.0 (from rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/94/54/e7d793b573f298e1c9013b8c4dade17d481164aa517d1d7148619c2cedbf/markdown_it_py-4.0.0-py3-none-any.whl (87 kB)Collecting pygments&lt;3.0.0,&gt;=2.13.0 (from rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/c7/21/705964c7812476f378728bdf590ca4b771ec72385c533964653c68e86bdc/pygments-2.19.2-py3-none-any.whl (1.2 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 51.4 MB/s  0:00:00INFO: pip is looking at multiple versions of esp-idf-kconfig to determine which version is compatible with other requirements. This could take a while.Collecting esp-idf-kconfig (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.4.1-py3-none-any.whl (141 kB)  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.4.0-py3-none-any.whl (140 kB)  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.3.0-py3-none-any.whl (128 kB)  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.2.0-py3-none-any.whl (141 kB)  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.1.0-py3-none-any.whl (44 kB)Collecting kconfiglib&gt;=13.7.1 (from esp-idf-kconfig-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Downloading https://dl.espressif.cn/pypi/kconfiglib/kconfiglib-14.1.0-py2.py3-none-any.whl (145 kB)Collecting esp-idf-kconfig (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Downloading https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.0.2-py3-none-any.whl (44 kB)Collecting setuptools (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 7))  Downloading https://dl.espressif.cn/pypi/setuptools/setuptools-71.0.0-py3-none-any.whl (908 kB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 908.4/908.4 kB 9.5 MB/s  0:00:00INFO: pip is still looking at multiple versions of esp-idf-kconfig to determine which version is compatible with other requirements. This could take a while.INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. See https://pip.pypa.io/warnings/backtracking for guidance. If you want to abort this run, press Ctrl + C.Collecting scons (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 21))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/45/92/50b739021983b131dcacd57aa8b04d31c5acc2e7e0eb4ed4a362f438c6b7/scons-4.9.1-py3-none-any.whl (4.1 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.1/4.1 MB 16.0 MB/s  0:00:00Collecting pygments&lt;3.0.0,&gt;=2.13.0 (from rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://dl.espressif.cn/pypi/pygments/pygments-2.19.1-py3-none-any.whl (1.2 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 10.0 MB/s  0:00:00Collecting rich (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/e3/30/3c4d035596d3cf444529e0b2953ad0466f6049528a879d27534700580395/rich-14.1.0-py3-none-any.whl (243 kB)Collecting construct (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 18))  Downloading https://dl.espressif.cn/pypi/construct/construct-2.10.69-py3-none-any.whl (62 kB)Collecting pyclang (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 17))  Downloading https://dl.espressif.cn/pypi/pyclang/pyclang-0.6.0-py3-none-any.whl (12 kB)Collecting pyelftools (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 16))  Downloading https://dl.espressif.cn/pypi/pyelftools/pyelftools-0.31-py3-none-any.whl (180 kB)Collecting pyparsing (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 15))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/53/b8/fbab973592e23ae313042d450fc26fa24282ebffba21ba373786e1ce63b4/pyparsing-3.2.4-py3-none-any.whl (113 kB)Collecting cryptography (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Downloading https://dl.espressif.cn/pypi/cryptography/cryptography-43.0.1-cp39-abi3-win_amd64.whl (3.1 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.1/3.1 MB 19.3 MB/s  0:00:00Collecting pyserial (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 13))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/0d/e4/2a744dd9e3be04a0c0907414e2a01a7c88bb3915cbe3c8cc06e209f59c30/pyserial-3.4-py2.py3-none-any.whl (193 kB)Collecting click (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 12))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/85/32/10bb5764d90a8eee674e9dc6f4db6a0ab47c8c4d0d83c27f7c39ac415a4d/click-8.2.1-py3-none-any.whl (102 kB)Collecting urllib3&lt;3,&gt;=1.21.1 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://dl.espressif.cn/pypi/urllib3/urllib3-1.26.19-py2.py3-none-any.whl (143 kB)Collecting idna&lt;4,&gt;=2.5 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://dl.espressif.cn/pypi/idna/idna-3.9-py3-none-any.whl (71 kB)Collecting charset_normalizer&lt;4,&gt;=2 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/20/94/c5790835a017658cbfabd07f3bfb549140c3ac458cfc196323996b10095a/charset_normalizer-3.4.2-py3-none-any.whl (52 kB)Collecting requests (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/7c/e4/56027c4a6b4ae70ca9de302488c5ca95ad4a39e190093d6c1a8ace08341b/requests-2.32.4-py3-none-any.whl (64 kB)Collecting packaging (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 8))  Downloading https://dl.espressif.cn/pypi/packaging/packaging-24.2-py3-none-any.whl (65 kB)ERROR: Cannot install -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22) because these package versions have conflicting dependencies.The conflict is caused by:    esp-idf-kconfig 2.5.0 depends on windows-curses&gt;=2.4.1; sys_platform == "win32" and python_version &gt;= "3.13"    esp-idf-kconfig 2.4.1 depends on windows-curses; platform_system == "Windows"    esp-idf-kconfig 2.4.0 depends on windows-curses; platform_system == "Windows"    esp-idf-kconfig 2.3.0 depends on windows-curses; platform_system == "Windows"    esp-idf-kconfig 2.2.0 depends on windows-curses; platform_system == "Windows"    esp-idf-kconfig 2.1.0 depends on windows-curses; platform_system == "Windows"    esp-idf-kconfig 2.0.2 depends on windows-curses; platform_system == "Windows"To fix this you could try to:1. loosen the range of package versions you've specified2. remove package versions to allow pip to attempt to solve the dependency conflictERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflictsTraceback (most recent call last):  File "E:\Git_Projects\sifli-sdk/tools/sifli_sdk_tools.py", line 3192, in &lt;module&gt;    main(sys.argv[1:])    ~~~~^^^^^^^^^^^^^^  File "E:\Git_Projects\sifli-sdk/tools/sifli_sdk_tools.py", line 3184, in main    action_func(args)    ~~~~~~~~~~~^^^^^^  File "E:\Git_Projects\sifli-sdk/tools/sifli_sdk_tools.py", line 2614, in action_install_python_env    subprocess.check_call(run_args, stdout=sys.stdout, stderr=sys.stderr, env=env_copy)    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^  File "D:\Python\Python314\Lib\subprocess.py", line 419, in check_call    raise CalledProcessError(retcode, cmd)subprocess.CalledProcessError: Command '['C:\\Users\\zky\\.sifli\\python_env\\sifli-sdk2.4_py3.14_env\\Scripts\\python.exe', '-m', 'pip', 'install', '--no-warn-script-location', '-r', 'E:\\Git_Projects\\sifli-sdk\\tools\\requirements\\requirements.core.txt', '--upgrade', '--constraint', 'C:\\Users\\zky\\.sifli\\sdk.constraints.v2.4.txt', '--extra-index-url', 'https://dl.espressif.com/pypi']' returned non-zero exit status 1.PS E:\Git_Projects\sifli-sdk&gt; python -VPython 3.14.0PS E:\Git_Projects\sifli-sdk&gt;</code></pre><p>成功过程记录（略）：</p><pre><code class="language-bash">PS E:\Git_Projects\sifli-sdk&gt; $env:SIFLI_SDK_TOOLS_PATH="D:\DevEnv\SIFLI_Toolchain"PS E:\Git_Projects\sifli-sdk&gt; $env:SIFLI_SDK_GITHUB_ASSETS="downloads.sifli.com/github_assets"PS E:\Git_Projects\sifli-sdk&gt; $env:PIP_INDEX_URL="https://mirrors.ustc.edu.cn/pypi/simple"PS E:\Git_Projects\sifli-sdk&gt; .\install.ps1INFO: Using SIFLI_SDK_PATH 'E:\Git_Projects\sifli-sdk' for installation.Setting up Python environmentPython 3.9.13pip 22.0.4 from D:\DevEnv\SIFLI_Toolchain\python_env\sifli-sdk2.4_py3.9_env\lib\site-packages\pip (python 3.9)Skipping the download of D:\DevEnv\SIFLI_Toolchain\sdk.constraints.v2.4.txt because it was downloaded recently.Upgrading pip...Looking in indexes: https://mirrors.ustc.edu.cn/pypi/simpleRequirement already satisfied: pip in d:\devenv\sifli_toolchain\python_env\sifli-sdk2.4_py3.9_env\lib\site-packages (22.0.4)Collecting pip  Downloading https://mirrors.ustc.edu.cn/pypi/packages/b7/3f/945ef7ab14dc4f9d7f40288d2df998d1837ee0888ec3659c813487572faa/pip-25.2-py3-none-any.whl (1.8 MB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 7.0 MB/s eta 0:00:00Installing collected packages: pip  Attempting uninstall: pip    Found existing installation: pip 22.0.4    Uninstalling pip-22.0.4:      Successfully uninstalled pip-22.0.4Successfully installed pip-25.2Upgrading setuptools...Looking in indexes: https://mirrors.ustc.edu.cn/pypi/simpleRequirement already satisfied: setuptools in d:\devenv\sifli_toolchain\python_env\sifli-sdk2.4_py3.9_env\lib\site-packages (58.1.0)Collecting setuptools  Using cached https://mirrors.ustc.edu.cn/pypi/packages/01/82/a2c6c0a1612c89bdb21dc4d9196ba9e7dcbc2e285afda93ebdf663ba2ada/setuptools-71.0.0-py3-none-any.whl (908 kB)Installing collected packages: setuptools  Attempting uninstall: setuptools    Found existing installation: setuptools 58.1.0    Uninstalling setuptools-58.1.0:      Successfully uninstalled setuptools-58.1.0Successfully installed setuptools-71.0.0Installing Python packages Constraint file: D:\DevEnv\SIFLI_Toolchain\sdk.constraints.v2.4.txt Requirement files:  - E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txtLooking in indexes: https://mirrors.ustc.edu.cn/pypi/simple, https://dl.espressif.com/pypiIgnoring importlib_metadata: markers 'python_version &lt; "3.8"' don't match your environmentRequirement already satisfied: setuptools in d:\devenv\sifli_toolchain\python_env\sifli-sdk2.4_py3.9_env\lib\site-packages (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 7)) (71.0.0)Collecting packaging (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 8))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/20/12/38679034af332785aac8774540895e234f4d07f7545804097de4b666afd8/packaging-25.0-py3-none-any.whl (66 kB)Collecting requests (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/1e/db/4254e3eabe8020b458f1a747140d32277ec7a271daf1d235b70dc0b4e6e3/requests-2.32.5-py3-none-any.whl (64 kB)Collecting click (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 12))  Downloading https://dl.espressif.cn/pypi/click/click-8.1.8-py3-none-any.whl (98 kB)Collecting pyserial (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 13))  Using cached https://dl.espressif.cn/pypi/pyserial/pyserial-3.5-py2.py3-none-any.whl (90 kB)Collecting cryptography (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Using cached https://dl.espressif.cn/pypi/cryptography/cryptography-43.0.3-cp39-abi3-win_amd64.whl (3.1 MB)Collecting pyparsing (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 15))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/10/5e/1aa9a93198c6b64513c9d7752de7422c06402de6600a8767da1524f9570b/pyparsing-3.2.5-py3-none-any.whl (113 kB)Collecting pyelftools (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 16))  Using cached https://dl.espressif.cn/pypi/pyelftools/pyelftools-0.32-py3-none-any.whl (188 kB)Collecting pyclang (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 17))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/fb/78/81a490810908e675b80de332262aa17e4f2b485a412f817819bf78717fb1/pyclang-0.6.3-py3-none-any.whl (12 kB)Collecting construct (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 18))  Using cached https://dl.espressif.cn/pypi/construct/construct-2.10.70-py3-none-any.whl (63 kB)Collecting rich (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/25/7a/b0178788f8dc6cafce37a212c99565fa1fe7872c70c6c9c1e1a372d9d88f/rich-14.2.0-py3-none-any.whl (243 kB)Collecting psutil (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 20))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/bf/e9/b44c4f697276a7a95b8e94d0e320a7bf7f3318521b23de69035540b39838/psutil-7.1.0-cp37-abi3-win_amd64.whl (247 kB)Collecting scons (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 21))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/11/36/25bcc902d714fd0c36cc67642c88126e7a139b2e4b89686450f5aa676052/scons-4.10.0-py3-none-any.whl (4.1 MB)Collecting esp-idf-kconfig (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Using cached https://dl.espressif.cn/pypi/esp-idf-kconfig/esp_idf_kconfig-2.5.0-py3-none-any.whl (143 kB)Collecting pycryptodome (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 23))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/54/2f/e97a1b8294db0daaa87012c24a7bb714147c7ade7656973fd6c736b484ff/pycryptodome-3.23.0-cp37-abi3-win_amd64.whl (1.8 MB)Collecting pyyaml (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 24))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/f0/0c/25113e0b5e103d7f1490c0e947e303fe4a696c10b501dea7a9f49d4e876c/pyyaml-6.0.3-cp39-cp39-win_amd64.whl (158 kB)Collecting tqdm (from -r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 25))  Using cached https://dl.espressif.cn/pypi/tqdm/tqdm-4.67.1-py3-none-any.whl (78 kB)Collecting charset_normalizer&lt;4,&gt;=2 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/ce/d6/7e805c8e5c46ff9729c49950acc4ee0aeb55efb8b3a56687658ad10c3216/charset_normalizer-3.4.3-cp39-cp39-win_amd64.whl (107 kB)Collecting idna&lt;4,&gt;=2.5 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Using cached https://dl.espressif.cn/pypi/idna/idna-3.10-py3-none-any.whl (70 kB)Collecting urllib3&lt;3,&gt;=1.21.1 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Using cached https://dl.espressif.cn/pypi/urllib3/urllib3-1.26.20-py2.py3-none-any.whl (144 kB)Collecting certifi&gt;=2017.4.17 (from requests-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 11))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl (163 kB)Collecting colorama (from click-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 12))  Using cached https://dl.espressif.cn/pypi/colorama/colorama-0.4.6-py2.py3-none-any.whl (25 kB)Collecting cffi&gt;=1.12 (from cryptography-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/54/8f/a1e836f82d8e32a97e6b29cc8f641779181ac7363734f12df27db803ebda/cffi-2.0.0-cp39-cp39-win_amd64.whl (182 kB)Collecting markdown-it-py&gt;=2.2.0 (from rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://dl.espressif.cn/pypi/markdown-it-py/markdown_it_py-3.0.0-py3-none-any.whl (87 kB)Collecting pygments&lt;3.0.0,&gt;=2.13.0 (from rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Using cached https://mirrors.ustc.edu.cn/pypi/packages/c7/21/705964c7812476f378728bdf590ca4b771ec72385c533964653c68e86bdc/pygments-2.19.2-py3-none-any.whl (1.2 MB)Collecting windows-curses (from esp-idf-kconfig-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 22))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/58/de/b050bb1dc40ce48afb477198fb65abe51580c03a165492fce1e8fa61efd5/windows_curses-2.4.1-cp39-cp39-win_amd64.whl (89 kB)Collecting pycparser (from cffi&gt;=1.12-&gt;cryptography-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 14))  Downloading https://mirrors.ustc.edu.cn/pypi/packages/a0/e3/59cd50310fc9b59512193629e1984c1f95e5c8ae6e5d8c69532ccc65a7fe/pycparser-2.23-py3-none-any.whl (118 kB)Collecting mdurl~=0.1 (from markdown-it-py&gt;=2.2.0-&gt;rich-&gt;-r E:\Git_Projects\sifli-sdk\tools\requirements\requirements.core.txt (line 19))  Downloading https://dl.espressif.cn/pypi/mdurl/mdurl-0.1.2-py3-none-any.whl (10.0 kB)Installing collected packages: windows-curses, pyserial, pyelftools, urllib3, scons, pyyaml, pyparsing, pygments, pycryptodome, pycparser, pyclang, psutil, packaging, mdurl, idna, esp-idf-kconfig, construct, colorama, charset_normalizer, certifi, tqdm, requests, markdown-it-py, click, cffi, rich, cryptographySuccessfully installed certifi-2025.10.5 cffi-2.0.0 charset_normalizer-3.4.3 click-8.1.8 colorama-0.4.6 construct-2.10.70 cryptography-43.0.3 esp-idf-kconfig-2.5.0 idna-3.10 markdown-it-py-3.0.0 mdurl-0.1.2 packaging-25.0 psutil-7.1.0 pyclang-0.6.3 pycparser-2.23 pycryptodome-3.23.0 pyelftools-0.32 pygments-2.19.2 pyparsing-3.2.5 pyserial-3.5 pyyaml-6.0.3 requests-2.32.5 rich-14.2.0 scons-4.10.0 tqdm-4.67.1 urllib3-1.26.20 windows-curses-2.4.1Installing SIFLI-SDK toolsUpdating D:\DevEnv\SIFLI_Toolchain\sifli-sdk-env.jsonSelected targets are: sf32lb52Current system platform: win64Installing tools: sftool, sdk-exe, cmake, arm-none-eabi-gccInstalling sftool@0.1.12Using GitHub assets mirror for URL: https://github.com/OpenSiFli/sftool/releases/download/0.1.12/sftool-0.1.12-x86_64-pc-windows-msvc.zip =&gt; https://downloads.sifli.com/github_assets/OpenSiFli/sftool/releases/download/0.1.12/sftool-0.1.12-x86_64-pc-windows-msvc.zipDownloading https://downloads.sifli.com/github_assets/OpenSiFli/sftool/releases/download/0.1.12/sftool-0.1.12-x86_64-pc-windows-msvc.zipDestination: D:\DevEnv\SIFLI_Toolchain\dist\sftool-0.1.12-x86_64-pc-windows-msvc.zip.tmpDoneExtracting D:\DevEnv\SIFLI_Toolchain\dist\sftool-0.1.12-x86_64-pc-windows-msvc.zip to D:\DevEnv\SIFLI_Toolchain\tools\sftool\0.1.12Installing sdk-exe@0.1.1Using GitHub assets mirror for URL: https://github.com/OpenSiFli/sifli_sdk_wrapper/releases/download/0.1.1/sdk-py-v0.1.1.zip =&gt; https://downloads.sifli.com/github_assets/OpenSiFli/sifli_sdk_wrapper/releases/download/0.1.1/sdk-py-v0.1.1.zipDownloading https://downloads.sifli.com/github_assets/OpenSiFli/sifli_sdk_wrapper/releases/download/0.1.1/sdk-py-v0.1.1.zipDestination: D:\DevEnv\SIFLI_Toolchain\dist\sdk-py-v0.1.1.zip.tmpDoneExtracting D:\DevEnv\SIFLI_Toolchain\dist\sdk-py-v0.1.1.zip to D:\DevEnv\SIFLI_Toolchain\tools\sdk-exe\0.1.1Installing cmake@3.30.2Using GitHub assets mirror for URL: https://github.com/Kitware/CMake/releases/download/v3.30.2/cmake-3.30.2-windows-x86_64.zip =&gt; https://downloads.sifli.com/github_assets/Kitware/CMake/releases/download/v3.30.2/cmake-3.30.2-windows-x86_64.zipDownloading https://downloads.sifli.com/github_assets/Kitware/CMake/releases/download/v3.30.2/cmake-3.30.2-windows-x86_64.zipDestination: D:\DevEnv\SIFLI_Toolchain\dist\cmake-3.30.2-windows-x86_64.zip.tmpDoneExtracting D:\DevEnv\SIFLI_Toolchain\dist\cmake-3.30.2-windows-x86_64.zip to D:\DevEnv\SIFLI_Toolchain\tools\cmake\3.30.2Installing arm-none-eabi-gcc@14.2.1Using GitHub assets mirror for URL: https://github.com/OpenSiFli/crosstool-ng/releases/download/14.2.0-20250221/arm-none-eabi-14.2.0-x86_64-w64-mingw32.zip =&gt; https://downloads.sifli.com/github_assets/OpenSiFli/crosstool-ng/releases/download/14.2.0-20250221/arm-none-eabi-14.2.0-x86_64-w64-mingw32.zipDownloading https://downloads.sifli.com/github_assets/OpenSiFli/crosstool-ng/releases/download/14.2.0-20250221/arm-none-eabi-14.2.0-x86_64-w64-mingw32.zipDestination: D:\DevEnv\SIFLI_Toolchain\dist\arm-none-eabi-14.2.0-x86_64-w64-mingw32.zip.tmpDoneExtracting D:\DevEnv\SIFLI_Toolchain\dist\arm-none-eabi-14.2.0-x86_64-w64-mingw32.zip to D:\DevEnv\SIFLI_Toolchain\tools\arm-none-eabi-gcc\14.2.1All done! You can now run:    export.ps1PS E:\Git_Projects\sifli-sdk&gt; $env:SIFLI_SDK_TOOLS_PATH="D:\DevEnv\SIFLI_Toolchain"PS E:\Git_Projects\sifli-sdk&gt; ls    目录: E:\Git_Projects\sifli-sdkMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----        2025/10/12     21:19                .devcontainerd-----        2025/10/12     21:19                .githubd-----        2025/10/12     21:19                .gitlabd-----        2025/10/12     21:19                customerd-----        2025/10/12     21:19                docsd-----        2025/10/12     21:19                driversd-----        2025/10/12     21:19                exampled-----        2025/10/12     21:19                externald-----        2025/10/12     21:19                imgd-----        2025/10/12     21:19                middlewared-----        2025/10/12     21:19                rtosd-----        2025/10/12     22:22                tools-a----        2025/10/12     21:19            338 .clang-format-a----        2025/10/12     21:19            351 .commit_template-a----        2025/10/12     21:19            333 .gitattributes-a----        2025/10/12     21:19            157 .gitignore-a----        2025/10/12     21:19            767 .gitlab-ci.yml-a----        2025/10/12     21:19             97 .gitmodules-a----        2025/10/12     21:19             25 .version-a----        2025/10/12     21:19          11417 build_config.yaml-a----        2025/10/12     21:19          10219 build_config_gcc.yaml-a----        2025/10/12     21:19            920 export.ps1-a----        2025/10/12     21:19           2275 export.sh-a----        2025/10/12     21:19           1285 init_commit_env.bat-a----        2025/10/12     21:19           1893 install.ps1-a----        2025/10/12     21:19           1385 install.sh-a----        2025/10/12     21:19           2585 Jenkinsfile-a----        2025/10/12     21:19           1958 Kconfig-a----        2025/10/12     21:19           1518 Kconfig.v2-a----        2025/10/12     21:19          11558 LICENSE-a----        2025/10/12     21:19            347 msvc_setup.bat-a----        2025/10/12     21:19           3733 README.md-a----        2025/10/12     21:19           4153 README_EN.md-a----        2025/10/12     21:19            311 SConscript-a----        2025/10/12     21:19           1982 set_env.bat-a----        2025/10/12     21:19              6 version.txtPS E:\Git_Projects\sifli-sdk&gt; .\export.ps1Activating SIFLI_SDK 2.4Setting SIFLI_SDK_PATH to 'E:\Git_Projects\sifli-sdk'.* Checking python version ... 3.9.13* Checking python dependencies ... OK* Deactivating the current SiFli-SDK environment (if any) ... OK* Establishing a new SiFli-SDK environment ... OK* Identifying shell ... powershell.exe* Detecting outdated tools in system ... OK - no outdated tools foundDone! You can now compile SiFli-SDK projects.Go to the project directory and run:  You can refer to the https://docs.sifli.com/projects/sdk/latest/sf32lb52x/quickstart/build.html to continuePS E:\Git_Projects\sifli-sdk&gt;</code></pre><h1>三、烧录官方SDK例程程序</h1><h2>3.1 使用vscode打开sdk文件夹，然后，进入vscode设置搜索terminal.integrated.profiles.windows，然后将其添加到setting.json中配置一下</h2><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/666471ccca124d05bd5f582aa8c6faff.png"></p><pre><code class="language-bash">"terminal.integrated.profiles.windows": {          "PowerShell": {            "source": "PowerShell",            "icon": "terminal-powershell"        },        "Command Prompt": {            "path": [                "${env:windir}\\Sysnative\\cmd.exe",                "${env:windir}\\System32\\cmd.exe"            ],            "args": [],            "icon": "terminal-cmd"        },        "Git Bash": {            "source": "Git Bash"        },        ,        "SF32": {        "path": "C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\powershell.exe",        "args": [            "-ExecutionPolicy",            "Bypass",               // 绕过执行策略（必须，否则无法运行脚本）            "-NoExit",              // 终端启动后不退出（方便后续操作）            "-Command",             // 新增：执行「设置环境变量」的命令            // 1. 设置工具链路径            // 2. 将 Python 3.9.13 的安装目录添加到 PATH（请替换为你的实际路径）            // 3. 执行 export.ps1 脚本            // 注意：（1）命令用单引号包裹路径（避免转义问题），变量和脚本执行用分号分隔 （2）移除原有的 "-File" 参数！因为 "-Command" 和 "-File" 不能同时使用（二选一）            "$env:SIFLI_SDK_TOOLS_PATH='D:\\DevEnv\\SIFLI_Toolchain'; $env:PATH='D:\\Python\\Python39\\;D:\\Python\\Python39\\Scripts\\;' + $env:PATH; . 'E:\\Git_Projects\\sifli-sdk\\export.ps1'"        ],        "icon": "terminal-powershell"        }    }}</code></pre><h2>3.2 在vscoe终端启用SF32开发环境终端</h2><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/274879f0e77f48f4aa5b29508099ee82.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/28964afac7a644f28863ce555b9dc383.png"></p><h2>3.3 进入项目目录，进行编译</h2><pre><code class="language-bash">cd E:\Git_Projects\sifli-sdk\example\get-started\hello_world\rtt\projectscons --board=sf32lb52-lchspi-ulp -j8</code></pre><p>注：若是出现下面报错是子模块没有初始化，需要执行下面的命令：</p><pre><code>git submodule update --init --recursive</code></pre><p>编译成功过程（可略）：</p><pre><code class="language-bash">PS E:\Git_Projects\sifli-sdk&gt; cd .\example\get-started\hello_world\rtt\projectPS E:\Git_Projects\sifli-sdk\example\get-started\hello_world\rtt\project&gt; scons --board=sf32lb52-lchspi-ulp -j8scons: Reading SConscript files ...Board: sf32lb52-lchspi-ulp_hcpu========Multi-Project Info--------full_name       main.bootloaderparent          mainbsp_root        E:\Git_Projects\sifli-sdk\example\boot_loader\project\butterflmicro\ram_v2build_dir       build_sf32lb52-lchspi-ulp_hcpu/bootloaderlink_script     E:\Git_Projects\sifli-sdk/example/boot_loader/project/butterflmicro/ram_v2\linkptab            E:/Git_Projects/sifli-sdk/customer/boards/sf32lb52-lchspi-ulp\ptab.jsonembedded:       False--------full_name       mainparentbsp_root        E:\Git_Projects\sifli-sdk\example\get-started\hello_world\rtt\projectbuild_dir       build_sf32lb52-lchspi-ulp_hcpu/link_script     E:\Git_Projects\sifli-sdk/drivers/cmsis/sf32lb52x/Templates/gcc/hcpu/linkptab            E:/Git_Projects/sifli-sdk/customer/boards/sf32lb52-lchspi-ulp\ptab.json--------full_name       main.ftabparent          mainbsp_root        E:\Git_Projects\sifli-sdk\example\flash_table\sf32lb52x_common_v2build_dir       build_sf32lb52-lchspi-ulp_hcpu/ftablink_script     E:\Git_Projects\sifli-sdk/drivers/cmsis/sf32lb52x/Templates/gcc/hcpu/linkptab            E:/Git_Projects/sifli-sdk/customer/boards/sf32lb52-lchspi-ulp\ptab.jsonembedded:       False========scons: done reading SConscript files.scons: Building targets ...scons: building associated VariantDir targets: build_sf32lb52-lchspi-ulp_hcpu . .CC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\bf0_ap_hal_msp.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\board.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\board_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\boot_flash.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\efuse.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\main.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\sd_emmc_ops.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\sd_nand_drv.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\sd_nand_ops.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\board\secboot.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\common\bsp_common.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\common\flash.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_init.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_lcd_tp.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_pinmux.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_power.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\cmsis\sf32lb52x\bf0_pin_const.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\cmsis\sf32lb52x\Templates\system_bf0_ap.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\cmsis\sf32lb52x\lcpu_config_type.oAS build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\cmsis\sf32lb52x\Templates\gcc\startup_bf0_hcpu.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_adc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_aes.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_aes_ns.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_audcodec_m.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_audprc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_bleaon.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_busmon.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_cortex.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_crc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_dsi.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_efuse.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_epic.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_ext_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_ezip.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_facc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_fft.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_gpio.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_hcd.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_hlp.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_hpaon.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_i2s.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lcdc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lcpu_config.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lpaon.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lpcomp.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lptim.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_lrc_cal.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_mailbox.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_mpi.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_mpi_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_mpi_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_nn_acc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_patch.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_pcd.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_pdm.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_pinmux.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_pmu.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_ptc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_rcc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_rng.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_sd_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_sdadc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_sdhci.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_sdmmc.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_secu.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_spi.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_tim.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_tim_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_tsen.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_uart.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_hal_wdt.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\bf0_sys_cfg.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\flash_table.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\nand_table.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\drivers\hal\sifli_bbm.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\aes.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\cipher.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\cipher_wrap.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\md.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\md_wrap.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\platform.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\sha256.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\sha512.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\asn1parse.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\bignum.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\oid.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\pk.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\pkparse.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\pk_wrap.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\rsa.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\sm2.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\sm3.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\ecp.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\ecp_curves.oCC build_sf32lb52-lchspi-ulp_hcpu\bootloader\sifli_sdk\external\mbedtls\library\ctr_drbg.oGenerating build_sf32lb52-lchspi-ulp_hcpu\bootloader\link_copy.lds ...LINK build_sf32lb52-lchspi-ulp_hcpu\bootloader\bootloader.elfBuilding compilation database build_sf32lb52-lchspi-ulp_hcpu\bootloader\compile_commands.jsonBuilding compilation database build_sf32lb52-lchspi-ulp_hcpu\compile_commands.jsonCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\common\bsp_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\common\flash.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_lcd_tp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_pinmux.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\boards\sf32lb52-lchspi-ulp_base\bsp_power.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\peripherals\co5300\co5300.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\peripherals\ft6146\ft6146.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\customer\peripherals\pa\AW8155\sifli_aw8155.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bf0_pin_const.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\Templates\system_bf0_ap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\lcpu_config_type.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\lcpu_patch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\lcpu_patch_rev_b.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bt_rf_fulcal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bt_rf_cw_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bt_power_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bf0_lcpu_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\bt_rf_test.oAS build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\cmsis\sf32lb52x\Templates\gcc\startup_bf0_hcpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_aes.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_aes_ns.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_audcodec_m.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_audprc.oD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): in function `_close_r':closer.c:(.text._close_r+0xc): warning: _close is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-fstatr.o): in function `_fstat_r':fstatr.c:(.text._fstat_r+0xe): warning: _fstat is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe:CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_bleaon.o D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-fstatr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-isattyr.o): in function `_isatty_r':isattyr.c:(.text._isatty_r+0xc): warning: _isatty is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-isattyr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): in function `_lseek_r':lseekr.c:(.text._lseek_r+0x10): warning: _lseek is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_busmon.old.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-openr.o): in function `_open_r':openr.c:(.text._open_r+0x10): warning: _open is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-openr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): in function `_read_r':readr.c:(.text._read_r+0x10): warning: _read is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): in function `_write_r':writer.c:(.text._write_r+0x10): warning: _write is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): note: the message above does not take linker garbage collection into accountCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_cortex.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_crc.oD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: build_sf32lb52-lchspi-ulp_hcpu\bootloader\bootloader.elf has a LOAD segment with RWX permissionsCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_dsi.oGenerating build_sf32lb52-lchspi-ulp_hcpu\bootloader\bootloader.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\bootloader\bootloader.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\bootloader\bootloader.hex ...CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_efuse.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_epic.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_ext_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_ezip.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_facc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_fft.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_gpio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_hcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_hlp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_hpaon.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_i2s.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lcdc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lcpu_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lpaon.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lpcomp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lptim.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_lrc_cal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_mailbox.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_mpi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_mpi_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_mpi_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_nn_acc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_patch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_pcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_pdm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_pinmux.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_pmu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_ptc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_rcc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_rng.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_sd_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_sdadc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_sdhci.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_sdmmc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_secu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_spi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_tim.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_tim_ex.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_tsen.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_uart.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_hal_wdt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\bf0_sys_cfg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\flash_table.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\nand_table.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\drivers\hal\sifli_bbm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\system\bf0_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\os_adaptor\src\os_adaptor_rtthread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_gpio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_usart.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_hwtimer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_pwm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_pwm_lptim.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_soft_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi_flash.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi_nand.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_sys_cfg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_ext_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_audprc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_audcodec_m.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_private.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_ram_lcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_test.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_fb.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_touch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_epic.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_epic_mask.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_mpi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_aes.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_dbg.oCC build_sf32lb52-lchspi-ulp_hcpu\src\main.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\clock.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\components.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\cpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\device.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\idle.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\ipc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\irq.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\kservice.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mempool.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\object.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\scheduler.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\signal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\timer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\cpuport.oAS build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\context_gcc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\backtrace.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\div0.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\showmem.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_mutex.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_semaphore.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_fs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_posix.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\poll.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\select.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\devfs\devfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\shell.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\symbol.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\common\gmtime_r.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc_syms.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\stdio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\syscalls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\time.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\llt_mem\llt_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio_pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\hwtimer\hwtimer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c-bit-ops.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\pin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\rt_drv_pwm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\mtd\mtd_nor.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\rtc\rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\serial\serial.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\completion.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\dataqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringblk_buf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringbuffer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\waitqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\workqueue.oGenerating build_sf32lb52-lchspi-ulp_hcpu\link_copy.lds ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\link_copy.lds ...Building compilation database build_sf32lb52-lchspi-ulp_hcpu\ftab\compile_commands.jsonLINK build_sf32lb52-lchspi-ulp_hcpu\main.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: build_sf32lb52-lchspi-ulp_hcpu\main.elf has a LOAD segment with RWX permissionsGenerating build_sf32lb52-lchspi-ulp_hcpu\main.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.c ...CC build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.oLINK build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): in function `_close_r':closer.c:(.text._close_r+0xc): warning: _close is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): in function `_lseek_r':lseekr.c:(.text._lseek_r+0x10): warning: _lseek is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): in function `_read_r':readr.c:(.text._read_r+0x10): warning: _read is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): in function `_write_r':writer.c:(.text._write_r+0x10): warning: _write is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: cannot find entry symbol entry; defaulting to 12000000Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\download.bat ...Generated sftool param: build_sf32lb52-lchspi-ulp_hcpu/sftool_param.jsonscons: done building targets.PS E:\Git_Projects\sifli-sdk\example\get-started\hello_world\rtt\project&gt; </code></pre><h2>3.4 烧写官方SDK例程程序，注意硬件链接，与电脑链接，后查看是否有ch340相关的端口，输入指令，回车，选择端口号，回车，然后打开软件助手sscom5.13.1.exe，波特率1000000，选择对应端口然后打开串口，本来的RTS是没有勾选的，然后你勾选又取消就可以实现软件复位了</h2><pre><code class="language-bash">build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat</code></pre><ul><li>正常运行时要求：5-6、7-8和11-12脚加跳线帽短接，不要插错了，不要插错了，不插错了，重要的事情说三遍。</li></ul><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/3475f690b6564b489fd35358d845a550.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/94bd8ad0f0b4485bbe42b5d2d7fe0249.png"></p><p>烧录完成记录：</p><pre><code class="language-bash">PS E:\Git_Projects\sifli-sdk\example\get-started\hello_world\rtt\project&gt; build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat     Uart Downloadplease input the serial port num:6com6[0x00]   Connected success!                                                                                                                                                                   [0x01]   Download stub success!                                                                                                                                                               [0x02]   Need to re-download                                                                                                                                                                  [0x03] Download success! ================================================================================================================================================ 57.22 KiB/s 100.000%[0x04]   Verify success!                                                                                                                                                                      [0x05]   Need to re-download                                                                                                                                                                  [0x06] Download success! ================================================================================================================================================ 84.10 KiB/s 100.000%[0x07]   Verify success!                                                                                                                                                                      [0x08]   Need to re-download                                                                                                                                                                  [0x09] Download success! ================================================================================================================================================ 54.91 KiB/s 100.000%[0x0A]   Verify success!                                                                                                                                                                      请按任意键继续. . .</code></pre><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/288d8d2debdc434a8b4132e945bdeca9.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/00d2103801e440168281d49e831e7f65.png"></p><h2>3.5 查看交互命令</h2><p>输入help</p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/8f2076cb2fb0443b8b57e2413f0dd238.png"></p><h1 style="background-color:transparent">四、烧录小智程序</h1><h2 style="background-color:transparent">4.1 来到官方仓库，进入AI小智的子仓库拉取源码，一定要拉取子模块</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="编译下载 - SiFli SDK编程指南 文档" href="https://docs.sifli.com/projects/sdk/latest/sf32lb52x/quickstart/build.html" title="编译下载 - SiFli SDK编程指南 文档">编译下载 - SiFli SDK编程指南 文档</a></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/ccfb434dcdf14e41aaf295df3a0d5534.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/bfeed11f83574f2db844cb3004f62e42.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/777c068c0c7d46809b1a5f9801a43419.png"></p><pre><code class="language-bash">git clone --recursive git@github.com:78/xiaozhi-sf32.git</code></pre><h2 style="background-color:transparent">4.2 vscode打开xiaozhi-sf32，进入SF32环境终端，编译烧录</h2><pre><code class="language-bash">cd app/projectscons --board=sf32lb52-lchspi-ulp -j8</code></pre><pre><code class="language-bash">E:\Git_Projects\xiaozhi-sf32\app\project\build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat</code></pre><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/eb8f0feb98324d07a01c31972677305d.png"></p><p>由于我的版本可能不对应，就将注释PrepareEnv(board_search_path=&quot;../boards&quot;)，改为PrepareEnv()</p><p># PrepareEnv(board_search_path=&quot;../boards&quot;)</p><p>PrepareEnv()</p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/158e70a15ee248b49a34d8fe9d8c26f1.png"></p><h2 style="background-color:transparent">4.3 下载烧录工具，可烧写现成文件</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="小智烧录和使用 | 立创开发板技术文档中心" href="https://wiki.lckfb.com/zh-hans/hspi-sf32lb52/lckfb-hspi-sf32lb52/xiaozhi.html" title="小智烧录和使用 | 立创开发板技术文档中心">小智烧录和使用 | 立创开发板技术文档中心</a></p><p id="烧录工具">下载最新版本的小智 AI 固件，通过 sftool 的 Flash 烧录工具（sftool），先将黄山派开发板中原本的代码擦除，再选择小智AI的固件进行下载。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="https://github.com/OpenSiFli/sftool/releases" href="https://github.com/OpenSiFli/sftool/releases" title="https://github.com/OpenSiFli/sftool/releases">https://github.com/OpenSiFli/sftool/releases</a></p><p>注：用最新版即可</p><h2>4.4 实现效果</h2><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/cab3c38a4cc04844a0eb03266fe45d30.jpeg"></p><p>详细编译过程繁杂（可略）：</p><pre><code class="language-bash">CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\scale\lv_scale.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\slider\lv_slider.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\span\lv_span.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\spinbox\lv_spinbox.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\spinner\lv_spinner.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\switch\lv_switch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\table\lv_table.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\tabview\lv_tabview.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\textarea\lv_textarea.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\tileview\lv_tileview.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\lvgl_v9\src\widgets\win\lv_win.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\aes.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\aesni.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\arc4.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\aria.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\asn1parse.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\asn1write.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\base64.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\bignum.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\blowfish.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\camellia.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ccm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\certs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\chacha20.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\chachapoly.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\cipher.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\cipher_wrap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\cmac.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\constant_time.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ctr_drbg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\debug.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\des.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\dhm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ecdh.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ecdsa.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ecjpake.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ecp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ecp_curves.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\entropy.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\entropy_poll.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\error.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\gcm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\havege.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\hkdf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\hmac_drbg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\md.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\md2.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\md4.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\md5.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\memory_buffer_alloc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\mps_reader.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\mps_trace.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\nist_kw.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\oid.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\padlock.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pk.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pk_wrap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pkcs11.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pkcs12.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pkcs5.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pkparse.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\pkwrite.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\platform.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\platform_util.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\poly1305.oIn file included from E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\pkwrite.c:24:In function 'mbedtls_pk_ec',    inlined from 'mbedtls_pk_write_pubkey_der' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\pkwrite.c:260:9:E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\include/mbedtls/pk.h:677:19: warning: potential null pointer dereference [-Wnull-dereference]  677 |             return( NULL );      |                   ^CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_aead.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_cipher.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_client.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_driver_wrappers.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_ecp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_hash.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_mac.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_rsa.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_se.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_slot_management.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_crypto_storage.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\psa_its_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ripemd160.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\rsa.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\rsa_internal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\sha1.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\sha256.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\sha512.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_cache.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_ciphersuites.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_cli.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_cookie.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_msg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_srv.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_ticket.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_tls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\ssl_tls13_keys.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\threading.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\timing.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\version.oIn function 'ssl_check_key_curve',    inlined from 'ssl_pick_cert' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_srv.c:1005:13,    inlined from 'ssl_ciphersuite_match' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_srv.c:1156:9,    inlined from 'ssl_parse_client_hello' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_srv.c:2246:25,    inlined from 'mbedtls_ssl_handshake_server_step' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_srv.c:4759:19:E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_srv.c:931:26: warning: potential null pointer dereference [-Wnull-dereference]  931 |     mbedtls_ecp_group_id grp_id = mbedtls_pk_ec( *pk )-&gt;grp.id;      |                          ^~~~~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\version_features.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509_create.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509_crl.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509_crt.oIn function 'ssl_parse_certificate_verify',    inlined from 'mbedtls_ssl_parse_certificate' at E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_tls.c:2948:11:E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\ssl_tls.c:2722:13: warning: potential null pointer dereference [-Wnull-dereference] 2722 |             mbedtls_ssl_check_curve( ssl, mbedtls_pk_ec( *pk )-&gt;grp.id ) != 0 )      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509_csr.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509write_crt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\x509write_csr.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\mbedtls\library\xtea.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\aes_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\arc4_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\des_alt.oE:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\x509_crt.c: In function 'x509_profile_check_key':E:\Git_Projects\sifli-sdk\external\mbedtls_228\mbedtls\library\x509_crt.c:213:36: warning: potential null pointer dereference [-Wnull-dereference]  213 |         const mbedtls_ecp_group_id gid = mbedtls_pk_ec( *pk )-&gt;grp.id;      |                                    ^~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\md5_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\rsa_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\sha1_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\sha256_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\sha512_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\timing_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\tls_certificate.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\tls_client.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\tls_hardware.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\mbedtls_228\ports\src\tls_net.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\state_machine-latest\src\state_machine.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\webclient\src\webclient.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_bt_voice\audio_bt_voice.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_bt_voice\audio_cvsd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_bt_voice\audio_filter.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_bt_voice\audio_msbc_plc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_bt_voice\bt_audiopath.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_local_music\audio_loopback_demo.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_local_music\audio_mp3ctrl.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_local_music\mp3id3parse.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_local_music\sifli_resample.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_manager\audio_server.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_manager\audio_test_demo.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_port\audio_eq_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_port\audio_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_port\audio_pa_api.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\audio\audio_voice_proc\audio_3a.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\porting\rtt\rw_rtt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bluetooth.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\bf0_ble_gap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\bf0_sibles.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\bf0_sibles_advertising.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\bf0_sibles_advertising_internal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\bf0_sibles_util.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\ble_connection_manager.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_basc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_cppc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_cscpc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_hrpc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_tipc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_ble_tips.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sible_ams.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_ancs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_bass.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_console.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_dfu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_diss.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_eq_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_fmpt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_ias.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_log.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_pxpr.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_serial_trans_client.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_serial_trans_service.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_tpss.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\ble\gatt_service\bf0_sibles_watchface.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_audio\a2dp_relay_sink_service.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_audio\a2dp_relay_src_service.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_audio\hfp_audio_api.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_cm\bt_connection_manager.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_cm\bt_connection_service.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_av.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_av_snk.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_av_src.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_avrcp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_bt_dis.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_bt_gatt.oE:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_cm\bt_connection_manager.c: In function 'bt_cm':E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_cm\bt_connection_manager.c:1782:25: warning: iteration 1 invokes undefined behavior [-Waggressive-loop-optimizations] 1782 |                 if (conn-&gt;state &gt;= BT_CM_ACL_STATE_CONNECTED)      |                     ~~~~^~~~~~~E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_cm\bt_connection_manager.c:1779:35: note: within this loop 1779 |             for (uint8_t i = 0; i &lt; BT_CM_MAX_BOND; i++)CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_bt_l2cap_profile.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_cardparser.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_demo.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_generic.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_hfp_ag.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_hfp_hf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_hid.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_interface.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_main.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_menu.oE:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_main.c:CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_pan.o         In function 'bts2_main':E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_main.c:131:5: warning: 'CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_pbap_c.obts2_init' accessing 64 bytes in a region of size 11 [CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_spp.o-Wstringop-overflow=]  131 |     CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_sys.obts2_init((U8 *)"bts2_sm.db");      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_main.c:131:5: note: referencing argument 1 of type 'U8[64]' {aka 'unsigned char[64]'}In file included from E:\Git_Projects\sifli-sdk\middleware\bluetooth\include/bts2_global.h:29,                 from E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_inc.h:26,                 from E:\Git_Projects\sifli-sdk\middleware\bluetooth\service\bt\bt_finsh\bts2_app_main.c:8:E:\Git_Projects\sifli-sdk\middleware\bluetooth\include/bts2_api.h:29:4: note: in a call to function 'bts2_init'   29 | U8 bts2_init(BTS2S_DB_FILE_PATH path);      |    ^~~~~~~~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\common\bf0_bt_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\common\bf0_bt_hci.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\common\bf0_bt_metrics.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\common\bf0_bt_nvds.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\common\bluetooth_hci_flash.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\internal\bluetooth_config.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\service\internal\bluetooth_misc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\lib\dummy.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\button\button.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\cpu_usage_profiler\cpu_usage_profiler.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\ipc_queue\common\circular_buf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\ipc_queue\common\ipc_hw.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\ipc_queue\common\ipc_queue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\ipc_queue\porting\sf32lb52x\hcpu\ipc_hw_port.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\littlevgl2rtt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_perf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_font_v9\lv_font_ubuntu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lv_gpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lv_keypad.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lv_lcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lv_touch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lvgl_drv.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\lvsf_img_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic_arc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic_border.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic_fill.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic_img.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_draw_epic_label.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lv_drivers_v9\sifli\lv_epic_utils.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\sifli_lib\lib\agif.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\sifli_lib\lib\dummy.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\system\bf0_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\system\bf0_pm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\system\gui_app_pm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\env\packages\packages\iot\netutils\iperf\iperf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\env\packages\packages\iot\netutils\ntp\ntp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\os_adaptor\src\os_adaptor_rtthread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_gpio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_usart.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_hwtimer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_pwm.oC:\Users\zky\AppData\Local\Temp\ccvk763H.s: Assembler messages:C:\Users\zky\AppData\Local\Temp\ccvk763H.s:2279: writing to APSR without specifying a bitmask is deprecatedCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_pwm_lptim.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_soft_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_i2c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi_flash.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_spi_nand.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_sys_cfg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_ext_dma.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_audprc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_audcodec_m.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_private.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_ram_lcd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_test.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_lcd_fb.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_touch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_epic.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_epic_mask.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_psram.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_mpi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_aes.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_common.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\rtthread\bsp\sifli\drivers\drv_dbg.oCC build_sf32lb52-lchspi-ulp_hcpu\src\DroidSansFallback_font.oCC build_sf32lb52-lchspi-ulp_hcpu\src\main.oCC build_sf32lb52-lchspi-ulp_hcpu\src\opus_heap.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_array.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_audio.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_client_public.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_mqtt.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_ui.oCC build_sf32lb52-lchspi-ulp_hcpu\src\xiaozhi_websocket.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\mcp\mcp_api.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\mcp\mcp_server.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\mcp\rgbled_mcp.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\iot\iot_c_api.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\iot\screen.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\iot\speaker.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\iot\thing.oCXX build_sf32lb52-lchspi-ulp_hcpu\src\iot\thing_manager.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\app_recorder_process.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\bsp_et_asr_ctrl.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\et_asr_default_state.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\et_decoder_patch.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\et_keyword.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\et_thres_list.oCC build_sf32lb52-lchspi-ulp_hcpu\src\kws\et_weights.oCC build_sf32lb52-lchspi-ulp_hcpu\src\weather\weather.oCC build_sf32lb52-lchspi-ulp_hcpu\font\xiaozhi_font.oCXX build_sf32lb52-lchspi-ulp_hcpu\hardware\sf32lb52-lchspi-ulp.oGenerating build_sf32lb52-lchspi-ulp_hcpu\lcpu\lcpu.c ...CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\clock.oCC build_sf32lb52-lchspi-ulp_hcpu\lcpu\lcpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\components.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\cpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\device.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\idle.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\ipc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\irq.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\kservice.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\memheap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mempool.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\object.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\scheduler.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\signal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\timer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\cpuport.oAS build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\context_gcc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\backtrace.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\div0.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\showmem.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_mutex.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_semaphore.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_fs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_posix.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\poll.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\select.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\devfs\devfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\dfs_elm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\ff.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\ffunicode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\shell.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\symbol.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\common\gmtime_r.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc_syms.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\stdio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\syscalls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\time.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\def.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\dns.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\inet_chksum.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ip.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\memp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\netif.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\pbuf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\raw.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\stats.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\sys.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\tcp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\tcp_in.oE:\Git_Projects\sifli-sdk\rtos\rtthread\components\net\lwip\lwip-2.1.2\src\core\pbuf.c: In function 'pbuf_realloc':E:\Git_Projects\sifli-sdk\rtos\rtthread\components\net\lwip\lwip-2.1.2\src\core\pbuf.c:476:10: warning: potential null pointer dereference [-Wnull-dereference]  476 |     if (q-&gt;next != NULL)      |         ~^~~~~~E:\Git_Projects\sifli-sdk\rtos\rtthread\components\net\lwip\lwip-2.1.2\src\core\pbuf.c:473:16: warning: potential null pointer dereference [-Wnull-dereference]  473 |     q-&gt;tot_len = q-&gt;len;      |     ~~~~~~~~~~~^~~~~~~~E:\Git_Projects\sifli-sdk\rtos\rtthread\components\net\lwip\lwip-2.1.2\src\core\pbuf.c:472:12: warning: potential null pointer dereference [-Wnull-dereference]  472 |     q-&gt;len = rem_len;      |     ~~~~~~~^~~~~~~~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\tcp_out.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\timeouts.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\udp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\altcp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\altcp_alloc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\altcp_tcp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\api_lib.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\api_msg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\err.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\if_api.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\netbuf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\netdb.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\netifapi.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\sockets.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\api\tcpip.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\netif\ethernet.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\netif\lowpan6.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\autoip.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\dhcp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\etharp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\icmp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\igmp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\ip4_frag.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\ip4.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\core\ipv4\ip4_addr.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\ping\ping.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\mqtt\mqtt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\websocket\base64-decode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\websocket\sha-1.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\websocket\websocket_client.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\altcp_tls\altcp_tls_mbedtls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\altcp_tls\altcp_tls_mbedtls_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\lwip-2.1.2\src\apps\snmp\snmpv3_mbedtls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\port\ethernetif.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\net\lwip\port\sys_arch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\llt_mem\llt_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\ulog\ulog.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\ulog\backend\console_be.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\ymodem\ymodem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\bitstream.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\buffers.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\dct32.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\dequant.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\dqchan.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\huffman.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\hufftabs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\imdct.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\polyphase.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\scalfact.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\stproc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\subband.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\real\trigtabs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\mp3tabs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\libhelix-mp3\mp3dec.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\bands.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\celt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\celt_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\celt_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\celt_lpc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\cwrs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\entcode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\entdec.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\entenc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\kiss_fft.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\laplace.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\mathops.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\mdct.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\modes.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\pitch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\quant_bands.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\rate.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\celt\vq.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\A2NLSF.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\CNG.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\HP_variable_cutoff.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\LPC_analysis_filter.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\LPC_fit.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\LPC_inv_pred_gain.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\LP_variable_cutoff.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF2A.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_VQ.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_VQ_weights_laroia.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_decode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_del_dec_quant.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_encode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_stabilize.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NLSF_unpack.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NSQ.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\NSQ_del_dec.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\PLC.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\VAD.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\VQ_WMat_EC.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\ana_filt_bank_1.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\biquad_alt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\bwexpander.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\bwexpander_32.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\check_control_input.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\code_signs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\control_SNR.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\control_audio_bandwidth.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\control_codec.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\debug.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\dec_API.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_frame.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_indices.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_parameters.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_pitch.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decode_pulses.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\decoder_set_fs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\enc_API.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\encode_indices.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\encode_pulses.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\gain_quant.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\init_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\init_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\inner_prod_aligned.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\interpolate.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\lin2log.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\log2lin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\pitch_est_tables.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\process_NLSFs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\quant_LTP_gains.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_down2.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_down2_3.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_private_AR2.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_private_IIR_FIR.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_private_down_FIR.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_private_up2_HQ.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\resampler_rom.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\shell_coder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\sigm_Q15.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\sort.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_LR_to_MS.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_MS_to_LR.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_decode_pred.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_encode_pred.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_find_predictor.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\stereo_quant_pred.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\sum_sqr_shift.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\table_LSF_cos.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_LTP.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_NLSF_CB_NB_MB.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_NLSF_CB_WB.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_gain.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_other.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_pitch_lag.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\tables_pulses_per_block.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\LTP_analysis_filter_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\LTP_scale_ctrl_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\apply_sine_window_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\autocorr_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\burg_modified_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\corrMatrix_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\find_LPC_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\find_LTP_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\find_pitch_lags_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\find_pred_coefs_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\k2a_FIX.oIn file included from CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\k2a_Q16_FIX.oE:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\structs_FIX.h:32,                 from E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\main_FIX.h:32,                 from E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:33:E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c: In function 'silk_LBRR_encode_FIX':E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: warning: 'silk_NSQ_del_dec_c' reading 64 bytes from a region of size 32 [-Wstringop-overread]  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 6 of type 'const opus_int16[32]' {aka 'const short int[32]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 7 of type 'const opus_int16[20]' {aka 'const short int[20]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 8 of type 'const opus_int16[96]' {aka 'const short int[96]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 9 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 10 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 11 of type 'const opus_int32[4]' {aka 'const long int[4]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 12 of type 'const opus_int32[4]' {aka 'const long int[4]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 13 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:434:13: note: in expansion of macro 'silk_NSQ_del_dec'  434 |             silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:275:6: note: in a call to function 'silk_NSQ_del_dec_c'  275 | void silk_NSQ_del_dec_c(      |      ^~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: warning: 'silk_NSQ_c' reading 64 bytes from a region of size 32 [-Wstringop-overread]  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 6 of type 'const opus_int16[32]' {aka 'const short int[32]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 7 of type 'const opus_int16[20]' {aka 'const short int[20]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 8 of type 'const opus_int16[96]' {aka 'const short int[96]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 9 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 10 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 11 of type 'const opus_int32[4]' {aka 'const long int[4]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 12 of type 'const opus_int32[4]' {aka 'const long int[4]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 13 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:439:13: note: in expansion of macro 'silk_NSQ'  439 |             silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;sNSQ_LBRR, psIndices_LBRR, x16,      |             ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:249:6: note: in a call to function 'CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\noise_shape_analysis_FIX.osilk_NSQ_c'  249 | void silk_NSQ_c(      |      ^~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c: In function 'silk_encode_frame_FIX':E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: warning: 'silk_NSQ_del_dec_c' reading 64 bytes from a region of size 32 [-Wstringop-overread]  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 6 of type 'const opus_int16[32]' {aka 'const short int[32]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 7 of type 'const opus_int16[20]' {aka 'const short int[20]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 8 of type 'const opus_int16[96]' {aka 'const short int[96]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 9 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 10 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 11 of type 'const opus_int32[4]' {aka 'const long int[4]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 12 of type 'const opus_int32[4]' {aka 'const long int[4]'}  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:296:18: note: referencing argument 13 of type 'const int[4]'  296 |     ((void)(arch),silk_NSQ_del_dec_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  297 |                            HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:201:21: note: in expansion of macro 'silk_NSQ_del_dec'  201 |                     silk_NSQ_del_dec( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:275:6: note: in a call to function 'silk_NSQ_del_dec_c'  275 | void silk_NSQ_del_dec_c(      |      ^~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: warning: 'silk_NSQ_c' reading 64 bytes from a region of size 32 [-Wstringop-overread]  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 6 of type 'const opus_int16[32]' {aka 'const short int[32]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 7 of type 'const opus_int16[20]' {aka 'const short int[20]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 8 of type 'const opus_int16[96]' {aka 'const short int[96]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\pitch_analysis_core_FIX.osilk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 9 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 10 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 11 of type 'const opus_int32[4]' {aka 'const long int[4]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 12 of type 'const opus_int32[4]' {aka 'const long int[4]'}  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:270:18: note: referencing argument 13 of type 'const int[4]'  270 |     ((void)(arch),silk_NSQ_c(psEncC, NSQ, psIndices, x16, pulses, PredCoef_Q12, LTPCoef_Q14, AR_Q13, \      |     ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  271 |                    HarmShapeGain_Q14, Tilt_Q14, LF_shp_Q14, Gains_Q16, pitchL, Lambda_Q10, LTP_scale_Q14))      |                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk\fixed\encode_frame_FIX.c:206:21: note: in expansion of macro 'silk_NSQ'  206 |                     silk_NSQ( &amp;psEnc-&gt;sCmn, &amp;psEnc-&gt;sCmn.sNSQ, &amp;psEnc-&gt;sCmn.indices, x_frame, psEnc-&gt;sCmn.pulses,      |                     ^~~~~~~~E:\Git_Projects\sifli-sdk\external\opus-1.4\silk/main.h:249:6: note: in a call to function 'silk_NSQ_c'  249 | void CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\process_gains_FIX.osilk_NSQ_c(      |      ^~~~~~~~~~CC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\regularize_correlations_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\residual_energy16_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\residual_energy_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\schur64_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\schur_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\vector_ops_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\silk\fixed\warped_autocorrelation_FIX.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\analysis.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\mapping_matrix.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\mlp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\mlp_data.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_multistream.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_multistream_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_multistream_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_projection_decoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_projection_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\opus_test.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\opus-1.4\src\repacketizer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\fft4g.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\ring_buffer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\vad\vad_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\vad\vad_filterbank.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\vad\vad_gmm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\vad\vad_sp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\vad\webrtc_vad.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\auto_corr_to_refl_coef.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\auto_correlation.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\complex_bit_reverse.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\complex_fft.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\copy_set_operations.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\cross_correlation.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\division_operations.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\dot_product_with_scale.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\downsample_fast.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\energy.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\filter_ar.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\filter_ar_fast_q12.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\filter_ma_fast_q12.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\get_hanning_window.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\get_scaling_square.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\ilbc_specific_functions.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\levinson_durbin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\lpc_to_refl_coef.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\min_max_operations.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\randomization_functions.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\real_fft.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\refl_coef_to_lpc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\resample.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\resample_48khz.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\resample_by_2.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\resample_by_2_internal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\resample_fractional.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\spl_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\spl_sqrt.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\spl_sqrt_floor.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\splitting_filter.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\sqrt_of_one_minus_x_squared.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\common_audio\signal_processing\vector_scaling_operations.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\ns\noise_suppression_x.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\ns\nsx_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\ns\nsx_core_c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\agc\legacy\analog_agc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\agc\legacy\digital_agc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\aecm\aecm_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\aecm\aecm_core_c.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\aecm\echo_control_mobile.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\utility\delay_estimator.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\utility\delay_estimator_wrapper.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\dc_correction\dc_correction.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\ramp_in\ramp_in.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc\modules\audio_processing\ramp_out\ramp_out.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\external\WebRTC_audio_processing\webrtc_vad_test.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\porting\rtt\bt_pan\bt_lwip.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\porting\rtt\bt_pan\bt_lwip_pan_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\bluetooth\porting\rtt\bt_pan\bt_prot.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio_pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\hwmailbox\hwmailbox.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\hwtimer\hwtimer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c-bit-ops.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\pin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\rt_drv_pwm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\rt_drv_encoder.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\mtd\mtd_nor.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\pm\pm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\rtc\rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\rtc\alarm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\serial\serial.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\completion.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\dataqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringblk_buf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringbuffer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\waitqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\workqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_v9\lv_ex_data.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_v9\lv_ext_resource_manager.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_v9\lv_ext_resource_manager_builtin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_v9\lv_seqimg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf_v9\lvsf_input.oGenerating build_sf32lb52-lchspi-ulp_hcpu\link_copy.lds ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\link_copy.lds ...Building compilation database build_sf32lb52-lchspi-ulp_hcpu\ftab\compile_commands.jsonBuilding compilation database build_sf32lb52-lchspi-ulp_hcpu\lcpu\compile_commands.jsonGenerating build_sf32lb52-lchspi-ulp_hcpu\lcpu\lcpu.asm ...LINK build_sf32lb52-lchspi-ulp_hcpu\main.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard/crtn.o: missing .note.GNU-stack section implies executable stackD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: NOTE: This behaviour is deprecated and will be removed in a future version of the linkerD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: build_sf32lb52-lchspi-ulp_hcpu\main.elf has a LOAD segment with RWX permissionsGenerating build_sf32lb52-lchspi-ulp_hcpu\main.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.c ...CC build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.oLINK build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): in function `_close_r':closer.c:(.text._close_r+0xc): warning: _close is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): in function `_lseek_r':lseekr.c:(.text._lseek_r+0x10): warning: _lseek is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): in function `_read_r':readr.c:(.text._read_r+0x10): warning: _read is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): in function `_write_r':writer.c:(.text._write_r+0x10): warning: _write is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: cannot find entry symbol entry; defaulting to 12000000Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\download.bat ...Generated sftool param: build_sf32lb52-lchspi-ulp_hcpu/sftool_param.jsonscons: done building targets.PS E:\Git_Projects\xiaozhi-sf32\app\project&gt; </code></pre><pre><code class="language-bash">E:\Git_Projects\xiaozhi-sf32\app\project\build_sf32lb52-lchspi-ulp_hcpu&gt;cd E:\Git_Projects\xiaozhi-sf32\app\projectPS E:\Git_Projects\xiaozhi-sf32\app\project&gt; E:\Git_Projects\xiaozhi-sf32\app\project\build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat     Uart Downloadplease input the serial port num:6com6[0x00]   Connected success!                                                                                                                                                                                [0x01]   Download stub success!                                                                                                                                                                            [0x02]   No need to re-download, skip!                                                                                                                                                                     [0x03]   Need to re-download                                                                                                                                                                               [0x04] Download success! ============================================================================================================================================================= 87.82 KiB/s 100.000%[0x05]   Verify success!                                                                                                                                                                                   [0x06]   Need to re-download                                                                                                                                                                               [0x07] Download success! ============================================================================================================================================================= 88.20 KiB/s 100.000%[0x08]   Verify success!                                                                                                                                                                                   [0x09]   Need to re-download                                                                                                                                                                               [0x0A] Download success! ============================================================================================================================================================= 88.77 KiB/s 100.000%[0x0B]   Verify success!                                                                                                                                                                                   [0x0C]   Need to re-download                                                                                                                                                                               [0x0D] Download success! ============================================================================================================================================================= 52.88 KiB/s 100.000%[0x0E]   Verify success!                                                                                                                                                                                   请按任意键继续. . .</code></pre><h1 style="background-color:transparent">五、烧录Watch UI程序</h1><h2 style="background-color:transparent">5.1 来到<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="SiFli科技" href="https://github.com/OpenSiFli/" title="SiFli科技">SiFli科技</a>，准备拉取watch ui源码</h2><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/c869304fc9a647fc94fac06941e880f0.png"></p><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/82629d1d24bb447b9b6fe1091da9d5c9.png"></p><pre><code class="language-bash">git clone --recursive https://github.com/OpenSiFli/lckfb-hspi-ulp_examplegit clone --recursive git@github.com:OpenSiFli/lckfb-hspi-ulp_example.git</code></pre><h2 style="background-color:transparent">5.2 使用vscode打开立创黄山派例程仓库，进入watch ui工程，打开之前的SF32终端环境配置，看readme，编译并下载</h2><pre><code class="language-bash">scons --board=sf32lb52-lchspi-ulp -j8build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat</code></pre><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/42e7957f54c742159e38f97a682ea04a.png"></p><p>烧录watch ui全过程记录（可略）：</p><pre><code class="language-bash">GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\fashion_sec.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 1 -dpt 1fashion_min.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\fashion_hr.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\fashion_min.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\no_ezip\fashion_sec.png color RGB565 -------------d3d_rotate.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------fashion_sec.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\compass_arrow.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\fashion_sec.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\d3d_rotate.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\hour_hand2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 1 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\kaleidoscope.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 1 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\no_ezip\hour_hand2.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\no_ezip\kaleidoscope.png color RGB565 -------------hour_hand2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\hour_hand2.tmp.okaleidoscope.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\minute_hand2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 1 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\no_ezip\minute_hand2.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\kaleidoscope.tmp.ominute_hand2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\minute_hand2.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\second_hand2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 1 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\airplane.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\no_ezip\second_hand2.png color RGB565 -------------second_hand2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\airplane.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\bluetooth.tmp.cairplane.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\no_ezip\second_hand2.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\bluetooth.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\airplane.tmp.obluetooth.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\bluetooth.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_40.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_40.png color RGB565 -------------clock_40.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_40.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_80.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_80.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes01.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1clock_80.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes02.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes03.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_80.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_eyes01.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_eyes02.png color RGB565 -------------clock_mickey_eyes01.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------clock_mickey_eyes02.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe01.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_eyes03.png color RGB565 -------------clock_mickey_eyes03.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes01.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_shoe01.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes03.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_eyes02.tmp.oclock_mickey_shoe01.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe01.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe02.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_shoe02.png color RGB565 -------------clock_mickey_shoe02.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe03.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe02.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_shoe03.png color RGB565 -------------clock_mickey_shoe03.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe03.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe04.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_shoe04.png color RGB565 -------------clock_mickey_shoe04.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe05.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe04.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\clock_mickey_shoe05.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\compass_arrow_shadow.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\dn.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1clock_mickey_shoe05.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_fileezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\dn.png color RGB565 -------------------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\compass_arrow_shadow.png color RGB565 -------------dn.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------compass_arrow_shadow.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\down_arrow.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\clock_mickey_shoe05.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\down_arrow.png color RGB565 -------------down_arrow.png converted!!!CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\compass_arrow_shadow.tmp.o----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\dn.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\down_arrow.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\eco.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\eco.png color RGB565 -------------eco.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\eco.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\gra_corner_clock1.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\gra_corner_clock1.png color RGB565 -------------gra_corner_clock1.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\gra_corner_clock1.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\gra_corner_clock2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\gra_corner_clock2.png color RGB565 -------------gra_corner_clock2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\gra_corner_clock2.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\house.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\house.png color RGB565 -------------house.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\house.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\human1.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\human1.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\human2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1human1.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_LiChuang.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\human2.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\human1.tmp.ohuman2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_activity.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_LiChuang.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_activity.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\human2.tmp.oimg_LiChuang.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------img_activity.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_alarm.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_LiChuang.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_alarm.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_activity.tmp.oimg_alarm.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_alarm.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_alarm_2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_alarm_2.png color RGB565 -------------img_alarm_2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_calendar.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_alarm_2.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_calendar.png color RGB565 -------------img_calendar.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_calendar.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_camera.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_camera.png color RGB565 -------------img_camera.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_camera.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_clock.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_clock.png color RGB565 -------------img_clock.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_compass.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_clock.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_compass.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_ecg.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1img_compass.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_group.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_ecg.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_group.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_compass.tmp.oimg_ecg.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_itunes.tmp.cimg_group.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_ecg.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_fileCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_group.tmp.o------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_itunes.png color RGB565 -------------img_itunes.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_left_arrow.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_itunes.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_fileGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_mail.tmp.c------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_left_arrow.png color RGB565 -------------ImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1img_left_arrow.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_mail.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_left_arrow.tmp.oimg_mail.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_mail.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_maps.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_maps.png color RGB565 -------------img_maps.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_maps.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_messages.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_messages.png color RGB565 -------------img_messages.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_messages.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_mountion.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_passbook.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_phone.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_mountion.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_passbook.png color RGB565 -------------img_mountion.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------img_passbook.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_phone.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_photos.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1img_phone.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_passbook.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_phone.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_photos.png color RGB565 -------------img_photos.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_mountion.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_photos.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_red_heart.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_remote.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_red_heart.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_remote.png color RGB565 -------------img_remote.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------img_red_heart.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_settings.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_red_heart.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_settings.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_remote.tmp.oimg_settings.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_settings.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_stocks.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_stocks.png color RGB565 -------------img_stocks.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_stocks.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_stopwatch.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_workout.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_world_clock.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_stopwatch.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\ms_earth.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1img_stopwatch.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_workout.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\img_world_clock.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\ms_earth.png color RGB565 -------------img_world_clock.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------img_workout.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_stopwatch.tmp.oms_earth.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_world_clock.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\ms_earth.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\img_workout.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\ms_water.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\up_arrow.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\ms_water.png color RGB565 -------------ms_water.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\up_arrow.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\weather.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1up_arrow.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\ms_water.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\weather.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\up_arrow.tmp.oweather.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\weather.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_circle.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_circle.png color RGB565 -------------wt_circle.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_circle.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_clock.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_cloudy.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_clock.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_compass.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_cloudy.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_earth.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1wt_clock.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------wt_cloudy.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_compass.png color RGB565 -------------wt_compass.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_earth.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_clock.tmp.owt_earth.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_cloudy.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_earth.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_compass.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_rain.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_snow.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_rain.png color RGB565 -------------wt_rain.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_snow.png color RGB565 -------------wt_snow.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_sunny.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_rain.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_sunny.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_snow.tmp.owt_sunny.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_sunny.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_weather.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_weather.png color RGB565 -------------wt_weather.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_weather.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\ezip\wt_wind.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 1GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\barometer.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_dashes.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\ezip\wt_wind.png color RGB565 -------------wt_wind.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_digital_bg.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\barometer.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_fileCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_dashes.tmp.oImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\clock_mickey_body.png color RGB565 -------------      ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\clock_mickey_head.png color RGB565 -------------      clock_mickey_body.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------clock_mickey_head.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_mickey_body.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_mickey_head.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_simple_bg.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\clock_simple_bg.png color RGB565 -------------        clock_mickey_bg.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_mickey_bg.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\compass_bg.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\compass_bg.png color RGB565 -------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_0.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64compass_bg.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_0.png color RGB565 -------------       CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\compass_bg.tmp.oclock_simple_bg.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_1.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64digital_b_time_0.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_1.png color RGB565 -------------       CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\clock_simple_bg.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_0.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_2.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64digital_b_time_1.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_2.png color RGB565 -------------       CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_1.tmp.odigital_b_time_2.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_2.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_3.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_4.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_4.png color RGB565 -------------       ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_3.png color RGB565 -------------       digital_b_time_3.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------digital_b_time_4.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_3.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_4.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_5.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_5.png color RGB565 -------------       GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_6.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64digital_b_time_5.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_6.png color RGB565 -------------       CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_5.tmp.odigital_b_time_6.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_7.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_6.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_7.png color RGB565 -------------       GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_8.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_9.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64digital_b_time_7.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_8.png color RGB565 -------------       ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\digital_b_time_9.png color RGB565 -------------       CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_7.tmp.odigital_b_time_9.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------digital_b_time_8.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\elevation.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_8.tmp.oezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\elevation.png color RGB565 -------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\digital_b_time_9.tmp.oelevation.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\elevation.tmp.oGenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\hr_region.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64GenImgFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\img_dial_bg.tmp.cImgFileBuilder= -rgb565  -section ROM3_IMG  -cfile 2 -dpt 4 -ers 64ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\hr_region.png color RGB565 -------------ezip version: 2.4.0_2025_08_11 lvgl_c_file------------- ezip convert begin: ezip -convert E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\images\common\large_ezip\img_dial_bg.png color RGB565 -------------hr_region.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\hr_region.tmp.oGenFontFile build_sf32lb52-lchspi-ulp_hcpu\src\resource\fonts\freetype\lvsf_tiny_font_tiny55_full.cCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\strings\en_us.ottf.c origin! E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\resource\fonts\freetype\tiny55_full.ttf CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\strings\zh_cn.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\strings\lang_pack.ottf.c generated! lvsf_tiny_font_tiny55_full.c CC build_sf32lb52-lchspi-ulp_hcpu\src\app_utils\main.oimg_dial_bg.png converted!!!----------------------------------------  ezip convert end !!! --------------------------------------CC build_sf32lb52-lchspi-ulp_hcpu\src\resource\fonts\freetype\lvsf_tiny_font_tiny55_full.oCC build_sf32lb52-lchspi-ulp_hcpu\src\resource\images\common\large_ezip\img_dial_bg.tmp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\clock.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\components.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\cpu.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\device.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\idle.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\ipc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\irq.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\kservice.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\memheap.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\mempool.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\object.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\scheduler.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\signal.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\src\timer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\cpuport.oAS build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\cortex-m33\context_gcc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\backtrace.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\div0.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\libcpu\arm\common\showmem.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_mutex.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_semaphore.oCXX build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_thread.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\cplusplus\cxx_crt_init.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_fs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\dfs_posix.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\poll.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\src\select.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\devfs\devfs.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\dfs_elm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\ff.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\dfs\filesystems\elmfat\ffunicode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\shell.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\symbol.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_cmd.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\finsh\msh_file.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\common\gmtime_r.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\libc_syms.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\stdio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\syscalls.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\libc\compilers\newlib\time.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\llt_mem\llt_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\ulog\ulog.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\utilities\ulog\backend\console_be.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lv_ex_data.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lv_ext_resource_manager.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lv_ext_resource_manager_builtin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lv_ext_resource_manager_dl_impl.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lv_freetype.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_analogclk.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_barcode.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_comp.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_composite.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_corner.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_curvetext.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_emoji.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_ezipa.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_font.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_gesture.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_header.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_idximg.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_input.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_popup.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_rlottie.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_theme_1.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\middleware\lvgl\lvsf\lvsf_utils.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\watch_demo.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\clock\app_clock_dial.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\clock\app_clock_main.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\clock\app_clock_rotate_bg.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\clock\app_clock_simple.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\clock\app_clock_status_bar.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\LC_Hello_World\main.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\main\app_mainmenu.oE:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\gui_apps\clock\app_clock_main.c: In function 'tileview_event_cb_t':E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\src\gui_apps\clock\app_clock_main.c:395:34: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]  395 |         rt_uint16_t active_pos = (rt_uint16_t)lv_event_get_param(event);      |                                  ^CC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\rotation3d\rotation3d.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\utils\custom_trans_anim.oCC build_sf32lb52-lchspi-ulp_hcpu\src\gui_apps\mem\app_mem.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\audio\audio_pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\hwmailbox\hwmailbox.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\hwtimer\hwtimer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\i2c\i2c-bit-ops.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\pin.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\adc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\misc\rt_drv_pwm.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\mtd\mtd_nor.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\rtc\rtc.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\serial\serial.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_core.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\spi\spi_dev.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\completion.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\dataqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\pipe.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringblk_buf.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\ringbuffer.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\waitqueue.oCC build_sf32lb52-lchspi-ulp_hcpu\sifli_sdk\rtos\kernel\components\drivers\src\workqueue.oGenerating build_sf32lb52-lchspi-ulp_hcpu\link_copy.lds ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\link_copy.lds ...Building compilation database build_sf32lb52-lchspi-ulp_hcpu\ftab\compile_commands.jsonLINK build_sf32lb52-lchspi-ulp_hcpu\main.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: build_sf32lb52-lchspi-ulp_hcpu\main.elf has a LOAD segment with RWX permissionsGenerating build_sf32lb52-lchspi-ulp_hcpu\main.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\main.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.c ...CC build_sf32lb52-lchspi-ulp_hcpu\ftab\board\ftab.oLINK build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.elfD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): in function `_close_r':closer.c:(.text._close_r+0xc): warning: _close is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-closer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): in function `_lseek_r':lseekr.c:(.text._lseek_r+0x10): warning: _lseek is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-lseekr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): in function `_read_r':readr.c:(.text._read_r+0x10): warning: _read is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-readr.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): in function `_write_r':writer.c:(.text._write_r+0x10): warning: _write is not implemented and will always failD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: D:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/thumb/v8-m.main+fp/hard\libg_nano.a(libc_a-writer.o): note: the message above does not take linker garbage collection into accountD:/DevEnv/SIFLI_Toolchain/tools/arm-none-eabi-gcc/14.2.1/bin/../lib/gcc/arm-none-eabi/14.2.1/../../../../arm-none-eabi/bin/ld.exe: warning: cannot find entry symbol entry; defaulting to 12000000Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.bin ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.asm ...Generating build_sf32lb52-lchspi-ulp_hcpu\ftab\ftab.hex ...Generating build_sf32lb52-lchspi-ulp_hcpu\download.bat ...Generated sftool param: build_sf32lb52-lchspi-ulp_hcpu/sftool_param.jsonscons: done building targets.PS E:\Git_Projects\lckfb-hspi-ulp_example\lvgl\watch\project&gt; build_sf32lb52-lchspi-ulp_hcpu\uart_download.bat     Uart Downloadplease input the serial port num:6com6[0x00]   Connected success!                                                                                                                                                                   [0x01]   Download stub success!                                                                                                                                                               [0x02]   No need to re-download, skip!                                                                                                                                                        [0x03]   Need to re-download                                                                                                                                                                  [0x04] Download success! ================================================================================================================================================ 88.52 KiB/s 100.000%[0x05]   Verify success!                                                                                                                                                                      [0x06]   Need to re-download                                                                                                                                                                  [0x07] Download success! ================================================================================================================================================ 52.78 KiB/s 100.000%[0x08]   Verify success!                                                                                                                                                                      请按任意键继续. . .</code></pre><h2>5.3 实验效果</h2><p><img src="/2025/10/13/%E3%80%90SoC%E3%80%91%E3%80%90SF32%E3%80%91%E5%88%9D%E6%AC%A1%E4%BD%93%E9%AA%8C%E9%BB%84%E5%B1%B1%E6%B4%BE%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/27e8344b146d41e59bf13d3ebd2c3996.gif"></p><pre><code class="language-bash">[01:36:41.652]收←◆SFBL[01:36:43.785]收←◆Serial:c2,Chip:4,Package:3,Rev:3  Reason:00000000 \ | /- SiFli Corporation / | \     build on Oct 13 2025, 2.4.0 build b9d1b6be 2020 - 2022 Copyright by SiFli teammount /dev sucess[2330] I/drv.rtc main: PSCLR=0x80000100 DivAI=128 DivAF=0 B=256[2359] I/drv.rtc main: RTC use LXT RTC_CR=00000001[2381] I/drv.rtc main: Init RTC, wake = 0[2542] I/drv.audprc main: init 00 ADC_PATH_CFG0 0x606[2563] I/drv.audprc main: HAL_AUDPRC_Init res 0[2584] I/drv.audcodec main: HAL_AUDCODEC_Init res 0[2606] I/TOUCH main: Regist touch screen driver, probe=0x120264a9 lvsf_font_load: faces 1 ft_cache_size 300000call par CFG1(3313)fc 9, xtal 2000, pll 2117call par CFG1(3313)fc 7, xtal 2000, pll 1696[3146] I/drv.lcd app_watc: [NONE] -&gt; [OPENING][3168] I/drv.lcd lcd_task: open[3182] I/drv.epic lcd_task: drv_gpu opened.[3199] I/drv.lcd lcd_task: HW open[3234] I/drv.lcd lcd_task: Try registered LCD driver...msh /&gt;[01:36:43.886]收←◆CO5300_ReadID 0x331100 [5555] I/co5300 lcd_task: LCD module use CO5300 IC [01:36:44.077]收←◆CO5300_ReadID 0x331100 [11804] I/co5300 lcd_task: LCD module use CO5300 IC [11825] I/drv.lcd lcd_task: Found lcd co5300 id:331100h[11846] I/drv.lcd lcd_task: HW open done.[11863] I/drv.lcd lcd_task: [OPENING] -&gt; [INITIALIZED][11883] I/drv.lcd lcd_task: open done.[11902] I/drv.lcd_fb app_watc: drv_lcd_fb_init[11923] I/drv.lcd_fb app_watc: drv_lcd_fb_init done.[11961] I/TOUCH app_watc: Open[11979] I/TOUCH tp_init: Find touch screen driver...[11999] I/TOUCH tp_init: Probe 120264a9[12017] I/TOUCH tp_init: touch screen found driver  0x200354b8, ft6146[12045] I/TOUCH app_watc: Opened.[12127] I/LVGL app_watc: [littlevgl2rtt] Welcome to the littlevgl2rtt lib.[12217] D/APP.FWK app_watc: send msg[GUI_APP_MSG_RUN_APP] [Main] to gui_app_mbx tick:303.[12255] I/APP.FWK.INT app_watc: [Main][01:36:44.122]收←◆[13252] I/drv.lcd lcd_task: Auto turn on display.[13274] I/drv.lcd lcd_task: set brightness 50[13294] I/drv.lcd lcd_task: display on[13309] I/drv.lcd lcd_task: [INITIALIZED] -&gt; [ON][13330] I/drv.lcd lcd_task: set brightness 100[13348] I/drv.lcd lcd_task: display on[13366] D/APP.SCHE app_watc: ----------------app_schedule_task---------------start[13397] I/APP.SCHE app_watc: &gt;&gt;Execute msg[GUI_APP_MSG_RUN_APP] tick:303[13426] I/APP.SCHE app_watc: app[Main] do LOAD, 200441c4[13448] I/APP.FWK app_watc: finding Main in builtin apps...[13471] D/APP.SCHE app_watc: app[Main] tgt_state [LAUNCHED] -&gt; [RUNNING][13499] I/APP.SCHE app_watc: app[Main] do START, 200441c4[13522] I/APP.FWK.INT app_watc: [Main][13539] D/APP.FWK app_watc: send msg[GUI_APP_MSG_OPEN_PAGE] [0x200441c4] to gui_app_mbx tick:344.[13575] I/APP.SCHE app_watc: &gt;&gt;Execute msg[GUI_APP_MSG_OPEN_PAGE] tick:344[13604] D/APP.SCHE app_watc: app[Main] create page[root] 20044290[13629] D/APP.SCHE app_watc: page[Main][root] tgt_state [CREATED] -&gt; [RESUMED][13659] D/APP.SCHE app_watc: Stop all app, and return to main app[13697] I/APP.SCHE app_watc: page[Main][root] do ONSTART, 20044290[01:36:44.169]收←◆[14813] E/drv.ft6146 tp_init: ft6146 id_H=64[14837] E/drv.ft6146 tp_init: ft6146 id_L=56[14958] I/APP.SCHE app_watc: page[Main][root] do ONRESUME, 20044290[14987] I/APP.SCHE app_watc: Try setup trans-anim[15007] I/APP.SCHE app_watc: Trans-anim is OFF, skip.[15028] D/APP.SCHE app_watc: app_schedule_task done.</code></pre>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机 立创黄山派 SoC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Docker】基于Ubuntu的Docker的日常使用方法</title>
    <link href="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>前言</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="【Docker】Docker的初步认识以及Ubuntu下的Docker环境安装、配置_ubuntu和docker的关系-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/149472417?spm=1001.2014.3001.5502" title="【Docker】Docker的初步认识以及Ubuntu下的Docker环境安装、配置_ubuntu和docker的关系-CSDN博客">【Docker】Docker的初步认识以及Ubuntu下的Docker环境安装、配置_ubuntu和docker的关系-CSDN博客</a></p><h1>一、Docker安装与卸载</h1><h2>1.1 卸载</h2><pre><code class="language-bash"># 如果安装过，查看Docker版本docker --version# 删除旧版本，同时彻底删除Docker相关包及配置sudo apt-get purge docker docker-engine docker.io containerd runc# 清理无用依赖sudo apt-get autoremove# 手动彻底删除 Docker 的核心数据目录sudo rm -rf /var/lib/docker</code></pre><h2>1.2 安装</h2><h3>1.1.1&nbsp;USTC 地址版本：</h3><pre><code class="language-bash"># 需要向系统的软件源配置中添加 Docker 官方仓库的地址信息# 这样系统的包管理工具（如apt）才能识别并从该仓库中下载 Docker 相关软件# 使用存储库安装Docker的原因：自动处理依赖关系，避免版本冲突# 首先就需要其他工具来帮助获取 Docker 官方仓库的地址信息sudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg-agent \    software-properties-common# 查看系统信息lsb_release -a# 通过国内的镜像源 添加 Docker 的官方 GPG 密钥curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc# 需要手动添加 Docker 的 APT 源到系统的apt软件源echo \  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/ \  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/nullsudo apt-get update# 更新软件源sudo apt updatesudo apt upgrade -y# 查看过往版本apt-cache madison docker-ce# 安装过往版本示例 例如 5:18.09.1~3-0~ubuntu-xenial# sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io# sudo apt-get install docker-ce=5:18.09.1~3-0~ubuntu-xenial docker-ce-cli=5:18.09.1~3-0~ubuntu-xenial containerd.io# 默认安装最新版本sudo apt-get install docker-ce docker-ce-cli containerd.io# 使用验机镜像指令查看是否成功sudo docker run hello-world</code></pre><h3>1.2.2 阿里云地址版本：</h3><pre><code class="language-bash"># 需要向系统的软件源配置中添加 Docker 官方仓库的地址信息# 这样系统的包管理工具（如apt）才能识别并从该仓库中下载 Docker 相关软件# 使用存储库安装Docker的原因：自动处理依赖关系，避免版本冲突# 首先就需要其他工具来帮助获取 Docker 官方仓库的地址信息sudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg-agent \    software-properties-common# 查看系统信息lsb_release -a# 通过阿里云镜像源 添加 Docker 的官方 GPG 密钥curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc# 需要手动添加 Docker 的 APT 源到系统的apt软件源（使用阿里云镜像）echo \  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ \  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/nullsudo apt-get update# 更新软件源sudo apt updatesudo apt upgrade -y# 查看可用版本apt-cache madison docker-ce# 安装过往版本示例（需替换为阿里云仓库中存在的版本）# sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io# 默认安装最新版本sudo apt-get install docker-ce docker-ce-cli containerd.io# 使用验机镜像指令查看是否成功 如果未拉下来则配置镜像加速器（使用提供的仓库源）sudo docker run hello-world</code></pre><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/299b9a01b90e4408ac729e28384fceaf.png"></p><h3>1.2.3 补充说明：<br />（1）为什么安装docker-ce docker-ce-cli containerd.io，而不是只安装docker-ce？</h3><p>在安装 Docker 时需要同时安装&nbsp;<code>docker-ce</code>、<code>docker-ce-cli</code>&nbsp;和&nbsp;<code>containerd.io</code>，是由 Docker 的组件架构和功能分工决定的，三者各司其职、相互依赖，缺一不可。具体原因如下：</p><h5><span style="background-color:#cbe0f1">1. 各组件的核心作用</span></h5><ul><li><p><strong><code><span style="background-color:#cbe0f1">docker-ce</span></code></strong><span style="background-color:#cbe0f1">：</span><br /><span style="background-color:#cbe0f1">全称是 &ldquo;Docker Community Edition&rdquo;（Docker 社区版），是 Docker 的核心引擎（daemon），负责容器的创建、运行、管理等核心功能（如镜像构建、容器生命周期管理等）。它是 Docker 的 &ldquo;运行时核心&rdquo;，但无法直接与用户交互，也不能独立完成所有容器操作。</span></p></li><li><p><strong><code><span style="background-color:#cbe0f1">docker-ce-cli</span></code></strong><span style="background-color:#cbe0f1">：</span><br /><span style="background-color:#cbe0f1">是 Docker 的命令行工具（Command Line Interface），提供了用户与 Docker 引擎交互的命令（如&nbsp;</span><code><span style="background-color:#cbe0f1">docker run</span></code><span style="background-color:#cbe0f1">、</span><code><span style="background-color:#cbe0f1">docker ps</span></code><span style="background-color:#cbe0f1">、</span><code><span style="background-color:#cbe0f1">docker pull</span></code><span style="background-color:#cbe0f1">&nbsp;等）。用户通过这些命令向&nbsp;</span><code><span style="background-color:#cbe0f1">docker-ce</span></code><span style="background-color:#cbe0f1">&nbsp;引擎发送指令，实现对容器的操作。</span><br /><span style="background-color:#cbe0f1">如果没有&nbsp;</span><code><span style="background-color:#cbe0f1">docker-ce-cli</span></code><span style="background-color:#cbe0f1">，用户将无法通过命令行控制 Docker 引擎。</span></p></li><li><p><strong><code><span style="background-color:#cbe0f1">containerd.io</span></code></strong><span style="background-color:#cbe0f1">：</span><br /><span style="background-color:#cbe0f1">是容器运行时（container runtime），负责管理容器的底层生命周期（如镜像的拉取、容器的启停、资源隔离等）。它是 Docker 引擎与操作系统之间的 &ldquo;中间层&rdquo;，最初是 Docker 内部的一个组件，后来被独立出来成为 CNCF（云原生计算基金会）的项目，具备更高的通用性和稳定性。</span><br /><code><span style="background-color:#cbe0f1">docker-ce</span></code><span style="background-color:#cbe0f1">&nbsp;引擎本身并不直接处理容器的底层运行，而是依赖&nbsp;</span><code><span style="background-color:#cbe0f1">containerd.io</span></code><span style="background-color:#cbe0f1">&nbsp;来完成实际的容器创建和管理工作。</span></p></li></ul><h5><span style="background-color:#dad5e9">2. 为什么不能只装&nbsp;</span><code><span style="background-color:#dad5e9">docker-ce</span></code><span style="background-color:#dad5e9">？</span></h5><p><code><span style="background-color:#dad5e9">docker-ce</span></code><span style="background-color:#dad5e9">&nbsp;作为核心引擎，必须依赖另外两个组件才能正常工作：</span></p><ul><li><span style="background-color:#dad5e9">没有&nbsp;</span><code><span style="background-color:#dad5e9">docker-ce-cli</span></code><span style="background-color:#dad5e9">：用户无法通过命令行操作 Docker（没有交互入口）；</span></li><li><span style="background-color:#dad5e9">没有&nbsp;</span><code><span style="background-color:#dad5e9">containerd.io</span></code><span style="background-color:#dad5e9">：</span><code><span style="background-color:#dad5e9">docker-ce</span></code><span style="background-color:#dad5e9">&nbsp;无法完成容器的底层运行和资源管理（没有执行载体）。</span></li></ul><p><span style="background-color:#dad5e9">三者是 &ldquo;协作关系&rdquo;：</span><code><span style="background-color:#dad5e9">docker-ce-cli</span></code><span style="background-color:#dad5e9">&nbsp;接收用户命令 &rarr; 传递给&nbsp;</span><code><span style="background-color:#dad5e9">docker-ce</span></code><span style="background-color:#dad5e9">&nbsp;引擎 &rarr;&nbsp;</span><code><span style="background-color:#dad5e9">docker-ce</span></code><span style="background-color:#dad5e9">&nbsp;调用&nbsp;</span><code><span style="background-color:#dad5e9">containerd.io</span></code><span style="background-color:#dad5e9">&nbsp;执行实际的容器操作。</span></p><h4><span style="background-color:#f9eda6">3. 三者的关系</span></h4><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#f9eda6">Docker 这三个组件之间的依赖关系可以简单概括为：</span><strong><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;直接依赖&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">，而&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">&nbsp;与&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;是 &ldquo;配套使用&rdquo; 关系</span></strong><span style="background-color:#f9eda6">。具体来说：</span></p><h5><span style="background-color:#f9eda6">1.&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;对&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">&nbsp;是强依赖</span></h5><p><code><span style="background-color:null">&nbsp; &nbsp;</span><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">（Docker 引擎）本身不直接处理容器的底层运行逻辑（如镜像拉取、容器启停、资源隔离等），这些核心操作必须通过&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">&nbsp;来完成。因此，</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;在设计上</span><strong><span style="background-color:#f9eda6">强制依赖&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code></strong><span style="background-color:#f9eda6">&mdash;&mdash; 如果没有&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">，</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;根本无法启动和工作。</span></p><p><span style="background-color:#f9eda6">在实际安装时（比如通过&nbsp;</span><code><span style="background-color:#f9eda6">apt</span></code><span style="background-color:#f9eda6">&nbsp;或&nbsp;</span><code><span style="background-color:#f9eda6">yum</span></code><span style="background-color:#f9eda6">&nbsp;等包管理工具），当你指定安装&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;时，包管理器会自动检测到它对&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">&nbsp;的依赖，并</span><strong><span style="background-color:#f9eda6">自动帮你安装&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code></strong><span style="background-color:#f9eda6">（无需手动显式指定）。</span></p><h5><span style="background-color:#f9eda6">2.&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">&nbsp;与&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;是 &ldquo;配套交互&rdquo; 关系</span></h5><p><code><span style="background-color:null">&nbsp; &nbsp;</span><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">&nbsp;是用户操作&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;的 &ldquo;入口&rdquo;（提供&nbsp;</span><code><span style="background-color:#f9eda6">docker</span></code><span style="background-color:#f9eda6">&nbsp;命令），但它本身不依赖&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;或&nbsp;</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">（可以单独安装，但安装后如果没有&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;引擎，命令会无法执行实际操作）。</span></p><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#f9eda6">反之，</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;引擎的运行不依赖&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">（引擎可以后台单独运行），但用户如果没有&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">，就无法通过命令行与引擎交互（相当于 &ldquo;有引擎但没遥控器&rdquo;）。因此，实际使用中通常会将&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;和&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">&nbsp;一起安装，确保 &ldquo;引擎 + 遥控器&rdquo; 的完整功能。</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#f9eda6">所以最终的安装逻辑也可以是：</span><strong><span style="background-color:#f9eda6">显式安装&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;和&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce-cli</span></code><span style="background-color:#f9eda6">&nbsp;即可，</span><code><span style="background-color:#f9eda6">containerd.io</span></code><span style="background-color:#f9eda6">&nbsp;会作为&nbsp;</span><code><span style="background-color:#f9eda6">docker-ce</span></code><span style="background-color:#f9eda6">&nbsp;的依赖被自动安装</span></strong><span style="background-color:#f9eda6">，三者共同构成完整可用的 Docker 环境。</span></p><h5>总结</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Docker 的组件拆分（<code>docker-ce</code>、<code>docker-ce-cli</code>、<code>containerd.io</code>）是为了实现 &ldquo;模块化设计&rdquo;：让命令交互、核心引擎、底层运行时各司其职，既提高了稳定性，也方便与其他容器生态（如 Kubernetes）兼容。因此，安装时必须同时包含这三个组件，才能保证 Docker 的完整功能。</p><h2>1.3 后续完善</h2><h3>1.3.1&nbsp;将当前用户添加到docker组</h3><pre><code class="language-bash"># 将用户添加到docker组# sudo usermod -aG docker $USERsudo usermod -aG docker &lt;your-username&gt;</code></pre><h3>1.3.2&nbsp;配置镜像加速器（使用提供的仓库源）</h3><pre><code class="language-bash"># 配置加速 比较重要sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123;    "registry-mirrors": [        "https://do.nark.eu.org",        "https://dc.j8.work",        "https://docker.m.daocloud.io",        "https://dockerproxy.com",        "https://docker.mirrors.ustc.edu.cn",        "https://docker.nju.edu.cn"    ]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart dockersystemctl status docker</code></pre><h2>1.4 一键安装式的shell脚本</h2><pre><code class="language-bash">#!/bin/bash# 确保脚本以root权限运行if [ "$(id -u)" -ne 0 ]; then    echo "请使用root权限运行此脚本（可添加sudo）" &gt;&amp;2    exit 1fi# 检查是否已安装Docker，若已安装则停止服务并彻底卸载echo "===== 检查Docker是否已安装 ====="if command -v docker &amp;&gt; /dev/null; then    echo "检测到已安装Docker，版本信息："    docker --version        echo -e "\n===== 停止Docker服务 ====="    sudo systemctl stop docker  # 停止正在运行的Docker服务    sudo systemctl disable docker  # 禁用开机自启（可选，彻底清理）        echo -e "\n===== 开始卸载Docker ====="    # 彻底卸载Docker相关包    sudo apt-get purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras        echo -e "\n===== 清理残留文件 ====="    # 删除Docker数据目录（镜像、容器、配置等）    sudo rm -rf /var/lib/docker    sudo rm -rf /var/lib/containerd    sudo rm -rf /etc/docker    sudo rm -rf /etc/apt/keyrings/docker.asc    sudo rm -rf /etc/apt/sources.list.d/docker.list        echo "Docker已完全卸载，将继续执行安装流程"else    echo "未检测到Docker，将直接执行安装流程"fi# 安装必要的依赖包，用于通过HTTPS获取仓库echo -e "\n===== 安装依赖包 ====="sudo apt-get install -y \    apt-transport-https \    ca-certificates \    curl \    gnupg-agent \    software-properties-common# 查看系统信息，确认Ubuntu版本echo -e "\n===== 系统信息 ====="lsb_release -a# 通过阿里云镜像源添加Docker的官方GPG密钥echo -e "\n===== 添加阿里云Docker GPG密钥 ====="curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc# 添加Docker的APT源（阿里云镜像，用于安装Docker软件）echo -e "\n===== 配置阿里云Docker软件源 ====="echo \  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ \  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null# 更新软件源索引echo -e "\n===== 更新软件源 ====="sudo apt-get updatesudo apt update# 升级系统已安装的包echo -e "\n===== 升级系统包 ====="sudo apt upgrade -y# 显示可用的Docker版本echo -e "\n===== 可用的Docker版本 ====="apt-cache madison docker-ce# 安装最新版本的Dockerecho -e "\n===== 安装Docker ====="sudo apt-get install -y docker-ce docker-ce-cli containerd.ioecho -e "\n===== 配置镜像加速器 ====="sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123;    "registry-mirrors": [        # 新增国内主流加速源        "https://registry.docker-cn.com",         # Docker 中国官方                    "https://mirror.ccs.tencentyun.com",      # 腾讯云        "https://cr.console.aliyun.com",          # 阿里云（需登录后获取专属地址）        "https://mirrors.aliyun.com/docker-library/", # 阿里云公共        "https://hub-mirror.c.163.com",           # 网易云        "https://mirrors.tuna.tsinghua.edu.cn/docker-images/", # 清华镜像源        "https://mirrors.huaweicloud.com",        # 华为云                # 保留原有加速源        "https://do.nark.eu.org",        "https://dc.j8.work",        "https://docker.m.daocloud.io",        "https://dockerproxy.com",        "https://docker.mirrors.ustc.edu.cn",        "https://docker.nju.edu.cn"    ]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart dockersystemctl status docker# 查看Docker信息，验证仓库配置echo -e "\n===== 查看Docker配置信息 ====="docker info# 拉取hello-world镜像echo -e "\n===== 拉取hello-world镜像 ====="sudo docker pull hello-world# 查看镜像列表echo -e "\n===== 查看Docker镜像 ====="sudo docker images# 运行hello-world容器echo -e "\n===== 运行hello-world容器 ====="sudo docker run hello-world# 提示将用户添加到docker组（可选）echo -e "\n===== 安装完成 ====="echo "如果需要非root用户使用Docker，请执行："echo "sudo usermod -aG docker &lt;你的用户名&gt;"echo "执行后请重新登录以使设置生效:"echo "sudo usermod -aG docker $&#123;USER&#125;"echo "使用命令查看当前用户所属组:groups或者id"</code></pre><h1>二、基于Docker+Ubuntu的基础使用</h1><h2>2.1 拉取镜像</h2><pre><code class="language-bash">sudo docker pull hello-world</code></pre><pre><code class="language-bash">zky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ sudo docker pull hello-worldUsing default tag: latestlatest: Pulling from library/hello-world17eec7bbc9d7: Pull complete Digest: sha256:54e66cc1dd1fcb1c3c58bd8017914dbed8701e2d8c74d9262e26bd9cc1642d31Status: Downloaded newer image for hello-world:latestdocker.io/library/hello-world:latest</code></pre><h2>2.2 查看镜像，基于<code>hello-world</code>镜像创建并运行一个容器</h2><pre><code class="language-bash">sudo docker imagessudo docker run hello-world</code></pre><pre><code class="language-bash">zky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ sudo docker imagesREPOSITORY    TAG       IMAGE ID       CREATED       SIZEhello-world   latest    1b44b5a3e06a   7 weeks ago   10.1kBzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ sudo docker run hello-worldHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/</code></pre><h2>2.3 容器命令</h2><h3 style="background-color:transparent">2.3.1&nbsp;容器运行命令 docker run|stop|start</h3><p style="background-color:transparent">docker run|stop|start</p><p>镜像运行，停止，从停止到运行<code>docker run</code>后，如果容器没有提供服务，会立即停止，退出。</p><p><code>docker run [option] image</code></p><p># option 参数说明</p><p><code>--name=&quot;Name&quot;</code>&nbsp;#对运行的容器定名字，</p><p>常用<code>-d</code>&nbsp;#后台方式运行<code>-it</code>&nbsp;#使用交互方式运行，</p><p>进入容器查看内容<code>-it = -i + -t</code></p><p><code>-p</code>&nbsp;#小写 p，指定容器的端口</p><p><code>-P</code>&nbsp;#大写 P，随机指定端口</p><p><code>docker run nginx:1.24.0</code></p><pre><code class="language-bash"># 这个 docker run 命令用于在 Docker 中启动一个 Nginx 容器，具体参数解释如下：# docker run：Docker 的核心命令，用于创建并启动一个容器# --name="test_web1"：为容器指定一个名称 "test_web1"，方便后续管理和识别容器# -p 2025:80：端口映射，将主机的 2025 端口映射到容器的 80 端口（Nginx 默认监听 80 端口）# 这意味着访问主机的 http://localhost:2025 会转发到容器内的 Nginx 服务# -d：后台运行容器（ detached 模式），容器启动后不会占用当前终端# nginx：指定要使用的镜像名称，Docker 会从本地或远程仓库拉取最新的 Nginx 镜像docker run --name="test_web1" -p 2025:80 -d nginx</code></pre><pre><code class="language-bash">zky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ docker pull nginxUsing default tag: latestlatest: Pulling from library/nginx5c32499ab806: Pull complete 375a694db734: Pull complete 5f825f15e2e0: Pull complete 16d05858bb8d: Pull complete 08cfef42fd24: Pull complete 3cc5fdd1317a: Pull complete 4f4e50e20765: Pull complete Digest: sha256:8adbdcb969e2676478ee2c7ad333956f0c8e0e4c5a7463f4611d7a2e7a7ff5dcStatus: Downloaded newer image for nginx:latestdocker.io/library/nginx:latestzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ sudo docker imagesREPOSITORY    TAG       IMAGE ID       CREATED       SIZEnginx         latest    203ad09fc156   7 weeks ago   192MBhello-world   latest    1b44b5a3e06a   7 weeks ago   10.1kBzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ sudo docker run --name="test_web1" -p 2025:80 -d nginxd6c9f476227b58a34f466c3dc5b70014907e9875b714facfc2b4caab4f569926zky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ docker ps -aCONTAINER ID   IMAGE         COMMAND                   CREATED          STATUS                      PORTS                                     NAMESd6c9f476227b   nginx         "/docker-entrypoint.…"   53 seconds ago   Up 52 seconds               0.0.0.0:2025-&gt;80/tcp, [::]:2025-&gt;80/tcp   test_web1d98f8b5acdc9   hello-world   "/hello"                  31 minutes ago   Exited (0) 31 minutes ago                                             epic_newton11a147f878d1   hello-world   "/hello"                  31 minutes ago   Exited (0) 31 minutes ago                                             naughty_visvesvaraya6f7515977c77   hello-world   "/hello"                  35 minutes ago   Exited (0) 35 minutes ago                                             mystifying_johnson036cd9de504c   hello-world   "/hello"                  49 minutes ago   Exited (0) 49 minutes ago                                             brave_ramanujanzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host        valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000    link/ether 00:0c:29:d2:65:56 brd ff:ff:ff:ff:ff:ff    altname enp2s1    inet 192.168.0.105/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33       valid_lft 2993sec preferred_lft 2993sec    inet6 fe80::b501:560f:3981:a8eb/64 scope link noprefixroute        valid_lft forever preferred_lft forever3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether 06:74:70:13:32:c4 brd ff:ff:ff:ff:ff:ff    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0       valid_lft forever preferred_lft forever    inet6 fe80::474:70ff:fe13:32c4/64 scope link        valid_lft forever preferred_lft forever12: vethd233f56@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether 2e:da:ed:57:61:e1 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet6 fe80::2cda:edff:fe57:61e1/64 scope link        valid_lft forever preferred_lft foreverzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ </code></pre><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/e3d6aa4c53c54f72ac41bab6dd2648f7.png"></p><h3 style="background-color:transparent">2.3.2 容器删除命令</h3><pre><code class="language-bash"># 单个容器删除docker rm 容器id# 强制删除docker rm -f &lt;CONTAINER ID 或 CONTAINER NAME&gt;# 删除所有已退出的容器docker container prune</code></pre><h3 style="background-color:transparent">2.3.3&nbsp;容器管理与查看命令</h3><pre><code class="language-bash"># 查看所有镜像docker images -a# 查看所有容器docker ps -a# 查看运行容器docker ps# 查看所有容器iddocker ps -aq# 进入容器docker exec -it 容器id bash</code></pre><p>效果：</p><pre><code class="language-bash">zky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ docker exec -it test_web1 bashroot@d6c9f476227b:/# root@d6c9f476227b:/# root@d6c9f476227b:/# root@d6c9f476227b:/# root@d6c9f476227b:/# root@d6c9f476227b:/# lsbin  boot  devdocker-entrypoint.d  docker-entrypoint.sh  etchome  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  varroot@d6c9f476227b:/# ls -altotal 72drwxr-xr-x   1 root root 4096 Oct  2 16:38 .drwxr-xr-x   1 root root 4096 Oct  2 16:38 ..-rwxr-xr-x   1 root root    0 Oct  2 16:38 .dockerenvlrwxrwxrwx   1 root root    7 Sep 29 00:00 bin -&gt; usr/bindrwxr-xr-x   2 root root 4096 Aug 24 16:05 bootdrwxr-xr-x   5 root root  340 Oct  2 16:38 devdrwxr-xr-x   1 root root 4096 Sep 29 23:55 docker-entrypoint.d-rwxr-xr-x   1 root root 1620 Sep 29 23:55 docker-entrypoint.shdrwxr-xr-x   1 root root 4096 Oct  2 16:38 etcdrwxr-xr-x   2 root root 4096 Aug 24 16:05 homelrwxrwxrwx   1 root root    7 Sep 29 00:00 lib -&gt; usr/liblrwxrwxrwx   1 root root    9 Sep 29 00:00 lib64 -&gt; usr/lib64drwxr-xr-x   2 root root 4096 Sep 29 00:00 mediadrwxr-xr-x   2 root root 4096 Sep 29 00:00 mntdrwxr-xr-x   2 root root 4096 Sep 29 00:00 optdr-xr-xr-x 493 root root    0 Oct  2 16:38 procdrwx------   2 root root 4096 Sep 29 00:00 rootdrwxr-xr-x   1 root root 4096 Oct  2 16:38 runlrwxrwxrwx   1 root root    8 Sep 29 00:00 sbin -&gt; usr/sbindrwxr-xr-x   2 root root 4096 Sep 29 00:00 srvdr-xr-xr-x  13 root root    0 Oct  2 16:38 sysdrwxrwxrwt   2 root root 4096 Sep 29 00:00 tmpdrwxr-xr-x   1 root root 4096 Sep 29 00:00 usrdrwxr-xr-x   1 root root 4096 Sep 29 00:00 varroot@d6c9f476227b:/# cd /usr/share/nginx/htmlroot@d6c9f476227b:/usr/share/nginx/html# ls50x.html  index.htmlroot@d6c9f476227b:/usr/share/nginx/html# cat index.html&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Welcome to nginx!&lt;/title&gt;&lt;style&gt;html &#123; color-scheme: light dark; &#125;body &#123; width: 35em; margin: 0 auto;font-family: Tahoma, Verdana, Arial, sans-serif; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;&lt;p&gt;If you see this page, the nginx web server is successfully installed andworking. Further configuration is required.&lt;/p&gt;&lt;p&gt;For online documentation and support please refer to&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;Commercial support is available at&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;root@d6c9f476227b:/usr/share/nginx/html# exitexitzky@zky-virtual-machine:~/ProjectsHub/Docker_Projects$ </code></pre><h3 style="background-color:transparent">2.3.4 容器数据挂载宿主机命令（将宿主机的文件夹挂载在容器内部的文件夹上，相当于创建软连接）</h3><pre><code class="language-bash">docker run -d -p 2025:80 -v /home/zky/Docker_Projects/test_web1/html:/usr/share/nginx/html --name test_web1 nginx</code></pre><pre><code class="language-bash">zky@zky-virtual-machine:~$ docker run -d -p 2025:80 -v /home/zky/Docker_Projects/test_web1/html:/usr/share/nginx/html --name test_web1 nginx7050c6e6ae7a1b98df3501f9b56e91c711ba972b5aa905ff1ebf7bc63c2995f8zky@zky-virtual-machine:~$ docker exec -it test_web1docker: 'docker exec' requires at least 2 argumentsUsage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]See 'docker exec --help' for more informationzky@zky-virtual-machine:~$ docker exec -it test_web1 bashroot@7050c6e6ae7a:/# root@7050c6e6ae7a:/# lsbin  boot  devdocker-entrypoint.d  docker-entrypoint.sh  etchome  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  varroot@7050c6e6ae7a:/# exitexitzky@zky-virtual-machine:~$ cd Docker_Projectszky@zky-virtual-machine:~/Docker_Projects$ lstest_web1zky@zky-virtual-machine:~/Docker_Projects$ cd test_web1zky@zky-virtual-machine:~/Docker_Projects/test_web1$ lshtmlzky@zky-virtual-machine:~/Docker_Projects/test_web1$ cd htmlzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ sudo vim index.htmlzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ cat index.htmlhello worldzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ sudo chmod 777 index.htmlzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ ls -al总计 12drwxr-xr-x 2 root root 4096 10月  3 10:32 .drwxr-xr-x 3 root root 4096 10月  3 10:27 ..-rwxrwxrwx 1 root root   12 10月  3 10:32 index.htmlzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ </code></pre><p>运行容器后，查看</p><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/dfa80611a7b642fe92559a0303183513.png"></p><p>创建一个html文件后，写入hello world&nbsp;</p><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/c2647f5354b9470b8f32aa8d88cfc8e9.png"></p><h3 style="background-color:transparent">2.3.5&nbsp;容器卷映射命令（将容器内部的数据同步映射到宿主机，位置在docker相关文件夹管理）</h3><p><span style="background-color:#f9eda6">提示：如果使用容器数据挂载宿主机命令来在宿主机管理nginx的配置文件，由于宿主机外新建的文件夹导致宿主机管理nginx的配置文件是空的，然后运行容器能看见容器好像启动了但是实际上由于配置文件是空的，使用docker ps查看其实它没有在运行，是有错误的；但是，又怎么把容器内部的配置文件拷贝出来呢？这就需要容器卷映射命令将容器的配置文件映射同步到宿主机来管理。</span></p><pre><code class="language-bash">docker run -d -p 2026:80 -v /home/zky/Docker_Projects/test_web2/html/:/usr/share/nginx/html -v nginx_conf:/etc/nginx --name test_web2 nginx</code></pre><p>查询命令：</p><pre><code class="language-bash"># 直接查询卷名docker volume inspect nginx_conf# 间接查询容器和卷信息docker inspect test_web2</code></pre><p>具体查询效果：</p><pre><code class="language-bash"># 查询效果zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker ps CONTAINER ID   IMAGE     COMMAND                   CREATED          STATUS          PORTS                                     NAMESd6d9810a3197   nginx     "/docker-entrypoint.…"   14 minutes ago   Up 14 minutes   0.0.0.0:2026-&gt;80/tcp, [::]:2026-&gt;80/tcp   test_web27050c6e6ae7a   nginx     "/docker-entrypoint.…"   55 minutes ago   Up 55 minutes   0.0.0.0:2025-&gt;80/tcp, [::]:2025-&gt;80/tcp   test_web1zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker volume inspect nginx_conf[    &#123;        "CreatedAt": "2025-10-03T11:07:52+08:00",        "Driver": "local",        "Labels": null,        "Mountpoint": "/var/lib/docker/volumes/nginx_conf/_data",        "Name": "nginx_conf",        "Options": null,        "Scope": "local"    &#125;]zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker inspect test_web2[    &#123;        "Id": "d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae",        "Created": "2025-10-03T03:07:52.476021273Z",        "Path": "/docker-entrypoint.sh",        "Args": [            "nginx",            "-g",            "daemon off;"        ],        "State": &#123;            "Status": "running",            "Running": true,            "Paused": false,            "Restarting": false,            "OOMKilled": false,            "Dead": false,            "Pid": 4958,            "ExitCode": 0,            "Error": "",            "StartedAt": "2025-10-03T03:07:52.505249755Z",            "FinishedAt": "0001-01-01T00:00:00Z"        &#125;,        "Image": "sha256:203ad09fc1566a329c1d2af8d1f219b28fd2c00b69e743bd572b7f662365432d",        "ResolvConfPath": "/var/lib/docker/containers/d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae/resolv.conf",        "HostnamePath": "/var/lib/docker/containers/d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae/hostname",        "HostsPath": "/var/lib/docker/containers/d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae/hosts",        "LogPath": "/var/lib/docker/containers/d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae/d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae-json.log",        "Name": "/test_web2",        "RestartCount": 0,        "Driver": "overlay2",        "Platform": "linux",        "MountLabel": "",        "ProcessLabel": "",        "AppArmorProfile": "docker-default",        "ExecIDs": null,        "HostConfig": &#123;            "Binds": [                "/home/zky/Docker_Projects/test_web2/html/:/usr/share/nginx/html",                "nginx_conf:/etc/nginx"            ],            "ContainerIDFile": "",            "LogConfig": &#123;                "Type": "json-file",                "Config": &#123;&#125;            &#125;,            "NetworkMode": "bridge",            "PortBindings": &#123;                "80/tcp": [                    &#123;                        "HostIp": "",                        "HostPort": "2026"                    &#125;                ]            &#125;,            "RestartPolicy": &#123;                "Name": "no",                "MaximumRetryCount": 0            &#125;,            "AutoRemove": false,            "VolumeDriver": "",            "VolumesFrom": null,            "ConsoleSize": [                24,                178            ],            "CapAdd": null,            "CapDrop": null,            "CgroupnsMode": "private",            "Dns": [],            "DnsOptions": [],            "DnsSearch": [],            "ExtraHosts": null,            "GroupAdd": null,            "IpcMode": "private",            "Cgroup": "",            "Links": null,            "OomScoreAdj": 0,            "PidMode": "",            "Privileged": false,            "PublishAllPorts": false,            "ReadonlyRootfs": false,            "SecurityOpt": null,            "UTSMode": "",            "UsernsMode": "",            "ShmSize": 67108864,            "Runtime": "runc",            "Isolation": "",            "CpuShares": 0,            "Memory": 0,            "NanoCpus": 0,            "CgroupParent": "",            "BlkioWeight": 0,            "BlkioWeightDevice": [],            "BlkioDeviceReadBps": [],            "BlkioDeviceWriteBps": [],            "BlkioDeviceReadIOps": [],            "BlkioDeviceWriteIOps": [],            "CpuPeriod": 0,            "CpuQuota": 0,            "CpuRealtimePeriod": 0,            "CpuRealtimeRuntime": 0,            "CpusetCpus": "",            "CpusetMems": "",            "Devices": [],            "DeviceCgroupRules": null,            "DeviceRequests": null,            "MemoryReservation": 0,            "MemorySwap": 0,            "MemorySwappiness": null,            "OomKillDisable": null,            "PidsLimit": null,            "Ulimits": [],            "CpuCount": 0,            "CpuPercent": 0,            "IOMaximumIOps": 0,            "IOMaximumBandwidth": 0,            "MaskedPaths": [                "/proc/asound",                "/proc/acpi",                "/proc/interrupts",                "/proc/kcore",                "/proc/keys",                "/proc/latency_stats",                "/proc/timer_list",                "/proc/timer_stats",                "/proc/sched_debug",                "/proc/scsi",                "/sys/firmware",                "/sys/devices/virtual/powercap"            ],            "ReadonlyPaths": [                "/proc/bus",                "/proc/fs",                "/proc/irq",                "/proc/sys",                "/proc/sysrq-trigger"            ]        &#125;,        "GraphDriver": &#123;            "Data": &#123;                "ID": "d6d9810a31972a259ef432aba27285f4e3922f2c44ec975504a040131b2da9ae",                "LowerDir": "/var/lib/docker/overlay2/762421dc13711cdeb508331bc89cb991a4e430b5b9e33f4a4fd8a2f34633331b-init/diff:/var/lib/docker/overlay2/f6029dfb70c7a6eebd04e08a08b793bf717d7a27349c1802f9ad0cb3dd14f049/diff:/var/lib/docker/overlay2/8ee89224c3a0511031185bd6db60487881baef74e5584cde37de0e7d61304c0e/diff:/var/lib/docker/overlay2/8adb0517bb33aa017b390656f922acd13dbf60393bf5523ef82c0b18a2ebfdb5/diff:/var/lib/docker/overlay2/87e291b2f300d61839f38cf4b42abc660368226f04e6e8163d2dfd51e72b5807/diff:/var/lib/docker/overlay2/22ad4d13715346a306b7d00627f1cbf933d6cfe532e33ae84ccdc661531f8612/diff:/var/lib/docker/overlay2/595e970753a446f6510df89718aaa3bdf3927566852e8aca4191e04a69cebb71/diff:/var/lib/docker/overlay2/cdb332aa714ac090f4b3ea16bf0f754518936d81ff81733cd47a7309985077d5/diff",                "MergedDir": "/var/lib/docker/overlay2/762421dc13711cdeb508331bc89cb991a4e430b5b9e33f4a4fd8a2f34633331b/merged",                "UpperDir": "/var/lib/docker/overlay2/762421dc13711cdeb508331bc89cb991a4e430b5b9e33f4a4fd8a2f34633331b/diff",                "WorkDir": "/var/lib/docker/overlay2/762421dc13711cdeb508331bc89cb991a4e430b5b9e33f4a4fd8a2f34633331b/work"            &#125;,            "Name": "overlay2"        &#125;,        "Mounts": [            &#123;                "Type": "bind",                "Source": "/home/zky/Docker_Projects/test_web2/html",                "Destination": "/usr/share/nginx/html",                "Mode": "",                "RW": true,                "Propagation": "rprivate"            &#125;,            &#123;                "Type": "volume",                "Name": "nginx_conf",                "Source": "/var/lib/docker/volumes/nginx_conf/_data",                "Destination": "/etc/nginx",                "Driver": "local",                "Mode": "z",                "RW": true,                "Propagation": ""            &#125;        ],        "Config": &#123;            "Hostname": "d6d9810a3197",            "Domainname": "",            "User": "",            "AttachStdin": false,            "AttachStdout": false,            "AttachStderr": false,            "ExposedPorts": &#123;                "80/tcp": &#123;&#125;            &#125;,            "Tty": false,            "OpenStdin": false,            "StdinOnce": false,            "Env": [                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",                "NGINX_VERSION=1.29.1",                "NJS_VERSION=0.9.1",                "NJS_RELEASE=1~bookworm",                "PKG_RELEASE=1~bookworm",                "DYNPKG_RELEASE=1~bookworm"            ],            "Cmd": [                "nginx",                "-g",                "daemon off;"            ],            "Image": "nginx",            "Volumes": null,            "WorkingDir": "",            "Entrypoint": [                "/docker-entrypoint.sh"            ],            "OnBuild": null,            "Labels": &#123;                "maintainer": "NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;"            &#125;,            "StopSignal": "SIGQUIT"        &#125;,        "NetworkSettings": &#123;            "Bridge": "",            "SandboxID": "6c67893c167156f1c7d0938284fac03d46145f1123478c9033eee1c4333d37d4",            "SandboxKey": "/var/run/docker/netns/6c67893c1671",            "Ports": &#123;                "80/tcp": [                    &#123;                        "HostIp": "0.0.0.0",                        "HostPort": "2026"                    &#125;,                    &#123;                        "HostIp": "::",                        "HostPort": "2026"                    &#125;                ]            &#125;,            "HairpinMode": false,            "LinkLocalIPv6Address": "",            "LinkLocalIPv6PrefixLen": 0,            "SecondaryIPAddresses": null,            "SecondaryIPv6Addresses": null,            "EndpointID": "95ccdc403058f65eb56164e803fb4adf65a7b94bb4f566ccfafa2c840528e698",            "Gateway": "172.17.0.1",            "GlobalIPv6Address": "",            "GlobalIPv6PrefixLen": 0,            "IPAddress": "172.17.0.3",            "IPPrefixLen": 16,            "IPv6Gateway": "",            "MacAddress": "ca:15:c6:dd:25:12",            "Networks": &#123;                "bridge": &#123;                    "IPAMConfig": null,                    "Links": null,                    "Aliases": null,                    "MacAddress": "ca:15:c6:dd:25:12",                    "DriverOpts": null,                    "GwPriority": 0,                    "NetworkID": "673dc66222dbbb9d8a0f68bba2ca14b70a0e4d88355ae54de305639677d6b930",                    "EndpointID": "95ccdc403058f65eb56164e803fb4adf65a7b94bb4f566ccfafa2c840528e698",                    "Gateway": "172.17.0.1",                    "IPAddress": "172.17.0.3",                    "IPPrefixLen": 16,                    "IPv6Gateway": "",                    "GlobalIPv6Address": "",                    "GlobalIPv6PrefixLen": 0,                    "DNSNames": null                &#125;            &#125;        &#125;    &#125;]zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ sudo ls /var/lib/docker/volumes/nginx_conf/_data  # 列出目录内容conf.dfastcgi_paramsmime.types  modules  nginx.conf  scgi_params  uwsgi_paramszky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ </code></pre><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/644a65243ef74feebe3165f331f2d0b3.png"></p><p><img src="/2025/10/03/%E3%80%90Docker%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu%E7%9A%84Docker%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/942fb3b1c191451db4fb4804d7444cbe.png"></p><h3>2.3.6 容器网络配置命令</h3><p>具体命令：</p><pre><code class="language-bash"># 1. 列出所有Docker网络docker network ls# 输出说明：# - NETWORK ID: 网络唯一标识# - NAME: 网络名称（默认包含bridge、host、none三种网络）# - DRIVER: 网络驱动类型（bridge为默认桥接网络）# - SCOPE: 网络作用域（local表示本地网络）# 2. 创建自定义网络（最常用）# 创建一个名为my_network的桥接网络（默认驱动为bridge）docker network create my_network# 创建指定子网和网关的网络（适合固定IP场景）docker network create \  --driver bridge \                  # 指定网络驱动为桥接模式  --subnet 172.20.0.0/16 \           # 设定子网范围  --gateway 172.20.0.1 \             # 设定网关地址  --ip-range 172.20.1.0/24 \         # 设定IP分配范围  my_custom_network                  # 网络名称# 3. 查看网络详细信息# 查看my_network的详细配置（包括连接的容器、IP范围等）docker network inspect my_network# 4. 将容器连接到网络# 将已运行的容器test_web1连接到my_networkdocker network connect my_network test_web1# 连接时指定固定IP（需网络已设置子网）docker network connect \  --ip 172.20.1.10 \                 # 为容器指定固定IP  my_custom_network \  test_web1# 5. 将容器从网络断开# 将test_web1从my_network断开（不会删除容器）docker network disconnect my_network test_web1# 6. 删除网络# 删除my_network网络（需先断开所有连接的容器）docker network rm my_network# 批量删除未使用的网络（清理无用网络）docker network prune -f              # -f表示强制删除，无需确认# 7. 运行容器时指定网络# 启动容器时直接连接到my_network（不使用默认bridge网络）docker run -d \  --name test_web3 \  --network my_network \             # 指定网络  -p 2028:80 \  nginx# 8. 使用host网络（容器共享宿主机网络栈）# 容器直接使用宿主机的IP和端口（性能好，但安全性较低）docker run -d \  --name test_web4 \  --network host \                   # 使用宿主机网络  nginx                              # 此时无需-p端口映射，直接使用容器内端口# 9. 使用none网络（容器禁用网络）# 创建一个完全隔离、没有网络的容器docker run -d \  --name isolated_container \  --network none \                   # 禁用网络  nginx</code></pre><p>测试效果：</p><pre><code class="language-bash">zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network lsNETWORK ID     NAME      DRIVER    SCOPE673dc66222db   bridge    bridge    localddc64a266dbf   host      host      local550e6ae5e19e   none      null      localzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker psCONTAINER ID   IMAGE     COMMAND                   CREATED             STATUS             PORTS                                     NAMESd6d9810a3197   nginx     "/docker-entrypoint.…"   30 minutes ago      Up 30 minutes      0.0.0.0:2026-&gt;80/tcp, [::]:2026-&gt;80/tcp   test_web27050c6e6ae7a   nginx     "/docker-entrypoint.…"   About an hour ago   Up About an hour   0.0.0.0:2025-&gt;80/tcp, [::]:2025-&gt;80/tcp   test_web1zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host        valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000    link/ether 00:0c:29:d2:65:56 brd ff:ff:ff:ff:ff:ff    altname enp2s1    inet 192.168.0.106/24 brd 192.168.0.255 scope global dynamic noprefixroute ens33       valid_lft 2591sec preferred_lft 2591sec    inet6 fe80::b501:560f:3981:a8eb/64 scope link noprefixroute        valid_lft forever preferred_lft forever3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether be:57:c6:de:92:ad brd ff:ff:ff:ff:ff:ff    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0       valid_lft forever preferred_lft forever    inet6 fe80::bc57:c6ff:fede:92ad/64 scope link        valid_lft forever preferred_lft forever4: vethf08af63@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether ba:8d:ce:fa:80:97 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet6 fe80::b88d:ceff:fefa:8097/64 scope link        valid_lft forever preferred_lft forever5: vethea5b32a@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default     link/ether 36:66:d2:fe:8c:67 brd ff:ff:ff:ff:ff:ff link-netnsid 1    inet6 fe80::3466:d2ff:fefe:8c67/64 scope link        valid_lft forever preferred_lft foreverzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker exec -it test_web2docker: 'docker exec' requires at least 2 argumentsUsage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]See 'docker exec --help' for more informationzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker exec -it test_web2 bashroot@d6d9810a3197:/# curl test_web2curl: (6) Could not resolve host: test_web2root@d6d9810a3197:/# exitexitzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network create net_web_chat8196fc6221d1a4bf90369c371f69df03d284d698cdb67a4551e4d9953edb9f3czky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network lsNETWORK ID     NAME           DRIVER    SCOPE673dc66222db   bridge         bridge    localddc64a266dbf   host           host      local8196fc6221d1   net_web_chat   bridge    local550e6ae5e19e   none           null      localzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ # 查看 test_web1 的网络详情docker inspect -f '&#123;&#123;json .NetworkSettings.Networks&#125;&#125;' test_web1 | python3 -m json.tool# 查看 test_web2 的网络详情docker inspect -f '&#123;&#123;json .NetworkSettings.Networks&#125;&#125;' test_web2 | python3 -m json.tool&#123;    "bridge": &#123;        "IPAMConfig": null,        "Links": null,        "Aliases": null,        "MacAddress": "ba:64:0f:88:8b:8a",        "DriverOpts": null,        "GwPriority": 0,        "NetworkID": "673dc66222dbbb9d8a0f68bba2ca14b70a0e4d88355ae54de305639677d6b930",        "EndpointID": "6371e9e214ff2d69168af7ac23f85c18bd5aa080a5cf3d61d7e5b0e30e61b8b7",        "Gateway": "172.17.0.1",        "IPAddress": "172.17.0.2",        "IPPrefixLen": 16,        "IPv6Gateway": "",        "GlobalIPv6Address": "",        "GlobalIPv6PrefixLen": 0,        "DNSNames": null    &#125;&#125;&#123;    "bridge": &#123;        "IPAMConfig": null,        "Links": null,        "Aliases": null,        "MacAddress": "ca:15:c6:dd:25:12",        "DriverOpts": null,        "GwPriority": 0,        "NetworkID": "673dc66222dbbb9d8a0f68bba2ca14b70a0e4d88355ae54de305639677d6b930",        "EndpointID": "95ccdc403058f65eb56164e803fb4adf65a7b94bb4f566ccfafa2c840528e698",        "Gateway": "172.17.0.1",        "IPAddress": "172.17.0.3",        "IPPrefixLen": 16,        "IPv6Gateway": "",        "GlobalIPv6Address": "",        "GlobalIPv6PrefixLen": 0,        "DNSNames": null    &#125;&#125;zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ # 查看 test_web1 的网络详情docker inspect -f '&#123;&#123;json .NetworkSettings.Networks&#125;&#125;' test_web1 | python3 -m json.tool# 查看 test_web2 的网络详情docker inspect -f '&#123;&#123;json .NetworkSettings.Networks&#125;&#125;' test_web2 | python3 -m json.tool^Czky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network lsNETWORK ID     NAME           DRIVER    SCOPE673dc66222db   bridge         bridge    localddc64a266dbf   host           host      local8196fc6221d1   net_web_chat   bridge    local550e6ae5e19e   none           null      localzky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network connect net_web_chat test_web1zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker network connect net_web_chat test_web2zky@zky-virtual-machine:~/Docker_Projects/test_web1/html$ docker exec -it test_web2 bashroot@d6d9810a3197:/# curl test_web1hello worldroot@d6d9810a3197:/# </code></pre>]]></content>
    
    
    <categories>
      
      <category>Docker学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker ubuntu nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【STM32】基于STM32CubeMX+CLion的STM32开发环境</title>
    <link href="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <url>/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>基于&nbsp;<strong>STM32CubeMX + CLion</strong>&nbsp;的 STM32 开发环境，是一种融合了 &ldquo;图形化配置效率&rdquo; 与 &ldquo;现代 IDE 开发体验&rdquo; 的嵌入式开发方案。它以 STM32CubeMX 的硬件配置自动化为基础，搭配 CLion 的智能代码编辑、调试能力，解决了传统 STM32 开发（如 Keil MDK）中 &ldquo;配置繁琐、代码提示弱、跨平台性差&rdquo; 的痛点，尤其适合习惯现代 C/C++ 开发流程、追求高效调试的开发者。</p><h2>1.1 核心工具定位与分工</h2><p>该环境的核心是 &ldquo;<strong>STM32CubeMX 负责 &ldquo;硬件配置与代码生成&rdquo;，CLion 负责 &ldquo;代码编写、编译与调试&rdquo;</strong>&nbsp;&rdquo;，两者通过标准化的工程文件联动，形成完整开发闭环：</p><table><thead><tr><th>工具</th><th>核心功能</th><th>解决的痛点</th></tr></thead><tbody><tr><td><strong>STM32CubeMX</strong></td><td>1. 图形化选择芯片型号、配置引脚（GPIO、SPI、UART 等）、时钟树、外设参数；2. 自动生成初始化代码（基于 HAL/LL 库）；3. 生成支持 CLion 的工程模板（如 Makefile/CMake）。</td><td>避免手动编写繁琐的外设初始化代码、时钟树计算，降低硬件配置出错率。</td></tr><tr><td><strong>CLion</strong></td><td>1. 智能代码编辑（语法高亮、自动补全、重构、跳转）；2. 集成编译工具链（ARM-GCC）；3. 支持硬件调试（配合 OpenOCD/J-Link）；4. 跨平台（Windows/macOS/Linux）。</td><td>解决传统 IDE（如 Keil）代码提示弱、不支持跨平台、调试界面不直观的问题。</td></tr></tbody></table><h2>1.2 环境搭建核心依赖</h2><p>要让两者联动，需额外配置 &ldquo;编译工具链&rdquo; 和 &ldquo;调试工具&rdquo;，形成完整链路：</p><ol><li><p><strong>编译工具链：ARM GNU Toolchain</strong>用于将 C/C++ 代码编译为 STM32 可执行的二进制文件（.elf/.hex），需下载对应平台的工具链（如<code>arm-none-eabi-gcc</code>）并配置环境变量。</p></li><li><p><strong>调试工具：OpenOCD + 调试器</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;OpenOCD&lt;/strong&gt;：开源调试工具，负责与硬件调试器（如 J-Link、ST-Link）通信，实现 &amp;ldquo;下载程序、断点调试、查看寄存器&amp;rdquo; 等功能；&lt;/li&gt;&lt;li&gt;&lt;strong&gt;硬件调试器&lt;/strong&gt;：常用 ST 官方的 ST-Link（低成本，支持大部分 STM32）或 Segger 的 J-Link（兼容性更强，支持复杂调试）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;驱动支持&lt;/strong&gt;安装调试器的 USB 驱动（如 ST-Link 驱动、J-Link 驱动），确保电脑能识别硬件。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h2>1.3 典型开发流程（以 &ldquo;GPIO 点亮 LED&rdquo; 为例）</h2><ol><li><p><strong>Step 1：STM32CubeMX 配置与代码生成</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;打开 STM32CubeMX，选择目标芯片（如 STM32F103C8T6）；&lt;/li&gt;&lt;li&gt;配置硬件：&lt;ul&gt;&lt;li&gt;引脚：将 PA5（LED 引脚）设为 &amp;ldquo;GPIO_Output&amp;rdquo;；&lt;/li&gt;&lt;li&gt;时钟树：将 HSE（外部高速时钟）设为 8MHz，系统时钟（SYSCLK）设为 72MHz；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;工程配置：&lt;ul&gt;&lt;li&gt;选择 &amp;ldquo;Toolchain/IDE&amp;rdquo; 为 &amp;ldquo;Makefile&amp;rdquo;（CLion 支持 Makefile/CMake，Makefile 更简单）；&lt;/li&gt;&lt;li&gt;勾选 &amp;ldquo;Generate peripheral initialization as a pair of .c/.h files per peripheral&amp;rdquo;（模块化代码）；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;点击 &amp;ldquo;Generate Code&amp;rdquo; 生成工程文件（包含 HAL 库、初始化代码、Makefile）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Step 2：CLion 导入工程并编写业务代码&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;打开 CLion，选择 &amp;ldquo;Open&amp;rdquo; 导入 STM32CubeMX 生成的工程文件夹；&lt;/li&gt;&lt;li&gt;CLion 会自动识别 Makefile，无需额外配置编译规则；&lt;/li&gt;&lt;li&gt;在&lt;code&gt;main.c&lt;/code&gt;的&lt;code&gt;while(1)&lt;/code&gt;循环中添加 LED 翻转代码：&lt;pre&gt;</code></pre><p><code>HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5); // 翻转PA5电平<br>HAL_Delay(500); // 延时500ms<br></code></pre><br></li><br></ul><br></li><br><li><br><p><strong>Step 3：编译与下载</strong></p></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;点击 CLion 右上角的 &amp;ldquo;Build&amp;rdquo;（或快捷键&lt;code&gt;Ctrl+F9&lt;/code&gt;），调用 ARM-GCC 编译工程，生成&lt;code&gt;*.elf&lt;/code&gt;文件；&lt;/li&gt;&lt;li&gt;连接调试器（如 ST-Link）到 STM32 开发板，在 CLion 中配置调试：&lt;ul&gt;&lt;li&gt;进入 &amp;ldquo;Run&amp;gt; Edit Configurations&amp;rdquo;，选择 &amp;ldquo;OpenOCD Download &amp;amp; Run&amp;rdquo;；&lt;/li&gt;&lt;li&gt;选择对应芯片的 OpenOCD 配置文件（如&lt;code&gt;stm32f1x.cfg&lt;/code&gt;，通常 OpenOCD 已自带）；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;点击 &amp;ldquo;Debug&amp;rdquo;（或快捷键&lt;code&gt;Shift+F9&lt;/code&gt;），CLion 会通过 OpenOCD 将程序下载到 STM32，并进入调试模式。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Step 4：调试与验证&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;在&lt;code&gt;HAL_GPIO_TogglePin&lt;/code&gt;行设置断点，调试时程序会暂停在断点处；&lt;/li&gt;&lt;li&gt;通过 CLion 的调试面板查看 &amp;ldquo;GPIO 寄存器状态&amp;rdquo;&amp;ldquo;变量值&amp;rdquo;，或单步执行（F8）观察 LED 翻转逻辑；&lt;/li&gt;&lt;li&gt;调试完成后，点击 &amp;ldquo;Run&amp;rdquo;（或快捷键&lt;code&gt;Shift+F10&lt;/code&gt;）直接运行程序，LED 会以 500ms 周期闪烁。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h2>1.4 该方案的优势与局限性</h2><h4>优势：</h4><ol><li><strong>开发体验现代</strong>：CLion 的智能补全（如输入<code>HAL_GPIO_</code>会自动提示所有 GPIO 相关函数）、代码跳转（点击函数名跳转到定义）大幅提升编码效率；</li><li><strong>跨平台自由</strong>：Windows/macOS/Linux 均可使用，解决了 Keil MDK 仅支持 Windows 的问题（尤其适合 Mac 用户）；</li><li><strong>开源生态友好</strong>：依赖的 ARM-GCC、OpenOCD 均为开源工具，无需付费（对比 Keil 需要 license）；</li><li><strong>代码可移植性强</strong>：STM32CubeMX 生成的 HAL 库代码标准化，切换芯片时只需重新配置生成，业务代码基本无需修改。</li></ol><h4>局限性：</h4><ol><li><strong>调试功能不如 Keil 全面</strong>：对某些复杂调试需求（如 Trace 跟踪、功耗分析）支持较弱，Keil MDK 在 STM32 专属调试功能上更成熟；</li><li><strong>入门门槛略高</strong>：需手动配置工具链、OpenOCD，对新手而言比 &ldquo;一键安装 Keil&rdquo; 更复杂；</li><li><strong>部分老芯片支持有限</strong>：STM32CubeMX 对非常早期的 STM32 型号（如 STM32F100）支持不足，更适合近 5 年推出的芯片（如 F1/F4/F7/H7/L4 系列）。</li></ol><h2>1.5 适用人群</h2><ul><li>习惯现代 C/C++ 开发（如使用过 VS Code、Qt Creator）的开发者；</li><li>需要跨平台开发（如在 Mac 上开发 STM32）的用户；</li><li>追求开源工具链、避免商业软件依赖的团队或个人；</li><li>以 HAL 库为主要开发框架的 STM32 项目（若用标准库，STM32CubeMX 支持有限，需手动适配）。</li></ul><p>综上，STM32CubeMX+CLion 是一套 &ldquo;高效、现代、跨平台&rdquo; 的 STM32 开发方案，尤其适合对开发体验有要求的中高级开发者，或需要摆脱 Keil 依赖的场景。</p><h2>二、工程创建</h2><h2>2.1 使用STM32CubeMX创建工程cmake工程，其他的STM32工程的配置与keil的配置一样，主要是针对工程配置。</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/976476982fcf4a32aa2f0713f5498005.png"></p><h2>2.2 工程配置</h2><p>选择cmake</p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/00fa9283c9034f8db2861ee7bb1d3cad.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/9b1fae63c8694579a181dfaaab3292ea.png"></p><h2>2.3 导入工程，打开文件夹</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/a65bb1a130cb483599e1f347cab9707f.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ddfd049553554b93b7b5f5c53986231c.png"></p><p>取消勾选默认的Debug</p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/79864355c57547aebfbde88a9a31aa2a.png"></p><p>勾选Debug预设</p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/174cc6f874224a3eacbb20ddc19cc7ee.png"></p><h2>2.4&nbsp;交换位置</h2><pre><code># Core project settingsproject(${CMAKE_PROJECT_NAME})message("Build type: " ${CMAKE_BUILD_TYPE})# Enable CMake support for ASM and C languagesenable_language(C ASM)</code></pre><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/d3104c0d221a42f0a7ac07252cf93b54.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/e32d82b51a81463f945e322f6733bf88.png"></p><h2>2.5 下载工具链</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Download OpenOCD for Windows" href="https://gnutoolchains.com/arm-eabi/openocd/" title="Download OpenOCD for Windows">Download OpenOCD for Windows</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Arm GNU 工具链下载 – Arm Developer" href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads" title="Arm GNU 工具链下载 – Arm Developer">Arm GNU 工具链下载 &ndash; Arm Developer</a></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/44ed862384754fc79f0fb1087897de95.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/975d6caa90984533b6517e8acdb0b456.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/89cdfdc27ed640d99cb1cdd3fbbc90a2.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/b92561fd818a437894e4fb5ad683bc8d.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/25ba40bacfe74e9da7be0960541d6285.png"></p><h2>2.6 进入设置，配置工具链</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/7257d8c247a6410baf065043ec981871.png"></p><h2>2.7 配置OpenOCD</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/7ff2e18930874dd1833d7010c8a8d1b0.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/7e3ccf1b427248bda799b981a5714a08.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/cfcce9d32cfc4862aac7963c0061c536.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/088e32fc5e9745d7b76fe55b85444896.png"></p><p>选择适合stm32f103c8t6的下载配置</p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/8eed9bcf5f864e0b97615a853593df88.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/42f1b53ff6204012926751816e8aa4ec.png"></p><h2>2.8 先编译测试</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/e1a06c3994764f3b915027ff1b86b1ca.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/fd31ca50cab24aa990fc5bcb0217870b.png"></p><h1>三、编写、编译代码</h1><h2>3.1 测试烧写，注意下载STlink驱动，烧写成功</h2><pre><code class="language-bash">    HAL_GPIO_WritePin(GPIOC,GPIO_PIN_13,GPIO_PIN_RESET);    HAL_Delay(100);    HAL_GPIO_WritePin(GPIOC,GPIO_PIN_13,GPIO_PIN_SET);    HAL_Delay(100);</code></pre><pre><code class="language-bash">D:\DevEnv\CLion_Toolchain\openocd-v0.12.0-i686-w64-mingw32\bin\openocd.exe -s D:\DevEnv\CLion_Toolchain\openocd-v0.12.0-i686-w64-mingw32\share\openocd\scripts -f D:\DevEnv\CLion_Toolchain\stm32f1_stlink.cfg -c "tcl_port disabled" -c "gdb_port disabled" -c "tcl_port disabled" -c "program \"E:/MDK_Projects/STM32CubeMX_Projects/STM32MX_Examples_Workspaces/clion_test/build/Debug/clion_test.elf\"" -c reset -c shutdown[0m[0mOpen On-Chip Debugger 0.12.0 (2023-01-14-23:37)Licensed under GNU GPL v2For bug reports, read        http://openocd.org/doc/doxygen/bugs.htmlInfo : auto-selecting first available session transport "hla_swd". To override use 'transport select &lt;transport&gt;'.Info : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWDnone separateInfo : clock speed 1000 kHzInfo : STLINK V2J45S7 (API v2) VID:PID 0483:3748Info : Target voltage: 3.225841Info : [stm32f1x.cpu] Cortex-M3 r1p1 processor detectedInfo : [stm32f1x.cpu] target has 6 breakpoints, 4 watchpointsInfo : gdb port disabled[stm32f1x.cpu] halted due to debug-request, current mode: ThreadxPSR: 0x01000000 pc: 0x08000188 msp: 0x20000dc0** Programming Started **Info : device id = 0x20036410Info : flash size = 64 KiBWarn : Adding extra erase range, 0x0800123c .. 0x080013ff** Programming Finished **shutdown command invoked</code></pre><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/dd636779375c42bbaf770bfc0b9439df.png"></p><h2>3.2 添加mycode文件夹和bsp_led组件</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/d3f5327111004f4e9021df3ee87e15c5.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/edfb3e4a5a5446c091629f6be5909a4b.png"></p><pre><code class="language-bash">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "../../mycode/bsp_led/bsp_led.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  MX_GPIO_Init();  /* USER CODE BEGIN 2 */  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */    led_change();  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *//* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><pre><code class="language-bash">//// Created by zky on 2025/10/2.//#include "bsp_led.h"void led_change(void){    HAL_GPIO_WritePin(GPIOC,GPIO_PIN_13,GPIO_PIN_RESET);    HAL_Delay(50);    HAL_GPIO_WritePin(GPIOC,GPIO_PIN_13,GPIO_PIN_SET);    HAL_Delay(50);}</code></pre><h2>3.3 添加cmake路径</h2><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/a8982da53abe426f89f0f06fd159cb43.png"></p><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/221967e35bd048998ce260eafaf46c37.png"></p><h3>（1）添加自定义的头文件路径和源文件路径</h3><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/3c91ffcd4fef47a0a2abe235e1cfef70.png"></p><pre><code class="language-bash">cmake_minimum_required(VERSION 3.22)## This file is generated only once,# and is not re-generated if converter is called multiple times.## User is free to modify the file as much as necessary## Setup compiler settingsset(CMAKE_C_STANDARD 11)set(CMAKE_C_STANDARD_REQUIRED ON)set(CMAKE_C_EXTENSIONS ON)# Define the build typeif(NOT CMAKE_BUILD_TYPE)    set(CMAKE_BUILD_TYPE "Debug")endif()# Set the project nameset(CMAKE_PROJECT_NAME clion_test)# Include toolchain fileinclude("cmake/gcc-arm-none-eabi.cmake")# Enable compile command to ease indexing with e.g. clangdset(CMAKE_EXPORT_COMPILE_COMMANDS TRUE)# Core project settingsproject(${CMAKE_PROJECT_NAME})message("Build type: " ${CMAKE_BUILD_TYPE})# Enable CMake support for ASM and C languagesenable_language(C ASM)# Create an executable object typeadd_executable(${CMAKE_PROJECT_NAME}        mycode/bsp_led/bsp_led.h        mycode/bsp_led/bsp_led.c)# Add STM32CubeMX generated sourcesadd_subdirectory(cmake/stm32cubemx)# Link directories setuptarget_link_directories(${CMAKE_PROJECT_NAME} PRIVATE    # Add user defined library search paths)# Add sources to executabletarget_sources(${CMAKE_PROJECT_NAME} PRIVATE    # Add user sources here        mycode/bsp_led/bsp_led.c)# Add include pathstarget_include_directories(${CMAKE_PROJECT_NAME} PRIVATE    # Add user defined include paths        mycode/bsp_led)# Add project symbols (macros)target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE    # Add user defined symbols)# Add linked librariestarget_link_libraries(${CMAKE_PROJECT_NAME}    stm32cubemx    # Add user defined libraries)</code></pre><h3>（2）编译成功，已经识别</h3><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/3819a1ad02ed47dd85072dd83ede68d1.png"></p><h1>四、实验效果</h1><p><img src="/2025/10/02/%E3%80%90MCU%E3%80%91%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX+CLion%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/65fa0afac3d6452fbf3c62a8c4ebc95c.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>单片机 stm32 嵌入式硬件 CLion stm32CubeMX</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【NAS】斐讯N1盒子刷Armbain</title>
    <link href="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/"/>
    <url>/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><h2>1.1&nbsp;<strong>斐讯 N1 的硬件参数</strong></h2><p>产品类型：家庭网络存储，云存储</p><p>处理器：Amlogic S905D Cortex-A53，Mali-450 GPU</p><p>内存：RAM 2GB, ROM 8GB</p><p>接口：USB 2.0 * 2、HDMI * 1、RJ45 * 1（千兆网口）</p><p>无线连接：支持2.4G/5G WiFi，蓝牙BT 4.1 BLE低功耗</p><p>视频输出分辨率：最高支持到 4K 60 帧硬件解码</p><p>电源接口：12V/2A</p><p>尺寸与重量：产品尺寸为110mm x 110mm x 40mm，产品重量约为0.248kg</p><h1>二、详细步骤</h1><h2>2.1 下载系统镜像</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Releases · ophub/amlogic-s9xxx-armbian" href="https://github.com/ophub/amlogic-s9xxx-armbian/releases/" title="Releases · ophub/amlogic-s9xxx-armbian">Releases &middot; ophub/amlogic-s9xxx-armbian</a></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/fd0ddf6397c84bfc8bf6cf1bf7dd5347.png"></p><p>(1)这些 Armbian 版本的核心区别是<strong>底层依赖的 Debian/Ubuntu 发行版分支不同</strong>（部分是针对特定场景的定制版），以下逐个解析：</p><h3>1.&nbsp;<code>Armbian_trixie_save_2025.09</code></h3><ul><li><code>trixie</code>&nbsp;是&nbsp;<strong>Debian Testing（测试版）</strong>&nbsp;的代号。</li><li>特点：软件版本较新（处于 &ldquo;稳定版候选&rdquo; 阶段），但稳定性略低于 Debian 正式稳定版；适合需要 &ldquo;较新功能 + 一定稳定性&rdquo; 的开发 / 尝鲜场景。</li></ul><h3>2.&nbsp;<code>Armbian_noble_save_2025.09</code></h3><ul><li><code>noble</code>&nbsp;是&nbsp;<strong>Ubuntu 24.04 LTS</strong>（2024 年长期支持版）的代号。</li><li>特点：继承 Ubuntu 生态（软件新、桌面友好、社区支持广），且是 LTS 版本（支持到 2030 年左右）；适合开发、桌面使用或需要长期支持的场景。</li></ul><h3>3.&nbsp;<code>Armbian_jammy_save_2025.09</code></h3><ul><li><code>jammy</code>&nbsp;是&nbsp;<strong>Ubuntu 22.04 LTS</strong>（2022 年长期支持版）的代号。</li><li>特点：目前 Ubuntu 生态中<strong>使用最广泛的 LTS 版本</strong>（支持到 2027 年），稳定性和软件生态都很成熟；适合服务器、桌面等 &ldquo;成熟且长期运行&rdquo; 的场景。</li></ul><h3>4.&nbsp;<code>Armbian_bullseye_save_2025.09</code></h3><ul><li><code>bullseye</code>&nbsp;是&nbsp;<strong>Debian 11</strong>（稳定版）的代号。</li><li>特点：Debian 稳定版的典型代表，软件经过充分验证，<strong>稳定性极致</strong>；适合生产环境（如服务器、嵌入式设备长期无人值守运行）。</li></ul><h3>5.&nbsp;<code>Armbian_bookworm_save_2025.09</code></h3><ul><li><code>bookworm</code>&nbsp;是&nbsp;<strong>Debian 12</strong>（稳定版）的代号。</li><li>特点：Debian 最新稳定版（2023 年发布），平衡了 &ldquo;较新软件版本&rdquo; 和 &ldquo;Debian 级稳定性&rdquo;；是当前 Debian 生态的主力稳定版，适合多数通用场景。</li></ul><h3>6.&nbsp;<code>Armbian_HassloSupervisor_bookworm_save_2025.09</code></h3><ul><li>这是&nbsp;<strong>专用定制版</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;code&gt;HassloSupervisor&lt;/code&gt;&amp;nbsp;指向&amp;nbsp;&lt;code&gt;Home Assistant Supervisor&lt;/code&gt;（智能家居系统 Home Assistant 的核心组件，负责管理插件、容器等）；&lt;/li&gt;&lt;li&gt;&lt;code&gt;bookworm&lt;/code&gt;&amp;nbsp;说明底层基于 Debian 12。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;特点：为 &amp;ldquo;在 ARM 设备上部署 Home Assistant（智能家居中枢）&amp;rdquo; 专门优化，预装相关依赖，方便快速搭建智能家居系统。&lt;/li&gt;</code></pre></ul><h3>选择逻辑总结</h3><ul><li>追求<strong>极致稳定 + 生产环境</strong>：选&nbsp;<code>bullseye</code>（Debian 11）或&nbsp;<code>bookworm</code>（Debian 12）系；</li><li>想要<strong>Ubuntu 生态 + 长期支持</strong>：选&nbsp;<code>jammy</code>（Ubuntu 22.04 LTS）或&nbsp;<code>noble</code>（Ubuntu 24.04 LTS）系；</li><li>尝鲜<strong>较新功能</strong>：选&nbsp;<code>trixie</code>（Debian Testing）系；</li><li>部署<strong>智能家居（Home Assistant）</strong>：选&nbsp;<code>HassloSupervisor_bookworm</code>&nbsp;定制版</li></ul><p>(2)选择基于debian12的Armbian，根据芯片选对应的镜像</p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/1fcec124410e4f69ae59993dd5c293a5.png"></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/827fa3e99c414b889b397cc2b672fa9f.png"></p><h2>2.2 制作系统引导U盘，会格式化U盘</h2><p>使用rufus写入镜像</p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/28fe0c1edc0247dbb7c48e6c5fb8a33c.png"></p><h2>2.3 连接网络（wifi或者路由器）获得IP地址，提示连续点击打开adb功能</h2><h2><img alt="" height="568" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/50a41fa1c96b44f7a6ae47e49f05cb98.png" width="1122" /></h2><h2><img alt="" height="390" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/d8649bfe08f44afba1f665b629b69075.png" width="596" /></h2><h2>2.4 如果拿到手是原电视机盒子的系统，同时固件版本为2.19，可以直接刷机（按2），否则从1开始。输入IP地址，运行run脚本使用官方降级工具按2进行降级，如果出现等待连接，插上盒子的usb与电脑连接，进行按任意键继续，等待成功就会n1盒子就自动重启了，如何等待它自己重新连接上网络</h2><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/63e640ecc499411fa0bd59d840ea42a4.png"></p><h2><img alt="" height="400" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/faca02fafa354358ad45002fce75776d.png" width="743" /></h2><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/8c65dd69a0044e768b221d010c2cd68c.png"></p><h2><img alt="" height="517" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/04858b260aa64c01a358b99268173b21.png" width="785" /></h2><h2>2.5 现在直接把引导盘插到N1的USB（任意一个），安卓的插靠近HDMI的那个，其他的键盘，显示器插上，然后运行脚本，输入盒子的IP，然后就会自动重启进入u盘的引导系统，现在就是U盘优先启动模式了</h2><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/f647b89ff1904178b4fb159f39c6c67a.png"></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/b9f830c347ec4b97954d730cdf691fc1.png"></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/86cc974c983d48f0a53b2d7d55df92e8.png"></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/e842a491b33f4ccebac0f8e4cd65d6a1.png"></p><h2>2.6&nbsp;等待跑码一会儿，正常引导进入系统界面，默认用户: root，自行设置 root 的密码，然后选择bash风格的命令行</h2><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/509e5766d2974f4cb5baea0ac432df82.png"></p><h2>2.7&nbsp;将U盘里的系统写入emmc，使用命令 armbian-install，一定要选101的n1</h2><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/b4f2fa3609024358870e350e79847f35.png"></p><p><img src="/2025/09/30/%E3%80%90NAS%E3%80%91%E6%96%90%E8%AE%AFN1%E7%9B%92%E5%AD%90%E5%88%B7Armbain/6a354d407db2427f92ede54d0a8f57f2.png"></p><h2>2.8 可以根据自己的需求，修改静态地址，使用命令 armbian-config</h2><h2>2.9&nbsp;修改软件源使用 armbian-apt 命令选择合适的软件源</h2><p>apt update</p><h2>2.10 安装软件</h2><pre><code class="language-bash">root@armbian:/home/zky# armbian-software[ STEPS ] Start installing the necessary dependencies...Hit:1 http://ports.ubuntu.com noble InRelease                                                Hit:2 http://ports.ubuntu.com noble-security InRelease                                       Hit:3 https://github.armbian.com/configng stable InRelease                                   Hit:4 http://ports.ubuntu.com noble-updates InRelease                                        Hit:5 http://ports.ubuntu.com noble-backports InReleaseHit:6 https://mirror.iscas.ac.cn/armbian noble InReleaseReading package lists... DoneReading package lists... DoneBuilding dependency tree... DoneReading state information... Donecurl is already the newest version (8.5.0-2ubuntu10.6).tar is already the newest version (1.35+dfsg-3build1).ca-certificates is already the newest version (20240203).The following additional packages will be installed:  git-man libnftables1 libnss-myhostname libpam-systemd libsystemd-shared libsystemd0 libudev1 python3-software-properties systemd-dev systemd-resolved systemd-sysv udevSuggested packages:  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-email git-gui gitk gitweb git-cvs git-mediawiki git-svn systemd-container systemd-homed systemd-userdbd systemd-boot libtss2-esys-3.0.2-0 libtss2-mu-4.0.1-0 libtss2-rc0 libtss2-tcti-device0Recommended packages:  dns-root-data networkd-dispatcher libnss-systemd systemd-hwe-hwdbThe following NEW packages will be installed:  apt-transport-https cpu-checker dmidecode dnsmasq-base libnftables1 net-toolsThe following packages will be upgraded:  coreutils git git-man libnss-myhostname libpam-systemd libsystemd-shared libsystemd0 libudev1 python3-software-properties software-properties-common systemd systemd-dev systemd-resolved systemd-sysv udev15 upgraded, 6 newly installed, 0 to remove and 77 not upgraded.Need to get 6,064 kB/15.9 MB of archives.After this operation, 3,471 kB of additional disk space will be used.Get:1 http://ports.ubuntu.com noble-updates/main arm64 dmidecode arm64 3.5-3ubuntu0.1 [61.1 kB]Get:2 http://ports.ubuntu.com noble/main arm64 libnftables1 arm64 1.0.9-1build1 [352 kB]Get:3 http://ports.ubuntu.com noble-updates/universe arm64 apt-transport-https all 2.8.3 [3,970 B]Get:4 http://ports.ubuntu.com noble/main arm64 cpu-checker arm64 0.7-1.3build2 [6,134 B]Get:5 http://ports.ubuntu.com noble-updates/main arm64 dnsmasq-base arm64 2.90-2ubuntu0.1 [366 kB]Get:6 http://ports.ubuntu.com noble-security/main arm64 git-man all 1:2.43.0-1ubuntu7.3 [1,100 kB]Get:7 http://ports.ubuntu.com noble-security/main arm64 git arm64 1:2.43.0-1ubuntu7.3 [3,774 kB]Get:8 http://ports.ubuntu.com noble-security/main arm64 net-tools arm64 2.10-0.1ubuntu4.4 [207 kB]                                                                                                                                                                           Get:9 http://ports.ubuntu.com noble-updates/main arm64 software-properties-common all 0.99.49.3 [14.4 kB]                                                                                                                                                                    Get:10 http://ports.ubuntu.com noble-updates/main arm64 python3-software-properties all 0.99.49.3 [29.9 kB]                                                                                                                                                                  Get:11 http://ports.ubuntu.com noble-updates/universe arm64 libnss-myhostname arm64 255.4-1ubuntu8.11 [149 kB]                                                                                                                                                               Fetched 6,064 kB in 8s (785 kB/s)                                                                                                                                                                                                                                            (Reading database ... 34596 files and directories currently installed.)Preparing to unpack .../coreutils_9.4-3ubuntu6.1_arm64.deb ...Unpacking coreutils (9.4-3ubuntu6.1) over (9.4-3ubuntu6) ...Setting up coreutils (9.4-3ubuntu6.1) ...(Reading database ... 34596 files and directories currently installed.)Preparing to unpack .../0-systemd-sysv_255.4-1ubuntu8.11_arm64.deb ...Unpacking systemd-sysv (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../1-libpam-systemd_255.4-1ubuntu8.11_arm64.deb ...Unpacking libpam-systemd:arm64 (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../2-systemd-dev_255.4-1ubuntu8.11_all.deb ...Unpacking systemd-dev (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../3-systemd-resolved_255.4-1ubuntu8.11_arm64.deb ...Unpacking systemd-resolved (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../4-libsystemd-shared_255.4-1ubuntu8.11_arm64.deb ...Unpacking libsystemd-shared:arm64 (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../5-libsystemd0_255.4-1ubuntu8.11_arm64.deb ...Unpacking libsystemd0:arm64 (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Setting up libsystemd0:arm64 (255.4-1ubuntu8.11) ...(Reading database ... 34596 files and directories currently installed.)Preparing to unpack .../systemd_255.4-1ubuntu8.11_arm64.deb ...Unpacking systemd (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../udev_255.4-1ubuntu8.11_arm64.deb ...Unpacking udev (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Preparing to unpack .../libudev1_255.4-1ubuntu8.11_arm64.deb ...Unpacking libudev1:arm64 (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Setting up libudev1:arm64 (255.4-1ubuntu8.11) ...Selecting previously unselected package dmidecode.(Reading database ... 34596 files and directories currently installed.)Preparing to unpack .../00-dmidecode_3.5-3ubuntu0.1_arm64.deb ...Unpacking dmidecode (3.5-3ubuntu0.1) ...Selecting previously unselected package libnftables1:arm64.Preparing to unpack .../01-libnftables1_1.0.9-1build1_arm64.deb ...Unpacking libnftables1:arm64 (1.0.9-1build1) ...Selecting previously unselected package apt-transport-https.Preparing to unpack .../02-apt-transport-https_2.8.3_all.deb ...Unpacking apt-transport-https (2.8.3) ...Selecting previously unselected package cpu-checker.Preparing to unpack .../03-cpu-checker_0.7-1.3build2_arm64.deb ...Unpacking cpu-checker (0.7-1.3build2) ...Selecting previously unselected package dnsmasq-base.Preparing to unpack .../04-dnsmasq-base_2.90-2ubuntu0.1_arm64.deb ...Unpacking dnsmasq-base (2.90-2ubuntu0.1) ...Preparing to unpack .../05-git-man_1%3a2.43.0-1ubuntu7.3_all.deb ...Unpacking git-man (1:2.43.0-1ubuntu7.3) over (1:2.43.0-1ubuntu7.2) ...Preparing to unpack .../06-git_1%3a2.43.0-1ubuntu7.3_arm64.deb ...Unpacking git (1:2.43.0-1ubuntu7.3) over (1:2.43.0-1ubuntu7.2) ...Selecting previously unselected package net-tools.Preparing to unpack .../07-net-tools_2.10-0.1ubuntu4.4_arm64.deb ...Unpacking net-tools (2.10-0.1ubuntu4.4) ...Preparing to unpack .../08-software-properties-common_0.99.49.3_all.deb ...Unpacking software-properties-common (0.99.49.3) over (0.99.49.2) ...Preparing to unpack .../09-python3-software-properties_0.99.49.3_all.deb ...Unpacking python3-software-properties (0.99.49.3) over (0.99.49.2) ...Preparing to unpack .../10-libnss-myhostname_255.4-1ubuntu8.11_arm64.deb ...Unpacking libnss-myhostname:arm64 (255.4-1ubuntu8.11) over (255.4-1ubuntu8.6) ...Setting up net-tools (2.10-0.1ubuntu4.4) ...Setting up libnftables1:arm64 (1.0.9-1build1) ...Setting up apt-transport-https (2.8.3) ...Setting up systemd-dev (255.4-1ubuntu8.11) ...Setting up dnsmasq-base (2.90-2ubuntu0.1) ...Setting up python3-software-properties (0.99.49.3) ...Setting up libsystemd-shared:arm64 (255.4-1ubuntu8.11) ...Setting up libnss-myhostname:arm64 (255.4-1ubuntu8.11) ...Setting up cpu-checker (0.7-1.3build2) ...Setting up git-man (1:2.43.0-1ubuntu7.3) ...Setting up dmidecode (3.5-3ubuntu0.1) ...Setting up systemd (255.4-1ubuntu8.11) ...Setting up software-properties-common (0.99.49.3) ...Setting up udev (255.4-1ubuntu8.11) ...Setting up git (1:2.43.0-1ubuntu7.3) ...Setting up systemd-resolved (255.4-1ubuntu8.11) ...Setting up systemd-sysv (255.4-1ubuntu8.11) ...Setting up libpam-systemd:arm64 (255.4-1ubuntu8.11) ...Processing triggers for libc-bin (2.39-0ubuntu8.4) ...Processing triggers for man-db (2.12.0-4build2) ...Processing triggers for dbus (1.14.10-4ubuntu4.1) ...Processing triggers for initramfs-tools (0.142ubuntu25.5) ...update-initramfs: Not updating initramfs.[ STEPS ] Start selecting software [ Current system: ubuntu/noble ]...───────────────────────────────────────────────────────────────────ID    NAME                           STATE           MANAGE         ───────────────────────────────────────────────────────────────────101   Docker                         not-installed   install        102   Portainer                      not-installed   install        103   Yacht                          not-installed   install        104   Transmission                   not-installed   install        105   qBittorrent                    not-installed   install        106   NextCloud                      not-installed   install        107   Jellyfin                       not-installed   install        108   HomeAssistant                  not-installed   install        109   Kodbox                         not-installed   install        110   CouchPotato                    not-installed   install        111   Sonarr                         not-installed   install        112   Radarr                         not-installed   install        113   Syncthing                      not-installed   install        114   FileBrowser                    not-installed   install        115   Heimdall                       not-installed   install        116   Node-RED                       not-installed   install        117   Mosquitto                      not-installed   install        118   OpenWrt                        not-installed   install        119   Netdata                        not-installed   install        120   XunLei                         not-installed   install        121   Docker-Headless                not-installed   install        122   Navidrome                      not-installed   install        123   Alist                          not-installed   install        124   QingLong                       not-installed   install        125   ChatGPT-Next-Web               not-installed   install        ───────────────────────────────────────────────────────────────────ID    NAME                           STATE           MANAGE         ───────────────────────────────────────────────────────────────────201   Desktop                        not-installed   install        202   Firefox                        not-installed   install        203   VLC                            not-installed   install        204   MPV                            not-installed   install        205   GIMP                           not-installed   install        206   Krita                          not-installed   install        207   LibreOffice                    not-installed   install        208   Shotcut                        not-installed   install        209   Kdenlive                       not-installed   install        210   Thunderbird                    not-installed   install        211   Evolution                      not-installed   install        212   Gwenview                       not-installed   install        213   Eog                            not-installed   install        214   VisualStudioCode               not-installed   install        215   Gedit                          not-installed   install        216   Flameshot                      not-installed   install        ───────────────────────────────────────────────────────────────────ID    NAME                           STATE           MANAGE         ───────────────────────────────────────────────────────────────────301   Frps                           not-installed   install        302   Frpc                           not-installed   install        303   NPS                            not-installed   install        304   NPC                            not-installed   install        305   Plex                           not-installed   install        306   Emby-Server                    not-installed   install        307   KVM                            not-installed   install        309   CasaOS                         not-installed   install        310   ArozOS                         not-installed   install        ───────────────────────────────────────────────────────────────────[ OPTIONS ] Please Input Software ID:</code></pre><p><strong>参考链接：</strong></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="最新斐讯N1刷OpenWRT软路由系统_超详细教程！N1主路由+旁路由设置_N1刷路由器-2560x1440_哔哩哔哩_bilibili" href="https://www.bilibili.com/video/BV18u411v7aK/?buvid=XXD4152D4B550B1BA46A7C63FD018494819BE&amp;from_spmid=main.my-history.0.0&amp;is_story_h5=false&amp;mid=2DKD8pBS2kfS9jkhBbHgxA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=cf57ddb0-f7a3-44d6-ba20-6d1d56daed8c&amp;share_source=QQ&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1759143213&amp;unique_k=4m5VBuH&amp;up_id=456970784&amp;vd_source=77379e487a8ecc7d4f9e65b8d9cd422d" title="最新斐讯N1刷OpenWRT软路由系统_超详细教程！N1主路由+旁路由设置_N1刷路由器-2560x1440_哔哩哔哩_bilibili">最新斐讯N1刷OpenWRT软路由系统_超详细教程！N1主路由+旁路由设置_N1刷路由器-2560x1440_哔哩哔哩_bilibili</a></p>]]></content>
    
    
    <categories>
      
      <category>Docker学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>斐讯n1 armbian 刷机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【蓝屏】DMA错误</title>
    <link href="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90%E8%93%9D%E5%B1%8F%E3%80%91DMA%E9%94%99%E8%AF%AF/"/>
    <url>/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90%E8%93%9D%E5%B1%8F%E3%80%91DMA%E9%94%99%E8%AF%AF/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>现象：</p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90%E8%93%9D%E5%B1%8F%E3%80%91DMA%E9%94%99%E8%AF%AF/96d33e7eaf0844af9de732ff523f41dc.jpeg"></p><p>安装微软商店的windbg工具可分析崩溃详细信息：</p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90%E8%93%9D%E5%B1%8F%E3%80%91DMA%E9%94%99%E8%AF%AF/9a52611f0ae741feaaee466b79be0ca1.png"></p><pre><code class="language-bash">************* Preparing the environment for Debugger Extensions Gallery repositories **************   ExtensionRepository : Implicit   UseExperimentalFeatureForNugetShare : true   AllowNugetExeUpdate : true   NonInteractiveNuget : true   AllowNugetMSCredentialProviderInstall : true   AllowParallelInitializationOfLocalRepositories : true   EnableRedirectToChakraJsProvider : false   -- Configuring repositories      ----&gt; Repository : LocalInstalled, Enabled: true      ----&gt; Repository : UserExtensions, Enabled: true&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Preparing the environment for Debugger Extensions Gallery repositories completed, duration 0.000 seconds************* Waiting for Debugger Extensions Gallery to Initialize **************&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Waiting for Debugger Extensions Gallery to Initialize completed, duration 0.078 seconds   ----&gt; Repository : UserExtensions, Enabled: true, Packages count: 0   ----&gt; Repository : LocalInstalled, Enabled: true, Packages count: 45Microsoft (R) Windows Debugger Version 10.0.27920.1001 AMD64Copyright (c) Microsoft Corporation. All rights reserved.Loading Dump File [C:\Windows\Minidump\091425-16968-01.dmp]Mini Kernel Dump File: Only registers and stack trace are availableSymbol search path is: srv*Executable search path is: Windows 10 Kernel Version 22621 MP (20 procs) Free x64Product: WinNt, suite: TerminalServer SingleUserTS PersonalKernel base = 0xfffff807`6c400000 PsLoadedModuleList = 0xfffff807`6d0134b0Debug session time: Sun Sep 14 19:24:18.420 2025 (UTC + 8:00)System Uptime: 0 days 0:10:55.112Loading Kernel Symbols..Press ctrl-c (cdb, kd, ntsd) or ctrl-break (windbg) to abort symbol loads that take too long.Run !sym noisy before .reload to track down problems loading symbols................................................................................................................................................................................................................................................................Loading User SymbolsLoading unloaded module list................For analysis of this file, run !analyze -vnt!KeBugCheckEx:fffff807`6c814df0 48894c2408      mov     qword ptr [rsp+8],rcx ss:0018:fffff807`6fd37e80=00000000000000e60: kd&gt; !analyze -vLoading Kernel Symbols..Press ctrl-c (cdb, kd, ntsd) or ctrl-break (windbg) to abort symbol loads that take too long.Run !sym noisy before .reload to track down problems loading symbols................................................................................................................................................................................................................................................................Loading User SymbolsLoading unloaded module list................********************************************************************************                                                                             **                        Bugcheck Analysis                                    **                                                                             ********************************************************************************DRIVER_VERIFIER_DMA_VIOLATION (e6)An illegal DMA operation was attempted by a driver being verified.Arguments:Arg1: 0000000000000026, IOMMU detected DMA violation.Arg2: 0000000000000000, Device Object of faulting device.Arg3: 000000000003ac30, Faulting information (usually faulting physical address).Arg4: 0000000000000005, Fault type (hardware specific).Debugging Details:------------------*** WARNING: Check Image - Checksum mismatch - Dump: 0x208038, File: 0x2080c6 - C:\ProgramData\Dbg\sym\BTHport.sys\2AFD096C202000\BTHport.sysKEY_VALUES_STRING: 1    Key  : Analysis.CPU.mSec    Value: 937    Key  : Analysis.Elapsed.mSec    Value: 88679    Key  : Analysis.IO.Other.Mb    Value: 0    Key  : Analysis.IO.Read.Mb    Value: 1    Key  : Analysis.IO.Write.Mb    Value: 34    Key  : Analysis.Init.CPU.mSec    Value: 437    Key  : Analysis.Init.Elapsed.mSec    Value: 328850    Key  : Analysis.Memory.CommitPeak.Mb    Value: 110    Key  : Analysis.Version.DbgEng    Value: 10.0.27920.1001    Key  : Analysis.Version.Description    Value: 10.2506.23.01 amd64fre    Key  : Analysis.Version.Ext    Value: 1.2506.23.1    Key  : Bugcheck.Code.LegacyAPI    Value: 0xe6    Key  : Bugcheck.Code.TargetModel    Value: 0xe6    Key  : Dump.Attributes.AsUlong    Value: 0x1008    Key  : Dump.Attributes.DiagDataWrittenToHeader    Value: 1    Key  : Dump.Attributes.ErrorCode    Value: 0x0    Key  : Dump.Attributes.KernelGeneratedTriageDump    Value: 1    Key  : Dump.Attributes.LastLine    Value: Dump completed successfully.    Key  : Dump.Attributes.ProgressPercentage    Value: 0    Key  : Failure.Bucket    Value: 0xE6_26_nt!IvtHandleInterrupt    Key  : Failure.Hash    Value: {11608481-d56e-58cc-4b64-17c92254d2f4}    Key  : Stack.Pointer    Value: ISR    Key  : WER.System.BIOSRevision    Value: 15.19.0.0BUGCHECK_CODE:  e6BUGCHECK_P1: 26BUGCHECK_P2: 0BUGCHECK_P3: 3ac30BUGCHECK_P4: 5FILE_IN_CAB:  091425-16968-01.dmpDUMP_FILE_ATTRIBUTES: 0x1008  Kernel Generated Triage DumpFAULTING_THREAD:  fffff8076d14d700BLACKBOXBSD: 1 (!blackboxbsd)BLACKBOXNTFS: 1 (!blackboxntfs)BLACKBOXPNP: 1 (!blackboxpnp)BLACKBOXWINLOGON: 1 (!blackboxwinlogon)CUSTOMER_CRASH_COUNT:  1PROCESS_NAME:  SystemSTACK_TEXT:  fffff807`6fd37e78 fffff807`6c92a4dd     : 00000000`000000e6 00000000`00000026 00000000`00000000 00000000`0003ac30 : nt!KeBugCheckExfffff807`6fd37e80 fffff807`6c912a2b     : fffff807`66622100 fffff807`00000001 fffff807`00000000 00000000`00000000 : nt!IvtHandleInterrupt+0x26dfffff807`6fd37f20 fffff807`6c715f4c     : fffff807`6d10d5d0 ffffd000`16657e70 fffff807`6d10d680 fffff807`6d10d5d0 : nt!HalpIommuInterruptRoutine+0x4bfffff807`6fd37f50 fffff807`6c816ecc     : fffff807`6fd28a70 fffff807`6d10d5d0 fffff807`6d14d700 fffff807`6c81e5e0 : nt!KiCallInterruptServiceRoutine+0x9cfffff807`6fd37f90 fffff807`6c817487     : 00000001`869230d4 00000000`00000000 00000001`867a5bd7 00000000`00000000 : nt!KiInterruptSubDispatchNoLock+0x11cfffff807`6fd289f0 fffff807`6c819dba     : 00000000`00000000 fffff807`662b5fc0 00000000`00000000 fffff807`6d14d700 : nt!KiInterruptDispatchNoLock+0x37fffff807`6fd28b80 00000000`00000000     : fffff807`6fd29000 fffff807`6fd22000 00000000`00000000 00000000`00000000 : nt!KiIdleLoop+0x5aSYMBOL_NAME:  nt!IvtHandleInterrupt+26dMODULE_NAME: ntIMAGE_NAME:  ntkrnlmp.exeIMAGE_VERSION:  10.0.22621.4317STACK_COMMAND: .process /r /p 0xfffff8076d149f40; .thread 0xfffff8076d14d700 ; kbBUCKET_ID_FUNC_OFFSET:  26dFAILURE_BUCKET_ID:  0xE6_26_nt!IvtHandleInterruptOSPLATFORM_TYPE:  x64OSNAME:  Windows 10FAILURE_ID_HASH:  {11608481-d56e-58cc-4b64-17c92254d2f4}Followup:     MachineOwner---------</code></pre><p>C:\ProgramData\Dbg\sym\BTHport.sys\2AFD096C202000\BTHport.sys</p><p>日志中提到&nbsp;<code>*** WARNING: Check Image - Checksum mismatch</code>，即该路径下的&nbsp;<code>BTHport.sys</code>&nbsp;符号文件与系统中实际运行的&nbsp;<code>BTHport.sys</code>&nbsp;驱动校验和不匹配。这通常意味着：</p><ul><li>系统中的蓝牙驱动可能已更新，但调试器下载的符号文件仍是旧版本；</li><li>或驱动文件被意外修改（如损坏、第三方软件替换等），导致符号匹配失败。</li></ul><p>这种不匹配可能会影响调试准确性，但不一定是之前&nbsp;<code>DRIVER_VERIFIER_DMA_VIOLATION</code>&nbsp;崩溃的直接原因，仅说明调试符号与实际驱动存在版本差异。</p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【png】【bmp】【jpg】图片格式解析</title>
    <link href="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/"/>
    <url>/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、 .png图片格式解析</h1><h2>1.1&nbsp; png简介</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PNG（Portable Network Graphics），便携式网络图形，是一种采用无损压缩算法的位图格式，支持索引、灰度、<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="RGB" href="https://baike.baidu.com/item/RGB/342517?fromModule=lemma_inlink" title="RGB">RGB</a>三种颜色方案以及Alpha通道等特性。&nbsp;[5]其设计目的是试图替代<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="GIF" href="https://baike.baidu.com/item/GIF/217778?fromModule=lemma_inlink" title="GIF">GIF</a>和<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="TIFF" href="https://baike.baidu.com/item/TIFF/2106?fromModule=lemma_inlink" title="TIFF">TIFF</a><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="文件格式" href="https://baike.baidu.com/item/%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/6156907?fromModule=lemma_inlink" title="文件格式">文件格式</a>，同时增加一些GIF文件格式所不具备的特性。PNG使用从LZ77派生的无损数据压缩算法，一般应用于JAVA程序、网页或S60程序中，原因是它<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="压缩比" href="https://baike.baidu.com/item/%E5%8E%8B%E7%BC%A9%E6%AF%94/109904?fromModule=lemma_inlink" title="压缩比">压缩比</a>高，生成文件体积小。<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="PNG文件" href="https://baike.baidu.com/item/PNG%E6%96%87%E4%BB%B6/1218810?fromModule=lemma_inlink" title="PNG文件">PNG文件</a>的<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="扩展名" href="https://baike.baidu.com/item/%E6%89%A9%E5%B1%95%E5%90%8D/103577?fromModule=lemma_inlink" title="扩展名">扩展名</a>为.png</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2025年6月24日，W3C PNG工作组发布便携式网络图形（PNG）规范第三版正式推荐标准。第三版正式加入了动态PNG（APNG）和高动态范围（HDR）PNG功能。</p><h2>1.2 使用vscode的插件以二进制方式查看图片</h2><p>![](<a href="https://i-blog.csdnimg.cn/direct/1d0833a32881489c8aa8f8e8cb3b6d33.png">https://i-blog.csdnimg.cn/direct/1d0833a32881489c8aa8f8e8cb3b6d33.png</a>“ width&#x3D;”770” &#x2F;&gt;&lt;img alt&#x3D;)</p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/51641439d8a44275a69237c4069b3d14.png"></p><h2>1.3 png格式</h2><h2><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="PNG文件格式详解" href="https://www.cnblogs.com/senior-engineer/p/9548347.html" title="PNG文件格式详解">PNG文件格式详解</a></h2><p>PNG（Portable Network Graphics）是一种无损压缩的位图文件格式，旨在替代GIF和TIFF格式。它支持丰富的颜色深度和透明通道，广泛应用于网络图像存储和传输。</p><p><strong>文件结构：</strong></p><p>PNG文件由<strong>文件署名</strong>和**数据块（chunk）**组成。</p><p><strong>文件署名：</strong></p><p>文件的前8字节是固定的，用于标识PNG文件：</p><p>十六进制：89 50 4E 47 0D 0A 1A 0A</p><p>ASCII： . P N G \r \n \x1A \n</p><p><strong>数据块：</strong></p><p>PNG文件包含两类数据块：</p><ul><li><p><strong>关键数据块（Critical Chunk）</strong>：必须存在，包括IHDR、PLTE、IDAT和IEND。</p></li><li><p><strong>辅助数据块（Ancillary Chunk）</strong>：可选，用于存储额外信息，如透明度、文本注释等。</p></li></ul><p>每个数据块由以下部分组成：</p><p>Length (4字节)：数据块内容的长度。</p><p>Chunk Type Code (4字节)：块类型的ASCII标识。</p><p>Chunk Data (可变长度)：实际数据。</p><p>关键数据块解析</p><ul><li><p><strong>IHDR（文件头数据块）</strong>&nbsp;包含图像的基本信息，必须是第一个数据块，结构如下：</p></li></ul><p>Width (4字节)：图像宽度（像素）。</p><p>Height (4字节)：图像高度（像素）。</p><p>Bit Depth (1字节)：色深（如8表示256色）。</p><p>Color Type (1字节)：颜色类型（如6表示带透明通道的真彩色）。</p><p>Compression Method (1字节)：压缩方法（固定为0）。</p><p>Filter Method (1字节)：滤波器方法（固定为0）。</p><p>Interlace Method (1字节)：隔行扫描方式（如0表示非隔行扫描）。</p><ul><li><p><strong>PLTE（调色板数据块）</strong>&nbsp;定义索引彩色图像的调色板信息，包含RGB三元组，每个颜色占3字节。</p></li></ul><ul><li><p><strong>IDAT（图像数据块）</strong>&nbsp;存储图像的实际数据，可以有多个连续的IDAT块。</p></li></ul><ul><li><p><strong>IEND（图像结束数据块）</strong>&nbsp;标志PNG文件结束，固定值为：</p></li></ul><p>00 00 00 00 49 45 4E 44 AE 42 60 82</p><p>辅助数据块示例</p><ol><li><p><strong>tEXt（文本信息数据块）</strong>&nbsp;存储文本注释，如标题、作者等。</p></li><li><p><strong>tRNS（透明数据块）</strong>&nbsp;定义图像的透明度信息。</p></li><li><p><strong>pHYs（物理像素尺寸数据块）</strong>&nbsp;指定像素的物理尺寸或宽高比例。</p></li></ol><p>CRC (4字节)：循环冗余校验码，用于校验数据完整性。</p><hr /><h2>1.4&nbsp;示例</h2><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/aff0b9a917e04bbeaf808a560feae611.png"></p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/51674f4b0e1a4daeb14e3222cc109f3c.png"></p><hr /><p>详细解释这段 PNG 数据的每一个字节，需结合&nbsp;<strong>PNG 文件的 &ldquo;签名 + 数据块（Chunk）&rdquo; 结构</strong>&nbsp;拆解（PNG 块结构：<code>[4字节长度] + [4字节类型] + [数据] + [4字节CRC校验和]</code>）：</p><h3>1. PNG 文件签名（偏移&nbsp;<code>00000000</code>&nbsp;-&nbsp;<code>00000007</code>）</h3><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000000</td><td><code>89</code></td><td>特殊字节，避免 PNG 被误判为 ASCII 文本（ASCII 范围是&nbsp;<code>00-7F</code>，<code>89</code>&nbsp;超出此范围）</td></tr><tr><td>00000001</td><td><code>50</code></td><td>ASCII 字符&nbsp;<code>&#39;P&#39;</code>，是 &ldquo;PNG&rdquo; 首字母</td></tr><tr><td>00000002</td><td><code>4E</code></td><td>ASCII 字符&nbsp;<code>&#39;N&#39;</code>，是 &ldquo;PNG&rdquo; 第二个字母</td></tr><tr><td>00000003</td><td><code>47</code></td><td>ASCII 字符&nbsp;<code>&#39;G&#39;</code>，是 &ldquo;PNG&rdquo; 第三个字母</td></tr><tr><td>00000004</td><td><code>0D</code></td><td>DOS 风格换行符&nbsp;<code>\r</code>（回车），用于兼容旧系统</td></tr><tr><td>00000005</td><td><code>0A</code></td><td>DOS 风格换行符&nbsp;<code>\n</code>（换行），与&nbsp;<code>0D</code>&nbsp;配合</td></tr><tr><td>00000006</td><td><code>1A</code></td><td>DOS 文件结束符（Ctrl+Z），防止二进制内容被文本工具错误解析</td></tr><tr><td>00000007</td><td><code>0A</code></td><td>Unix 风格换行符&nbsp;<code>\n</code>，兼容跨平台解析</td></tr><tr><td>这些字节是 PNG&nbsp;<strong>固定签名</strong>，用于唯一标识文件类型。</td><td></td><td></td></tr></tbody></table><h3>2. 第一个数据块：<code>IHDR</code>（图像头块，必选，偏移&nbsp;<code>00000008</code>&nbsp;开始）</h3><p>PNG 块结构：<code>[长度(4B)] + [类型(4B)] + [数据(13B)] + [CRC(4B)]</code></p><h4>（1）长度字段（偏移&nbsp;<code>00000008</code>&nbsp;-&nbsp;<code>0000000B</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000008</td><td><code>00</code></td><td>无符号整数的第 1 字节（大端序）</td></tr><tr><td>00000009</td><td><code>00</code></td><td>无符号整数的第 2 字节</td></tr><tr><td>0000000A</td><td><code>00</code></td><td>无符号整数的第 3 字节</td></tr><tr><td>0000000B</td><td><code>0D</code></td><td>无符号整数的第 4 字节，整体值为&nbsp;<code>0x0000000D</code>（十进制&nbsp;<code>13</code>），表示&nbsp;<code>IHDR</code>&nbsp;数据部分长度为 13 字节</td></tr></tbody></table><h4>（2）类型字段（偏移&nbsp;<code>0000000C</code>&nbsp;-&nbsp;<code>0000000F</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>0000000C</td><td><code>49</code></td><td>ASCII 字符&nbsp;<code>&#39;I&#39;</code>，是&nbsp;<code>IHDR</code>&nbsp;首字母</td></tr><tr><td>0000000D</td><td><code>48</code></td><td>ASCII 字符&nbsp;<code>&#39;H&#39;</code>，是&nbsp;<code>IHDR</code>&nbsp;第二个字母</td></tr><tr><td>0000000E</td><td><code>44</code></td><td>ASCII 字符&nbsp;<code>&#39;D&#39;</code>，是&nbsp;<code>IHDR</code>&nbsp;第三个字母</td></tr><tr><td>0000000F</td><td><code>52</code></td><td>ASCII 字符&nbsp;<code>&#39;R&#39;</code>，是&nbsp;<code>IHDR</code>&nbsp;第四个字母</td></tr><tr><td><code>IHDR</code>&nbsp;是 PNG&nbsp;<strong>必须的第一个块</strong>，存储图像核心参数。</td><td></td><td></td></tr></tbody></table><h4>（3）数据部分（13 字节，偏移&nbsp;<code>00000010</code>&nbsp;-&nbsp;<code>0000001C</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>含义</th><th>解释</th></tr></thead><tbody><tr><td>00000010</td><td><code>00 00 01 40</code></td><td>图像宽度</td><td>无符号整数&nbsp;<code>0x00000140</code>（十进制&nbsp;<code>320</code>），表示图像宽度为 320 像素</td></tr><tr><td>00000014</td><td><code>00 00 00 F0</code></td><td>图像高度</td><td>无符号整数&nbsp;<code>0x000000F0</code>（十进制&nbsp;<code>240</code>），表示图像高度为 240 像素</td></tr><tr><td>00000018</td><td><code>08</code></td><td>位深度</td><td>每个颜色通道的位数为&nbsp;<code>8</code>（如 R、G、B 各占 8 位）</td></tr><tr><td>00000019</td><td><code>06</code></td><td>颜色类型</td><td>编码&nbsp;<code>6</code>&nbsp;表示「带 Alpha 通道的真彩色（RGBA）」，即每个像素含 R、G、B、透明四通道</td></tr><tr><td>0000001A</td><td><code>00</code></td><td>压缩方法</td><td>固定为&nbsp;<code>0</code>，表示使用 PNG 唯一支持的 DEFLATE 压缩</td></tr><tr><td>0000001B</td><td><code>00</code></td><td>过滤方法</td><td>固定为&nbsp;<code>0</code>，表示 &ldquo;无过滤&rdquo;（压缩前像素行的预处理方式）</td></tr><tr><td>0000001C</td><td><code>00</code></td><td>交错方法</td><td>固定为&nbsp;<code>0</code>，表示 &ldquo;无交错&rdquo;（图像数据按顺序存储，非渐进式）</td></tr></tbody></table><h4>（4）CRC 校验和（偏移&nbsp;<code>0000001D</code>&nbsp;-&nbsp;<code>00000020</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>0000001D</td><td><code>54</code></td><td>CRC-32 校验和的第 1 字节</td></tr><tr><td>0000001E</td><td><code>46</code></td><td>CRC-32 校验和的第 2 字节</td></tr><tr><td>0000001F</td><td><code>E2</code></td><td>CRC-32 校验和的第 3 字节</td></tr><tr><td>00000020</td><td><code>B7</code></td><td>CRC-32 校验和的第 4 字节，对&nbsp;<code>IHDR</code>&nbsp;类型 + 数据部分计算，用于验证完整性</td></tr></tbody></table><h3>3. 第二个数据块：<code>cHRM</code>（颜色空间块，可选，偏移&nbsp;<code>00000021</code>&nbsp;开始）</h3><p>PNG 块结构：<code>[长度(4B)] + [类型(4B)] + [数据(32B)] + [CRC(4B)]</code></p><h4>（1）长度字段（偏移&nbsp;<code>00000021</code>&nbsp;-&nbsp;<code>00000024</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000021</td><td><code>00</code></td><td>无符号整数的第 1 字节</td></tr><tr><td>00000022</td><td><code>00</code></td><td>无符号整数的第 2 字节</td></tr><tr><td>00000023</td><td><code>00</code></td><td>无符号整数的第 3 字节</td></tr><tr><td>00000024</td><td><code>20</code></td><td>无符号整数的第 4 字节，整体值为&nbsp;<code>0x00000020</code>（十进制&nbsp;<code>32</code>），表示&nbsp;<code>cHRM</code>&nbsp;数据部分长度为 32 字节</td></tr></tbody></table><h4>（2）类型字段（偏移&nbsp;<code>00000025</code>&nbsp;-&nbsp;<code>00000028</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000025</td><td><code>63</code></td><td>ASCII 字符&nbsp;<code>&#39;c&#39;</code>，是&nbsp;<code>cHRM</code>&nbsp;首字母</td></tr><tr><td>00000026</td><td><code>48</code></td><td>ASCII 字符&nbsp;<code>&#39;H&#39;</code>，是&nbsp;<code>cHRM</code>&nbsp;第二个字母</td></tr><tr><td>00000027</td><td><code>52</code></td><td>ASCII 字符&nbsp;<code>&#39;R&#39;</code>，是&nbsp;<code>cHRM</code>&nbsp;第三个字母</td></tr><tr><td>00000028</td><td><code>4D</code></td><td>ASCII 字符&nbsp;<code>&#39;M&#39;</code>，是&nbsp;<code>cHRM</code>&nbsp;第四个字母</td></tr><tr><td><code>cHRM</code>&nbsp;是<strong>可选块</strong>，用于描述图像的颜色空间（原色和白点的色度坐标）。</td><td></td><td></td></tr></tbody></table><h4>（3）数据部分（32 字节，偏移&nbsp;<code>00000029</code>&nbsp;-&nbsp;<code>00000048</code>）</h4><table><thead><tr><th>偏移</th><th>字节（节选）</th><th>含义</th><th>解释</th></tr></thead><tbody><tr><td>00000029</td><td><code>7A 26 00 00</code></td><td>红原色 x 坐标</td><td>无符号整数，单位为 &ldquo;万分之一的色度值&rdquo;，描述红色在色度空间的位置</td></tr><tr><td>...</td><td>...</td><td>红原色 y 坐标</td><td>后续字节依次存储绿、蓝原色的 x/y 坐标，以及白点的 x/y 坐标</td></tr><tr><td>（共 8 组 4 字节整数，对应红 / 绿 / 蓝原色和白点的 x/y 坐标）</td><td></td><td></td><td></td></tr><tr><td>这些数据用于颜色管理系统（如打印机、显示器）准确还原色彩。</td><td></td><td></td><td></td></tr></tbody></table><h4>（4）CRC 校验和（偏移&nbsp;<code>00000049</code>&nbsp;-&nbsp;<code>0000004C</code>）</h4><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000049</td><td><code>51</code></td><td>CRC-32 校验和的第 1 字节</td></tr><tr><td>0000004A</td><td><code>3C</code></td><td>CRC-32 校验和的第 2 字节</td></tr><tr><td>0000004B</td><td><code>00</code></td><td>CRC-32 校验和的第 3 字节</td></tr><tr><td>0000004C</td><td><code>00</code></td><td>CRC-32 校验和的第 4 字节，对&nbsp;<code>cHRM</code>&nbsp;类型 + 数据部分计算</td></tr></tbody></table><h3>4. 后续元数据块（如&nbsp;<code>gAMA</code>、<code>sRGB</code>、<code>tIME</code>&nbsp;等，偏移&nbsp;<code>00000050</code>&nbsp;开始，节选）</h3><p>截图中此区域字节（如&nbsp;<code>02 62 4B 47 44...</code>）属于<strong>可选元数据块</strong>，用于补充图像信息（如伽马值、色彩空间标识、时间戳等），符合 PNG 规范，但非必须。</p><h3>5.&nbsp;<code>IDAT</code>&nbsp;块开始（像素数据区域，偏移&nbsp;<code>00000080</code>）</h3><table><thead><tr><th>偏移</th><th>字节</th><th>解释</th></tr></thead><tbody><tr><td>00000080</td><td><code>49</code></td><td>ASCII 字符&nbsp;<code>&#39;I&#39;</code>，是&nbsp;<code>IDAT</code>&nbsp;首字母</td></tr><tr><td>00000081</td><td><code>44</code></td><td>ASCII 字符&nbsp;<code>&#39;D&#39;</code>，是&nbsp;<code>IDAT</code>&nbsp;第二个字母</td></tr><tr><td>00000082</td><td><code>41</code></td><td>ASCII 字符&nbsp;<code>&#39;A&#39;</code>，是&nbsp;<code>IDAT</code>&nbsp;第三个字母</td></tr><tr><td>00000083</td><td><code>54</code></td><td>ASCII 字符&nbsp;<code>&#39;T&#39;</code>，是&nbsp;<code>IDAT</code>&nbsp;第四个字母</td></tr><tr><td><code>IDAT</code>&nbsp;是 PNG&nbsp;<strong>核心数据块</strong>，存储<strong>经 DEFLATE 压缩的像素流</strong>。从该位置开始，数据不再是 &ldquo;元数据&rdquo;，而是图像的实际像素内容。</td><td></td><td></td></tr></tbody></table><h3>总结</h3><p>从文件起始到&nbsp;<code>IDAT</code>&nbsp;块的&nbsp;<code>49 44 41 54</code>&nbsp;之前，所有字节都属于&nbsp;<strong>PNG 元数据区域</strong>（包含签名、<code>IHDR</code>（图像基本参数）、<code>cHRM</code>（颜色空间）等可选块）；<code>IDAT</code>&nbsp;开始后，进入<strong>像素数据区域</strong>。所有字节均符合 PNG 规范，无额外非法 / 非标准内容。</p><hr /><p>结尾</p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/c9c67b06a235445a8238c756597eb0e3.png"></p><p>PNG 文件的<strong>结尾由&nbsp;<code>IEND</code>&nbsp;块标识</strong>，在截图中：</p><h3>6. 定位&nbsp;<code>IEND</code>&nbsp;块（文件结尾标志）</h3><p>在偏移&nbsp;<code>00009040</code>&nbsp;附近，能看到十六进制数据&nbsp;<code>00 00 00 00 49 45 4E 44 AE 42 60 82</code>，这正是 PNG 标准的 **<code>IEND</code>&nbsp;块 **：</p><ul><li><code>00 00 00 00</code>：是&nbsp;<code>IEND</code>&nbsp;块的「长度字段」（值为 0，因为&nbsp;<code>IEND</code>&nbsp;块无数据内容）。</li><li><code>49 45 4E 44</code>：是「块类型字段」，ASCII 对应&nbsp;<code>IEND</code>（PNG 文件结束的专属标识）。</li><li><code>AE 42 60 82</code>：是「CRC 校验和字段」（对&nbsp;<code>IEND</code>&nbsp;类型和空数据计算的校验值）。</li></ul><h3>结论</h3><p>PNG 文件的<strong>结尾从&nbsp;<code>IEND</code>&nbsp;块开始</strong>（即截图中偏移&nbsp;<code>00009040</code>&nbsp;处的&nbsp;<code>00 00 00 00 49 45 4E 44...</code>），<code>IEND</code>&nbsp;块结束后，整个 PNG 文件的有效数据就全部结束了。</p><hr /><h1 style="background-color:transparent">二、.bmp图片格式解析</h1><h2>2.1&nbsp; bmp简介</h2><blockquote><p><strong>BMP</strong>取自位图Bitmap的缩写，也称为DIB（与设备无关的位图），是一种独立于显示器的<strong>位图</strong>数字图像文件格式。常见于微软视窗和OS/2操作系统。 ----维基百科</p></blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BMP格式就是表示位图的格式。BMP格式图像中的像素点，其位深度可以是1，4，8，24，32，但常见的BMP位深度还是8和24。</p><p>选择一张BMP图像，右键打开属性 --&gt; 详细信息，可以查看其位深度。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;位图按照是否与设备相关分类可以分为：设备相关位图DDB(device-dependent bitmap）、设备无关位图DIB(device-independent bitmap）。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;按照像素深度分类可以分为：1bit位图(2色)、4bit位图(16色)、8bit位图(256色)、16bit位图(65536色-高彩色)、24bit位图(1670万色-真彩色)、32bit位图(1670万色-增强型真彩色)。</p><h2>2.2&nbsp;bmp文件格式</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BMP文件格式，又称为位图，是Windows系统中广泛使用的图像文件格式。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BMP文件的数据分为四个部分：</p><ul><li>bmp文件头(bmp file header)：提供文件的格式、大小等信息</li><li>位图信息头(bitmap information)：提供图像数据的尺寸、位平面数、压缩方式、颜色索引等信息</li><li>调色板(color palette)：可选，如使用索引来表示图像，调色板就是索引与其对应的颜色的映射表</li><li>位图数据(bitmap data)：图像数据（像素阵列）</li></ul><hr /><h2>2.3 示例</h2><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/ac26c5b0b3eb485b821859a52dde2897.png"></p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/8d8a12199ac94bd5b2918c4ef7bb9157.png"></p><p>这段十六进制数据属于&nbsp;<strong>BMP 图像文件的 &ldquo;头部 + 颜色表&rdquo; 部分</strong>，需结合 BMP 的结构化布局（文件头、信息头、颜色表、像素数据）逐段解析：</p><h3>2.3.1 BMP 文件头（<code>BITMAPFILEHEADER</code>，前 14 字节）</h3><p>BMP 文件头是固定 14 字节的结构，用于标识文件类型、大小及像素数据偏移。<br />C 语言结构定义（小端字节序，字节低位在前）：</p><pre><code>typedef struct {    uint16_t bfType;      // "BM" 标识，2 字节    uint32_t bfSize;      // 文件总大小，4 字节    uint16_t bfReserved1; // 保留字段，2 字节    uint16_t bfReserved2; // 保留字段，2 字节    uint32_t bfOffBits;   // 像素数据偏移量（文件头到像素数据的字节数），4 字节} BITMAPFILEHEADER;</code></pre><p>对应十六进制解析：</p><ul><li><code>42 4D</code>&nbsp;&rarr;&nbsp;<code>bfType</code>：ASCII 为&nbsp;<code>&quot;BM&quot;</code>，是 BMP 文件的标志性开头，确认文件类型。</li><li><code>36 30 01 00</code>&nbsp;&rarr; 小端序转换为&nbsp;<code>0x00013036</code>（十进制&nbsp;<code>77878</code>）&rarr;&nbsp;<code>bfSize</code>：文件总大小约 77KB。</li><li><code>00 00</code>&nbsp;&rarr;&nbsp;<code>bfReserved1</code>：保留字段，值为 0（无特殊用途）。</li><li><code>00 00</code>&nbsp;&rarr;&nbsp;<code>bfReserved2</code>：保留字段，值为 0（无特殊用途）。</li><li><code>36 04 00 00</code>&nbsp;&rarr; 小端序转换为&nbsp;<code>0x00000436</code>（十进制&nbsp;<code>1078</code>）&rarr;&nbsp;<code>bfOffBits</code>：<strong>像素数据从文件开头偏移 1078 字节处开始</strong>（核心字段，决定像素数据的起始位置）。</li></ul><h3>2.3.2 BMP 信息头（<code>BITMAPINFOHEADER</code>，后续 40 字节）</h3><p>信息头（标准大小 40 字节）存储图像宽高、位深、压缩方式等核心参数。<br />C 语言结构关键字段：</p><pre><code>typedef struct {    uint32_t biSize;          // 信息头大小，4 字节（通常为 40）    int32_t  biWidth;         // 图像宽度，4 字节    int32_t  biHeight;        // 图像高度，4 字节    uint16_t biPlanes;        // 颜色平面数，2 字节（固定为 1）    uint16_t biBitCount;      // 位深（每像素位数），2 字节    // 其余字段：压缩方式、像素数据大小等...} BITMAPINFOHEADER;</code></pre><p>对应十六进制解析：</p><ul><li><code>28 00 00 00</code>&nbsp;&rarr; 小端序为&nbsp;<code>0x00000028</code>（十进制&nbsp;<code>40</code>）&rarr;&nbsp;<code>biSize</code>：信息头大小 40 字节，符合标准&nbsp;<code>BITMAPINFOHEADER</code>&nbsp;格式。</li><li><code>40 01 00 00</code>&nbsp;&rarr; 小端序为&nbsp;<code>0x00000140</code>（十进制&nbsp;<code>320</code>）&rarr;&nbsp;<code>biWidth</code>：图像宽度为 320 像素。</li><li><code>F0 00 00 00</code>&nbsp;&rarr;&nbsp;<code>biHeight</code>：图像高度为 （十进制&nbsp;<code>240</code>）。</li><li><code>01 00</code>&nbsp;&rarr;&nbsp;<code>biPlanes</code>：值为 1，符合 BMP 规范（颜色平面数固定为 1）。</li><li><code>08 00</code>&nbsp;&rarr;&nbsp;<code>biBitCount</code>：值为 8 &rarr;&nbsp;<strong>位深为 8 位</strong>（表示 &ldquo;索引色&rdquo;，每个像素用 8 位索引到 &ldquo;颜色表&rdquo; 中获取真实颜色）。</li></ul><h3>2.3.3 颜色表（Palette，位深 8 位时存在，紧接信息头）</h3><p>当&nbsp;<code>biBitCount=8</code>&nbsp;时，BMP 会包含<strong>颜色表</strong>（存储 256 种颜色的 RGB 组合，每个颜色项占 4 字节：蓝、绿、红、保留位）。</p><p>截图中信息头之后的序列（如&nbsp;<code>00 00 00</code>、<code>01 01 01</code>、<code>02 02 02</code>...），是<strong>灰度调色板的特征</strong>：</p><ul><li>每个颜色项的 R、G、B 分量相等（如&nbsp;<code>00 00 00 00</code>&nbsp;对应纯黑，<code>01 01 01 00</code>&nbsp;对应深灰，<code>02 02 02 00</code>&nbsp;对应中灰... 直到&nbsp;<code>FF FF FF 00</code>&nbsp;对应纯白）。</li><li>这种 &ldquo;R=G=B&rdquo; 的序列，是典型的<strong>灰度颜色表</strong>（图像为灰度图）。</li></ul><h3>四、像素数据的起始位置</h3><p>像素数据的绝对起始位置由&nbsp;<code>bfOffBits=1078</code>&nbsp;决定：从文件开头跳过 1078 字节后，后续内容才是<strong>真正的像素数据</strong>（每个像素用 8 位索引，对应颜色表中的一项）</p><p>截图中展示的内容（文件头、信息头、颜色表）均属于 &ldquo;头部元数据&rdquo;，未到达像素数据区。</p><h3>2.3.4 总结</h3><p>这段数据是 BMP 文件的<strong>头部（文件头 + 信息头）和颜色表</strong>：</p><ul><li>确认是 BMP 格式，图像宽 320 像素，高 240像素、位深 8 位（灰度索引色）。</li><li>像素数据从文件偏移 1078 字节处开始，此前为元数据（文件标识、参数、颜色映射表）。</li></ul><h1>三、.jpg图片格式解析</h1><h2>3.1 jpg简介</h2><p>JPEG（Joint Photographic Experts Group，联合图像专家小组）作为全球应用最广泛的图像压缩标准，彻底改变了数字图像的存储与传输方式。自 1992 年由 ISO（国际标准化组织）和 CCITT（国际电报电话咨询委员会）联合制定以来，这一标准通过精妙的有损压缩算法，在视觉质量与文件体积之间取得了完美平衡，成为照片、网络图像和数字媒体的事实标准。本文将从技术原理、格式类型、应用场景等维度全面解析 JPEG 格式。</p><h3>3.1.1 JPEG 格式基础概述</h3><p>JPEG 标准的诞生源于特定的技术需求：在 64Kbps 的通信线路上传输 720&times;576 分辨率的图像。为实现这一目标，专家小组开发了一种基于人眼视觉特性的压缩方案，核心思想是选择性丢弃人眼不敏感的图像细节，从而在保证视觉可接受性的前提下大幅缩减文件体积。实践证明，这种方案极为成功 &mdash;&mdash; 典型的 JPEG 图像可将原始数据压缩至 1/10 至 1/20，而普通用户几乎无法察觉质量损失。</p><p>从文件标识来看，JPEG 图像通常使用<code>.jpg</code>或<code>.jpeg</code>扩展名，两者本质完全相同。<code>.jpg</code>扩展名的出现源于 DOS 时代 8.3 文件名规则的限制（最多 8 个字符的主名 + 3 个字符的扩展名），而<code>.jpeg</code>是更规范的全称形式。现代操作系统和软件已完全支持这两种扩展名的互通使用。</p><p>JPEG 格式的核心特性可概括为三点：首先是<strong>有损压缩机制</strong>，通过永久丢弃冗余信息实现高效压缩；其次是<strong>24 位真彩色支持</strong>，可呈现约 1677 万种颜色，完美适配照片等复杂色彩场景；最后是<strong>可调压缩率</strong>，用户可根据需求在质量与体积之间灵活权衡。这些特性使 JPEG 广泛应用于数字摄影、网络传输、印刷出版等领域，成为跨平台兼容性最强的图像格式之一。</p><h3>3.1.2 JPEG 压缩技术原理深度解析</h3><p>JPEG 的高效压缩能力源于其精密设计的技术流程，整个压缩过程可分为四个核心步骤，每个步骤都针对图像数据的不同特性进行优化处理。</p><h4>1. 颜色空间转换与采样</h4><p>人眼视觉系统对亮度变化的敏感度远高于对色彩变化的敏感度，这一生物学特性成为 JPEG 压缩的重要依据。压缩流程首先将图像从 RGB 颜色空间转换为 YCbCr 颜色空间：其中 Y 通道代表亮度信息，Cb 和 Cr 通道代表色度（色彩）信息。转换公式如下：</p><ul><li>亮度 Y = 0.299R + 0.587G + 0.114B</li><li>色度 Cb = -0.1687R - 0.3313G + 0.5B + 128</li><li>色度 Cr = 0.5R - 0.4187G - 0.0813B + 128</li></ul><p>转换后进行<strong>色度子采样</strong>，通过降低色度通道的分辨率进一步减少数据量。常用的采样比例有 4:2:2（水平方向每 2 个像素采样 1 个色度值）和 4:2:0（水平和垂直方向每 2 个像素采样 1 个色度值），这两种方式可分别减少 33% 和 50% 的色度数据，而视觉质量几乎不受影响。</p><h4>2. 离散余弦变换（DCT）</h4><p>经过颜色转换的图像数据被分割为 8&times;8 的像素块，每个块独立进行离散余弦变换（DCT）。DCT 的作用是将空间域的像素值转换为频率域的系数，将图像的能量集中到少数低频系数上，而高频系数（代表细节）则数值较小。</p><p>变换过程中，每个 8&times;8 的像素块会生成一个对应的频率系数矩阵，左上角的系数称为 DC 系数（代表块的平均亮度），其余 63 个称为 AC 系数（代表细节变化）。这种变换使后续的压缩操作更具针对性 &mdash;&mdash; 我们可以更高效地处理那些人眼不敏感的高频信息。</p><h4>3. 量化过程</h4><p>量化是导致 JPEG 图像质量损失的关键步骤，也是压缩率可调的核心环节。量化通过预设的量化表对 DCT 变换后的频率系数进行舍入处理，将浮点数转换为整数。高频系数通常使用更大的量化步长，导致更多细节损失，而低频系数（对视觉更重要）则保留更精确。</p><p>量化表的选择直接影响压缩效果：高压缩率（低质量）使用更粗糙的量化表，会丢弃更多高频信息；而低压缩率（高质量）使用精细量化表，保留更多细节。这种损失是不可逆的 &mdash;&mdash; 一旦系数被量化，原始细节便永久丢失，这也是不建议反复编辑保存 JPEG 文件的原因。</p><h4>4. 编码阶段</h4><p>量化后的系数矩阵需要通过编码进一步压缩数据量。编码过程包含两个关键步骤：首先是<strong>Z 字形扫描</strong>（Zigzag Order），将 8&times;8 矩阵按对角线方向排列成一维序列，使连续的零值（主要来自高频系数）集中出现；然后对这个序列进行<strong>行程长度编码</strong>（RLE）和<strong>熵编码</strong>（通常是霍夫曼编码或算术编码）。</p><p>Z 字形扫描的巧妙之处在于将空间上分散的零值转化为连续的零值序列，极大提升了行程长度编码的效率。熵编码则利用数据的统计特性，对出现频率高的值分配更短的编码，最终实现无失真的进一步压缩。</p><h3>3.1.3 JPEG 格式的主要类型与演变</h3><p>随着技术发展，JPEG 标准衍生出多种格式变体，每种变体针对特定场景优化，形成了丰富的技术生态。</p><h4>1. 标准 JPEG（Sequential JPEG）</h4><p>标准 JPEG 采用<strong>顺序式编码</strong>，图像数据按从左到右、从上到下的顺序一次性编码。解码时必须接收完整数据才能显示图像全貌，在网络传输中表现为 &quot;从上到下&quot; 逐步加载的效果。</p><p>这种格式的压缩比通常在 10:1 到 40:1 之间，用户可通过调整量化参数控制质量。由于编码和解码过程简单高效，标准 JPEG 成为数字相机、网页图像的默认选择，几乎所有图像软件都能完美支持。</p><h4>2. 渐进式 JPEG（Progressive JPEG）</h4><p>渐进式 JPEG 是对标准格式的重要改进，采用<strong>多扫描编码</strong>策略。图像数据被分成多次扫描传输：首次扫描传输低分辨率的轮廓信息，使图像快速呈现大致面貌；后续扫描逐步传输高频细节，图像随之逐渐清晰。</p><p>这种加载方式在低速网络环境中体验更佳，用户无需等待完整下载即可看到图像内容。实现原理是将 DCT 系数按频率分层编码，先传输低频系数（决定整体轮廓），再传输高频系数（决定细节）。渐进式 JPEG 的文件体积与标准 JPEG 相近，但用户感知的加载速度更快。</p><h4>3. JPEG 2000：技术飞跃与应用局限</h4><p>2000 年推出的 JPEG 2000（用户原文中 &quot;JPEG2002&quot; 为笔误）代表了 JPEG 技术的重大升级，它采用<strong>离散小波变换（DWT）</strong>&nbsp;替代传统的 DCT 变换，在压缩效率和功能扩展性上实现了突破。</p><p>相比标准 JPEG，JPEG 2000 的优势显著：压缩率提高约 30%，同等体积下质量更优；同时支持有损和无损压缩，满足专业领域需求；引入<strong>感兴趣区域（ROI）</strong>&nbsp;功能，可指定图像特定区域保持更高质量；采用更先进的渐进传输，支持从模糊到清晰的平滑过渡。</p><p>然而，JPEG 2000 的推广面临诸多挑战：与传统 JPEG 不兼容，需要全新的编解码支持；编码复杂度高，对硬件要求更高；网页浏览器普遍不支持，限制了其在网络应用中的普及。目前主要应用于专业领域，如数字影院、医疗成像和档案保存等。</p><h4>4. 其他特殊模式</h4><p>JPEG 标准还定义了<strong>分层式编码</strong>（Hierarchical JPEG）和<strong>无损 JPEG</strong>（Lossless JPEG）两种特殊模式。分层式编码生成多分辨率版本的图像，支持根据需求选择不同分辨率解码；无损 JPEG 不使用 DCT 变换，而是采用差分编码，实现无质量损失的压缩，适合需要精确还原的场景。</p><p>无损 JPEG 的压缩率通常较低（约 2:1），远不及有损压缩，但保留了完整图像数据，主要用于医学图像、卫星遥感等对精度要求极高的领域。</p><h3>3.1.4 JPEG 的适用场景与局限性</h3><p>JPEG 格式的设计特性决定了其适用边界，了解这些特性有助于在实际应用中做出最优选择。</p><h4>理想应用场景</h4><p>JPEG 在<strong>连续色调图像</strong>领域表现卓越，特别适合：</p><ul><li>数字摄影：手机、相机拍摄的人物照、风景照等，能保留丰富色彩过渡</li><li>网络传输：社交媒体、网页配图等需平衡质量与加载速度的场景</li><li>存储归档：在有限空间内保存大量图像，如照片库、数字相册</li></ul><p>这些场景的共同特点是图像包含复杂的色彩渐变和丰富的细节层次，JPEG 的有损压缩能有效去除冗余信息而不影响视觉体验。</p><h4>不适用场景</h4><p>JPEG 的技术特性使其在某些场景中表现不佳：</p><ul><li>线条与文字图像：截图、图表、文字等包含锐利边缘的内容，压缩后易出现锯齿和模糊</li><li>透明背景需求：JPEG 不支持透明通道，透明区域会被填充为纯色</li><li>专业编辑工作流：反复编辑保存会导致质量持续下降，应使用 PSD、TIFF 等无损格式</li><li>高对比度图像：包含大片纯色区域的图像易出现 &quot;块效应&quot; 和色带</li></ul><h4>与其他格式的对比</h4><table><thead><tr><th>格式</th><th>压缩方式</th><th>透明支持</th><th>核心优势</th><th>典型应用</th></tr></thead><tbody><tr><td>JPEG</td><td>有损为主</td><td>❌ 不支持</td><td>体积小、兼容性极佳</td><td>照片、网页图像</td></tr><tr><td>PNG</td><td>无损为主</td><td>✅ 支持</td><td>保留细节、透明效果</td><td>图标、截图、文字</td></tr><tr><td>WebP</td><td>有损 / 无损</td><td>✅ 支持</td><td>比 JPEG 体积小 30%</td><td>现代网页、应用</td></tr><tr><td>JPEG 2000</td><td>有损 / 无损</td><td>✅ 支持</td><td>压缩效率更高、功能丰富</td><td>医疗成像、数字影院</td></tr></tbody></table><h3>3.1.5 JPEG 的技术影响与未来展望</h3><p>JPEG 标准的成功不仅体现在技术层面，更深刻影响了数字图像的应用生态。它使数字摄影普及成为可能，推动了社交媒体和网络图像的蓬勃发展，成为信息时代视觉传播的基础设施。</p><p>尽管面临 WebP、AVIF 等新兴格式的挑战，JPEG 凭借无与伦比的兼容性仍将长期存在。JPEG 标准本身也在持续演进，最新的 JPEG XL 等提案旨在结合传统 JPEG 的兼容性与现代压缩技术的高效率，试图在保持生态优势的同时突破性能瓶颈。</p><p>对于普通用户，理解 JPEG 的工作原理有助于做出更明智的格式选择：拍摄照片时可使用中等压缩率（80-90% 质量）平衡存储与质量；网络分享时可适当提高压缩率减小体积；而需要编辑的图像应保留原始格式，避免反复压缩损失。</p><p>从技术本质看，JPEG 的成功源于对 &quot;人类视觉系统特性&quot; 的深刻理解与巧妙利用 &mdash;&mdash; 它不追求数学上的完美，而是专注于优化人类感知到的质量，这种务实的设计哲学或许正是其长盛不衰的根本原因。</p><h2>3.2&nbsp;jpg文件格式</h2><p>JPEG图片格式组成部分：<br /><strong>SOI（文件头）+APP0（图像识别信息）+ DQT（定义量化表）+ SOF0（图像基本信息）+ DHT（定义Huffman表）</strong>&nbsp;+ DRI（定义重新开始间隔）+&nbsp;<strong>SOS（扫描行开始）+ EOI（文件尾）</strong></p><p>一般情况下，是按照这个顺序排列的：</p><table align="left" border="0"><tbody><tr><td>TAG类型</td><td>数值</td><td>名称</td><td>其他备注</td></tr><tr><td>SOI</td><td>0xFFD8</td><td>Start of Image</td><td>必带</td></tr><tr><td>APP0</td><td>0xFFE0</td><td>application0</td><td>必带</td></tr><tr><td>APPn</td><td>0xFFEn</td><td>applicationn</td><td>可选带（APP1一般为Exif信息）</td></tr><tr><td>DQT</td><td>0xFFDB</td><td>Define Quantization Table</td><td>必带</td></tr><tr><td>SOF</td><td>0xFFC0</td><td>Start of Frame</td><td>必带</td></tr><tr><td>DHT</td><td>0xFFC4</td><td>Define Huffman Table</td><td>必带</td></tr><tr><td>SOS</td><td>0xFFDA</td><td>Start of Scan</td><td>必带</td></tr><tr><td>compress data</td><td>---</td><td>---</td><td>必带</td></tr><tr><td>EOI</td><td>0xFFD9</td><td>End of Image</td><td>必带</td></tr></tbody></table><p></p><p></p><h2>3.3 示例</h2><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/9022a3a506fd4056877bf159d02e49d2.png"></p><p><img src="/2025/09/17/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90png%E3%80%91%E3%80%90bmp%E3%80%91%E3%80%90jpg%E3%80%91%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/ba1c96873779416f91a27c6da8c974b3.png"></p><hr /><p>要详细分析 JPEG 格式并确定<strong>头部结束位置与像素数据起始位置</strong>，需结合 JPEG 的「<strong>标记（Marker）序列</strong>」结构（JPEG 由一系列以&nbsp;<code>0xFF</code>&nbsp;开头的标记组成，不同标记承载元数据或像素数据），逐字节拆解如下：</p><h3>3.3.1 JPEG 标记与结构回顾</h3><p>JPEG 文件由<strong>元数据标记</strong>（如文件起始、应用段、量化表、帧头、哈夫曼表等）和<strong>像素数据标记</strong>（扫描开始&nbsp;<code>SOS</code>）组成。关键标记的功能：</p><ul><li><code>FF D8</code>：<code>SOI</code>（Start of Image）&rarr; 文件起始，头部开始。</li><li><code>FF E0</code>：<code>APP0</code>&nbsp;&rarr; 应用段（常存 JFIF 元数据），头部。</li><li><code>FF DB</code>：<code>DQT</code>&nbsp;&rarr; 定义量化表（压缩参数），头部。</li><li><code>FF C0</code>：<code>SOF0</code>&nbsp;&rarr; 帧头（定义图像尺寸、位深），头部。</li><li><code>FF C4</code>：<code>DHT</code>&nbsp;&rarr; 定义哈夫曼表（编码参数），头部。</li><li><code>FF DA</code>：<code>SOS</code>（Start of Scan）&rarr; 扫描开始，<strong>像素数据的起始标志</strong>（此标记后为压缩的像素流）。</li></ul><h3>3.3.2 逐字节解析（结合截图偏移与内容）</h3><p>以下按十六进制偏移（如&nbsp;<code>00000000</code>&nbsp;表示第 0 字节）逐段分析：</p><h4>1. 偏移&nbsp;<code>00000000</code>&nbsp;-&nbsp;<code>00000001</code>：<code>FF D8</code></h4><ul><li>组成&nbsp;<code>SOI</code>（Start of Image）标记 &rarr; JPEG 文件的<strong>起始标志</strong>，头部开始。</li></ul><h4>2. 偏移&nbsp;<code>00000002</code>&nbsp;-&nbsp;<code>0000000F</code>：<code>FF E0 00 10 4A 46 49 46 00 01 01 00 01 00</code></h4><ul><li><code>FF E0</code>：<code>APP0</code>&nbsp;标记 &rarr; 应用段（此处为 JFIF 元数据），头部。</li><li><code>00 10</code>：<code>APP0</code>&nbsp;段<strong>长度</strong>（大端序，<code>0x0010</code>&nbsp;= 16 字节，含长度字段本身，实际数据长&nbsp;<code>16-2=14</code>&nbsp;字节）。</li><li><code>4A 46 49 46 00</code>：ASCII 为&nbsp;<code>&quot;JFIF\0&quot;</code>&nbsp;&rarr; 确认是 JFIF 格式的应用段，头部元数据。</li><li>后续&nbsp;<code>01 01 00 01 00</code>：JFIF 版本、密度单位、分辨率等信息，头部。</li></ul><h4>3. 偏移&nbsp;<code>00000010</code>&nbsp;-&nbsp;<code>00000050</code>：<code>FF DB 00 43 ...</code>（量化表数据）</h4><ul><li><code>FF DB</code>：<code>DQT</code>&nbsp;标记 &rarr; 定义量化表（压缩时的量化矩阵，属于压缩参数），头部。</li><li><code>00 43</code>：<code>DQT</code>&nbsp;段<strong>长度</strong>（<code>0x0043</code>&nbsp;= 67 字节，实际数据长&nbsp;<code>67-2=65</code>&nbsp;字节）。</li><li>后续字节：量化表的具体数值（亮度或色度的量化系数），头部元数据。</li></ul><h4>4. 偏移&nbsp;<code>00000050</code>&nbsp;-&nbsp;<code>00000058</code>：<code>FF C0 00 0B 08 00 F0 00 40</code></h4><ul><li><code>FF C0</code>：<code>SOF0</code>&nbsp;标记 &rarr; 帧头（定义图像核心参数），头部。</li><li><code>00 0B</code>：<code>SOF0</code>&nbsp;段<strong>长度</strong>（<code>0x000B</code>&nbsp;= 11 字节，实际数据长&nbsp;<code>11-2=9</code>&nbsp;字节）。</li><li><code>08</code>：<strong>位深</strong>&nbsp;&rarr; 每个颜色分量占 8 位。</li><li><code>00 F0</code>：<strong>图像高度</strong>（大端序，<code>0x00F0</code>&nbsp;= 240 像素）。</li><li><code>00 40</code>：<strong>图像宽度</strong>（大端序，<code>0x0040</code>&nbsp;= 64 像素）。</li><li>后续字节：颜色分量的采样系数等，头部。</li></ul><h4>5. 偏移&nbsp;<code>00000060</code>&nbsp;-&nbsp;<code>00000130</code>：<code>FF C4 00 1F ...</code>（哈夫曼表数据）</h4><ul><li><code>FF C4</code>：<code>DHT</code>&nbsp;标记 &rarr; 定义哈夫曼编码表（压缩编码的关键表），头部。</li><li><code>00 1F</code>：<code>DHT</code>&nbsp;段<strong>长度</strong>（<code>0x001F</code>&nbsp;= 31 字节，实际数据长&nbsp;<code>31-2=29</code>&nbsp;字节）。</li><li>后续字节：哈夫曼表的码长、码值等，头部元数据。</li></ul><h4>6. 偏移&nbsp;<code>00000130</code>&nbsp;-&nbsp;<code>00000131</code>：<code>FF DA</code></h4><ul><li><code>FF DA</code>：<code>SOS</code>&nbsp;标记 &rarr;&nbsp;<strong>扫描开始</strong>，是「头部元数据」与「像素压缩数据」的<strong>分界点</strong>。</li></ul><h3>3.3.3 结论：头部结束与像素数据起始</h3><p>JPEG 的<strong>头部（所有元数据）在&nbsp;<code>FF DA</code>&nbsp;标记之前结束</strong>；<strong><code>FF DA</code>&nbsp;标记之后的第一个字节，就是真正的像素压缩数据的起始位置</strong>。</p><p>简言之：从截图中&nbsp;<code>FF DA</code>（偏移&nbsp;<code>00000130</code>&nbsp;-&nbsp;<code>00000131</code>）之后的字节开始，即为 JPEG 的像素数据部分。JPEG 文件的 ** 结尾由&nbsp;<code>FF D9</code>&nbsp;标记（EOI，End of Image）** 标识。在提供的截图中，偏移&nbsp;<code>00006640</code>&nbsp;附近的&nbsp;<code>FF D9</code>&nbsp;就是 JPEG 的<strong>结束标记</strong>&mdash;&mdash; 从该标记开始，JPEG 文件的有效数据（包括头部元数据、像素压缩数据）全部结束。</p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>jpg bmp png</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Embedded System】【Kconfig】基于WM IoT SDK和ESP IDF SDK的关于【Kconfig】【menuconfig】【prj.config】等配置文件的深入理解</title>
    <link href="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/"/>
    <url>/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>前言</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要深入理解&nbsp;<code>kconfig</code>、<code>menuconfig</code>、<code>prj.config</code>&nbsp;及其在工程编译中的作用，可以从「配置系统的本质」入手 &mdash;&mdash; 它们是一套用于<strong>管理编译选项、实现功能模块化和可定制化</strong>的工具链，尤其在嵌入式 / 物联网大型工程中至关重要。以下结合 WM to IoT SDK 和 ESP32 IDF 的对比，进行详细解析。</p><hr /><h1>一、Kconfig</h1><h2>1.1&nbsp;Kconfig的起源与发展</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kconfig 是 Linux 内核配置系统的核心，其起源与发展深刻反映了开源社区对复杂系统配置管理的探索。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Kconfig Language — The Linux Kernel documentation" href="https://www.kernel.org/doc/html/v6.1/kbuild/kconfig-language.html" title="Kconfig Language — The Linux Kernel documentation">Kconfig Language &mdash; The Linux Kernel documentation</a></p><h3>1.1.1&nbsp;起源：从混乱到结构化的配置革命（2002 年）</h3><h4>（1）在 Linux 内核早期（2.4 版本及之前），配置系统依赖<code>Config.in</code>文件和交互式 shell 脚本，存在以下痛点：</h4><ul><li><strong>碎片化管理</strong>：配置选项分散在各级 Makefile 中，缺乏统一描述。</li><li><strong>交互体验差</strong>：用户需手动编辑文本文件或通过非可视化工具（如<code>make config</code>）逐项确认，效率低下。</li><li><strong>依赖关系模糊</strong>：复杂的编译依赖需开发者手动维护，容易导致配置冲突。</li></ul><h4>（2）2002 年，Linux 内核 2.5 开发周期中，David S. Miller 等开发者设计了 Kconfig 系统，首次实现：</h4><ul><li><strong>树状菜单结构</strong>：通过<code>menu</code>/<code>endmenu</code>构建层级化配置项，例如顶层<code>arch/$(ARCH)/Kconfig</code>聚合子目录配置。</li><li><strong>声明式语法</strong>：使用<code>config</code>定义选项，<code>depends on</code>描述依赖，<code>select</code>实现反向依赖，使配置逻辑清晰可维护。</li><li><strong>多态支持</strong>：引入<code>tristate</code>类型（y/m/n），支持功能模块化为内核内置、动态加载或禁用。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这一革新使内核配置从 &ldquo;手工拼图&rdquo; 转变为 &ldquo;菜单式定制&rdquo;，直接推动了<code>make menuconfig</code>等可视化工具的诞生。</p><h3>1.1.2 发展：从内核工具到配置领域的事实标准（2003 - 至今）</h3><h4>1. 内核版本迭代中的功能进化</h4><ul><li><strong>2.6 版本（2003 年）</strong>：Kconfig 成为内核标配，支持<code>source</code>指令动态加载子目录配置文件，形成分布式配置数据库。</li><li><strong>3.0 版本（2011 年）</strong>：引入预处理器（Preprocessor），支持<code>$(var)</code>形式的变量引用，环境变量可直接注入配置逻辑。</li><li><strong>5.0 版本（2019 年）</strong>：增强类型检查，<code>int</code>/<code>hex</code>/<code>string</code>类型支持范围限制（如<code>range</code>关键字），提升配置安全性。</li><li><strong>5.5 版本（2020 年）</strong>：新增<code>implies</code>关键字，简化复杂依赖关系描述（如<code>A implies B</code>表示 A 启用时 B 必须启用）。</li></ul><h4>2. 工具链与生态的完善</h4><ul><li><strong>配置界面扩展</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;文本界面&lt;/strong&gt;：&lt;code&gt;mconf&lt;/code&gt;（基于 ncurses）提供菜单导航，&lt;code&gt;conf&lt;/code&gt;实现非交互式配置。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;图形界面&lt;/strong&gt;：&lt;code&gt;qconf&lt;/code&gt;（Qt）、&lt;code&gt;xconfig&lt;/code&gt;（GTK）支持鼠标操作，降低使用门槛。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;自动化工具&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;code&gt;make oldconfig&lt;/code&gt;自动迁移旧配置文件，&lt;code&gt;make savedefconfig&lt;/code&gt;生成精简的默认配置模板。&lt;/li&gt;&lt;li&gt;&lt;code&gt;kconfiglib&lt;/code&gt;（Python 实现）支持编程式解析配置，被 Zephyr、ESP-IDF 等项目广泛采用。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;文档体系&lt;/strong&gt;：内核文档&lt;code&gt;Documentation/kbuild/kconfig-language.txt&lt;/code&gt;成为语法权威指南，涵盖从基础菜单定义到高级表达式的完整规范。&lt;/li&gt;</code></pre></ul><h4>3. 语法与语义的持续革新</h4><ul><li><strong>依赖表达式增强</strong>：支持<code>!</code>（非）、<code>&amp;&amp;</code>（与）、<code>||</code>（或）等逻辑运算符，以及<code>&gt;=</code>/<code>&lt;=</code>等比较操作，可组合复杂条件。</li><li><strong>帮助系统升级</strong>：<code>---help---</code>块提供富文本说明，支持超链接跳转至内核文档，显著降低新手上手难度。</li><li><strong>格式标准化</strong>：2022 年补丁将<code>.config</code>文件格式从注释形式（如<code># CONFIG_FOO is not set</code>）改为直接赋值（<code>CONFIG_FOO=n</code>），提升机器可读性。</li></ul><h3>1.1.3 生态扩展：从内核专属到跨领域配置范式（2005 年至今）</h3><p>Kconfig 的设计理念因其灵活性和可扩展性，被广泛移植到其他领域：</p><h4>1. 嵌入式系统的统治级配置方案</h4><ul><li><strong>U-Boot</strong>：使用 Kconfig 管理硬件驱动和启动参数，支持跨架构配置。</li><li><strong>Buildroot</strong>：通过 Kconfig 实现嵌入式 Linux 系统的模块化构建，支持交叉编译选项。</li><li><strong>Zephyr RTOS</strong>：基于 Kconfiglib 扩展，支持环境变量注入和通配符源文件加载，适应物联网设备的碎片化需求。</li></ul><h4>2. 工业级项目的配置基石</h4><ul><li><strong>ESP-IDF</strong>：乐鑫物联网开发框架深度集成 Kconfig，实现 Wi-Fi、蓝牙等功能的可视化配置。</li><li><strong>ACRN</strong>：英特尔开源虚拟化平台通过 Kconfig 管理虚拟机配置策略，支持动态调整资源分配。</li><li><strong>ROS 2</strong>：机器人操作系统采用 Kconfig 管理组件编译选项，适配多机器人协同场景。</li></ul><h4>3. 跨语言实现与工具链创新</h4><ul><li><strong>Kconfiglib</strong>：Python 实现的 Kconfig 解析库，支持自定义配置校验和代码生成，被 Zephyr 等项目作为核心工具。</li><li><strong>kconfig-frontends</strong>：提供 C 语言实现的通用配置框架，支持插件化扩展（如 JSON 输出、CI 集成）。</li><li><strong>VSCode 插件</strong>：社区开发的 Kconfig 语法高亮和自动补全工具，提升 IDE 集成体验。</li></ul><h2>1.2 Kconfig的本质</h2><p>&nbsp; &nbsp; &nbsp; &nbsp;从表面来看，Kconfig 是一种具有&ldquo;Kconfig语法&rdquo;的&ldquo;<strong>配置工具</strong>&rdquo; ，但是，从其<strong>核心定位、解决的根本问题、设计逻辑</strong>三个维度拆解 &mdash;&mdash; 本质上是一套为<strong>复杂模块化系统</strong>（如 Linux 内核、嵌入式 OS）设计的、集 &ldquo;配置描述、依赖管理、交互衔接&rdquo; 于一体的<strong>结构化配置管理体系</strong>。</p><h3>1.2.1 本质 1：定义 &ldquo;配置逻辑&rdquo; 的结构化描述语言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kconfig 首先是一套<strong>声明式语法规范</strong>，其核心作用是将 &ldquo;零散的配置项&rdquo; 转化为 &ldquo;可被机器解析、人类理解的结构化逻辑&rdquo;。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在没有 Kconfig 的早期内核中，配置项（如是否启用 USB 驱动、是否支持 IPv6）分散在 Makefile、README 甚至代码注释中，依赖开发者手动记忆 &ldquo;选 A 必须先选 B&rdquo; 的规则 &mdash;&mdash; 而 Kconfig 通过统一语法，将这些 &ldquo;隐性规则&rdquo; 转化为 &ldquo;显性描述&rdquo;，实现了配置逻辑的<strong>标准化与可追溯</strong>。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其语法的核心设计围绕 &ldquo;描述配置的完整属性&rdquo; 展开，例如：</p><ul><li><strong>配置项定义</strong>：用<code>config</code>关键字声明选项（如<code>config CONFIG_USB</code>），并指定类型（<code>bool</code>布尔值、<code>tristate</code>三态值<code>y/m/n</code>、<code>int</code>整数、<code>string</code>字符串），明确配置项的取值范围；</li><li><strong>层级与交互</strong>：用<code>menu</code>/<code>endmenu</code>、<code>if</code>/<code>endif</code>构建菜单结构，让用户能按 &ldquo;功能分类&rdquo;（如 &ldquo;Device Drivers&rdquo;&rarr;&ldquo;USB Support&rdquo;）查找配置项，而非面对杂乱的列表；</li><li><strong>语义说明</strong>：用<code>---help---</code>块添加富文本注释（如驱动功能、适用场景、依赖模块），将 &ldquo;技术知识&rdquo; 嵌入配置流程，降低使用门槛。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简言之，这套描述语言的本质是：<strong>为 &ldquo;配置项&rdquo; 赋予 &ldquo;逻辑属性&rdquo;（依赖、类型、层级、说明），让配置从 &ldquo;无序的参数&rdquo; 变成 &ldquo;有序的逻辑单元&rdquo;</strong>。</p><h3>1.2.2 本质 2：保障 &ldquo;配置一致性&rdquo; 的依赖管理引擎</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;复杂系统的配置痛点并非 &ldquo;选哪个选项&rdquo;，而是 &ldquo;选项间的关联冲突&rdquo;&mdash;&mdash; 例如：若启用 &ldquo;USB 3.0 驱动&rdquo;（A），必须先启用 &ldquo;USB 核心框架&rdquo;（B）；若禁用 &ldquo;网络子系统&rdquo;（C），则 &ldquo;WiFi 驱动&rdquo;（D）必须自动禁用。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kconfig 的核心能力之一，是内置了一套<strong>智能依赖管理引擎</strong>，其本质是 &ldquo;自动校验并维护配置项间的逻辑一致性&rdquo;，避免人工配置导致的 &ldquo;无效组合&rdquo; 或 &ldquo;编译错误&rdquo;。</p><p>这套引擎的工作逻辑可拆解为三类核心依赖规则：</p><table><thead><tr><th>依赖类型</th><th>作用场景</th><th>本质目标</th></tr></thead><tbody><tr><td><strong>正向依赖</strong></td><td><code>depends on</code>（如<code>config A depends on B</code>）</td><td>确保 &ldquo;子选项&rdquo; 依赖的 &ldquo;父选项&rdquo; 已启用，避免 &ldquo;无基础的配置&rdquo;（如无 USB 核心却选 USB 驱动）</td></tr><tr><td><strong>反向依赖</strong></td><td><code>select</code>（如<code>config A select B</code>）</td><td>启用 &ldquo;主选项&rdquo; 时自动启用 &ldquo;关联选项&rdquo;（如选 &ldquo;蓝牙&rdquo; 自动启用 &ldquo;RFkill&rdquo; 电源管理），减少手动操作</td></tr><tr><td><strong>隐含依赖</strong></td><td><code>implies</code>（如<code>config A implies B</code>）</td><td>启用 &ldquo;主选项&rdquo; 时强制要求 &ldquo;关联选项&rdquo; 可配置（但不强制启用），平衡灵活性与兼容性（如选 &ldquo;64 位内核&rdquo; 隐含 &ldquo;支持 64 位指令集&rdquo;）</td></tr></tbody></table><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;此外，引擎还支持逻辑运算符（<code>!</code>非、<code>&amp;&amp;</code>与、<code>||</code>或）和版本 / 架构判断（如<code>depends on ARCH_X86 &amp;&amp; KERNEL_VERSION &gt;= 5.0</code>），能处理复杂场景下的依赖组合。其本质是：<strong>用机器逻辑替代人工记忆，确保任何配置组合都 &ldquo;语法合法、编译可行&rdquo;</strong>。</p><h3>1.2.3 本质 3：连接 &ldquo;用户需求&rdquo; 与 &ldquo;编译系统&rdquo; 的桥梁</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kconfig 并非孤立存在，其本质还是一套<strong>交互与自动化的衔接层</strong>&mdash;&mdash; 一边承接 &ldquo;用户对系统功能的定制需求&rdquo;，一边向 &ldquo;编译工具链（如 Makefile、CMake）输出标准化配置&rdquo;，解决了 &ldquo;用户选择&rdquo; 与 &ldquo;机器编译&rdquo; 的断层问题。</p><p>这个 &ldquo;桥梁作用&rdquo; 的完整流程如下：</p><ol><li><strong>用户输入层</strong>：用户通过 Kconfig 配套工具（<code>make menuconfig</code>文本菜单、<code>make xconfig</code>图形界面），在 Kconfig 定义的 &ldquo;菜单结构&rdquo; 中选择配置项（如选 &ldquo;USB 驱动为模块加载&rdquo;）；</li><li><strong>解析与校验层</strong>：工具（如<code>mconf</code>、<code>kconfiglib</code>）解析所有 Kconfig 文件（分布式存在于各子目录），根据依赖引擎校验用户选择的合法性（如用户漏选依赖项时自动提示或补全）；</li><li><strong>输出适配层</strong>：生成标准化的<code>.config</code>文件（记录所有配置项的最终值，如<code>CONFIG_USB=m</code>），该文件可被编译系统直接读取 &mdash;&mdash; 例如 Makefile 通过<code>include .config</code>获取配置，决定 &ldquo;哪些代码文件要编译、哪些宏要定义&rdquo;。</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简言之，这层桥梁的本质是：<strong>屏蔽 &ldquo;配置逻辑&rdquo; 与 &ldquo;编译实现&rdquo; 的细节差异，让用户无需懂编译原理就能定制系统，让编译工具无需懂用户需求就能获取准确参数</strong>。</p><h3>1.2.4 本质总结：为 &ldquo;复杂模块化系统&rdquo; 而生的 &ldquo;配置抽象层&rdquo;</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;无论是 Linux 内核（数万配置项、跨数十种架构），还是 U-Boot、Zephyr（嵌入式场景的碎片化硬件需求），其共同痛点是：<strong>系统越复杂、模块越多，配置的 &ldquo;管理成本&rdquo; 和 &ldquo;出错概率&rdquo; 呈指数级上升</strong>。</p><p>Kconfig 的本质，正是为这类系统构建了一套 &ldquo;配置抽象层&rdquo;：</p><ul><li>向上，通过结构化菜单和交互工具，让 &ldquo;复杂配置&rdquo; 变得可操作；</li><li>向下，通过依赖引擎和标准化输出，让 &ldquo;配置结果&rdquo; 变得可信赖；</li><li>向内，通过声明式语法，让 &ldquo;配置逻辑&rdquo; 变得可维护、可复用。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最终目标只有一个：<strong>解耦 &ldquo;配置需求&rdquo; 与 &ldquo;代码实现&rdquo;，让复杂系统的 &ldquo;定制化&rdquo; 从 &ldquo;人工试错&rdquo; 变成 &ldquo;系统化管理&rdquo;</strong>&mdash;&mdash; 这也是它能从 Linux 内核扩散到整个嵌入式生态（U-Boot、Buildroot、ESP-IDF）的根本原因：其解决的 &ldquo;复杂系统配置问题&rdquo; 具有通用性。</p><h2>1.3&nbsp;Kconfig的工作原理与流程</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在拆解具体流程前，需先明确支撑 Kconfig 运行的三大底层机制，这是理解流程的基础：</p><h3>1.3.1 Kconfig 的核心工作原理：三大核心机制</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在拆解具体流程前，需先明确支撑 Kconfig 运行的三大底层机制，这是理解流程的基础：</p><h4>1. 配置树（Configuration Tree）模型</h4><p>Kconfig 通过<strong>树形结构</strong>管理所有配置项，将分散在系统各目录的 Kconfig 文件（如内核的<code>drivers/usb/Kconfig</code>、<code>net/Kconfig</code>）整合为一个 &ldquo;分层菜单&rdquo;。</p><ul><li><strong>树的构成</strong>：根节点是总菜单（如 &ldquo;Linux Kernel Configuration&rdquo;），子节点是功能分类（如 &ldquo;Device Drivers&rdquo;&ldquo;Networking Support&rdquo;），叶子节点是具体配置项（如<code>CONFIG_USB</code>&ldquo;CONFIG_IPV6&rdquo;）。</li><li><strong>构建方式</strong>：通过<code>source</code>关键字实现文件整合（如根目录<code>Kconfig</code>用<code>source &quot;drivers/Kconfig&quot;</code>引入驱动子目录的 Kconfig，驱动目录再用<code>source &quot;drivers/usb/Kconfig&quot;</code>引入 USB 子项），形成 &ldquo;根&rarr;子目录&rarr;具体配置&rdquo; 的完整树形结构。</li><li><strong>核心作用</strong>：将 &ldquo;零散的配置项&rdquo; 转化为 &ldquo;有层级的菜单&rdquo;，既方便用户按功能查找，也便于工具统一解析。</li></ul><h4>2. 依赖关系图（Dependency Graph）机制</h4><p>Kconfig 将配置项间的依赖规则（<code>depends on</code>/<code>select</code>/<code>implies</code>）转化为<strong>有向无环图（DAG）</strong>，由依赖引擎动态维护：</p><ul><li><strong>节点</strong>：每个配置项（如<code>CONFIG_USB</code>）是图中的一个节点；</li><li><strong>边</strong>：依赖规则是节点间的边（如<code>CONFIG_USB_3.0 depends on CONFIG_USB</code>对应 &ldquo;<code>CONFIG_USB</code>&rarr;<code>CONFIG_USB_3.0</code>&rdquo; 的有向边）；</li><li><strong>核心作用</strong>：依赖引擎通过遍历该图，自动判断 &ldquo;用户选择的配置项是否合法&rdquo;（如选<code>CONFIG_USB_3.0</code>时，检查<code>CONFIG_USB</code>是否已启用），避免无效配置。</li></ul><h4>3. 双向交互校验机制</h4><p>Kconfig 并非 &ldquo;用户选完再统一校验&rdquo;，而是<strong>实时交互 + 动态校验</strong>：</p><ul><li><strong>正向校验</strong>：用户选择配置项时，工具（如<code>menuconfig</code>）实时检查其依赖项是否满足 &mdash;&mdash; 若依赖不满足（如未选<code>CONFIG_USB</code>却想选<code>USB_3.0</code>），配置项会被 &ldquo;灰色置灰&rdquo;（不可选），或弹出提示要求先启用依赖项；</li><li><strong>反向联动</strong>：若用户启用带<code>select</code>规则的配置项（如选<code>CONFIG_BLUETOOTH</code>，其通过<code>select CONFIG_RFKILL</code>关联），工具会自动启用被<code>select</code>的配置项（无需用户手动选<code>CONFIG_RFKILL</code>），减少操作成本。</li></ul><h3>1.3.2&nbsp;Kconfig 的完整工作流程：五步法闭环</h3><p>以 Linux 内核配置为例（其他使用 Kconfig 的系统如 U-Boot、Zephyr 流程一致），完整流程可分为 5 个关键步骤，每个步骤有明确的 &ldquo;输入、处理、输出&rdquo;：</p><h4><span style="background-color:#fbd4d0">步骤 1：准备阶段 &mdash;&mdash;Kconfig 文件的组织与整合</span></h4><p><strong>核心任务</strong>：收集所有 Kconfig 文件，通过<code>source</code>关键字构建完整的 &ldquo;配置树定义&rdquo;。</p><ul><li><strong>输入</strong>：分散在系统各子目录的 Kconfig 文件（如内核根目录<code>Kconfig</code>、<code>drivers/Kconfig</code>、<code>fs/Kconfig</code>等）；</li><li><strong>处理</strong>：<ol><li>从 &ldquo;根 Kconfig 文件&rdquo;（如内核根目录<code>Kconfig</code>）开始解析；</li><li>遇到<code>source &quot;xxx/Kconfig&quot;</code>指令时，递归读取对应子目录的 Kconfig 文件，将其内容 &ldquo;嵌入&rdquo; 当前配置树；</li><li>最终形成一个包含 &ldquo;所有功能分类、所有配置项、所有依赖规则&rdquo; 的<strong>完整配置树定义</strong>（内存中的树形数据结构）；</li></ol></li><li><strong>输出</strong>：内存中的 &ldquo;配置树模型&rdquo;（包含菜单层级、配置项属性、依赖规则）。</li></ul><blockquote><p>示例：内核根目录<code>Kconfig</code>中的<code>source &quot;drivers/Kconfig&quot;</code>，会将<code>drivers/</code>目录下的 Kconfig 文件内容整合进来；而<code>drivers/Kconfig</code>中的<code>source &quot;drivers/usb/Kconfig&quot;</code>，再进一步整合 USB 驱动相关的配置项。</p></blockquote><h4><span style="background-color:#fbd4d0">步骤 2：解析阶段 &mdash;&mdash; 工具读取配置树与历史配置</span></h4><p><strong>核心任务</strong>：Kconfig 工具（如<code>mconf</code>、<code>xconf</code>）读取 &ldquo;配置树模型&rdquo; 和历史<code>.config</code>文件（若存在），初始化配置状态。</p><ul><li><strong>输入</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;步骤 1 生成的 &amp;ldquo;配置树模型&amp;rdquo;；&lt;/li&gt;&lt;li&gt;历史配置文件（若用户之前配置过，根目录会有&lt;code&gt;.config&lt;/code&gt;文件，记录上次的配置结果）；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;处理&lt;/strong&gt;：&lt;ol&gt;&lt;li&gt;工具解析 &amp;ldquo;配置树模型&amp;rdquo;，识别所有配置项的类型（&lt;code&gt;bool&lt;/code&gt;/&lt;code&gt;tristate&lt;/code&gt;/&lt;code&gt;int&lt;/code&gt;等）、依赖规则、帮助信息；&lt;/li&gt;&lt;li&gt;若存在&lt;code&gt;.config&lt;/code&gt;文件，工具会将历史配置值（如&lt;code&gt;CONFIG_USB=m&lt;/code&gt;）&amp;ldquo;填充&amp;rdquo; 到对应的配置项中，作为初始状态；&lt;/li&gt;&lt;li&gt;若不存在&lt;code&gt;.config&lt;/code&gt;文件，工具会使用 Kconfig 中定义的&lt;code&gt;default&lt;/code&gt;值（如&lt;code&gt;config CONFIG_USB default n&lt;/code&gt;）作为初始状态；&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;输出&lt;/strong&gt;：&amp;ldquo;初始化后的配置树&amp;rdquo;（每个配置项都有初始值，且依赖关系已关联）。&lt;/li&gt;</code></pre></ul><h4><span style="background-color:#fbd4d0">步骤 3：交互阶段 &mdash;&mdash; 用户定制配置需求</span></h4><p><strong>核心任务</strong>：用户通过交互工具修改配置，工具实时校验并反馈合法性。</p><ul><li><strong>输入</strong>：步骤 2 生成的 &ldquo;初始化配置树&rdquo;、用户的操作（选择 / 取消配置项）；</li><li><strong>处理</strong>：<ol><li>工具提供交互界面（如<code>make menuconfig</code>是文本菜单、<code>make xconfig</code>是 Qt 图形界面、<code>make gconfig</code>是 GTK 图形界面），展示 &ldquo;配置树&rdquo; 的层级菜单；</li><li>用户在菜单中导航（如进入 &ldquo;Device Drivers&rdquo;&rarr;&ldquo;USB Support&rdquo;），对配置项进行操作（如将<code>CONFIG_USB</code>从 &ldquo;n&rdquo; 改为 &ldquo;y&rdquo; 或 &ldquo;m&rdquo;）；</li><li>工具实时调用 &ldquo;依赖引擎&rdquo; 校验操作：<ul><li>若用户选择的配置项依赖不满足（如选<code>USB_3.0</code>但<code>USB</code>未启用），配置项会被置灰，无法选择；</li><li>若用户选择的配置项带<code>select</code>规则（如选<code>BLUETOOTH</code>），工具会自动将<code>RFKILL</code>设为 &ldquo;y&rdquo;，并提示 &ldquo;已自动启用依赖项&rdquo;；</li></ul></li></ol></li><li><strong>输出</strong>：&ldquo;用户修改后的配置树&rdquo;（记录所有配置项的最终选择值）。</li></ul><h4><span style="background-color:#fbd4d0">步骤 4：校验与计算阶段 &mdash;&mdash; 依赖引擎最终确认合法性</span></h4><p><strong>核心任务</strong>：依赖引擎遍历 &ldquo;修改后的配置树&rdquo;，解决潜在冲突，确保所有配置项逻辑一致。</p><ul><li><strong>输入</strong>：步骤 3 生成的 &ldquo;用户修改后的配置树&rdquo;；</li><li><strong>处理</strong>：<ol><li>依赖引擎遍历所有配置项，检查 &ldquo;正向依赖&rdquo;（<code>depends on</code>）：确保所有已启用的配置项，其依赖项均已启用；</li><li>处理 &ldquo;反向依赖&rdquo;（<code>select</code>）：若 A<code>select</code>B，且 A 已启用，则强制 B 启用（即使用户未手动选 B）；</li><li>解决冲突：若存在 &ldquo;循环依赖&rdquo;（如 A 依赖 B，B 依赖 A）或 &ldquo;矛盾配置&rdquo;（如 A 启用但 A 的依赖项 B 被禁用），工具会弹出错误提示，要求用户修正；</li><li>补全默认值：对用户未操作的配置项，按<code>default</code>值或依赖关系自动填充（如未选<code>IPV6</code>，则默认设为 &ldquo;n&rdquo;）；</li></ol></li><li><strong>输出</strong>：&ldquo;最终合法的配置集&rdquo;（所有配置项无冲突，逻辑一致）。</li></ul><h4><span style="background-color:#fbd4d0">步骤 5：输出阶段 &mdash;&mdash; 生成.config 文件，衔接编译系统</span></h4><p><strong>核心任务</strong>：将 &ldquo;最终合法的配置集&rdquo; 转化为标准化文件，供编译系统（Makefile、CMake）使用。</p><ul><li><strong>输入</strong>：步骤 4 生成的 &ldquo;最终合法的配置集&rdquo;；</li><li><strong>处理</strong>：<ol><li>工具将每个配置项的最终值，按 &ldquo;<code>CONFIG_XXX=值</code>&rdquo; 的格式写入根目录的<code>.config</code>文件；<ul><li>布尔值（<code>bool</code>）：启用为<code>CONFIG_XXX=y</code>，禁用为<code># CONFIG_XXX is not set</code>；</li><li>三态值（<code>tristate</code>）：编译进内核为<code>y</code>，编译为模块为<code>m</code>，禁用为<code># CONFIG_XXX is not set</code>；</li><li>整数 / 字符串（<code>int</code>/<code>string</code>）：如<code>CONFIG_BAUD_RATE=115200</code>、<code>CONFIG_HOSTNAME=&quot;myboard&quot;</code>；</li></ul></li><li>同时生成<code>include/config/auto.conf</code>文件（内核场景）：将<code>.config</code>中的有效配置（<code>=y</code>/<code>=m</code>）提取出来，直接供 Makefile<code>include</code>调用；</li></ol></li><li><strong>输出</strong>：<ul><li><code>.config</code>：人类可读的配置文件，记录所有配置项的最终状态，可手动修改（需重新执行<code>make oldconfig</code>校验）；</li><li><code>auto.conf</code>（可选）：编译系统专用的配置文件，简化 Makefile 对配置项的引用。</li></ul></li></ul><h3>1.3.3 流程总结：从 &ldquo;用户需求&rdquo; 到 &ldquo;编译配置&rdquo; 的桥梁</h3><p>Kconfig 的整个流程本质是 &ldquo;解耦与衔接&rdquo;：</p><ul><li>解耦：将 &ldquo;配置规则定义&rdquo;（Kconfig 文件）、&ldquo;用户交互&rdquo;（menuconfig/xconfig）、&ldquo;依赖校验&rdquo;（引擎）、&ldquo;编译使用&rdquo;（.config）拆分为独立环节，便于维护；</li><li>衔接：通过 &ldquo;配置树&rdquo;&ldquo;依赖图&rdquo;&ldquo;双向校验&rdquo; 确保各环节数据一致，最终让 &ldquo;用户的功能选择&rdquo; 精准转化为 &ldquo;编译系统能识别的配置参数&rdquo;。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这也是为什么 Kconfig 能成为 Linux 内核及嵌入式生态的 &ldquo;标配配置工具&rdquo;&mdash;&mdash; 其流程设计完美解决了 &ldquo;复杂系统（数万配置项、跨架构）的定制化需求&rdquo; 与 &ldquo;编译合法性保障&rdquo; 之间的核心矛盾。</p><h3>1.3.4 简化的流程总结</h3><p>简单来说：就是在支持kconfig的环境下</p><h4>（1）首先，准备基于一款芯片或者linux设备树的用<span style="background-color:#fbd4d0">Kconfig语法</span><span style="background-color:null">写</span>的材料&mdash;&mdash;即对应的原始<span style="background-color:#fbd4d0">Kconfig配置项</span><span style="background-color:null">。这里的</span><span style="background-color:#fbd4d0">Kconfig指的是</span>根 Kconfig 文件（总 Kconfig 文件）。</h4><p>比如：\wm_iot_sdk\tools\wm\Kconfig</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/149cb801d8954bd3b187bc86609427f4.png"></p><p>比如：D:\Espressif\frameworks\esp-idf-v5.5\Kconfig</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/c9082272994b4c10a3b7f925ec0cf0f2.png"></p><h4>（2）由顶层的Kconfig向下延伸，写出各个子设备的Kconfig。</h4><p>比如：各个组件下都有子kconfig文件</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/a9838b4f88ff456c968218087aaafd7d.png"></p><p>比如：&quot;D:\Espressif\frameworks\esp-idf-v5.5\components\esp_driver_gpio\Kconfig&quot;</p><p>&quot;D:\Espressif\frameworks\esp-idf-v5.5\components\bt\Kconfig&quot;等等</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/3887f912d03d43dc961f132a0d7f13fc.png"></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/2cafb0a52fec44c5a06b58bc7f07351e.png"></p><h4>（3）借助可视化的菜单式配置界面<code>menuconfig，可以通过各种工具实现这种menu界面，比如python。</code></h4><p>如：<code>make menuconfig</code>是文本菜单、<code>make xconfig</code>是 Qt 图形界面、<code>make gconfig</code>是 GTK 图形界面</p><p>比如：idf.py menuconfig&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ESP IDF的命令行下的menu配置界面</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/70f7181840a54c3eb75fa71087d986ae.png"></p><p>比如：vscode的ESPIDF插件下的界面配置齿轮按钮</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/716bcdade8c243179dc24e54012aa7c5.png"></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/753e7bbe50d24809a7c9d66aa033f91f.png"></p><p>比如：&nbsp;wm.py menuconfig&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WM SDK的命令行下的menu配置界面</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/d51dc5c050454275ac3a49ef7364a230.png"></p><p>比如：vscode的WM插件的界面配置齿轮按钮</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/8684110598f643d4967e1189f48a639e.png"></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/42111a438a674f2ba3e64e2dc570d333.png"></p><h4>（4）生成的 &ldquo;用户修改后的配置树&rdquo;，在配置初步产生的过程中，会自动寻找其组件相关的所有必要的依赖</h4><p>比如体现在使用wifi组件，必会启动其他的一些组件</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/84c71e0383324d4d93415fef203ea0fa.png"></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/bd374aa2a72d46a7847a4f9ffcb5236e.png"></p><h4>（5）生产最终要使用的标准化的.config文件，供编译系统（Makefile、CMake）使用。</h4><p>\EX1_led\sdkconfig</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/0227c1ddc596415ea3c1e77b23115313.png"></p><p>\WM_IDE_Examples_Workspaces\PWM\build\config\wmsdk.config</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/082cfcf32d2f4222ba39b3ab46c248ec.png"></p><h2>1.4&nbsp;Kconfig在芯片 SDK 中的核心价值</h2><p>Kconfig 的应用本质是为芯片 SDK 提供 &ldquo;<strong>动态适配能力</strong>&rdquo;，解决传统 SDK 的三大痛点：</p><h3>1.4.1 降低开发门槛，实现 &ldquo;零代码配置&rdquo;</h3><p>传统 SDK 需开发者手动修改<code>hal_conf.h</code>等头文件（如<code>#define UART_BAUDRATE 115200</code>），或在 Makefile 中添加宏定义，容易因参数错误（如波特率超出硬件范围）导致硬件异常。<br />Kconfig 通过：</p><ul><li>可视化菜单（如<code>menuconfig</code>）替代手动改代码；</li><li>范围限制（<code>range</code>）、依赖检查（<code>depends on</code>）防止无效参数；</li><li>帮助文本（<code>---help---</code>）直接嵌入硬件文档（如 &ldquo;UART2 仅 XX48 封装可用&rdquo;）。<br />让开发者无需熟悉 SDK 源码细节，即可完成硬件配置。</li></ul><h3>1.4.2&nbsp;优化固件体积与资源占用</h3><p>芯片（尤其是嵌入式微控制器）的 Flash 和 RAM 资源有限（如 8KB RAM、64KB Flash），冗余代码会直接导致功能失效（如固件超出 Flash 容量）。<br />Kconfig 通过 &ldquo;<strong>条件编译触发</strong>&rdquo; 实现精准裁剪：</p><ul><li>未启用的外设 / 协议栈（如未选<code>WIFI_ENABLE</code>），其驱动代码不会被编译（通过 Makefile 的<code>obj-$(CONFIG_WIFI_ENABLE) += wifi_driver.o</code>实现）；</li><li>调试功能（如<code>DEBUG_LOG</code>）在量产时关闭，可减少数 KB 固件体积；</li><li>资源参数（如<code>HEAP_SIZE</code>）按需配置，避免 RAM 浪费（如极简应用设为 32KB 而非默认 128KB）。</li></ul><h3>1.4.3&nbsp;统一 SDK 代码库，适配多场景需求</h3><p>芯片厂商通常需要维护 &ldquo;同一系列芯片的多个 SDK 版本&rdquo;（如针对 1MB Flash/2MB Flash 的不同版本），或为不同客户定制专属 SDK，导致维护成本激增。<br />Kconfig 通过 &ldquo;<strong>配置驱动差异</strong>&rdquo; 实现 &ldquo;单一 SDK 适配全场景&rdquo;：</p><ul><li>所有芯片变体的差异（Flash 大小、外设数量）通过 Kconfig 选项（<code>CHIP_MODEL</code>）和条件编译（<code>#ifdef CONFIG_CHIP_MODEL_XX48</code>）封装；</li><li>客户需求差异（如是否需要 OTA、是否启用加密）通过配置项开关，无需修改核心代码；</li><li>新增功能（如支持新外设）只需添加 Kconfig 选项和对应驱动，不影响现有配置逻辑。</li></ul><h3>1.4.4&nbsp;保障配置合法性，减少硬件冲突</h3><p>芯片硬件资源存在 &ldquo;排他性&rdquo;（如同一引脚不能同时作为 UART_TX 和 SPI_CLK），或 &ldquo;依赖性&rdquo;（如启用 ADC 前需先配置对应时钟）。传统手动配置易因忽略这些规则导致硬件冲突（如引脚复用错误）。<br />Kconfig 的依赖引擎通过：</p><ul><li><code>depends on</code>确保 &ldquo;前置条件&rdquo; 满足（如<code>ADC_ENABLE depends on ADC_CLOCK_ENABLE</code>）；</li><li><code>select</code>自动启用关联配置（如<code>SPI_ENABLE select SPI_PIN_MUX</code>，避免忘记配置引脚复用）；</li><li>冲突检查（如<code>config UART1_PIN_TX select PIN_10</code>与<code>config SPI_CLK_PIN select PIN_10</code>无法同时启用）。<br />从源头避免因配置错误导致的硬件异常。</li></ul><h3>价值总结</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在芯片 SDK 中，Kconfig 的核心价值是<strong>将 &ldquo;硬件能力&rdquo; 转化为 &ldquo;可配置选项&rdquo;，将 &ldquo;开发经验&rdquo; 转化为 &ldquo;依赖规则&rdquo;</strong>。它让 SDK 从 &ldquo;固定功能的代码集合&rdquo; 升级为 &ldquo;可动态适配的平台&rdquo;，既降低了开发者的使用门槛，又减少了厂商的维护成本，最终实现 &ldquo;一款 SDK 覆盖全芯片系列、满足多样化应用需求&rdquo; 的目标。这也是为什么主流芯片厂商（如 TI、NXP、乐鑫）的 SDK 均已深度集成 Kconfig 作为配置核心。</p><h2>1.5&nbsp;&nbsp;补充说明&mdash;&mdash;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="kconfiglib 扩展" href="https://pypi.org/project/kconfiglib/#kconfig-extensions" title="kconfiglib 扩展">kconfiglib 扩展</a></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kconfiglib 是 Kconfig 生态中极具影响力的扩展工具，它以 Python 库的形式重新实现了 Kconfig 的解析、依赖管理和配置生成逻辑，弥补了传统 C 语言实现工具（如&nbsp;<code>conf</code>、<code>menuconfig</code>）在灵活性、可编程性和自动化集成上的不足。自 2015 年由开发者 Ulf Magnusson 推出以来，kconfiglib 已成为 Zephyr RTOS、ESP-IDF 等主流嵌入式项目的配置核心，彻底改变了 Kconfig 的应用范式。</p><h3>1.5.1 kconfiglib 的起源：解决传统 Kconfig 工具的 &ldquo;定制化瓶颈&rdquo;</h3><p>传统 Kconfig 工具（如&nbsp;<code>conf</code>、<code>mconf</code>）基于 C 语言实现，其核心问题是</p><ul><li><strong>扩展性差</strong>：修改解析逻辑或添加新功能（如自定义依赖规则、配置校验）需修改 C 源码，编译后才能使用，迭代效率低；</li><li><strong>自动化弱</strong>：缺乏编程接口，难以通过脚本实现批量配置生成、依赖分析等自动化任务；</li><li><strong>跨生态适配难</strong>：不同项目（如 Linux 内核、U-Boot）的 Kconfig 存在细微语法差异，传统工具难以统一适配。</li></ul><p>2015 年，Ulf Magnusson 为解决这些问题，开发了 kconfiglib&mdash;&mdash; 一个纯 Python 实现的 Kconfig 解析库。它的设计目标是：<strong>提供一套完整的 API，让开发者能通过代码 &ldquo;操控&rdquo; Kconfig 的所有环节（解析、配置、依赖校验、输出）</strong>，而非局限于传统工具的固定交互流程。</p><h3>1.5.2&nbsp;kconfiglib 的核心能力：可编程的 Kconfig 全流程控制</h3><p>kconfiglib 并非简单替代传统工具，而是通过 Python API 暴露 Kconfig 的底层逻辑，实现 &ldquo;全流程可编程&rdquo;。其核心功能可概括为三大模块：</p><h4>1. 解析引擎：精准处理 Kconfig 语法与结构</h4><p>kconfiglib 能完整解析 Kconfig 的所有语法元素（包括&nbsp;<code>config</code>、<code>menu</code>、<code>depends on</code>、<code>select</code>、<code>source</code>&nbsp;等），并构建内存中的 &ldquo;配置对象模型&rdquo;。开发者可通过 API 直接访问配置树的任何节点：</p><ul><li><strong>获取配置项属性</strong>：如&nbsp;<code>config.choice</code>（判断是否为选择项）、<code>config.type</code>（获取类型：<code>bool</code>/<code>tristate</code>&nbsp;等）、<code>config.depends</code>（获取依赖表达式）；</li><li><strong>遍历配置树</strong>：通过&nbsp;<code>menu.children</code>&nbsp;访问子菜单，<code>configs</code>&nbsp;列表获取所有配置项，轻松实现 &ldquo;递归遍历所有 USB 相关配置&rdquo; 等需求；</li><li><strong>处理条件逻辑</strong>：解析&nbsp;<code>if</code>/<code>endif</code>&nbsp;块，自动计算配置项在不同条件下的可见性（如 &ldquo;仅当芯片型号为 XX48 时显示 UART2 配置&rdquo;）。</li></ul><p>示例代码（解析 Kconfig 并打印所有配置项名称）：</p><pre><code>import kconfiglib# 解析根 Kconfig 文件（如内核或 SDK 的根 Kconfig）kconf = kconfiglib.Kconfig("Kconfig")# 遍历所有配置项并打印名称for config in kconf.configs:    print(f"配置项: {config.name}")</code></pre><h4>2. 配置管理：动态修改与依赖校验</h4><p>kconfiglib 允许通过代码修改配置项的值，并实时触发依赖校验，替代手动操作&nbsp;<code>menuconfig</code>&nbsp;的过程：</p><ul><li><strong>设置配置值</strong>：通过&nbsp;<code>config.set_value(&quot;y&quot;)</code>、<code>config.set_value(&quot;m&quot;)</code>&nbsp;直接修改状态，支持&nbsp;<code>int</code>/<code>string</code>&nbsp;类型的精准赋值（如&nbsp;<code>config.set_value(115200)</code>&nbsp;设置波特率）；</li><li><strong>依赖自动联动</strong>：修改配置项后，kconfiglib 会自动执行&nbsp;<code>select</code>&nbsp;规则（如启用&nbsp;<code>CONFIG_BLUETOOTH</code>&nbsp;时，自动启用被&nbsp;<code>select</code>&nbsp;的&nbsp;<code>CONFIG_RFKILL</code>）；</li><li><strong>冲突检测</strong>：通过&nbsp;<code>kconf.validate()</code>&nbsp;检查所有配置项的依赖合法性，返回冲突详情（如 &ldquo;CONFIG_USB_3.0 依赖 CONFIG_USB，但后者未启用&rdquo;）。</li></ul><p>示例代码（自动启用 USB 并处理依赖）：</p><pre><code># 找到 USB 核心配置项usb_core = kconf.find_config("CONFIG_USB")# 启用 USB 核心（设为 y）usb_core.set_value("y")# 找到 USB 3.0 配置项（此时依赖已满足，可直接启用）usb3 = kconf.find_config("CONFIG_USB_3.0")usb3.set_value("y")# 校验所有配置是否合法errors = kconf.validate()if not errors:    print("配置合法！")</code></pre><h4>3. 输出与集成：对接编译系统与自定义格式</h4><p>kconfiglib 支持将最终配置导出为多种格式，无缝衔接编译系统或其他工具：</p><ul><li><strong>生成&nbsp;<code>.config</code>&nbsp;文件</strong>：通过&nbsp;<code>kconf.write_config(&quot;.config&quot;)</code>&nbsp;生成传统格式的配置文件，供 Makefile 直接使用；</li><li><strong>导出为字典 / JSON</strong>：将配置项以&nbsp;<code>{名称: 值}</code>&nbsp;形式导出（如&nbsp;<code>{&quot;CONFIG_USB&quot;: &quot;y&quot;, &quot;CONFIG_UART_BAUDRATE&quot;: 115200}</code>），方便与脚本或 Web 工具集成；</li><li><strong>生成头文件</strong>：通过&nbsp;<code>kconf.write_autoconf(&quot;autoconf.h&quot;)</code>&nbsp;生成&nbsp;<code>#define CONFIG_USB 1</code>&nbsp;格式的头文件，供 C 代码引用。</li></ul><h3>1.5.3&nbsp;kconfiglib 的典型应用场景：从 &ldquo;手动配置&rdquo; 到 &ldquo;自动化驱动&rdquo;</h3><p>kconfiglib 的核心价值在于将 Kconfig 从 &ldquo;用户交互工具&rdquo; 转变为 &ldquo;可编程组件&rdquo;，以下是其最具代表性的应用场景：</p><h4>1. 嵌入式 SDK 的 &ldquo;硬件自动适配&rdquo;</h4><p>芯片 / 开发板厂商需为不同硬件（如同一芯片的不同外设组合）提供默认配置。传统方式是维护多个&nbsp;<code>defconfig</code>&nbsp;文件（如&nbsp;<code>board1_defconfig</code>、<code>board2_defconfig</code>），但硬件变体增多时维护成本激增。</p><p>kconfiglib 可通过代码动态生成配置：</p><ul><li>读取硬件描述文件（如设备树&nbsp;<code>.dts</code>、JSON 硬件清单）；</li><li>根据硬件信息自动启用 / 禁用配置项（如检测到开发板有 Wi-Fi 模块，则自动设&nbsp;<code>CONFIG_WIFI=y</code>）；</li><li>生成对应的&nbsp;<code>.config</code>&nbsp;文件，实现 &ldquo;一种脚本适配所有硬件&rdquo;。</li></ul><p>Zephyr RTOS 正是通过 kconfiglib 实现了 &ldquo;设备树与 Kconfig 联动&rdquo;：设备树中定义的硬件（如&nbsp;<code>uart@40002000</code>）会被 kconfiglib 解析，自动启用对应的&nbsp;<code>CONFIG_UART</code>&nbsp;配置项。</p><h4>2. CI/CD 流程中的 &ldquo;配置合法性校验&rdquo;</h4><p>在大规模项目（如 Linux 内核、物联网 SDK）中，开发者提交的代码可能包含新的 Kconfig 选项或依赖规则，若存在冲突（如循环依赖、无效默认值），会导致后续编译失败。</p><p>kconfiglib 可集成到 CI 流程中：</p><ul><li>触发 CI 时，自动解析所有 Kconfig 文件；</li><li>检查新增配置项的语法合法性（如&nbsp;<code>range</code>&nbsp;范围是否有效、<code>depends on</code>&nbsp;表达式是否正确）；</li><li>模拟不同场景（如不同芯片型号）的配置，验证是否存在隐藏冲突；</li><li>若校验失败，直接阻断提交，避免问题流入后续环节。</li></ul><h4>3. 自定义配置工具的开发</h4><p>传统&nbsp;<code>menuconfig</code>&nbsp;虽经典，但难以满足特定场景的交互需求（如 Web 配置界面、针对新手的向导式配置）。kconfiglib 为自定义工具提供了底层引擎：</p><ul><li><strong>Web 配置界面</strong>：后端用 kconfiglib 解析 Kconfig，前端通过网页展示菜单（基于&nbsp;<code>menu.children</code>&nbsp;构建 HTML 层级结构），用户操作后通过 API 实时更新配置并校验，最终生成&nbsp;<code>.config</code>；</li><li><strong>向导式配置</strong>：针对新手设计 &ldquo;问答式流程&rdquo;（如 &ldquo;是否需要联网？&rarr; 选择 Wi-Fi 或蓝牙&rdquo;），通过 kconfiglib 自动关联底层配置项（如选择 Wi-Fi 时自动设&nbsp;<code>CONFIG_WIFI=y</code>&nbsp;并满足其依赖）；</li><li><strong>IDE 集成插件</strong>：在 VS Code 等 IDE 中开发插件，通过 kconfiglib 提供配置项自动补全、依赖关系提示（如输入&nbsp;<code>CONFIG_USB</code>&nbsp;时，提示 &ldquo;需先启用&nbsp;<code>CONFIG_USB_CORE</code>&rdquo;）。</li></ul><h4>4. Kconfig 语法扩展与定制规则</h4><p>部分项目需要扩展 Kconfig 语法（如添加自定义关键字），传统 C 工具难以实现，而 kconfiglib 可通过 Python 代码轻松扩展：</p><ul><li><strong>自定义依赖规则</strong>：如添加&nbsp;<code>requires</code>&nbsp;关键字（类似&nbsp;<code>depends on</code>&nbsp;但强制依赖项为&nbsp;<code>y</code>&nbsp;而非&nbsp;<code>m</code>），通过重写 kconfiglib 的依赖解析逻辑实现；</li><li><strong>配置项权限控制</strong>：为敏感配置项（如调试接口开关）添加访问控制（如仅管理员可修改），在&nbsp;<code>config.set_value()</code>&nbsp;时检查权限；</li><li><strong>动态默认值计算</strong>：根据环境变量或硬件参数动态生成默认值（如检测到 RAM 为 1MB 时，自动设&nbsp;<code>CONFIG_HEAP_SIZE=256</code>）。</li></ul><h3>1.5.4&nbsp;kconfiglib 与传统工具的对比：为何成为主流选择？</h3><table><thead><tr><th>特性</th><th>传统工具（<code>conf</code>/<code>menuconfig</code>）</th><th>kconfiglib</th></tr></thead><tbody><tr><td>实现语言</td><td>C</td><td>Python</td></tr><tr><td>扩展性</td><td>差（需修改 C 源码重新编译）</td><td>强（通过 Python 代码扩展）</td></tr><tr><td>自动化支持</td><td>弱（依赖命令行参数，灵活性低）</td><td>强（API 支持脚本化批量操作）</td></tr><tr><td>跨项目适配</td><td>难（不同项目需单独移植）</td><td>易（统一 API 适配所有 Kconfig）</td></tr><tr><td>学习成本</td><td>高（需理解 C 源码逻辑）</td><td>低（Python 语法简洁，文档完善）</td></tr></tbody></table><p>kconfiglib 的优势在嵌入式领域尤为明显：<strong>它将 Kconfig 从 &ldquo;工具&rdquo; 转化为 &ldquo;可编程的配置引擎&rdquo;</strong>，让开发者能围绕配置逻辑构建更复杂的自动化系统，而非局限于传统的 &ldquo;交互 - 保存&rdquo; 模式。</p><h3>1.5.5&nbsp;主流项目中的 kconfiglib 应用</h3><ul><li><strong>Zephyr RTOS</strong>：完全基于 kconfiglib 实现配置系统，通过其 API 实现设备树与 Kconfig 的联动、多板级配置的自动生成；</li><li><strong>ESP-IDF</strong>（乐鑫物联网开发框架）：用 kconfiglib 替代传统工具，支持通过 Python 脚本生成针对不同 ESP32 芯片的默认配置；</li><li><strong>Linux 内核辅助工具</strong>：如&nbsp;<code>kconfig-diff</code>（比较两个&nbsp;<code>.config</code>&nbsp;的差异）、<code>kconfig-grep</code>（搜索配置项）均基于 kconfiglib 开发；</li><li><strong>Buildroot</strong>：在部分扩展工具中集成 kconfiglib，实现更灵活的嵌入式系统配置生成。</li></ul><h3>总结</h3><p>kconfiglib 的出现是 Kconfig 生态的一次重要扩展 &mdash;&mdash; 它通过 Python 的灵活性和可编程性，打破了传统 C 工具的功能边界，让 Kconfig 从 &ldquo;终端交互工具&rdquo; 升级为 &ldquo;可嵌入任何系统的配置引擎&rdquo;。无论是嵌入式 SDK 的硬件适配、CI 流程的自动化校验，还是自定义配置工具的开发，kconfiglib 都提供了简单高效的解决方案，这也是它能成为现代嵌入式项目标配的核心原因。</p><hr /><h1>二、menuconfig</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menuconfig 是 Kconfig 系统中最具代表性的交互工具，也是开发者配置 Linux 内核、嵌入式系统（如 U-Boot、Buildroot）时最常用的界面。它的起源与发展紧密伴随 Kconfig 的演进，既解决了早期配置工具的效率问题，又凭借 &ldquo;轻量、直观、跨环境&rdquo; 的特性成为配置工具的标杆。</p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/70f7181840a54c3eb75fa71087d986ae.png"></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/d51dc5c050454275ac3a49ef7364a230.png"></p><h2>2.1menuconfig 的起源与发展</h2><h3>2.1.1 menuconfig 的起源：解决 &ldquo;配置效率痛点&rdquo; 的必然产物</h3><p>在 menuconfig 出现之前，Linux 内核的配置工具经历了两次原始阶段，而这些工具的缺陷直接催生了 menuconfig 的诞生：</p><h4>1. 初代工具的局限：从 &ldquo;手动改文件&rdquo; 到 &ldquo;线性提问&rdquo;</h4><ul><li><strong>手动编辑配置文件（1991-1994）</strong>：Linux 内核最初没有专用配置工具，开发者需直接修改<code>Makefile</code>或<code>config.h</code>中的宏定义（如<code>#define CONFIG_NET</code>），完全依赖人工记忆依赖关系，出错率极高。</li><li><strong><code>make config</code>工具（1994-2002）</strong>：随着内核功能增多，Linus Torvalds 开发了<code>make config</code>&mdash;&mdash; 通过命令行逐个提问（如 &ldquo;Enable networking? [n]&rdquo;），用户需按回车确认每个选项。但它的致命问题是：<ul><li><strong>线性流程不可回溯</strong>：若配置到第 100 个选项时发现第 10 个选项选错，必须从头重来；</li><li><strong>无层级结构</strong>：所有选项平铺展示（如 &ldquo;USB 驱动&rdquo; 和 &ldquo;文件系统&rdquo; 混杂），无法按功能分类查找；</li><li><strong>依赖不透明</strong>：若选择了不满足依赖的选项（如选 &ldquo;USB 3.0&rdquo; 却未选 &ldquo;USB 核心&rdquo;），工具只会在最后报错，用户需重新排查。</li></ul></li></ul><h4>2. menuconfig 的诞生：引入 &ldquo;菜单导航&rdquo; 与 &ldquo;实时校验&rdquo;（2002 年）</h4><p>2002 年，Linux 内核 2.5 开发周期中，伴随 Kconfig 系统的设计，开发者 Michael Elizabeth Chastain 基于 ncurses 库（终端图形库）实现了<code>menuconfig</code>，首次解决了上述痛点：</p><ul><li><strong>核心突破 1：层级菜单结构</strong>：将配置项按功能分组（如 &ldquo;Device Drivers&rdquo;&rarr;&ldquo;USB Support&rdquo;），用户可通过方向键上下导航、左右进入 / 退出子菜单，实现 &ldquo;树形浏览&rdquo;；</li><li><strong>核心突破 2：实时依赖反馈</strong>：不满足依赖的选项会被灰色置灰（如未选 &ldquo;USB 核心&rdquo; 时，&ldquo;USB 3.0&rdquo; 显示为灰色），并在底部提示依赖条件（如 &ldquo;Depends on: USB&rdquo;）；</li><li><strong>核心突破 3：可回溯编辑</strong>：支持随时返回上级菜单修改已配置项，无需从头开始。</li></ul><p>menuconfig 的首次出现，让内核配置从 &ldquo;痛苦的线性问答&rdquo; 变成 &ldquo;高效的菜单操作&rdquo;，迅速成为开发者首选工具，并随 Linux 2.6 内核（2003 年）正式发布，成为 Kconfig 系统的标配交互界面。</p><h3>2.1.2 menuconfig 的发展：从 &ldquo;能用&rdquo; 到 &ldquo;好用&rdquo; 的功能迭代</h3><p>menuconfig 的发展历程是 &ldquo;持续优化用户体验&rdquo; 与 &ldquo;适配 Kconfig 新特性&rdquo; 的过程，关键迭代节点如下：</p><h4>1. 基础功能完善（2003-2008）：从雏形到稳定</h4><ul><li><strong>Linux 2.6.10（2004）</strong>：加入 &ldquo;搜索功能&rdquo;（按<code>/</code>键输入关键词，如 &ldquo;usb&rdquo; 可定位所有相关选项），解决了 &ldquo;菜单层级过深导致找项困难&rdquo; 的问题；</li><li><strong>Linux 2.6.24（2008）</strong>：支持 &ldquo;帮助信息快速查看&rdquo;（按<code>?</code>键显示当前选项的<code>---help---</code>内容），无需退出菜单即可查阅配置说明；</li><li><strong>依赖引擎同步升级</strong>：随着 Kconfig 引入<code>select</code>、<code>implies</code>等关键字，menuconfig 实时更新依赖校验逻辑（如启用 A 时自动勾选被<code>select</code>的 B）。</li></ul><h4>2. 交互体验优化（2009-2015）：适配复杂配置场景</h4><ul><li><strong>支持鼠标操作</strong>（2010 年）：通过 ncurses 的鼠标事件支持，允许用户用鼠标点击菜单、勾选选项，降低终端操作门槛；</li><li><strong>搜索结果高亮与跳转</strong>（2012 年）：搜索结果中显示选项所在菜单路径（如 &ldquo;-&gt; Device Drivers -&gt; USB Support&rdquo;），按回车键可直接跳转到对应位置；</li><li><strong>配置项状态可视化</strong>：用不同颜色区分 &ldquo;已启用（y）&rdquo;&ldquo;模块（m）&rdquo;&ldquo;禁用（n）&rdquo; 状态（如绿色表示 y，蓝色表示 m），增强视觉区分度。</li></ul><h4>3. 跨场景适配（2016 - 至今）：从内核到嵌入式生态</h4><ul><li><strong>轻量化改造</strong>：针对嵌入式设备（如资源受限的 MCU），menuconfig 被移植到 Buildroot、Yocto、Zephyr 等系统，通过裁剪 ncurses 依赖（如使用 tiny-ncurses）适配小内存环境；</li><li><strong>国际化支持</strong>：加入多语言显示（如中文、日文），菜单和帮助信息可根据系统 locale 自动切换；</li><li><strong>与自动化工具联动</strong>：支持从<code>defconfig</code>（默认配置模板）快速初始化菜单（<code>make menuconfig</code>会先加载<code>defconfig</code>再进入交互），并能将用户修改保存为新的<code>defconfig</code>（<code>make savedefconfig</code>）。</li></ul><h3>2.1.3 menuconfig 的技术实现：依赖 ncurses 的 &ldquo;终端 GUI&rdquo;</h3><p>menuconfig 本质是一个基于 ncurses 库的文本界面程序，其核心实现可拆解为三部分：</p><h4>1. 底层依赖：ncurses 库的 &ldquo;终端绘图&rdquo; 能力</h4><p>ncurses（new curses）是一个终端控制库，能在字符终端上模拟图形界面元素（窗口、菜单、按钮）。menuconfig 通过 ncurses 实现：</p><ul><li><strong>窗口布局</strong>：将终端分为 &ldquo;菜单区&rdquo;（显示当前层级的配置项）、&ldquo;状态栏&rdquo;（底部显示操作提示，如 &ldquo;&lt;Enter&gt;选择，&lt;ESC&gt;返回&rdquo;）、&ldquo;帮助区&rdquo;（按<code>?</code>时弹出，显示选项说明）；</li><li><strong>输入处理</strong>：捕获方向键、回车键、<code>/</code>（搜索）、<code>?</code>（帮助）等按键事件，转化为菜单导航或配置操作；</li><li><strong>动态刷新</strong>：当用户修改配置项时，ncurses 实时重绘菜单（如灰色置灰不满足依赖的选项），确保界面状态与配置逻辑一致。</li></ul><h4>2. 核心逻辑：解析 Kconfig 构建 &ldquo;菜单模型&rdquo;</h4><p>menuconfig 的运行依赖两个关键步骤：</p><ul><li><strong>预处理</strong>：启动时调用<code>conf</code>工具解析所有 Kconfig 文件，生成内存中的 &ldquo;配置树&rdquo;（包含菜单层级、配置项属性、依赖规则）；</li><li><strong>菜单渲染</strong>：根据 &ldquo;配置树&rdquo; 动态生成界面 &mdash;&mdash; 父节点对应 &ldquo;子菜单入口&rdquo;（如 &ldquo;Device Drivers&rdquo;），叶子节点对应 &ldquo;可配置选项&rdquo;（如<code>CONFIG_USB</code>），并根据<code>.config</code>文件（或默认值）初始化选项状态（y/m/n）。</li></ul><h4>3. 交互与输出：实时校验与配置持久化</h4><ul><li><strong>实时校验</strong>：用户修改选项时（如将<code>CONFIG_USB</code>从 n 改为 y），menuconfig 调用 Kconfig 的依赖引擎检查合法性：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;若修改会导致依赖冲突（如启用 A 但 A 的依赖 B 未启用），则拒绝修改并在状态栏提示原因；&lt;/li&gt;&lt;li&gt;若修改触发&lt;code&gt;select&lt;/code&gt;规则（如启用 A 会自动启用 B），则自动更新 B 的状态并刷新界面。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;结果输出&lt;/strong&gt;：用户退出菜单时，menuconfig 将最终配置写入&lt;code&gt;.config&lt;/code&gt;文件（格式如&lt;code&gt;CONFIG_USB=y&lt;/code&gt;），供后续编译使用。&lt;/li&gt;</code></pre></ul><h3>2.1.4 menuconfig 与其他 Kconfig 工具的对比：为何它成为 &ldquo;首选&rdquo;？</h3><p>Kconfig 生态中还有多个交互工具（如 xconfig、gconfig、nconfig），但 menuconfig 始终是使用最广泛的，核心差异如下：</p><table><thead><tr><th>工具</th><th>底层库</th><th>界面类型</th><th>优势场景</th><th>局限</th></tr></thead><tbody><tr><td><strong>menuconfig</strong></td><td>ncurses</td><td>文本菜单</td><td>终端环境、远程服务器、嵌入式设备</td><td>无图形界面，复杂配置项浏览稍显繁琐</td></tr><tr><td>xconfig</td><td>Qt</td><td>图形界面（窗口）</td><td>桌面环境，支持鼠标拖拽、搜索过滤</td><td>依赖 Qt 库，嵌入式环境难部署</td></tr><tr><td>gconfig</td><td>GTK+</td><td>图形界面（窗口）</td><td>桌面环境，与 GNOME 桌面集成良好</td><td>依赖 GTK + 库，体积较大</td></tr><tr><td>nconfig</td><td>ncurses</td><td>文本界面（增强）</td><td>支持更丰富的快捷键和过滤功能</td><td>兼容性稍差，部分老系统不支持</td></tr></tbody></table><p>menuconfig 的核心竞争力在于：</p><ul><li><strong>普适性</strong>：几乎所有类 Unix 系统都预装 ncurses 库，无需额外依赖；</li><li><strong>轻量性</strong>：二进制文件仅几十 KB，适合资源受限的嵌入式设备；</li><li><strong>效率性</strong>：纯键盘操作（方向键 + 快捷键）对开发者更友好，配置速度快于图形工具。</li></ul><h3>2.1.5 menuconfig 的现状与未来：仍是配置工具的 &ldquo;基石&rdquo;</h3><p>尽管图形工具（如 xconfig）在视觉体验上更优，但 menuconfig 仍是以下场景的首选：</p><ul><li>服务器 / 嵌入式设备的远程配置（通过 SSH 终端操作）；</li><li>资源受限环境（如 Flash&lt;1MB 的 MCU）；</li><li>开发者的日常配置（习惯终端操作的效率）。</li></ul><h3>2.1.6 总结</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menuconfig 的实现可概括为：<strong>以 C 语言为主体，依赖 ncurses 库实现终端图形交互，通过 Kconfig 解析引擎处理配置逻辑</strong>。这种组合既保证了工具的轻量性和系统兼容性（适合终端 / 嵌入式环境），又实现了直观的菜单式配置体验，这也是它能成为 Kconfig 生态中最广泛使用工具的技术基础。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menuconfig 的起源是为解决早期配置工具的 &ldquo;低效与不直观&rdquo;，其发展伴随 Kconfig 的迭代不断优化用户体验，而技术上依赖 ncurses 实现了 &ldquo;终端环境下的图形化交互&rdquo;。作为 Kconfig 系统的 &ldquo;门面&rdquo;，它不仅让复杂的内核 / 芯片配置变得可行，更成为开源社区 &ldquo;终端工具设计&rdquo; 的典范 &mdash;&mdash; 用极简的依赖实现了极高的可用性，这也是它诞生 20 年后仍被广泛使用的核心原因。</p><hr /><h1>三、WM IoT SDK的prj.config 与 ESP IDF SDK 的sdkconfig.defaults&mdash;&mdash;用户自定义配置文件</h1><h2 style="background-color:transparent">3.1&nbsp;WM IoT SDK的prj.config</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Kconfig 配置 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/2.4-rc/component_guides/kconfig.html#id2" title="Kconfig 配置 — WinnerMicro 在线文档">Kconfig 配置 &mdash; WinnerMicro 在线文档</a></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/7879b0a275c5428cbcff4ef69a34f9fd.png"></p><ul></ul><p>WM IoT SDK（Dialog 半导体的无线 MCU SDK，如 DA14531/DA1469x）中的<code>prj.config</code>，是<strong>用户自定义配置的主要文件</strong>。<strong>build文件夹里的config文件夹的wmsdk.config</strong>是最终生效的配置文件。</p><h4>3.1.1 核心定位与设计逻辑</h4><ul><li><strong>&ldquo;一站式配置&rdquo; 角色</strong>：<code>prj.config</code>是 WM SDK 中用户配置的唯一入口（无单独的 &ldquo;最终快照&rdquo; 文件），既包含覆盖 SDK 默认值的自定义选项，也记录所有配置的最终值。开发者通过修改该文件或通过配置工具（如<code>configurator</code>）更新它，直接影响编译结果。</li><li><strong>轻量性适配</strong>：由于 WM 芯片（如 DA14531）资源受限（RAM 通常 &lt; 32KB，Flash&lt;512KB），功能模块少（以 BLE 和极简外设为主），配置项数量少（通常 &lt; 50 项），因此无需复杂的分层模板，<code>prj.config</code>即可满足需求。</li></ul><h4>3.1.2 文件格式与内容规范</h4><p><code>prj.config</code>采用简化的键值对格式，通常省略<code>CONFIG_</code>前缀（部分版本保留），仅包含项目需要自定义的选项（未声明的选项沿用 SDK 默认值），示例如下（DA14531 项目）：</p><pre><code># prj.config（WM DA14531项目）# 外设配置：启用UART，指定引脚和波特率UART_ENABLE=1UART_BAUDRATE=9600UART_TX_PIN=2UART_RX_PIN=3# BLE配置：从机角色，广播间隔BLE_ROLE_PERIPHERAL=1BLE_ADV_INTERVAL_MIN=800  # 单位：0.625ms，即800*0.625=500msBLE_ADV_INTERVAL_MAX=1000# 功耗配置：启用深度睡眠，GPIO唤醒DEEP_SLEEP_ENABLE=1WAKEUP_GPIO_PIN=5# 禁用不需要的功能SPI_ENABLE=0ADC_ENABLE=0</code></pre><ul><li>布尔选项：用<code>=1</code>（启用）、<code>=0</code>（禁用）表示；</li><li>数值选项：直接赋值（如引脚号、时间参数）；</li><li>无注释形式的禁用项（禁用直接设<code>=0</code>，无需像<code>sdkconfig</code>那样用<code>#</code>注释）。</li></ul><h4>3.1.3 优先级与加载逻辑</h4><p>WM SDK 的配置逻辑更简单，<code>prj.config</code>的优先级高于 SDK 默认值，且无多层模板：</p><ol><li>若项目中存在<code>prj.config</code>，则编译系统优先读取其中的配置值；</li><li>未在<code>prj.config</code>中声明的选项，自动使用 SDK 默认值（定义在<code>config_defaults.h</code>或<code>Kconfig</code>中）；</li><li>通过配置工具（如<code>make config</code>）修改的选项，会直接写入<code>prj.config</code>（覆盖原有值</li></ol><p>例如：SDK 默认<code>UART_BAUDRATE=115200</code>，若<code>prj.config</code>设为<code>9600</code>，则编译时使用 9600；若未声明，则使用 115200。</p><h4>3.1.4 典型使用场景</h4><ul><li><strong>项目专属配置</strong>：记录与硬件强相关的参数（如开发板的引脚定义、BLE 设备名称），确保软件与硬件匹配；</li><li><strong>低功耗优化</strong>：通过<code>prj.config</code>调整睡眠模式、时钟频率等参数（如<code>DEEP_SLEEP_ENABLE=1</code>），是 WM 芯片低功耗设计的核心入口；</li><li><strong>快速复用</strong>：将成熟项目的<code>prj.config</code>复制到新项目，仅修改少量参数（如设备地址）即可快速适配，减少重复配置工作。</li></ul><h4>3.1.5 特点与注意事项</h4><ul><li><strong>手动修改友好</strong>：因配置项少且格式简单，<code>prj.config</code>可直接用文本编辑器修改（无需依赖配置工具），但需注意依赖关系（如启用<code>BLE_ADV</code>需先启用<code>BLE_ROLE_PERIPHERAL</code>）；</li><li><strong>无自动校验</strong>：旧版本 WM SDK 的<code>prj.config</code>缺乏依赖引擎校验，手动修改可能导致冲突（如同时启用 UART 和 SPI 但复用同一引脚），需开发者自行确保合法性；</li><li><strong>与协议栈强绑定</strong>：部分配置项（如<code>BLE_CONN_INTERVAL</code>）直接对应 Dialog BLE 协议栈的内部参数，修改需参考芯片数据手册（避免超出硬件限制）。</li></ul><h2>3.2&nbsp;ESP IDF SDK 的sdkconfig.defaults</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="构建系统 - ESP32 - — ESP-IDF 编程指南 v5.5.1 文档" href="https://docs.espressif.com/projects/esp-idf/zh_CN/stable/esp32/api-guides/build-system.html#sdkconfig" title="构建系统 - ESP32 - — ESP-IDF 编程指南 v5.5.1 文档">构建系统 - ESP32 - &mdash; ESP-IDF 编程指南 v5.5.1 文档</a></p><p><img src="/2025/09/15/%E3%80%90Embedded%20System%E3%80%91%E3%80%90Kconfig%E3%80%91%E5%9F%BA%E4%BA%8EWM%20IoT%20SDK%E5%92%8CESP%20IDF%20SDK%E7%9A%84%E5%85%B3%E4%BA%8E%E3%80%90Kconfig%E3%80%91%E3%80%90menuconfig%E3%80%91%E3%80%90prj.config%E3%80%91%E7%AD%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/cacd94d680414025853f19cf02c8bf9f.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP-IDF（乐鑫 ESP 系列芯片的 SDK）中，<code>sdkconfig.defaults</code>是<strong>用户自定义的默认配置模板</strong>，用于为项目预设配置项的初始值，替代 SDK 的默认值。它的核心作用是：让开发者在新建项目或团队协作时，无需每次通过<code>menuconfig</code>重复配置相同选项（如固定的 Wi-Fi 信道、日志级别），而是通过文件批量定义默认值。</p><h3>3.2.1&nbsp;核心定位与设计逻辑</h3><ul><li><strong>&ldquo;预配置&rdquo; 角色</strong>：<code>sdkconfig.defaults</code>是<code>menuconfig</code>工具的 &ldquo;输入模板&rdquo;&mdash;&mdash; 当项目中存在该文件时，执行<code>idf.py menuconfig</code>会优先加载其中的配置值，作为初始值显示在菜单中；若用户未修改，则最终生成的<code>sdkconfig</code>会沿用这些值。</li><li><strong>与<code>sdkconfig</code>的区别</strong>：<code>sdkconfig</code>是 &ldquo;最终生效的配置快照&rdquo;（记录所有选项的最终值），而<code>sdkconfig.defaults</code>是 &ldquo;初始值模板&rdquo;（仅记录需要覆盖 SDK 默认值的选项），前者是后者的 &ldquo;实例化结果&rdquo;。</li></ul><h3>3.2.2&nbsp;文件格式与内容规范</h3><p><code>sdkconfig.defaults</code>的格式与<code>sdkconfig</code>一致，采用<code>CONFIG_&lt;选项名&gt;=&lt;值&gt;</code>的键值对格式，但通常仅包含<strong>需要自定义的选项</strong>（无需重复 SDK 默认值），示例如下：</p><pre><code># sdkconfig.defaults（ESP32项目）# 覆盖默认日志级别（默认是INFO，改为DEBUG）CONFIG_LOG_DEFAULT_LEVEL=4# 固定Wi-Fi模式为Station（默认是Station+AP）CONFIG_WIFI_MODE_STA=yCONFIG_WIFI_MODE_AP=n# 配置UART波特率（默认是115200，改为9600）CONFIG_UART_BAUDRATE=9600# 禁用不需要的功能（覆盖默认启用的蓝牙）CONFIG_BT_ENABLED=n</code></pre><ul><li>布尔 / 三态选项：用<code>=y</code>（启用）、<code>=m</code>（模块）、<code>=n</code>（禁用）表示；</li><li>数值 / 字符串选项：直接赋值（如<code>=9600</code>、<code>=&quot;my_esp_device&quot;</code>）；</li><li>禁用项也可省略（依赖 SDK 默认值），但显式声明更清晰。</li></ul><h3>3.2.3 优先级与加载逻辑</h3><p>ESP-IDF 的配置系统按 **&ldquo;分层覆盖&rdquo;** 原则加载默认值，<code>sdkconfig.defaults</code>处于中间层级，优先级如下（从高到低）：</p><ol><li>用户通过<code>menuconfig</code>手动修改的值（最终写入<code>sdkconfig</code>）；</li><li>项目目录下的<code>sdkconfig.defaults</code>（项目级自定义默认值）；</li><li>板级配置文件（如<code>boards/esp32c3_devkitm/sdkconfig.board</code>，开发板级默认值）；</li><li>SDK 组件默认值（如<code>components/wifi/Kconfig</code>中定义的<code>default</code>值，SDK 级默认值）。</li></ol><p>例如：若 SDK 默认<code>CONFIG_LOG_DEFAULT_LEVEL=3</code>（INFO），<code>sdkconfig.defaults</code>设为<code>4</code>（DEBUG），则<code>menuconfig</code>初始显示为 4；若用户在菜单中改为 5（VERBOSE），则<code>sdkconfig</code>最终记录为 5。</p><h3>3.2.4 典型使用场景</h3><ul><li><strong>项目初始化标准化</strong>：新建项目时，将通用配置（如公司设备名称前缀、默认日志级别）写入<code>sdkconfig.defaults</code>，确保所有团队成员的初始配置一致；</li><li><strong>跨环境适配</strong>：为同一项目的不同部署场景（如开发环境、量产环境）创建多个模板（如<code>sdkconfig.defaults.dev</code>、<code>sdkconfig.defaults.prod</code>），通过<code>idf.py -DSDKCONFIG_DEFAULTS=sdkconfig.defaults.prod menuconfig</code>指定加载；</li><li><strong>版本控制与复用</strong>：将<code>sdkconfig.defaults</code>纳入 Git 管理，作为项目配置的 &ldquo;基准线&rdquo;，避免<code>sdkconfig</code>（可能包含临时修改）的冗余提交。</li></ul><h3>3.2.5 扩展用法</h3><ul><li><strong>分段配置</strong>：通过<code>sdkconfig.defaults.1</code>、<code>sdkconfig.defaults.2</code>等文件拆分配置（按功能模块），ESP-IDF 会按序号合并加载；</li><li><strong>条件生效</strong>：结合<code>Kconfig.projbuild</code>（项目级 Kconfig 扩展），在<code>sdkconfig.defaults</code>中使用条件赋值（如仅当芯片为 ESP32-S3 时生效的配置）；</li><li><strong>CI/CD 集成</strong>：在自动化编译流程中，通过脚本动态生成<code>sdkconfig.defaults</code>（如根据芯片型号自动调整 Flash 大小），实现 &ldquo;一次构建适配多硬件&rdquo;。</li></ul><h2>3.3 两者的核心差异与对比</h2><table><thead><tr><th>维度</th><th>ESP-IDF 的<code>sdkconfig.defaults</code></th><th>WM IoT SDK 的<code>prj.config</code></th></tr></thead><tbody><tr><td><strong>角色定位</strong></td><td>仅作为 &ldquo;默认值模板&rdquo;，不直接生效（最终由<code>sdkconfig</code>记录）</td><td>既是 &ldquo;默认模板&rdquo; 也是 &ldquo;最终配置&rdquo;，直接决定编译参数</td></tr><tr><td><strong>格式规范</strong></td><td>严格带<code>CONFIG_</code>前缀，禁用项可用<code>#</code>注释</td><td>通常省略前缀，禁用项直接设<code>=0</code></td></tr><tr><td><strong>配置项规模</strong></td><td>支持数百项（多协议、复杂外设）</td><td>仅数十项（聚焦 BLE 和极简外设）</td></tr><tr><td><strong>依赖校验</strong></td><td>由 kconfiglib 自动校验，冲突时<code>menuconfig</code>提示</td><td>无自动校验，依赖开发者手动确保合法性</td></tr><tr><td><strong>优先级分层</strong></td><td>多层级（项目&rarr;板级&rarr;SDK 默认）</td><td>单层级（仅<code>prj.config</code>覆盖 SDK 默认）</td></tr><tr><td><strong>典型使用场景</strong></td><td>团队协作、跨环境适配、CI 集成</td><td>项目专属配置、快速复用、低功耗参数调整</td></tr></tbody></table><h2>3.4&nbsp;总结</h2><p><code>&nbsp;&nbsp;sdkconfig.defaults</code>和<code>prj.config</code>虽分属不同 SDK，但核心目标一致：<strong>让用户以 &ldquo;非侵入式&rdquo; 方式定制配置，同时确保配置的可复用性</strong>。</p><ul><li>ESP-IDF 的<code>sdkconfig.defaults</code>通过 &ldquo;分层模板 + 自动校验&rdquo;，适合复杂项目（多协议、多硬件变体）的标准化配置管理，尤其适合团队协作和自动化流程；</li><li>WM SDK 的<code>prj.config</code>以 &ldquo;轻量直接 + 手动可控&rdquo; 为特点，适配资源受限的极简场景（如低功耗 BLE 设备），更侧重开发者对配置的直接掌控。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;理解两者的设计逻辑，可帮助开发者在不同芯片平台上高效管理项目配置，减少重复工作并避免配置冲突。</p><hr /><p></p>]]></content>
    
    
    <categories>
      
      <category>嵌入式知识学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>物联网 SoC Kconfig</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【UAV】基于PX4+Ubuntu24.04.3的无人机制作的开发环境搭建</title>
    <link href="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、PX4</h1><h2>1.1 简介</h2><p>PX4 是一款由瑞士苏黎世联邦理工学院（ETH）计算机视觉与几何实验室的 PIXHAWK 项目演变而来的开源自动驾驶仪飞行栈。以下是关于它的详细简介：</p><ul><li><strong>基本信息</strong><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;开源性质&lt;/strong&gt;：PX4 由 PX4 开发团队和全球贡献者共同维护，基于宽松的 BSD 3 条款许可证，可自由使用和修改，也允许用于专有产品。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;起源与发展&lt;/strong&gt;：项目最早可追溯到 2009 年，2012 年 3 月首次发布，经过多年发展，由来自工业界和学术界的世界级开发人员不断完善。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;主要特点&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;高度模块化&lt;/strong&gt;：采用基于端口的架构，所有功能可分为可交换和可重复使用的模块，开发者可根据需求定制和替换不同组件，便于功能扩展和重新配置。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;可扩展性强&lt;/strong&gt;：支持多种类型的载具，包括飞机（多旋翼、固定翼和垂直起降）、地面车辆、水下潜航器等，还提供了丰富的硬件选择，适用于各种设备控制器、传感器和其他外围设备。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;互操作性好&lt;/strong&gt;：不仅是一个强大的飞行栈，还提供了一个支持设备的生态系统，并引领通信、外围设备集成和电源管理解决方案的标准化工作。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;安全性能高&lt;/strong&gt;：默认包含自动故障安全行为、支持不同返回模式、降落伞等安全功能，这些功能易于配置和调整，以适应不同的定制系统。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;软件架构&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;中间层&lt;/strong&gt;：主要包括嵌入式传感器驱动、与外界的通讯（如配套计算机、GCS 等）以及 uORB 发布 - 订阅消息总线。此外，中间层还包含仿真应用层，可在桌面操作系统运行 PX4 飞行代码并控制模拟环境中的无人机模型。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;飞行控制栈&lt;/strong&gt;：是导航、制导和控制算法的集合，包括为固定翼、旋翼和 VTOL 无人机设计的控制器，以及相应的姿态、位置估计器。它包含了从传感器数据、RC 控制量输入到自主飞行控制，再到电机、舵机控制的全套通路。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;运行环境&lt;/strong&gt;：PX4 最初设计为在 Pixhawk 系列飞控上运行，现在也可以在 Linux 计算机和其他硬件上运行，可运行在提供 POSIX - API 的多种操作系统下，如 Linux、macOS、Nuttx 等。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;配套工具&lt;/strong&gt;：PX4 是一个大型无人机平台的核心部分，配套有 QGroundControl 地面站，可用于将 PX4 加载到飞行器控制硬件上，设置飞行器、更改参数、获取实时飞行信息以及创建和执行完全自主的任务。此外，还有 MAVS SDK 用于与机载计算机、相机和其他使用 MAVLink 协议的硬件集成。&lt;/li&gt;</code></pre></ul><h1 style="background-color:transparent">二、基于虚拟机的Ubuntu24.04.3系统安装</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="ubuntu-releases安装包下载_开源镜像站-阿里云" href="https://mirrors.aliyun.com/ubuntu-releases/?spm=a2c6h.13651104.d-5263.1.6d5243efBo8Q8M" title="ubuntu-releases安装包下载_开源镜像站-阿里云">ubuntu-releases安装包下载_开源镜像站-阿里云</a></p><p>这里等待后续的更新出一期虚拟机安装，也可以看其他的虚拟机安装教程。</p><p>之后，唯一需要注意的是：关闭加速3D图形和安装完系统后一定要换源，不然下载的等待时间可能会让等到你怀疑人生。</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/523fb7b68c6e44d09b05a66022e84acc.png"></p><h2>补充说明1：</h2><p>我这里编译了两份PX4源码，一份命令行的，一份在vscode里使用，有点占空间，如果只是一份就建议至少20GB以上。</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/64456e27cdfe4c049832a808f212ef93.png"></p><h1 style="background-color:transparent">三、基于Ubuntu24.04.3的PX4开发环境配置</h1><p>注：</p><p><span style="background-color:#f9eda6">（1）如果懂得Docker的使用就不用再找合适的ubuntu版本，使用官方准备的Docker会稳定些，但是笔者Docker不是很熟就不叙述了，这里放下链接：<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="PX4 Docker 容器 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/test_and_ci/docker.html" title="PX4 Docker 容器 | PX4 Guide (main)">PX4 Docker 容器 | PX4 Guide (main)</a></span></p><p><span style="background-color:#fbd4d0">（2）笔者贴出了部分详细过程的日志以作记录，详细过程可略过，如果读者觉得拖沓，请移步其他文章。</span></p><p><span style="background-color:#c7e6ea">（3）步骤概述：先根据官方文档下载源码，接着在源码环境下进行借助源码的txt文件和ubuntu.sh（官方给了命令）进行安装工具链和依赖，然后使用官方的编译命令进行初次编译（这过程中出现一些各种各样的环境和依赖的问题，即使借助AI也需要一定的解决问题的能力。）</span></p><h2 style="background-color:transparent">3.1 找到PX4官网，按照官网步骤进行配置安装环境。</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="PX4 自动驾驶仪用户指南 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/" title="PX4 自动驾驶仪用户指南 | PX4 Guide (main)">PX4 自动驾驶仪用户指南 | PX4 Guide (main)</a></p><h2 style="background-color:transparent">3.2 基于自身的系统环境，安装工具链，但是，首先就要下载源码。</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Ubuntu LTS/Debian Linux 的开发环境 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/dev_setup/dev_env_linux_ubuntu.html" title="Ubuntu LTS/Debian Linux 的开发环境 | PX4 Guide (main)">Ubuntu LTS/Debian Linux 的开发环境 | PX4 Guide (main)</a></p><pre><code class="language-bash"># https的下载方式可能会因为github的服务器网络访问出现问题，或者使用魔法git clone https://github.com/PX4/PX4-Autopilot.git --recursive# 或者换位ssh下载方式会稳定得多，使用ssh需要在Ubuntu安装ssh客户端服务git clone git@github.com:PX4/PX4-Autopilot.git --recursive</code></pre><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/b96eab5d76e5401e93f53780c7c06337.png"></p><p>部分详细过程展示（如果出现错误就再次克隆下载）：</p><pre><code class="language-bash">zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects$ git clone git@github.com:PX4/PX4-Autopilot.git --recursive正克隆到 'PX4-Autopilot'...remote: Enumerating objects: 519739, done.remote: Counting objects: 100% (1423/1423), done.remote: Compressing objects: 100% (637/637), done.remote: Total 519739 (delta 1037), reused 869 (delta 786), pack-reused 518316 (from 4)接收对象中: 100% (519739/519739), 501.33 MiB | 66.00 KiB/s, 完成.处理 delta 中: 100% (371907/371907), 完成.正在更新文件: 100% (12988/12988), 完成.子模组 'Tools/flightgear_bridge'（https://github.com/PX4/PX4-FlightGear-Bridge.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge' 注册子模组 'Tools/simulation/gazebo-classic/sitl_gazebo-classic'（https://github.com/PX4/PX4-SITL_gazebo-classic.git）已对路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic' 注册子模组 'Tools/simulation/gz'（https://github.com/PX4/PX4-gazebo-models.git）已对路径 'Tools/simulation/gz' 注册子模组 'Tools/simulation/jmavsim/jMAVSim'（https://github.com/PX4/jMAVSim.git）已对路径 'Tools/simulation/jmavsim/jMAVSim' 注册子模组 'Tools/simulation/jsbsim/jsbsim_bridge'（https://github.com/PX4/px4-jsbsim-bridge.git）已对路径 'Tools/simulation/jsbsim/jsbsim_bridge' 注册子模组 'boards/modalai/voxl2/libfc-sensor-api'（https://gitlab.com/voxl-public/voxl-sdk/core-libs/libfc-sensor-api.git）已对路径 'boards/modalai/voxl2/libfc-sensor-api' 注册子模组 'platforms/nuttx/NuttX/apps'（https://github.com/PX4/NuttX-apps.git）已对路径 'platforms/nuttx/NuttX/apps' 注册子模组 'platforms/nuttx/NuttX/nuttx'（https://github.com/PX4/NuttX.git）已对路径 'platforms/nuttx/NuttX/nuttx' 注册子模组 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp'（https://github.com/PX4/iq-module-communication-cpp.git）已对路径 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp' 注册子模组 'src/drivers/cyphal/legacy_data_types'（https://github.com/PX4/public_regulated_data_types.git）已对路径 'src/drivers/cyphal/legacy_data_types' 注册子模组 'src/drivers/cyphal/libcanard'（https://github.com/opencyphal/libcanard.git）已对路径 'src/drivers/cyphal/libcanard' 注册子模组 'src/drivers/cyphal/public_regulated_data_types'（https://github.com/opencyphal/public_regulated_data_types.git）已对路径 'src/drivers/cyphal/public_regulated_data_types' 注册子模组 'src/drivers/gps/devices'（https://github.com/PX4/PX4-GPSDrivers.git）已对路径 'src/drivers/gps/devices' 注册子模组 'src/drivers/ins/microstrain/mip_sdk'（https://github.com/PX4/LORD-MicroStrain_mip_sdk.git）已对路径 'src/drivers/ins/microstrain/mip_sdk' 注册子模组 'src/drivers/uavcan/libdronecan/dsdl'（https://github.com/PX4/DSDL.git）已对路径 'src/drivers/uavcan/libdronecan/dsdl' 注册子模组 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'（https://github.com/dronecan/pydronecan）已对路径 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan' 注册子模组 'src/lib/cdrstream/cyclonedds'（https://github.com/px4/cyclonedds）已对路径 'src/lib/cdrstream/cyclonedds' 注册子模组 'src/lib/cdrstream/rosidl'（https://github.com/px4/rosidl）已对路径 'src/lib/cdrstream/rosidl' 注册子模组 'src/lib/crypto/libtomcrypt'（https://github.com/PX4/libtomcrypt.git）已对路径 'src/lib/crypto/libtomcrypt' 注册子模组 'src/lib/crypto/libtommath'（https://github.com/PX4/libtommath.git）已对路径 'src/lib/crypto/libtommath' 注册子模组 'src/lib/crypto/monocypher'（https://github.com/PX4/Monocypher.git）已对路径 'src/lib/crypto/monocypher' 注册子模组 'src/lib/events/libevents'（https://github.com/mavlink/libevents.git）已对路径 'src/lib/events/libevents' 注册子模组 'src/lib/heatshrink/heatshrink'（https://github.com/PX4/heatshrink.git）已对路径 'src/lib/heatshrink/heatshrink' 注册子模组 'src/lib/tensorflow_lite_micro/tflite_micro'（https://github.com/PX4/tflite-micro.git）已对路径 'src/lib/tensorflow_lite_micro/tflite_micro' 注册子模组 'src/modules/mavlink/mavlink'（https://github.com/mavlink/mavlink.git）已对路径 'src/modules/mavlink/mavlink' 注册子模组 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'（https://github.com/PX4/Micro-XRCE-DDS-Client.git）已对路径 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client' 注册子模组 'src/modules/zenoh/zenoh-pico'（https://github.com/px4/zenoh-pico）已对路径 'src/modules/zenoh/zenoh-pico' 注册子模组 'test/fuzztest'（https://github.com/google/fuzztest.git）已对路径 'test/fuzztest' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/flightgear/flightgear_bridge'...remote: Enumerating objects: 382, done.        remote: Counting objects: 100% (41/41), done.        remote: Compressing objects: 100% (20/20), done.        remote: Total 382 (delta 25), reused 21 (delta 21), pack-reused 341 (from 2)        接收对象中: 100% (382/382), 1.47 MiB | 1.45 MiB/s, 完成.处理 delta 中: 100% (244/244), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic'...remote: Enumerating objects: 9803, done.        remote: Counting objects: 100% (137/137), done.        remote: Compressing objects: 100% (84/84), done.        remote: Total 9803 (delta 109), reused 53 (delta 53), pack-reused 9666 (from 3)        接收对象中: 100% (9803/9803), 128.79 MiB | 15.29 MiB/s, 完成.处理 delta 中: 100% (6628/6628), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'...remote: Enumerating objects: 1127, done.        remote: Counting objects: 100% (346/346), done.        remote: Compressing objects: 100% (195/195), done.        error: RPC 失败。curl 56 Recv failure: 连接被对方重置error: 预期仍然需要 6381 个字节的正文fetch-pack: unexpected disconnect while reading sideband packetfatal: 过早的文件结束符（EOF）fatal: fetch-pack：无效的 index-pack 输出fatal: 无法克隆 'https://github.com/PX4/PX4-gazebo-models.git' 到子模组路径 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'克隆 'Tools/simulation/gz' 失败。按计划重试正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/jmavsim/jMAVSim'...remote: Enumerating objects: 3357, done.        remote: Counting objects: 100% (153/153), done.        remote: Compressing objects: 100% (67/67), done.        remote: Total 3357 (delta 49), reused 131 (delta 43), pack-reused 3204 (from 1)        接收对象中: 100% (3357/3357), 77.35 MiB | 14.72 MiB/s, 完成.处理 delta 中: 100% (1641/1641), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/jsbsim/jsbsim_bridge'...remote: Enumerating objects: 323, done.        remote: Counting objects: 100% (121/121), done.        remote: Compressing objects: 100% (41/41), done.        remote: Total 323 (delta 94), reused 81 (delta 80), pack-reused 202 (from 1)        接收对象中: 100% (323/323), 246.97 KiB | 748.00 KiB/s, 完成.处理 delta 中: 100% (201/201), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/boards/modalai/voxl2/libfc-sensor-api'...remote: Enumerating objects: 62, done.        remote: Counting objects: 100% (38/38), done.        remote: Compressing objects: 100% (22/22), done.        remote: Total 62 (delta 14), reused 26 (delta 9), pack-reused 24 (from 1)        接收对象中: 100% (62/62), 9.16 KiB | 9.16 MiB/s, 完成.处理 delta 中: 100% (21/21), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/platforms/nuttx/NuttX/apps'...remote: Enumerating objects: 96573, done.        remote: Counting objects: 100% (342/342), done.        remote: Compressing objects: 100% (208/208), done.        error: RPC 失败。curl 56 Recv failure: 连接被对方重置/s error: 预期仍然需要 7114 个字节的正文fetch-pack: unexpected disconnect while reading sideband packetfatal: 过早的文件结束符（EOF）fatal: fetch-pack：无效的 index-pack 输出fatal: 无法克隆 'https://github.com/PX4/NuttX-apps.git' 到子模组路径 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/platforms/nuttx/NuttX/apps'克隆 'platforms/nuttx/NuttX/apps' 失败。按计划重试正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/platforms/nuttx/NuttX/nuttx'...remote: Enumerating objects: 894684, done.        remote: Counting objects: 100% (1039/1039), done.        remote: Compressing objects: 100% (157/157), done.        remote: Total 894684 (delta 977), reused 886 (delta 882), pack-reused 893645 (from 5)        接收对象中: 100% (894684/894684), 380.34 MiB | 1.22 MiB/s, 完成.处理 delta 中: 100% (692250/692250), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/actuators/vertiq_io/iq-module-communication-cpp'...remote: Enumerating objects: 388, done.        remote: Counting objects: 100% (197/197), done.        remote: Compressing objects: 100% (65/65), done.        remote: Total 388 (delta 161), reused 150 (delta 132), pack-reused 191 (from 1)        接收对象中: 100% (388/388), 134.01 KiB | 73.00 KiB/s, 完成.处理 delta 中: 100% (255/255), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/cyphal/legacy_data_types'...remote: Enumerating objects: 4343, done.        remote: Counting objects: 100% (51/51), done.        remote: Compressing objects: 100% (37/37), done.        remote: Total 4343 (delta 25), reused 14 (delta 14), pack-reused 4292 (from 2)        接收对象中: 100% (4343/4343), 674.15 KiB | 1.14 MiB/s, 完成.处理 delta 中: 100% (2191/2191), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/cyphal/libcanard'...remote: Enumerating objects: 3101, done.        remote: Counting objects: 100% (174/174), done.        remote: Compressing objects: 100% (117/117), done.        remote: Total 3101 (delta 121), reused 59 (delta 54), pack-reused 2927 (from 3)        接收对象中: 100% (3101/3101), 1.26 MiB | 2.06 MiB/s, 完成.处理 delta 中: 100% (1960/1960), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/cyphal/public_regulated_data_types'...remote: Enumerating objects: 3471, done.        remote: Counting objects: 100% (170/170), done.        remote: Compressing objects: 100% (111/111), done.        remote: Total 3471 (delta 85), reused 69 (delta 52), pack-reused 3301 (from 2)        接收对象中: 100% (3471/3471), 584.98 KiB | 1.29 MiB/s, 完成.处理 delta 中: 100% (1628/1628), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/gps/devices'...remote: Enumerating objects: 1421, done.        remote: Counting objects: 100% (811/811), done.        remote: Compressing objects: 100% (230/230), done.        remote: Total 1421 (delta 709), reused 584 (delta 581), pack-reused 610 (from 4)        接收对象中: 100% (1421/1421), 556.57 KiB | 786.00 KiB/s, 完成.处理 delta 中: 100% (1058/1058), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/ins/microstrain/mip_sdk'...remote: Enumerating objects: 7683, done.        remote: Total 7683 (delta 0), reused 0 (delta 0), pack-reused 7683 (from 1)        接收对象中: 100% (7683/7683), 3.90 MiB | 103.00 KiB/s, 完成.处理 delta 中: 100% (5587/5587), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/uavcan/libdronecan/dsdl'...remote: Enumerating objects: 419, done.        remote: Counting objects: 100% (243/243), done.        remote: Compressing objects: 100% (180/180), done.        remote: Total 419 (delta 89), reused 63 (delta 63), pack-reused 176 (from 1)        接收对象中: 100% (419/419), 77.96 KiB | 342.00 KiB/s, 完成.处理 delta 中: 100% (120/120), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'...remote: Enumerating objects: 2056, done.        remote: Counting objects: 100% (470/470), done.        remote: Compressing objects: 100% (108/108), done.        remote: Total 2056 (delta 387), reused 362 (delta 362), pack-reused 1586 (from 2)        接收对象中: 100% (2056/2056), 402.60 KiB | 880.00 KiB/s, 完成.处理 delta 中: 100% (1402/1402), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/cdrstream/cyclonedds'...remote: Enumerating objects: 41252, done.        remote: Total 41252 (delta 0), reused 0 (delta 0), pack-reused 41252 (from 1)        接收对象中: 100% (41252/41252), 22.50 MiB | 11.53 MiB/s, 完成.处理 delta 中: 100% (28487/28487), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/cdrstream/rosidl'...remote: Enumerating objects: 10934, done.        remote: Counting objects: 100% (2959/2959), done.        remote: Compressing objects: 100% (383/383), done.        remote: Total 10934 (delta 2728), reused 2576 (delta 2576), pack-reused 7975 (from 2)        接收对象中: 100% (10934/10934), 2.46 MiB | 420.00 KiB/s, 完成.处理 delta 中: 100% (8147/8147), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/crypto/libtomcrypt'...remote: Enumerating objects: 20390, done.        remote: Counting objects: 100% (96/96), done.        remote: Compressing objects: 100% (48/48), done.        remote: Total 20390 (delta 54), reused 48 (delta 48), pack-reused 20294 (from 2)        接收对象中: 100% (20390/20390), 20.75 MiB | 12.25 MiB/s, 完成.处理 delta 中: 100% (15588/15588), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/crypto/libtommath'...remote: Enumerating objects: 11286, done.        remote: Counting objects: 100% (386/386), done.        remote: Compressing objects: 100% (212/212), done.        remote: Total 11286 (delta 252), reused 174 (delta 174), pack-reused 10900 (from 3)        接收对象中: 100% (11286/11286), 21.40 MiB | 46.00 KiB/s, 完成.处理 delta 中: 100% (8566/8566), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/crypto/monocypher'...remote: Enumerating objects: 5712, done.        remote: Counting objects: 100% (918/918), done.        remote: Compressing objects: 100% (115/115), done.        remote: Total 5712 (delta 835), reused 803 (delta 803), pack-reused 4794 (from 1)        接收对象中: 100% (5712/5712), 3.73 MiB | 4.78 MiB/s, 完成.处理 delta 中: 100% (3546/3546), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/events/libevents'...remote: Enumerating objects: 543, done.        remote: Counting objects: 100% (108/108), done.        remote: Compressing objects: 100% (74/74), done.        remote: Total 543 (delta 46), reused 69 (delta 33), pack-reused 435 (from 1)        接收对象中: 100% (543/543), 309.40 KiB | 880.00 KiB/s, 完成.处理 delta 中: 100% (280/280), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/heatshrink/heatshrink'...remote: Enumerating objects: 401, done.        remote: Counting objects: 100% (90/90), done.        remote: Compressing objects: 100% (17/17), done.        remote: Total 401 (delta 77), reused 73 (delta 73), pack-reused 311 (from 1)        接收对象中: 100% (401/401), 147.32 KiB | 300.00 KiB/s, 完成.处理 delta 中: 100% (248/248), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/lib/tensorflow_lite_micro/tflite_micro'...remote: Enumerating objects: 21733, done.        remote: Counting objects: 100% (29/29), done.        remote: Compressing objects: 100% (20/20), done.        remote: Total 21733 (delta 14), reused 9 (delta 9), pack-reused 21704 (from 2)        接收对象中: 100% (21733/21733), 32.76 MiB | 89.00 KiB/s, 完成.处理 delta 中: 100% (15815/15815), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/modules/mavlink/mavlink'...remote: Enumerating objects: 20552, done.        remote: Counting objects: 100% (1126/1126), done.        remote: Compressing objects: 100% (146/146), done.        remote: Total 20552 (delta 1058), reused 980 (delta 980), pack-reused 19426 (from 1)        接收对象中: 100% (20552/20552), 12.92 MiB | 119.00 KiB/s, 完成.处理 delta 中: 100% (13168/13168), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'...remote: Enumerating objects: 9787, done.        remote: Counting objects: 100% (452/452), done.        remote: Compressing objects: 100% (244/244), done.        remote: Total 9787 (delta 363), reused 208 (delta 208), pack-reused 9335 (from 3)        接收对象中: 100% (9787/9787), 5.78 MiB | 119.00 KiB/s, 完成.处理 delta 中: 100% (5587/5587), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/modules/zenoh/zenoh-pico'...remote: Enumerating objects: 26616, done.        remote: Total 26616 (delta 0), reused 0 (delta 0), pack-reused 26616 (from 1)        接收对象中: 100% (26616/26616), 6.81 MiB | 115.00 KiB/s, 完成.处理 delta 中: 100% (19048/19048), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/test/fuzztest'...remote: Enumerating objects: 11688, done.        remote: Counting objects: 100% (3655/3655), done.        remote: Compressing objects: 100% (702/702), done.        remote: Total 11688 (delta 3224), reused 2969 (delta 2952), pack-reused 8033 (from 2)        接收对象中: 100% (11688/11688), 5.12 MiB | 118.00 KiB/s, 完成.处理 delta 中: 100% (9090/9090), 完成.正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'...error: RPC 失败。curl 28 Failed to connect to github.com port 443 after 132999 ms: Couldn't connect to serverfatal: 在引用列表之后应该有一个 flush 包fatal: 无法克隆 'https://github.com/PX4/PX4-gazebo-models.git' 到子模组路径 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'第二次尝试克隆 'Tools/simulation/gz' 失败，退出zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects$ lsPX4-Autopilotzky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects$ cd PX4-Autopilotzky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule update --init --recursive platforms/nuttx/NuttX/apps正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/platforms/nuttx/NuttX/apps'...子模组路径 'platforms/nuttx/NuttX/apps'：检出 'e37940d8535f603a16b8f6f21c21edaf584218aa'zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule update --init --recursive Tools/simulation/gz正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'...error: RPC 失败。curl 56 Recv failure: 连接被对方重置error: 预期仍然需要 5840 个字节的正文fetch-pack: unexpected disconnect while reading sideband packetfatal: 过早的文件结束符（EOF）fatal: fetch-pack：无效的 index-pack 输出fatal: 无法克隆 'https://github.com/PX4/PX4-gazebo-models.git' 到子模组路径 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'克隆 'Tools/simulation/gz' 失败。按计划重试正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gz'...子模组路径 'Tools/simulation/gz'：检出 '6cfb3e362e1424caccb7363dca7e63484e44d188'子模组路径 'Tools/simulation/gz'：检出 '6cfb3e362e1424caccb7363dca7e63484e44d188'zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule update --init --recursive子模组路径 'boards/modalai/voxl2/libfc-sensor-api'：检出 '85151aaf6ba8b24ce82b387e088452c63f7e2096'子模组路径 'src/drivers/cyphal/legacy_data_types'：检出 '36a01e428b110ff84c8babe5b65667b5e3037d5e'子模组路径 'src/drivers/cyphal/libcanard'：检出 '5c69d451ab0787a81dcb615692d707f2a286f5e5'子模组路径 'src/drivers/cyphal/public_regulated_data_types'：检出 'd0bd6516dac8ff61287fe49a9f2c75e7d4dc1b8e'子模组路径 'src/drivers/ins/microstrain/mip_sdk'：检出 '35596994b60ba89fe02f71ce5127baa5e7ff2bbf'子模组路径 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'：检出 '19fdf2e5b383243ccdb1094edae0603cf11469e8'子模组路径 'src/lib/cdrstream/cyclonedds'：检出 '314887ca403c2fb0a0316add22672102936ed36c'子模组路径 'src/lib/cdrstream/rosidl'：检出 'bf5682e4747843d1d5133b9a2b54ce6f12f166c7'子模组路径 'src/lib/crypto/libtomcrypt'：检出 '673f5ce29015a9bba3c96792920a10601b5b0718'子模组路径 'src/lib/crypto/libtommath'：检出 'fd73d7630b9d3ed5a79d613ff680a549e9780de7'子模组路径 'src/modules/mavlink/mavlink'：检出 'f9dbd8c4968e9e135383e007244e4911ad4f729f'子模组 'pymavlink'（https://github.com/ardupilot/pymavlink.git）已对路径 'src/modules/mavlink/mavlink/pymavlink' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/src/modules/mavlink/mavlink/pymavlink'...子模组路径 'src/modules/mavlink/mavlink/pymavlink'：检出 'fcaa2c7d25e3169dc66155929c338487941555e9'子模组路径 'src/modules/zenoh/zenoh-pico'：检出 'ede74c3f5b0ac190d074e796057c62848bb9a488'子模组路径 'test/fuzztest'：检出 '1e47f9d7437de5c3ee4cb0ac860d5ec875478059'zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ </code></pre><h2 style="background-color:transparent">3.3 在父目录执行，安装工具链</h2><p>创建一个文件夹用来存储clone下来的PX4-Autopilot</p><pre><code class="language-bash">/home/zky/ProjectsHub/PX4_Projects</code></pre><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/21800ce769f04348bf76fc3e287f4ab3.png"></p><pre><code class="language-bash"># 在PX4_Projects文件夹下，安装工具链./PX4-Autopilot/Tools/setup/ubuntu.sh</code></pre><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/db441a847bc84718a2a38d47f62cd9f9.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/a7eb24fef29f40e69eb87a17d349af2b.png"></p><h2 style="background-color:transparent">3.4 编译默认目标</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="构建 PX4 软件 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/dev_setup/building_px4.html" title="构建 PX4 软件 | PX4 Guide (main)">构建 PX4 软件 | PX4 Guide (main)</a></p><pre><code class="language-bash"># 新版，我使用的make px4_sitl gz_x500# 经典版make px4_sitl gazebo-classic</code></pre><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/97181e444d374e8382dde087734b949e.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/8e02681d859c4407886173085ccf9244.png"></p><h3 style="background-color:transparent">3.4.1&nbsp;问题1：重置子模块</h3><pre><code class="language-bash"># 命令git submodule deinit -f .git submodule initgit submodule update --init --recursive --force</code></pre><p>&nbsp;解决方法：检查子模块是否都成功初始化（如果重置子模块还是不行，可能是丢包严重，就重新下载PX4源码）</p><pre><code class="language-bash">#  检测子模块zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule update --init --recursivezky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo ./Tools/setup/ubuntu.sh --sim-tools[ubuntu.sh] Starting...[ubuntu.sh] arch: x86_64[ubuntu.sh] Ubuntu 24.04[ubuntu.sh] Installing PX4 general dependencies命中:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble InRelease命中:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates InRelease命中:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports InRelease命中:4 https://packages.microsoft.com/repos/code stable InRelease命中:5 http://security.ubuntu.com/ubuntu noble-security InRelease正在读取软件包列表...正在读取软件包列表...正在分析软件包的依赖关系树...正在读取状态信息...astyle 已经是最新版 (3.1-3build1)。build-essential 已经是最新版 (12.10ubuntu1)。ccache 已经是最新版 (4.9.1-1)。cmake 已经是最新版 (3.28.3-1build7)。cppcheck 已经是最新版 (2.13.0-2ubuntu3)。file 已经是最新版 (1:5.45-3build1)。g++ 已经是最新版 (4:13.2.0-7ubuntu1)。gcc 已经是最新版 (4:13.2.0-7ubuntu1)。gdb 已经是最新版 (15.0.50.20240403-0ubuntu1)。git 已经是最新版 (1:2.43.0-1ubuntu7.3)。lcov 已经是最新版 (2.0-4ubuntu2)。libssl-dev 已经是最新版 (3.0.13-0ubuntu3.5)。libxml2-dev 已经是最新版 (2.9.14+dfsg-1.3ubuntu3.4)。libxml2-utils 已经是最新版 (2.9.14+dfsg-1.3ubuntu3.4)。make 已经是最新版 (4.3-4.1build2)。ninja-build 已经是最新版 (1.11.1-2)。python3 已经是最新版 (3.12.3-0ubuntu2)。python3-dev 已经是最新版 (3.12.3-0ubuntu2)。python3-pip 已经是最新版 (24.0+dfsg-1ubuntu1.2)。python3-setuptools 已经是最新版 (68.1.2-2ubuntu1.2)。python3-wheel 已经是最新版 (0.42.0-2)。rsync 已经是最新版 (3.2.7-1ubuntu1.2)。shellcheck 已经是最新版 (0.9.0-1)。unzip 已经是最新版 (6.0-28ubuntu4.1)。zip 已经是最新版 (3.0-13ubuntu0.2)。升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 77 个软件包未被升级。[ubuntu.sh] Installing PX4 Python3 dependenciesCollecting argcomplete (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 1))  Downloading argcomplete-3.6.2-py3-none-any.whl.metadata (16 kB)Collecting cerberus (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 2))  Downloading Cerberus-1.3.7-py3-none-any.whl.metadata (5.5 kB)Collecting coverage (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 3))  Downloading coverage-7.10.6-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (8.9 kB)Collecting empy&lt;4,&gt;=3.3 (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 4))  Downloading empy-3.3.4.tar.gz (62 kB)     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.9/62.9 kB 11.0 kB/s eta 0:00:00  Preparing metadata (setup.py) ... doneCollecting future (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 5))  Downloading future-1.0.0-py3-none-any.whl.metadata (4.0 kB)Requirement already satisfied: jinja2&gt;=2.8 in /usr/lib/python3/dist-packages (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 6)) (3.1.2)Requirement already satisfied: jsonschema in /usr/lib/python3/dist-packages (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 7)) (4.10.3)Collecting kconfiglib (from -r /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/requirements.txt (line 8))  Downloading kconfiglib-14.1.0-py2.py3-none-any.whl.metadata (39 kB)ERROR: Could not find a version that satisfies the requirement lxml (from versions: none)ERROR: No matching distribution found for lxmlzky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo apt update命中:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble InRelease命中:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates InRelease                                                     命中:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports InRelease                                                   命中:4 https://packages.microsoft.com/repos/code stable InRelease                                                              命中:5 http://security.ubuntu.com/ubuntu noble-security InRelease                                         正在读取软件包列表... 完成正在分析软件包的依赖关系树... 完成正在读取状态信息... 完成                 有 77 个软件包可以升级。请执行 ‘apt list --upgradable’ 来查看它们。zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo apt install -y libxml2-dev libxslt1-dev正在读取软件包列表... 完成正在分析软件包的依赖关系树... 完成正在读取状态信息... 完成                 libxml2-dev 已经是最新版 (2.9.14+dfsg-1.3ubuntu3.4)。下列【新】软件包将被安装：  libxslt1-dev升级了 0 个软件包，新安装了 1 个软件包，要卸载 0 个软件包，有 77 个软件包未被升级。需要下载 91.9 kB 的归档。解压缩后会消耗 837 kB 的额外空间。获取:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libxslt1-dev amd64 1.1.39-0exp1ubuntu0.24.04.2 [91.9 kB]已下载 91.9 kB，耗时 1秒 (152 kB/s)     正在选中未选择的软件包 libxslt1-dev:amd64。(正在读取数据库 ... 系统当前共安装有 181065 个文件和目录。)准备解压 .../libxslt1-dev_1.1.39-0exp1ubuntu0.24.04.2_amd64.deb  ...正在解压 libxslt1-dev:amd64 (1.1.39-0exp1ubuntu0.24.04.2) ...正在设置 libxslt1-dev:amd64 (1.1.39-0exp1ubuntu0.24.04.2) ...正在处理用于 man-db (2.12.0-4build2) 的触发器 ...zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ cd ~/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup/zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup$ sudo pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ --timeout 120error: externally-managed-environment× This environment is externally managed╰─&gt; To install Python packages system-wide, try apt install    python3-xyz, where xyz is the package you are trying to    install.        If you wish to install a non-Debian-packaged Python package,    create a virtual environment using python3 -m venv path/to/venv.    Then use path/to/venv/bin/python and path/to/venv/bin/pip. Make    sure you have python3-full installed.        If you wish to install a non-Debian packaged Python application,    it may be easiest to use pipx install xyz, which will manage a    virtual environment for you. Make sure you have pipx installed.        See /usr/share/doc/python3.12/README.venv for more information.note: If you believe this is a mistake, please contact your Python installation or OS distribution provider. You can override this, at the risk of breaking your Python installation or OS, by passing --break-system-packages.hint: See PEP 668 for the detailed specification.zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/setup$ </code></pre><p>如果还是有问题，就删掉之前的子模块注册然后重新初始化并加载。</p><pre><code class="language-bash">git submodule deinit -f .git submodule initgit submodule update --init --recursive --force</code></pre><p>详细过程：</p><pre><code class="language-bash">zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule deinit -f .已清除目录 'Tools/simulation/flightgear/flightgear_bridge'子模组 'Tools/flightgear_bridge'（https://github.com/PX4/PX4-FlightGear-Bridge.git）未对路径 'Tools/simulation/flightgear/flightgear_bridge' 注册已清除目录 'Tools/simulation/gazebo-classic/sitl_gazebo-classic'子模组 'Tools/simulation/gazebo-classic/sitl_gazebo-classic'（https://github.com/PX4/PX4-SITL_gazebo-classic.git）未对路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic' 注册已清除目录 'Tools/simulation/gz'子模组 'Tools/simulation/gz'（https://github.com/PX4/PX4-gazebo-models.git）未对路径 'Tools/simulation/gz' 注册已清除目录 'Tools/simulation/jmavsim/jMAVSim'子模组 'Tools/simulation/jmavsim/jMAVSim'（https://github.com/PX4/jMAVSim.git）未对路径 'Tools/simulation/jmavsim/jMAVSim' 注册已清除目录 'Tools/simulation/jsbsim/jsbsim_bridge'子模组 'Tools/simulation/jsbsim/jsbsim_bridge'（https://github.com/PX4/px4-jsbsim-bridge.git）未对路径 'Tools/simulation/jsbsim/jsbsim_bridge' 注册已清除目录 'boards/modalai/voxl2/libfc-sensor-api'子模组 'boards/modalai/voxl2/libfc-sensor-api'（https://gitlab.com/voxl-public/voxl-sdk/core-libs/libfc-sensor-api.git）未对路径 'boards/modalai/voxl2/libfc-sensor-api' 注册已清除目录 'platforms/nuttx/NuttX/apps'子模组 'platforms/nuttx/NuttX/apps'（https://github.com/PX4/NuttX-apps.git）未对路径 'platforms/nuttx/NuttX/apps' 注册已清除目录 'platforms/nuttx/NuttX/nuttx'子模组 'platforms/nuttx/NuttX/nuttx'（https://github.com/PX4/NuttX.git）未对路径 'platforms/nuttx/NuttX/nuttx' 注册已清除目录 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp'子模组 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp'（https://github.com/PX4/iq-module-communication-cpp.git）未对路径 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp' 注册已清除目录 'src/drivers/cyphal/legacy_data_types'子模组 'src/drivers/cyphal/legacy_data_types'（https://github.com/PX4/public_regulated_data_types.git）未对路径 'src/drivers/cyphal/legacy_data_types' 注册已清除目录 'src/drivers/cyphal/libcanard'子模组 'src/drivers/cyphal/libcanard'（https://github.com/opencyphal/libcanard.git）未对路径 'src/drivers/cyphal/libcanard' 注册已清除目录 'src/drivers/cyphal/public_regulated_data_types'子模组 'src/drivers/cyphal/public_regulated_data_types'（https://github.com/opencyphal/public_regulated_data_types.git）未对路径 'src/drivers/cyphal/public_regulated_data_types' 注册已清除目录 'src/drivers/gps/devices'子模组 'src/drivers/gps/devices'（https://github.com/PX4/PX4-GPSDrivers.git）未对路径 'src/drivers/gps/devices' 注册已清除目录 'src/drivers/ins/microstrain/mip_sdk'子模组 'src/drivers/ins/microstrain/mip_sdk'（https://github.com/PX4/LORD-MicroStrain_mip_sdk.git）未对路径 'src/drivers/ins/microstrain/mip_sdk' 注册已清除目录 'src/drivers/uavcan/libdronecan/dsdl'子模组 'src/drivers/uavcan/libdronecan/dsdl'（https://github.com/PX4/DSDL.git）未对路径 'src/drivers/uavcan/libdronecan/dsdl' 注册已清除目录 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'子模组 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'（https://github.com/dronecan/pydronecan）未对路径 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan' 注册已清除目录 'src/lib/cdrstream/cyclonedds'子模组 'src/lib/cdrstream/cyclonedds'（https://github.com/px4/cyclonedds）未对路径 'src/lib/cdrstream/cyclonedds' 注册已清除目录 'src/lib/cdrstream/rosidl'子模组 'src/lib/cdrstream/rosidl'（https://github.com/px4/rosidl）未对路径 'src/lib/cdrstream/rosidl' 注册已清除目录 'src/lib/crypto/libtomcrypt'子模组 'src/lib/crypto/libtomcrypt'（https://github.com/PX4/libtomcrypt.git）未对路径 'src/lib/crypto/libtomcrypt' 注册已清除目录 'src/lib/crypto/libtommath'子模组 'src/lib/crypto/libtommath'（https://github.com/PX4/libtommath.git）未对路径 'src/lib/crypto/libtommath' 注册已清除目录 'src/lib/crypto/monocypher'子模组 'src/lib/crypto/monocypher'（https://github.com/PX4/Monocypher.git）未对路径 'src/lib/crypto/monocypher' 注册已清除目录 'src/lib/events/libevents'子模组 'src/lib/events/libevents'（https://github.com/mavlink/libevents.git）未对路径 'src/lib/events/libevents' 注册已清除目录 'src/lib/heatshrink/heatshrink'子模组 'src/lib/heatshrink/heatshrink'（https://github.com/PX4/heatshrink.git）未对路径 'src/lib/heatshrink/heatshrink' 注册已清除目录 'src/lib/tensorflow_lite_micro/tflite_micro'子模组 'src/lib/tensorflow_lite_micro/tflite_micro'（https://github.com/PX4/tflite-micro.git）未对路径 'src/lib/tensorflow_lite_micro/tflite_micro' 注册已清除目录 'src/modules/mavlink/mavlink'子模组 'src/modules/mavlink/mavlink'（https://github.com/mavlink/mavlink.git）未对路径 'src/modules/mavlink/mavlink' 注册已清除目录 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'子模组 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'（https://github.com/PX4/Micro-XRCE-DDS-Client.git）未对路径 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client' 注册已清除目录 'src/modules/zenoh/zenoh-pico'子模组 'src/modules/zenoh/zenoh-pico'（https://github.com/px4/zenoh-pico）未对路径 'src/modules/zenoh/zenoh-pico' 注册已清除目录 'test/fuzztest'子模组 'test/fuzztest'（https://github.com/google/fuzztest.git）未对路径 'test/fuzztest' 注册zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule init子模组 'Tools/flightgear_bridge'（https://github.com/PX4/PX4-FlightGear-Bridge.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge' 注册子模组 'Tools/simulation/gazebo-classic/sitl_gazebo-classic'（https://github.com/PX4/PX4-SITL_gazebo-classic.git）已对路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic' 注册子模组 'Tools/simulation/gz'（https://github.com/PX4/PX4-gazebo-models.git）已对路径 'Tools/simulation/gz' 注册子模组 'Tools/simulation/jmavsim/jMAVSim'（https://github.com/PX4/jMAVSim.git）已对路径 'Tools/simulation/jmavsim/jMAVSim' 注册子模组 'Tools/simulation/jsbsim/jsbsim_bridge'（https://github.com/PX4/px4-jsbsim-bridge.git）已对路径 'Tools/simulation/jsbsim/jsbsim_bridge' 注册子模组 'boards/modalai/voxl2/libfc-sensor-api'（https://gitlab.com/voxl-public/voxl-sdk/core-libs/libfc-sensor-api.git）已对路径 'boards/modalai/voxl2/libfc-sensor-api' 注册子模组 'platforms/nuttx/NuttX/apps'（https://github.com/PX4/NuttX-apps.git）已对路径 'platforms/nuttx/NuttX/apps' 注册子模组 'platforms/nuttx/NuttX/nuttx'（https://github.com/PX4/NuttX.git）已对路径 'platforms/nuttx/NuttX/nuttx' 注册子模组 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp'（https://github.com/PX4/iq-module-communication-cpp.git）已对路径 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp' 注册子模组 'src/drivers/cyphal/legacy_data_types'（https://github.com/PX4/public_regulated_data_types.git）已对路径 'src/drivers/cyphal/legacy_data_types' 注册子模组 'src/drivers/cyphal/libcanard'（https://github.com/opencyphal/libcanard.git）已对路径 'src/drivers/cyphal/libcanard' 注册子模组 'src/drivers/cyphal/public_regulated_data_types'（https://github.com/opencyphal/public_regulated_data_types.git）已对路径 'src/drivers/cyphal/public_regulated_data_types' 注册子模组 'src/drivers/gps/devices'（https://github.com/PX4/PX4-GPSDrivers.git）已对路径 'src/drivers/gps/devices' 注册子模组 'src/drivers/ins/microstrain/mip_sdk'（https://github.com/PX4/LORD-MicroStrain_mip_sdk.git）已对路径 'src/drivers/ins/microstrain/mip_sdk' 注册子模组 'src/drivers/uavcan/libdronecan/dsdl'（https://github.com/PX4/DSDL.git）已对路径 'src/drivers/uavcan/libdronecan/dsdl' 注册子模组 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'（https://github.com/dronecan/pydronecan）已对路径 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan' 注册子模组 'src/lib/cdrstream/cyclonedds'（https://github.com/px4/cyclonedds）已对路径 'src/lib/cdrstream/cyclonedds' 注册子模组 'src/lib/cdrstream/rosidl'（https://github.com/px4/rosidl）已对路径 'src/lib/cdrstream/rosidl' 注册子模组 'src/lib/crypto/libtomcrypt'（https://github.com/PX4/libtomcrypt.git）已对路径 'src/lib/crypto/libtomcrypt' 注册子模组 'src/lib/crypto/libtommath'（https://github.com/PX4/libtommath.git）已对路径 'src/lib/crypto/libtommath' 注册子模组 'src/lib/crypto/monocypher'（https://github.com/PX4/Monocypher.git）已对路径 'src/lib/crypto/monocypher' 注册子模组 'src/lib/events/libevents'（https://github.com/mavlink/libevents.git）已对路径 'src/lib/events/libevents' 注册子模组 'src/lib/heatshrink/heatshrink'（https://github.com/PX4/heatshrink.git）已对路径 'src/lib/heatshrink/heatshrink' 注册子模组 'src/lib/tensorflow_lite_micro/tflite_micro'（https://github.com/PX4/tflite-micro.git）已对路径 'src/lib/tensorflow_lite_micro/tflite_micro' 注册子模组 'src/modules/mavlink/mavlink'（https://github.com/mavlink/mavlink.git）已对路径 'src/modules/mavlink/mavlink' 注册子模组 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'（https://github.com/PX4/Micro-XRCE-DDS-Client.git）已对路径 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client' 注册子模组 'src/modules/zenoh/zenoh-pico'（https://github.com/px4/zenoh-pico）已对路径 'src/modules/zenoh/zenoh-pico' 注册子模组 'test/fuzztest'（https://github.com/google/fuzztest.git）已对路径 'test/fuzztest' 注册zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ git submodule update --init --recursive --force子模组路径 'Tools/simulation/flightgear/flightgear_bridge'：检出 'f47ce7b5fbbb3aa43d33d2be1f6cd3746b13d5bf'子模组 'models/FlightGear-Rascal'（https://github.com/ThunderFly-aerospace/FlightGear-Rascal.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge/models/Rascal' 注册子模组 'models/FlightGear-TF-G1'（https://github.com/ThunderFly-aerospace/FlightGear-TF-G1.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-G1' 注册子模组 'models/FlightGear-TF-G2'（https://github.com/ThunderFly-aerospace/FlightGear-TF-G2.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-G2' 注册子模组 'models/FlightGear-TF-R1'（https://github.com/ThunderFly-aerospace/FlightGear-TF-R1.git）已对路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-R1' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/flightgear/flightgear_bridge/models/Rascal'...正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/flightgear/flightgear_bridge/models/TF-G1'...正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/flightgear/flightgear_bridge/models/TF-G2'...正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/flightgear/flightgear_bridge/models/TF-R1'...子模组路径 'Tools/simulation/flightgear/flightgear_bridge/models/Rascal'：检出 'cbdb2fc7dd44331da1dcd04a891ed7f8c27b1ef0'子模组路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-G1'：检出 'fdb6dd685f55097230c0eb29aa7e9f5b8d0abf1e'子模组路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-G2'：检出 '99529413531106836f4303c5389928a4fef04b05'子模组路径 'Tools/simulation/flightgear/flightgear_bridge/models/TF-R1'：检出 '158e429a0110589b1e2adfe868e166271470e144'子模组路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic'：检出 '6697ab169ceab512dc706acea63df4c882662c60'子模组 'external/OpticalFlow'（https://github.com/PX4/OpticalFlow.git）已对路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow'...子模组路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow'：检出 '28ef45c1fcb532b2bfd54c16b059c6a545143b2f'子模组 'external/klt_feature_tracker'（https://github.com/ethz-ait/klt_feature_tracker.git）已对路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow/external/klt_feature_tracker' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow/external/klt_feature_tracker'...子模组路径 'Tools/simulation/gazebo-classic/sitl_gazebo-classic/external/OpticalFlow/external/klt_feature_tracker'：检出 '9b5b567ae77f93d1ef4d36151529ba2506a46e7a'子模组路径 'Tools/simulation/gz'：检出 '6cfb3e362e1424caccb7363dca7e63484e44d188'子模组路径 'Tools/simulation/jmavsim/jMAVSim'：检出 '66b764ada522893c05224950aa6268c809f8e48a'子模组 'jMAVlib'（https://github.com/PX4/jMAVlib.git）已对路径 'Tools/simulation/jmavsim/jMAVSim/jMAVlib' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/jmavsim/jMAVSim/jMAVlib'...子模组路径 'Tools/simulation/jmavsim/jMAVSim/jMAVlib'：检出 'c08380767b21938391bec676a43b36b837af9ba4'子模组路径 'Tools/simulation/jsbsim/jsbsim_bridge'：检出 'f37ec259bd7a43565fe0ff4722465b7a303200f6'子模组 'models/ATI-Resolution'（https://github.com/FGMEMBERS/ATI-Resolution.git）已对路径 'Tools/simulation/jsbsim/jsbsim_bridge/models/ATI-Resolution' 注册子模组 'models/Rascal'（https://github.com/Auterion/FlightGear-Rascal.git）已对路径 'Tools/simulation/jsbsim/jsbsim_bridge/models/Rascal' 注册正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/jsbsim/jsbsim_bridge/models/ATI-Resolution'...正克隆到 '/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/Tools/simulation/jsbsim/jsbsim_bridge/models/Rascal'...子模组路径 'Tools/simulation/jsbsim/jsbsim_bridge/models/ATI-Resolution'：检出 '40571cd808a204f4062128daeb6bb6db8c134c48'子模组路径 'Tools/simulation/jsbsim/jsbsim_bridge/models/Rascal'：检出 'd0d1db1961549e557885002cf9c3cff40cc27be2'子模组路径 'boards/modalai/voxl2/libfc-sensor-api'：检出 '85151aaf6ba8b24ce82b387e088452c63f7e2096'子模组路径 'platforms/nuttx/NuttX/apps'：检出 'e37940d8535f603a16b8f6f21c21edaf584218aa'子模组路径 'platforms/nuttx/NuttX/nuttx'：检出 'b0b49a210696dd0074dff9531fd1603afb0cc2e4'子模组路径 'src/drivers/actuators/vertiq_io/iq-module-communication-cpp'：检出 'c488af4e8807de80739aa48efd2ea51614dd8195'子模组路径 'src/drivers/cyphal/legacy_data_types'：检出 '36a01e428b110ff84c8babe5b65667b5e3037d5e'子模组路径 'src/drivers/cyphal/libcanard'：检出 '5c69d451ab0787a81dcb615692d707f2a286f5e5'子模组路径 'src/drivers/cyphal/public_regulated_data_types'：检出 'd0bd6516dac8ff61287fe49a9f2c75e7d4dc1b8e'子模组路径 'src/drivers/gps/devices'：检出 '8fdef3bc0cb7820119abdb7320ad3992af2e440f'子模组路径 'src/drivers/ins/microstrain/mip_sdk'：检出 '35596994b60ba89fe02f71ce5127baa5e7ff2bbf'子模组路径 'src/drivers/uavcan/libdronecan/dsdl'：检出 '993be80a62ec957c01fb41115b83663959a49f46'子模组路径 'src/drivers/uavcan/libdronecan/libuavcan/dsdl_compiler/pydronecan'：检出 '19fdf2e5b383243ccdb1094edae0603cf11469e8'子模组路径 'src/lib/cdrstream/cyclonedds'：检出 '314887ca403c2fb0a0316add22672102936ed36c'子模组路径 'src/lib/cdrstream/rosidl'：检出 'bf5682e4747843d1d5133b9a2b54ce6f12f166c7'子模组路径 'src/lib/crypto/libtomcrypt'：检出 '673f5ce29015a9bba3c96792920a10601b5b0718'子模组路径 'src/lib/crypto/libtommath'：检出 'fd73d7630b9d3ed5a79d613ff680a549e9780de7'子模组路径 'src/lib/crypto/monocypher'：检出 'baca5d31259c598540e4d1284bc8d8f793abf83a'子模组路径 'src/lib/events/libevents'：检出 '9ef591c447fe0386d698bf6fb9a6d27e43988ee4'子模组路径 'src/lib/heatshrink/heatshrink'：检出 '052e6de72f67f1777198bce98f3de62f7f3c16a0'子模组路径 'src/lib/tensorflow_lite_micro/tflite_micro'：检出 '3c0b1e3091e4ea423e1bf9da89d41d09517eb0c9'子模组路径 'src/modules/mavlink/mavlink'：检出 'f9dbd8c4968e9e135383e007244e4911ad4f729f'子模组路径 'src/modules/mavlink/mavlink/pymavlink'：检出 'fcaa2c7d25e3169dc66155929c338487941555e9'子模组路径 'src/modules/uxrce_dds_client/Micro-XRCE-DDS-Client'：检出 '711aef423edd1820347b866d1e4164832df35d04'子模组路径 'src/modules/zenoh/zenoh-pico'：检出 'ede74c3f5b0ac190d074e796057c62848bb9a488'子模组路径 'test/fuzztest'：检出 '1e47f9d7437de5c3ee4cb0ac860d5ec875478059'zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ </code></pre><h3 style="background-color:transparent">3.4.2 问题2：输入编译指令，出现部分工具问题，通过AI或者百度查询，可能需要安装py虚拟环境工具，但是建议先重置子模块，或者重新克隆下载</h3><p>错误现象：</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/c10646c4902f46849b75e93fb5d6b592.png"></p><pre><code class="language-bash"># 错误详情zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ make px4_sitl gz_x500-- PX4_GIT_TAG: v1.16.0-rc1-753-g89c6d24946CMake Warning (dev) at CMakeLists.txt:176 (find_package):  Policy CMP0148 is not set: The FindPythonInterp and FindPythonLibs modules  are removed.  Run "cmake --help-policy CMP0148" for policy details.  Use  the cmake_policy command to set the policy and suppress this warning.This warning is for project developers.  Use -Wno-dev to suppress it.-- Found PythonInterp: /usr/bin/python3 (found suitable version "3.12.3", minimum required is "3") -- PX4 config file: /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/boards/px4/sitl/default.px4board-- PLATFORM posix-- ROMFSROOT px4fmu_common-- TESTING y-- ETHERNET y-- ROOT_PATH .-- PARAM_FILE /fs/mtd_params-- PX4 config: px4_sitl_default-- PX4 platform: posix-- PX4 lockstep: enabled-- The CXX compiler identification is GNU 13.3.0-- The C compiler identification is GNU 13.3.0-- The ASM compiler identification is GNU-- Found assembler: /usr/bin/cc-- Detecting CXX compiler ABI info-- Detecting CXX compiler ABI info - done-- Check for working CXX compiler: /usr/bin/c++ - skipped-- Detecting CXX compile features-- Detecting CXX compile features - done-- Detecting C compiler ABI info-- Detecting C compiler ABI info - done-- Check for working C compiler: /usr/bin/cc - skipped-- Detecting C compile features-- Detecting C compile features - done-- cmake build type: RelWithDebInfo-- ccache enabled (export CCACHE_DISABLE=1 to disable)-- Could NOT find gz-transport (missing: gz-transport_DIR)-- Gazebo simulation bridge module disabled: missing dependencies-- Could NOT find Protobuf (missing: Protobuf_LIBRARIES Protobuf_INCLUDE_DIR) -- Could NOT find gz-transport (missing: gz-transport_DIR)-- Could NOT find gz-sim (missing: gz-sim_DIR)-- Could NOT find gz-sensors (missing: gz-sensors_DIR)-- Could NOT find gz-plugin (missing: gz-plugin_DIR)-- Could NOT find Java (missing: Java_JAVA_EXECUTABLE Java_JAR_EXECUTABLE Java_JAVAC_EXECUTABLE Java_JAVAH_EXECUTABLE Java_JAVADOC_EXECUTABLE) -- ROMFS: ROMFS/px4fmu_commonArchitecture:  amd64==&gt; CPACK_INSTALL_PREFIX = @DEB_INSTALL_PREFIX@-- Configuring done (2.1s)CMake Error at cmake/px4_add_library.cmake:42 (add_library):  Cannot find source file:    heatshrink/heatshrink_decoder.c  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .mpp .m .M .mm .ixx .cppm  .ccm .cxxm .c++m .h .hh .h++ .hm .hpp .hxx .in .txx .f .F .for .f77 .f90  .f95 .f03 .hip .ispcCall Stack (most recent call first):  src/lib/heatshrink/CMakeLists.txt:36 (px4_add_library)CMake Error at cmake/px4_add_module.cmake:151 (add_library):  Cannot find source file:    devices/src/crc.cpp  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .mpp .m .M .mm .ixx .cppm  .ccm .cxxm .c++m .h .hh .h++ .hm .hpp .hxx .in .txx .f .F .for .f77 .f90  .f95 .f03 .hip .ispcCall Stack (most recent call first):  src/drivers/gps/CMakeLists.txt:36 (px4_add_module)CMake Error at cmake/px4_add_library.cmake:42 (add_library):  No SOURCES given to target: heatshrinkCall Stack (most recent call first):  src/lib/heatshrink/CMakeLists.txt:36 (px4_add_library)CMake Error at cmake/px4_add_module.cmake:151 (add_library):  No SOURCES given to target: drivers__gpsCall Stack (most recent call first):  src/drivers/gps/CMakeLists.txt:36 (px4_add_module)CMake Generate step failed.  Build files cannot be regenerated correctly.Error: /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default is not a directorymake: *** [Makefile:227：px4_sitl] 错误 1zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ </code></pre><p>解决方法：这里我先有问题2的方法再重新重置拉取子模块就好了，如果还是有问题就查询AI、百度。</p><h3 style="background-color:transparent">2.4.3 问题3：缺少 Gazebo 仿真环境的依赖项</h3><p>错误现象：</p><pre><code class="language-bash">zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ make px4_sitl gz_x500[1/1] cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default... https://gazebosim.org/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseFAILED: src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge &amp;&amp; /usr/bin/cmake -E echo "ERROR: Gazebo simulation dependencies not found!" &amp;&amp; /usr/bin/cmake -E echo "  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseERROR: Gazebo simulation dependencies not found!  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/ninja: build stopped: subcommand failed.make: *** [Makefile:227：px4_sitl] 错误 1zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ </code></pre><p>解决方法：</p><pre><code class="language-bash"># 命令# 添加 Gazebo 密钥sudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg# 添加软件源（适用于 Ubuntu 20.04/22.04）echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkg# 更新软件包列表sudo apt update# 安装 Gazebo Sim 核心组件sudo apt install gz-harmonicgz sim</code></pre><p>测试：</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/3a96dd7cf2834969a288da253b8816ab.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/4898d19ad35a4e9aabf839ed3e93d53a.png"></p><p>详细过程：</p><pre><code class="language-bash"># 可不用细看zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ make px4_sitl gz_x500[1/1] cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default... https://gazebosim.org/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseFAILED: src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge &amp;&amp; /usr/bin/cmake -E echo "ERROR: Gazebo simulation dependencies not found!" &amp;&amp; /usr/bin/cmake -E echo "  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseERROR: Gazebo simulation dependencies not found!  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/ninja: build stopped: subcommand failed.make: *** [Makefile:227：px4_sitl] 错误 1zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg[sudo] zky 的密码： --2025-09-06 12:35:42--  https://packages.osrfoundation.org/gazebo.gpg正在解析主机 packages.osrfoundation.org (packages.osrfoundation.org)... 52.52.171.73正在连接 packages.osrfoundation.org (packages.osrfoundation.org)|52.52.171.73|:443... 已连接。已发出 HTTP 请求，正在等待回应... 200 OK长度： 1222 (1.2K) [application/octet-stream]正在保存至: ‘/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg’/usr/share/keyrings/pkgs-osrf-archive-ke 100%[==================================================================================&gt;]   1.19K  --.-KB/s    用时 0s    2025-09-06 12:35:44 (426 MB/s) - 已保存 ‘/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg’ [1222/1222])zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list &gt; /dev/nullzky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo apt update获取:1 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble InRelease [4,261 B]                                                                            命中:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble InRelease                                                                                                 获取:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates InRelease [126 kB]命中:4 https://packages.microsoft.com/repos/code stable InRelease                                 获取:5 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 Packages [65.4 kB] 获取:6 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports InRelease [126 kB]获取:7 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 Packages [1,390 kB]命中:8 http://security.ubuntu.com/ubuntu noble-security InRelease                        获取:9 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 Components [175 kB]获取:10 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/restricted amd64 Components [212 B]获取:11 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 Packages [1,481 kB]获取:12 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 Components [377 kB]                                                               获取:13 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/multiverse amd64 Components [940 B]                                                              获取:14 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports/main amd64 Components [7,076 B]                                                                获取:15 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports/restricted amd64 Components [216 B]                                                            获取:16 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports/universe amd64 Components [19.2 kB]                                                            获取:17 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports/multiverse amd64 Components [212 B]                                                            已下载 3,773 kB，耗时 7秒 (543 kB/s)                                                                                                                               正在读取软件包列表... 完成正在分析软件包的依赖关系树... 完成正在读取状态信息... 完成                 有 47 个软件包可以升级。请执行 ‘apt list --upgradable’ 来查看它们。zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ sudo apt install gz-harmonic正在读取软件包列表... 完成正在分析软件包的依赖关系树... 完成正在读取状态信息... 完成                 下列软件包是自动安装的并且现在不需要了：  libllvm19使用'sudo apt autoremove'来卸载它(它们)。将会同时安装下列软件：  comerr-dev cppzmq-dev default-libmysqlclient-dev fonts-lato gdal-data gdal-plugins gz-launch7-cli gz-plugin2-cli gz-sim8-cli gz-tools2 gz-transport13-cli  hdf5-helpers i965-va-driver intel-media-va-driver krb5-multidev libaacs0 libaec-dev libaec0 libaom-dev libarmadillo-dev libarmadillo12 libarpack2-dev  libarpack2t64 libass9 libassimp-dev libassimp5 libavcodec-dev libavcodec60 libavdevice-dev libavdevice60 libavfilter-dev libavfilter9 libavformat-dev  libavformat60 libavutil-dev libavutil58 libbdplus0 libblas-dev libblas3 libblkid-dev libblosc-dev libblosc1 libbluray2 libboost-atomic1.83-dev  libboost-atomic1.83.0 libboost-chrono1.83-dev libboost-chrono1.83.0t64 libboost-date-time1.83-dev libboost-date-time1.83.0 libboost-dev  libboost-serialization1.83-dev libboost-serialization1.83.0 libboost-system1.83-dev libboost-system1.83.0 libboost-thread-dev libboost-thread1.83-dev  libboost-thread1.83.0 libboost1.83-dev libbs2b0 libbsd-dev libbullet-dev libbullet3.24t64 libcap-dev libccd2 libcfitsio-dev libcfitsio-doc libcfitsio10t64  libchromaprint1 libcjson1 libcodec2-1.2 libcurl4-openssl-dev libdart-core+collisions+odelcpsolver6.13 libdav1d-dev libdav1d7 libdc1394-25 libde265-dev  libdeflate-dev libdraco8 libegl-dev libegl-mesa0 libeigen3-dev libev-dev libev4t64 libfcl0.7 libffi-dev libfftw3-double3 libflite1 libfreeimage-dev  libfreeimage3 libfreexl-dev libfreexl1 libfyba-dev libfyba0t64 libgbm1 libgdal-dev libgdal34t64 libgeos-c1t64 libgeos-dev libgeos3.12.1t64 libgeotiff-dev  libgeotiff5 libgfortran5 libgif-dev libgirepository-2.0-0 libgl-dev libgl1-mesa-dri libglib2.0-dev libglib2.0-dev-bin libglu1-mesa-dev libglx-dev libglx-mesa0  libgme0 libgsm1 libgssrpc4t64 libgts-0.7-5t64 libgts-bin libgts-dev libgz-cmake3-dev libgz-common5 libgz-common5-av libgz-common5-av-dev libgz-common5-core-dev  libgz-common5-dev libgz-common5-events libgz-common5-events-dev libgz-common5-geospatial libgz-common5-geospatial-dev libgz-common5-graphics  libgz-common5-graphics-dev libgz-common5-io libgz-common5-io-dev libgz-common5-profiler libgz-common5-profiler-dev libgz-common5-testing  libgz-common5-testing-dev libgz-fuel-tools9 libgz-fuel-tools9-dev libgz-gui8 libgz-gui8-dev libgz-launch7 libgz-launch7-dev libgz-math7 libgz-math7-dev  libgz-math7-eigen3-dev libgz-msgs10 libgz-msgs10-dev libgz-physics7 libgz-physics7-bullet libgz-physics7-bullet-dev libgz-physics7-core-dev  libgz-physics7-dartsim libgz-physics7-dartsim-dev libgz-physics7-dev libgz-physics7-heightmap-dev libgz-physics7-mesh-dev libgz-physics7-sdf-dev  libgz-physics7-tpe libgz-physics7-tpe-dev libgz-physics7-tpelib libgz-physics7-tpelib-dev libgz-plugin2 libgz-plugin2-dev libgz-rendering8  libgz-rendering8-core-dev libgz-rendering8-dev libgz-rendering8-ogre1 libgz-rendering8-ogre1-dev libgz-rendering8-ogre2 libgz-rendering8-ogre2-dev  libgz-sensors8 libgz-sensors8-air-pressure libgz-sensors8-air-pressure-dev libgz-sensors8-air-speed libgz-sensors8-air-speed-dev libgz-sensors8-altimeter  libgz-sensors8-altimeter-dev libgz-sensors8-boundingbox-camera libgz-sensors8-boundingbox-camera-dev libgz-sensors8-camera libgz-sensors8-camera-dev  libgz-sensors8-core-dev libgz-sensors8-depth-camera libgz-sensors8-depth-camera-dev libgz-sensors8-dev libgz-sensors8-dvl libgz-sensors8-dvl-dev  libgz-sensors8-force-torque libgz-sensors8-force-torque-dev libgz-sensors8-gpu-lidar libgz-sensors8-gpu-lidar-dev libgz-sensors8-imu libgz-sensors8-imu-dev  libgz-sensors8-lidar libgz-sensors8-lidar-dev libgz-sensors8-logical-camera libgz-sensors8-logical-camera-dev libgz-sensors8-magnetometer  libgz-sensors8-magnetometer-dev libgz-sensors8-navsat libgz-sensors8-navsat-dev libgz-sensors8-rendering libgz-sensors8-rendering-dev libgz-sensors8-rgbd-camera  libgz-sensors8-rgbd-camera-dev libgz-sensors8-segmentation-camera libgz-sensors8-segmentation-camera-dev libgz-sensors8-thermal-camera  libgz-sensors8-thermal-camera-dev libgz-sensors8-wide-angle-camera libgz-sensors8-wide-angle-camera-dev libgz-sim8 libgz-sim8-dev libgz-sim8-plugins  libgz-tools2-dev libgz-transport13 libgz-transport13-core-dev libgz-transport13-dev libgz-transport13-log libgz-transport13-log-dev libgz-transport13-parameters  libgz-transport13-parameters-dev libgz-utils2 libgz-utils2-cli-dev libgz-utils2-dev libhdf4-0-alt libhdf4-alt-dev libhdf5-103-1t64 libhdf5-cpp-103-1t64  libhdf5-dev libhdf5-fortran-102t64 libhdf5-hl-100t64 libhdf5-hl-cpp-100t64 libhdf5-hl-fortran-100t64 libheif-dev libhwy1t64 libigdgmm12 libimath-3-1-29t64  libjack-jackd2-0 libjbig-dev libjpeg-dev libjpeg-turbo8-dev libjpeg8-dev libjson-c-dev libjsoncpp-dev libjxl0.7 libjxr0t64 libkadm5clnt-mit12 libkadm5srv-mit12  libkdb5-10t64 libkml-dev libkmlbase1t64 libkmlconvenience1t64 libkmldom1t64 libkmlengine1t64 libkmlregionator1t64 libkmlxsd1t64 libkrb5-dev liblapack-dev  liblapack3 liblerc-dev liblilv-0-0 libllvm20 libltdl-dev liblz4-dev libmbedcrypto7t64 libmd-dev libminizip-dev libmount-dev libmysofa1 libmysqlclient-dev  libmysqlclient21 libnetcdf-dev libnetcdf19t64 libnorm-dev libnorm1t64 liboctomap1.9t64 libodbc2 libodbccr2 libodbcinst2 libode8t64 libogdi-dev libogdi4.1  libogre-1.9-dev libogre-1.9.0t64 libogre-next-2.3-dev libogre-next-2.3.0 libopenal-data libopenal1 libopenexr-3-1-30 libopengl-dev libopenjp2-7-dev  libopenmpt0t64 libpcre2-dev libpcre2-posix3 libpgm-5.3-0t64 libpgm-dev libplacebo338 libpng-dev libpng-tools libpocketsphinx3 libpoppler-dev  libpoppler-private-dev libpostproc-dev libpostproc57 libpq-dev libpq5 libproj-dev libproj25 libprotobuf-dev libprotobuf-lite32t64 libprotoc-dev libprotoc32t64  libpthread-stubs0-dev libpugixml-dev libpugixml1v5 libqhull-dev libqhull-r8.0 libqhull8.0 libqhullcpp8.0 libqt5charts5 libqt5concurrent5t64 libqt5opengl5-dev  libqt5opengl5t64 libqt5qmlworkerscript5 libqt5quickcontrols2-5 libqt5quickparticles5 libqt5quickshapes5 libqt5quicktemplates2-5 libqt5quicktest5  libqt5sql5-sqlite libqt5sql5t64 libqt5test5t64 libqt5xml5t64 librabbitmq4 librav1e0 libraw23t64 librist4 librttopo-dev librttopo1 librubberband2 libruby  libruby3.2 libsdformat14 libsdformat14-dev libsdl2-2.0-0 libselinux1-dev libsepol-dev libserd-0-0 libsharpyuv-dev libshine3 libsndio7.0 libsodium-dev  libsord-0-0 libsoxr0 libspatialite-dev libspatialite8t64 libsphinxbase3t64 libsqlite3-dev libsratom-0-0 libsrt1.5-gnutls libssh-gcrypt-4 libsuperlu-dev  libsuperlu6 libsvtav1enc1d1 libswresample-dev libswresample4 libswscale-dev libswscale7 libsz2 libtiff-dev libtiffxx6 libtinyxml2-dev libtirpc-dev libudfread0  libunibreak5 liburiparser-dev liburiparser1 libuv1-dev libva-drm2 libva-x11-2 libva2 libvdpau1 libvidstab1.1 libvpl2 libvulkan-dev libwebp-dev libwebpdecoder3  libwebsockets-dev libwebsockets-evlib-ev libwebsockets-evlib-glib libwebsockets-evlib-uv libwebsockets19t64 libx11-dev libx264-164 libx265-199 libx265-dev  libxatracker2 libxau-dev libxcb1-dev libxdmcp-dev libxerces-c-dev libxerces-c3.2t64 libxext-dev libxvidcore4 libyaml-dev libzimg2 libzip-dev libzip4t64  libzix-0-0 libzmq3-dev libzmq5 libzvbi-common libzvbi0t64 libzzip-0-13t64 mesa-libgallium mesa-va-drivers mesa-vdpau-drivers mesa-vulkan-drivers mysql-common  ocl-icd-libopencl1 pocketsphinx-en-us proj-bin proj-data protobuf-compiler pybind11-dev python3-gz-math7 python3-gz-msgs10 python3-gz-sim8  python3-gz-transport13 python3-numpy python3-packaging python3-protobuf python3-pybind11 python3-sdformat14 qml-module-qt-labs-folderlistmodel  qml-module-qt-labs-platform qml-module-qt-labs-settings qml-module-qtcharts qml-module-qtgraphicaleffects qml-module-qtqml qml-module-qtqml-models2  qml-module-qtquick-controls qml-module-qtquick-controls2 qml-module-qtquick-dialogs qml-module-qtquick-layouts qml-module-qtquick-privatewidgets  qml-module-qtquick-templates2 qml-module-qtquick-window2 qml-module-qtquick2 qt5-qmake qt5-qmake-bin qt5-qmltooling-plugins qtbase5-dev qtbase5-dev-tools  qtchooser qtdeclarative5-dev qtdeclarative5-dev-tools qtquickcontrols2-5-dev rake ruby ruby-net-telnet ruby-rubygems ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2  rubygems-integration sdformat14-sdf unixodbc-common unixodbc-dev uuid-dev va-driver-all vdpau-driver-all x11proto-dev xorg-sgml-doctools xtrans-dev建议安装：  doc-base i965-va-driver-shaders krb5-doc libitpp-dev libcuda1 libnvcuvid1 libnvidia-encode1 liblapack-doc libbluray-bdj libboost-doc libboost1.83-doc  libboost-container1.83-dev libboost-context1.83-dev libboost-contract1.83-dev libboost-coroutine1.83-dev libboost-exception1.83-dev libboost-fiber1.83-dev  libboost-filesystem1.83-dev libboost-graph-parallel1.83-dev libboost-graph1.83-dev libboost-iostreams1.83-dev libboost-json1.83-dev libboost-locale1.83-dev  libboost-log1.83-dev libboost-math1.83-dev libboost-mpi-python1.83-dev libboost-mpi1.83-dev libboost-nowide1.83-dev libboost-numpy1.83-dev  libboost-program-options1.83-dev libboost-python1.83-dev libboost-random1.83-dev libboost-regex1.83-dev libboost-stacktrace1.83-dev libboost-test1.83-dev  libboost-timer1.83-dev libboost-type-erasure1.83-dev libboost-url1.83-dev libboost-wave1.83-dev libboost1.83-tools-dev libmpfrc++-dev libntl-dev libcurl4-doc  libidn-dev libldap2-dev librtmp-dev libssh2-1-dev libeigen3-doc libfftw3-bin libfftw3-dev libgdal-doc libgeotiff-epsg geotiff-bin gdal-bin gir1.2-glib-2.0-dev  libglib2.0-doc krb5-user libgts-doc libdart-dev | libdart6.13-dev libdart-external-convhull-3d-dev | libdart6.13-external-convhull-3d-dev  libdart-collision-ode-dev | libdart6.13-collision-ode-dev libdart-utils-urdf-dev | libdart6.13-utils-urdf-dev libdart-utils-dev | libdart6.13-utils-dev  libdart-external-odelcpsolver-dev | libdart6.13-external-odelcpsolver-dev libdart-external-ikfast-dev | libdart6.13-external-ikfast-dev  libdart-collision-bullet-dev | libdart6.13-collision-bullet-dev libhdf4-doc hdf4-tools libhdf5-doc jackd2 libtool-doc netcdf-bin netcdf-doc libnorm-doc  odbc-postgresql tdsodbc ogdi-bin ogre-1.9-doc libogre-1.9.0v5-dbg ogre-next-2.3-doc libportaudio2 libfreetype-dev postgresql-doc-16 serdi sndiod sordi  sqlite3-doc libsuperlu-doc libx11-doc libx265-doc libxcb-doc libxerces-c-doc libxext-doc libyaml-doc opencl-icd protobuf-mode-el pybind11-doc gfortran  python3-pytest firebird-dev ri ruby-dev bundler libvdpau-va-gl1下列【新】软件包将被安装：  comerr-dev cppzmq-dev default-libmysqlclient-dev fonts-lato gdal-data gdal-plugins gz-harmonic gz-launch7-cli gz-plugin2-cli gz-sim8-cli gz-tools2  gz-transport13-cli hdf5-helpers i965-va-driver intel-media-va-driver krb5-multidev libaacs0 libaec-dev libaec0 libaom-dev libarmadillo-dev libarmadillo12  libarpack2-dev libarpack2t64 libass9 libassimp-dev libassimp5 libavcodec-dev libavcodec60 libavdevice-dev libavdevice60 libavfilter-dev libavfilter9  libavformat-dev libavformat60 libavutil-dev libavutil58 libbdplus0 libblas-dev libblas3 libblkid-dev libblosc-dev libblosc1 libbluray2 libboost-atomic1.83-dev  libboost-atomic1.83.0 libboost-chrono1.83-dev libboost-chrono1.83.0t64 libboost-date-time1.83-dev libboost-date-time1.83.0 libboost-dev  libboost-serialization1.83-dev libboost-serialization1.83.0 libboost-system1.83-dev libboost-system1.83.0 libboost-thread-dev libboost-thread1.83-dev  libboost-thread1.83.0 libboost1.83-dev libbs2b0 libbsd-dev libbullet-dev libbullet3.24t64 libcap-dev libccd2 libcfitsio-dev libcfitsio-doc libcfitsio10t64  libchromaprint1 libcjson1 libcodec2-1.2 libcurl4-openssl-dev libdart-core+collisions+odelcpsolver6.13 libdav1d-dev libdav1d7 libdc1394-25 libde265-dev  libdeflate-dev libdraco8 libegl-dev libeigen3-dev libev-dev libev4t64 libfcl0.7 libffi-dev libfftw3-double3 libflite1 libfreeimage-dev libfreeimage3  libfreexl-dev libfreexl1 libfyba-dev libfyba0t64 libgdal-dev libgdal34t64 libgeos-c1t64 libgeos-dev libgeos3.12.1t64 libgeotiff-dev libgeotiff5 libgfortran5  libgif-dev libgirepository-2.0-0 libgl-dev libglib2.0-dev libglib2.0-dev-bin libglu1-mesa-dev libglx-dev libgme0 libgsm1 libgssrpc4t64 libgts-0.7-5t64  libgts-bin libgts-dev libgz-cmake3-dev libgz-common5 libgz-common5-av libgz-common5-av-dev libgz-common5-core-dev libgz-common5-dev libgz-common5-events  libgz-common5-events-dev libgz-common5-geospatial libgz-common5-geospatial-dev libgz-common5-graphics libgz-common5-graphics-dev libgz-common5-io  libgz-common5-io-dev libgz-common5-profiler libgz-common5-profiler-dev libgz-common5-testing libgz-common5-testing-dev libgz-fuel-tools9 libgz-fuel-tools9-dev  libgz-gui8 libgz-gui8-dev libgz-launch7 libgz-launch7-dev libgz-math7 libgz-math7-dev libgz-math7-eigen3-dev libgz-msgs10 libgz-msgs10-dev libgz-physics7  libgz-physics7-bullet libgz-physics7-bullet-dev libgz-physics7-core-dev libgz-physics7-dartsim libgz-physics7-dartsim-dev libgz-physics7-dev  libgz-physics7-heightmap-dev libgz-physics7-mesh-dev libgz-physics7-sdf-dev libgz-physics7-tpe libgz-physics7-tpe-dev libgz-physics7-tpelib  libgz-physics7-tpelib-dev libgz-plugin2 libgz-plugin2-dev libgz-rendering8 libgz-rendering8-core-dev libgz-rendering8-dev libgz-rendering8-ogre1  libgz-rendering8-ogre1-dev libgz-rendering8-ogre2 libgz-rendering8-ogre2-dev libgz-sensors8 libgz-sensors8-air-pressure libgz-sensors8-air-pressure-dev  libgz-sensors8-air-speed libgz-sensors8-air-speed-dev libgz-sensors8-altimeter libgz-sensors8-altimeter-dev libgz-sensors8-boundingbox-camera  libgz-sensors8-boundingbox-camera-dev libgz-sensors8-camera libgz-sensors8-camera-dev libgz-sensors8-core-dev libgz-sensors8-depth-camera  libgz-sensors8-depth-camera-dev libgz-sensors8-dev libgz-sensors8-dvl libgz-sensors8-dvl-dev libgz-sensors8-force-torque libgz-sensors8-force-torque-dev  libgz-sensors8-gpu-lidar libgz-sensors8-gpu-lidar-dev libgz-sensors8-imu libgz-sensors8-imu-dev libgz-sensors8-lidar libgz-sensors8-lidar-dev  libgz-sensors8-logical-camera libgz-sensors8-logical-camera-dev libgz-sensors8-magnetometer libgz-sensors8-magnetometer-dev libgz-sensors8-navsat  libgz-sensors8-navsat-dev libgz-sensors8-rendering libgz-sensors8-rendering-dev libgz-sensors8-rgbd-camera libgz-sensors8-rgbd-camera-dev  libgz-sensors8-segmentation-camera libgz-sensors8-segmentation-camera-dev libgz-sensors8-thermal-camera libgz-sensors8-thermal-camera-dev  libgz-sensors8-wide-angle-camera libgz-sensors8-wide-angle-camera-dev libgz-sim8 libgz-sim8-dev libgz-sim8-plugins libgz-tools2-dev libgz-transport13  libgz-transport13-core-dev libgz-transport13-dev libgz-transport13-log libgz-transport13-log-dev libgz-transport13-parameters libgz-transport13-parameters-dev  libgz-utils2 libgz-utils2-cli-dev libgz-utils2-dev libhdf4-0-alt libhdf4-alt-dev libhdf5-103-1t64 libhdf5-cpp-103-1t64 libhdf5-dev libhdf5-fortran-102t64  libhdf5-hl-100t64 libhdf5-hl-cpp-100t64 libhdf5-hl-fortran-100t64 libheif-dev libhwy1t64 libigdgmm12 libimath-3-1-29t64 libjack-jackd2-0 libjbig-dev libjpeg-dev  libjpeg-turbo8-dev libjpeg8-dev libjson-c-dev libjsoncpp-dev libjxl0.7 libjxr0t64 libkadm5clnt-mit12 libkadm5srv-mit12 libkdb5-10t64 libkml-dev libkmlbase1t64  libkmlconvenience1t64 libkmldom1t64 libkmlengine1t64 libkmlregionator1t64 libkmlxsd1t64 libkrb5-dev liblapack-dev liblapack3 liblerc-dev liblilv-0-0 libllvm20  libltdl-dev liblz4-dev libmbedcrypto7t64 libmd-dev libminizip-dev libmount-dev libmysofa1 libmysqlclient-dev libmysqlclient21 libnetcdf-dev libnetcdf19t64  libnorm-dev libnorm1t64 liboctomap1.9t64 libodbc2 libodbccr2 libodbcinst2 libode8t64 libogdi-dev libogdi4.1 libogre-1.9-dev libogre-1.9.0t64  libogre-next-2.3-dev libogre-next-2.3.0 libopenal-data libopenal1 libopenexr-3-1-30 libopengl-dev libopenjp2-7-dev libopenmpt0t64 libpcre2-dev libpcre2-posix3  libpgm-5.3-0t64 libpgm-dev libplacebo338 libpng-dev libpng-tools libpocketsphinx3 libpoppler-dev libpoppler-private-dev libpostproc-dev libpostproc57 libpq-dev  libpq5 libproj-dev libproj25 libprotobuf-dev libprotobuf-lite32t64 libprotoc-dev libprotoc32t64 libpthread-stubs0-dev libpugixml-dev libpugixml1v5 libqhull-dev  libqhull-r8.0 libqhull8.0 libqhullcpp8.0 libqt5charts5 libqt5concurrent5t64 libqt5opengl5-dev libqt5opengl5t64 libqt5qmlworkerscript5 libqt5quickcontrols2-5  libqt5quickparticles5 libqt5quickshapes5 libqt5quicktemplates2-5 libqt5quicktest5 libqt5sql5-sqlite libqt5sql5t64 libqt5test5t64 libqt5xml5t64 librabbitmq4  librav1e0 libraw23t64 librist4 librttopo-dev librttopo1 librubberband2 libruby libruby3.2 libsdformat14 libsdformat14-dev libsdl2-2.0-0 libselinux1-dev  libsepol-dev libserd-0-0 libsharpyuv-dev libshine3 libsndio7.0 libsodium-dev libsord-0-0 libsoxr0 libspatialite-dev libspatialite8t64 libsphinxbase3t64  libsqlite3-dev libsratom-0-0 libsrt1.5-gnutls libssh-gcrypt-4 libsuperlu-dev libsuperlu6 libsvtav1enc1d1 libswresample-dev libswresample4 libswscale-dev  libswscale7 libsz2 libtiff-dev libtiffxx6 libtinyxml2-dev libtirpc-dev libudfread0 libunibreak5 liburiparser-dev liburiparser1 libuv1-dev libva-drm2 libva-x11-2  libva2 libvdpau1 libvidstab1.1 libvpl2 libvulkan-dev libwebp-dev libwebpdecoder3 libwebsockets-dev libwebsockets-evlib-ev libwebsockets-evlib-glib  libwebsockets-evlib-uv libwebsockets19t64 libx11-dev libx264-164 libx265-199 libx265-dev libxau-dev libxcb1-dev libxdmcp-dev libxerces-c-dev libxerces-c3.2t64  libxext-dev libxvidcore4 libyaml-dev libzimg2 libzip-dev libzip4t64 libzix-0-0 libzmq3-dev libzmq5 libzvbi-common libzvbi0t64 libzzip-0-13t64 mesa-va-drivers  mesa-vdpau-drivers mysql-common ocl-icd-libopencl1 pocketsphinx-en-us proj-bin proj-data protobuf-compiler pybind11-dev python3-gz-math7 python3-gz-msgs10  python3-gz-sim8 python3-gz-transport13 python3-numpy python3-packaging python3-protobuf python3-pybind11 python3-sdformat14 qml-module-qt-labs-folderlistmodel  qml-module-qt-labs-platform qml-module-qt-labs-settings qml-module-qtcharts qml-module-qtgraphicaleffects qml-module-qtqml qml-module-qtqml-models2  qml-module-qtquick-controls qml-module-qtquick-controls2 qml-module-qtquick-dialogs qml-module-qtquick-layouts qml-module-qtquick-privatewidgets  qml-module-qtquick-templates2 qml-module-qtquick-window2 qml-module-qtquick2 qt5-qmake qt5-qmake-bin qt5-qmltooling-plugins qtbase5-dev qtbase5-dev-tools  qtchooser qtdeclarative5-dev qtdeclarative5-dev-tools qtquickcontrols2-5-dev rake ruby ruby-net-telnet ruby-rubygems ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2  rubygems-integration sdformat14-sdf unixodbc-common unixodbc-dev uuid-dev va-driver-all vdpau-driver-all x11proto-dev xorg-sgml-doctools xtrans-dev下列软件包将被升级：  libegl-mesa0 libgbm1 libgl1-mesa-dri libglx-mesa0 libxatracker2 mesa-libgallium mesa-vulkan-drivers升级了 7 个软件包，新安装了 470 个软件包，要卸载 0 个软件包，有 40 个软件包未被升级。需要下载 312 MB 的归档。解压缩后会消耗 1,306 MB 的额外空间。您希望继续执行吗？ [Y/n] 获取:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 fonts-lato all 2.015-1 [2,781 kB]获取:2 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-cmake3-dev amd64 3.5.5-1~noble [207 kB]获取:3 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-utils2 amd64 2.2.1-1~noble [19.9 kB]获取:4 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-utils2-dev amd64 2.2.1-1~noble [29.7 kB]获取:5 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5 amd64 5.7.1-1~noble [150 kB]获取:6 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-core-dev amd64 5.7.1-1~noble [121 kB]获取:7 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-av amd64 5.7.1-1~noble [42.6 kB]                                      获取:8 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qtquick-window2 amd64 5.15.13+dfsg-1ubuntu0.1 [26.2 kB]                 获取:9 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libqt5qmlworkerscript5 amd64 5.15.13+dfsg-1ubuntu0.1 [33.6 kB]                     获取:10 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qtquick2 amd64 5.15.13+dfsg-1ubuntu0.1 [33.7 kB]                       获取:11 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-av-dev amd64 5.7.1-1~noble [15.5 kB]                                 获取:12 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtgraphicaleffects amd64 5.15.13-1 [74.4 kB]                                   获取:13 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qtqml amd64 5.15.13+dfsg-1ubuntu0.1 [17.3 kB]                          获取:14 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qtqml-models2 amd64 5.15.13+dfsg-1ubuntu0.1 [18.1 kB]                  获取:15 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-math7 amd64 7.5.1-1~noble [132 kB]                                           获取:16 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qtquick-layouts amd64 5.15.13+dfsg-1ubuntu0.1 [54.6 kB]                获取:17 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtquick-controls amd64 5.15.13-1 [574 kB]                                      获取:18 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libnorm1t64 amd64 1.5.9+dfsg-3.1build1 [154 kB]                                           获取:19 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpgm-5.3-0t64 amd64 5.3.128~dfsg-2.1build1 [167 kB]                                     获取:20 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzmq5 amd64 4.3.5-1build2 [260 kB]                                                      获取:21 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpgm-dev amd64 5.3.128~dfsg-2.1build1 [212 kB]                                          获取:22 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libsodium-dev amd64 1.0.18-1build3 [185 kB]                                                   获取:23 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-math7-dev amd64 7.5.1-1~noble [156 kB]                                       获取:24 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libnorm-dev amd64 1.5.9+dfsg-3.1build1 [429 kB]                                           获取:25 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 comerr-dev amd64 2.1-1.47.0-2.4~exp1ubuntu4.1 [43.8 kB]                               获取:26 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libgssrpc4t64 amd64 1.20.1-6ubuntu2.6 [57.6 kB]                                       获取:27 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libkadm5clnt-mit12 amd64 1.20.1-6ubuntu2.6 [40.1 kB]                                  获取:28 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libkdb5-10t64 amd64 1.20.1-6ubuntu2.6 [40.4 kB]                                       获取:29 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libkadm5srv-mit12 amd64 1.20.1-6ubuntu2.6 [53.0 kB]                                   获取:30 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 krb5-multidev amd64 1.20.1-6ubuntu2.6 [125 kB]                                        获取:31 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libkrb5-dev amd64 1.20.1-6ubuntu2.6 [11.9 kB]                                         获取:32 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libmd-dev amd64 1.1.0-2build1.1 [45.5 kB]                                             获取:33 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libbsd-dev amd64 0.12.1-1build1.1 [169 kB]                                            获取:34 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzmq3-dev amd64 4.3.5-1build2 [527 kB]                                                  获取:35 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 cppzmq-dev amd64 4.10.0-1build1 [26.0 kB]                                                 获取:36 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 mysql-common all 5.8+1.1.0build1 [6,746 B]                                                    获取:37 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libmysqlclient21 amd64 8.0.43-0ubuntu0.24.04.1 [1,254 kB]                             获取:38 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libmysqlclient-dev amd64 8.0.43-0ubuntu0.24.04.1 [1,589 kB]                           获取:39 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 default-libmysqlclient-dev amd64 1.1.0build1 [3,132 B]                                        获取:40 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 gdal-data all 3.8.4+dfsg-3ubuntu3 [261 kB]                                                获取:41 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-events amd64 5.7.1-1~noble [15.5 kB]                                 获取:42 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 gdal-plugins amd64 3.8.4+dfsg-3ubuntu3 [24.8 kB]                                          获取:43 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 uuid-dev amd64 2.39.3-9ubuntu6.3 [33.5 kB]                                            获取:44 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libva2 amd64 2.20.0-2build1 [66.2 kB]                                                     获取:45 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libva-drm2 amd64 2.20.0-2build1 [7,124 B]                                                 获取:46 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libva-x11-2 amd64 2.20.0-2build1 [12.0 kB]                                                获取:47 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libvdpau1 amd64 1.5-2build1 [27.8 kB]                                                         获取:48 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libvpl2 amd64 2023.3.0-1build1 [99.8 kB]                                                  获取:49 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-events-dev amd64 5.7.1-1~noble [15.4 kB]                             获取:50 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 ocl-icd-libopencl1 amd64 2.3.2-1build1 [38.5 kB]                                          获取:51 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavutil58 amd64 7:6.1.1-3ubuntu5 [401 kB]                                               获取:52 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libcodec2-1.2 amd64 1.2.0-2build1 [8,998 kB]                                              获取:53 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-graphics amd64 5.7.1-1~noble [350 kB]                                获取:54 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libdav1d7 amd64 1.4.1-1build1 [604 kB]                                                    获取:55 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgsm1 amd64 1.0.22-1build1 [27.8 kB]                                                    获取:56 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhwy1t64 amd64 1.0.7-8.1build1 [584 kB]                                                 获取:57 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libjxl0.7 amd64 0.7.0-10.2ubuntu6.1 [1,001 kB]                                    获取:58 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 librav1e0 amd64 0.7.1-2 [1,022 kB]                                                        获取:59 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libshine3 amd64 3.1.1-2build1 [23.2 kB]                                                   获取:60 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsvtav1enc1d1 amd64 1.7.0+dfsg-2build1 [2,425 kB]                                       获取:61 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsoxr0 amd64 0.1.3-4build3 [80.0 kB]                                                    获取:62 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libswresample4 amd64 7:6.1.1-3ubuntu5 [63.8 kB]                                           获取:63 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libx264-164 amd64 2:0.164.3108+git31e19f9-1 [604 kB]                                      获取:64 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libx265-199 amd64 3.5-2build1 [1,226 kB]                                                  获取:65 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libxvidcore4 amd64 2:1.3.7-1build1 [219 kB]                                               获取:66 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzvbi-common all 0.2.42-2 [42.4 kB]                                                     获取:67 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzvbi0t64 amd64 0.2.42-2 [261 kB]                                                       获取:68 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavcodec60 amd64 7:6.1.1-3ubuntu5 [5,851 kB]                                            获取:69 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavutil-dev amd64 7:6.1.1-3ubuntu5 [547 kB]                                             获取:70 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libswresample-dev amd64 7:6.1.1-3ubuntu5 [79.7 kB]                                        获取:71 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavcodec-dev amd64 7:6.1.1-3ubuntu5 [6,504 kB]                                          获取:72 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libunibreak5 amd64 5.1-2build1 [25.0 kB]                                                  获取:73 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libass9 amd64 1:0.17.1-2build1 [104 kB]                                                   获取:74 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libudfread0 amd64 1.1.2-1build1 [19.0 kB]                                                 获取:75 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libbluray2 amd64 1:1.3.4-1build1 [159 kB]                                                 获取:76 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libchromaprint1 amd64 1.5.1-5 [30.5 kB]                                                   获取:77 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgme0 amd64 0.6.3-7build1 [134 kB]                                                      获取:78 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libopenmpt0t64 amd64 0.7.3-1.1build3 [647 kB]                                             获取:79 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 librabbitmq4 amd64 0.11.0-1build2 [37.4 kB]                                                   获取:80 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libcjson1 amd64 1.7.17-1 [24.8 kB]                                                        获取:81 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libmbedcrypto7t64 amd64 2.28.8-1 [209 kB]                                                 获取:82 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 librist4 amd64 0.2.10+dfsg-2 [74.9 kB]                                                    获取:83 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsrt1.5-gnutls amd64 1.5.3-1build2 [316 kB]                                             获取:84 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libssh-gcrypt-4 amd64 0.10.6-2ubuntu0.1 [224 kB]                                      获取:85 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavformat60 amd64 7:6.1.1-3ubuntu5 [1,153 kB]                                           获取:86 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libbs2b0 amd64 3.1.0+dfsg-7build1 [10.6 kB]                                               获取:87 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libflite1 amd64 2.2-6build3 [13.6 MB]                                                     获取:88 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libserd-0-0 amd64 0.32.2-1 [43.6 kB]                                                      获取:89 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzix-0-0 amd64 0.4.2-2build1 [23.6 kB]                                                  获取:90 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsord-0-0 amd64 0.16.16-2build1 [15.8 kB]                                               获取:91 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsratom-0-0 amd64 0.6.16-1build1 [17.3 kB]                                              获取:92 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 liblilv-0-0 amd64 0.24.22-1build1 [41.0 kB]                                               获取:93 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libmysofa1 amd64 1.3.2+dfsg-2ubuntu2 [1,158 kB]                                           获取:94 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libplacebo338 amd64 6.338.2-2build1 [2,654 kB]                                            获取:95 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libblas3 amd64 3.12.0-3build1.1 [238 kB]                                              获取:96 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libgfortran5 amd64 14.2.0-4ubuntu2~24.04 [916 kB]                                     获取:97 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 liblapack3 amd64 3.12.0-3build1.1 [2,646 kB]                                          获取:98 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsphinxbase3t64 amd64 0.8+5prealpha+1-17build2 [126 kB]                                 获取:99 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpocketsphinx3 amd64 0.8.0+real5prealpha+1-15ubuntu5 [133 kB]                           获取:100 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpostproc57 amd64 7:6.1.1-3ubuntu5 [49.9 kB]                                           获取:101 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libfftw3-double3 amd64 3.3.10-1ubuntu3 [838 kB]                                              获取:102 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 librubberband2 amd64 3.3.0+dfsg-2build1 [130 kB]                                         获取:103 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libswscale7 amd64 7:6.1.1-3ubuntu5 [193 kB]                                              获取:104 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libvidstab1.1 amd64 1.1.0-2build1 [38.5 kB]                                              获取:105 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzimg2 amd64 3.0.5+ds1-1build1 [254 kB]                                                获取:106 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavfilter9 amd64 7:6.1.1-3ubuntu5 [4,235 kB]                                           获取:107 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libdc1394-25 amd64 2.2.6-4build1 [90.1 kB]                                               获取:108 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjack-jackd2-0 amd64 1.9.21~dfsg-3ubuntu3 [289 kB]                                         获取:109 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libopenal-data all 1:1.23.1-4build1 [161 kB]                                             获取:110 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsndio7.0 amd64 1.9.0-0.3build3 [29.6 kB]                                              获取:111 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libopenal1 amd64 1:1.23.1-4build1 [540 kB]                                               获取:112 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libgl1-mesa-dri amd64 25.0.7-0ubuntu0.24.04.2 [35.8 kB]                              获取:113 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libglx-mesa0 amd64 25.0.7-0ubuntu0.24.04.2 [141 kB]                                  获取:114 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libllvm20 amd64 1:20.1.2-0ubuntu1~24.04.2 [30.6 MB]                                  获取:115 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libegl-mesa0 amd64 25.0.7-0ubuntu0.24.04.2 [124 kB]                                  获取:116 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libgbm1 amd64 25.0.7-0ubuntu0.24.04.2 [32.7 kB]                                      获取:117 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 mesa-libgallium amd64 25.0.7-0ubuntu0.24.04.2 [10.3 MB]                              获取:118 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libsdl2-2.0-0 amd64 2.30.0+dfsg-1ubuntu3.1 [686 kB]                                  获取:119 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavdevice60 amd64 7:6.1.1-3ubuntu5 [82.3 kB]                                           获取:120 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavformat-dev amd64 7:6.1.1-3ubuntu5 [1,398 kB]                                        获取:121 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpostproc-dev amd64 7:6.1.1-3ubuntu5 [50.3 kB]                                         获取:122 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libswscale-dev amd64 7:6.1.1-3ubuntu5 [224 kB]                                           获取:123 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavfilter-dev amd64 7:6.1.1-3ubuntu5 [2,265 kB]                                        获取:124 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libavdevice-dev amd64 7:6.1.1-3ubuntu5 [94.6 kB]                                         获取:125 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libaec0 amd64 1.1.2-1build1 [22.9 kB]                                                    获取:126 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libarpack2t64 amd64 3.9.1-1.1build2 [106 kB]                                             获取:127 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsuperlu6 amd64 6.0.1+dfsg1-1build1 [180 kB]                                           获取:128 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libarmadillo12 amd64 1:12.6.7+dfsg-1build2 [106 kB]                                      获取:129 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libblosc1 amd64 1.21.5+ds-1build1 [36.2 kB]                                              获取:130 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libcfitsio10t64 amd64 4.3.1-1.1build2 [528 kB]                                           获取:131 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfreexl1 amd64 2.0.0-1build2 [41.7 kB]                                                 获取:132 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfyba0t64 amd64 4.1.1-11build1 [119 kB]                                                获取:133 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgeos3.12.1t64 amd64 3.12.1-3build1 [849 kB]                                           获取:134 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgeos-c1t64 amd64 3.12.1-3build1 [94.5 kB]                                             获取:135 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 proj-data all 9.4.0-1build2 [7,885 kB]                                                   获取:136 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libproj25 amd64 9.4.0-1build2 [1,396 kB]                                                 获取:137 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgeotiff5 amd64 1.7.1-5build1 [62.9 kB]                                                获取:138 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf4-0-alt amd64 4.2.16-4build1 [282 kB]                                              获取:139 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsz2 amd64 1.1.2-1build1 [5,476 B]                                                     获取:140 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-103-1t64 amd64 1.10.10+repack-3.1ubuntu4 [1,270 kB]                              获取:141 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 liburiparser1 amd64 0.9.7+dfsg-2build1 [35.8 kB]                                         获取:142 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmlbase1t64 amd64 1.3.0-12build1 [49.9 kB]                                            获取:143 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmldom1t64 amd64 1.3.0-12build1 [156 kB]                                              获取:144 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmlengine1t64 amd64 1.3.0-12build1 [71.4 kB]                                          获取:145 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-hl-100t64 amd64 1.10.10+repack-3.1ubuntu4 [56.0 kB]                              获取:146 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libnetcdf19t64 amd64 1:4.9.2-5ubuntu4 [473 kB]                                           获取:147 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libodbc2 amd64 2.3.12-1ubuntu0.24.04.1 [158 kB]                                      获取:148 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 unixodbc-common all 2.3.12-1ubuntu0.24.04.1 [8,806 B]                                获取:149 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libodbcinst2 amd64 2.3.12-1ubuntu0.24.04.1 [30.7 kB]                                 获取:150 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libogdi4.1 amd64 4.1.1+ds-3build1 [226 kB]                                               获取:151 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpq5 amd64 16.9-0ubuntu0.24.04.1 [143 kB]                                          获取:152 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqhull-r8.0 amd64 2020.2-6build1 [193 kB]                                              获取:153 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 librttopo1 amd64 1.1.0-3build2 [191 kB]                                                  获取:154 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libspatialite8t64 amd64 5.1.0-3build1 [1,919 kB]                                         获取:155 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libxerces-c3.2t64 amd64 3.2.4+debian-1.2ubuntu2 [919 kB]                                 获取:156 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgdal34t64 amd64 3.8.4+dfsg-3ubuntu3 [8,346 kB]                                        获取:157 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libblas-dev amd64 3.12.0-3build1.1 [170 kB]                                          获取:158 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 liblapack-dev amd64 3.12.0-3build1.1 [5,196 kB]                                      获取:159 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libarpack2-dev amd64 3.9.1-1.1build2 [122 kB]                                            获取:160 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-fortran-102t64 amd64 1.10.10+repack-3.1ubuntu4 [85.2 kB]                         获取:161 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-hl-fortran-100t64 amd64 1.10.10+repack-3.1ubuntu4 [31.5 kB]                      获取:162 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-cpp-103-1t64 amd64 1.10.10+repack-3.1ubuntu4 [128 kB]                            获取:163 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-hl-cpp-100t64 amd64 1.10.10+repack-3.1ubuntu4 [11.2 kB]                          获取:164 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjpeg-turbo8-dev amd64 2.1.5-2ubuntu2 [295 kB]                                             获取:165 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjpeg8-dev amd64 8c-2ubuntu11 [1,484 B]                                                    获取:166 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjpeg-dev amd64 8c-2ubuntu11 [1,482 B]                                                     获取:167 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libaec-dev amd64 1.1.2-1build1 [19.8 kB]                                                 获取:168 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libcurl4-openssl-dev amd64 8.5.0-2ubuntu10.6 [446 kB]                                获取:169 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 hdf5-helpers amd64 1.10.10+repack-3.1ubuntu4 [15.8 kB]                                   获取:170 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf5-dev amd64 1.10.10+repack-3.1ubuntu4 [2,777 kB]                                   获取:171 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libsuperlu-dev amd64 6.0.1+dfsg1-1build1 [20.7 kB]                                       获取:172 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libarmadillo-dev amd64 1:12.6.7+dfsg-1build2 [409 kB]                                    获取:173 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libblosc-dev amd64 1.21.5+ds-1build1 [43.7 kB]                                           获取:174 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libcfitsio-dev amd64 4.3.1-1.1build2 [598 kB]                                            获取:175 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libdeflate-dev amd64 1.19-1build1.1 [50.9 kB]                                        获取:176 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libminizip-dev amd64 1:1.3.dfsg-3.1ubuntu2.1 [30.2 kB]                           获取:177 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfreexl-dev amd64 2.0.0-1build2 [43.8 kB]                                              获取:178 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfyba-dev amd64 4.1.1-11build1 [178 kB]                                                获取:179 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgeos-dev amd64 3.12.1-3build1 [54.4 kB]                                               获取:180 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libsqlite3-dev amd64 3.45.1-1ubuntu2.4 [911 kB]                                      获取:181 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjbig-dev amd64 2.1-6.1ubuntu2 [27.9 kB]                                                   获取:182 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libwebpdecoder3 amd64 1.3.2-0.4build3 [114 kB]                                               获取:183 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libsharpyuv-dev amd64 1.3.2-0.4build3 [16.0 kB]                                              获取:184 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libwebp-dev amd64 1.3.2-0.4build3 [367 kB]                                                   获取:185 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libtiffxx6 amd64 4.5.1+git230720-4ubuntu2.3 [5,642 B]                                获取:186 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 liblerc-dev amd64 4.0.0+ds-4ubuntu2 [182 kB]                                                 获取:187 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libtiff-dev amd64 4.5.1+git230720-4ubuntu2.3 [338 kB]                                获取:188 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libproj-dev amd64 9.4.0-1build2 [75.9 kB]                                                获取:189 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgeotiff-dev amd64 1.7.1-5build1 [88.7 kB]                                             获取:190 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libgif-dev amd64 5.2.2-1ubuntu1 [22.7 kB]                                                    获取:191 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libnetcdf-dev amd64 1:4.9.2-5ubuntu4 [58.0 kB]                                           获取:192 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libhdf4-alt-dev amd64 4.2.16-4build1 [387 kB]                                            获取:193 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libaom-dev amd64 3.8.2-2ubuntu0.1 [2,266 kB]                                         获取:194 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libdav1d-dev amd64 1.4.1-1build1 [25.3 kB]                                               获取:195 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libde265-dev amd64 1.0.15-1build3 [12.6 kB]                                                  获取:196 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libx265-dev amd64 3.5-2build1 [1,351 kB]                                                 获取:197 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libheif-dev amd64 1.17.6-1ubuntu4.1 [41.6 kB]                                    获取:198 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjson-c-dev amd64 0.17-1build1 [63.6 kB]                                                   获取:199 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmlconvenience1t64 amd64 1.3.0-12build1 [49.8 kB]                                     获取:200 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmlregionator1t64 amd64 1.3.0-12build1 [21.4 kB]                                      获取:201 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkmlxsd1t64 amd64 1.3.0-12build1 [29.7 kB]                                             获取:202 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 liburiparser-dev amd64 0.9.7+dfsg-2build1 [15.0 kB]                                      获取:203 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost1.83-dev amd64 1.83.0-2.1ubuntu3.1 [10.7 MB]                                 获取:204 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libboost-dev amd64 1.83.0.1ubuntu2 [4,308 B]                                                 获取:205 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libkml-dev amd64 1.3.0-12build1 [659 kB]                                                 获取:206 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libltdl-dev amd64 2.4.7-7build1 [168 kB]                                                     获取:207 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 liblz4-dev amd64 1.9.4-1build1.1 [87.6 kB]                                           获取:208 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libtirpc-dev amd64 1.3.4+ds-1.1build1 [193 kB]                                               获取:209 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libogdi-dev amd64 4.1.1+ds-3build1 [22.8 kB]                                             获取:210 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libopenjp2-7-dev amd64 2.5.0-2ubuntu0.3 [258 kB]                                     获取:211 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpcre2-posix3 amd64 10.42-4ubuntu2.1 [6,748 B]                                     获取:212 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpcre2-dev amd64 10.42-4ubuntu2.1 [736 kB]                                         获取:213 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libpng-dev amd64 1.6.43-5build1 [264 kB]                                                     获取:214 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpoppler-dev amd64 24.02.0-1ubuntu9.6 [5,204 B]                                    获取:215 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpoppler-private-dev amd64 24.02.0-1ubuntu9.6 [197 kB]                             获取:216 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libpq-dev amd64 16.9-0ubuntu0.24.04.1 [151 kB]                                       获取:217 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqhull8.0 amd64 2020.2-6build1 [192 kB]                                                获取:218 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqhullcpp8.0 amd64 2020.2-6build1 [51.7 kB]                                            获取:219 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqhull-dev amd64 2020.2-6build1 [496 kB]                                               获取:220 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 librttopo-dev amd64 1.1.0-3build2 [238 kB]                                               获取:221 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libspatialite-dev amd64 5.1.0-3build1 [2,331 kB]                                         获取:222 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libxerces-c-dev amd64 3.2.4+debian-1.2ubuntu2 [1,815 kB]                                 获取:223 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libodbccr2 amd64 2.3.12-1ubuntu0.24.04.1 [16.1 kB]                                   获取:224 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 unixodbc-dev amd64 2.3.12-1ubuntu0.24.04.1 [250 kB]                                  获取:225 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgdal-dev amd64 3.8.4+dfsg-3ubuntu3 [211 kB]                                           获取:226 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libdraco8 amd64 1.5.6+dfsg-3build1 [833 kB]                                              获取:227 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpugixml1v5 amd64 1.14-0.1build1 [91.9 kB]                                             获取:228 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libassimp5 amd64 5.3.1+ds-2build1 [2,273 kB]                                             获取:229 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libpugixml-dev amd64 1.14-0.1build1 [113 kB]                                             获取:230 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libassimp-dev amd64 5.3.1+ds-2build1 [147 kB]                                            获取:231 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libimath-3-1-29t64 amd64 3.1.9-3.1ubuntu2 [72.2 kB]                                      获取:232 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libjxr0t64 amd64 1.2~git20170615.f752187-5.1ubuntu2 [181 kB]                             获取:233 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libopenexr-3-1-30 amd64 3.1.5-5.1build3 [1,004 kB]                                       获取:234 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libraw23t64 amd64 0.21.2-2.1ubuntu0.24.04.1 [378 kB]                                 获取:235 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfreeimage3 amd64 3.18.0+ds2-10build4 [297 kB]                                         获取:236 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfreeimage-dev amd64 3.18.0+ds2-10build4 [378 kB]                                      获取:237 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libffi-dev amd64 3.4.6-1build1 [62.8 kB]                                                     获取:238 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 python3-packaging all 24.0-1 [41.1 kB]                                                       获取:239 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libglib2.0-dev-bin amd64 2.80.0-6ubuntu3.4 [138 kB]                                  获取:240 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libblkid-dev amd64 2.39.3-9ubuntu6.3 [204 kB]                                        获取:241 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libsepol-dev amd64 3.5-2build1 [384 kB]                                                      获取:242 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libselinux1-dev amd64 3.5-2ubuntu2.1 [164 kB]                                        获取:243 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libmount-dev amd64 2.39.3-9ubuntu6.3 [14.9 kB]                                       获取:244 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libgirepository-2.0-0 amd64 2.80.0-6ubuntu3.4 [73.6 kB]                              获取:245 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libglib2.0-dev amd64 2.80.0-6ubuntu3.4 [1,860 kB]                                    获取:246 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgts-0.7-5t64 amd64 0.7.6+darcs121130-5.2build1 [161 kB]                               获取:247 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgts-dev amd64 0.7.6+darcs121130-5.2build1 [193 kB]                                    获取:248 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libtinyxml2-dev amd64 10.0.0+dfsg-2 [21.5 kB]                                            获取:249 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libprotobuf-lite32t64 amd64 3.21.12-8.2ubuntu0.2 [238 kB]                            获取:250 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libprotobuf-dev amd64 3.21.12-8.2ubuntu0.2 [1,413 kB]                                获取:251 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libprotoc32t64 amd64 3.21.12-8.2ubuntu0.2 [683 kB]                                   获取:252 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libprotoc-dev amd64 3.21.12-8.2ubuntu0.2 [1,055 kB]                                  获取:253 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 protobuf-compiler amd64 3.21.12-8.2ubuntu0.2 [29.0 kB]                           获取:254 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 rubygems-integration all 1.18 [5,336 B]                                                      获取:255 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 rake all 13.0.6-3 [61.6 kB]                                                                  获取:256 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 ruby-net-telnet all 0.2.0-1 [13.3 kB]                                                        获取:257 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 ruby-webrick all 1.8.1-1ubuntu0.2 [53.0 kB]                                          获取:258 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 ruby-xmlrpc all 0.3.2-2 [24.8 kB]                                                            获取:259 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libruby amd64 1:3.2~ubuntu1 [4,694 B]                                                        获取:260 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 ruby-sdbm amd64 1.0.0-5build4 [16.2 kB]                                                      获取:261 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libruby3.2 amd64 3.2.3-1ubuntu0.24.04.6 [5,341 kB]                                   获取:262 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 ruby3.2 amd64 3.2.3-1ubuntu0.24.04.6 [50.7 kB]                                       获取:263 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 ruby-rubygems all 3.4.20-1 [238 kB]                                                          获取:264 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 ruby amd64 1:3.2~ubuntu1 [3,466 B]                                                           获取:265 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzip4t64 amd64 1.7.3-1.1ubuntu2 [53.6 kB]                                              获取:266 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzip-dev amd64 1.7.3-1.1ubuntu2 [156 kB]                                               获取:267 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjsoncpp-dev amd64 1.9.5-6build1 [23.0 kB]                                                 获取:268 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libyaml-dev amd64 0.2.5-1build1 [62.2 kB]                                                    获取:269 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libeigen3-dev all 3.4.0-4build0.1 [1,057 kB]                                     获取:270 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-thread1.83.0 amd64 1.83.0-2.1ubuntu3.1 [276 kB]                             获取:271 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libzzip-0-13t64 amd64 0.13.72+dfsg.1-1.2build1 [28.1 kB]                                 获取:272 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libogre-1.9.0t64 amd64 1.9.0+dfsg1-14.1build2 [2,776 kB]                                 获取:273 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-atomic1.83.0 amd64 1.83.0-2.1ubuntu3.1 [240 kB]                             获取:274 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-atomic1.83-dev amd64 1.83.0-2.1ubuntu3.1 [235 kB]                           获取:275 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-chrono1.83.0t64 amd64 1.83.0-2.1ubuntu3.1 [244 kB]                          获取:276 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-chrono1.83-dev amd64 1.83.0-2.1ubuntu3.1 [246 kB]                           获取:277 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-date-time1.83.0 amd64 1.83.0-2.1ubuntu3.1 [236 kB]                          获取:278 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-serialization1.83.0 amd64 1.83.0-2.1ubuntu3.1 [341 kB]                      获取:279 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-serialization1.83-dev amd64 1.83.0-2.1ubuntu3.1 [387 kB]                    获取:280 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-date-time1.83-dev amd64 1.83.0-2.1ubuntu3.1 [239 kB]                        获取:281 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-system1.83.0 amd64 1.83.0-2.1ubuntu3.1 [236 kB]                             获取:282 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-system1.83-dev amd64 1.83.0-2.1ubuntu3.1 [231 kB]                           获取:283 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libboost-thread1.83-dev amd64 1.83.0-2.1ubuntu3.1 [282 kB]                           获取:284 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libboost-thread-dev amd64 1.83.0.1ubuntu2 [4,088 B]                                          获取:285 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libogre-1.9-dev amd64 1.9.0+dfsg1-14.1build2 [980 kB]                                    获取:286 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qt-labs-folderlistmodel amd64 5.15.13+dfsg-1ubuntu0.1 [35.9 kB]       获取:287 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5quicktemplates2-5 amd64 5.15.13+dfsg-1 [435 kB]                                    获取:288 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-graphics-dev amd64 5.7.1-1~noble [15.8 kB]                          获取:289 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-geospatial amd64 5.7.1-1~noble [26.6 kB]                            获取:290 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qt-labs-platform amd64 5.15.13+dfsg-1 [81.6 kB]                               获取:291 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qml-module-qt-labs-settings amd64 5.15.13+dfsg-1ubuntu0.1 [26.4 kB]              获取:292 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5charts5 amd64 5.15.13-1 [482 kB]                                                   获取:293 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtcharts amd64 5.15.13-1 [137 kB]                                             获取:294 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtquick-templates2 amd64 5.15.13+dfsg-1 [76.5 kB]                             获取:295 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5quickcontrols2-5 amd64 5.15.13+dfsg-1 [66.4 kB]                                    获取:296 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtquick-controls2 amd64 5.15.13+dfsg-1 [933 kB]                               获取:297 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtquick-privatewidgets amd64 5.15.13-1 [48.1 kB]                              获取:298 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qml-module-qtquick-dialogs amd64 5.15.13-1 [132 kB]                                      获取:299 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 xorg-sgml-doctools all 1:1.11-1.1 [10.9 kB]                                                  获取:300 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 x11proto-dev all 2023.2-1 [602 kB]                                                           获取:301 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libxau-dev amd64 1:1.0.9-1build6 [9,570 B]                                                   获取:302 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libxdmcp-dev amd64 1:1.1.3-0ubuntu6 [26.5 kB]                                                获取:303 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 xtrans-dev all 1.4.0-1 [68.9 kB]                                                             获取:304 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libpthread-stubs0-dev amd64 0.4-1build3 [4,746 B]                                            获取:305 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libxcb1-dev amd64 1.15-1ubuntu2 [85.8 kB]                                                    获取:306 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libx11-dev amd64 2:1.8.7-1build1 [732 kB]                                                    获取:307 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-geospatial-dev amd64 5.7.1-1~noble [18.2 kB]                        获取:308 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libglx-dev amd64 1.7.0-1build1 [14.2 kB]                                                     获取:309 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libgl-dev amd64 1.7.0-1build1 [102 kB]                                                       获取:310 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libegl-dev amd64 1.7.0-1build1 [18.2 kB]                                                     获取:311 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libopengl-dev amd64 1.7.0-1build1 [3,454 B]                                                  获取:312 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libglu1-mesa-dev amd64 9.0.2-1.1build1 [237 kB]                                              获取:313 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5concurrent5t64 amd64 5.15.13+dfsg-1ubuntu1 [35.7 kB]                               获取:314 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5sql5t64 amd64 5.15.13+dfsg-1ubuntu1 [122 kB]                                       获取:315 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5test5t64 amd64 5.15.13+dfsg-1ubuntu1 [148 kB]                                      获取:316 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5xml5t64 amd64 5.15.13+dfsg-1ubuntu1 [124 kB]                                       获取:317 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libvulkan-dev amd64 1.3.275.0-1build1 [1,239 kB]                                             获取:318 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libxext-dev amd64 2:1.3.4-1build2 [83.5 kB]                                                  获取:319 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qt5-qmake-bin amd64 5.15.13+dfsg-1ubuntu1 [1,140 kB]                                     获取:320 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-io amd64 5.7.1-1~noble [17.1 kB]                                    获取:321 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qtchooser amd64 66-2build2 [25.9 kB]                                                     获取:322 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qt5-qmake amd64 5.15.13+dfsg-1ubuntu1 [209 kB]                                           获取:323 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-io-dev amd64 5.7.1-1~noble [14.9 kB]                                获取:324 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qtbase5-dev-tools amd64 5.15.13+dfsg-1ubuntu1 [823 kB]                                   获取:325 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qtbase5-dev amd64 5.15.13+dfsg-1ubuntu1 [1,125 kB]                                       获取:326 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libqt5quickparticles5 amd64 5.15.13+dfsg-1ubuntu0.1 [216 kB]                     获取:327 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libqt5quickshapes5 amd64 5.15.13+dfsg-1ubuntu0.1 [102 kB]                        获取:328 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 libqt5quicktest5 amd64 5.15.13+dfsg-1ubuntu0.1 [57.0 kB]                         获取:329 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qt5-qmltooling-plugins amd64 5.15.13+dfsg-1ubuntu0.1 [190 kB]                    获取:330 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qtdeclarative5-dev-tools amd64 5.15.13+dfsg-1ubuntu0.1 [675 kB]                  获取:331 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 qtdeclarative5-dev amd64 5.15.13+dfsg-1ubuntu0.1 [488 kB]                        获取:332 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-profiler amd64 5.7.1-1~noble [32.9 kB]                              获取:333 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 qtquickcontrols2-5-dev amd64 5.15.13+dfsg-1 [11.3 kB]                                    获取:334 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libbullet3.24t64 amd64 3.24+dfsg-2.1build1 [1,802 kB]                                    获取:335 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libbullet-dev amd64 3.24+dfsg-2.1build1 [397 kB]                                         获取:336 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libccd2 amd64 2.1-2 [21.8 kB]                                                            获取:337 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 liboctomap1.9t64 amd64 1.9.7+dfsg-3.1build3 [81.6 kB]                                    获取:338 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libfcl0.7 amd64 0.7.0-3build2 [846 kB]                                                   获取:339 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-profiler-dev amd64 5.7.1-1~noble [48.5 kB]                          获取:340 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libode8t64 amd64 2:0.16.2-1.1build1 [417 kB]                                             获取:341 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libwebsockets19t64 amd64 4.3.3-1.1build3 [229 kB]                                        获取:342 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libev4t64 amd64 1:4.33-2.1build1 [31.0 kB]                                               获取:343 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libwebsockets-evlib-ev amd64 4.3.3-1.1build3 [9,374 B]                                   获取:344 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libwebsockets-evlib-uv amd64 4.3.3-1.1build3 [12.4 kB]                                   获取:345 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libwebsockets-evlib-glib amd64 4.3.3-1.1build3 [9,546 B]                                 获取:346 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libev-dev amd64 1:4.33-2.1build1 [123 kB]                                                获取:347 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libuv1-dev amd64 1.48.0-1.1build1 [136 kB]                                                   获取:348 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libcap-dev amd64 1:2.66-5ubuntu2.2 [595 kB]                                          获取:349 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libwebsockets-dev amd64 4.3.3-1.1build3 [588 kB]                                         获取:350 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 pybind11-dev all 2.11.1-2 [159 kB]                                                       获取:351 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 python3-pybind11 all 2.11.1-2 [167 kB]                                                   获取:352 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 python3-protobuf amd64 3.21.12-8.2ubuntu0.2 [199 kB]                             获取:353 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libigdgmm12 amd64 22.3.17+ds1-1 [145 kB]                                                 获取:354 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 intel-media-va-driver amd64 24.1.0+dfsg1-1ubuntu0.1 [3,163 kB]                   获取:355 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libaacs0 amd64 0.11.1-2build1 [62.9 kB]                                                  获取:356 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libbdplus0 amd64 0.2.0-3build1 [52.2 kB]                                                 获取:357 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libcfitsio-doc all 4.3.1-1.1build2 [2,076 kB]                                            获取:358 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libgts-bin amd64 0.7.6+darcs121130-5.2build1 [44.0 kB]                                   获取:359 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libpng-tools amd64 1.6.43-5build1 [28.5 kB]                                                  获取:360 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5opengl5t64 amd64 5.15.13+dfsg-1ubuntu1 [150 kB]                                    获取:361 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5opengl5-dev amd64 5.15.13+dfsg-1ubuntu1 [42.4 kB]                                  获取:362 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 libqt5sql5-sqlite amd64 5.15.13+dfsg-1ubuntu1 [51.5 kB]                                  获取:363 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libxatracker2 amd64 25.0.7-0ubuntu0.24.04.2 [2,478 kB]                               获取:364 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/universe amd64 mesa-va-drivers amd64 25.0.7-0ubuntu0.24.04.2 [5,934 B]                          获取:365 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 mesa-vdpau-drivers amd64 25.0.7-0ubuntu0.24.04.2 [21.0 kB]                           获取:366 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 mesa-vulkan-drivers amd64 25.0.7-0ubuntu0.24.04.2 [15.3 MB]                          获取:367 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-testing amd64 5.7.1-1~noble [21.0 kB]                               获取:368 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-testing-dev amd64 5.7.1-1~noble [19.2 kB]                           获取:369 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-common5-dev amd64 5.7.1-1~noble [12.4 kB]                                   获取:370 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 python3-numpy amd64 1:1.26.4+ds-6ubuntu1 [4,437 kB]                                          获取:371 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-msgs10 amd64 10.3.2-1~noble [719 kB]                                        获取:372 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 i965-va-driver amd64 2.4.1+dfsg1-1build2 [332 kB]                                        获取:373 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 va-driver-all amd64 2.20.0-2build1 [4,844 B]                                             获取:374 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 vdpau-driver-all amd64 1.5-2build1 [4,414 B]                                                 获取:375 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 pocketsphinx-en-us all 0.8.0+real5prealpha+1-15ubuntu5 [27.4 MB]                         获取:376 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/universe amd64 proj-bin amd64 9.4.0-1build2 [164 kB]                                                    获取:377 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-msgs10-dev amd64 10.3.2-1~noble [352 kB]                                    获取:378 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-tools2 amd64 2.0.3-1~noble [23.5 kB]                                           获取:379 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-tools2-dev amd64 2.0.3-1~noble [5,106 B]                                    获取:380 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-fuel-tools9 amd64 9.1.1-1~noble [203 kB]                                    获取:381 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-fuel-tools9-dev amd64 9.1.1-1~noble [27.3 kB]                               获取:382 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-plugin2 amd64 2.0.4-1~noble [49.5 kB]                                       获取:383 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8 amd64 8.2.2-1~noble [142 kB]                                     获取:384 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13 amd64 13.4.1-1~noble [189 kB]                                   获取:385 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-gui8 amd64 8.4.0-1~noble [629 kB]                                           获取:386 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-utils2-cli-dev amd64 2.2.1-1~noble [65.1 kB]                                获取:387 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-plugin2-dev amd64 2.0.4-1~noble [39.9 kB]                                   获取:388 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-math7-eigen3-dev amd64 7.5.1-1~noble [10.0 kB]                              获取:389 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-core-dev amd64 8.2.2-1~noble [213 kB]                            获取:390 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-ogre1 amd64 8.2.2-1~noble [526 kB]                               获取:391 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-ogre1-dev amd64 8.2.2-1~noble [1,355 kB]                         获取:392 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-core-dev amd64 13.4.1-1~noble [78.8 kB]                         获取:393 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-log amd64 13.4.1-1~noble [131 kB]                               获取:394 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-log-dev amd64 13.4.1-1~noble [25.2 kB]                          获取:395 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-parameters amd64 13.4.1-1~noble [51.1 kB]                       获取:396 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-parameters-dev amd64 13.4.1-1~noble [16.5 kB]                   获取:397 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-transport13-dev amd64 13.4.1-1~noble [11.4 kB]                              获取:398 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-gui8-dev amd64 8.4.0-1~noble [34.1 kB]                                      获取:399 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7 amd64 7.5.0-1~noble [62.5 kB]                                      获取:400 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-core-dev amd64 7.5.0-1~noble [1,500 kB]                            获取:401 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 sdformat14-sdf all 14.8.0-1~noble [76.0 kB]                                       获取:402 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libsdformat14 amd64 14.8.0-1~noble [698 kB]                                       获取:403 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libsdformat14-dev amd64 14.8.0-1~noble [77.9 kB]                                  获取:404 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-sdf-dev amd64 7.5.0-1~noble [7,752 B]                              获取:405 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-mesh-dev amd64 7.5.0-1~noble [7,250 B]                             获取:406 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-bullet amd64 7.5.0-1~noble [260 kB]                                获取:407 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-bullet-dev amd64 7.5.0-1~noble [9,464 B]                           获取:408 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-heightmap-dev amd64 7.5.0-1~noble [7,298 B]                        获取:409 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libdart-core+collisions+odelcpsolver6.13 amd64 6.13.2+ds1-1~osrf2~noble [1,469 kB]获取:410 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-dartsim amd64 7.5.0-1~noble [351 kB]                               获取:411 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-dartsim-dev amd64 7.5.0-1~noble [8,506 B]                          获取:412 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-tpelib amd64 7.5.0-1~noble [57.0 kB]                               获取:413 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-tpe amd64 7.5.0-1~noble [103 kB]                                   获取:414 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-tpe-dev amd64 7.5.0-1~noble [8,196 B]                              获取:415 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-tpelib-dev amd64 7.5.0-1~noble [7,528 B]                           获取:416 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-physics7-dev amd64 7.5.0-1~noble [5,016 B]                                  获取:417 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libogre-next-2.3.0 amd64 2.3.1-9osrf~noble [3,245 kB]                             获取:418 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libogre-next-2.3-dev amd64 2.3.1-9osrf~noble [1,553 kB]                           获取:419 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-ogre2 amd64 8.2.2-1~noble [656 kB]                               获取:420 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-ogre2-dev amd64 8.2.2-1~noble [1,354 kB]                         获取:421 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8 amd64 8.2.2-1~noble [64.2 kB]                                      获取:422 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-core-dev amd64 8.2.2-1~noble [17.5 kB]                             获取:423 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-air-pressure amd64 8.2.2-1~noble [12.0 kB]                         获取:424 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-air-pressure-dev amd64 8.2.2-1~noble [8,466 B]                     获取:425 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-air-speed amd64 8.2.2-1~noble [11.9 kB]                            获取:426 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-air-speed-dev amd64 8.2.2-1~noble [8,438 B]                        获取:427 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-altimeter amd64 8.2.2-1~noble [11.8 kB]                            获取:428 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-altimeter-dev amd64 8.2.2-1~noble [8,520 B]                        获取:429 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-rendering amd64 8.2.2-1~noble [19.8 kB]                            获取:430 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-camera amd64 8.2.2-1~noble [37.6 kB]                               获取:431 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-boundingbox-camera amd64 8.2.2-1~noble [31.7 kB]                   获取:432 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-boundingbox-camera-dev amd64 8.2.2-1~noble [8,802 B]               获取:433 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-camera-dev amd64 8.2.2-1~noble [9,532 B]                           获取:434 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-depth-camera amd64 8.2.2-1~noble [31.4 kB]                         获取:435 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-depth-camera-dev amd64 8.2.2-1~noble [9,350 B]                     获取:436 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-dvl amd64 8.2.2-1~noble [121 kB]                                   获取:437 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-dvl-dev amd64 8.2.2-1~noble [10.2 kB]                              获取:438 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-force-torque amd64 8.2.2-1~noble [15.0 kB]                         获取:439 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-force-torque-dev amd64 8.2.2-1~noble [8,682 B]                     获取:440 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-imu amd64 8.2.2-1~noble [21.0 kB]                                  获取:441 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-imu-dev amd64 8.2.2-1~noble [9,168 B]                              获取:442 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-lidar amd64 8.2.2-1~noble [18.0 kB]                                获取:443 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-lidar-dev amd64 8.2.2-1~noble [10.1 kB]                            获取:444 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-gpu-lidar amd64 8.2.2-1~noble [23.3 kB]                            获取:445 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-gpu-lidar-dev amd64 8.2.2-1~noble [9,170 B]                        获取:446 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-logical-camera amd64 8.2.2-1~noble [16.0 kB]                       获取:447 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-logical-camera-dev amd64 8.2.2-1~noble [8,890 B]                   获取:448 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-magnetometer amd64 8.2.2-1~noble [12.8 kB]                         获取:449 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-magnetometer-dev amd64 8.2.2-1~noble [8,516 B]                     获取:450 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-navsat amd64 8.2.2-1~noble [11.4 kB]                               获取:451 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-navsat-dev amd64 8.2.2-1~noble [8,730 B]                           获取:452 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-rendering-dev amd64 8.2.2-1~noble [8,792 B]                        获取:453 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-rgbd-camera amd64 8.2.2-1~noble [27.5 kB]                          获取:454 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-rgbd-camera-dev amd64 8.2.2-1~noble [8,802 B]                      获取:455 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-segmentation-camera amd64 8.2.2-1~noble [27.5 kB]                  获取:456 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-segmentation-camera-dev amd64 8.2.2-1~noble [9,110 B]              获取:457 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-thermal-camera amd64 8.2.2-1~noble [28.0 kB]                       获取:458 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-thermal-camera-dev amd64 8.2.2-1~noble [9,442 B]                   获取:459 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-wide-angle-camera amd64 8.2.2-1~noble [28.0 kB]                    获取:460 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-wide-angle-camera-dev amd64 8.2.2-1~noble [9,164 B]                获取:461 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sensors8-dev amd64 8.2.2-1~noble [5,310 B]                                  获取:462 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-rendering8-dev amd64 8.2.2-1~noble [4,978 B]                                获取:463 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sim8 amd64 8.9.0-1~noble [6,994 kB]                                         获取:464 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sim8-plugins amd64 8.9.0-1~noble [3,751 kB]                                 获取:465 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-sim8-dev amd64 8.9.0-1~noble [136 kB]                                       获取:466 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-launch7 amd64 7.1.1-1~noble [262 kB]                                        获取:467 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 libgz-launch7-dev amd64 7.1.1-1~noble [16.2 kB]                                   获取:468 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-launch7-cli amd64 7.1.1-1~noble [12.1 kB]                                      获取:469 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-plugin2-cli amd64 2.0.4-1~noble [104 kB]                                       获取:470 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-sim8-cli amd64 8.9.0-1~noble [9,266 B]                                         获取:471 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-transport13-cli amd64 13.4.1-1~noble [173 kB]                                  获取:472 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 python3-gz-math7 amd64 7.5.1-1~noble [924 kB]                                     获取:473 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 python3-gz-msgs10 amd64 10.3.2-1~noble [40.5 kB]                                  获取:474 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 python3-gz-transport13 amd64 13.4.1-1~noble [115 kB]                              获取:475 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 python3-sdformat14 amd64 14.8.0-1~noble [574 kB]                                  获取:476 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 python3-gz-sim8 amd64 8.9.0-1~noble [198 kB]                                      获取:477 http://packages.osrfoundation.org/gazebo/ubuntu-stable noble/main amd64 gz-harmonic amd64 1.0.0-1~noble [1,830 B]                                         已下载 312 MB，耗时 13分 4秒 (398 kB/s)                                                                                                                            正在从软件包中解出模板：100%正在选中未选择的软件包 fonts-lato。(正在读取数据库 ... 系统当前共安装有 220437 个文件和目录。)准备解压 .../000-fonts-lato_2.015-1_all.deb  ...正在解压 fonts-lato (2.015-1) ...正在选中未选择的软件包 qml-module-qtquick-window2:amd64。准备解压 .../001-qml-module-qtquick-window2_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qtquick-window2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 libqt5qmlworkerscript5:amd64。准备解压 .../002-libqt5qmlworkerscript5_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 libqt5qmlworkerscript5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qml-module-qtquick2:amd64。准备解压 .../003-qml-module-qtquick2_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qtquick2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qml-module-qtgraphicaleffects:amd64。准备解压 .../004-qml-module-qtgraphicaleffects_5.15.13-1_amd64.deb  ...正在解压 qml-module-qtgraphicaleffects:amd64 (5.15.13-1) ...正在选中未选择的软件包 qml-module-qtqml:amd64。准备解压 .../005-qml-module-qtqml_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qtqml:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qml-module-qtqml-models2:amd64。准备解压 .../006-qml-module-qtqml-models2_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qtqml-models2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qml-module-qtquick-layouts:amd64。准备解压 .../007-qml-module-qtquick-layouts_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qtquick-layouts:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qml-module-qtquick-controls:amd64。准备解压 .../008-qml-module-qtquick-controls_5.15.13-1_amd64.deb  ...正在解压 qml-module-qtquick-controls:amd64 (5.15.13-1) ...正在选中未选择的软件包 libnorm1t64:amd64。准备解压 .../009-libnorm1t64_1.5.9+dfsg-3.1build1_amd64.deb  ...正在解压 libnorm1t64:amd64 (1.5.9+dfsg-3.1build1) ...正在选中未选择的软件包 libpgm-5.3-0t64:amd64。准备解压 .../010-libpgm-5.3-0t64_5.3.128~dfsg-2.1build1_amd64.deb  ...正在解压 libpgm-5.3-0t64:amd64 (5.3.128~dfsg-2.1build1) ...正在选中未选择的软件包 libzmq5:amd64。准备解压 .../011-libzmq5_4.3.5-1build2_amd64.deb  ...正在解压 libzmq5:amd64 (4.3.5-1build2) ...正在选中未选择的软件包 libpgm-dev:amd64。准备解压 .../012-libpgm-dev_5.3.128~dfsg-2.1build1_amd64.deb  ...正在解压 libpgm-dev:amd64 (5.3.128~dfsg-2.1build1) ...正在选中未选择的软件包 libsodium-dev:amd64。准备解压 .../013-libsodium-dev_1.0.18-1build3_amd64.deb  ...正在解压 libsodium-dev:amd64 (1.0.18-1build3) ...正在选中未选择的软件包 libnorm-dev:amd64。准备解压 .../014-libnorm-dev_1.5.9+dfsg-3.1build1_amd64.deb  ...正在解压 libnorm-dev:amd64 (1.5.9+dfsg-3.1build1) ...正在选中未选择的软件包 comerr-dev:amd64。准备解压 .../015-comerr-dev_2.1-1.47.0-2.4~exp1ubuntu4.1_amd64.deb  ...正在解压 comerr-dev:amd64 (2.1-1.47.0-2.4~exp1ubuntu4.1) ...正在选中未选择的软件包 libgssrpc4t64:amd64。准备解压 .../016-libgssrpc4t64_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 libgssrpc4t64:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 libkadm5clnt-mit12:amd64。准备解压 .../017-libkadm5clnt-mit12_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 libkadm5clnt-mit12:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 libkdb5-10t64:amd64。准备解压 .../018-libkdb5-10t64_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 libkdb5-10t64:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 libkadm5srv-mit12:amd64。准备解压 .../019-libkadm5srv-mit12_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 libkadm5srv-mit12:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 krb5-multidev:amd64。准备解压 .../020-krb5-multidev_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 krb5-multidev:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 libkrb5-dev:amd64。准备解压 .../021-libkrb5-dev_1.20.1-6ubuntu2.6_amd64.deb  ...正在解压 libkrb5-dev:amd64 (1.20.1-6ubuntu2.6) ...正在选中未选择的软件包 libmd-dev:amd64。准备解压 .../022-libmd-dev_1.1.0-2build1.1_amd64.deb  ...正在解压 libmd-dev:amd64 (1.1.0-2build1.1) ...正在选中未选择的软件包 libbsd-dev:amd64。准备解压 .../023-libbsd-dev_0.12.1-1build1.1_amd64.deb  ...正在解压 libbsd-dev:amd64 (0.12.1-1build1.1) ...正在选中未选择的软件包 libzmq3-dev:amd64。准备解压 .../024-libzmq3-dev_4.3.5-1build2_amd64.deb  ...正在解压 libzmq3-dev:amd64 (4.3.5-1build2) ...正在选中未选择的软件包 cppzmq-dev:amd64。准备解压 .../025-cppzmq-dev_4.10.0-1build1_amd64.deb  ...正在解压 cppzmq-dev:amd64 (4.10.0-1build1) ...正在选中未选择的软件包 mysql-common。准备解压 .../026-mysql-common_5.8+1.1.0build1_all.deb  ...正在解压 mysql-common (5.8+1.1.0build1) ...正在选中未选择的软件包 libmysqlclient21:amd64。准备解压 .../027-libmysqlclient21_8.0.43-0ubuntu0.24.04.1_amd64.deb  ...正在解压 libmysqlclient21:amd64 (8.0.43-0ubuntu0.24.04.1) ...正在选中未选择的软件包 libmysqlclient-dev。准备解压 .../028-libmysqlclient-dev_8.0.43-0ubuntu0.24.04.1_amd64.deb  ...正在解压 libmysqlclient-dev (8.0.43-0ubuntu0.24.04.1) ...正在选中未选择的软件包 default-libmysqlclient-dev:amd64。准备解压 .../029-default-libmysqlclient-dev_1.1.0build1_amd64.deb  ...正在解压 default-libmysqlclient-dev:amd64 (1.1.0build1) ...正在选中未选择的软件包 gdal-data。准备解压 .../030-gdal-data_3.8.4+dfsg-3ubuntu3_all.deb  ...正在解压 gdal-data (3.8.4+dfsg-3ubuntu3) ...正在选中未选择的软件包 gdal-plugins:amd64。准备解压 .../031-gdal-plugins_3.8.4+dfsg-3ubuntu3_amd64.deb  ...正在解压 gdal-plugins:amd64 (3.8.4+dfsg-3ubuntu3) ...正在选中未选择的软件包 libgz-cmake3-dev:amd64。准备解压 .../032-libgz-cmake3-dev_3.5.5-1~noble_amd64.deb  ...正在解压 libgz-cmake3-dev:amd64 (3.5.5-1~noble) ...正在选中未选择的软件包 libgz-utils2:amd64。准备解压 .../033-libgz-utils2_2.2.1-1~noble_amd64.deb  ...正在解压 libgz-utils2:amd64 (2.2.1-1~noble) ...正在选中未选择的软件包 libgz-utils2-dev:amd64。准备解压 .../034-libgz-utils2-dev_2.2.1-1~noble_amd64.deb  ...正在解压 libgz-utils2-dev:amd64 (2.2.1-1~noble) ...正在选中未选择的软件包 uuid-dev:amd64。准备解压 .../035-uuid-dev_2.39.3-9ubuntu6.3_amd64.deb  ...正在解压 uuid-dev:amd64 (2.39.3-9ubuntu6.3) ...正在选中未选择的软件包 libgz-common5:amd64。准备解压 .../036-libgz-common5_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-core-dev:amd64。准备解压 .../037-libgz-common5-core-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-core-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libva2:amd64。准备解压 .../038-libva2_2.20.0-2build1_amd64.deb  ...正在解压 libva2:amd64 (2.20.0-2build1) ...正在选中未选择的软件包 libva-drm2:amd64。准备解压 .../039-libva-drm2_2.20.0-2build1_amd64.deb  ...正在解压 libva-drm2:amd64 (2.20.0-2build1) ...正在选中未选择的软件包 libva-x11-2:amd64。准备解压 .../040-libva-x11-2_2.20.0-2build1_amd64.deb  ...正在解压 libva-x11-2:amd64 (2.20.0-2build1) ...正在选中未选择的软件包 libvdpau1:amd64。准备解压 .../041-libvdpau1_1.5-2build1_amd64.deb  ...正在解压 libvdpau1:amd64 (1.5-2build1) ...正在选中未选择的软件包 libvpl2。准备解压 .../042-libvpl2_2023.3.0-1build1_amd64.deb  ...正在解压 libvpl2 (2023.3.0-1build1) ...正在选中未选择的软件包 ocl-icd-libopencl1:amd64。准备解压 .../043-ocl-icd-libopencl1_2.3.2-1build1_amd64.deb  ...正在解压 ocl-icd-libopencl1:amd64 (2.3.2-1build1) ...正在选中未选择的软件包 libavutil58:amd64。准备解压 .../044-libavutil58_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavutil58:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libcodec2-1.2:amd64。准备解压 .../045-libcodec2-1.2_1.2.0-2build1_amd64.deb  ...正在解压 libcodec2-1.2:amd64 (1.2.0-2build1) ...正在选中未选择的软件包 libdav1d7:amd64。准备解压 .../046-libdav1d7_1.4.1-1build1_amd64.deb  ...正在解压 libdav1d7:amd64 (1.4.1-1build1) ...正在选中未选择的软件包 libgsm1:amd64。准备解压 .../047-libgsm1_1.0.22-1build1_amd64.deb  ...正在解压 libgsm1:amd64 (1.0.22-1build1) ...正在选中未选择的软件包 libhwy1t64:amd64。准备解压 .../048-libhwy1t64_1.0.7-8.1build1_amd64.deb  ...正在解压 libhwy1t64:amd64 (1.0.7-8.1build1) ...正在选中未选择的软件包 libjxl0.7:amd64。准备解压 .../049-libjxl0.7_0.7.0-10.2ubuntu6.1_amd64.deb  ...正在解压 libjxl0.7:amd64 (0.7.0-10.2ubuntu6.1) ...正在选中未选择的软件包 librav1e0:amd64。准备解压 .../050-librav1e0_0.7.1-2_amd64.deb  ...正在解压 librav1e0:amd64 (0.7.1-2) ...正在选中未选择的软件包 libshine3:amd64。准备解压 .../051-libshine3_3.1.1-2build1_amd64.deb  ...正在解压 libshine3:amd64 (3.1.1-2build1) ...正在选中未选择的软件包 libsvtav1enc1d1:amd64。准备解压 .../052-libsvtav1enc1d1_1.7.0+dfsg-2build1_amd64.deb  ...正在解压 libsvtav1enc1d1:amd64 (1.7.0+dfsg-2build1) ...正在选中未选择的软件包 libsoxr0:amd64。准备解压 .../053-libsoxr0_0.1.3-4build3_amd64.deb  ...正在解压 libsoxr0:amd64 (0.1.3-4build3) ...正在选中未选择的软件包 libswresample4:amd64。准备解压 .../054-libswresample4_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libswresample4:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libx264-164:amd64。准备解压 .../055-libx264-164_2%3a0.164.3108+git31e19f9-1_amd64.deb  ...正在解压 libx264-164:amd64 (2:0.164.3108+git31e19f9-1) ...正在选中未选择的软件包 libx265-199:amd64。准备解压 .../056-libx265-199_3.5-2build1_amd64.deb  ...正在解压 libx265-199:amd64 (3.5-2build1) ...正在选中未选择的软件包 libxvidcore4:amd64。准备解压 .../057-libxvidcore4_2%3a1.3.7-1build1_amd64.deb  ...正在解压 libxvidcore4:amd64 (2:1.3.7-1build1) ...正在选中未选择的软件包 libzvbi-common。准备解压 .../058-libzvbi-common_0.2.42-2_all.deb  ...正在解压 libzvbi-common (0.2.42-2) ...正在选中未选择的软件包 libzvbi0t64:amd64。准备解压 .../059-libzvbi0t64_0.2.42-2_amd64.deb  ...正在解压 libzvbi0t64:amd64 (0.2.42-2) ...正在选中未选择的软件包 libavcodec60:amd64。准备解压 .../060-libavcodec60_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavcodec60:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libavutil-dev:amd64。准备解压 .../061-libavutil-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavutil-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libswresample-dev:amd64。准备解压 .../062-libswresample-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libswresample-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libavcodec-dev:amd64。准备解压 .../063-libavcodec-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavcodec-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libunibreak5:amd64。准备解压 .../064-libunibreak5_5.1-2build1_amd64.deb  ...正在解压 libunibreak5:amd64 (5.1-2build1) ...正在选中未选择的软件包 libass9:amd64。准备解压 .../065-libass9_1%3a0.17.1-2build1_amd64.deb  ...正在解压 libass9:amd64 (1:0.17.1-2build1) ...正在选中未选择的软件包 libudfread0:amd64。准备解压 .../066-libudfread0_1.1.2-1build1_amd64.deb  ...正在解压 libudfread0:amd64 (1.1.2-1build1) ...正在选中未选择的软件包 libbluray2:amd64。准备解压 .../067-libbluray2_1%3a1.3.4-1build1_amd64.deb  ...正在解压 libbluray2:amd64 (1:1.3.4-1build1) ...正在选中未选择的软件包 libchromaprint1:amd64。准备解压 .../068-libchromaprint1_1.5.1-5_amd64.deb  ...正在解压 libchromaprint1:amd64 (1.5.1-5) ...正在选中未选择的软件包 libgme0:amd64。准备解压 .../069-libgme0_0.6.3-7build1_amd64.deb  ...正在解压 libgme0:amd64 (0.6.3-7build1) ...正在选中未选择的软件包 libopenmpt0t64:amd64。准备解压 .../070-libopenmpt0t64_0.7.3-1.1build3_amd64.deb  ...正在解压 libopenmpt0t64:amd64 (0.7.3-1.1build3) ...正在选中未选择的软件包 librabbitmq4:amd64。准备解压 .../071-librabbitmq4_0.11.0-1build2_amd64.deb  ...正在解压 librabbitmq4:amd64 (0.11.0-1build2) ...正在选中未选择的软件包 libcjson1:amd64。准备解压 .../072-libcjson1_1.7.17-1_amd64.deb  ...正在解压 libcjson1:amd64 (1.7.17-1) ...正在选中未选择的软件包 libmbedcrypto7t64:amd64。准备解压 .../073-libmbedcrypto7t64_2.28.8-1_amd64.deb  ...正在解压 libmbedcrypto7t64:amd64 (2.28.8-1) ...正在选中未选择的软件包 librist4:amd64。准备解压 .../074-librist4_0.2.10+dfsg-2_amd64.deb  ...正在解压 librist4:amd64 (0.2.10+dfsg-2) ...正在选中未选择的软件包 libsrt1.5-gnutls:amd64。准备解压 .../075-libsrt1.5-gnutls_1.5.3-1build2_amd64.deb  ...正在解压 libsrt1.5-gnutls:amd64 (1.5.3-1build2) ...正在选中未选择的软件包 libssh-gcrypt-4:amd64。准备解压 .../076-libssh-gcrypt-4_0.10.6-2ubuntu0.1_amd64.deb  ...正在解压 libssh-gcrypt-4:amd64 (0.10.6-2ubuntu0.1) ...正在选中未选择的软件包 libavformat60:amd64。准备解压 .../077-libavformat60_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavformat60:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libbs2b0:amd64。准备解压 .../078-libbs2b0_3.1.0+dfsg-7build1_amd64.deb  ...正在解压 libbs2b0:amd64 (3.1.0+dfsg-7build1) ...正在选中未选择的软件包 libflite1:amd64。准备解压 .../079-libflite1_2.2-6build3_amd64.deb  ...正在解压 libflite1:amd64 (2.2-6build3) ...正在选中未选择的软件包 libserd-0-0:amd64。准备解压 .../080-libserd-0-0_0.32.2-1_amd64.deb  ...正在解压 libserd-0-0:amd64 (0.32.2-1) ...正在选中未选择的软件包 libzix-0-0:amd64。准备解压 .../081-libzix-0-0_0.4.2-2build1_amd64.deb  ...正在解压 libzix-0-0:amd64 (0.4.2-2build1) ...正在选中未选择的软件包 libsord-0-0:amd64。准备解压 .../082-libsord-0-0_0.16.16-2build1_amd64.deb  ...正在解压 libsord-0-0:amd64 (0.16.16-2build1) ...正在选中未选择的软件包 libsratom-0-0:amd64。准备解压 .../083-libsratom-0-0_0.6.16-1build1_amd64.deb  ...正在解压 libsratom-0-0:amd64 (0.6.16-1build1) ...正在选中未选择的软件包 liblilv-0-0:amd64。准备解压 .../084-liblilv-0-0_0.24.22-1build1_amd64.deb  ...正在解压 liblilv-0-0:amd64 (0.24.22-1build1) ...正在选中未选择的软件包 libmysofa1:amd64。准备解压 .../085-libmysofa1_1.3.2+dfsg-2ubuntu2_amd64.deb  ...正在解压 libmysofa1:amd64 (1.3.2+dfsg-2ubuntu2) ...正在选中未选择的软件包 libplacebo338:amd64。准备解压 .../086-libplacebo338_6.338.2-2build1_amd64.deb  ...正在解压 libplacebo338:amd64 (6.338.2-2build1) ...正在选中未选择的软件包 libblas3:amd64。准备解压 .../087-libblas3_3.12.0-3build1.1_amd64.deb  ...正在解压 libblas3:amd64 (3.12.0-3build1.1) ...正在选中未选择的软件包 libgfortran5:amd64。准备解压 .../088-libgfortran5_14.2.0-4ubuntu2~24.04_amd64.deb  ...正在解压 libgfortran5:amd64 (14.2.0-4ubuntu2~24.04) ...正在选中未选择的软件包 liblapack3:amd64。准备解压 .../089-liblapack3_3.12.0-3build1.1_amd64.deb  ...正在解压 liblapack3:amd64 (3.12.0-3build1.1) ...正在选中未选择的软件包 libsphinxbase3t64:amd64。准备解压 .../090-libsphinxbase3t64_0.8+5prealpha+1-17build2_amd64.deb  ...正在解压 libsphinxbase3t64:amd64 (0.8+5prealpha+1-17build2) ...正在选中未选择的软件包 libpocketsphinx3:amd64。准备解压 .../091-libpocketsphinx3_0.8.0+real5prealpha+1-15ubuntu5_amd64.deb  ...正在解压 libpocketsphinx3:amd64 (0.8.0+real5prealpha+1-15ubuntu5) ...正在选中未选择的软件包 libpostproc57:amd64。准备解压 .../092-libpostproc57_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libpostproc57:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libfftw3-double3:amd64。准备解压 .../093-libfftw3-double3_3.3.10-1ubuntu3_amd64.deb  ...正在解压 libfftw3-double3:amd64 (3.3.10-1ubuntu3) ...正在选中未选择的软件包 librubberband2:amd64。准备解压 .../094-librubberband2_3.3.0+dfsg-2build1_amd64.deb  ...正在解压 librubberband2:amd64 (3.3.0+dfsg-2build1) ...正在选中未选择的软件包 libswscale7:amd64。准备解压 .../095-libswscale7_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libswscale7:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libvidstab1.1:amd64。准备解压 .../096-libvidstab1.1_1.1.0-2build1_amd64.deb  ...正在解压 libvidstab1.1:amd64 (1.1.0-2build1) ...正在选中未选择的软件包 libzimg2:amd64。准备解压 .../097-libzimg2_3.0.5+ds1-1build1_amd64.deb  ...正在解压 libzimg2:amd64 (3.0.5+ds1-1build1) ...正在选中未选择的软件包 libavfilter9:amd64。准备解压 .../098-libavfilter9_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavfilter9:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libdc1394-25:amd64。准备解压 .../099-libdc1394-25_2.2.6-4build1_amd64.deb  ...正在解压 libdc1394-25:amd64 (2.2.6-4build1) ...正在选中未选择的软件包 libjack-jackd2-0:amd64。准备解压 .../100-libjack-jackd2-0_1.9.21~dfsg-3ubuntu3_amd64.deb  ...正在解压 libjack-jackd2-0:amd64 (1.9.21~dfsg-3ubuntu3) ...正在选中未选择的软件包 libopenal-data。准备解压 .../101-libopenal-data_1%3a1.23.1-4build1_all.deb  ...正在解压 libopenal-data (1:1.23.1-4build1) ...正在选中未选择的软件包 libsndio7.0:amd64。准备解压 .../102-libsndio7.0_1.9.0-0.3build3_amd64.deb  ...正在解压 libsndio7.0:amd64 (1.9.0-0.3build3) ...正在选中未选择的软件包 libopenal1:amd64。准备解压 .../103-libopenal1_1%3a1.23.1-4build1_amd64.deb  ...正在解压 libopenal1:amd64 (1:1.23.1-4build1) ...准备解压 .../104-libgl1-mesa-dri_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 libgl1-mesa-dri:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...准备解压 .../105-libglx-mesa0_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 libglx-mesa0:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...正在选中未选择的软件包 libllvm20:amd64。准备解压 .../106-libllvm20_1%3a20.1.2-0ubuntu1~24.04.2_amd64.deb  ...正在解压 libllvm20:amd64 (1:20.1.2-0ubuntu1~24.04.2) ...准备解压 .../107-libegl-mesa0_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 libegl-mesa0:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...准备解压 .../108-libgbm1_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 libgbm1:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...准备解压 .../109-mesa-libgallium_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 mesa-libgallium:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...正在选中未选择的软件包 libsdl2-2.0-0:amd64。准备解压 .../110-libsdl2-2.0-0_2.30.0+dfsg-1ubuntu3.1_amd64.deb  ...正在解压 libsdl2-2.0-0:amd64 (2.30.0+dfsg-1ubuntu3.1) ...正在选中未选择的软件包 libavdevice60:amd64。准备解压 .../111-libavdevice60_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavdevice60:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libavformat-dev:amd64。准备解压 .../112-libavformat-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavformat-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libpostproc-dev:amd64。准备解压 .../113-libpostproc-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libpostproc-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libswscale-dev:amd64。准备解压 .../114-libswscale-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libswscale-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libavfilter-dev:amd64。准备解压 .../115-libavfilter-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavfilter-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libavdevice-dev:amd64。准备解压 .../116-libavdevice-dev_7%3a6.1.1-3ubuntu5_amd64.deb  ...正在解压 libavdevice-dev:amd64 (7:6.1.1-3ubuntu5) ...正在选中未选择的软件包 libgz-common5-av:amd64。准备解压 .../117-libgz-common5-av_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-av:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-av-dev:amd64。准备解压 .../118-libgz-common5-av-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-av-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-math7:amd64。准备解压 .../119-libgz-math7_7.5.1-1~noble_amd64.deb  ...正在解压 libgz-math7:amd64 (7.5.1-1~noble) ...正在选中未选择的软件包 libgz-math7-dev:amd64。准备解压 .../120-libgz-math7-dev_7.5.1-1~noble_amd64.deb  ...正在解压 libgz-math7-dev:amd64 (7.5.1-1~noble) ...正在选中未选择的软件包 libgz-common5-events:amd64。准备解压 .../121-libgz-common5-events_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-events:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-events-dev:amd64。准备解压 .../122-libgz-common5-events-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-events-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libaec0:amd64。准备解压 .../123-libaec0_1.1.2-1build1_amd64.deb  ...正在解压 libaec0:amd64 (1.1.2-1build1) ...正在选中未选择的软件包 libarpack2t64:amd64。准备解压 .../124-libarpack2t64_3.9.1-1.1build2_amd64.deb  ...正在解压 libarpack2t64:amd64 (3.9.1-1.1build2) ...正在选中未选择的软件包 libsuperlu6:amd64。准备解压 .../125-libsuperlu6_6.0.1+dfsg1-1build1_amd64.deb  ...正在解压 libsuperlu6:amd64 (6.0.1+dfsg1-1build1) ...正在选中未选择的软件包 libarmadillo12。准备解压 .../126-libarmadillo12_1%3a12.6.7+dfsg-1build2_amd64.deb  ...正在解压 libarmadillo12 (1:12.6.7+dfsg-1build2) ...正在选中未选择的软件包 libblosc1:amd64。准备解压 .../127-libblosc1_1.21.5+ds-1build1_amd64.deb  ...正在解压 libblosc1:amd64 (1.21.5+ds-1build1) ...正在选中未选择的软件包 libcfitsio10t64:amd64。准备解压 .../128-libcfitsio10t64_4.3.1-1.1build2_amd64.deb  ...正在解压 libcfitsio10t64:amd64 (4.3.1-1.1build2) ...正在选中未选择的软件包 libfreexl1:amd64。准备解压 .../129-libfreexl1_2.0.0-1build2_amd64.deb  ...正在解压 libfreexl1:amd64 (2.0.0-1build2) ...正在选中未选择的软件包 libfyba0t64:amd64。准备解压 .../130-libfyba0t64_4.1.1-11build1_amd64.deb  ...正在解压 libfyba0t64:amd64 (4.1.1-11build1) ...正在选中未选择的软件包 libgeos3.12.1t64:amd64。准备解压 .../131-libgeos3.12.1t64_3.12.1-3build1_amd64.deb  ...正在解压 libgeos3.12.1t64:amd64 (3.12.1-3build1) ...正在选中未选择的软件包 libgeos-c1t64:amd64。准备解压 .../132-libgeos-c1t64_3.12.1-3build1_amd64.deb  ...正在解压 libgeos-c1t64:amd64 (3.12.1-3build1) ...正在选中未选择的软件包 proj-data。准备解压 .../133-proj-data_9.4.0-1build2_all.deb  ...正在解压 proj-data (9.4.0-1build2) ...正在选中未选择的软件包 libproj25:amd64。准备解压 .../134-libproj25_9.4.0-1build2_amd64.deb  ...正在解压 libproj25:amd64 (9.4.0-1build2) ...正在选中未选择的软件包 libgeotiff5:amd64。准备解压 .../135-libgeotiff5_1.7.1-5build1_amd64.deb  ...正在解压 libgeotiff5:amd64 (1.7.1-5build1) ...正在选中未选择的软件包 libhdf4-0-alt:amd64。准备解压 .../136-libhdf4-0-alt_4.2.16-4build1_amd64.deb  ...正在解压 libhdf4-0-alt:amd64 (4.2.16-4build1) ...正在选中未选择的软件包 libsz2:amd64。准备解压 .../137-libsz2_1.1.2-1build1_amd64.deb  ...正在解压 libsz2:amd64 (1.1.2-1build1) ...正在选中未选择的软件包 libhdf5-103-1t64:amd64。准备解压 .../138-libhdf5-103-1t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-103-1t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 liburiparser1:amd64。准备解压 .../139-liburiparser1_0.9.7+dfsg-2build1_amd64.deb  ...正在解压 liburiparser1:amd64 (0.9.7+dfsg-2build1) ...正在选中未选择的软件包 libkmlbase1t64:amd64。准备解压 .../140-libkmlbase1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmlbase1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libkmldom1t64:amd64。准备解压 .../141-libkmldom1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmldom1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libkmlengine1t64:amd64。准备解压 .../142-libkmlengine1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmlengine1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libhdf5-hl-100t64:amd64。准备解压 .../143-libhdf5-hl-100t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-hl-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libnetcdf19t64:amd64。准备解压 .../144-libnetcdf19t64_1%3a4.9.2-5ubuntu4_amd64.deb  ...正在解压 libnetcdf19t64:amd64 (1:4.9.2-5ubuntu4) ...正在选中未选择的软件包 libodbc2:amd64。准备解压 .../145-libodbc2_2.3.12-1ubuntu0.24.04.1_amd64.deb  ...正在解压 libodbc2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在选中未选择的软件包 unixodbc-common。准备解压 .../146-unixodbc-common_2.3.12-1ubuntu0.24.04.1_all.deb  ...正在解压 unixodbc-common (2.3.12-1ubuntu0.24.04.1) ...正在选中未选择的软件包 libodbcinst2:amd64。准备解压 .../147-libodbcinst2_2.3.12-1ubuntu0.24.04.1_amd64.deb  ...正在解压 libodbcinst2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在选中未选择的软件包 libogdi4.1:amd64。准备解压 .../148-libogdi4.1_4.1.1+ds-3build1_amd64.deb  ...正在解压 libogdi4.1:amd64 (4.1.1+ds-3build1) ...正在选中未选择的软件包 libpq5:amd64。准备解压 .../149-libpq5_16.9-0ubuntu0.24.04.1_amd64.deb  ...正在解压 libpq5:amd64 (16.9-0ubuntu0.24.04.1) ...正在选中未选择的软件包 libqhull-r8.0:amd64。准备解压 .../150-libqhull-r8.0_2020.2-6build1_amd64.deb  ...正在解压 libqhull-r8.0:amd64 (2020.2-6build1) ...正在选中未选择的软件包 librttopo1:amd64。准备解压 .../151-librttopo1_1.1.0-3build2_amd64.deb  ...正在解压 librttopo1:amd64 (1.1.0-3build2) ...正在选中未选择的软件包 libspatialite8t64:amd64。准备解压 .../152-libspatialite8t64_5.1.0-3build1_amd64.deb  ...正在解压 libspatialite8t64:amd64 (5.1.0-3build1) ...正在选中未选择的软件包 libxerces-c3.2t64:amd64。准备解压 .../153-libxerces-c3.2t64_3.2.4+debian-1.2ubuntu2_amd64.deb  ...正在解压 libxerces-c3.2t64:amd64 (3.2.4+debian-1.2ubuntu2) ...正在选中未选择的软件包 libgdal34t64:amd64。准备解压 .../154-libgdal34t64_3.8.4+dfsg-3ubuntu3_amd64.deb  ...正在解压 libgdal34t64:amd64 (3.8.4+dfsg-3ubuntu3) ...正在选中未选择的软件包 libblas-dev:amd64。准备解压 .../155-libblas-dev_3.12.0-3build1.1_amd64.deb  ...正在解压 libblas-dev:amd64 (3.12.0-3build1.1) ...正在选中未选择的软件包 liblapack-dev:amd64。准备解压 .../156-liblapack-dev_3.12.0-3build1.1_amd64.deb  ...正在解压 liblapack-dev:amd64 (3.12.0-3build1.1) ...正在选中未选择的软件包 libarpack2-dev:amd64。准备解压 .../157-libarpack2-dev_3.9.1-1.1build2_amd64.deb  ...正在解压 libarpack2-dev:amd64 (3.9.1-1.1build2) ...正在选中未选择的软件包 libhdf5-fortran-102t64:amd64。准备解压 .../158-libhdf5-fortran-102t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-fortran-102t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libhdf5-hl-fortran-100t64:amd64。准备解压 .../159-libhdf5-hl-fortran-100t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-hl-fortran-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libhdf5-cpp-103-1t64:amd64。准备解压 .../160-libhdf5-cpp-103-1t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-cpp-103-1t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libhdf5-hl-cpp-100t64:amd64。准备解压 .../161-libhdf5-hl-cpp-100t64_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-hl-cpp-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libjpeg-turbo8-dev:amd64。准备解压 .../162-libjpeg-turbo8-dev_2.1.5-2ubuntu2_amd64.deb  ...正在解压 libjpeg-turbo8-dev:amd64 (2.1.5-2ubuntu2) ...正在选中未选择的软件包 libjpeg8-dev:amd64。准备解压 .../163-libjpeg8-dev_8c-2ubuntu11_amd64.deb  ...正在解压 libjpeg8-dev:amd64 (8c-2ubuntu11) ...正在选中未选择的软件包 libjpeg-dev:amd64。准备解压 .../164-libjpeg-dev_8c-2ubuntu11_amd64.deb  ...正在解压 libjpeg-dev:amd64 (8c-2ubuntu11) ...正在选中未选择的软件包 libaec-dev:amd64。准备解压 .../165-libaec-dev_1.1.2-1build1_amd64.deb  ...正在解压 libaec-dev:amd64 (1.1.2-1build1) ...正在选中未选择的软件包 libcurl4-openssl-dev:amd64。准备解压 .../166-libcurl4-openssl-dev_8.5.0-2ubuntu10.6_amd64.deb  ...正在解压 libcurl4-openssl-dev:amd64 (8.5.0-2ubuntu10.6) ...正在选中未选择的软件包 hdf5-helpers。准备解压 .../167-hdf5-helpers_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 hdf5-helpers (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libhdf5-dev。准备解压 .../168-libhdf5-dev_1.10.10+repack-3.1ubuntu4_amd64.deb  ...正在解压 libhdf5-dev (1.10.10+repack-3.1ubuntu4) ...正在选中未选择的软件包 libsuperlu-dev:amd64。准备解压 .../169-libsuperlu-dev_6.0.1+dfsg1-1build1_amd64.deb  ...正在解压 libsuperlu-dev:amd64 (6.0.1+dfsg1-1build1) ...正在选中未选择的软件包 libarmadillo-dev。准备解压 .../170-libarmadillo-dev_1%3a12.6.7+dfsg-1build2_amd64.deb  ...正在解压 libarmadillo-dev (1:12.6.7+dfsg-1build2) ...正在选中未选择的软件包 libblosc-dev:amd64。准备解压 .../171-libblosc-dev_1.21.5+ds-1build1_amd64.deb  ...正在解压 libblosc-dev:amd64 (1.21.5+ds-1build1) ...正在选中未选择的软件包 libcfitsio-dev:amd64。准备解压 .../172-libcfitsio-dev_4.3.1-1.1build2_amd64.deb  ...正在解压 libcfitsio-dev:amd64 (4.3.1-1.1build2) ...正在选中未选择的软件包 libdeflate-dev:amd64。准备解压 .../173-libdeflate-dev_1.19-1build1.1_amd64.deb  ...正在解压 libdeflate-dev:amd64 (1.19-1build1.1) ...正在选中未选择的软件包 libminizip-dev:amd64。准备解压 .../174-libminizip-dev_1%3a1.3.dfsg-3.1ubuntu2.1_amd64.deb  ...正在解压 libminizip-dev:amd64 (1:1.3.dfsg-3.1ubuntu2.1) ...正在选中未选择的软件包 libfreexl-dev:amd64。准备解压 .../175-libfreexl-dev_2.0.0-1build2_amd64.deb  ...正在解压 libfreexl-dev:amd64 (2.0.0-1build2) ...正在选中未选择的软件包 libfyba-dev:amd64。准备解压 .../176-libfyba-dev_4.1.1-11build1_amd64.deb  ...正在解压 libfyba-dev:amd64 (4.1.1-11build1) ...正在选中未选择的软件包 libgeos-dev。准备解压 .../177-libgeos-dev_3.12.1-3build1_amd64.deb  ...正在解压 libgeos-dev (3.12.1-3build1) ...正在选中未选择的软件包 libsqlite3-dev:amd64。准备解压 .../178-libsqlite3-dev_3.45.1-1ubuntu2.4_amd64.deb  ...正在解压 libsqlite3-dev:amd64 (3.45.1-1ubuntu2.4) ...正在选中未选择的软件包 libjbig-dev:amd64。准备解压 .../179-libjbig-dev_2.1-6.1ubuntu2_amd64.deb  ...正在解压 libjbig-dev:amd64 (2.1-6.1ubuntu2) ...正在选中未选择的软件包 libwebpdecoder3:amd64。准备解压 .../180-libwebpdecoder3_1.3.2-0.4build3_amd64.deb  ...正在解压 libwebpdecoder3:amd64 (1.3.2-0.4build3) ...正在选中未选择的软件包 libsharpyuv-dev:amd64。准备解压 .../181-libsharpyuv-dev_1.3.2-0.4build3_amd64.deb  ...正在解压 libsharpyuv-dev:amd64 (1.3.2-0.4build3) ...正在选中未选择的软件包 libwebp-dev:amd64。准备解压 .../182-libwebp-dev_1.3.2-0.4build3_amd64.deb  ...正在解压 libwebp-dev:amd64 (1.3.2-0.4build3) ...正在选中未选择的软件包 libtiffxx6:amd64。准备解压 .../183-libtiffxx6_4.5.1+git230720-4ubuntu2.3_amd64.deb  ...正在解压 libtiffxx6:amd64 (4.5.1+git230720-4ubuntu2.3) ...正在选中未选择的软件包 liblerc-dev:amd64。准备解压 .../184-liblerc-dev_4.0.0+ds-4ubuntu2_amd64.deb  ...正在解压 liblerc-dev:amd64 (4.0.0+ds-4ubuntu2) ...正在选中未选择的软件包 libtiff-dev:amd64。准备解压 .../185-libtiff-dev_4.5.1+git230720-4ubuntu2.3_amd64.deb  ...正在解压 libtiff-dev:amd64 (4.5.1+git230720-4ubuntu2.3) ...正在选中未选择的软件包 libproj-dev:amd64。准备解压 .../186-libproj-dev_9.4.0-1build2_amd64.deb  ...正在解压 libproj-dev:amd64 (9.4.0-1build2) ...正在选中未选择的软件包 libgeotiff-dev:amd64。准备解压 .../187-libgeotiff-dev_1.7.1-5build1_amd64.deb  ...正在解压 libgeotiff-dev:amd64 (1.7.1-5build1) ...正在选中未选择的软件包 libgif-dev:amd64。准备解压 .../188-libgif-dev_5.2.2-1ubuntu1_amd64.deb  ...正在解压 libgif-dev:amd64 (5.2.2-1ubuntu1) ...正在选中未选择的软件包 libnetcdf-dev。准备解压 .../189-libnetcdf-dev_1%3a4.9.2-5ubuntu4_amd64.deb  ...正在解压 libnetcdf-dev (1:4.9.2-5ubuntu4) ...正在选中未选择的软件包 libhdf4-alt-dev。准备解压 .../190-libhdf4-alt-dev_4.2.16-4build1_amd64.deb  ...正在解压 libhdf4-alt-dev (4.2.16-4build1) ...正在选中未选择的软件包 libaom-dev:amd64。准备解压 .../191-libaom-dev_3.8.2-2ubuntu0.1_amd64.deb  ...正在解压 libaom-dev:amd64 (3.8.2-2ubuntu0.1) ...正在选中未选择的软件包 libdav1d-dev:amd64。准备解压 .../192-libdav1d-dev_1.4.1-1build1_amd64.deb  ...正在解压 libdav1d-dev:amd64 (1.4.1-1build1) ...正在选中未选择的软件包 libde265-dev:amd64。准备解压 .../193-libde265-dev_1.0.15-1build3_amd64.deb  ...正在解压 libde265-dev:amd64 (1.0.15-1build3) ...正在选中未选择的软件包 libx265-dev:amd64。准备解压 .../194-libx265-dev_3.5-2build1_amd64.deb  ...正在解压 libx265-dev:amd64 (3.5-2build1) ...正在选中未选择的软件包 libheif-dev:amd64。准备解压 .../195-libheif-dev_1.17.6-1ubuntu4.1_amd64.deb  ...正在解压 libheif-dev:amd64 (1.17.6-1ubuntu4.1) ...正在选中未选择的软件包 libjson-c-dev:amd64。准备解压 .../196-libjson-c-dev_0.17-1build1_amd64.deb  ...正在解压 libjson-c-dev:amd64 (0.17-1build1) ...正在选中未选择的软件包 libkmlconvenience1t64:amd64。准备解压 .../197-libkmlconvenience1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmlconvenience1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libkmlregionator1t64:amd64。准备解压 .../198-libkmlregionator1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmlregionator1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libkmlxsd1t64:amd64。准备解压 .../199-libkmlxsd1t64_1.3.0-12build1_amd64.deb  ...正在解压 libkmlxsd1t64:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 liburiparser-dev。准备解压 .../200-liburiparser-dev_0.9.7+dfsg-2build1_amd64.deb  ...正在解压 liburiparser-dev (0.9.7+dfsg-2build1) ...正在选中未选择的软件包 libboost1.83-dev:amd64。准备解压 .../201-libboost1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-dev:amd64。准备解压 .../202-libboost-dev_1.83.0.1ubuntu2_amd64.deb  ...正在解压 libboost-dev:amd64 (1.83.0.1ubuntu2) ...正在选中未选择的软件包 libkml-dev:amd64。准备解压 .../203-libkml-dev_1.3.0-12build1_amd64.deb  ...正在解压 libkml-dev:amd64 (1.3.0-12build1) ...正在选中未选择的软件包 libltdl-dev:amd64。准备解压 .../204-libltdl-dev_2.4.7-7build1_amd64.deb  ...正在解压 libltdl-dev:amd64 (2.4.7-7build1) ...正在选中未选择的软件包 liblz4-dev:amd64。准备解压 .../205-liblz4-dev_1.9.4-1build1.1_amd64.deb  ...正在解压 liblz4-dev:amd64 (1.9.4-1build1.1) ...正在选中未选择的软件包 libtirpc-dev:amd64。准备解压 .../206-libtirpc-dev_1.3.4+ds-1.1build1_amd64.deb  ...正在解压 libtirpc-dev:amd64 (1.3.4+ds-1.1build1) ...正在选中未选择的软件包 libogdi-dev。准备解压 .../207-libogdi-dev_4.1.1+ds-3build1_amd64.deb  ...正在解压 libogdi-dev (4.1.1+ds-3build1) ...正在选中未选择的软件包 libopenjp2-7-dev:amd64。准备解压 .../208-libopenjp2-7-dev_2.5.0-2ubuntu0.3_amd64.deb  ...正在解压 libopenjp2-7-dev:amd64 (2.5.0-2ubuntu0.3) ...正在选中未选择的软件包 libpcre2-posix3:amd64。准备解压 .../209-libpcre2-posix3_10.42-4ubuntu2.1_amd64.deb  ...正在解压 libpcre2-posix3:amd64 (10.42-4ubuntu2.1) ...正在选中未选择的软件包 libpcre2-dev:amd64。准备解压 .../210-libpcre2-dev_10.42-4ubuntu2.1_amd64.deb  ...正在解压 libpcre2-dev:amd64 (10.42-4ubuntu2.1) ...正在选中未选择的软件包 libpng-dev:amd64。准备解压 .../211-libpng-dev_1.6.43-5build1_amd64.deb  ...正在解压 libpng-dev:amd64 (1.6.43-5build1) ...正在选中未选择的软件包 libpoppler-dev:amd64。准备解压 .../212-libpoppler-dev_24.02.0-1ubuntu9.6_amd64.deb  ...正在解压 libpoppler-dev:amd64 (24.02.0-1ubuntu9.6) ...正在选中未选择的软件包 libpoppler-private-dev:amd64。准备解压 .../213-libpoppler-private-dev_24.02.0-1ubuntu9.6_amd64.deb  ...正在解压 libpoppler-private-dev:amd64 (24.02.0-1ubuntu9.6) ...正在选中未选择的软件包 libpq-dev。准备解压 .../214-libpq-dev_16.9-0ubuntu0.24.04.1_amd64.deb  ...正在解压 libpq-dev (16.9-0ubuntu0.24.04.1) ...正在选中未选择的软件包 libqhull8.0:amd64。准备解压 .../215-libqhull8.0_2020.2-6build1_amd64.deb  ...正在解压 libqhull8.0:amd64 (2020.2-6build1) ...正在选中未选择的软件包 libqhullcpp8.0:amd64。准备解压 .../216-libqhullcpp8.0_2020.2-6build1_amd64.deb  ...正在解压 libqhullcpp8.0:amd64 (2020.2-6build1) ...正在选中未选择的软件包 libqhull-dev:amd64。准备解压 .../217-libqhull-dev_2020.2-6build1_amd64.deb  ...正在解压 libqhull-dev:amd64 (2020.2-6build1) ...正在选中未选择的软件包 librttopo-dev:amd64。准备解压 .../218-librttopo-dev_1.1.0-3build2_amd64.deb  ...正在解压 librttopo-dev:amd64 (1.1.0-3build2) ...正在选中未选择的软件包 libspatialite-dev:amd64。准备解压 .../219-libspatialite-dev_5.1.0-3build1_amd64.deb  ...正在解压 libspatialite-dev:amd64 (5.1.0-3build1) ...正在选中未选择的软件包 libxerces-c-dev:amd64。准备解压 .../220-libxerces-c-dev_3.2.4+debian-1.2ubuntu2_amd64.deb  ...正在解压 libxerces-c-dev:amd64 (3.2.4+debian-1.2ubuntu2) ...正在选中未选择的软件包 libodbccr2:amd64。准备解压 .../221-libodbccr2_2.3.12-1ubuntu0.24.04.1_amd64.deb  ...正在解压 libodbccr2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在选中未选择的软件包 unixodbc-dev:amd64。准备解压 .../222-unixodbc-dev_2.3.12-1ubuntu0.24.04.1_amd64.deb  ...正在解压 unixodbc-dev:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在选中未选择的软件包 libgdal-dev。准备解压 .../223-libgdal-dev_3.8.4+dfsg-3ubuntu3_amd64.deb  ...正在解压 libgdal-dev (3.8.4+dfsg-3ubuntu3) ...正在选中未选择的软件包 libdraco8:amd64。准备解压 .../224-libdraco8_1.5.6+dfsg-3build1_amd64.deb  ...正在解压 libdraco8:amd64 (1.5.6+dfsg-3build1) ...正在选中未选择的软件包 libpugixml1v5:amd64。准备解压 .../225-libpugixml1v5_1.14-0.1build1_amd64.deb  ...正在解压 libpugixml1v5:amd64 (1.14-0.1build1) ...正在选中未选择的软件包 libassimp5:amd64。准备解压 .../226-libassimp5_5.3.1+ds-2build1_amd64.deb  ...正在解压 libassimp5:amd64 (5.3.1+ds-2build1) ...正在选中未选择的软件包 libpugixml-dev:amd64。准备解压 .../227-libpugixml-dev_1.14-0.1build1_amd64.deb  ...正在解压 libpugixml-dev:amd64 (1.14-0.1build1) ...正在选中未选择的软件包 libassimp-dev:amd64。准备解压 .../228-libassimp-dev_5.3.1+ds-2build1_amd64.deb  ...正在解压 libassimp-dev:amd64 (5.3.1+ds-2build1) ...正在选中未选择的软件包 libimath-3-1-29t64:amd64。准备解压 .../229-libimath-3-1-29t64_3.1.9-3.1ubuntu2_amd64.deb  ...正在解压 libimath-3-1-29t64:amd64 (3.1.9-3.1ubuntu2) ...正在选中未选择的软件包 libjxr0t64:amd64。准备解压 .../230-libjxr0t64_1.2~git20170615.f752187-5.1ubuntu2_amd64.deb  ...正在解压 libjxr0t64:amd64 (1.2~git20170615.f752187-5.1ubuntu2) ...正在选中未选择的软件包 libopenexr-3-1-30:amd64。准备解压 .../231-libopenexr-3-1-30_3.1.5-5.1build3_amd64.deb  ...正在解压 libopenexr-3-1-30:amd64 (3.1.5-5.1build3) ...正在选中未选择的软件包 libraw23t64:amd64。准备解压 .../232-libraw23t64_0.21.2-2.1ubuntu0.24.04.1_amd64.deb  ...正在解压 libraw23t64:amd64 (0.21.2-2.1ubuntu0.24.04.1) ...正在选中未选择的软件包 libfreeimage3:amd64。准备解压 .../233-libfreeimage3_3.18.0+ds2-10build4_amd64.deb  ...正在解压 libfreeimage3:amd64 (3.18.0+ds2-10build4) ...正在选中未选择的软件包 libfreeimage-dev:amd64。准备解压 .../234-libfreeimage-dev_3.18.0+ds2-10build4_amd64.deb  ...正在解压 libfreeimage-dev:amd64 (3.18.0+ds2-10build4) ...正在选中未选择的软件包 libffi-dev:amd64。准备解压 .../235-libffi-dev_3.4.6-1build1_amd64.deb  ...正在解压 libffi-dev:amd64 (3.4.6-1build1) ...正在选中未选择的软件包 python3-packaging。准备解压 .../236-python3-packaging_24.0-1_all.deb  ...正在解压 python3-packaging (24.0-1) ...正在选中未选择的软件包 libglib2.0-dev-bin。准备解压 .../237-libglib2.0-dev-bin_2.80.0-6ubuntu3.4_amd64.deb  ...正在解压 libglib2.0-dev-bin (2.80.0-6ubuntu3.4) ...正在选中未选择的软件包 libblkid-dev:amd64。准备解压 .../238-libblkid-dev_2.39.3-9ubuntu6.3_amd64.deb  ...正在解压 libblkid-dev:amd64 (2.39.3-9ubuntu6.3) ...正在选中未选择的软件包 libsepol-dev:amd64。准备解压 .../239-libsepol-dev_3.5-2build1_amd64.deb  ...正在解压 libsepol-dev:amd64 (3.5-2build1) ...正在选中未选择的软件包 libselinux1-dev:amd64。准备解压 .../240-libselinux1-dev_3.5-2ubuntu2.1_amd64.deb  ...正在解压 libselinux1-dev:amd64 (3.5-2ubuntu2.1) ...正在选中未选择的软件包 libmount-dev:amd64。准备解压 .../241-libmount-dev_2.39.3-9ubuntu6.3_amd64.deb  ...正在解压 libmount-dev:amd64 (2.39.3-9ubuntu6.3) ...正在选中未选择的软件包 libgirepository-2.0-0:amd64。准备解压 .../242-libgirepository-2.0-0_2.80.0-6ubuntu3.4_amd64.deb  ...正在解压 libgirepository-2.0-0:amd64 (2.80.0-6ubuntu3.4) ...正在选中未选择的软件包 libglib2.0-dev:amd64。准备解压 .../243-libglib2.0-dev_2.80.0-6ubuntu3.4_amd64.deb  ...正在解压 libglib2.0-dev:amd64 (2.80.0-6ubuntu3.4) ...正在选中未选择的软件包 libgts-0.7-5t64:amd64。准备解压 .../244-libgts-0.7-5t64_0.7.6+darcs121130-5.2build1_amd64.deb  ...正在解压 libgts-0.7-5t64:amd64 (0.7.6+darcs121130-5.2build1) ...正在选中未选择的软件包 libgts-dev:amd64。准备解压 .../245-libgts-dev_0.7.6+darcs121130-5.2build1_amd64.deb  ...正在解压 libgts-dev:amd64 (0.7.6+darcs121130-5.2build1) ...正在选中未选择的软件包 libtinyxml2-dev:amd64。准备解压 .../246-libtinyxml2-dev_10.0.0+dfsg-2_amd64.deb  ...正在解压 libtinyxml2-dev:amd64 (10.0.0+dfsg-2) ...正在选中未选择的软件包 libgz-common5-graphics:amd64。准备解压 .../247-libgz-common5-graphics_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-graphics:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-graphics-dev:amd64。准备解压 .../248-libgz-common5-graphics-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-graphics-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-geospatial:amd64。准备解压 .../249-libgz-common5-geospatial_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-geospatial:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-geospatial-dev:amd64。准备解压 .../250-libgz-common5-geospatial-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-geospatial-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-io:amd64。准备解压 .../251-libgz-common5-io_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-io:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-io-dev:amd64。准备解压 .../252-libgz-common5-io-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-io-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-profiler:amd64。准备解压 .../253-libgz-common5-profiler_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-profiler:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-profiler-dev:amd64。准备解压 .../254-libgz-common5-profiler-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-profiler-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-testing:amd64。准备解压 .../255-libgz-common5-testing_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-testing:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-testing-dev:amd64。准备解压 .../256-libgz-common5-testing-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-testing-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libgz-common5-dev:amd64。准备解压 .../257-libgz-common5-dev_5.7.1-1~noble_amd64.deb  ...正在解压 libgz-common5-dev:amd64 (5.7.1-1~noble) ...正在选中未选择的软件包 libprotobuf-lite32t64:amd64。准备解压 .../258-libprotobuf-lite32t64_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 libprotobuf-lite32t64:amd64 (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 libprotobuf-dev:amd64。准备解压 .../259-libprotobuf-dev_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 libprotobuf-dev:amd64 (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 libprotoc32t64:amd64。准备解压 .../260-libprotoc32t64_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 libprotoc32t64:amd64 (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 libprotoc-dev:amd64。准备解压 .../261-libprotoc-dev_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 libprotoc-dev:amd64 (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 protobuf-compiler。准备解压 .../262-protobuf-compiler_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 protobuf-compiler (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 libgz-msgs10:amd64。准备解压 .../263-libgz-msgs10_10.3.2-1~noble_amd64.deb  ...正在解压 libgz-msgs10:amd64 (10.3.2-1~noble) ...正在选中未选择的软件包 libgz-msgs10-dev:amd64。准备解压 .../264-libgz-msgs10-dev_10.3.2-1~noble_amd64.deb  ...正在解压 libgz-msgs10-dev:amd64 (10.3.2-1~noble) ...正在选中未选择的软件包 rubygems-integration。准备解压 .../265-rubygems-integration_1.18_all.deb  ...正在解压 rubygems-integration (1.18) ...正在选中未选择的软件包 rake。准备解压 .../266-rake_13.0.6-3_all.deb  ...正在解压 rake (13.0.6-3) ...正在选中未选择的软件包 ruby-net-telnet。准备解压 .../267-ruby-net-telnet_0.2.0-1_all.deb  ...正在解压 ruby-net-telnet (0.2.0-1) ...正在选中未选择的软件包 ruby-webrick。准备解压 .../268-ruby-webrick_1.8.1-1ubuntu0.2_all.deb  ...正在解压 ruby-webrick (1.8.1-1ubuntu0.2) ...正在选中未选择的软件包 ruby-xmlrpc。准备解压 .../269-ruby-xmlrpc_0.3.2-2_all.deb  ...正在解压 ruby-xmlrpc (0.3.2-2) ...正在选中未选择的软件包 libruby:amd64。准备解压 .../270-libruby_1%3a3.2~ubuntu1_amd64.deb  ...正在解压 libruby:amd64 (1:3.2~ubuntu1) ...正在选中未选择的软件包 ruby-sdbm:amd64。准备解压 .../271-ruby-sdbm_1.0.0-5build4_amd64.deb  ...正在解压 ruby-sdbm:amd64 (1.0.0-5build4) ...正在选中未选择的软件包 libruby3.2:amd64。准备解压 .../272-libruby3.2_3.2.3-1ubuntu0.24.04.6_amd64.deb  ...正在解压 libruby3.2:amd64 (3.2.3-1ubuntu0.24.04.6) ...正在选中未选择的软件包 ruby3.2。准备解压 .../273-ruby3.2_3.2.3-1ubuntu0.24.04.6_amd64.deb  ...正在解压 ruby3.2 (3.2.3-1ubuntu0.24.04.6) ...正在选中未选择的软件包 ruby-rubygems。准备解压 .../274-ruby-rubygems_3.4.20-1_all.deb  ...正在解压 ruby-rubygems (3.4.20-1) ...正在选中未选择的软件包 ruby。准备解压 .../275-ruby_1%3a3.2~ubuntu1_amd64.deb  ...正在解压 ruby (1:3.2~ubuntu1) ...正在选中未选择的软件包 gz-tools2:amd64。准备解压 .../276-gz-tools2_2.0.3-1~noble_amd64.deb  ...正在解压 gz-tools2:amd64 (2.0.3-1~noble) ...正在选中未选择的软件包 libgz-tools2-dev:amd64。准备解压 .../277-libgz-tools2-dev_2.0.3-1~noble_amd64.deb  ...正在解压 libgz-tools2-dev:amd64 (2.0.3-1~noble) ...正在选中未选择的软件包 libzip4t64:amd64。准备解压 .../278-libzip4t64_1.7.3-1.1ubuntu2_amd64.deb  ...正在解压 libzip4t64:amd64 (1.7.3-1.1ubuntu2) ...正在选中未选择的软件包 libzip-dev:amd64。准备解压 .../279-libzip-dev_1.7.3-1.1ubuntu2_amd64.deb  ...正在解压 libzip-dev:amd64 (1.7.3-1.1ubuntu2) ...正在选中未选择的软件包 libjsoncpp-dev:amd64。准备解压 .../280-libjsoncpp-dev_1.9.5-6build1_amd64.deb  ...正在解压 libjsoncpp-dev:amd64 (1.9.5-6build1) ...正在选中未选择的软件包 libyaml-dev:amd64。准备解压 .../281-libyaml-dev_0.2.5-1build1_amd64.deb  ...正在解压 libyaml-dev:amd64 (0.2.5-1build1) ...正在选中未选择的软件包 libgz-fuel-tools9:amd64。准备解压 .../282-libgz-fuel-tools9_9.1.1-1~noble_amd64.deb  ...正在解压 libgz-fuel-tools9:amd64 (9.1.1-1~noble) ...正在选中未选择的软件包 libgz-fuel-tools9-dev:amd64。准备解压 .../283-libgz-fuel-tools9-dev_9.1.1-1~noble_amd64.deb  ...正在解压 libgz-fuel-tools9-dev:amd64 (9.1.1-1~noble) ...正在选中未选择的软件包 libgz-plugin2:amd64。准备解压 .../284-libgz-plugin2_2.0.4-1~noble_amd64.deb  ...正在解压 libgz-plugin2:amd64 (2.0.4-1~noble) ...正在选中未选择的软件包 libgz-rendering8:amd64。准备解压 .../285-libgz-rendering8_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-transport13:amd64。准备解压 .../286-libgz-transport13_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-gui8:amd64。准备解压 .../287-libgz-gui8_8.4.0-1~noble_amd64.deb  ...正在解压 libgz-gui8:amd64 (8.4.0-1~noble) ...正在选中未选择的软件包 libgz-utils2-cli-dev:amd64。准备解压 .../288-libgz-utils2-cli-dev_2.2.1-1~noble_amd64.deb  ...正在解压 libgz-utils2-cli-dev:amd64 (2.2.1-1~noble) ...正在选中未选择的软件包 libgz-plugin2-dev:amd64。准备解压 .../289-libgz-plugin2-dev_2.0.4-1~noble_amd64.deb  ...正在解压 libgz-plugin2-dev:amd64 (2.0.4-1~noble) ...正在选中未选择的软件包 libeigen3-dev。准备解压 .../290-libeigen3-dev_3.4.0-4build0.1_all.deb  ...正在解压 libeigen3-dev (3.4.0-4build0.1) ...正在选中未选择的软件包 libgz-math7-eigen3-dev:amd64。准备解压 .../291-libgz-math7-eigen3-dev_7.5.1-1~noble_amd64.deb  ...正在解压 libgz-math7-eigen3-dev:amd64 (7.5.1-1~noble) ...正在选中未选择的软件包 libboost-thread1.83.0:amd64。准备解压 .../292-libboost-thread1.83.0_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-thread1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libzzip-0-13t64:amd64。准备解压 .../293-libzzip-0-13t64_0.13.72+dfsg.1-1.2build1_amd64.deb  ...正在解压 libzzip-0-13t64:amd64 (0.13.72+dfsg.1-1.2build1) ...正在选中未选择的软件包 libogre-1.9.0t64:amd64。准备解压 .../294-libogre-1.9.0t64_1.9.0+dfsg1-14.1build2_amd64.deb  ...正在解压 libogre-1.9.0t64:amd64 (1.9.0+dfsg1-14.1build2) ...正在选中未选择的软件包 libboost-atomic1.83.0:amd64。准备解压 .../295-libboost-atomic1.83.0_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-atomic1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-atomic1.83-dev:amd64。准备解压 .../296-libboost-atomic1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-atomic1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-chrono1.83.0t64:amd64。准备解压 .../297-libboost-chrono1.83.0t64_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-chrono1.83.0t64:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-chrono1.83-dev:amd64。准备解压 .../298-libboost-chrono1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-chrono1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-date-time1.83.0:amd64。准备解压 .../299-libboost-date-time1.83.0_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-date-time1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-serialization1.83.0:amd64。准备解压 .../300-libboost-serialization1.83.0_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-serialization1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-serialization1.83-dev:amd64。准备解压 .../301-libboost-serialization1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-serialization1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-date-time1.83-dev:amd64。准备解压 .../302-libboost-date-time1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-date-time1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-system1.83.0:amd64。准备解压 .../303-libboost-system1.83.0_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-system1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-system1.83-dev:amd64。准备解压 .../304-libboost-system1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-system1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-thread1.83-dev:amd64。准备解压 .../305-libboost-thread1.83-dev_1.83.0-2.1ubuntu3.1_amd64.deb  ...正在解压 libboost-thread1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在选中未选择的软件包 libboost-thread-dev:amd64。准备解压 .../306-libboost-thread-dev_1.83.0.1ubuntu2_amd64.deb  ...正在解压 libboost-thread-dev:amd64 (1.83.0.1ubuntu2) ...正在选中未选择的软件包 libogre-1.9-dev。准备解压 .../307-libogre-1.9-dev_1.9.0+dfsg1-14.1build2_amd64.deb  ...正在解压 libogre-1.9-dev (1.9.0+dfsg1-14.1build2) ...正在选中未选择的软件包 libgz-rendering8-core-dev:amd64。准备解压 .../308-libgz-rendering8-core-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-core-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-rendering8-ogre1:amd64。准备解压 .../309-libgz-rendering8-ogre1_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-ogre1:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-rendering8-ogre1-dev:amd64。准备解压 .../310-libgz-rendering8-ogre1-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-ogre1-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-transport13-core-dev:amd64。准备解压 .../311-libgz-transport13-core-dev_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-core-dev:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-transport13-log:amd64。准备解压 .../312-libgz-transport13-log_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-log:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-transport13-log-dev:amd64。准备解压 .../313-libgz-transport13-log-dev_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-log-dev:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-transport13-parameters:amd64。准备解压 .../314-libgz-transport13-parameters_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-parameters:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-transport13-parameters-dev:amd64。准备解压 .../315-libgz-transport13-parameters-dev_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-parameters-dev:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 libgz-transport13-dev:amd64。准备解压 .../316-libgz-transport13-dev_13.4.1-1~noble_amd64.deb  ...正在解压 libgz-transport13-dev:amd64 (13.4.1-1~noble) ...正在选中未选择的软件包 qml-module-qt-labs-folderlistmodel:amd64。准备解压 .../317-qml-module-qt-labs-folderlistmodel_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qt-labs-folderlistmodel:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 libqt5quicktemplates2-5:amd64。准备解压 .../318-libqt5quicktemplates2-5_5.15.13+dfsg-1_amd64.deb  ...正在解压 libqt5quicktemplates2-5:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 qml-module-qt-labs-platform:amd64。准备解压 .../319-qml-module-qt-labs-platform_5.15.13+dfsg-1_amd64.deb  ...正在解压 qml-module-qt-labs-platform:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 qml-module-qt-labs-settings:amd64。准备解压 .../320-qml-module-qt-labs-settings_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qml-module-qt-labs-settings:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 libqt5charts5:amd64。准备解压 .../321-libqt5charts5_5.15.13-1_amd64.deb  ...正在解压 libqt5charts5:amd64 (5.15.13-1) ...正在选中未选择的软件包 qml-module-qtcharts:amd64。准备解压 .../322-qml-module-qtcharts_5.15.13-1_amd64.deb  ...正在解压 qml-module-qtcharts:amd64 (5.15.13-1) ...正在选中未选择的软件包 qml-module-qtquick-templates2:amd64。准备解压 .../323-qml-module-qtquick-templates2_5.15.13+dfsg-1_amd64.deb  ...正在解压 qml-module-qtquick-templates2:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 libqt5quickcontrols2-5:amd64。准备解压 .../324-libqt5quickcontrols2-5_5.15.13+dfsg-1_amd64.deb  ...正在解压 libqt5quickcontrols2-5:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 qml-module-qtquick-controls2:amd64。准备解压 .../325-qml-module-qtquick-controls2_5.15.13+dfsg-1_amd64.deb  ...正在解压 qml-module-qtquick-controls2:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 qml-module-qtquick-privatewidgets:amd64。准备解压 .../326-qml-module-qtquick-privatewidgets_5.15.13-1_amd64.deb  ...正在解压 qml-module-qtquick-privatewidgets:amd64 (5.15.13-1) ...正在选中未选择的软件包 qml-module-qtquick-dialogs:amd64。准备解压 .../327-qml-module-qtquick-dialogs_5.15.13-1_amd64.deb  ...正在解压 qml-module-qtquick-dialogs:amd64 (5.15.13-1) ...正在选中未选择的软件包 xorg-sgml-doctools。准备解压 .../328-xorg-sgml-doctools_1%3a1.11-1.1_all.deb  ...正在解压 xorg-sgml-doctools (1:1.11-1.1) ...正在选中未选择的软件包 x11proto-dev。准备解压 .../329-x11proto-dev_2023.2-1_all.deb  ...正在解压 x11proto-dev (2023.2-1) ...正在选中未选择的软件包 libxau-dev:amd64。准备解压 .../330-libxau-dev_1%3a1.0.9-1build6_amd64.deb  ...正在解压 libxau-dev:amd64 (1:1.0.9-1build6) ...正在选中未选择的软件包 libxdmcp-dev:amd64。准备解压 .../331-libxdmcp-dev_1%3a1.1.3-0ubuntu6_amd64.deb  ...正在解压 libxdmcp-dev:amd64 (1:1.1.3-0ubuntu6) ...正在选中未选择的软件包 xtrans-dev。准备解压 .../332-xtrans-dev_1.4.0-1_all.deb  ...正在解压 xtrans-dev (1.4.0-1) ...正在选中未选择的软件包 libpthread-stubs0-dev:amd64。准备解压 .../333-libpthread-stubs0-dev_0.4-1build3_amd64.deb  ...正在解压 libpthread-stubs0-dev:amd64 (0.4-1build3) ...正在选中未选择的软件包 libxcb1-dev:amd64。准备解压 .../334-libxcb1-dev_1.15-1ubuntu2_amd64.deb  ...正在解压 libxcb1-dev:amd64 (1.15-1ubuntu2) ...正在选中未选择的软件包 libx11-dev:amd64。准备解压 .../335-libx11-dev_2%3a1.8.7-1build1_amd64.deb  ...正在解压 libx11-dev:amd64 (2:1.8.7-1build1) ...正在选中未选择的软件包 libglx-dev:amd64。准备解压 .../336-libglx-dev_1.7.0-1build1_amd64.deb  ...正在解压 libglx-dev:amd64 (1.7.0-1build1) ...正在选中未选择的软件包 libgl-dev:amd64。准备解压 .../337-libgl-dev_1.7.0-1build1_amd64.deb  ...正在解压 libgl-dev:amd64 (1.7.0-1build1) ...正在选中未选择的软件包 libegl-dev:amd64。准备解压 .../338-libegl-dev_1.7.0-1build1_amd64.deb  ...正在解压 libegl-dev:amd64 (1.7.0-1build1) ...正在选中未选择的软件包 libopengl-dev:amd64。准备解压 .../339-libopengl-dev_1.7.0-1build1_amd64.deb  ...正在解压 libopengl-dev:amd64 (1.7.0-1build1) ...正在选中未选择的软件包 libglu1-mesa-dev:amd64。准备解压 .../340-libglu1-mesa-dev_9.0.2-1.1build1_amd64.deb  ...正在解压 libglu1-mesa-dev:amd64 (9.0.2-1.1build1) ...正在选中未选择的软件包 libqt5concurrent5t64:amd64。准备解压 .../341-libqt5concurrent5t64_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5concurrent5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5sql5t64:amd64。准备解压 .../342-libqt5sql5t64_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5sql5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5test5t64:amd64。准备解压 .../343-libqt5test5t64_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5test5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5xml5t64:amd64。准备解压 .../344-libqt5xml5t64_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5xml5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libvulkan-dev:amd64。准备解压 .../345-libvulkan-dev_1.3.275.0-1build1_amd64.deb  ...正在解压 libvulkan-dev:amd64 (1.3.275.0-1build1) ...正在选中未选择的软件包 libxext-dev:amd64。准备解压 .../346-libxext-dev_2%3a1.3.4-1build2_amd64.deb  ...正在解压 libxext-dev:amd64 (2:1.3.4-1build2) ...正在选中未选择的软件包 qt5-qmake-bin。准备解压 .../347-qt5-qmake-bin_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 qt5-qmake-bin (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 qtchooser。准备解压 .../348-qtchooser_66-2build2_amd64.deb  ...正在解压 qtchooser (66-2build2) ...正在选中未选择的软件包 qt5-qmake:amd64。准备解压 .../349-qt5-qmake_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 qt5-qmake:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 qtbase5-dev-tools。准备解压 .../350-qtbase5-dev-tools_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 qtbase5-dev-tools (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 qtbase5-dev:amd64。准备解压 .../351-qtbase5-dev_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 qtbase5-dev:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5quickparticles5:amd64。准备解压 .../352-libqt5quickparticles5_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 libqt5quickparticles5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 libqt5quickshapes5:amd64。准备解压 .../353-libqt5quickshapes5_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 libqt5quickshapes5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 libqt5quicktest5:amd64。准备解压 .../354-libqt5quicktest5_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 libqt5quicktest5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qt5-qmltooling-plugins:amd64。准备解压 .../355-qt5-qmltooling-plugins_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qt5-qmltooling-plugins:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qtdeclarative5-dev-tools。准备解压 .../356-qtdeclarative5-dev-tools_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qtdeclarative5-dev-tools (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qtdeclarative5-dev:amd64。准备解压 .../357-qtdeclarative5-dev_5.15.13+dfsg-1ubuntu0.1_amd64.deb  ...正在解压 qtdeclarative5-dev:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在选中未选择的软件包 qtquickcontrols2-5-dev:amd64。准备解压 .../358-qtquickcontrols2-5-dev_5.15.13+dfsg-1_amd64.deb  ...正在解压 qtquickcontrols2-5-dev:amd64 (5.15.13+dfsg-1) ...正在选中未选择的软件包 libgz-gui8-dev:amd64。准备解压 .../359-libgz-gui8-dev_8.4.0-1~noble_amd64.deb  ...正在解压 libgz-gui8-dev:amd64 (8.4.0-1~noble) ...正在选中未选择的软件包 libgz-physics7:amd64。准备解压 .../360-libgz-physics7_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-core-dev:amd64。准备解压 .../361-libgz-physics7-core-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-core-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 sdformat14-sdf。准备解压 .../362-sdformat14-sdf_14.8.0-1~noble_all.deb  ...正在解压 sdformat14-sdf (14.8.0-1~noble) ...正在选中未选择的软件包 libsdformat14:amd64。准备解压 .../363-libsdformat14_14.8.0-1~noble_amd64.deb  ...正在解压 libsdformat14:amd64 (14.8.0-1~noble) ...正在选中未选择的软件包 libsdformat14-dev:amd64。准备解压 .../364-libsdformat14-dev_14.8.0-1~noble_amd64.deb  ...正在解压 libsdformat14-dev:amd64 (14.8.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-sdf-dev:amd64。准备解压 .../365-libgz-physics7-sdf-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-sdf-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-mesh-dev:amd64。准备解压 .../366-libgz-physics7-mesh-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-mesh-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libbullet3.24t64:amd64。准备解压 .../367-libbullet3.24t64_3.24+dfsg-2.1build1_amd64.deb  ...正在解压 libbullet3.24t64:amd64 (3.24+dfsg-2.1build1) ...正在选中未选择的软件包 libbullet-dev:amd64。准备解压 .../368-libbullet-dev_3.24+dfsg-2.1build1_amd64.deb  ...正在解压 libbullet-dev:amd64 (3.24+dfsg-2.1build1) ...正在选中未选择的软件包 libgz-physics7-bullet:amd64。准备解压 .../369-libgz-physics7-bullet_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-bullet:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-bullet-dev:amd64。准备解压 .../370-libgz-physics7-bullet-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-bullet-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-heightmap-dev:amd64。准备解压 .../371-libgz-physics7-heightmap-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-heightmap-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libccd2:amd64。准备解压 .../372-libccd2_2.1-2_amd64.deb  ...正在解压 libccd2:amd64 (2.1-2) ...正在选中未选择的软件包 liboctomap1.9t64:amd64。准备解压 .../373-liboctomap1.9t64_1.9.7+dfsg-3.1build3_amd64.deb  ...正在解压 liboctomap1.9t64:amd64 (1.9.7+dfsg-3.1build3) ...正在选中未选择的软件包 libfcl0.7:amd64。准备解压 .../374-libfcl0.7_0.7.0-3build2_amd64.deb  ...正在解压 libfcl0.7:amd64 (0.7.0-3build2) ...正在选中未选择的软件包 libode8t64。准备解压 .../375-libode8t64_2%3a0.16.2-1.1build1_amd64.deb  ...正在解压 libode8t64 (2:0.16.2-1.1build1) ...正在选中未选择的软件包 libdart-core+collisions+odelcpsolver6.13:amd64。准备解压 .../376-libdart-core+collisions+odelcpsolver6.13_6.13.2+ds1-1~osrf2~noble_amd64.deb  ...正在解压 libdart-core+collisions+odelcpsolver6.13:amd64 (6.13.2+ds1-1~osrf2~noble) ...正在选中未选择的软件包 libgz-physics7-dartsim:amd64。准备解压 .../377-libgz-physics7-dartsim_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-dartsim:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-dartsim-dev:amd64。准备解压 .../378-libgz-physics7-dartsim-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-dartsim-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-tpelib:amd64。准备解压 .../379-libgz-physics7-tpelib_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-tpelib:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-tpe:amd64。准备解压 .../380-libgz-physics7-tpe_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-tpe:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-tpe-dev:amd64。准备解压 .../381-libgz-physics7-tpe-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-tpe-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-tpelib-dev:amd64。准备解压 .../382-libgz-physics7-tpelib-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-tpelib-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libgz-physics7-dev:amd64。准备解压 .../383-libgz-physics7-dev_7.5.0-1~noble_amd64.deb  ...正在解压 libgz-physics7-dev:amd64 (7.5.0-1~noble) ...正在选中未选择的软件包 libogre-next-2.3.0:amd64。准备解压 .../384-libogre-next-2.3.0_2.3.1-9osrf~noble_amd64.deb  ...正在解压 libogre-next-2.3.0:amd64 (2.3.1-9osrf~noble) ...正在选中未选择的软件包 libogre-next-2.3-dev。准备解压 .../385-libogre-next-2.3-dev_2.3.1-9osrf~noble_amd64.deb  ...正在解压 libogre-next-2.3-dev (2.3.1-9osrf~noble) ...正在选中未选择的软件包 libgz-rendering8-ogre2:amd64。准备解压 .../386-libgz-rendering8-ogre2_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-ogre2:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-rendering8-ogre2-dev:amd64。准备解压 .../387-libgz-rendering8-ogre2-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-ogre2-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8:amd64。准备解压 .../388-libgz-sensors8_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-core-dev:amd64。准备解压 .../389-libgz-sensors8-core-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-core-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-air-pressure:amd64。准备解压 .../390-libgz-sensors8-air-pressure_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-air-pressure:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-air-pressure-dev:amd64。准备解压 .../391-libgz-sensors8-air-pressure-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-air-pressure-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-air-speed:amd64。准备解压 .../392-libgz-sensors8-air-speed_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-air-speed:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-air-speed-dev:amd64。准备解压 .../393-libgz-sensors8-air-speed-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-air-speed-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-altimeter:amd64。准备解压 .../394-libgz-sensors8-altimeter_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-altimeter:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-altimeter-dev:amd64。准备解压 .../395-libgz-sensors8-altimeter-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-altimeter-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-rendering:amd64。准备解压 .../396-libgz-sensors8-rendering_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-rendering:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-camera:amd64。准备解压 .../397-libgz-sensors8-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-boundingbox-camera:amd64。准备解压 .../398-libgz-sensors8-boundingbox-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-boundingbox-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-boundingbox-camera-dev:amd64。准备解压 .../399-libgz-sensors8-boundingbox-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-boundingbox-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-camera-dev:amd64。准备解压 .../400-libgz-sensors8-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-depth-camera:amd64。准备解压 .../401-libgz-sensors8-depth-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-depth-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-depth-camera-dev:amd64。准备解压 .../402-libgz-sensors8-depth-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-depth-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-dvl:amd64。准备解压 .../403-libgz-sensors8-dvl_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-dvl:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-dvl-dev:amd64。准备解压 .../404-libgz-sensors8-dvl-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-dvl-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-force-torque:amd64。准备解压 .../405-libgz-sensors8-force-torque_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-force-torque:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-force-torque-dev:amd64。准备解压 .../406-libgz-sensors8-force-torque-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-force-torque-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-imu:amd64。准备解压 .../407-libgz-sensors8-imu_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-imu:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-imu-dev:amd64。准备解压 .../408-libgz-sensors8-imu-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-imu-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-lidar:amd64。准备解压 .../409-libgz-sensors8-lidar_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-lidar:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-lidar-dev:amd64。准备解压 .../410-libgz-sensors8-lidar-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-lidar-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-gpu-lidar:amd64。准备解压 .../411-libgz-sensors8-gpu-lidar_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-gpu-lidar:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-gpu-lidar-dev:amd64。准备解压 .../412-libgz-sensors8-gpu-lidar-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-gpu-lidar-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-logical-camera:amd64。准备解压 .../413-libgz-sensors8-logical-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-logical-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-logical-camera-dev:amd64。准备解压 .../414-libgz-sensors8-logical-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-logical-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-magnetometer:amd64。准备解压 .../415-libgz-sensors8-magnetometer_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-magnetometer:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-magnetometer-dev:amd64。准备解压 .../416-libgz-sensors8-magnetometer-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-magnetometer-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-navsat:amd64。准备解压 .../417-libgz-sensors8-navsat_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-navsat:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-navsat-dev:amd64。准备解压 .../418-libgz-sensors8-navsat-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-navsat-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-rendering-dev:amd64。准备解压 .../419-libgz-sensors8-rendering-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-rendering-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-rgbd-camera:amd64。准备解压 .../420-libgz-sensors8-rgbd-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-rgbd-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-rgbd-camera-dev:amd64。准备解压 .../421-libgz-sensors8-rgbd-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-rgbd-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-segmentation-camera:amd64。准备解压 .../422-libgz-sensors8-segmentation-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-segmentation-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-segmentation-camera-dev:amd64。准备解压 .../423-libgz-sensors8-segmentation-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-segmentation-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-thermal-camera:amd64。准备解压 .../424-libgz-sensors8-thermal-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-thermal-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-thermal-camera-dev:amd64。准备解压 .../425-libgz-sensors8-thermal-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-thermal-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-wide-angle-camera:amd64。准备解压 .../426-libgz-sensors8-wide-angle-camera_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-wide-angle-camera:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-wide-angle-camera-dev:amd64。准备解压 .../427-libgz-sensors8-wide-angle-camera-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-wide-angle-camera-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sensors8-dev:amd64。准备解压 .../428-libgz-sensors8-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-sensors8-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-rendering8-dev:amd64。准备解压 .../429-libgz-rendering8-dev_8.2.2-1~noble_amd64.deb  ...正在解压 libgz-rendering8-dev:amd64 (8.2.2-1~noble) ...正在选中未选择的软件包 libgz-sim8:amd64。准备解压 .../430-libgz-sim8_8.9.0-1~noble_amd64.deb  ...正在解压 libgz-sim8:amd64 (8.9.0-1~noble) ...正在选中未选择的软件包 libgz-sim8-plugins:amd64。准备解压 .../431-libgz-sim8-plugins_8.9.0-1~noble_amd64.deb  ...正在解压 libgz-sim8-plugins:amd64 (8.9.0-1~noble) ...正在选中未选择的软件包 libgz-sim8-dev:amd64。准备解压 .../432-libgz-sim8-dev_8.9.0-1~noble_amd64.deb  ...正在解压 libgz-sim8-dev:amd64 (8.9.0-1~noble) ...正在选中未选择的软件包 libwebsockets19t64:amd64。准备解压 .../433-libwebsockets19t64_4.3.3-1.1build3_amd64.deb  ...正在解压 libwebsockets19t64:amd64 (4.3.3-1.1build3) ...正在选中未选择的软件包 libev4t64:amd64。准备解压 .../434-libev4t64_1%3a4.33-2.1build1_amd64.deb  ...正在解压 libev4t64:amd64 (1:4.33-2.1build1) ...正在选中未选择的软件包 libwebsockets-evlib-ev:amd64。准备解压 .../435-libwebsockets-evlib-ev_4.3.3-1.1build3_amd64.deb  ...正在解压 libwebsockets-evlib-ev:amd64 (4.3.3-1.1build3) ...正在选中未选择的软件包 libwebsockets-evlib-uv:amd64。准备解压 .../436-libwebsockets-evlib-uv_4.3.3-1.1build3_amd64.deb  ...正在解压 libwebsockets-evlib-uv:amd64 (4.3.3-1.1build3) ...正在选中未选择的软件包 libwebsockets-evlib-glib:amd64。准备解压 .../437-libwebsockets-evlib-glib_4.3.3-1.1build3_amd64.deb  ...正在解压 libwebsockets-evlib-glib:amd64 (4.3.3-1.1build3) ...正在选中未选择的软件包 libev-dev:amd64。准备解压 .../438-libev-dev_1%3a4.33-2.1build1_amd64.deb  ...正在解压 libev-dev:amd64 (1:4.33-2.1build1) ...正在选中未选择的软件包 libuv1-dev:amd64。准备解压 .../439-libuv1-dev_1.48.0-1.1build1_amd64.deb  ...正在解压 libuv1-dev:amd64 (1.48.0-1.1build1) ...正在选中未选择的软件包 libcap-dev:amd64。准备解压 .../440-libcap-dev_1%3a2.66-5ubuntu2.2_amd64.deb  ...正在解压 libcap-dev:amd64 (1:2.66-5ubuntu2.2) ...正在选中未选择的软件包 libwebsockets-dev:amd64。准备解压 .../441-libwebsockets-dev_4.3.3-1.1build3_amd64.deb  ...正在解压 libwebsockets-dev:amd64 (4.3.3-1.1build3) ...正在选中未选择的软件包 libgz-launch7:amd64。准备解压 .../442-libgz-launch7_7.1.1-1~noble_amd64.deb  ...正在解压 libgz-launch7:amd64 (7.1.1-1~noble) ...正在选中未选择的软件包 libgz-launch7-dev:amd64。准备解压 .../443-libgz-launch7-dev_7.1.1-1~noble_amd64.deb  ...正在解压 libgz-launch7-dev:amd64 (7.1.1-1~noble) ...正在选中未选择的软件包 gz-launch7-cli。准备解压 .../444-gz-launch7-cli_7.1.1-1~noble_amd64.deb  ...正在解压 gz-launch7-cli (7.1.1-1~noble) ...正在选中未选择的软件包 gz-plugin2-cli。准备解压 .../445-gz-plugin2-cli_2.0.4-1~noble_amd64.deb  ...正在解压 gz-plugin2-cli (2.0.4-1~noble) ...正在选中未选择的软件包 gz-sim8-cli。准备解压 .../446-gz-sim8-cli_8.9.0-1~noble_amd64.deb  ...正在解压 gz-sim8-cli (8.9.0-1~noble) ...正在选中未选择的软件包 gz-transport13-cli。准备解压 .../447-gz-transport13-cli_13.4.1-1~noble_amd64.deb  ...正在解压 gz-transport13-cli (13.4.1-1~noble) ...正在选中未选择的软件包 pybind11-dev。准备解压 .../448-pybind11-dev_2.11.1-2_all.deb  ...正在解压 pybind11-dev (2.11.1-2) ...正在选中未选择的软件包 python3-pybind11。准备解压 .../449-python3-pybind11_2.11.1-2_all.deb  ...正在解压 python3-pybind11 (2.11.1-2) ...正在选中未选择的软件包 python3-gz-math7。准备解压 .../450-python3-gz-math7_7.5.1-1~noble_amd64.deb  ...正在解压 python3-gz-math7 (7.5.1-1~noble) ...正在选中未选择的软件包 python3-protobuf。准备解压 .../451-python3-protobuf_3.21.12-8.2ubuntu0.2_amd64.deb  ...正在解压 python3-protobuf (3.21.12-8.2ubuntu0.2) ...正在选中未选择的软件包 python3-gz-msgs10。准备解压 .../452-python3-gz-msgs10_10.3.2-1~noble_amd64.deb  ...正在解压 python3-gz-msgs10 (10.3.2-1~noble) ...正在选中未选择的软件包 python3-gz-transport13。准备解压 .../453-python3-gz-transport13_13.4.1-1~noble_amd64.deb  ...正在解压 python3-gz-transport13 (13.4.1-1~noble) ...正在选中未选择的软件包 python3-sdformat14。准备解压 .../454-python3-sdformat14_14.8.0-1~noble_amd64.deb  ...正在解压 python3-sdformat14 (14.8.0-1~noble) ...正在选中未选择的软件包 python3-gz-sim8。准备解压 .../455-python3-gz-sim8_8.9.0-1~noble_amd64.deb  ...正在解压 python3-gz-sim8 (8.9.0-1~noble) ...正在选中未选择的软件包 gz-harmonic。准备解压 .../456-gz-harmonic_1.0.0-1~noble_amd64.deb  ...正在解压 gz-harmonic (1.0.0-1~noble) ...正在选中未选择的软件包 libigdgmm12:amd64。准备解压 .../457-libigdgmm12_22.3.17+ds1-1_amd64.deb  ...正在解压 libigdgmm12:amd64 (22.3.17+ds1-1) ...正在选中未选择的软件包 intel-media-va-driver:amd64。准备解压 .../458-intel-media-va-driver_24.1.0+dfsg1-1ubuntu0.1_amd64.deb  ...正在解压 intel-media-va-driver:amd64 (24.1.0+dfsg1-1ubuntu0.1) ...正在选中未选择的软件包 libaacs0:amd64。准备解压 .../459-libaacs0_0.11.1-2build1_amd64.deb  ...正在解压 libaacs0:amd64 (0.11.1-2build1) ...正在选中未选择的软件包 libbdplus0:amd64。准备解压 .../460-libbdplus0_0.2.0-3build1_amd64.deb  ...正在解压 libbdplus0:amd64 (0.2.0-3build1) ...正在选中未选择的软件包 libcfitsio-doc。准备解压 .../461-libcfitsio-doc_4.3.1-1.1build2_all.deb  ...正在解压 libcfitsio-doc (4.3.1-1.1build2) ...正在选中未选择的软件包 libgts-bin。准备解压 .../462-libgts-bin_0.7.6+darcs121130-5.2build1_amd64.deb  ...正在解压 libgts-bin (0.7.6+darcs121130-5.2build1) ...正在选中未选择的软件包 libpng-tools。准备解压 .../463-libpng-tools_1.6.43-5build1_amd64.deb  ...正在解压 libpng-tools (1.6.43-5build1) ...正在选中未选择的软件包 libqt5opengl5t64:amd64。准备解压 .../464-libqt5opengl5t64_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5opengl5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5opengl5-dev:amd64。准备解压 .../465-libqt5opengl5-dev_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5opengl5-dev:amd64 (5.15.13+dfsg-1ubuntu1) ...正在选中未选择的软件包 libqt5sql5-sqlite:amd64。准备解压 .../466-libqt5sql5-sqlite_5.15.13+dfsg-1ubuntu1_amd64.deb  ...正在解压 libqt5sql5-sqlite:amd64 (5.15.13+dfsg-1ubuntu1) ...准备解压 .../467-libxatracker2_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 libxatracker2:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...正在选中未选择的软件包 mesa-va-drivers:amd64。准备解压 .../468-mesa-va-drivers_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 mesa-va-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在选中未选择的软件包 mesa-vdpau-drivers:amd64。准备解压 .../469-mesa-vdpau-drivers_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 mesa-vdpau-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) ...准备解压 .../470-mesa-vulkan-drivers_25.0.7-0ubuntu0.24.04.2_amd64.deb  ...正在解压 mesa-vulkan-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) 并覆盖 (25.0.7-0ubuntu0.24.04.1) ...正在选中未选择的软件包 python3-numpy。准备解压 .../471-python3-numpy_1%3a1.26.4+ds-6ubuntu1_amd64.deb  ...正在解压 python3-numpy (1:1.26.4+ds-6ubuntu1) ...正在选中未选择的软件包 i965-va-driver:amd64。准备解压 .../472-i965-va-driver_2.4.1+dfsg1-1build2_amd64.deb  ...正在解压 i965-va-driver:amd64 (2.4.1+dfsg1-1build2) ...正在选中未选择的软件包 va-driver-all:amd64。准备解压 .../473-va-driver-all_2.20.0-2build1_amd64.deb  ...正在解压 va-driver-all:amd64 (2.20.0-2build1) ...正在选中未选择的软件包 vdpau-driver-all:amd64。准备解压 .../474-vdpau-driver-all_1.5-2build1_amd64.deb  ...正在解压 vdpau-driver-all:amd64 (1.5-2build1) ...正在选中未选择的软件包 pocketsphinx-en-us。准备解压 .../475-pocketsphinx-en-us_0.8.0+real5prealpha+1-15ubuntu5_all.deb  ...正在解压 pocketsphinx-en-us (0.8.0+real5prealpha+1-15ubuntu5) ...正在选中未选择的软件包 proj-bin。准备解压 .../476-proj-bin_9.4.0-1build2_amd64.deb  ...正在解压 proj-bin (9.4.0-1build2) ...正在设置 libgme0:amd64 (0.6.3-7build1) ...正在设置 libchromaprint1:amd64 (1.5.1-5) ...正在设置 libssh-gcrypt-4:amd64 (0.10.6-2ubuntu0.1) ...正在设置 libprotobuf-lite32t64:amd64 (3.21.12-8.2ubuntu0.2) ...正在设置 libpoppler-dev:amd64 (24.02.0-1ubuntu9.6) ...正在设置 libhwy1t64:amd64 (1.0.7-8.1build1) ...正在设置 libuv1-dev:amd64 (1.48.0-1.1build1) ...正在设置 libqt5quickshapes5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libudfread0:amd64 (1.1.2-1build1) ...正在设置 libev4t64:amd64 (1:4.33-2.1build1) ...正在设置 libnorm1t64:amd64 (1.5.9+dfsg-3.1build1) ...正在设置 libgz-plugin2:amd64 (2.0.4-1~noble) ...正在设置 libjsoncpp-dev:amd64 (1.9.5-6build1) ...正在设置 mysql-common (5.8+1.1.0build1) ...update-alternatives: 使用 /etc/mysql/my.cnf.fallback 来在自动模式中提供 /etc/mysql/my.cnf (my.cnf)正在设置 librabbitmq4:amd64 (0.11.0-1build2) ...正在设置 libjpeg-turbo8-dev:amd64 (2.1.5-2ubuntu2) ...正在设置 libmysqlclient21:amd64 (8.0.43-0ubuntu0.24.04.1) ...正在设置 libboost1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libvulkan-dev:amd64 (1.3.275.0-1build1) ...正在设置 fonts-lato (2.015-1) ...正在设置 proj-data (9.4.0-1build2) ...正在设置 libshine3:amd64 (3.1.1-2build1) ...正在设置 libvpl2 (2023.3.0-1build1) ...正在设置 hdf5-helpers (1.10.10+repack-3.1ubuntu4) ...正在设置 libx264-164:amd64 (2:0.164.3108+git31e19f9-1) ...正在设置 libboost-date-time1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libmbedcrypto7t64:amd64 (2.28.8-1) ...正在设置 libyaml-dev:amd64 (0.2.5-1build1) ...正在设置 libproj25:amd64 (9.4.0-1build2) ...正在设置 libpng-tools (1.6.43-5build1) ...正在设置 libogdi4.1:amd64 (4.1.1+ds-3build1) ...正在设置 libqhull8.0:amd64 (2020.2-6build1) ...正在设置 libgsm1:amd64 (1.0.22-1build1) ...正在设置 libgirepository-2.0-0:amd64 (2.80.0-6ubuntu3.4) ...正在设置 qml-module-qtqml:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libgeos3.12.1t64:amd64 (3.12.1-3build1) ...正在设置 libsoxr0:amd64 (0.1.3-4build3) ...正在设置 libzix-0-0:amd64 (0.4.2-2build1) ...正在设置 libjson-c-dev:amd64 (0.17-1build1) ...正在设置 libcodec2-1.2:amd64 (1.2.0-2build1) ...正在设置 libgeos-c1t64:amd64 (3.12.1-3build1) ...正在设置 libqt5concurrent5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libpoppler-private-dev:amd64 (24.02.0-1ubuntu9.6) ...正在设置 libboost-system1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libpng-dev:amd64 (1.6.43-5build1) ...正在设置 libmysofa1:amd64 (1.3.2+dfsg-2ubuntu2) ...正在设置 libpq5:amd64 (16.9-0ubuntu0.24.04.1) ...正在设置 libjbig-dev:amd64 (2.1-6.1ubuntu2) ...正在设置 libnorm-dev:amd64 (1.5.9+dfsg-3.1build1) ...正在设置 libgz-common5:amd64 (5.7.1-1~noble) ...正在设置 libwebpdecoder3:amd64 (1.3.2-0.4build3) ...正在设置 libboost-thread1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 proj-bin (9.4.0-1build2) ...正在设置 qml-module-qtquick-window2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libqhull-r8.0:amd64 (2020.2-6build1) ...正在设置 libqt5xml5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libpq-dev (16.9-0ubuntu0.24.04.1) ...正在设置 rubygems-integration (1.18) ...正在设置 libsvtav1enc1d1:amd64 (1.7.0+dfsg-2build1) ...正在设置 libgz-physics7:amd64 (7.5.0-1~noble) ...正在设置 libigdgmm12:amd64 (22.3.17+ds1-1) ...正在设置 libqt5test5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libxerces-c3.2t64:amd64 (3.2.4+debian-1.2ubuntu2) ...正在设置 libcjson1:amd64 (1.7.17-1) ...正在设置 libxvidcore4:amd64 (2:1.3.7-1build1) ...正在设置 libccd2:amd64 (2.1-2) ...正在设置 libffi-dev:amd64 (3.4.6-1build1) ...正在设置 libwebsockets19t64:amd64 (4.3.3-1.1build3) ...正在设置 libpthread-stubs0-dev:amd64 (0.4-1build3) ...正在设置 pybind11-dev (2.11.1-2) ...正在设置 libqt5charts5:amd64 (5.15.13-1) ...正在设置 librav1e0:amd64 (0.7.1-2) ...正在设置 qml-module-qtquick-layouts:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libaec0:amd64 (1.1.2-1build1) ...正在设置 gdal-data (3.8.4+dfsg-3ubuntu3) ...正在设置 libgz-cmake3-dev:amd64 (3.5.5-1~noble) ...正在设置 libpugixml1v5:amd64 (1.14-0.1build1) ...正在设置 libode8t64 (2:0.16.2-1.1build1) ...正在设置 libgeotiff5:amd64 (1.7.1-5build1) ...正在设置 qml-module-qt-labs-folderlistmodel:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libbullet3.24t64:amd64 (3.24+dfsg-2.1build1) ...正在设置 qt5-qmltooling-plugins:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libqt5qmlworkerscript5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libaom-dev:amd64 (3.8.2-2ubuntu0.1) ...正在设置 qml-module-qt-labs-settings:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 librist4:amd64 (0.2.10+dfsg-2) ...正在设置 libprotobuf-dev:amd64 (3.21.12-8.2ubuntu0.2) ...正在设置 libboost-atomic1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libboost-serialization1.83.0:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libminizip-dev:amd64 (1:1.3.dfsg-3.1ubuntu2.1) ...正在设置 libltdl-dev:amd64 (2.4.7-7build1) ...正在设置 libpgm-5.3-0t64:amd64 (5.3.128~dfsg-2.1build1) ...正在设置 xtrans-dev (1.4.0-1) ...正在设置 libblas3:amd64 (3.12.0-3build1.1) ...update-alternatives: 使用 /usr/lib/x86_64-linux-gnu/blas/libblas.so.3 来在自动模式中提供 /usr/lib/x86_64-linux-gnu/libblas.so.3 (libblas.so.3-x86_64-linux-gnu)正在设置 python3-packaging (24.0-1) ...正在设置 libtirpc-dev:amd64 (1.3.4+ds-1.1build1) ...正在设置 libplacebo338:amd64 (6.338.2-2build1) ...正在设置 libcfitsio10t64:amd64 (4.3.1-1.1build2) ...正在设置 libjxr0t64:amd64 (1.2~git20170615.f752187-5.1ubuntu2) ...正在设置 qml-module-qtcharts:amd64 (5.15.13-1) ...正在设置 qt5-qmake-bin (5.15.13+dfsg-1ubuntu1) ...正在设置 libzzip-0-13t64:amd64 (0.13.72+dfsg.1-1.2build1) ...正在设置 libva2:amd64 (2.20.0-2build1) ...正在设置 libgz-math7:amd64 (7.5.1-1~noble) ...正在设置 libsqlite3-dev:amd64 (3.45.1-1ubuntu2.4) ...正在设置 libdraco8:amd64 (1.5.6+dfsg-3build1) ...正在设置 libgz-common5-testing:amd64 (5.7.1-1~noble) ...正在设置 libde265-dev:amd64 (1.0.15-1build3) ...正在设置 libopenjp2-7-dev:amd64 (2.5.0-2ubuntu0.3) ...正在设置 libboost-chrono1.83.0t64:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libcurl4-openssl-dev:amd64 (8.5.0-2ubuntu10.6) ...正在设置 libxerces-c-dev:amd64 (3.2.4+debian-1.2ubuntu2) ...正在设置 libgssrpc4t64:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libpgm-dev:amd64 (5.3.128~dfsg-2.1build1) ...正在设置 libassimp5:amd64 (5.3.1+ds-2build1) ...正在设置 uuid-dev:amd64 (2.39.3-9ubuntu6.3) ...正在设置 libgeos-dev (3.12.1-3build1) ...正在设置 ruby-net-telnet (0.2.0-1) ...正在设置 comerr-dev:amd64 (2.1-1.47.0-2.4~exp1ubuntu4.1) ...正在设置 libdc1394-25:amd64 (2.2.6-4build1) ...正在设置 intel-media-va-driver:amd64 (24.1.0+dfsg1-1ubuntu0.1) ...正在设置 libimath-3-1-29t64:amd64 (3.1.9-3.1ubuntu2) ...正在设置 libeigen3-dev (3.4.0-4build0.1) ...正在设置 libunibreak5:amd64 (5.1-2build1) ...正在设置 libllvm20:amd64 (1:20.1.2-0ubuntu1~24.04.2) ...正在设置 liblz4-dev:amd64 (1.9.4-1build1.1) ...正在设置 unixodbc-common (2.3.12-1ubuntu0.24.04.1) ...正在设置 libqhullcpp8.0:amd64 (2020.2-6build1) ...正在设置 libsepol-dev:amd64 (3.5-2build1) ...正在设置 libsodium-dev:amd64 (1.0.18-1build3) ...正在设置 liblerc-dev:amd64 (4.0.0+ds-4ubuntu2) ...正在设置 libaacs0:amd64 (0.11.1-2build1) ...正在设置 libjxl0.7:amd64 (0.7.0-10.2ubuntu6.1) ...正在设置 pocketsphinx-en-us (0.8.0+real5prealpha+1-15ubuntu5) ...正在设置 libtinyxml2-dev:amd64 (10.0.0+dfsg-2) ...正在设置 libfftw3-double3:amd64 (3.3.10-1ubuntu3) ...正在设置 libqhull-dev:amd64 (2020.2-6build1) ...正在设置 libgfortran5:amd64 (14.2.0-4ubuntu2~24.04) ...正在设置 libraw23t64:amd64 (0.21.2-2.1ubuntu0.24.04.1) ...正在设置 libboost-atomic1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libhdf4-0-alt:amd64 (4.2.16-4build1) ...正在设置 libx265-199:amd64 (3.5-2build1) ...正在设置 librubberband2:amd64 (3.3.0+dfsg-2build1) ...正在设置 ruby-webrick (1.8.1-1ubuntu0.2) ...正在设置 libsndio7.0:amd64 (1.9.0-0.3build3) ...正在设置 libodbc2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在设置 liburiparser1:amd64 (0.9.7+dfsg-2build1) ...正在设置 libbdplus0:amd64 (0.2.0-3build1) ...正在设置 libjack-jackd2-0:amd64 (1.9.21~dfsg-3ubuntu3) ...正在设置 libpcre2-posix3:amd64 (10.42-4ubuntu2.1) ...正在设置 libvidstab1.1:amd64 (1.1.0-2build1) ...正在设置 libfyba0t64:amd64 (4.1.1-11build1) ...正在设置 gz-plugin2-cli (2.0.4-1~noble) ...正在设置 librttopo1:amd64 (1.1.0-3build2) ...正在设置 libsrt1.5-gnutls:amd64 (1.5.3-1build2) ...正在设置 libflite1:amd64 (2.2-6build3) ...正在设置 libdav1d7:amd64 (1.4.1-1build1) ...正在设置 libfreexl1:amd64 (2.0.0-1build2) ...正在设置 libva-drm2:amd64 (2.20.0-2build1) ...正在设置 ocl-icd-libopencl1:amd64 (2.3.2-1build1) ...正在设置 libgif-dev:amd64 (5.2.2-1ubuntu1) ...正在设置 libvdpau1:amd64 (1.5-2build1) ...正在设置 libbullet-dev:amd64 (3.24+dfsg-2.1build1) ...正在设置 libbs2b0:amd64 (3.1.0+dfsg-7build1) ...正在设置 qml-module-qtqml-models2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libblosc1:amd64 (1.21.5+ds-1build1) ...正在设置 libmd-dev:amd64 (1.1.0-2build1.1) ...正在设置 libqt5sql5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libzimg2:amd64 (3.0.5+ds1-1build1) ...正在设置 libopenal-data (1:1.23.1-4build1) ...正在设置 xorg-sgml-doctools (1:1.11-1.1) ...正在设置 libgts-0.7-5t64:amd64 (0.7.6+darcs121130-5.2build1) ...正在设置 libgz-common5-io:amd64 (5.7.1-1~noble) ...正在设置 libqt5quicktemplates2-5:amd64 (5.15.13+dfsg-1) ...正在设置 libboost-dev:amd64 (1.83.0.1ubuntu2) ...正在设置 libqt5opengl5t64:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libboost-system1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 sdformat14-sdf (14.8.0-1~noble) ...正在设置 libqt5quickparticles5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libev-dev:amd64 (1:4.33-2.1build1) ...正在设置 libopengl-dev:amd64 (1.7.0-1build1) ...正在设置 libprotoc32t64:amd64 (3.21.12-8.2ubuntu0.2) ...正在设置 libjpeg8-dev:amd64 (8c-2ubuntu11) ...正在设置 python3-protobuf (3.21.12-8.2ubuntu0.2) ...正在设置 libbluray2:amd64 (1:1.3.4-1build1) ...正在设置 libsharpyuv-dev:amd64 (1.3.2-0.4build3) ...正在设置 libkmlbase1t64:amd64 (1.3.0-12build1) ...正在设置 libva-x11-2:amd64 (2.20.0-2build1) ...正在设置 libzip4t64:amd64 (1.7.3-1.1ubuntu2) ...正在设置 qml-module-qtquick2:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libtiffxx6:amd64 (4.5.1+git230720-4ubuntu2.3) ...正在设置 libcap-dev:amd64 (1:2.66-5ubuntu2.2) ...正在设置 libdeflate-dev:amd64 (1.19-1build1.1) ...正在设置 libwebsockets-evlib-glib:amd64 (4.3.3-1.1build3) ...正在设置 libogdi-dev (4.1.1+ds-3build1) ...正在设置 ruby-xmlrpc (0.3.2-2) ...正在设置 libcfitsio-doc (4.3.1-1.1build2) ...正在设置 libopenmpt0t64:amd64 (0.7.3-1.1build3) ...正在设置 libbsd-dev:amd64 (0.12.1-1build1.1) ...正在设置 libzvbi-common (0.2.42-2) ...正在设置 qml-module-qtquick-privatewidgets:amd64 (5.15.13-1) ...正在设置 qtchooser (66-2build2) ...正在设置 python3-pybind11 (2.11.1-2) ...正在设置 libblas-dev:amd64 (3.12.0-3build1.1) ...update-alternatives: 使用 /usr/lib/x86_64-linux-gnu/blas/libblas.so 来在自动模式中提供 /usr/lib/x86_64-linux-gnu/libblas.so (libblas.so-x86_64-linux-gnu)正在设置 libsz2:amd64 (1.1.2-1build1) ...正在设置 i965-va-driver:amd64 (2.4.1+dfsg1-1build2) ...正在设置 libmysqlclient-dev (8.0.43-0ubuntu0.24.04.1) ...正在设置 liboctomap1.9t64:amd64 (1.9.7+dfsg-3.1build3) ...正在设置 libkadm5clnt-mit12:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libodbccr2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在设置 libgz-utils2:amd64 (2.2.1-1~noble) ...正在设置 gdal-plugins:amd64 (3.8.4+dfsg-3ubuntu3) ...正在设置 libgz-common5-profiler:amd64 (5.7.1-1~noble) ...正在设置 libserd-0-0:amd64 (0.32.2-1) ...正在设置 libspatialite8t64:amd64 (5.1.0-3build1) ...正在设置 default-libmysqlclient-dev:amd64 (1.1.0build1) ...正在设置 libglib2.0-dev-bin (2.80.0-6ubuntu3.4) ...正在设置 mesa-vulkan-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 mesa-vdpau-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 libblkid-dev:amd64 (2.39.3-9ubuntu6.3) ...正在设置 librttopo-dev:amd64 (1.1.0-3build2) ...正在设置 libgts-bin (0.7.6+darcs121130-5.2build1) ...正在设置 mesa-libgallium:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 libodbcinst2:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在设置 libzip-dev:amd64 (1.7.3-1.1ubuntu2) ...正在设置 libqt5quicktest5:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libsdformat14:amd64 (14.8.0-1~noble) ...正在设置 liblapack3:amd64 (3.12.0-3build1.1) ...update-alternatives: 使用 /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3 来在自动模式中提供 /usr/lib/x86_64-linux-gnu/liblapack.so.3 (liblapack.so.3-x86_64-linux-gnu)正在设置 libkmlxsd1t64:amd64 (1.3.0-12build1) ...正在设置 libarpack2t64:amd64 (3.9.1-1.1build2) ...正在设置 libcfitsio-dev:amd64 (4.3.1-1.1build2) ...正在设置 libzmq5:amd64 (4.3.5-1build2) ...正在设置 libboost-chrono1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libqt5sql5-sqlite:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 qt5-qmake:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libpcre2-dev:amd64 (10.42-4ubuntu2.1) ...正在设置 libzvbi0t64:amd64 (0.2.42-2) ...正在设置 libgz-common5-events:amd64 (5.7.1-1~noble) ...正在设置 protobuf-compiler (3.21.12-8.2ubuntu0.2) ...正在设置 libkdb5-10t64:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libgbm1:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 libblosc-dev:amd64 (1.21.5+ds-1build1) ...正在设置 libselinux1-dev:amd64 (3.5-2ubuntu2.1) ...正在设置 qml-module-qtquick-templates2:amd64 (5.15.13+dfsg-1) ...正在设置 qtdeclarative5-dev-tools (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libwebsockets-evlib-ev:amd64 (4.3.3-1.1build3) ...正在设置 libfreexl-dev:amd64 (2.0.0-1build2) ...正在设置 libfyba-dev:amd64 (4.1.1-11build1) ...正在设置 qml-module-qt-labs-platform:amd64 (5.15.13+dfsg-1) ...正在设置 libgl1-mesa-dri:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 libpugixml-dev:amd64 (1.14-0.1build1) ...正在设置 libqt5quickcontrols2-5:amd64 (5.15.13+dfsg-1) ...正在设置 libaec-dev:amd64 (1.1.2-1build1) ...正在设置 libboost-serialization1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libwebsockets-evlib-uv:amd64 (4.3.3-1.1build3) ...正在设置 libjpeg-dev:amd64 (8c-2ubuntu11) ...正在设置 libfcl0.7:amd64 (0.7.0-3build2) ...正在设置 libavutil58:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libopenal1:amd64 (1:1.23.1-4build1) ...正在设置 libsuperlu6:amd64 (6.0.1+dfsg1-1build1) ...正在设置 libxatracker2:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 liburiparser-dev (0.9.7+dfsg-2build1) ...正在设置 libkmldom1t64:amd64 (1.3.0-12build1) ...正在设置 libsphinxbase3t64:amd64 (0.8+5prealpha+1-17build2) ...正在设置 qtbase5-dev-tools (5.15.13+dfsg-1ubuntu1) ...正在设置 libegl-mesa0:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 libwebp-dev:amd64 (1.3.2-0.4build3) ...正在设置 libass9:amd64 (1:0.17.1-2build1) ...正在设置 qtquickcontrols2-5-dev:amd64 (5.15.13+dfsg-1) ...正在设置 libtiff-dev:amd64 (4.5.1+git230720-4ubuntu2.3) ...正在设置 libswresample4:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libboost-date-time1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libdav1d-dev:amd64 (1.4.1-1build1) ...正在设置 libopenexr-3-1-30:amd64 (3.1.5-5.1build3) ...正在设置 libx265-dev:amd64 (3.5-2build1) ...正在设置 qml-module-qtgraphicaleffects:amd64 (5.15.13-1) ...正在设置 liblapack-dev:amd64 (3.12.0-3build1.1) ...update-alternatives: 使用 /usr/lib/x86_64-linux-gnu/lapack/liblapack.so 来在自动模式中提供 /usr/lib/x86_64-linux-gnu/liblapack.so (liblapack.so-x86_64-linux-gnu)正在设置 libproj-dev:amd64 (9.4.0-1build2) ...正在设置 libassimp-dev:amd64 (5.3.1+ds-2build1) ...正在设置 libspatialite-dev:amd64 (5.1.0-3build1) ...正在设置 python3-numpy (1:1.26.4+ds-6ubuntu1) ...正在设置 libgz-utils2-dev:amd64 (2.2.1-1~noble) ...正在设置 libavcodec60:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libgz-msgs10:amd64 (10.3.2-1~noble) ...正在设置 vdpau-driver-all:amd64 (1.5-2build1) ...正在设置 libprotoc-dev:amd64 (3.21.12-8.2ubuntu0.2) ...正在设置 libsord-0-0:amd64 (0.16.16-2build1) ...正在设置 libpostproc57:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libsratom-0-0:amd64 (0.6.16-1build1) ...正在设置 libgz-common5-core-dev:amd64 (5.7.1-1~noble) ...正在设置 libkadm5srv-mit12:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libdart-core+collisions+odelcpsolver6.13:amd64 (6.13.2+ds1-1~osrf2~noble) ...正在设置 libgz-math7-dev:amd64 (7.5.1-1~noble) ...正在设置 mesa-va-drivers:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 python3-gz-math7 (7.5.1-1~noble) ...正在设置 libhdf5-103-1t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 qml-module-qtquick-dialogs:amd64 (5.15.13-1) ...正在设置 libsuperlu-dev:amd64 (6.0.1+dfsg1-1build1) ...正在设置 libsdl2-2.0-0:amd64 (2.30.0+dfsg-1ubuntu3.1) ...正在设置 liblilv-0-0:amd64 (0.24.22-1build1) ...正在设置 unixodbc-dev:amd64 (2.3.12-1ubuntu0.24.04.1) ...正在设置 libmount-dev:amd64 (2.39.3-9ubuntu6.3) ...正在设置 libwebsockets-dev:amd64 (4.3.3-1.1build3) ...正在设置 libarmadillo12 (1:12.6.7+dfsg-1build2) ...正在设置 libswscale7:amd64 (7:6.1.1-3ubuntu5) ...正在设置 krb5-multidev:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libboost-thread1.83-dev:amd64 (1.83.0-2.1ubuntu3.1) ...正在设置 libavutil-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libgz-utils2-cli-dev:amd64 (2.2.1-1~noble) ...正在设置 libhdf5-hl-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 libfreeimage3:amd64 (3.18.0+ds2-10build4) ...正在设置 libnetcdf19t64:amd64 (1:4.9.2-5ubuntu4) ...正在设置 libarpack2-dev:amd64 (3.9.1-1.1build2) ...正在设置 libglx-mesa0:amd64 (25.0.7-0ubuntu0.24.04.2) ...正在设置 qml-module-qtquick-controls2:amd64 (5.15.13+dfsg-1) ...正在设置 libgeotiff-dev:amd64 (1.7.1-5build1) ...正在设置 libswresample-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libavcodec-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libpostproc-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libhdf5-cpp-103-1t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 libgz-transport13:amd64 (13.4.1-1~noble) ...正在设置 qml-module-qtquick-controls:amd64 (5.15.13-1) ...正在设置 libgz-common5-io-dev:amd64 (5.7.1-1~noble) ...正在设置 python3-sdformat14 (14.8.0-1~noble) ...正在设置 libheif-dev:amd64 (1.17.6-1ubuntu4.1) ...正在设置 libhdf5-fortran-102t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 libgz-sensors8:amd64 (8.2.2-1~noble) ...正在设置 libgz-common5-profiler-dev:amd64 (5.7.1-1~noble) ...正在设置 libgz-transport13-parameters:amd64 (13.4.1-1~noble) ...正在设置 libgz-msgs10-dev:amd64 (10.3.2-1~noble) ...正在设置 libgz-sensors8-altimeter:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-navsat:amd64 (8.2.2-1~noble) ...正在设置 libavformat60:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libkmlengine1t64:amd64 (1.3.0-12build1) ...正在设置 gz-transport13-cli (13.4.1-1~noble) ...正在设置 libgz-math7-eigen3-dev:amd64 (7.5.1-1~noble) ...正在设置 libpocketsphinx3:amd64 (0.8.0+real5prealpha+1-15ubuntu5) ...正在设置 libgdal34t64:amd64 (3.8.4+dfsg-3ubuntu3) ...正在设置 libkrb5-dev:amd64 (1.20.1-6ubuntu2.6) ...正在设置 libgz-common5-events-dev:amd64 (5.7.1-1~noble) ...正在设置 libglib2.0-dev:amd64 (2.80.0-6ubuntu3.4) ...正在设置 va-driver-all:amd64 (2.20.0-2build1) ...正在设置 libogre-next-2.3.0:amd64 (2.3.1-9osrf~noble) ...正在设置 libgz-sensors8-imu:amd64 (8.2.2-1~noble) ...正在设置 libswscale-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libogre-1.9.0t64:amd64 (1.9.0+dfsg1-14.1build2) ...正在设置 libgz-sensors8-force-torque:amd64 (8.2.2-1~noble) ...正在设置 libgz-common5-testing-dev:amd64 (5.7.1-1~noble) ...正在设置 python3-gz-msgs10 (10.3.2-1~noble) ...正在设置 libgz-plugin2-dev:amd64 (2.0.4-1~noble) ...正在设置 python3-gz-transport13 (13.4.1-1~noble) ...正在设置 libzmq3-dev:amd64 (4.3.5-1build2) ...正在设置 libkmlconvenience1t64:amd64 (1.3.0-12build1) ...正在设置 libgz-sensors8-air-pressure:amd64 (8.2.2-1~noble) ...正在设置 libgz-common5-graphics:amd64 (5.7.1-1~noble) ...正在设置 libhdf5-hl-cpp-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 libboost-thread-dev:amd64 (1.83.0.1ubuntu2) ...正在设置 libfreeimage-dev:amd64 (3.18.0+ds2-10build4) ...正在设置 libgz-sensors8-magnetometer:amd64 (8.2.2-1~noble) ...正在设置 libgz-physics7-tpelib:amd64 (7.5.0-1~noble) ...正在设置 libogre-1.9-dev (1.9.0+dfsg1-14.1build2) ...正在设置 cppzmq-dev:amd64 (4.10.0-1build1) ...正在设置 libgz-common5-geospatial:amd64 (5.7.1-1~noble) ...正在设置 libgz-transport13-log:amd64 (13.4.1-1~noble) ...正在设置 libkmlregionator1t64:amd64 (1.3.0-12build1) ...正在设置 libgz-sensors8-air-speed:amd64 (8.2.2-1~noble) ...正在设置 libgz-physics7-bullet:amd64 (7.5.0-1~noble) ...正在设置 libgz-sensors8-logical-camera:amd64 (8.2.2-1~noble) ...正在设置 libogre-next-2.3-dev (2.3.1-9osrf~noble) ...正在设置 libhdf5-hl-fortran-100t64:amd64 (1.10.10+repack-3.1ubuntu4) ...正在设置 libavformat-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libavfilter9:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libgz-physics7-tpelib-dev:amd64 (7.5.0-1~noble) ...正在设置 libhdf5-dev (1.10.10+repack-3.1ubuntu4) ...update-alternatives: 使用 /usr/lib/x86_64-linux-gnu/pkgconfig/hdf5-serial.pc 来在自动模式中提供 /usr/lib/x86_64-linux-gnu/pkgconfig/hdf5.pc (hdf5.pc)正在设置 libnetcdf-dev (1:4.9.2-5ubuntu4) ...正在设置 libgz-physics7-core-dev:amd64 (7.5.0-1~noble) ...正在设置 libgz-physics7-dartsim:amd64 (7.5.0-1~noble) ...正在设置 libgz-rendering8:amd64 (8.2.2-1~noble) ...正在设置 libgz-physics7-tpe:amd64 (7.5.0-1~noble) ...正在设置 libkml-dev:amd64 (1.3.0-12build1) ...正在设置 libgz-gui8:amd64 (8.4.0-1~noble) ...正在设置 libavfilter-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libgz-sensors8-rendering:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-dvl:amd64 (8.2.2-1~noble) ...正在设置 libavdevice60:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libarmadillo-dev (1:12.6.7+dfsg-1build2) ...正在设置 libgz-sensors8-lidar:amd64 (8.2.2-1~noble) ...正在设置 libhdf4-alt-dev (4.2.16-4build1) ...正在设置 libgz-rendering8-ogre1:amd64 (8.2.2-1~noble) ...正在设置 libgdal-dev (3.8.4+dfsg-3ubuntu3) ...正在设置 libgz-rendering8-ogre2:amd64 (8.2.2-1~noble) ...正在设置 libavdevice-dev:amd64 (7:6.1.1-3ubuntu5) ...正在设置 libgz-sensors8-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-rgbd-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-common5-av:amd64 (5.7.1-1~noble) ...正在设置 libgz-sensors8-gpu-lidar:amd64 (8.2.2-1~noble) ...正在设置 libgz-common5-av-dev:amd64 (5.7.1-1~noble) ...正在设置 libgz-sensors8-depth-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-boundingbox-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-wide-angle-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-segmentation-camera:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-thermal-camera:amd64 (8.2.2-1~noble) ...正在设置 libruby:amd64 (1:3.2~ubuntu1) ...正在设置 ruby-rubygems (3.4.20-1) ...正在设置 rake (13.0.6-3) ...正在设置 ruby-sdbm:amd64 (1.0.0-5build4) ...正在设置 libruby3.2:amd64 (3.2.3-1ubuntu0.24.04.6) ...正在设置 ruby3.2 (3.2.3-1ubuntu0.24.04.6) ...正在设置 ruby (1:3.2~ubuntu1) ...正在设置 gz-tools2:amd64 (2.0.3-1~noble) ...正在设置 libgz-fuel-tools9:amd64 (9.1.1-1~noble) ...正在设置 libgz-tools2-dev:amd64 (2.0.3-1~noble) ...正在设置 libgz-sim8:amd64 (8.9.0-1~noble) ...正在设置 libgz-transport13-core-dev:amd64 (13.4.1-1~noble) ...正在设置 libgz-transport13-parameters-dev:amd64 (13.4.1-1~noble) ...正在设置 python3-gz-sim8 (8.9.0-1~noble) ...正在设置 libgz-launch7:amd64 (7.1.1-1~noble) ...正在设置 gz-launch7-cli (7.1.1-1~noble) ...正在设置 gz-sim8-cli (8.9.0-1~noble) ...正在设置 libgz-transport13-log-dev:amd64 (13.4.1-1~noble) ...正在设置 libsdformat14-dev:amd64 (14.8.0-1~noble) ...正在设置 libgz-sim8-plugins:amd64 (8.9.0-1~noble) ...正在设置 libgz-fuel-tools9-dev:amd64 (9.1.1-1~noble) ...正在设置 libgz-physics7-sdf-dev:amd64 (7.5.0-1~noble) ...正在设置 libgz-transport13-dev:amd64 (13.4.1-1~noble) ...正在处理用于 fontconfig (2.15.0-1.1ubuntu2) 的触发器 ...正在处理用于 desktop-file-utils (0.27-2build1) 的触发器 ...正在处理用于 hicolor-icon-theme (0.17-2) 的触发器 ...正在处理用于 gnome-menus (3.36.0-1.1ubuntu3) 的触发器 ...正在处理用于 libc-bin (2.39-0ubuntu8.5) 的触发器 ...正在处理用于 man-db (2.12.0-4build2) 的触发器 ...正在处理用于 libglib2.0-0t64:amd64 (2.80.0-6ubuntu3.4) 的触发器 ...正在设置 libgts-dev:amd64 (0.7.6+darcs121130-5.2build1) ...正在处理用于 sgml-base (1.31) 的触发器 ...正在设置 libgz-common5-graphics-dev:amd64 (5.7.1-1~noble) ...正在处理用于 install-info (7.1-3build2) 的触发器 ...正在设置 x11proto-dev (2023.2-1) ...正在设置 libxau-dev:amd64 (1:1.0.9-1build6) ...正在设置 libgz-common5-geospatial-dev:amd64 (5.7.1-1~noble) ...正在设置 libgz-physics7-mesh-dev:amd64 (7.5.0-1~noble) ...正在设置 libxdmcp-dev:amd64 (1:1.1.3-0ubuntu6) ...正在设置 libgz-common5-dev:amd64 (5.7.1-1~noble) ...正在设置 libgz-physics7-bullet-dev:amd64 (7.5.0-1~noble) ...正在设置 libgz-rendering8-core-dev:amd64 (8.2.2-1~noble) ...正在设置 libxcb1-dev:amd64 (1.15-1ubuntu2) ...正在设置 libgz-physics7-heightmap-dev:amd64 (7.5.0-1~noble) ...正在设置 libgz-physics7-tpe-dev:amd64 (7.5.0-1~noble) ...正在设置 libx11-dev:amd64 (2:1.8.7-1build1) ...正在设置 libgz-rendering8-ogre2-dev:amd64 (8.2.2-1~noble) ...正在设置 libxext-dev:amd64 (2:1.3.4-1build2) ...正在设置 libgz-rendering8-ogre1-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-physics7-dartsim-dev:amd64 (7.5.0-1~noble) ...正在设置 libglx-dev:amd64 (1.7.0-1build1) ...正在设置 libgl-dev:amd64 (1.7.0-1build1) ...正在设置 libgz-sensors8-core-dev:amd64 (8.2.2-1~noble) ...正在设置 libegl-dev:amd64 (1.7.0-1build1) ...正在设置 libgz-sensors8-navsat-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-rgbd-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-dvl-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-boundingbox-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-wide-angle-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-force-torque-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-segmentation-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-rendering8-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-rendering-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-magnetometer-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-lidar-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-altimeter-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-imu-dev:amd64 (8.2.2-1~noble) ...正在设置 libglu1-mesa-dev:amd64 (9.0.2-1.1build1) ...正在设置 qtbase5-dev:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libgz-physics7-dev:amd64 (7.5.0-1~noble) ...正在设置 qtdeclarative5-dev:amd64 (5.15.13+dfsg-1ubuntu0.1) ...正在设置 libgz-sensors8-air-speed-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-gui8-dev:amd64 (8.4.0-1~noble) ...正在设置 libgz-sensors8-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-gpu-lidar-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-thermal-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-air-pressure-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-logical-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libqt5opengl5-dev:amd64 (5.15.13+dfsg-1ubuntu1) ...正在设置 libgz-sensors8-depth-camera-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sensors8-dev:amd64 (8.2.2-1~noble) ...正在设置 libgz-sim8-dev:amd64 (8.9.0-1~noble) ...正在设置 libgz-launch7-dev:amd64 (7.1.1-1~noble) ...正在设置 gz-harmonic (1.0.0-1~noble) ...zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ gz simVMware: No 3D enabled (0, 成功).libEGL warning: egl: failed to create dri2 screenMESA: error: ZINK: failed to choose pdevlibEGL warning: egl: failed to create dri2 screenVMware: No 3D enabled (0, 成功).libEGL warning: egl: failed to create dri2 screenzky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ </code></pre><h3 style="background-color:transparent">3.4.4 问题4：笔者最后编译成功前出现的：找不到 Gazebo 仿真依赖项</h3><p>错误现象：</p><pre><code class="language-bash">zky@zky-VMware-Virtual-Platform:~/ProjectsHub/PX4_Projects/PX4-Autopilot$ make px4_sitl gz_x500[1/1] cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/bu...rg/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseFAILED: src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge/CMakeFiles/gz_x500 cd /home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_default/src/modules/simulation/gz_bridge &amp;&amp; /usr/bin/cmake -E echo "ERROR: Gazebo simulation dependencies not found!" &amp;&amp; /usr/bin/cmake -E echo "  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/" &amp;&amp; /usr/bin/cmake -E falseERROR: Gazebo simulation dependencies not found!  - For installation instructions, see: https://gazebosim.org/docs/harmonic/install_ubuntu/ninja: build stopped: subcommand failed.make: *** [Makefile:227：px4_sitl] 错误 1</code></pre><p>解决方法：</p><p>（1）尝试官方的install Gazebo Harmonic方法</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Binary Installation on Ubuntu — Gazebo harmonic documentation" href="https://gazebosim.org/docs/harmonic/install_ubuntu/" title="Binary Installation on Ubuntu — Gazebo harmonic documentation">Binary Installation on Ubuntu &mdash; Gazebo harmonic documentation</a></p><p>（2）根据AI的提示重新安装Gazebo Harmonic，指定路径</p><p>（3）尝试多次编译，因为可能是github的链接访问不稳定</p><p>注：这里我二次编译就报另外的问题6，第一次是找不到 Gazebo 仿真依赖项，但是，第一次的错误不知道怎么就修复了，下面的问题6的详细过程里有。</p><h3 style="background-color:transparent">3.4.5 问题5：缺少 OpenCV 库的配置文件</h3><p>错误现象：</p><pre><code class="language-bash">looking for gz-utils2 -- found version 2.2.1-- Looking for gz-sensors8 -- found version 8.2.2-- Looking for gz-plugin2 -- found version 2.0.4CMake Error at src/modules/simulation/gz_plugins/optical_flow/optical_flow.cmake:35 (find_package):  By not providing "FindOpenCV.cmake" in CMAKE_MODULE_PATH this project has  asked CMake to find a package configuration file provided by "OpenCV", but  CMake did not find one.  Could not find a package configuration file provided by "OpenCV" with any  of the following names:    OpenCVConfig.cmake    opencv-config.cmake  Add the installation prefix of "OpenCV" to CMAKE_PREFIX_PATH or set  "OpenCV_DIR" to a directory containing one of the above files.  If "OpenCV"  provides a separate development package or SDK, be sure it has been  installed.Call Stack (most recent call first):  src/modules/simulation/gz_plugins/optical_flow/CMakeLists.txt:37 (include)-- Configuring incomplete, errors occurred!FAILED: build.ninja /usr/bin/cmake --regenerate-during-build -S/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot -B/home/zky/ProjectsHub/PX4_Projects/PX4-Autopilot/build/px4_sitl_defaultninja: error: rebuilding 'build.ninja': subcommand failedmake: *** [Makefile:227：px4_sitl] 错误 1</code></pre><p>解决方法：</p><pre><code class="language-bash">sudo apt-get update &amp;&amp; sudo apt-get install libopencv-dev opencv-data</code></pre><p>详细过程（可略过）：</p><p>在文章顶部展示PX4最后编译的过程日志资源</p><h2>3.5 build 成功结果展示</h2><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/09cab776ff03475ab229219827b1fbc5.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/443f0862df81476aaf383d5511237797.png"></p><h2>3.6 进一步了解PX4</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="基本概念 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/getting_started/px4_basic_concepts.html" title="基本概念 | PX4 Guide (main)">基本概念 | PX4 Guide (main)</a></p><h3>3.6.1 其余命令</h3><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Gazebo Simulation | PX4 Guide (main)" href="https://docs.px4.io/main/zh/sim_gazebo_gz/" title="Gazebo Simulation | PX4 Guide (main)">Gazebo Simulation | PX4 Guide (main)</a></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/c1e2829cc8b64cc987ce0f1dfcc7f6ef.png"></p><h3>3.6.2 成功编译后会启动的是psh控制台以及仿真模拟器，控制台里看一看有哪些命令</h3><pre><code class="language-bash">INFO  [mavlink] MAVLink only on localhost (set param MAV_{i}_BROADCAST = 1 to enable network)INFO  [px4] Startup script returned successfullypxh&gt; WARN  [health_and_arming_checks] Preflight Fail: No connection to the GCSWARN  [health_and_arming_checks] Preflight Fail: No connection to the GCSpxh&gt; helpBuiltin Commands:  actuator_test  airship_att_control  airspeed_selector  attitude_estimator_q  battery_simulator  bsondump  camera_feedback  camera_trigger  cdev_test  commander  control_allocator  controllib_test  dataman  dyn  ekf2  failure  fake_gps  fake_imu  fake_magnetometer  flight_mode_manager  fw_att_control  fw_autotune_attitude_control  fw_lat_lon_control  fw_mode_manager  fw_rate_control  gimbal  gps  gyro_calibration  gyro_fft  gz_bridge  hello  hrt_test  land_detector  landing_target_estimator  led_control  list_files  list_tasks  listener  load_mon  local_position_estimator  logger  mag_bias_estimator  manual_control  mavlink  mavlink_tests  mc_att_control  mc_autotune_attitude_control  mc_hover_thrust_estimator  mc_pos_control  mc_rate_control  msp_osd  navigator  param  payload_deliverer  perf  pwm_out_sim  px4_mavlink_debug  px4_simple_app  rc_tests  rc_update  replay  rover_ackermann  rover_differential  rover_mecanum  sd_bench  send_event  sensor_agp_sim  sensor_airspeed_sim  sensor_baro_sim  sensor_gps_sim  sensor_mag_sim  sensors  septentrio  shutdown  simulator_mavlink  simulator_sih  sleep  system_power_simulator  system_time  temperature_compensation  tests  tone_alarm  tune_control  uorb  uorb_tests  uuv_att_control  uuv_pos_control  uxrce_dds_client  ver  vtol_att_control  work_item_example  work_queue  wqueue_test</code></pre><h3>3.6.3 多旋翼接线图</h3><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="简介 - 《PX4 用户手册》 - 书栈网 · BookStack" href="https://www.bookstack.cn/read/px4-user-guide/zh-README.md" title="简介 - 《PX4 用户手册》 - 书栈网 · BookStack">简介 - 《PX4 用户手册》 - 书栈网 &middot; BookStack</a></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/066524cf8f4f463c9a094402619ced80.png"></p><h1>四、在Windows下安装地面控制站</h1><h2>4.1 进入基本概念，点击here进入<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="QCS下载链接" href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/getting_started/download_and_install.html" title="QCS下载链接">QCS下载链接</a></h2><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/8ba85fed62eb413abb2538b257404a35.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6c0e380057984ab6849502190b6332b1.png"></p><p>注：这个过程中可能要求安装各种驱动，也都安装上。</p><p>安装完成</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/0aa9a9b9bed04dfaa2dd363eaf359e7c.png"></p><h2>4.2 进行地面与模拟器（飞控软件仿真）的链接</h2><p>4.2.1.先虚拟机里编译运行，打开模拟器</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/02f24f79b6484f498ec8f53ceb43243c.png"></p><p>4.2.2. 打开地面站</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/fe253de5869f4a7194169a34fec40fdc.png"></p><p>4.2.设置地面站</p><p>1.点击左上角图标，进入应用设置</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1b139550a5c34c4c86da17c7c504692e.png"></p><p>2.点击links</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/490dfc29435f42a8936718a6db2fa4e7.png"></p><p>3.点击下面的添加，然后设置为UDP链接</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6027f5101056452cb02fbaa766db254b.png"></p><p>4.打开官网的仿真指导</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="仿真 | PX4 Guide (main)" href="https://docs.px4.io/main/zh/simulation/" title="仿真 | PX4 Guide (main)">仿真 | PX4 Guide (main)</a></p><p>下面有介绍，这里使用18570端口</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/f5e89ec5d20e4a13a24e39387a946d38.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/05284bd110584ed1b4772ef34a76db0d.png"></p><p>5. 保存然后链接</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/adc6594b06ba40c39872022526fb4ef9.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/0327b0282ec4496b98d97909152bcf37.png"></p><h4>6. 进入应用设置，到fly view打开虚拟手柄</h4><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6ec1751bf1a343efa1abf78b2883a6ed.png"></p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/fb34c8e24faf43779e01e656f995ebb7.png"></p><p>左上角绿色就是准备好了。</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/8388306a9c864510878c68fcc0b36ee0.png"></p><h2>4.3 模拟飞行测试</h2><h3>4.3.1 在地面站，点击左上角的起飞，并拉动滑条或者长按空格</h3><h3>4.3.2 在模拟器仿真里右击飞机型号，点击follow选项里的follow</h3><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/4841eddd345c482a9c5e39232f74683a.png"></p><hr /><p>注：</p><p>个人叙述：之前，我已自组过一台2.5寸FPV机，后面飞了好几次，感觉确实不错，但是同时，身为一位电子爱好者，也想更深入地自己制作一台无人机，但是直接手搓飞控代码和从零画飞控PCB还是有点难度，于是就借助PX4进行一个学习的过渡。</p><p><img src="/2025/09/06/%E3%80%90UAV%E3%80%91%E5%9F%BA%E4%BA%8EPX4+Ubuntu24.04.3%E7%9A%84%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%88%B6%E4%BD%9C%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/f99c035f51e840159b9198e6bc56ce25.jpeg"></p>]]></content>
    
    
    <categories>
      
      <category>无人机学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>无人机 UAV PX4 Ubuntu Gazebo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【ESP32】基于ESP-IDF 5.5命令行+Windows环境的ESP32S3的初步开发</title>
    <link href="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/"/>
    <url>/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>ESP-IDF 5.5 的命令行环境（Command-Line Interface, CLI）是乐鑫（Espressif）为 ESP32/ESP32-S 系列等芯片开发的官方工具集核心，基于 Python 构建，用于替代早期的&nbsp;<code>make</code>&nbsp;构建系统，提供<strong>项目创建、配置、编译、烧录、调试、监控</strong>全流程开发支持，是 ESP-IDF 开发的核心交互入口。</p><h3>核心特点</h3><ol><li><strong>统一命令入口</strong>：所有操作通过单个命令&nbsp;<code>idf.py</code>&nbsp;触发，无需记忆多套工具命令，降低学习成本；</li><li><strong>跨平台兼容</strong>：完美支持 Windows（含 WSL）、macOS、Linux，环境配置流程统一；</li><li><strong>集成化工作流</strong>：从项目初始化到固件调试的全流程可通过 CLI 串联，无需切换多工具；</li><li><strong>灵活可扩展</strong>：支持自定义脚本、参数传递，可集成到 CI/CD 流程（如 Jenkins、GitHub Actions）。</li></ol><h3>核心命令分类（常用场景）</h3><p><code>idf.py</code>&nbsp;命令需在 ESP-IDF 项目根目录执行（需先通过&nbsp;<code>export.sh</code>/<code>export.bat</code>&nbsp;激活环境），核心命令可分为 5 大类：</p><table><thead><tr><th>命令类别</th><th>常用命令</th><th>功能说明</th></tr></thead><tbody><tr><td><strong>项目初始化</strong></td><td><code>idf.py create-project &lt;proj-name&gt;</code></td><td>创建新的 ESP-IDF 项目（默认生成基础模板，含&nbsp;<code>main</code>&nbsp;目录、<code>CMakeLists.txt</code>）</td></tr><tr><td><strong>项目配置</strong></td><td><code>idf.py menuconfig</code></td><td>打开图形化配置界面（基于 ncurses），配置芯片型号、外设参数、功能开关等</td></tr><tr><td><strong>编译构建</strong></td><td><code>idf.py build</code></td><td>全量编译项目，生成固件（<code>bootloader.bin</code>、<code>partition-table.bin</code>、<code>app.bin</code>）</td></tr><tr><td></td><td><code>idf.py app</code></td><td>仅编译应用程序（跳过 bootloader / 分区表，加速迭代）</td></tr><tr><td></td><td><code>idf.py clean</code></td><td>清理编译产物（下次编译将全量重新构建）</td></tr><tr><td><strong>烧录固件</strong></td><td><code>idf.py flash</code></td><td>自动检测串口，将编译生成的固件烧录到芯片（需提前配置串口端口 / 波特率）</td></tr><tr><td></td><td><code>idf.py -p &lt;端口&gt; -b &lt;波特率&gt; flash</code></td><td>指定串口（如&nbsp;<code>-p /dev/ttyUSB0</code>）和波特率（如&nbsp;<code>-b 460800</code>）烧录</td></tr><tr><td><strong>调试 / 监控</strong></td><td><code>idf.py monitor</code></td><td>打开串口监控终端，查看芯片打印的日志（支持快捷键：<code>Ctrl+]</code>&nbsp;退出）</td></tr><tr><td></td><td><code>idf.py flash monitor</code></td><td>先烧录固件，烧录完成后自动进入监控模式（开发常用 &ldquo;一键流程&rdquo;）</td></tr><tr><td></td><td><code>idf.py gdb</code></td><td>启动 GDB 调试（需配合调试器，如 J-Link、ESP-Prog）</td></tr></tbody></table><h3>环境激活与依赖</h3><p>使用命令行环境前需完成<strong>环境激活</strong>，确保系统识别&nbsp;<code>idf.py</code>&nbsp;命令：</p><ul><li><strong>Windows</strong>：打开 ESP-IDF 命令行终端（或在普通终端执行&nbsp;<code>%IDF_PATH%\export.bat</code>）；</li><li><strong>macOS/Linux</strong>：在终端执行&nbsp;<code>source $IDF_PATH/export.sh</code>（<code>IDF_PATH</code>&nbsp;为 ESP-IDF 5.5 安装目录）。</li></ul><p>依赖要求：</p><ul><li>Python 3.8+（ESP-IDF 5.5 最低要求）；</li><li>串口驱动（如 CH340、CP2102 驱动，确保电脑识别芯片串口）；</li><li>编译工具链（ESP-IDF 会通过&nbsp;<code>install.sh</code>/<code>install.bat</code>&nbsp;自动安装，无需手动配置）。</li></ul><h3>优势与适用场景</h3><ul><li><strong>适合开发者</strong>：相比 IDE（如 VS Code 插件），CLI 更轻量，适合习惯命令行操作、自动化脚本编写的场景；</li><li><strong>自动化集成</strong>：可通过脚本调用&nbsp;<code>idf.py</code>&nbsp;命令，实现批量编译、多设备烧录等自动化需求；</li><li><strong>问题排查友好</strong>：编译 / 烧录报错会直接在终端输出详细日志，便于定位问题（如依赖缺失、配置错误）。</li></ul><p>综上，ESP-IDF 5.5 命令行环境是 ESP32 开发的 &ldquo;基础设施&rdquo;，无论是单人开发还是团队协作，都是高效且灵活的核心工具。</p><h1>二、工程创建</h1><h2 style="background-color:transparent">2.1 创建一个工作文件夹，切换到工作文件夹，将在这里创建一个示例工程。</h2><p>E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/54d32bf86bb24fcb9e8fda558feebd55.png"></p><h2 style="background-color:transparent">2.2 打开ESP-IDF命令行工具，使用命令</h2><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/3fdbe7e77dd14b2aa6de463dd7da874a.png"></p><pre><code class="language-bash">//idf.py --help查看一些命令使用PS D:\Espressif\frameworks\esp-idf-v5.5&gt; idf.py --helpUsage: idf.py [OPTIONS] COMMAND1 [ARGS]... [COMMAND2 [ARGS]...]...  ESP-IDF CLI build management tool. For commands that are not known to idf.py an attempt to execute it as a build system target will be  made. Selected target: NoneOptions:  --version                       Show IDF version and exit.  --list-targets                  Print list of supported targets and exit.  -C, --project-dir PATH          Project directory.  -B, --build-dir PATH            Build directory.  -w, --cmake-warn-uninitialized / -n, --no-warnings                                  Enable CMake uninitialized variable warnings for CMake files inside the project directory. (--no-                                  warnings is now the default, and doesn't need to be specified.) The default value can be set with the                                  IDF_CMAKE_WARN_UNINITIALIZED environment variable.  -v, --verbose                   Verbose build output.  --preview                       Enable IDF features that are still in preview.  --ccache / --no-ccache          Use ccache in build. Disabled by default. The default value can be set with the IDF_CCACHE_ENABLE                                  environment variable.  -G, --generator [Ninja]         CMake generator.  --no-hints                      Disable hints on how to resolve errors and logging.  -D, --define-cache-entry TEXT   Create a cmake cache entry. This option can be used at most once either globally, or for one subcommand.  -p, --port PATH                 Serial port. The default value can be set with the ESPPORT environment variable. This option can be used                                  at most once either globally, or for one subcommand.  -b, --baud INTEGER              Global baud rate for all idf.py subcommands if they don't overwrite it locally.It can imply monitor baud                                  rate as well if it hasn't been defined locally. The default value can be set with the ESPBAUD                                  environment variable. This option can be used at most once either globally, or for one subcommand.  --help                          Show this message and exit.Commands:  add-dependency                  Add dependency to the manifest file.  all                             Aliases: build. Build the project.  app                             Build only the app.  app-flash                       Flash the app only.  bootloader                      Build only bootloader.  bootloader-flash                Flash bootloader only.  build-system-targets            Print list of build system targets.  clang-check                     run clang-tidy check under current folder, write the output into "warnings.txt"  clang-html-report               generate html report to "html_report" folder by reading "warnings.txt" (may take a few minutes). This                                  feature requires extra dependency "codereport". Please install this by running "pip install codereport"  clean                           Delete build output files from the build directory.  confserver                      Run JSON configuration server.  coredump-debug                  Create core dump ELF file and run GDB debug session with this file.  coredump-info                   Print crashed task’s registers, callstack, list of available tasks in the system, memory regions and                                  contents of memory stored in core dump (TCBs and stacks)  create-component                Create a new component.  create-manifest                 Create manifest for specified component.  create-project                  Create a new project.  create-project-from-example     Create a project from an example in the ESP Component Registry.  diag                            Create diagnostic report.  docs                            Open web browser with documentation for ESP-IDF  efuse-burn                      Burn the eFuse with the specified name.  efuse-burn-key                  Burn a 256-bit key to EFUSE: BLOCK1, flash_encryption, BLOCK2, secure_boot_v1, secure_boot_v2, BLOCK3.  efuse-common-table              Generate C-source for IDF's eFuse fields.  efuse-custom-table              Generate C-source for user's eFuse fields.  efuse-dump                      Dump raw hex values of all eFuses.  efuse-read-protect              Disable writing to the eFuse with the specified name.  efuse-summary                   Get the summary of the eFuses.  efuse-write-protect             Disable writing to the eFuse with the specified name.  encrypted-app-flash             Flash the encrypted app only.  encrypted-flash                 Flash the encrypted project.  erase-flash                     Erase entire flash chip.  erase-otadata                   Erase otadata partition.  flash                           Flash the project.  fullclean                       Delete the entire build directory contents.  gdb                             Run the GDB.  gdbgui                          GDB UI in default browser.  gdbtui                          GDB TUI mode.  menuconfig                      Run "menuconfig" project configuration tool.  merge-bin  monitor                         Display serial output.  openocd                         Run openocd from current path  partition-table                 Build only partition table.  partition-table-flash           Flash partition table only.  post-debug                      Utility target to read the output of async debug action and stop them.  python-clean                    Delete generated Python byte code from the IDF directory  qemu                            Run QEMU.  read-otadata                    Read otadata partition.  reconfigure                     Re-run CMake.  save-defconfig                  Generate a sdkconfig.defaults with options different from the default ones  secure-decrypt-flash-data  secure-digest-secure-bootloader                                  Take a bootloader binary image and a secure boot key, and output a combineddigest+binary suitable for                                  flashing along with the precalculated secure boot key.  secure-encrypt-flash-data       Encrypt some data suitable for encrypted flash (using known key).  secure-encrypt-nvs-partition    Encrypt the NVS partition.  secure-generate-flash-encryption-key  secure-generate-key-digest      Generate a digest of a puiblic key file for use with secure boot.  secure-generate-nvs-partition-key                                  Generate a key for NVS partition encryption.  secure-generate-signing-key     Generate a private key for signing secure boot images as per the secure boot version. Key file is                                  generated in PEMformat, Secure Boot V1 - ECDSA NIST256p private key. Secure Boot V2 - RSA 3072, ECDSA                                  NIST256p, ECDSA NIST192pprivate key.  secure-sign-data                Sign a data file for use with secure boot. Signing algorithm is deterministic ECDSA w/ SHA-512 (V1) or                                  either RSA-PSS or ECDSA w/ SHA-256 (V2).  secure-verify-signature         Verify a previously signed binary image, using the ECDSA (V1) or either RSA or ECDSA (V2) public key.  set-target                      Set the chip target to build.  show-efuse-table                Print eFuse table.  size                            Print basic size information about the app.  size-components                 Print per-component size information.  size-files                      Print per-source-file size information.  uf2                             Generate the UF2 binary with all the binaries included  uf2-app                         Generate an UF2 binary for the application only  update-dependencies             Update dependencies of the project</code></pre><h2 style="background-color:transparent">2.3 查看详细的创建工程的命令，创建工程</h2><pre><code class="language-bash">PS D:\Espressif\frameworks\esp-idf-v5.5&gt; idf.py create-project --helpUsage: idf.py create-project [OPTIONS] NAME  Create a new project with the name NAME specified as argument. For example: `idf.py create-project new_proj` will create a new project  in subdirectory called `new_proj` of the current working directory. For specifying the new project's path, use either the option --path  for specifying the destination directory, or the global option -C if the project should be created as a subdirectory of the specified  directory. If the target path does not exist it will be created. If the target folder is not empty then the operation will fail with  return code 3. If the target path is not a folder, the script will fail with return code 4. After the execution idf.py terminates so  this operation should be used alone.Options:  -C, --project-dir PATH  Project directory.  -p, --path TEXT         Set the path for the new project. The project will be created directly in the given folder if it does not                          contain anything  --help                  Show this message and exit.PS D:\Espressif\frameworks\esp-idf-v5.5&gt;</code></pre><pre><code class="language-bash">//--path如果不指定路径就会默认创建在命令行当前所在的目录下PS D:\Espressif\frameworks\esp-idf-v5.5&gt; idf.py create-project --path E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led EX1_ledExecuting action: create-projectThe project was created in E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_ledPS D:\Espressif\frameworks\esp-idf-v5.5&gt;</code></pre><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/28e40b0232424115b2f769dd7950a298.png"></p><h2>2.4 使用cd切换到工程目录</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; ls    目录: E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_ledMode                 LastWriteTime         Length Name----                 -------------         ------ ----d-----         2025/8/31     23:14                main-a----         2025/8/31     23:14            243 CMakeLists.txtPS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt;</code></pre><h2>2.5 创建自己的组件，查看espidf的官方示例的架构</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py create-component ledExecuting action: create-componentThe component was created in E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\ledPS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; ls -al</code></pre><p>D:\Espressif\frameworks\esp-idf-v5.5\examples\protocols这个是这种protocols类型的组件的示例工程就是下面这些，其中一个关于https的dns服务的代码就是我个人喜欢的一种结构，把自己的组件放进components</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/7e0c016866874f69927fccf5281bbac1.png"></p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/7edbdeb490344703b35c663dc6a2c998.png"></p><h2>2.5 工程文件夹下创建文件夹<img alt="" height="60" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/a8088a77c5c946f8925adec3b4a40626.png" width="658" /></h2><h2>2.6 创建组件led放入components文件夹</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py create-component ledExecuting action: create-componentThe component was created in E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\led</code></pre><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/bd9c7387165647ee8dbca33dfa7403b1.png"></p><p>将其放入components</p><h2>2.7 查看可设置的芯片，并设置目标芯片</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py set-target --helpUsage: idf.py set-target [OPTIONS] {esp32|esp32s2|esp32c3|esp32s3|esp32c2|esp32c6|esp32h2|esp32p4|linux|esp32c5|esp32c61|esp32h21|esp32h4}  Set the chip target to build. This will remove the existing sdkconfig file and corresponding CMakeCache and create new ones according to  the new target. For example, "idf.py set-target esp32" will select esp32 as the new chip target.Options:  -C, --project-dir PATH  Project directory.  --help                  Show this message and exit.PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt;</code></pre><p>idf.py set-target esp32s3</p><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py set-target esp32s3Adding "set-target"'s dependency "fullclean" to list of commands with default set of options.Executing action: fullcleanBuild directory 'E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\build' not found. Nothing to clean.Executing action: set-targetSet Target to: esp32s3, new sdkconfig will be created.Running cmake in directory E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\buildExecuting "cmake -G Ninja -DPYTHON_DEPS_CHECKED=1 -DPYTHON=D:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe -DESP_PLATFORM=1 -DIDF_TARGET=esp32s3 -DCCACHE_ENABLE=1 E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led"...-- Found Git: D:/Espressif/tools/idf-git/2.44.0/cmd/git.exe (found version "2.44.0.windows.1")-- git rev-parse returned 'fatal: detected dubious ownership in repository at 'D:/Espressif/frameworks/esp-idf-v5.5''D:/Espressif/frameworks/esp-idf-v5.5' is owned by:        BUILTIN/Administrators (S-1-5-32-544)but the current user is:        DESKTOP-NUC51TC/zky (S-1-5-21-1729146741-4165152595-2160886639-1000)To add an exception for this directory, call:        git config --global --add safe.directory D:/Espressif/frameworks/esp-idf-v5.5'fatal: detected dubious ownership in repository at 'D:/Espressif/frameworks/esp-idf-v5.5''D:/Espressif/frameworks/esp-idf-v5.5' is owned by:        BUILTIN/Administrators (S-1-5-32-544)but the current user is:        DESKTOP-NUC51TC/zky (S-1-5-21-1729146741-4165152595-2160886639-1000)To add an exception for this directory, call:        git config --global --add safe.directory D:/Espressif/frameworks/esp-idf-v5.5-- Minimal build - OFF-- ccache will be used for faster recompilation-- The C compiler identification is GNU 14.2.0-- The CXX compiler identification is GNU 14.2.0-- The ASM compiler identification is GNU-- Found assembler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-gcc.exe-- Detecting C compiler ABI info-- Detecting C compiler ABI info - done-- Check for working C compiler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-gcc.exe - skipped-- Detecting C compile features-- Detecting C compile features - done-- Detecting CXX compiler ABI info-- Detecting CXX compiler ABI info - done-- Check for working CXX compiler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-g++.exe - skipped-- Detecting CXX compile features-- Detecting CXX compile features - done-- git rev-parse returned 'fatal: not a git repository (or any of the parent directories): .git'-- Could not use 'git describe' to determine PROJECT_VER.-- Building ESP-IDF components for target esp32s3-- Project sdkconfig file E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/sdkconfig-- Compiler supported targets: xtensa-esp-elf-- Found Python3: D:/Espressif/python_env/idf5.5_py3.11_env/Scripts/python.exe (found version "3.11.2") found components: Interpreter-- Performing Test CMAKE_HAVE_LIBC_PTHREAD-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success-- Found Threads: TRUE-- Performing Test C_COMPILER_SUPPORTS_WFORMAT_SIGNEDNESS-- Performing Test C_COMPILER_SUPPORTS_WFORMAT_SIGNEDNESS - Success-- USING O3-- App "EX1_led" version: 1-- Adding linker script E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/build/esp-idf/esp_system/ld/memory.ld-- Adding linker script E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/build/esp-idf/esp_system/ld/sections.ld.in-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.api.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.bt_funcs.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.libgcc.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.wdt.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.version.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_master.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_50.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_smp.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_dtm.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_test.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.ble_scan.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.libc.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom/esp32s3/ld/esp32s3.rom.newlib.ld-- Adding linker script D:/Espressif/frameworks/esp-idf-v5.5/components/soc/esp32s3/ld/esp32s3.peripherals.ldfatal: detected dubious ownership in repository at 'D:/Espressif/frameworks/esp-idf-v5.5''D:/Espressif/frameworks/esp-idf-v5.5' is owned by:        BUILTIN/Administrators (S-1-5-32-544)but the current user is:        DESKTOP-NUC51TC/zky (S-1-5-21-1729146741-4165152595-2160886639-1000)To add an exception for this directory, call:        git config --global --add safe.directory D:/Espressif/frameworks/esp-idf-v5.5fatal: detected dubious ownership in repository at 'D:/Espressif/frameworks/esp-idf-v5.5/components/openthread/openthread''D:/Espressif/frameworks/esp-idf-v5.5/components/openthread/openthread/.git' is owned by:        BUILTIN/Administrators (S-1-5-32-544)but the current user is:        DESKTOP-NUC51TC/zky (S-1-5-21-1729146741-4165152595-2160886639-1000)To add an exception for this directory, call:        git config --global --add safe.directory D:/Espressif/frameworks/esp-idf-v5.5/components/openthread/openthread-- Components: app_trace app_update bootloader bootloader_support bt cmock console cxx driver efuse esp-tls esp_adc esp_app_format esp_bootloader_format esp_coex esp_common esp_driver_ana_cmpr esp_driver_bitscrambler esp_driver_cam esp_driver_dac esp_driver_gpio esp_driver_gptimer esp_driver_i2c esp_driver_i2s esp_driver_isp esp_driver_jpeg esp_driver_ledc esp_driver_mcpwm esp_driver_parlio esp_driver_pcnt esp_driver_ppa esp_driver_rmt esp_driver_sdio esp_driver_sdm esp_driver_sdmmc esp_driver_sdspi esp_driver_spi esp_driver_touch_sens esp_driver_tsens esp_driver_twai esp_driver_uart esp_driver_usb_serial_jtag esp_eth esp_event esp_gdbstub esp_hid esp_http_client esp_http_server esp_https_ota esp_https_server esp_hw_support esp_lcd esp_local_ctrl esp_mm esp_netif esp_netif_stack esp_partition esp_phy esp_pm esp_psram esp_ringbuf esp_rom esp_security esp_system esp_timer esp_vfs_console esp_wifi espcoredump esptool_py fatfs freertos hal heap http_parser idf_test ieee802154 json led log lwip main mbedtls mqtt newlib nvs_flash nvs_sec_provider openthread partition_table perfmon protobuf-c protocomm pthread rt sdmmc soc spi_flash spiffs tcp_transport touch_element ulp unity usb vfs wear_levelling wifi_provisioning wpa_supplicant xtensa-- Component paths: D:/Espressif/frameworks/esp-idf-v5.5/components/app_trace D:/Espressif/frameworks/esp-idf-v5.5/components/app_update D:/Espressif/frameworks/esp-idf-v5.5/components/bootloader D:/Espressif/frameworks/esp-idf-v5.5/components/bootloader_support D:/Espressif/frameworks/esp-idf-v5.5/components/bt D:/Espressif/frameworks/esp-idf-v5.5/components/cmock D:/Espressif/frameworks/esp-idf-v5.5/components/console D:/Espressif/frameworks/esp-idf-v5.5/components/cxx D:/Espressif/frameworks/esp-idf-v5.5/components/driver D:/Espressif/frameworks/esp-idf-v5.5/components/efuse D:/Espressif/frameworks/esp-idf-v5.5/components/esp-tls D:/Espressif/frameworks/esp-idf-v5.5/components/esp_adc D:/Espressif/frameworks/esp-idf-v5.5/components/esp_app_format D:/Espressif/frameworks/esp-idf-v5.5/components/esp_bootloader_format D:/Espressif/frameworks/esp-idf-v5.5/components/esp_coex D:/Espressif/frameworks/esp-idf-v5.5/components/esp_common D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_ana_cmpr D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_bitscrambler D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_cam D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_dac D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_gpio D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_gptimer D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_i2c D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_i2s D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_isp D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_jpeg D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_ledc D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_mcpwm D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_parlio D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_pcnt D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_ppa D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_rmt D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_sdio D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_sdm D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_sdmmc D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_sdspi D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_spi D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_touch_sens D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_tsens D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_twai D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_uart D:/Espressif/frameworks/esp-idf-v5.5/components/esp_driver_usb_serial_jtag D:/Espressif/frameworks/esp-idf-v5.5/components/esp_eth D:/Espressif/frameworks/esp-idf-v5.5/components/esp_event D:/Espressif/frameworks/esp-idf-v5.5/components/esp_gdbstub D:/Espressif/frameworks/esp-idf-v5.5/components/esp_hid D:/Espressif/frameworks/esp-idf-v5.5/components/esp_http_client D:/Espressif/frameworks/esp-idf-v5.5/components/esp_http_server D:/Espressif/frameworks/esp-idf-v5.5/components/esp_https_ota D:/Espressif/frameworks/esp-idf-v5.5/components/esp_https_server D:/Espressif/frameworks/esp-idf-v5.5/components/esp_hw_support D:/Espressif/frameworks/esp-idf-v5.5/components/esp_lcd D:/Espressif/frameworks/esp-idf-v5.5/components/esp_local_ctrl D:/Espressif/frameworks/esp-idf-v5.5/components/esp_mm D:/Espressif/frameworks/esp-idf-v5.5/components/esp_netif D:/Espressif/frameworks/esp-idf-v5.5/components/esp_netif_stack D:/Espressif/frameworks/esp-idf-v5.5/components/esp_partition D:/Espressif/frameworks/esp-idf-v5.5/components/esp_phy D:/Espressif/frameworks/esp-idf-v5.5/components/esp_pm D:/Espressif/frameworks/esp-idf-v5.5/components/esp_psram D:/Espressif/frameworks/esp-idf-v5.5/components/esp_ringbuf D:/Espressif/frameworks/esp-idf-v5.5/components/esp_rom D:/Espressif/frameworks/esp-idf-v5.5/components/esp_security D:/Espressif/frameworks/esp-idf-v5.5/components/esp_system D:/Espressif/frameworks/esp-idf-v5.5/components/esp_timer D:/Espressif/frameworks/esp-idf-v5.5/components/esp_vfs_console D:/Espressif/frameworks/esp-idf-v5.5/components/esp_wifi D:/Espressif/frameworks/esp-idf-v5.5/components/espcoredump D:/Espressif/frameworks/esp-idf-v5.5/components/esptool_py D:/Espressif/frameworks/esp-idf-v5.5/components/fatfs D:/Espressif/frameworks/esp-idf-v5.5/components/freertos D:/Espressif/frameworks/esp-idf-v5.5/components/hal D:/Espressif/frameworks/esp-idf-v5.5/components/heap D:/Espressif/frameworks/esp-idf-v5.5/components/http_parser D:/Espressif/frameworks/esp-idf-v5.5/components/idf_test D:/Espressif/frameworks/esp-idf-v5.5/components/ieee802154 D:/Espressif/frameworks/esp-idf-v5.5/components/json E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/components/led D:/Espressif/frameworks/esp-idf-v5.5/components/log D:/Espressif/frameworks/esp-idf-v5.5/components/lwip E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/main D:/Espressif/frameworks/esp-idf-v5.5/components/mbedtls D:/Espressif/frameworks/esp-idf-v5.5/components/mqtt D:/Espressif/frameworks/esp-idf-v5.5/components/newlib D:/Espressif/frameworks/esp-idf-v5.5/components/nvs_flash D:/Espressif/frameworks/esp-idf-v5.5/components/nvs_sec_provider D:/Espressif/frameworks/esp-idf-v5.5/components/openthread D:/Espressif/frameworks/esp-idf-v5.5/components/partition_table D:/Espressif/frameworks/esp-idf-v5.5/components/perfmon D:/Espressif/frameworks/esp-idf-v5.5/components/protobuf-c D:/Espressif/frameworks/esp-idf-v5.5/components/protocomm D:/Espressif/frameworks/esp-idf-v5.5/components/pthread D:/Espressif/frameworks/esp-idf-v5.5/components/rt D:/Espressif/frameworks/esp-idf-v5.5/components/sdmmc D:/Espressif/frameworks/esp-idf-v5.5/components/soc D:/Espressif/frameworks/esp-idf-v5.5/components/spi_flash D:/Espressif/frameworks/esp-idf-v5.5/components/spiffs D:/Espressif/frameworks/esp-idf-v5.5/components/tcp_transport D:/Espressif/frameworks/esp-idf-v5.5/components/touch_element D:/Espressif/frameworks/esp-idf-v5.5/components/ulp D:/Espressif/frameworks/esp-idf-v5.5/components/unity D:/Espressif/frameworks/esp-idf-v5.5/components/usb D:/Espressif/frameworks/esp-idf-v5.5/components/vfs D:/Espressif/frameworks/esp-idf-v5.5/components/wear_levelling D:/Espressif/frameworks/esp-idf-v5.5/components/wifi_provisioning D:/Espressif/frameworks/esp-idf-v5.5/components/wpa_supplicant D:/Espressif/frameworks/esp-idf-v5.5/components/xtensa-- Configuring done (9.3s)-- Generating done (3.1s)-- Build files have been written to: E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/buildPS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt;</code></pre><p>build存储的是编译文件</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/749e90d1c70d4a2c8c01a77fc1cf0122.png"></p><h2>2.8 使用一个图形化的配置，这里就简单配了一下下载方式</h2><p>idf.py menuconfig</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/adc544656a3e42628f441aee2f50a515.png"></p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/624daeb4764244e0803bbbda98bb24da.png"></p><p>falsh spi mode</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/236e887874f84b36a2f41d5efd094b87.png"></p><p>QIO快一些</p><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/cbc54a86ed8d4eb0806d95911b49b8bc.png"></p><p>按ESC返回，按y保存配置</p><h1 style="background-color:transparent">三、代码编写</h1><h2>3.1 编写</h2><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/b1f3a1b833004ecbb7d1b267674a5d71.png"></p><p>EX1_led.c</p><pre><code class="language-bash">#include &lt;stdio.h&gt;#include "led.h"void app_main(void){app_led_init();while (1){app_led_toggle();}return 0;}</code></pre><p>led.c</p><pre><code class="language-bash">#include &lt;stdio.h&gt;#include "led.h"#include "freertos/FreeRTOS.h"#include "freertos/task.h"#include "driver/gpio.h"void app_led_init(void){//初始化LED1    gpio_config_t io_conf = {       .pin_bit_mask = (1ULL &lt;&lt; LED1_GPIO_PIN),       .mode = GPIO_MODE_OUTPUT,       .pull_up_en = GPIO_PULLUP_ENABLE,       .pull_down_en = GPIO_PULLDOWN_DISABLE,       .intr_type = GPIO_INTR_DISABLE      };    gpio_config(&amp;io_conf);}void app_led_toggle(void){gpio_set_level(LED1_GPIO_PIN, 1);    vTaskDelay(1000);    gpio_set_level(LED1_GPIO_PIN, 0);    vTaskDelay(1000);}</code></pre><p>led.h</p><pre><code class="language-bash">#ifndef BSP_LED_H#define BSP_LED_H#define LED1_GPIO_PIN GPIO_NUM_1void app_led_init(void);void app_led_toggle(void);#endif</code></pre><p>组件led的CMakeLists.txt，需要注册driver&nbsp;freertos组件</p><pre><code class="language-bash">idf_component_register(SRCS "led.c"                    INCLUDE_DIRS "include"REQUIRES esp_driver_gpio                    REQUIRES driver                    REQUIRES freertos)</code></pre><h2>3.2 编译：</h2><p>idf.py build</p><p>查看com口：</p><pre><code class="language-bash">Get-PnpDevice -Class Ports -Status OK |   Where-Object {$_.Name -match "COM\d+"} |   Select-Object FriendlyName, Status, InstanceId</code></pre><h2>3.3 烧写：</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py flash --helpUsage: idf.py flash [OPTIONS]  Flash the project.Options:  -C, --project-dir PATH         Project directory.  -D, --define-cache-entry TEXT  Create a cmake cache entry. This option can be used at most once either globally, or for one subcommand.  -b, --baud INTEGER             Global baud rate for all idf.py subcommands if they don't overwrite it locally.It can imply monitor baud                                 rate as well if it hasn't been defined locally. The default value can be set with the ESPBAUD environment                                 variable. This option can be used at most once either globally, or for one subcommand.  -p, --port PATH                Serial port. The default value can be set with the ESPPORT environment variable. This option can be used                                 at most once either globally, or for one subcommand.  --trace                        Enable trace-level output of flasher tool interactions. Useful when submitting bug reports.  --force                        Force write, skip security and compatibility checks. Use with caution!  --extra-args TEXT              Pass extra arguments to esptool separated by space. For more details see `esptool.py write_flash --help`.                                 For example to compress and verify data use: `idf.py flash --extra-args="--compress --verify"`. Use with                                 caution!  --help                         Show this message and exit.PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt;</code></pre><p>idf.py flash --port COM6</p><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py flash --port COM6Executing action: flashRunning ninja in directory E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\buildExecuting "ninja flash"...[1/5] C:\windows\system32\cmd.exe /C "cd /D E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\bui...on_table/partition-table.bin E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/build/EX1_led.binEX1_led.bin binary size 0x33b40 bytes. Smallest app partition is 0x100000 bytes. 0xcc4c0 bytes (80%) free.[1/1] C:\windows\system32\cmd.exe /C "cd /D E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\bui...bootloader 0x0 E:/ESP_IDF_Projects/ESP_IDF_Examples_Workspaces/EX1_led/build/bootloader/bootloader.binBootloader binary size 0x5800 bytes. 0x2800 bytes (31%) free.[4/5] C:\windows\system32\cmd.exe /C "cd /D D:\Espressif\frameworks\esp-idf-v5.5\components\esptool_py ...aces/EX1_led/build -P D:/Espressif/frameworks/esp-idf-v5.5/components/esptool_py/run_serial_tool.cmakeesptool.py --chip esp32s3 -p COM6 -b 460800 --before=default_reset --after=hard_reset write_flash --flash_mode dio --flash_freq 80m --flash_size 2MB 0x0 bootloader/bootloader.bin 0x10000 EX1_led.bin 0x8000 partition_table/partition-table.binesptool.py v4.9.1Serial port COM6Connecting....Chip is ESP32-S3 (QFN56) (revision v0.2)Features: WiFi, BLE, Embedded PSRAM 8MB (AP_3v3)Crystal is 40MHzMAC: b4:3a:45:a6:c1:68Uploading stub...Running stub...Stub running...Changing baud rate to 460800Changed.Configuring flash size...Flash will be erased from 0x00000000 to 0x00005fff...Flash will be erased from 0x00010000 to 0x00043fff...Flash will be erased from 0x00008000 to 0x00008fff...SHA digest in image updatedCompressed 22528 bytes to 14325...Writing at 0x00000000... (100 %)Wrote 22528 bytes (14325 compressed) at 0x00000000 in 0.9 seconds (effective 202.8 kbit/s)...Hash of data verified.Compressed 211776 bytes to 112496...Writing at 0x00010000... (14 %)Writing at 0x0001cb22... (28 %)Writing at 0x00022c5b... (42 %)Writing at 0x000295b7... (57 %)Writing at 0x00030043... (71 %)Writing at 0x00037eed... (85 %)Writing at 0x0003e01f... (100 %)Wrote 211776 bytes (112496 compressed) at 0x00010000 in 2.7 seconds (effective 629.1 kbit/s)...Hash of data verified.Compressed 3072 bytes to 103...Writing at 0x00008000... (100 %)Wrote 3072 bytes (103 compressed) at 0x00008000 in 0.1 seconds (effective 257.3 kbit/s)...Hash of data verified.Leaving...Hard resetting via RTS pin...Done</code></pre><h2>3.4 监视窗口：</h2><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py monitor --helpUsage: idf.py monitor [OPTIONS]  Display serial output.Options:  -C, --project-dir PATH          Project directory.  -p, --port PATH                 Serial port. The default value can be set with the ESPPORT environment variable. This option can be used                                  at most once either globally, or for one subcommand.  --print-filter, --print_filter TEXT                                  Filter monitor output. Restrictions on what to print can be specified as a series of &lt;tag&gt;:&lt;log_level&gt;                                  items where &lt;tag&gt; is the tag string and &lt;log_level&gt; is a character from the set {N, E, W, I, D, V, *}                                  referring to a level. For example, "tag1:W" matches and prints only the outputs written with                                  ESP_LOGW("tag1", ...) or at lower verbosity level, i.e. ESP_LOGE("tag1", ...). Not specifying a                                  &lt;log_level&gt; or using "*" defaults to Verbose level. Please see the IDF Monitor section of the ESP-IDF                                  documentation for a more detailed description and further examples.  -b, --monitor-baud INTEGER      Baud rate for monitor. If this option is not provided IDF_MONITOR_BAUD and MONITORBAUD environment                                  variables, global baud rate and project_description.json in build directory (generated by CMake from                                  project's sdkconfig) will be checked for default value.  -E, --encrypted                 Enable encrypted flash targets. IDF Monitor will invoke encrypted-flash and encrypted-app-flash targets                                  if this option is set. This option is set by default if IDF Monitor was invoked together with encrypted-                                  flash or encrypted-app-flash target.  --no-reset                      Disable reset on monitor startup. IDF Monitor will not reset the MCU target by toggling DTR/RTS lines on                                  startup if this option is set. This option only works if --port argument is specified.  --timestamps                    Print a time stamp in the beginning of each line.  --timestamp-format TEXT         Set the formatting of timestamps compatible with strftime(). For example, "%Y-%m-%d %H:%M:%S".  --force-color                   Always print ANSI for colors  --disable-auto-color            Disable auto coloring logs  --help                          Show this message and exit.PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt;</code></pre><p>idf.py monitor --port COM6</p><pre><code class="language-bash">PS E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led&gt; idf.py monitor --port COM6Executing action: monitorRunning idf_monitor in directory E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_ledExecuting "D:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe D:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM6 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --target esp32s3 --revision 0 E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\build\EX1_led.elf E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\EX1_led\build\bootloader\bootloader.elf --force-color -m 'D:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'D:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...--- Warning: GDB cannot open serial ports accessed as COMx--- Using \\.\COM6 instead...--- esp-idf-monitor 1.7.0 on \\.\COM6 115200--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+HESP-ROM:esp32s3-20210327Build:Mar 27 2021rst:0x1 (POWERON),boot:0x28 (SPI_FAST_FLASH_BOOT)SPIWP:0xeemode:DIO, clock div:1load:0x3fce2820,len:0x1710load:0x403c8700,len:0xec0--- 0x403c8700: _stext at ??:?load:0x403cb700,len:0x31d4entry 0x403c894c--- 0x403c894c: call_start_cpu0 at D:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25I (25) boot: ESP-IDF HEAD-HASH-NOTFOUND 2nd stage bootloaderI (25) boot: compile time Sep  1 2025 00:03:11I (25) boot: Multicore bootloaderI (26) boot: chip revision: v0.2I (29) boot: efuse block revision: v1.3I (33) qio_mode: Enabling default flash chip QIOI (37) boot.esp32s3: Boot SPI Speed : 80MHzI (41) boot.esp32s3: SPI Mode       : QIOI (44) boot.esp32s3: SPI Flash Size : 2MBI (48) boot: Enabling RNG early entropy source...I (53) boot: Partition Table:I (55) boot: ## Label            Usage          Type ST Offset   LengthI (62) boot:  0 nvs              WiFi data        01 02 00009000 00006000I (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000I (75) boot:  2 factory          factory app      00 00 00010000 00100000I (81) boot: End of partition tableI (85) esp_image: segment 0: paddr=00010020 vaddr=3c020020 size=0a560h ( 42336) mapI (98) esp_image: segment 1: paddr=0001a588 vaddr=3fc92700 size=02ad8h ( 10968) loadI (101) esp_image: segment 2: paddr=0001d068 vaddr=40374000 size=02fb0h ( 12208) loadI (109) esp_image: segment 3: paddr=00020020 vaddr=42000020 size=18480h ( 99456) mapI (129) esp_image: segment 4: paddr=000384a8 vaddr=40376fb0 size=0b648h ( 46664) loadI (138) esp_image: segment 5: paddr=00043af8 vaddr=600fe000 size=00020h (    32) loadI (144) boot: Loaded app from partition at offset 0x10000I (144) boot: Disabling RNG early entropy source...I (156) cpu_start: Multicore appI (165) cpu_start: Pro cpu start user codeI (165) cpu_start: cpu freq: 160000000 HzI (165) app_init: Application information:I (165) app_init: Project name:     EX1_ledI (169) app_init: App version:      1I (172) app_init: Compile time:     Sep  1 2025 00:02:57I (177) app_init: ELF file SHA256:  ad89efec1...I (181) app_init: ESP-IDF:          HEAD-HASH-NOTFOUNDI (186) efuse_init: Min chip rev:     v0.0I (190) efuse_init: Max chip rev:     v0.99I (194) efuse_init: Chip rev:         v0.2I (198) heap_init: Initializing. RAM available for dynamic allocation:I (204) heap_init: At 3FC95AC8 len 00053C48 (335 KiB): RAMI (209) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAMI (215) heap_init: At 3FCF0000 len 00008000 (32 KiB): DRAMI (220) heap_init: At 600FE020 len 00001FC8 (7 KiB): RTCRAMI (226) spi_flash: detected chip: genericI (229) spi_flash: flash io: qioW (232) spi_flash: Detected size(16384k) larger than the size in the binary image header(2048k). Using the size in the binary image header.I (244) sleep_gpio: Configure to isolate all GPIO pins in sleep stateI (250) sleep_gpio: Enable automatic switching of GPIO sleep configurationI (257) main_task: Started on CPU0I (277) main_task: Calling app_main()</code></pre><p>按ctl+] 退出监视</p><h1>四、实验效果</h1><p><img src="/2025/09/01/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EESP-IDF%205.5%E5%91%BD%E4%BB%A4%E8%A1%8C+Windows%E7%8E%AF%E5%A2%83%E7%9A%84ESP32S3%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/54ff80ce7c0c44b28d7b969f506cbb2c.gif"></p><p>注：</p><p>只要你有学习过这种类Linux命令行的开发模式和单片机基础，就不用怕这种开发方式，其他的就是看api文档和原理图，一步一步来就行；vscode的ESP-IDF插件也可以使用，最重要的是项目的实现，不光是工具的使用熟练就可以了。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="GPIO &amp; RTC GPIO - ESP32 - — ESP-IDF 编程指南 v5.5 文档" href="https://docs.espressif.com/projects/esp-idf/zh_CN/stable/esp32/api-reference/peripherals/gpio.html" title="GPIO &amp; RTC GPIO - ESP32 - — ESP-IDF 编程指南 v5.5 文档">GPIO &amp; RTC GPIO - ESP32 - &mdash; ESP-IDF 编程指南 v5.5 文档</a></p>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【GD32】基于立创·GD32VW553开发板+GD32 Embedded Builder开发环境的初步使用</title>
    <link href="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、安装GD32 Embedded Builder开发环境</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="兆易创新GigaDevice-资料下载兆易创新GD32 MCU" href="https://gd32mcu.com/cn/download/7?kw=GD32VW5" title="兆易创新GigaDevice-资料下载兆易创新GD32 MCU">兆易创新GigaDevice-资料下载兆易创新GD32 MCU</a></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/088084b3225f438cba46efb69a280717.png"></p><p></p><h1>二、GD32 Embedded Builder界面汉化</h1><p>注意：该软件需要安装JDK</p><h2>2.1 Help --&gt; Install New Software</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/fb78d348b6ca44b28a81da3549cd843d.png"></p><h2>2.2 点击Add</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/fb293225a1164cc4a9c0ef9aacf922d1.png"></p><h2>2.3 输入如下地址</h2><pre><code>https://mirrors.ustc.edu.cn/eclipse/technology/babel/update-site/R0.20.0/2022-12/</code></pre><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/73f7bdc53a23447cabc69593d370e747.png"></p><h2 style="background-color:transparent">2.4 找到简体中文包进行下载</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5f30ee2218694fe1873fae988e5b5c46.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/2f0001d60c9e4e4ebc427213bc58e094.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/1c510164f5a7450f95ef2ff5d2855278.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/b347417cf2a84ad4b630e8d93ab0cea3.png"></p><h2>2.5 后续点击相信，最后重启</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/64017866d68a4e7882619ff6d6a63330.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/0f5f83651b7c4952bd0f92dd09547f93.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/be172bfff7b546a38dc0801561321454.png"></p><h1>三、基于立创&middot;GD32VW553开发板的点灯代码</h1><h2>3.1 点击新建项目</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/8b4f1b9b00cc49d6932e15f4312df421.png"></p><h2>3.2 选C</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/93739a65f8644a5390dbdbcc76b57004.png"></p><h2>3.3 该芯片架构是RISC-V</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/b8950c63482549b1a2c2f052df44178f.png"></p><h2>3.4 选芯片HMQ7，笔者的MCU是这样的</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/1c33b32809854eada69d140145938793.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a1893d9e83b7460783d1a516bbb99e7e.png"></p><h2 style="background-color:transparent">3.5 这里的编译链工具看自己选择哪种</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/220898e05580454d91d15a3488454f39.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c73c39456c464cc5885706fef9861c57.png"></p><h2>3.6 led需要高电平点亮，同时注释掉所有示例代码</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/d153e42f4bad4e86ad4d196737b184d1.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4450e516224b4a1eaad38af6e20490a4.png"></p><p>以及中断的示例代码</p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/23dce238563b4243a0f11dda972b26e8.png"></p><h2>3.7 写点灯代码，点击左上角锤子按钮编译（如果你有使用过STM32CubeIDE，那就很轻车熟路了。）</h2><pre><code>/*!    \file    main.c    \brief   led spark with systick, USART print and key example    \version 2025-01-16, V1.4.0, firmware for GD32VW55x*//*    Copyright (c) 2025, GigaDevice Semiconductor Inc.    Redistribution and use in source and binary forms, with or without modification,are permitted provided that the following conditions are met:    1. Redistributions of source code must retain the above copyright notice, this       list of conditions and the following disclaimer.    2. Redistributions in binary form must reproduce the above copyright notice,       this list of conditions and the following disclaimer in the documentation       and/or other materials provided with the distribution.    3. Neither the name of the copyright holder nor the names of its contributors       may be used to endorse or promote products derived from this software without       specific prior written permission.    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIEDWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUTNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, ORPROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITYOF SUCH DAMAGE.*/#include "gd32vw55x.h"#include "systick.h"#include &lt;stdio.h&gt;#include "main.h"#include "gd32vw553h_eval.h"int bsp_led_init(void){//使能时钟rcu_periph_clock_enable(RCU_GPIOC);//设置输出模式 一般输出是浮空 不需要上下拉除非特殊情况gpio_mode_set(GPIOC, GPIO_MODE_OUTPUT, GPIO_PUPD_NONE, GPIO_PIN_13);//输出模式下的输出能力设置推挽输出gpio_output_options_set(GPIOC, GPIO_OTYPE_PP, GPIO_OSPEED_25MHZ, GPIO_PIN_13);//初始化置高电平 使其熄灭gpio_bit_write(GPIOC, GPIO_PIN_13, RESET);}int bsp_led_toggle(void){gpio_bit_write(GPIOC, GPIO_PIN_13, SET);delay_1ms(1000);gpio_bit_write(GPIOC, GPIO_PIN_13, RESET);delay_1ms(1000);}int main(void){//一定要配置时钟systick_config();//这里的中断优先级分组可要可不要eclic_priority_group_set(ECLIC_PRIGROUP_LEVEL3_PRIO1);//led初始化bsp_led_init();while(1){bsp_led_toggle();}return 0;}///*!//    \brief      toggle the led every 500ms//    \param[in]  none//    \param[out] none//    \retval     none//*///void led_spark(void)//{//    static __IO uint32_t timingdelaylocal = 0U;////    if(timingdelaylocal) {////        if(timingdelaylocal &lt; 500U) {//            gd_eval_led_on(LED2);//            gd_eval_led_on(LED3);//        } else {//            gd_eval_led_off(LED2);//            gd_eval_led_off(LED3);//        }////        timingdelaylocal--;//    } else {//        timingdelaylocal = 1000U;//    }//}/////*!//    \brief      main function//    \param[in]  none//    \param[out] none//    \retval     none//*///int main(void)//{//#ifdef __FIRMWARE_VERSION_DEFINE//    uint32_t fw_ver = 0;//#endif /* __FIRMWARE_VERSION_DEFINE */////    /* configure systick *///    systick_config();//    eclic_priority_group_set(ECLIC_PRIGROUP_LEVEL3_PRIO1);//    /* initilize the LEDs, USART and key *///    gd_eval_led_init(LED1);//    gd_eval_led_init(LED2);//    gd_eval_led_init(LED3);//    gd_eval_com_init(EVAL_COM0);//    gd_eval_key_init(KEY_TAMPER_WAKEUP, KEY_MODE_GPIO);////#ifdef __FIRMWARE_VERSION_DEFINE//    fw_ver = gd32vw55x_firmware_version_get();//    /* print firmware version *///    printf("\r\nGD32VW55X series firmware version: V%d.%d.%d", (uint8_t)(fw_ver &gt;&gt; 24), (uint8_t)(fw_ver &gt;&gt; 16), (uint8_t)(fw_ver &gt;&gt; 8));//#endif /* __FIRMWARE_VERSION_DEFINE */////    /* print out the clock frequency of system, AHB, APB1 and APB2 *///    printf("\r\nCK_SYS is %d\r\n", rcu_clock_freq_get(CK_SYS));//    printf("\r\nCK_AHB is %d\r\n", rcu_clock_freq_get(CK_AHB));//    printf("\r\nCK_APB1 is %d\r\n", rcu_clock_freq_get(CK_APB1));//    printf("\r\nCK_APB2 is %d\r\n", rcu_clock_freq_get(CK_APB2));////    while(1) {//        if(RESET == gd_eval_key_state_get(KEY_TAMPER_WAKEUP)) {//            delay_1ms(50);//            if(SET == gd_eval_key_state_get(KEY_TAMPER_WAKEUP)) {//                gd_eval_led_toggle(LED1);//            }//        }//    }//}</code></pre><h2>3.8 烧录程序，长按boot的同时短按reset，然后松开，点击工具的Connect<br />串口烧录方式下载烧录工具: GD32AllInOneProgrammer</h2><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/92fb8b2a66c042dab3a502c1a1c07efe.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4199ec35df3f45ebb55c1c4ab65678ad.png"></p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/cc7254518019441081975a8ff93be995.png"></p><p>选了bin文件就点DOWNLOAD</p><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ce175b083e9d47feb6dfd9885876c8be.png"></p><h1>四、实验效果</h1><p><img src="/2025/08/31/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8E%E7%AB%8B%E5%88%9B%C2%B7GD32VW553%E5%BC%80%E5%8F%91%E6%9D%BF+GD32%20Embedded%20Builder%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/11410a5fb1304c2283d08f73a72576df.gif"></p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机 嵌入式硬件 GD32VM533</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【W800】基于W800的PWM实现</title>
    <link href="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/"/>
    <url>/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;联盛德的 W800 是一款优势显著的安全 IoT Wi-Fi / 蓝牙双模 SoC 芯片。它采用 40 纳米工艺，QFN32 封装，尺寸仅 4mm x 4mm ，十分小巧。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在性能方面，集成 32 位 XT804 处理器，最高工作频率达 240MHz，内置 DSP、浮点运算单元，可满足高算例音视频算法等应用需求。其 Wi-Fi / 蓝牙射频性能在行业中颇具优势，支持 2.4G IEEE802.11b/g/n Wi-Fi 通讯协议，涵盖 Wi-Fi WMM/WMM-PS/WPA/WPA2/WPS 等，支持 20/40M 带宽工作模式，传输速率最高到 150Mbps ，还支持 STA、AP、APSTA 功能；蓝牙方面，支持 BT/BLE 双模工作模式及 BT/BLE4.2 协议 ，集成蓝牙基带处理器 / 协议处理器，支持蓝牙配网。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;W800 的安全特性突出，内置 TEE 安全引擎，代码可区分安全世界与非安全世界，集成 SASC/TIPC，能对内存及内部模块 / 接口配置安全属性，防止非安全代码访问；启用固件签名机制，实现安全 Boot / 升级，具备固件加密功能，且固件加密密钥使用非对称算法分发，增强密钥安全性，还集成了 RC4 256、AES 128 等硬件加解密模块。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;芯片内部资源丰富，内置 2MB Flash 与 288KB RAM ，支持大容量 PSRAM 扩展，集成 5 路高速 UART 接口（最高支持 2Mbps）、2 路 16 比特 ADC（最高采样率 1KHz）、1 个 I2C 控制器、GPIO 控制器、5 路 PWM 接口、1 路 Duplex I2S 控制器、7816（SIM 卡）接口等多种数字接口。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于这些特性，W800 适用于智能家电、智能家居、智能玩具、无线音视频、工业控制、医疗监护等广泛的物联网领域，能够为相关产品提供可靠的无线连接、高性能运算以及安全保障 。</p><h1>二、开发环境准备</h1><p>系统：win11</p><p>开发板：W800_Arduino 开发板</p><p>SDK版本：wm_iot_sdk_v2.4-rc</p><p>IDE：VSCode</p><h1>三、W800的PWM资源</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="技术资料" href="https://www.winnermicro.com/upload/1/editor/1614934550940.pdf" title="技术资料">技术资料</a></p><h2>3.1 文档资料&nbsp;</h2><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/f727fb31fff244a0a0d7f4f6ea877b6c.png"></p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/3dc42f4f0a9f43259afa83f5d09c6a5b.png"></p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/871b758c282743d2a1ef7800b6d0b89e.png"></p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/4dcbb1926ff14b4ab0a5830bc6c3c64c.png"></p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/df3423fa905840f297c00615d610f805.png"></p><h2>3.2 SDK代码部分</h2><pre><code class="language-cpp">/** * @brief     PWM work mode supported by W800 */enum wm_pwm_mode {    WM_PWM_OUT_INDPT,   /**&lt; independent output mode */    WM_PWM_OUT_2SYNC,   /**&lt; two channel sync output mode */    WM_PWM_OUT_ALLSYNC, /**&lt; all channel sync output mode */    WM_PWM_OUT_MC,      /**&lt; complement output mode */    WM_PWM_OUT_BRAKE,   /**&lt; brake output mode */    WM_PWM_IN_CAP,      /**&lt; capture for input mode */    WM_PWM_MODE_MAX};</code></pre><p>这段代码定义了联盛德 W800 芯片支持的 PWM（脉冲宽度调制）工作模式枚举类型<code>enum wm_pwm_mode</code>，每种模式对应不同的功能场景：</p><ul><li><p><code>WM_PWM_OUT_INDPT</code>：独立输出模式，各 PWM 通道独立工作，输出波形参数（频率、占空比等）可单独设置，适用于需要独立控制的场景（如 RGB LED 调色）。</p></li><li><p><code>WM_PWM_OUT_2SYNC</code>：双通道同步输出模式，两组 PWM 通道同步工作，保持相同的频率和相位，适用于需要对称控制的设备（如电机正反转驱动）。</p></li><li><p><code>WM_PWM_OUT_ALLSYNC</code>：全通道同步模式，所有 PWM 通道同步输出，波形完全一致，适合需要协同动作的多设备控制（如多路 LED 同步调光）。</p></li><li><p><code>WM_PWM_OUT_MC</code>：互补输出模式，通道输出互为反相的 PWM 波形（一通道高电平时另一通道低电平），常用于 H 桥电路驱动（如直流电机调速）。</p></li><li><p><code>WM_PWM_OUT_BRAKE</code>：制动输出模式，可快速将输出置于特定电平（如低电平），用于紧急停止场景（如电机刹车）。</p></li><li><p><code>WM_PWM_IN_CAP</code>：输入捕获模式，此时 PWM 模块作为输入设备，用于测量外部信号的频率、占空比等参数（如脉冲计数、传感器信号检测）。</p></li><li><p><code>WM_PWM_MODE_MAX</code>：枚举边界值，用于模式合法性校验（如判断输入模式是否超出范围）。</p></li></ul><p>这些模式覆盖了输出控制、同步协同、输入检测等场景，体现了 W800 芯片 PWM 模块的灵活性，可满足物联网设备中电机控制、灯光调节、信号测量等多种需求。</p><h1>四、PWM的API接口</h1><p>&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="PWM API 参考 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/api_reference/driver/pwm.html#c.WM_DRV_PWM_MUTEX_TIMEOUT" title="PWM API 参考 — WinnerMicro 在线文档">PWM API 参考 &mdash; WinnerMicro 在线文档</a></p><pre><code class="language-cpp">wm_device_t *wm_drv_pwm_init(const char *name)</code></pre><p>函数声明：<code>wm_device_t *wm_drv_pwm_init(const char *name)</code></p><h3>功能翻译</h3><p>初始化具有指定名称的 PWM 驱动及其相关参数。</p><h3>备注说明</h3><p>该函数通过提供的名称和参数初始化 PWM 驱动，同时为驱动上下文分配内存并初始化必要的数据结构。函数返回一个指向已初始化的 PWM 驱动设备的指针，可用于后续操作。</p><h3>参数说明</h3><ul><li><code>name</code>&nbsp;&ndash; [输入参数] PWM 驱动设备的名称（字符串类型）</li></ul><h3>返回值说明</h3><ul><li>成功时：返回指向已初始化的 PWM 驱动设备的指针（<code>wm_device_t *</code>类型）</li><li>失败时：返回<code>NULL</code></li></ul><h3>补充解析</h3><p>这是 W800 芯片 PWM 驱动的初始化函数，作用是：</p><ol><li>根据设备名称（如 &quot;pwm0&quot;）找到对应的硬件 PWM 模块</li><li>完成底层硬件配置和内存资源分配</li><li>返回可用于后续操作的设备句柄（类似 &quot;设备 ID&quot;）</li></ol><p>后续调用<code>wm_drv_pwm_channel_start</code>等函数时，需要将此返回的指针作为第一个参数传入，以指定操作哪个 PWM 设备。例如：</p><pre><code>// 初始化名为"pwm0"的PWM设备wm_device_t *pwm_dev = wm_drv_pwm_init("pwm0");if (pwm_dev == NULL) {    // 初始化失败处理}</code></pre><hr /><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="PWM API 参考 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/2.4-rc/api_reference/driver/pwm.html" title="PWM API 参考 — WinnerMicro 在线文档">PWM API 参考 &mdash; WinnerMicro 在线文档</a></p><p>API可以在写代码时编写边了解，这里就不用过多文字的描述了，直接上示例代码。</p><hr /><h1 style="background-color:transparent">五、正式代码环节</h1><p>前情提要：</p><p>WM的插件以及配置，看官网</p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/cb5dc953e72f46bd97a117473b41604f.png"></p><p><img src="/2025/08/30/%E3%80%90SoC%E3%80%91%E3%80%90W800%E3%80%91%E5%9F%BA%E4%BA%8EW800%E7%9A%84PWM%E5%AE%9E%E7%8E%B0/d93bd91a83e94fc7adb9c2237a5a9298.png"></p><h2>5.1 初始化</h2><pre><code class="hljs">void pwm_init(void){    // 配置GPIOB_1为PWM功能    int ret = wm_drv_gpio_iomux_func_sel(GPIOB_1_NUM, PWM_FUNC_SEL);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("GPIOB_1 set PWM func failed!");        return;    }        pwm_device = wm_drv_pwm_init("pwm");    // 配置PWM通道（假设GPIOB_1对应PWM通道0）    wm_drv_pwm_channel_cfg_t pwm_cfg = {        .channel = WM_PWM_CHANNEL_0,  // 对应GPIOB_1的PWM通道        .mode = WM_PWM_OUT_INDPT,     // 独立输出模式        .clkdiv = WM_PWM_CLKDIV_DEFAULT,  // 时钟分频        .period_cycle = 255-1,         // 周期（根据需求调整）        .duty_cycle = 0,            // 占空比（根据需求调整）        .autoload = true              // 自动加载参数    };    // 初始化PWM通道    ret = wm_drv_pwm_channel_init(pwm_device, &amp;pwm_cfg);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("PWM channel init failed!");        return;    }    // 启动PWM输出    ret = wm_drv_pwm_channels_start(pwm_device);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("PWM start failed!");        return;    }}</code></pre><h2>5.2 创建任务test</h2><pre><code class="hljs">void test_task(void *parameters){    int duty=0;    pwm_init();    while (1) {                if(duty &gt; 255) {            duty = 0;  // 重置占空比        }        wm_drv_pwm_set_channel_duty(pwm_device, WM_PWM_CHANNEL_0, duty++);        vTaskDelay(pdMS_TO_TICKS(100));  // 每秒输出一次日志    }    vTaskDelete(NULL);}</code></pre><h2>5.3 全代码</h2><pre><code class="hljs">#define LOG_TAG "test"#include "wm_log.h"#include "freertos/FreeRTOS.h"#include "freertos/task.h"#include "wm_drv_gpio.h"#include "wm_drv_pwm.h"#define GPIOB_1_NUM WM_GPIO_NUM_17  /*PB1*/#define PWM_FUNC_SEL WM_GPIO_IOMUX_FUN2  // 替换为PWM对应的复用功能序号 wm_device_t *pwm_device = NULL;void pwm_init(void){    // 配置GPIOB_1为PWM功能    int ret = wm_drv_gpio_iomux_func_sel(GPIOB_1_NUM, PWM_FUNC_SEL);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("GPIOB_1 set PWM func failed!");        return;    }    // uint8_t ret;    // wm_drv_pwm_channel_cfg_t cfg = { 0 };        pwm_device = wm_drv_pwm_init("pwm");    // 配置PWM通道（假设GPIOB_1对应PWM通道0）    wm_drv_pwm_channel_cfg_t pwm_cfg = {        .channel = WM_PWM_CHANNEL_0,  // 对应GPIOB_1的PWM通道        .mode = WM_PWM_OUT_INDPT,     // 独立输出模式        .clkdiv = WM_PWM_CLKDIV_DEFAULT,  // 时钟分频        .period_cycle = 255-1,         // 周期（根据需求调整）        .duty_cycle = 0,            // 占空比（根据需求调整）        .autoload = true              // 自动加载参数    };    // 初始化PWM通道    ret = wm_drv_pwm_channel_init(pwm_device, &amp;pwm_cfg);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("PWM channel init failed!");        return;    }    // 启动PWM输出    ret = wm_drv_pwm_channels_start(pwm_device);    if (ret != WM_ERR_SUCCESS) {        wm_log_error("PWM start failed!");        return;    }}void test_task(void *parameters){    int duty=0;    pwm_init();    while (1) {                if(duty &gt; 255) {            duty = 0;  // 重置占空比        }        wm_drv_pwm_set_channel_duty(pwm_device, WM_PWM_CHANNEL_0, duty++);        vTaskDelay(pdMS_TO_TICKS(100));  // 每秒输出一次日志    }    vTaskDelete(NULL);}int main(void){    xTaskCreate(test_task, "test", 512, NULL, 5, NULL);    return 0;}</code></pre>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SoC W800</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【MingW】MingW仓库地址</title>
    <link href="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90MingW%E3%80%91MingW%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80/"/>
    <url>/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90MingW%E3%80%91MingW%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img src="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90MingW%E3%80%91MingW%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80/35b8113c9c654dffaa816bd8719d4db1.png"></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries" href="https://github.com/niXman/mingw-builds-binaries/releases/tag/15.2.0-rt_v13-rev0" title="Release Release of 15.2.0-rt_v13-rev0 · niXman/mingw-builds-binaries">Release Release of 15.2.0-rt_v13-rev0 &middot; niXman/mingw-builds-binaries</a></p>]]></content>
    
    
    <categories>
      
      <category>其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mingw</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【随笔】【Debian】【ArchLinux】基于Debian和ArchLinux的ISO镜像和虚拟机VM的系统镜像获取安装</title>
    <link href="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/"/>
    <url>/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、Debian</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Debian -- Debian 全球镜像站" href="https://www.debian.org/mirror/list.zh-cn.html" title="Debian -- Debian 全球镜像站">Debian -- Debian 全球镜像站</a></p><hr /><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="阿里巴巴开源镜像站-OPSX镜像站-阿里云开发者社区" href="https://developer.aliyun.com/mirror/" title="阿里巴巴开源镜像站-OPSX镜像站-阿里云开发者社区">阿里巴巴开源镜像站-OPSX镜像站-阿里云开发者社区</a></p><hr /><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="debian-cd-current-amd64-iso-cd安装包下载_开源镜像站-阿里云" href="https://mirrors.aliyun.com/debian-cd/current/amd64/iso-cd/?spm=a2c6h.13651104.d-5140.2.1c103ad1ErdGzY" title="debian-cd-current-amd64-iso-cd安装包下载_开源镜像站-阿里云">debian-cd-current-amd64-iso-cd安装包下载_开源镜像站-阿里云</a></p><hr /><p>清华源：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="清华大学开源软件镜像站 | Tsinghua Open Source Mirror" href="https://mirrors.tuna.tsinghua.edu.cn/" title="清华大学开源软件镜像站 | Tsinghua Open Source Mirror">清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p><p><img src="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/4c837d64e8b748159ee440bd50405c56.jpeg"></p><hr /><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="USTC Open Source Software Mirror" href="https://mirrors.ustc.edu.cn/" title="USTC Open Source Software Mirror">USTC Open Source Software Mirror</a></p><hr /><h1>二、ArchLinux</h1><p>欢迎加入ArchLinux神教。</p><p><img src="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/5926ecd16286481ebcfb9e56d80be0d2.png"></p><p>补个档：右键桌面，选择桌面和壁纸选项，选鼠标，在X前的右键设置里把控制台命令选项选上，就可以右键打开终端了。</p><p><img src="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/1f8f4b90a4894288b3ccc14a6923ceba.png"></p><p>参考链接（如有侵权，请联系删除）：</p><p>博客地址：http://blog.ccyg.studio/article/4f6cfa0a-ad98-4adb-af08-79a8a5b1d674/</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="在 VMWare 虚拟机中安装 Archlinux_哔哩哔哩_bilibili" href="https://www.bilibili.com/video/BV1Pi4y1K7DS/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=77379e487a8ecc7d4f9e65b8d9cd422d" title="在 VMWare 虚拟机中安装 Archlinux_哔哩哔哩_bilibili">在 VMWare 虚拟机中安装 Archlinux_哔哩哔哩_bilibili</a></p><p>注：ArchLinux的安装如果只是安装命令行，还轻松一些（但是也轻松不到那里去），而且系统的一些初始系统配置是非常非常的有一定的麻烦程度；命令行形式配置完成，如果还要安装桌面（建议轻量化的桌面系统，比如：KDE等），就要安装显卡驱动和桌面系统。</p><hr /><p>补档：</p><p>如果在配置安装桌面后，在地区和语言选项的语言设置里的最下面的简体中文选项有乱码，请参考下面的亚洲中文字体安装过程，在有字体后就恢复造正常了。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Arch (KDE Plasma 桌面 + Wine 界面)中文化_arch中文字体-CSDN博客" href="https://blog.csdn.net/qingtian805/article/details/142145556" title="Arch (KDE Plasma 桌面 + Wine 界面)中文化_arch中文字体-CSDN博客">Arch (KDE Plasma 桌面 + Wine 界面)中文化_arch中文字体-CSDN博客</a></p><p><img src="/2025/08/30/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E3%80%90Debian%E3%80%91%E3%80%90ArchLinux%E3%80%91%E5%9F%BA%E4%BA%8EDebian%E5%92%8CArchLinux%E7%9A%84ISO%E9%95%9C%E5%83%8F%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BAVM%E7%9A%84%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85/13947bf314ac4b81a5e6e9bd83e9bdf4.png"></p><hr /><p></p>]]></content>
    
    
    <categories>
      
      <category>Linux学习专栏 其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>debian 运维 Archlinux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【Keil】对于Keil系列软件的下载方式推荐</title>
    <link href="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/"/>
    <url>/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/bc5b0c23d37e4989864a78911394e235.png"></p><p>Keil 历史版本的下载方法有以下几种方式：</p><ul><li><strong>官网正规步骤下载</strong>：Keil 官网为不同产品提供了相应的历史版本下载地址，具体如下：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;Keil MDK：&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;ARM Product Updates&quot; href=&quot;https://www.keil.com/update/rvmdk.asp&quot; title=&quot;ARM Product Updates&quot;&gt;ARM Product Updates&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Keil C51：&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;C51 Product Updates&quot; href=&quot;https://www.keil.com/update/c51.asp&quot; title=&quot;C51 Product Updates&quot;&gt;C51 Product Updates&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Keil C166：&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;C166 Product Updates&quot; href=&quot;https://www.keil.com/update/c166.asp&quot; title=&quot;C166 Product Updates&quot;&gt;C166 Product Updates&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Keil C251：&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;C251 Product Updates&quot; href=&quot;https://www.keil.com/update/c251.asp&quot; title=&quot;C251 Product Updates&quot;&gt;C251 Product Updates&lt;/a&gt;&lt;br /&gt;使用这种方法需要输入有效的产品序列号（PSN）或许可证代码（LIC）才能访问所有可用的产品版本。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;通过规律的下载链接&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;Keil MDK 可通过微软 Azure Blob Storage 下载服务进行下载，链接格式为&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;https://armkeil.blob.core.windows.net/eval/MDK536.EXE&quot; href=&quot;https://armkeil.blob.core.windows.net/eval/MDK536.EXE&quot; title=&quot;https://armkeil.blob.core.windows.net/eval/MDK536.EXE&quot;&gt;https://armkeil.blob.core.windows.net/eval/MDK536.EXE&lt;/a&gt;，将其中的 &amp;ldquo;536&amp;rdquo; 替换为所需的版本号即可，如 MDK537.EXE 对应 MDK v5.37 版本。&lt;/li&gt;&lt;li&gt;Keil C51 有规律的下载地址为&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7&quot; data-link-title=&quot;https://www.keil.com/files/eval/c51v960a.exe&quot; href=&quot;https://www.keil.com/files/eval/c51v960a.exe&quot; title=&quot;https://www.keil.com/files/eval/c51v960a.exe&quot;&gt;https://www.keil.com/files/eval/c51v960a.exe&lt;/a&gt;，可将 &amp;ldquo;c51v960a&amp;rdquo; 替换为相应的版本号。不过，这种方法通常只能下载最新一版的历史版本，比如可能只能下载 C51 V9 版本，V8 版本则无法通过此方式下载。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;第三方下载链接&lt;/strong&gt;：一些正规的第三方，如安富莱、正点原子、野火等开发板厂家，也提供 Keil 历史版本的下载软件，用户可以通过这些厂家的官方网站或相关技术论坛获取下载链接。&lt;/li&gt;</code></pre></ul><h1><strong>二、官网正规步骤下载</strong></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Keil 官网提供有 Keil 历史版本下载的地址。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Keil Product Downloads" href="https://www.keil.com/download/product/" title="Keil Product Downloads">Keil Product Downloads</a></p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/bf14d718358d4960b0eca5e44f3cbf34.png"></p><h2><strong>2.1 Keil MDK官网历史版本地址</strong></h2><pre><code>https://www.keil.com/update/rvmdk.asp</code></pre><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/faadc069ac614651b8528ab554080177.png"></p><h2><strong>2.2 Keil C51</strong><strong>官网历史版本地址</strong></h2><pre><code>https://www.keil.com/update/c51.asp</code></pre><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/c7e9a0ea7e1d456fb96eab81fabd1b45.png"></p><h2><strong>&nbsp;2.3 Keil C251</strong><strong>官网历史版本地址</strong></h2><pre><code>https://www.keil.com/update/c251.asp</code></pre><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/1eab16d53ce84cf380677d3c03e1d788.png"></p><h2><strong>2.4 Keil C166</strong><strong>官网历史版本地址</strong></h2><pre><code>https://www.keil.com/update/c166.asp</code></pre><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/1c5b3d36e1fc4f99b967851939310f81.png"></p><h2><strong>2.5 官网历史版本下载说明</strong></h2><p>这种方法需要提供 LIC or PSN：</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/3f7752a04799415fbc3c9c1584c0e48b.png"></p><p>以及需要填写大量详细信息。</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/1e97effb1d434cd08fc9dffcc2aef088.png"></p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/f4f6ab4c7b58407287118f449355ae8e.png"></p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/8c68ec0d6ae04d9aa59193e67770a02b.png"></p><p>因此，不推荐用这种方法。</p><h1><strong>三、通过规律的下载链接</strong></h1><h2><strong>3.1 Keil MDK有规律的下载地址</strong></h2><pre><code>https://armkeil.blob.core.windows.net/eval/MDK***.EXE</code></pre><p>注：必须是.EXE。</p><p>比如：</p><p>https://armkeil.blob.core.windows.net/eval/MDK536.EXE</p><p>https://armkeil.blob.core.windows.net/eval/MDK528.EXE</p><p>https://armkeil.blob.core.windows.net/eval/MDK515.EXE</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/cc7b1794ddeb4210a7ac7b5003318ffb.png"></p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/1475b33721154392ada68cfba0533efd.png"></p><p>注意：如果下载速度过慢，可能需要魔法的帮助，或者使用迅雷软件通过这些网址下载。</p><h2><strong>3.2 Keil C51有规律的下载地址</strong></h2><pre><code>https://www.keil.com//files/eval/c51v***.exe</code></pre><p>比如：</p><p>https://www.keil.com//files/eval/c51v959.exe</p><p>https://www.keil.com//files/eval/c51v954.exe</p><p>https://www.keil.com//files/eval/c51v902.exe</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/ca5dadee9e2148ccafac9bf0b943d799.png"></p><h2><strong>&nbsp;3.3 Keil C166有规律的下载地址</strong></h2><pre><code>https://www.keil.com//files/eval/c166v***.exe</code></pre><p>比如：</p><p>https://www.keil.com//files/eval/c166v758.exe</p><p>https://www.keil.com//files/eval/c166v753.exe</p><p>https://www.keil.com//files/eval/c166v704.exe</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/e613d55d5c6b4e03b362ae9c86d03657.png"></p><h2><strong>3.4 Keil C251有规律的下载地址</strong></h2><pre><code>https://www.keil.com//files/eval/c251v***.exe</code></pre><p>比如：</p><p>https://www.keil.com//files/eval/c251v961.exe</p><p>https://www.keil.com//files/eval/c251v956.exe</p><p>https://www.keil.com//files/eval/c251v508.exe</p><p><img src="/2025/08/30/%E3%80%90MCU%E3%80%91%E3%80%90Keil%E3%80%91%E5%AF%B9%E4%BA%8EKeil%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90/cac9863b373e4231b10ca205e88313c7.png"></p><p><span style="background-color:#ffd900"><span style="color:#fe2c24">注意：</span>我这里只是举例子随便写的版本号，这种方式对于有些版本不支持下载，但是可以多尝试几次其他的版本号。</span></p><h1><strong>四、第三方下载链接</strong></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三方下载链接就是非官网下载，百度，谷歌可以出来很多，但要注意有些第三方的软件可能经过优化处理。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;推荐正规的第三方，比如安富莱、正点原子、野火等开发板厂家都提供 Keil 历史版本的下载软件。</p><p>（1）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="撤销了MDK下载链接，仅提供Pack - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!" href="https://forum.anfulai.cn/forum.php?mod=viewthread&amp;tid=96992" title="撤销了MDK下载链接，仅提供Pack - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!">撤销了MDK下载链接，仅提供Pack - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!</a></p><p>（2）<a data-link-desc="文章浏览阅读2w次，点赞57次，收藏216次。KEIL的PACK下载资源分享..._各种pack软件包镜像下载" data-link-icon="https://g.csdnimg.cn/static/logo/favicon32.ico" data-link-title="KEIL各版本镜像和STM的KeilPACK包下载_各种pack软件包镜像下载-CSDN博客" href="https://blog.csdn.net/jgp886585/article/details/113343791?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=113343791&amp;sharerefer=PC&amp;sharesource=qq_73648789&amp;sharefrom=from_link" title="KEIL各版本镜像和STM的KeilPACK包下载_各种pack软件包镜像下载-CSDN博客">KEIL各版本镜像和STM的KeilPACK包下载_各种pack软件包镜像下载-CSDN博客</a></p><p>（3）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="【安富莱】开发板工具盘资源汇总下载帖 V1.2 (2025-02-28) - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!" href="https://forum.anfulai.cn/forum.php?mod=viewthread&amp;tid=100027&amp;fromuid=58" title="【安富莱】开发板工具盘资源汇总下载帖 V1.2 (2025-02-28) - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!">【安富莱】开发板工具盘资源汇总下载帖 V1.2 (2025-02-28) - 开发环境 - 硬汉嵌入式论坛 - Powered by Discuz!</a></p><p><strong>第三方下载链接说明：</strong>第三方下载可能存在：不全面等问题</p><h1>五、基于Keil环境的芯片的支持包链接</h1><h2>5.1 STM32</h2><p>（1）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="阿姆·凯尔 |设备" href="https://www.keil.arm.com/devices/" title="阿姆·凯尔 |设备">阿姆&middot;凯尔 |设备</a></p><p>（2）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="【PACK】Keil MDK5.38 STM32全系列PACK包 网盘下载汇总(持续更新...) - STM32讨论区 - 野火电子论坛 - Powered by Discuz!" href="https://www.firebbs.cn/forum.php?mod=viewthread&amp;tid=27263" title="【PACK】Keil MDK5.38 STM32全系列PACK包 网盘下载汇总(持续更新...) - STM32讨论区 - 野火电子论坛 - Powered by Discuz!">【PACK】Keil MDK5.38 STM32全系列PACK包 网盘下载汇总(持续更新...) - STM32讨论区 - 野火电子论坛 - Powered by Discuz!</a></p><p>（3）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Keil MDK STM32全系列 PACK包 下载地址汇总（持续更新...）转载_mdk 离线dfp 下载-CSDN博客" href="https://blog.csdn.net/nicholas_duan/article/details/100515251" title="Keil MDK STM32全系列 PACK包 下载地址汇总（持续更新...）转载_mdk 离线dfp 下载-CSDN博客">Keil MDK STM32全系列 PACK包 下载地址汇总（持续更新...）转载_mdk 离线dfp 下载-CSDN博客</a></p><h2>5.2 GD32</h2><p>（1）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="兆易创新GigaDevice-资料下载兆易创新GD32 MCU" href="https://www.gd32mcu.com/cn/download/7" title="兆易创新GigaDevice-资料下载兆易创新GD32 MCU">兆易创新GigaDevice-资料下载兆易创新GD32 MCU</a></p><p>（2）<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Arm Keil | Devices" href="https://www.keil.arm.com/devices/?q=GD&amp;vendor-search=" title="Arm Keil | Devices">Arm Keil | Devices</a></p><hr /><p>等待后续更新------</p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏 其他-学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机 stm32 嵌入式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】对于github的本地ssh客户端的配置与分支的使用</title>
    <link href="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、添加ssh公钥</h1><h2>1.使用git bash命令窗口</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/bba552eb6d164eaf8839c50c1884ec90.png"></p><h2>2.查看git用户以及邮箱配置</h2><h3>（1）查看当前仓库的本地配置（仓库级配置）</h3><pre><code>git config --local --list</code></pre><h3>（2）查看全局配置（用户级配置）</h3><pre><code>git config --global --list</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这些配置对当前用户的所有 Git 仓库有效，存储在用户目录下（Windows 通常是&nbsp;<code>C:\Users\你的用户名\.gitconfig</code>，Linux/macOS 是&nbsp;<code>~/.gitconfig</code>）</p><h2 style="background-color:transparent">补充1：</h2><h3>查看所有配置（合并显示）</h3><p>如果想一次性查看所有级别的配置（系统级 + 全局级 + 仓库级，优先级：仓库级 &gt; 全局级 &gt; 系统级），可以直接用：</p><pre><code>git config --list</code></pre><h3>常用配置项说明</h3><p>查看时可能会看到这些关键配置（如果设置过的话）：</p><ul><li><code>user.name</code>：你的 Git 用户名</li><li><code>user.email</code>：你的 Git 邮箱（通常与 SSH 密钥的邮箱一致）</li><li><code>remote.origin.url</code>：当前仓库的远程仓库地址（如 SSH 地址&nbsp;<code>git@github.com:xxx/xxx.git</code>&nbsp;或 HTTPS 地址）</li><li><code>core.editor</code>：Git 默认使用的编辑器</li></ul><p>如果需要修改配置（例如设置用户名 / 邮箱），可以用&nbsp;<code>git config --global user.name &quot;你的名字&quot;</code>&nbsp;&nbsp;或&nbsp;<code>git config --global user.email &quot;新邮箱&quot;</code>&nbsp;这类命令。</p><h2>3.生成 SSH 密钥对</h2><p>输入以下命令（推荐使用更安全的&nbsp;<code>ed25519</code>&nbsp;算法，若系统不支持则用&nbsp;<code>rsa</code>）：</p><h3>方法 1：推荐的 ed25519 算法（更安全）</h3><pre><code>ssh-keygen -t ed25519 -C "你的邮箱地址"</code></pre><h3>方法 2：兼容旧系统的 RSA 算法</h3><p>如果执行上面的命令提示不支持&nbsp;<code>ed25519</code>，改用 RSA 算法：</p><pre><code>ssh-keygen -t rsa -b 4096 -C "你的邮箱地址"</code></pre><blockquote><p>注意：<code>-C</code>&nbsp;后面的邮箱建议与你的 Git 配置邮箱一致（可通过&nbsp;<code>git config user.email</code>&nbsp;查看），方便识别密钥用途。</p></blockquote><h2>4.找到你的ssh的公钥所在的地方</h2><p>C:\Users\name\.ssh\</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/8df3334ddc834f539ab2f19ad65408ae.png"></p><p>.pub就是公钥</p><h2>5.点击github网页的右上角用户头像进入设置</h2><p><br /><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/282d4113feec433e98af538ab51bef38.png" /></p><h2>6.选择ssh选项,然后点击new ssh key，将公钥里的内容复制粘贴到ssh密钥框里</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/45289ef2892b4e86bcc2fd3519ad6f09.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/9aa39e3d52234a3598ba23ff1a2b184a.png"></p><h2><strong>7.测试 SSH 连接&nbsp;</strong></h2><p>在 Git Bash 中输入对应平台的测试命令</p><pre><code># 测试 GitHub 连接ssh -T git@github.com# 测试 GitLab 连接ssh -T git@gitlab.com# 测试 Gitee 连接ssh -T git@gitee.com</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首次连接会提示确认主机指纹，输入&nbsp;<code>yes</code>&nbsp;后回车。如果看到类似 &quot;Hi 你的用户名！You&#39;ve successfully authenticated...&quot; 的提示，说明配置成功。</p><p>完成后，你就可以继续使用 SSH 方式操作 Git 仓库了（如&nbsp;<code>git clone git@xxx</code>、<code>git push</code>&nbsp;等）。</p><h2>8.测试链接失败情况处理</h2><p>出现</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/5ed37f07b58c4ac09eb8571aa8b1fbab.png"></p><pre><code>$ ssh-add /c/Users/name/.ssh/ssh_key_git/id_rsaCould not open a connection to your authentication agent.</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出现 &quot;Could not open a connection to your authentication agent&quot; 错误，是因为 SSH 代理（ssh-agent）没有启动。需要先启动代理再加载密钥，具体步骤如下：</p><h3>解决方法：</h3><ol><li><p><strong>启动 SSH 代理</strong><br />在 Git Bash 中输入</p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>eval $(ssh-agent -s)<br></code></pre><br>&nbsp;</p><pre><code class="hljs">&lt;p&gt;成功启动后会显示类似&amp;nbsp;&lt;code&gt;Agent pid 1234&lt;/code&gt;&amp;nbsp;的信息（数字是进程 ID）。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;重新加载私钥&lt;/strong&gt;&lt;br /&gt;再次执行加载密钥的命令（使用你的私钥路径）：&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>ssh-add /c/Users/zky/.ssh/ssh_key_git/id_rsa<br></code></pre><br></li><br><li><br><p><strong>验证是否加载成功</strong><br /><br>输入以下命令查看已加载的密钥：</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>ssh-add -l<br></code></pre></p><pre><code class="hljs">&lt;p&gt;如果显示了你的密钥指纹，说明加载成功。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><p>如果还是报超时错误，需要换一下端口以及其他配置。</p><p>在C:\Users\name\.ssh\的这个目录下才是ssh的客户端的配置地方，新建文件conf，如下：</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/560b8066676f4c68ac280fac64569406.png"></p><p>添加一下内容：</p><pre><code># GitHub 配置Host github.com  Hostname ssh.github.com  # GitHub 的 SSH 服务器地址  Port 443                # 用 443 端口（部分网络屏蔽 22 端口时可用）  User git                # GitHub 固定用户名，必须是 git  IdentityFile ~/.ssh/ssh_key_git/id_rsa</code></pre><p>补充一下对于Windows下的ssh的客户端和服务器端的一些常用命令：</p><pre><code class="language-bash">#查看关于ssh的所有服务的安装状态Get-WindowsCapability -Online | Where-Object Name -like 'OpenSSH*'#配置本机电脑的ssh服务器端：快速确认 “Windows 防火墙是否允许 OpenSSH 服务器通过”Get-NetFirewallRule -Name *OpenSSH-Server* | Select Name, DisplayName, Enabled#配置本机电脑的ssh服务器端：设置sshd ssh服务器端自启动Set-Service -Name sshd -StartupType 'Automatic'#配置本机电脑的ssh服务器端：在 Windows 系统防火墙中创建一条允许外部设备通过 SSH 协议（默认端口 22）远程连接本机的入站规则，确保 SSH 服务能正常接收外部连接请求New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22#配置本机电脑的ssh服务器端：启动本地sshd服务器端Start-Service sshd#配置本机电脑的ssh服务器端：停止本地sshd服务器端Stop-Service -Name sshd#配置本机电脑的ssh服务器端：获取本地sshd服务器端状态Get-Service -Name sshd#本机电脑的ssh客户端：连接另外一台安装了ssh服务器的电脑ssh 用户名@服务器IP或主机名 -p 端口号#-v是打印日志功能ssh -v 用户名@服务器IP或主机名 -p 端口号#传输文件夹（需加 -r 参数，递归传输）# 本地文件夹 → 远程scp -r 本地文件夹路径 用户名@服务器IP或主机名:远程保存路径# 远程文件夹 → 本地scp -r 用户名@服务器IP或主机名:远程文件夹路径 本地保存路径#通过 ssh-copy-id 命令将本地公钥写入远程服务器的授权列表（避免每次输入密码）ssh-copy-id 用户名@服务器IP或主机名</code></pre><h3 style="background-color:transparent">补充说明：</h3><ul><li>每次重启 Git Bash 后，都需要重新执行&nbsp;<code>eval $(ssh-agent -s)</code>&nbsp;启动代理，再用&nbsp;<code>ssh-add</code>&nbsp;加载密钥（如果设置了密钥密码，此时需要输入密码）。</li><li>若想避免每次手动启动代理，可以配置 Git Bash 自动启动 ssh-agent（需要修改&nbsp;<code>.bashrc</code>&nbsp;或&nbsp;<code>.profile</code>&nbsp;文件，适合有经验的用户）。</li></ul><p>完成后，再次测试与 GitHub 的连接：</p><pre><code>ssh -T git@github.com</code></pre><hr /><p>在 Windows 系统中，要让 SSH 代理（<code>ssh-agent</code>）开机自动启动并加载你的 SSH 密钥，可以通过以下两种方法实现：</p><h3><strong>方法 1：通过 Git Bash 配置自动启动（推荐）</strong></h3><p>这种方法会让 Git Bash 启动时自动运行&nbsp;<code>ssh-agent</code>&nbsp;并加载密钥，步骤如下：</p><ol><li><p><strong>打开 Git Bash 配置文件</strong><br />在 Git Bash 中输入以下命令，编辑&nbsp;<code>.bashrc</code>&nbsp;文件（如果没有会自动创建）：</p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>vim ~/.bashrc<br></code></pre><br></li><br><li><br><p><strong>添加自动启动脚本</strong><br /><br>在文件末尾粘贴以下内容（替换为你的私钥路径）：</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code># 启动 SSH 代理<br>if [ -z &quot;$SSH_AUTH_SOCK&quot; ]; then</p><h1 id="检查是否已有-ssh-agent-进程"><a href="#检查是否已有-ssh-agent-进程" class="headerlink" title="检查是否已有 ssh-agent 进程"></a>检查是否已有 ssh-agent 进程</h1><p>  eval $(ssh-agent -s)</p><h1 id="加载你的-SSH-私钥（替换为实际路径）"><a href="#加载你的-SSH-私钥（替换为实际路径）" class="headerlink" title="加载你的 SSH 私钥（替换为实际路径）"></a>加载你的 SSH 私钥（替换为实际路径）</h1><p>  ssh-add /c/Users/name/.ssh/ssh_key_git/id_rsa<br>fi<br></code></pre></p><pre><code class="hljs">&lt;ul&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;测试配置&lt;/strong&gt;&lt;br /&gt;关闭当前 Git Bash 窗口，重新打开一个，会自动启动代理并加载密钥。可以用以下命令验证：&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>ssh-add -l  # 查看已加载的密钥</code></pre><br></li></p></ol><ol><li><p><strong>检测到配置文件情况</strong>：系统中存在&nbsp;<code>~/.bashrc</code>（这是你之前配置自动启动 SSH 代理的文件），但缺少&nbsp;<code>~/.bash_profile</code>、<code>~/.bash_login</code>&nbsp;或&nbsp;<code>~/.profile</code>&nbsp;这些登录级别的配置文件。</p></li><li><p><strong>自动修复操作</strong>：Git Bash 自动为你创建了&nbsp;<code>~/.bash_profile</code>&nbsp;文件，并且在其中添加了加载&nbsp;<code>~/.bashrc</code>&nbsp;的指令。这样一来，无论你是以登录方式还是非登录方式启动 Git Bash，<code>~/.bashrc</code>&nbsp;中的配置（启动 SSH 代理、加载密钥等）都会生效。</p></li></ol><h3>后续操作建议：</h3><ol><li><p>无需额外处理这个提示，它只是告知你系统做了自动配置。</p></li><li><p>可以通过以下命令确认&nbsp;<code>~/.bash_profile</code>&nbsp;是否正确创建：</p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>cat ~/.bash_profile<br></code></pre></p><pre><code class="hljs">&lt;p&gt;正常情况下会看到类似这样的内容（用于加载&amp;nbsp;&lt;code&gt;.bashrc&lt;/code&gt;）：&lt;/p&gt;&lt;pre&gt;</code></pre><p><code># generated by Git for Windows<br>test -f ~/.profile &amp;&amp; . ~/.profile<br>test -f ~/.bashrc &amp;&amp; . ~/.bashrc<br></code></pre><br></li><br><li><br><p>重新打开 Git Bash 测试，之前配置的 SSH 代理自动启动和密钥加载功能应该已经正常工作了。可以再次执行连接测试：</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>ssh -T <a href="mailto:&#103;&#x69;&#x74;&#x40;&#103;&#105;&#116;&#104;&#117;&#x62;&#46;&#99;&#111;&#x6d;">git@github.com</a><br></code></pre><br></li></p></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果看到 GitHub 的欢迎信息，说明所有配置都已生效，接下来就可以正常使用&nbsp;<code>git clone</code>、<code>git push</code>&nbsp;等命令了。</p><hr /><h2 style="background-color:transparent">补充2（有些时候会把ssh客户端和sshd服务器端的配置路径的配置文件搞混）：</h2><h3>Windows 系统（安装 OpenSSH Server 后）</h3><ul><li><strong>默认路径</strong>（适用于通过系统自带 &ldquo;可选功能&rdquo; 安装的 OpenSSH Server）：<pre><code class="hljs">&lt;p&gt;powershell&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>C:\ProgramData\ssh\sshd_config<br></code></pre></p><pre><code class="hljs">&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;注意：&lt;code&gt;ProgramData&lt;/code&gt;&amp;nbsp;是隐藏目录，需在文件资源管理器中开启 &amp;ldquo;显示隐藏文件&amp;rdquo; 才能直接访问。&lt;/li&gt;&lt;li&gt;早期版本或手动安装的 OpenSSH 可能位于：&lt;code&gt;C:\OpenSSH\sshd_config&lt;/code&gt;（需根据实际安装路径调整）。&lt;/li&gt;</code></pre></ul><hr /><h1>二、仓库分支</h1><h2>1.先clone一个仓库下来作为测试演示</h2><pre><code class="language-bash">$ git clone git@github.com:Molesidy/ubuntu_git_rep_test.gitCloning into 'ubuntu_git_rep_test'...remote: Enumerating objects: 3, done.remote: Counting objects: 100% (3/3), done.remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0 (from 0)Receiving objects: 100% (3/3), done.</code></pre><h2>2.查看分支</h2><pre><code class="language-bash">#查看当前分支情况git branch                   </code></pre><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/95cde2f4db7047cb97fc83251d05c718.png"></p><h2>3.新建分支</h2><pre><code class="language-bash">#新建一个分支branch_test1git branch branch_test1</code></pre><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/eafe7e6bed834e7d83c266c62a655a86.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/121d3aa8ba0545fdb5ec7faaf2283733.png"></p><h2>4.切换到分支上开发操作</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/6bba5a9f8e1b482cbcf743c93cb2e207.png"></p><pre><code class="language-bash">#切换到新建的分支branch_test1git checkout branch_test1</code></pre><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/885f9ac584bf43a9ad3c1abfecf597d5.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/c249d29158be4f3ba32fde061bf4cd54.png"></p><pre><code class="language-bash">#如果希望在创建分支的同时切换到该分支，可以使用以下命令：git checkout -b branchname</code></pre><h2>5.在 branch_test1分支上将仓库的测试文件进行写入数据改变，此时远程的mytest.txt文件是空的<br /><img alt="" height="28" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/a9488d5503d44f5d82691b13f95d4d60.png" width="293" /></h2><h2>6.在branch_test1分支上，进行提交文件mytest.txt</h2><pre><code class="language-bash"> #将新建分支test推送到GitHub上git push origin branch_test1  或者 git push origin branch_test1:branch_test1#本质是「本地分支 → 远程仓库分支」的映射关系，格式可拆解为：#git push &lt;远程仓库名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;    #远程仓库名是你现在所在的仓库名字默认是origin    </code></pre><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/31bb17443e39401bb3d92f34285893fb.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/468f5350b040442ea32f9fefaa59c106.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/c44e2230df8246c9b07809dd30f7f331.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/dd3b2f591dde44e5b0ea74507dc6f521.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/6bc0b179f3af4baab1a3623520d1af14.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/f52543892e2747c7a5a1d48dd2067fa5.png"></p><h2>7.github切回main，查看mytest.txt</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/821547166b534de1bd9dcbcc96a1c605.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/b82bf4691c0f4f0184d1e5fc43d6d805.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/04c7ce3ee52a40f1b5c7ffb15504b523.png"></p><h2>8.切回main，创建一个新的文件test2.txt，来回切换一次，看看区别</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/d162105aa814424c99a0a9ecc5c7b2a3.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/8019495663314adc82f7483d8c660f28.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/9d3e6326a1424aad8ef786bb254261af.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/89dde7a0a9c3464088d62a903ef4860a.png"></p><p>在main分支提交测试文件二到本地分支main后，再切回branch_test1分支看文件就看不到test2.txt了</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/bb85f8747dfd41a4a5ca6cca82f61837.png"></p><p>然后我将测试文件2推送到远程的main了</p><h2>9.尝试将branch_test1的测试文件1：mytest.txt合并到main，现在的情况是本地仓库的mytest.txt看起来是只有一个文件，但是逻辑上是两个，查看内容，即使我现在在main分支下将全部内容提交推送到远程，mytest.txt 里并没有 hello github</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/988498be7d974251880a6ae1fa092292.png"></p><p>main</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/595f2a63215a43f7955dc33d353ad68d.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/cb92f82137fe44e391db8739e4da7dcf.png"></p><p>branch</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/c0a7ae35d59e47a1bd054248e58d0b6f.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/b26d4260ecbe4b5c87d8f14275a77e2d.png"></p><h2>10.分支的合并</h2><p>当在不同的分支上进行了独立的开发工作后，我们可能需要将某个分支的修改合并到主线或其他分支上。Git提供了合并（merge）操作来实现这个功能。</p><p>切回main</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/6b3fb083cd6c4aabbd19054bcfe20c20.png"></p><pre><code class="language-bash">#指定哪一个分支合并到你现在的分支下git merge branch_test1</code></pre><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/59865fae002e4ce4a9d69552dd474626.png"></p><p>这是 Git 在执行<strong>分支合并操作</strong>时自动打开的<strong>提交信息编辑界面</strong>（默认使用 Vim 编辑器），目的是让你为这次合并填写 &ldquo;提交说明&rdquo;（记录合并的原因、内容等）。</p><h3>界面内容解读</h3><ul><li><p>蓝色提示文字：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;code&gt;Merge branch &amp;#39;branch_test1&amp;#39;&lt;/code&gt;：说明当前要合并的是名为&amp;nbsp;&lt;code&gt;branch_test1&lt;/code&gt;&amp;nbsp;的分支。&lt;/li&gt;&lt;li&gt;&lt;code&gt;Please enter a commit message to explain why this merge is necessary...&lt;/code&gt;：提示你 &amp;ldquo;输入提交信息，解释这次合并为何必要（尤其是当合并的是&amp;lsquo;更新后的上游分支到主题分支&amp;rsquo;时）&amp;rdquo;。&lt;/li&gt;&lt;li&gt;&lt;code&gt;Lines starting with &amp;#39;#&amp;#39; will be ignored, and an empty message aborts the commit.&lt;/code&gt;：以&amp;nbsp;&lt;code&gt;#&lt;/code&gt;&amp;nbsp;开头的行是 &amp;ldquo;注释行&amp;rdquo;，Git 会忽略它们；如果提交信息为空，这次合并会被取消。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;下方大量带&amp;nbsp;&lt;code&gt;#&lt;/code&gt;&amp;nbsp;的行：是 Git 自动生成的 &amp;ldquo;合并上下文&amp;rdquo;（比如分支信息、合并关联的提交等），仅用于参考，不会被当作提交信息的一部分。&lt;/p&gt;&lt;/li&gt;</code></pre></ul><h3>如何操作这个界面（完成合并提交）</h3><p>当前处于 Vim 的<strong>普通模式</strong>，需要先进入「插入模式」才能输入文字，步骤如下：</p><ol><li>按键盘上的&nbsp;<code>i</code>&nbsp;键（进入 Vim 插入模式，此时左下角会显示&nbsp;<code>-- INSERT --</code>）；</li><li>在编辑区域输入<strong>有意义的合并提交信息</strong>（比如&nbsp;<code>Merge branch_test1: 合并测试分支的功能更新</code>）；</li><li>按&nbsp;<code>Esc</code>&nbsp;键（回到 Vim 普通模式）；</li><li>输入&nbsp;<code>:wq</code>（冒号 +&nbsp;<code>wq</code>，意思是 &ldquo;保存（write）并退出（quit）&rdquo;），然后按回车键。</li></ol><p>这样就完成了合并的提交，Git 会记录这次合并及你填写的说明。</p><h3>补充：如果想放弃合并？</h3><p>如果临时不想合并了，在这个界面中：</p><ul><li>按&nbsp;<code>Esc</code>&nbsp;键回到普通模式；</li><li>输入&nbsp;<code>:q!</code>（冒号 +&nbsp;<code>q!</code>，意思是 &ldquo;强制（!）退出（quit）且不保存&rdquo;），然后按回车键。<br />Git 会取消这次合并操作，回到合并前的状态。</li></ul><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/a69e6aef71e940b3b476b8482ba82046.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/bc8f60fc3c7a41f2a2365405093f305a.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/2405ba984f2042459ef27964cac44a8a.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/f72f645f163c4e2e8b7e3bec6c275040.png"></p><p>合并完成，提交一下</p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/2a779e1aed1e47c9a998356b26fb86a4.png"></p><h2>11.到branch_test1分支下修改一下文件，演示解决冲突（这里冲突没出来就后面有空再补）</h2><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/17fe0ed194c44dc69c765da6ad8b45b9.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/6875c99154e643f9bd8a04b943e17834.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/46672e839a334a4aada9d25b10998854.png"></p><p><img src="/2025/08/29/%E3%80%90Git%E3%80%91%E5%AF%B9%E4%BA%8Egithub%E7%9A%84%E6%9C%AC%E5%9C%B0ssh%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8/a72d95da473845a0af7dc3eadb5532cc.png"></p><h2>12.合并完成后有时候就删了</h2><pre><code class="language-bash">#branchname是你希望删除的分支的名称。注意，只有当该分支的修改已经合并到其他分支时，才能被安全地删除。git branch -d branchname#如果分支的修改尚未合并，可以使用强制删除的命令：git branch -D branchname</code></pre><h2>13.现在又有许多其他命令，更多的命令就看看菜鸟教程吧，所以命令常用常新。</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.2/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P7R7" data-link-title="Git 分支管理 | 菜鸟教程" href="https://www.runoob.com/git/git-branch.html" title="Git 分支管理 | 菜鸟教程">Git 分支管理 | 菜鸟教程</a></p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git github ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【调试工具篇】第九章 实时抓取工具 btsnoop</title>
    <link href="/2025/08/27/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E7%AF%87%E3%80%91%E7%AC%AC%E4%B9%9D%E7%AB%A0%20%E5%AE%9E%E6%97%B6%E6%8A%93%E5%8F%96%E5%B7%A5%E5%85%B7%20btsnoop/"/>
    <url>/2025/08/27/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E7%AF%87%E3%80%91%E7%AC%AC%E4%B9%9D%E7%AB%A0%20%E5%AE%9E%E6%97%B6%E6%8A%93%E5%8F%96%E5%B7%A5%E5%85%B7%20btsnoop/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、Btsnoop 简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Btsnoop 是蓝牙开发领域中用于捕获和记录蓝牙协议栈与硬件芯片之间交互数据的标准化工具，它如同蓝牙通信的 &quot;黑匣子&quot;，能够完整记录两者之间的所有指令、事件及数据传输过程。</p><p>对于开发者而言，Btsnoop 的核心价值体现在两方面：</p><ul><li><strong>问题定位</strong>：当蓝牙设备出现连接异常、数据传输错误等问题时，通过分析 Btsnoop 记录的日志，可快速追溯问题发生的具体环节和原因</li><li><strong>协议学习</strong>：完整记录的交互数据为学习蓝牙协议栈（如 HCI、L2CAP、GATT 等层的工作机制）提供了真实的案例素材</li></ul><p><img src="/2025/08/27/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E7%AF%87%E3%80%91%E7%AC%AC%E4%B9%9D%E7%AB%A0%20%E5%AE%9E%E6%97%B6%E6%8A%93%E5%8F%96%E5%B7%A5%E5%85%B7%20btsnoop/154d9402f100410ca35c38f1490ccadf.jpeg"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在 Android 设备上，开启 Btsnoop 功能通常需通过 &quot;开发者选项&quot; 完成：进入系统设置的开发者选项界面，找到 &quot;蓝牙 HCI 信息收集&quot; 相关选项并启用即可。不过需要注意：</p><ul><li>不同品牌、型号的手机生成的 Btsnoop 日志文件路径可能存在差异，常见路径包括&nbsp;<code>/sdcard/btsnoop_hci.log</code>&nbsp;等</li><li>部分设备在系统升级后可能出现 Btsnoop 功能异常的情况（如从 Android 8 升级到 Android 9 后功能失效），这种情况下可考虑通过定制开发板的 Btsnoop 实现来替代</li></ul><p>后续基于 Btsnoop 日志的协议分析教程，将帮助开发者更直观地理解蓝牙协议的实际运行机制。</p><h1>二、蓝牙协议分析工具使用介绍​</h1><p>1. Wireshark（开源工具）​</p><ul><li>定位：基础级网络分析工具，支持蓝牙协议解析，适合入门及基础协议分析场景。​</li></ul><ul><li>核心能力：可导入 btsnoop 日志，解析蓝牙各层协议（如 L2CAP、ATT、GATT 等），通过可视化界面展示数据包交互过程。​</li></ul><ul><li>特点：开源免费，门槛较低，侧重基础协议数据呈现。​</li></ul><p><img src="/2025/08/27/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%E7%AF%87%E3%80%91%E7%AC%AC%E4%B9%9D%E7%AB%A0%20%E5%AE%9E%E6%97%B6%E6%8A%93%E5%8F%96%E5%B7%A5%E5%85%B7%20btsnoop/cf0d77729bee4d5c9db010584c21be30.png"></p><p>2. Frontline/Ellisys（专业仪器）​</p><ul><li>定位：专业级蓝牙分析设备，面向复杂场景调试与深度分析需求。​</li></ul><ul><li>核心能力：支持实时捕获和解码蓝牙经典协议与低功耗（BLE）信号，提供深入的时序分析、错误诊断功能。​</li></ul><ul><li>特点：功能更强大，适用于复杂蓝牙问题排查，多在专业开发与调试场景使用。​</li></ul><h1>三、蓝牙 btsnoop 日志获取方法（Android 系统）​</h1><p>1. 常规开启方式（开发者选项）​</p><ul><li>操作路径：开启手机「开发者选项」，找到并启用「蓝牙 HCI 信息收集」功能。​</li></ul><ul><li>日志存储路径：日志默认保存于 /sdcard/btsnoop_hci.log。​</li></ul><p>2. 命令行控制方式（ADB）​</p><ul><li>可通过 ADB 命令手动启动或停止日志记录，灵活性更高，适配不同调试节奏。​</li></ul><p>3. 注意事项​</p><ul><li>部分机型需获取 root 权限，或依赖特定系统版本支持，实际操作需结合设备情况调整，适用于多场景蓝牙问题调试。​</li></ul><h1>四、Android 7 蓝牙 btsnoop 代码解析​</h1><p>1. 代码定位​</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Android 7 及以上系统中，btsnoop 日志实现代码主要位于蓝牙协议栈（如 BlueZ）的 HCI 层。​</p><p>2. 核心功能逻辑​</p><p>代码负责完成蓝牙 HCI 数据包的处理，具体包括：​</p><ul><li>按 btsnoop 格式对 HCI 数据包进行封装；​</li></ul><ul><li>实现日志开关控制、数据缓冲管理、日志文件写入等核心逻辑；​</li></ul><ul><li>最终生成符合格式的 btsnoop 日志文件。​</li></ul><p>3. 学习价值​</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分析该部分代码可深入理解 Android 蓝牙日志的生成机制，为定制化蓝牙调试工具开发提供技术支撑。​</p><h1>五、工具与技术应用总结​</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上述工具（Wireshark/Frontline/Ellisys）与技术（日志获取、代码分析）覆盖蓝牙开发全流程，从基础调试、协议分析到定制化工具开发均有涉及。实际开发中，可根据需求（如场景复杂度、成本预算、功能深度）选择合适工具与技术，能大幅提升蓝牙开发与问题排查效率。​</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>btsnoop bluetooth</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第八章 基于USB的蓝牙传输协议 USB H2 Transport详解</title>
    <link href="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、蓝牙 H2（USB）Transport 协议的核心定义与定位</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙 H2 Transport 是基于 USB 接口实现的传输层协议，用于在蓝牙主机（Host，如计算机、手机）与控制器（Controller，如蓝牙芯片）之间承载 HCI（Host Controller Interface）数据。作为蓝牙协议栈物理传输层的重要实现，它负责标准化控制命令、事件及业务数据的传输方式，是 USB 接口蓝牙设备（如 USB 蓝牙适配器）的核心通信基础。</p><h1>二、工作原理与核心机制</h1><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/66f2666990a740568928cdacfb73433a.png"></p><ol><li><p><strong>HCI 与 USB 的协同</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;HCI 作为主机与控制器的标准接口，定义了三类数据交互：主机发送的&lt;strong&gt;控制命令&lt;/strong&gt;（如扫描、建立连接）、控制器上报的&lt;strong&gt;事件&lt;/strong&gt;（如连接状态、数据接收通知）、以及双向传输的&lt;strong&gt;业务数据&lt;/strong&gt;（如 ACL 异步数据、SCO 同步语音）。&lt;/li&gt;&lt;li&gt;H2 Transport 利用 USB 协议栈将 HCI 数据封装为 USB 数据包，通过 USB 物理层传输，实现主机与控制器的可靠通信。相较于 UART-based 的 H4/H5 Transport，USB 的高带宽（最高支持 480Mbps）和低延迟特性，更适配高速数据传输（如 BLE 广播包、高清音频流）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据封装与识别&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;HCI 数据通过 USB 端点（Endpoint）传输，不同类型的 HCI 数据由&lt;strong&gt;端点类型和编号&lt;/strong&gt;区分，无需额外的 HCI 包类型字段（这是与 H4 的核心差异，H4 需通过首字节标识包类型）。&lt;/li&gt;&lt;li&gt;封装遵循 USB 规范：HCI 数据作为 USB 包的 payload，由 USB 协议处理传输可靠性（如 CRC 校验、重传机制）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h1 style="background-color:transparent">三、关键特性与 USB 设备属性</h1><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/fc8f480ed3344e99a59566aac4fe5d43.png"></p><h2 style="background-color:transparent">USB 蓝牙设备的基础分类编码</h2><p>这是 USB 设备在枚举阶段，用于识别蓝牙控制器角色的核心编码：</p><table><thead><tr><th>字段（Code）</th><th>标识（Label）</th><th>值（Value）</th><th>描述（Description）</th><th>作用说明</th></tr></thead><tbody><tr><td>Class</td><td>bDeviceClass</td><td>0xE0</td><td>Wireless Controller（无线控制器类）</td><td>系统识别设备为无线控制类型</td></tr><tr><td>Subclass</td><td>bDeviceSubClass</td><td>0x01</td><td>RF Controller（射频控制器子类）</td><td>进一步明确是射频相关功能</td></tr><tr><td>Protocol</td><td>bDeviceProtocol</td><td>0x01</td><td>Bluetooth Controller（蓝牙控制器协议）</td><td>最终定位为蓝牙控制器设备</td></tr><tr><td><strong>意义</strong>：操作系统通过这组编码，自动识别设备为蓝牙控制器，加载对应的&nbsp;<code>hci_usb</code>&nbsp;等驱动，实现即插即用。</td><td></td></tr></tbody></table><ol><li><p><strong>USB 设备兼容性</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;蓝牙控制器通过 USB 接口暴露为标准设备，属于&lt;strong&gt;USB Class 0xE（无线控制器）&lt;/strong&gt;，子类为 0x01（蓝牙），协议类型 0x01（HCI）。&lt;/li&gt;&lt;li&gt;操作系统（Linux/Windows/macOS）通过内置驱动（如 Linux 的&lt;code&gt;hci_usb&lt;/code&gt;模块）自动识别，支持即插即用，简化设备部署。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;端点分配与功能&lt;/strong&gt;&lt;br /&gt;蓝牙控制器通常定义 4 组端点，分别对应不同类型的 HCI 数据：&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;端点类型&lt;/th&gt;&lt;th&gt;端点编号（IN/OUT）&lt;/th&gt;&lt;th&gt;对应 HCI 数据类型&lt;/th&gt;&lt;th&gt;功能说明&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;控制端点&lt;/td&gt;&lt;td&gt;Endpoint 0&lt;/td&gt;&lt;td&gt;控制命令（HCI Command）&lt;/td&gt;&lt;td&gt;用于 USB 枚举、设备配置及 HCI 控制命令传输&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;中断端点&lt;/td&gt;&lt;td&gt;0x81（IN）&lt;/td&gt;&lt;td&gt;事件（HCI Event）&lt;/td&gt;&lt;td&gt;接收控制器上报的事件（如连接状态变化），低延迟优先&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;批量端点&lt;/td&gt;&lt;td&gt;0x82（IN）/0x02（OUT）&lt;/td&gt;&lt;td&gt;异步数据（HCI ACL）&lt;/td&gt;&lt;td&gt;传输大容量业务数据（如文件、视频流）&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;等时端点&lt;/td&gt;&lt;td&gt;0x83（IN）/0x03（OUT）&lt;/td&gt;&lt;td&gt;同步语音（HCI SCO）&lt;/td&gt;&lt;td&gt;传输实时语音数据（如蓝牙耳机通话），保证时间一致性&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;</code></pre></ol><p><strong>蓝牙端点：</strong></p><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/9b22cd37014648cb9cdd0b46d626a8b9.png"></p><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AB%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUSB%E7%9A%84%E8%93%9D%E7%89%99%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%20USB%20H2%20Transport%E8%AF%A6%E8%A7%A3/b1c936c73731451a8abbd6ca3eaeadba.png"></p><p><strong>说明：</strong></p><h3 style="background-color:transparent">（1）端点（Endpoint）分配与 HCI 数据映射</h3><p>蓝牙控制器通过不同 USB 端点，区分承载的 HCI 数据类型，实现命令、事件、数据的分类传输：</p><h4 style="background-color:transparent">1. HCI 命令（HCI Commands）</h4><ul><li><strong>传输类型</strong>：Control（控制传输）</li><li><strong>端点地址</strong>：<code>0x00</code>（默认控制端点）</li><li><strong>工作逻辑</strong>：主机（Host）通过 USB 控制传输，向蓝牙控制器发送 HCI 命令（如扫描、连接、配置参数等）。控制传输的优势是可靠性高，且能借助 USB 标准的&nbsp;<code>SETUP</code>&nbsp;包传递命令参数，满足复杂控制需求。</li></ul><h4>2. HCI 事件（HCI Events）</h4><ul><li><strong>传输类型</strong>：Interrupt（中断传输，IN 方向）</li><li><strong>端点地址</strong>：<code>0x81</code>（IN 表示数据从设备到主机）</li><li><strong>工作逻辑</strong>：蓝牙控制器主动上报事件（如连接建立、断开、信号强度变化）时，通过中断端点快速通知主机。中断传输的 &ldquo;轮询间隔（Polling Interval）&rdquo; 可配置，保证事件低延迟送达（如设备状态变化能立即触发主机响应）。</li></ul><h4>3. HCI ACL 数据（HCI ACL Data）</h4><ul><li><strong>传输类型</strong>：Bulk（批量传输，IN/OUT 双向）</li><li><strong>端点地址</strong>：<code>0x82</code>（IN，设备&rarr;主机）、<code>0x02</code>（OUT，主机&rarr;设备）</li><li><strong>工作逻辑</strong>：用于传输大容量、非实时敏感数据（如蓝牙文件传输、BLE 大数据包）。Bulk 传输利用 USB 高带宽优势，且出错会自动重传，保障数据完整性，适合 ACL（异步无连接）链路的数据包收发。</li></ul><h4>4. HCI SCO 数据（HCI SCO Data）</h4><ul><li><strong>传输类型</strong>：Isochronous（等时传输，IN/OUT 双向）</li><li><strong>端点地址</strong>：<code>0x83</code>（IN）、<code>0x03</code>（OUT）</li><li><strong>工作逻辑</strong>：专为同步语音等实时数据设计（如蓝牙通话、音频流）。等时传输优先保障 &ldquo;速率和时序&rdquo;，允许少量丢包，避免音频卡顿。不同语音通道配置（如 8kHz 单通道、多通道、mSBC 编码）对应不同的 &ldquo;最大包大小（Max Packet Size）&rdquo; 和 &ldquo;轮询间隔（Polling Interval）&rdquo;，适配语音带宽需求：<ul><li>示例（8kHz 单通道 8bit 编码）：包大小 9 字节，轮询间隔 1ms/3ms 动态调整，平衡实时性和功耗。</li><li>mSBC 编码场景：包大小 63 字节，轮询间隔 1ms/7.5ms，适配高清语音传输。</li></ul></li></ul><h3 style="background-color:transparent">（2）H2 与 H4 的核心差异（回应 &ldquo;为啥 H2 没有 packet type 字段&rdquo;）</h3><table><thead><tr><th><strong>对比项</strong></th><th><strong>H2（USB Transport）</strong></th><th><strong>H4（UART Transport）</strong></th></tr></thead><tbody><tr><td><strong>数据区分方式</strong></td><td>靠&nbsp;<strong>USB 端点类型 + 地址</strong>&nbsp;区分 HCI 数据类型</td><td>靠&nbsp;<strong>首字节（Packet Type）</strong>&nbsp;区分（如 0x01=Command）</td></tr><tr><td><strong>底层依赖</strong></td><td>USB 协议栈的端点路由机制</td><td>UART 串口的字节流，需额外字段标识类型</td></tr><tr><td><strong>典型场景</strong></td><td>高带宽、即插即用（如 USB 蓝牙适配器）</td><td>低速率、嵌入式（如串口蓝牙模块）</td></tr></tbody></table><p><strong>关键逻辑</strong>：<br />USB 协议本身具备 &ldquo;端点路由&rdquo; 能力 &mdash;&mdash; 不同类型的数据天然走不同端点，无需额外在数据包里加 &ldquo;类型标识&rdquo;。而 UART 是简单的字节流，必须用首字节（如 H4 的&nbsp;<code>0x01</code>&nbsp;表示 Command、<code>0x04</code>&nbsp;表示 ACL Data）区分数据类型，否则主机无法解析。这就是&nbsp;<strong>H2 不需要 packet type 字段的根本原因</strong>&nbsp;。</p><h3 style="background-color:transparent">（3）实际应用与调试价值</h3><ol><li><p><strong>设备开发</strong>：<br />嵌入式工程师设计 USB 蓝牙模块时，需严格按此端点分配配置 USB 设备描述符，确保主机驱动（如 Linux&nbsp;<code>hci_usb</code>）能正确识别和绑定端点。<br />示例：若误将 HCI Event 端点设为 Bulk 类型，主机将无法及时收到连接断开事件，导致蓝牙功能异常。</p></li><li><p><strong>抓包分析</strong>：<br />用 Wireshark 抓 USB 蓝牙包时，可按端点过滤：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;过滤&amp;nbsp;&lt;code&gt;usb.endpoint_number == 0x81&lt;/code&gt;&amp;nbsp;&amp;rarr; 只看 HCI 事件，快速定位连接失败原因（如 Event 里的&amp;nbsp;&lt;code&gt;0x05&lt;/code&gt;&amp;nbsp;表示 Disconnect）；&lt;/li&gt;&lt;li&gt;过滤&amp;nbsp;&lt;code&gt;usb.endpoint_number == 0x82&lt;/code&gt;&amp;nbsp;&amp;rarr; 分析 ACL 数据内容（如 BLE 广播包、文件传输内容）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;性能优化&lt;/strong&gt;：&lt;br /&gt;调整 SCO 端点的 &amp;ldquo;Max Packet Size&amp;rdquo; 和 &amp;ldquo;Polling Interval&amp;rdquo;，可平衡语音延迟与功耗。比如蓝牙通话卡顿，可尝试增大包大小、缩短轮询间隔（需 trade-off 功耗）。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h1 style="background-color:transparent">四、典型应用场景</h1><ol><li><strong>USB 蓝牙适配器</strong>：主流 PC 外接蓝牙适配器（如基于 CSR、博通芯片）均采用 H2 Transport，通过 USB 与系统交互，支持鼠标、耳机等外设连接。</li><li><strong>嵌入式开发</strong>：在嵌入式系统中，若主控芯片（如 ARM、x86）通过 USB 连接蓝牙模块（如 nRF52840、ESP32），需配置 H2 Transport 驱动以实现 HCI 通信。</li><li><strong>协议调试</strong>：开发者可通过 USB 抓包工具（如 Wireshark、USBPcap）捕获 HCI 数据流，分析蓝牙连接建立、数据传输的全过程，辅助排查协议问题。</li></ol><h1 style="background-color:transparent">五、与 H4 Transport 的核心差异</h1><table><thead><tr><th>对比项</th><th>H2（USB）Transport</th><th>H4（UART）Transport</th></tr></thead><tbody><tr><td>物理层</td><td>USB 接口</td><td>UART 串口（TX/RX/CTS/RTS）</td></tr><tr><td>数据识别方式</td><td>由 USB 端点编号区分类型</td><td>由首字节（包类型字段）区分</td></tr><tr><td>带宽与延迟</td><td>高带宽（最高 480Mbps）、低延迟</td><td>低带宽（通常&le;1Mbps）、延迟较高</td></tr><tr><td>典型应用</td><td>USB 蓝牙适配器、高速数据传输</td><td>嵌入式低速率场景（如传感器）</td></tr></tbody></table><h1>总结</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H2 Transport 通过 USB 接口的高带宽、低延迟特性，为蓝牙主机与控制器的 HCI 通信提供了高效传输方案，尤其适合需要高速数据交互的场景（如音频流、大量设备连接）。其端点化的设计简化了数据类型识别，配合 USB 的即插即用特性，成为主流蓝牙设备（尤其是 USB 适配器）的首选传输层协议。</p><p>注：想要了解USB的发展请参考：<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="【STM32】【USB】USB通讯方式的学习笔记以及基于CubeMX HAL库的例程验证_stm32的usb-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/149139634?sharetype=blogdetail&amp;sharerId=149139634&amp;sharerefer=PC&amp;sharesource=qq_73648789&amp;spm=1011.2480.3001.8118" title="【STM32】【USB】USB通讯方式的学习笔记以及基于CubeMX HAL库的例程验证_stm32的usb-CSDN博客">【STM32】【USB】USB通讯方式的学习笔记以及基于CubeMX HAL库的例程验证_stm32的usb-CSDN博客</a></p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth H2 USB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第七章 基于UART的蓝牙 BCSP Transport解析</title>
    <link href="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUART%E7%9A%84%E8%93%9D%E7%89%99%20BCSP%20Transport%E8%A7%A3%E6%9E%90/"/>
    <url>/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E5%9F%BA%E4%BA%8EUART%E7%9A%84%E8%93%9D%E7%89%99%20BCSP%20Transport%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、BCSP（BlueCore Serial Protocol）协议简介</h1><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="Board of Certified Safety Professionals | BCSP" href="https://www.bcsp.org/" title="Board of Certified Safety Professionals | BCSP">Board of Certified Safety Professionals | BCSP</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BCSP（BlueCore Serial Protocol）是由 CSR 公司（现属于高通）开发的专有协议，并非蓝牙的标准协议，主要作用是在 UART（通用异步收发传输器）物理层上实现蓝牙主机（Host）与控制器（Host Controller）之间的可靠数据传输，位于蓝牙 HCI（主机控制器接口）层之下，为 HCI 数据提供封装与传输保障。</p><h1>二、核心定位与功能</h1><ul><li><strong>核心目标</strong>：解决 UART 传输的不可靠性问题（如丢包、数据错乱），通过协议层设计实现 HCI 数据的稳定收发。</li><li><strong>服务类型</strong>：提供两种双向数据报服务：<ul><li>可靠数据报服务（通过排序、确认机制保障数据完整）；</li><li>不可靠数据报服务（无确认机制，适用于实时性优先场景）。</li></ul></li><li><strong>运行环境</strong>：支持三线 UART（TX/RX/GND）或五线 UART（增加 CTS/RTS 硬件流控），兼容常见串口硬件。</li></ul><h1 style="background-color:transparent">三、分层架构与工作流程</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BCSP 采用分层设计，从底层到上层依次为 6 层，每层负责特定功能，协同实现数据传输：</p><table><thead><tr><th>层级</th><th>核心功能</th></tr></thead><tbody><tr><td><strong>UART Driver Layer</strong></td><td>初始化并控制本地 UART 硬件，定义默认参数（如 38.4k 波特率、8 数据位、偶校验、1 停止位），处理字节收发与 parity 校验（校验失败则丢弃字节）。</td></tr><tr><td><strong>SLIP Layer</strong></td><td>基于 SLIP（Serial Link Internet Protocol）协议实现字节流与数据包的转换：以<code>0xC0</code>作为包起始 / 结束标志，对特殊字节（<code>0xC0</code>&rarr;<code>0xDB 0xDC</code>，<code>0xDB</code>&rarr;<code>0xDB 0xDD</code>）进行转义，避免与标志位冲突。</td></tr><tr><td><strong>Packet Integrity Layer</strong></td><td>检测数据包完整性，丢弃不完整或格式错误的包（如未正确以<code>0xC0</code>结束的包），确保上层处理的是有效数据。</td></tr><tr><td><strong>MUX Layer</strong></td><td>路由层，根据数据包的<code>Protocol Type</code>字段，将包分发至上层的 &ldquo;可靠传输层&rdquo;（Sequencing Layer）或 &ldquo;不可靠传输层&rdquo;（Datagram Queue Layer），同时记录最后一次成功接收包的时间。</td></tr><tr><td><strong>Sequencing Layer</strong></td><td>提供可靠传输：通过<code>seq</code>（序号，0-7）和<code>ack</code>（确认号，0-7）的窗口机制实现包排序与重传，确保数据按序、完整到达。</td></tr><tr><td><strong>Datagram Queue Layer</strong></td><td>提供不可靠传输：无序号与确认机制，适用于实时性要求高的场景（如语音数据），<code>seq</code>和<code>ack</code>字段固定为 0。</td></tr></tbody></table><h1 style="background-color:transparent">四、数据包结构</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BCSP 数据包格式定义了清晰的字段，确保传输的准确性与可解析性，核心结构如下：</p><table><thead><tr><th>字段</th><th>位置 / 长度</th><th>作用描述</th></tr></thead><tbody><tr><td><strong>Flags Field</strong></td><td>第 1 字节</td><td>包含<code>seq</code>（序号，0-2bit，仅可靠层有效）、<code>ack</code>（确认号，3-5bit，仅可靠层有效）、<code>CRC</code>（是否包含 CRC，6bit：1 = 包含）、<code>Protocol Type</code>（7bit，用于 MUX 层路由）。</td></tr><tr><td><strong>Protocol Identifier Field</strong></td><td>第 2 字节 0-3bit</td><td>也称 &ldquo;BCSP channel&rdquo;，标识上层协议类型，区分可靠 / 不可靠传输的不同数据通道。</td></tr><tr><td><strong>Payload Length Field</strong></td><td>第 2 字节 4-7bit + 第 3 字节</td><td>表示 Payload（有效数据）长度（不含 CRC）。</td></tr><tr><td><strong>Checksum Field</strong></td><td>第 4 字节</td><td>前 3 字节的校验和取反，用于检测头部完整性。</td></tr><tr><td><strong>Payload</strong></td><td>可变长度</td><td>实际传输的 HCI 数据（如命令、事件、音频流等）。</td></tr><tr><td><strong>CRC Field</strong></td><td>最后 2 字节</td><td>对整个数据包的 CRC16 校验（仅当<code>Flags</code>中<code>CRC=1</code>时存在），用于检测传输错误（仅校验，不纠错，错误则丢弃或重传）。</td></tr></tbody></table><h1 style="background-color:transparent">总结</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BCSP 作为 UART 上的专有传输协议，通过分层设计与精细的数据包机制，为蓝牙 HCI 层数据提供了灵活的 &ldquo;可靠 / 不可靠&rdquo; 传输选择，弥补了 UART 物理层的固有缺陷。其核心价值在于：在低成本串口硬件上实现高稳定性，适配蓝牙设备（如耳机、传感器）的通信需求，尤其在 CSR 芯片方案中被广泛应用。</p><p><strong>注：</strong>由于笔者目前还在学习中，暂时不进行详解BCSP，可等待后续更新；但是，csdn上有部分博主BCSP的源码和解析，可自行寻找。</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth BCSP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第六章 基于SDIO的蓝牙硬件发送协议 SDIO Transport详解</title>
    <link href="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%9F%BA%E4%BA%8ESDIO%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20SDIO%20Transport%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%9F%BA%E4%BA%8ESDIO%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20SDIO%20Transport%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、SDIO简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO(Secure Digital Input and Output)，即安全数字输入输出接口。在<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="SD卡" href="https://so.csdn.net/so/search?q=SD%E5%8D%A1&amp;spm=1001.2101.3001.7020" title="SD卡">SD卡</a>接口的基础上发展而来，同时可以兼容之前的SD卡，并可以连接SDIO接口设备，比如：蓝牙、WIFI、GPS等。</p><h2>（1）什么是SDIO卡？</h2><p>SDIO 卡是一种采用 SD 总线和 SD 指令集的 IO 设备，其核心特点如下：</p><ol><li><p><strong>物理兼容性</strong>：外形和接口与普通 SD 存储卡完全兼容，可插入标准 SD 卡槽使用。</p></li><li><p><strong>功能扩展</strong>：突破了传统 SD 卡仅用于存储的局限，集成了额外功能模块，如蓝牙、Wi-Fi、NFC 等无线通信模块，或摄像头、传感器等外设控制功能。</p></li><li><p><strong>工作原理</strong>：通过 SDIO 协议（基于 SD 总线规范）实现主机与功能模块的通信，既保留了 SD 接口的物理兼容性，又通过指令扩展支持多样化的 IO 功能。</p></li></ol><p>例如，常见的 SDIO Wi-Fi 卡，外观与普通 SD 卡一致，但插入设备后可提供无线网络连接功能，无需额外占用其他接口资源。这种设计使其能便捷地为笔记本电脑、嵌入式设备等扩展无线通信能力。</p><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%9F%BA%E4%BA%8ESDIO%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20SDIO%20Transport%E8%AF%A6%E8%A7%A3/0d03db1577d145c4a3ba37e5bab709ac.png"></p><p>SDIO协议与SD协议相比，主要增加了CMD5、CMD52、CMD53等命令，用于支持SDIO卡的使用。</p><p>SDIO应用框图如下图所示：</p><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%9F%BA%E4%BA%8ESDIO%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20SDIO%20Transport%E8%AF%A6%E8%A7%A3/6bb90e049e0747669d8788a0ce0da0e4.png"></p><h2>（2）组合卡</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;组合卡是一类特殊的 SDIO 卡，其核心特征是<strong>同时集成存储器（Memory）和 SDIO 功能</strong>，即 &ldquo;存储 + IO 功能&rdquo; 的复合设计。在保留 SD 卡存储能力的同时，还可实现额外功能（如 Wi-Fi、蓝牙等），兼顾数据存储与外设扩展需求。</p><p><img src="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%9F%BA%E4%BA%8ESDIO%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20SDIO%20Transport%E8%AF%A6%E8%A7%A3/126f327bea104aa4b4ed414183a3a8c1.png"></p><h2>（3）SDIO 卡类型（按传输速率划分）</h2><ul><li><p><strong>全速卡</strong>：<br />传输速率超过 100Mbps，时钟工作范围为 0-25MHz，性能较强。适用于对速率要求较高的场景，如网卡、组合卡等需要高速数据交互的设备，全速SDIO卡支持SPI, 1-bit和4-bit模式。。</p></li><li><p><strong>低速卡</strong>：<br />时钟工作范围为 0-400KHz，速率较低。主要适配对带宽需求不高的外设，如调制解调器、条形码扫描仪、GPS 接收器等，仅要求支持SPI和1-bit模式，4-bit模式是可选的。</p></li></ul><h2>（4）SDIO 卡的总线模式</h2><p>SDIO 卡支持三种总线传输模式，适配不同硬件接口和速率需求：</p><ul><li><strong>SPI 模式</strong>：基于 SPI 串行通信协议，使用时钟、片选、数据输入 / 输出线传输，兼容性强，适用于支持 SPI 接口的简易主机设备。</li><li><strong>1-bit SD 传输模式</strong>：通过单条数据线传输数据，速率中等，适用于对传输速度要求不高的场景。</li><li><strong>4-bit SD 传输模式</strong>：通过 4 条数据线并行传输，速率更高，能充分发挥全速卡的性能，适用于高速数据传输场景。</li><li><img alt="" height="478" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/c65acdb0a0264e3ab5d973650f8f4cc3.png" width="902" /></li></ul><h2>（5）引脚说明</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO卡通过SDIO接口与主机进行连接，而标准的SDIO接口包含一组共4条的数据线（DAT0-DAT3），两条电源线（VCC和GND），两条命令线（CMD和CLK），以及其他用于控制信号的线。DAT线用于数据的输入输出，CMD线用于发送控制命令，时钟线用于提供同步信号。SDIO卡与主机连接时，需要确保硬件的物理链接接触良好，卡上的接口与主机的SDIO插槽正确对接。同时，SDIO卡在物理上可能拥有额外的引脚用于扩展功能，如：I/O引脚，这些引脚可以用于实现诸如调试功能或附加的硬件控制接口。</p><p>SDIO 卡引脚定义表（按模式分类）：</p><table><thead><tr><th>引脚序号</th><th>4bit SD 传输模式</th><th>1bit SD 传输模式</th><th>SPI 模式</th></tr></thead><tbody><tr><td>1</td><td>DAT3（数据线 3）</td><td>CD（卡侦测）</td><td>CS（片选）</td></tr><tr><td>2</td><td>CMD（命令 / 应答）</td><td>CMD（命令 / 应答）</td><td>DI（串行输入，即 MOSI）</td></tr><tr><td>3</td><td>VSS1（地线）</td><td>VSS1（地线）</td><td>VSS（地线）</td></tr><tr><td>4</td><td>VDD（电源线）</td><td>VDD（电源线）</td><td>VDD（电源线）</td></tr><tr><td>5</td><td>CLK（时钟线）</td><td>CLK（时钟线）</td><td>CLK（SPI 时钟）</td></tr><tr><td>6</td><td>VSS2（地线）</td><td>VSS2（地线）</td><td>VSS（地线）</td></tr><tr><td>7</td><td>DAT0（数据线 0）</td><td>DAT0（数据线 0）</td><td>DO（串行输出，即 MISO）</td></tr><tr><td>8</td><td>DAT1（数据线 1 / 中断）</td><td>NC/IRQ（中断）</td><td>NC/IRQ（中断）</td></tr><tr><td>9</td><td>DAT2（数据线 2）</td><td>NC</td><td>NC</td></tr></tbody></table><p>关键模式差异解读</p><ol><li><strong>4bit SD 传输模式</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;利用 DAT0 - DAT3 共 4 条数据线并行传输，&lt;strong&gt;速率最高&lt;/strong&gt;，适配网卡、组合卡等对带宽要求高的场景，典型如需要高速数据交互的 SDIO 扩展设备 。&lt;/li&gt;&lt;li&gt;DAT1 可复用为中断引脚，支持设备主动向主机上报事件（如数据就绪）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;1bit SD 传输模式&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;仅用 DAT0 单条数据线传输，&lt;strong&gt;速率低于 4bit 模式&lt;/strong&gt;，但硬件连接更简单，适合对速率要求不高的基础 IO 设备（如低速传感器）。&lt;/li&gt;&lt;li&gt;引脚 8 明确为中断（NC/IRQ ），方便外设触发主机响应。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;SPI 模式&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;遵循 SPI 协议，DI（MOSI ）、DO（MISO ）实现串行数据收发，CS 用于片选，&lt;strong&gt;兼容性强&lt;/strong&gt;，可适配传统 SPI 主机控制器（如单片机 SPI 口）。&lt;/li&gt;&lt;li&gt;中断引脚（NC/IRQ ）保留，支持外设异步通知主机，适配条形码扫描仪、低速传感器等需中断触发的场景 。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>补充说明：</p><ul><li><strong>引脚复用逻辑</strong>：同一物理引脚在不同模式下功能不同（如引脚 1 ，4bit 模式是数据线、1bit 模式是卡侦测、SPI 模式是片选 ），需根据总线模式配置硬件与驱动 。</li><li><strong>典型应用适配</strong>：低速卡（如调制解调器 ）常用 1bit 或 SPI 模式；高速卡（如组合卡 ）优先选 4bit SD 模式以发挥带宽优势 ，可根据设备需求灵活切换模式实现功能扩展 。</li></ul><p><strong>参考链接（如有侵权，请联系删除）：</strong></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="SDIO学习（1）--SDIO 2.0协议-CSDN博客" href="https://blog.csdn.net/weixin_49259827/article/details/136632127?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-136632127-blog-124523827.235^v43^pc_blog_bottom_relevance_base8&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=2" title="SDIO学习（1）--SDIO 2.0协议-CSDN博客">SDIO学习（1）--SDIO 2.0协议-CSDN博客</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="SDIO接口详解：从总线模式到命令响应-CSDN博客" href="https://blog.csdn.net/u012041204/article/details/124523827" title="SDIO接口详解：从总线模式到命令响应-CSDN博客">SDIO接口详解：从总线模式到命令响应-CSDN博客</a></p><hr /><h1>二、蓝牙与SDIO</h1><h2>2.1&nbsp;基础与概述</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO（Secure Digital Input Output）作为高速、灵活的接口标准，与蓝牙技术深度融合，为移动设备无线通信提供新路径。SDIO 基于 SD 卡规范，支持数据传输与电源管理，适配便携设备需求；蓝牙技术历经多代迭代，从早期音频扩展至智能家居、工业等场景，二者结合可兼顾高速传输与低功耗，提升设备性能与续航。</p><h2>2.1 理论融合：协议与技术协同</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙技术是由爱立信公司于1994年提出的，旨在取代电缆，实现设备间的无线连接。蓝牙技术自推出以来经历了多次迭代，包括1.0、1.2、2.0、2.1、4.0和5.0系列版本。蓝牙1.0和1.2版本存在不少的兼容性问题和功耗问题，但在2.0版本中，通过引入EDR（Enhanced Data Rate）技术，蓝牙在保持低功耗的同时提高了数据传输速度。可以注意的是，蓝牙4.0版本是蓝牙技术的重要里程碑，它引入了低功耗蓝牙（Bluetooth Low Energy，BLE）技术，使得其功耗进一步降低，适应了传感器和可穿戴设备的需要。并且后续的蓝牙5.0版本进一步提高了传输距离和速度，同时增强了定位功能，使得蓝牙技术的应用范围更加广泛。</p><p><strong>蓝牙协议栈分层架构解析</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙协议栈通过<strong>分层设计</strong>实现功能解耦，从底层物理传输到上层应用服务，共分为 5 大核心层级，每一层聚焦特定职责：</p><table><thead><tr><th>协议栈层级</th><th>核心功能定位</th><th>关键协议 / 组件</th><th>典型作用场景</th></tr></thead><tbody><tr><td><strong>核心协议层</strong></td><td>支撑蓝牙通信的基础逻辑，负责连接建立、数据封装与物理传输</td><td>LMP、L2CAP、广播协议、基带协议</td><td>设备配对加密、数据分片重组、无线信号收发</td></tr><tr><td><strong>电缆替代层</strong></td><td>模拟传统有线接口（如串口、USB），让蓝牙设备兼容旧有硬件 / 软件系统</td><td>RFCOMM（串口仿真）</td><td>蓝牙打印机模拟串口连接电脑</td></tr><tr><td><strong>电话控制层</strong></td><td>定义蓝牙与电话设备的交互规则，支持语音通话、呼叫控制</td><td>TCS（电话控制规范）</td><td>蓝牙耳机接听 / 挂断电话</td></tr><tr><td><strong>适配协议层</strong></td><td>为特定应用场景提供标准化适配，让不同设备能基于统一规则通信</td><td>SDP（服务发现）、OBEX（对象交换）</td><td>手机搜索耳机服务、蓝牙传文件</td></tr><tr><td><strong>应用层</strong></td><td>直接面向用户的功能协议，覆盖音频、健康、车联等场景</td><td>A2DP（音频流）、HFP（免提）、GATT（BLE 服务）</td><td>蓝牙听歌、车载电话、运动手环数据传输</td></tr></tbody></table><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;将SDIO协议与蓝牙技术结合，为移动设备提供高速且稳定的无线连接能力。SDIO接口提供的高带宽和低延迟特性，使得蓝牙模块可以更加高效地传输数据，尤其是在要求快速响应的场合，如流媒体传输，或高速数据同步。；另外，SDIO协议的电源管理功能与蓝牙技术的低功耗特性相结合，可以在不牺牲设备性能的前提下，显著降低功耗。这种协同工作模式特别适合于电池供电的便携式设备。SDIO与蓝牙技术的结合还提供了高度的模块化，使得设备制造商可以更加灵活地集成蓝牙功能。这种模块化设计简化了硬件设计，降低成本，缩短了产品上市时间。</p><h3>（一）SDIO 协议原理</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO 支持<strong>块传输</strong>（保障数据完整性，适配高可靠性场景）与<strong>流传输</strong>（追求速率，适配音视频等连续数据），并通过多低功耗状态（睡眠、完全断电）实现能效优化。数据传输与电源管理可通过代码逻辑控制，如：</p><pre><code>// 数据传输示例（伪代码）  int send_block_data(unsigned char *data, size_t size) {      if(size &gt; MAX_BLOCK) return -1;      // 块传输初始化、发送、校验      return 0;  }  // 电源管理示例（伪代码）  void enter_sleep_mode() {      // 配置低功耗寄存器，进入睡眠  }  </code></pre><p></p><h3>（二）蓝牙技术核心</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙技术迭代至 5.x 版本，协议栈涵盖链路管理（LMP）、逻辑链路控制（L2CAP）等核心层，支持经典蓝牙（高速音频）与 BLE（低功耗传感）双模。其通过 &ldquo;服务 - 特征&rdquo; 模型定义通信规则，适配多场景数据交互。</p><h2>2.3 实践结合：硬件与软件集成</h2><h3>（一）SDIO 硬件实现</h3><p>&nbsp; &nbsp; &nbsp; &nbsp; SDIO 卡通过 50 针接口（含数据、命令、电源 / 地线）连接主机，支持全速（25MB/s）、高速（50MB/s）模式。初始化流程需遵循 &ldquo;加电&rarr;复位&rarr;识别卡信息&rarr;配置参数&rarr;启用功能&rdquo;，确保与主机兼容。</p><h3>（二）蓝牙模块集成</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;选择蓝牙模块需权衡<strong>兼容性、尺寸、功耗、性能</strong>等因素，接口协议常用 UART（简易、低成本）或 SPI（高速、全双工）。集成时需适配主机硬件，确保无线信号与数据传输稳定。</p><h3>（三）软件协同设计</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;驱动程序需实现<strong>卡检测、数据缓存、中断处理、功耗管理</strong>，并封装蓝牙协议栈，向上层提供标准 API。软件层通过 GATT 协议（BLE）或传统蓝牙协议栈，实现设备发现、配对、数据收发，兼顾安全性与跨平台兼容。</p><h3>（四）蓝牙模块与主机的接口协议需基于SDIO协议规范下</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件模块与主机的接口协议遵循SDIO协议规范。在硬件层面上，蓝牙模块需要通过SDIO卡接口与主机通信。在协议层面，蓝牙模块需要集成蓝牙协议栈，并通过SDIO接口提供蓝牙通信服务。蓝牙模块一般通过SDIO的CMD线和DAT线进行控制和数据交换，而CLK和VCC线路提供时钟信号和电源。此外，蓝牙模块可能使用其他I/O引脚来实现特定功能。在软件层面上，蓝牙模块需要安装相应的驱动程序，以便主机操作系统能够识别和管理蓝牙硬件。驱动程序负责抽象硬件细节，为上层应用提供标准且对应的蓝牙API接口。</p><h3>（五）SDIO 蓝牙模块驱动程序：设计与实现要点解析</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在 SDIO 与蓝牙技术的软件集成过程中，SDIO 蓝牙模块驱动程序充当着硬件与操作系统之间的关键纽带，负责保障数据在二者之间准确、高效地传输。以下是对其设计与实现关键部分的详细阐述：</p><h4>初始化和配置</h4><ul><li><strong>SDIO 卡初始化</strong>：当设备启动或 SDIO 蓝牙模块插入时，驱动程序需按照 SDIO 协议规范，通过发送特定的命令（如复位命令）来初始化 SDIO 卡。这包括设置 SDIO 卡的工作模式（SPI 模式、1-bit SD 模式或 4-bit SD 模式）、时钟频率等参数，确保其处于可正常工作的状态。例如，在 Linux 系统下，可能会使用<code>sdio_init_card()</code>函数来执行初始化操作。</li><li><strong>蓝牙模块加载与配置</strong>：在 SDIO 卡初始化完成后，驱动程序需要加载蓝牙模块的固件，并对蓝牙模块进行配置。这涉及到设置蓝牙模块的工作参数，如蓝牙的工作模式（经典蓝牙或低功耗蓝牙）、设备地址、配对模式等。比如，通过发送特定的蓝牙配置命令，使蓝牙模块进入可被发现的状态，以便与其他蓝牙设备建立连接。</li></ul><h4>中断处理</h4><ul><li><strong>数据接收完成中断</strong>：当蓝牙模块接收到数据后，会向驱动程序发送中断信号。驱动程序中的中断处理函数需要及时响应，读取接收到的数据，并将其存储到合适的缓冲区中，以便上层应用程序进行处理。例如，当接收到蓝牙音频数据时，中断处理函数将数据暂存，等待音频播放模块来获取。</li><li><strong>设备状态变化中断</strong>：蓝牙模块的状态（如连接状态、电量状态等）发生变化时，也会触发中断。驱动程序需要对这些中断进行处理，更新设备的状态信息，并根据需要通知上层应用程序。比如，当蓝牙设备的电量过低时，驱动程序将这一状态变化告知系统，以便系统提示用户及时充电。</li></ul><h4>数据传输</h4><ul><li><strong>发送函数</strong>：驱动程序实现数据发送函数，负责将上层应用程序要发送的数据进行格式化处理，并通过 SDIO 接口发送给蓝牙模块。在发送前，可能还需要进行数据校验，如计算 CRC 校验值，以确保数据在传输过程中的准确性。例如，当用户通过蓝牙发送文件时，发送函数将文件数据分割成合适的数据包，依次发送给蓝牙模块。</li><li><strong>接收函数</strong>：接收函数用于从蓝牙模块接收数据，并将其转换为上层应用程序能够理解的格式。同时，接收函数还需要处理数据的重组，因为数据在传输过程中可能会被分片。比如，在接收蓝牙传输的图片数据时，接收函数将各个分片的数据组合成完整的图片数据，供图片浏览应用使用。</li><li><strong>通信接口提供</strong>：驱动程序向上层应用程序提供统一的数据传输接口，使得应用程序无需关心底层的硬件细节，只需调用相应的接口函数即可实现数据的发送和接收。常见的接口形式包括函数调用，如<code>sdio_bluetooth_send_data()</code>和<code>sdio_bluetooth_receive_data()</code>。</li></ul><h4>电源管理</h4><ul><li><strong>省电模式实现</strong>：为了降低蓝牙模块的功耗，驱动程序需要根据系统的需求和蓝牙模块的状态，调整其电源状态。例如，当蓝牙模块在一段时间内没有数据传输时，驱动程序可以将其设置为低功耗睡眠模式，减少电能消耗。在需要使用时，再通过发送唤醒命令，将蓝牙模块恢复到正常工作状态。</li><li><strong>电源状态监测与调整</strong>：驱动程序还需要实时监测蓝牙模块的电源状态，如电池电量等信息。当电量低于一定阈值时，采取相应的措施，如降低蓝牙模块的发射功率或提示用户充电，以保证蓝牙模块的正常运行。</li></ul><h4>错误处理</h4><ul><li><strong>数据传输错误检测</strong>：在数据传输过程中，驱动程序需要检测可能出现的错误，如数据包丢失、校验错误等。通过对传输数据进行校验和比对，及时发现错误。例如，在接收数据时，检查 CRC 校验值是否正确，如果错误，则请求重新发送数据。</li><li><strong>硬件故障处理</strong>：当检测到蓝牙模块或 SDIO 接口出现硬件故障时，驱动程序需要采取相应的措施进行处理。这可能包括尝试重新初始化硬件、记录故障信息以便后续排查等。比如，如果 SDIO 卡出现硬件故障，驱动程序可以尝试重新插拔 SDIO 卡，或者向上层应用程序报告故障，提示用户进行检查。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;驱动程序的实现往往涉及到内核级别的编程，这要求开发者具备深厚的操作系统知识（如进程管理、内存管理、中断处理机制等）以及对硬件原理的熟悉（如 SDIO 接口协议、蓝牙模块的工作原理）。为了给用户提供良好的使用体验，驱动程序还需着重优化性能，减少数据传输的延迟，并且合理管理系统资源，确保整个系统的稳定性和可靠性。</p><h2>2.4 协同优化：性能与能耗平衡</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;性能优化需<strong>硬件 - 软件协同</strong>：硬件层面升级高速 SDIO 卡、优化 PCB 布局（抗干扰）；软件层面压缩数据、批量传输、优化算法（如快速排序替代冒泡）。能耗管理依托 SDIO 低功耗模式与蓝牙 BLE 特性，动态调整电源状态（如任务空闲时休眠），延长设备续航。</p><h3>（一）SDIO 与蓝牙融合系统的性能优化原则</h3><p>在 SDIO 与蓝牙技术结合的系统中，性能优化需围绕<strong>提升传输速率、降低延迟、增强响应速度</strong>三大目标，遵循以下核心原则：</p><h4>1. 最小化数据传输开销</h4><ul><li><strong>核心逻辑</strong>：减少数据在传输链路中的 &ldquo;无效成本&rdquo;，提升有效数据占比。</li><li><strong>实践方式</strong>：<ul><li>对传输数据进行压缩（如采用 ZIP、LZ77 等算法），减少原始数据量；</li><li>优化协议包结构，去除冗余字段（如合并重复的头部信息），缩短包长度；</li><li>避免不必要的校验或转义（如在高可靠性链路中简化 CRC 校验频率）。</li></ul></li></ul><h4>2. 并行处理提升资源利用率</h4><ul><li><strong>核心逻辑</strong>：在硬件支持的前提下，通过多任务并行化，减少资源闲置时间。</li><li><strong>实践方式</strong>：<ul><li>采用多线程模型：例如，一个线程负责 SDIO 接口数据接收，另一个线程处理蓝牙协议解析，避免单线程串行阻塞；</li><li>利用多核处理器：将数据加密、格式转换等任务分配到不同核心，并行执行；</li><li>异步 I/O 操作：SDIO 数据读写与蓝牙无线传输异步触发，无需等待前序操作完成。</li></ul></li></ul><h4>3. 缓存优化加速数据访问</h4><ul><li><strong>核心逻辑</strong>：通过合理缓存热点数据，减少对低速存储（如 SDIO 卡 Flash）的直接依赖。</li><li><strong>实践方式</strong>：<ul><li>设计多级缓存：将高频访问的蓝牙配置参数（如设备地址、连接状态）存入 CPU 高速缓存或内存，而非每次从 SDIO 卡读取；</li><li>预加载机制：预测即将传输的数据（如蓝牙音频帧），提前从 SDIO 卡加载至内存缓存，降低传输延迟；</li><li>缓存一致性维护：确保缓存数据与 SDIO 卡存储的数据同步，避免读写冲突。</li></ul></li></ul><h4>4. 算法优化缩短处理耗时</h4><ul><li><strong>核心逻辑</strong>：通过高效算法降低数据处理的时间复杂度，减少 CPU 占用。</li><li><strong>实践方式</strong>：<ul><li>数据解析：采用状态机替代逐字节遍历，快速解析蓝牙协议帧；</li><li>加密解密：选用轻量级算法（如 AES-128 而非 3DES），在安全性与效率间平衡；</li><li>任务调度：采用优先级调度算法，确保蓝牙实时数据（如语音）优先处理。</li></ul></li></ul><h4>5. 避免关键路径阻塞</h4><ul><li><strong>核心逻辑</strong>：在数据传输的关键链路（如 SDIO 读写&rarr;蓝牙发送）中，消除阻塞点，保证流程顺畅。</li><li><strong>实践方式</strong>：<ul><li>非阻塞 I/O：SDIO 接口操作采用非阻塞模式，通过回调函数处理完成事件，而非同步等待；</li><li>超时机制：为蓝牙连接建立、数据确认等操作设置合理超时，避免无限期阻塞；</li><li>缓冲队列：在 SDIO 与蓝牙模块间设置 FIFO 队列，应对突发数据，防止上下游速度不匹配导致的阻塞。</li></ul></li></ul><h4>6. 硬件加速释放软件压力</h4><ul><li><strong>核心逻辑</strong>：利用 SDIO 卡或蓝牙模块的硬件功能，分担 CPU 计算负载。</li><li><strong>实践方式</strong>：<ul><li>SDIO 硬件加速：选择支持 DMA（直接内存访问）的 SDIO 卡，数据传输无需 CPU 介入；</li><li>蓝牙硬件功能：启用模块内置的加密引擎（如硬件 AES）、CRC 校验器，减少软件处理耗时；</li><li>中断聚合：配置蓝牙模块合并高频中断（如连续数据接收中断），降低 CPU 中断响应开销。</li></ul></li></ul><h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这些原则的核心是 **&ldquo;效率优先、协同优化&rdquo;**：通过减少无效操作、并行利用资源、加速数据流转、借力硬件能力，实现 SDIO 与蓝牙融合系统的整体性能跃升，尤其适配移动设备对低延迟、高吞吐的需求。在实际优化中，需结合具体场景（如音频传输 vs 传感器数据）权衡各原则的优先级，避免过度优化导致的复杂度上升。</p><h3>（二）能耗管理对 SDIO 与蓝牙融合系统的核心价值</h3><p>在 SDIO 与蓝牙技术结合的移动设备中，能耗管理直接决定了设备续航能力与用户体验，其重要性体现在：<strong>通过精细化控制能源消耗，在保证功能正常的前提下，最大限度延长电池使用寿命</strong>。以下是能耗管理的核心原则及实践意义：</p><h4>1. 降低空闲功耗：减少 &ldquo;无效能耗&rdquo;</h4><ul><li><strong>核心逻辑</strong>：设备未执行任务时（如蓝牙未连接、SDIO 无数据传输），切断非必要模块的能源供应。</li><li><strong>实践价值</strong>：例如，蓝牙模块在未配对时可关闭射频电路，仅保留低功耗广播；SDIO 卡在空闲时进入 &ldquo;休眠模式&rdquo;，停止时钟信号输出，避免芯片空转耗电。此类操作可将空闲功耗降低 60% 以上，显著延长待机时间。</li></ul><h4>2. 动态电源管理：按需分配能源</h4><ul><li><strong>核心逻辑</strong>：根据实时负载调整供电强度，避免 &ldquo;大马拉小车&rdquo; 的能源浪费。</li><li><strong>实践价值</strong>：<ul><li>蓝牙传输大文件时，提升射频发射功率至 10dBm（确保信号稳定），并为 SDIO 接口提供高速时钟（50MHz）；</li><li>低负载时（如蓝牙周期性发送传感器数据），降低发射功率至 0dBm，SDIO 时钟降至 400kHz，减少电路功耗。<br />动态调整可使平均功耗降低 30%-50%，平衡性能与能耗。</li></ul></li></ul><h4>3. 智能调度：优化任务执行时机</h4><ul><li><strong>核心逻辑</strong>：将同类任务（如蓝牙数据接收、SDIO 卡读写）批量执行，减少模块频繁唤醒的能耗。</li><li><strong>实践价值</strong>：例如，智能手环的传感器数据每 10 秒采集一次，可将数据暂存于内存，积累 3 次后通过蓝牙批量发送，而非每次采集后立即唤醒射频模块，减少唤醒次数（从 3 次&rarr;1 次），降低启动能耗。</li></ul><h4>4. 多节能模式：适配场景需求</h4><ul><li><strong>核心逻辑</strong>：针对不同使用场景（如待机、轻度使用、深度睡眠），定义差异化的节能策略。</li><li><strong>实践价值</strong>：<ul><li><strong>快速启动模式</strong>：短时间未操作时，蓝牙保留连接状态，SDIO 卡维持低功耗待机，确保用户唤醒设备时可立即响应；</li><li><strong>深度睡眠模式</strong>：长时间无操作时，蓝牙断开连接并关闭射频，SDIO 卡断电，仅保留实时时钟（RTC）供电，功耗可降至微安级。<br />多模式切换可覆盖 90% 以上的使用场景，兼顾响应速度与续航。</li></ul></li></ul><h4>5. 温度管理：避免能耗恶性循环</h4><ul><li><strong>核心逻辑</strong>：高温会导致电路功耗上升（半导体特性），需通过温控平衡能耗与设备安全。</li><li><strong>实践价值</strong>：当蓝牙模块因高速传输温度超过 60℃时，自动降低发射功率或暂停传输，待温度回落再恢复；SDIO 卡过热时，降低读写速率以减少热量产生。此举可避免温度过高导致的功耗激增（温度每升 10℃，功耗可能增加 10%-20%），同时保护硬件寿命。</li></ul><h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;能耗管理是移动设备 &ldquo;用户体验的底线&rdquo;&mdash;&mdash; 用户对续航的敏感度远高于微小的性能差异。在 SDIO 与蓝牙融合系统中，通过上述原则实现 &ldquo;按需供能、智能调度、场景适配&rdquo;，既能满足功能需求（如高速传输、实时响应），又能将电池寿命延长 1-2 倍，是移动设备竞争力的核心要素之一。</p><h2>2.5 案例与应用：移动设备实践</h2><h3>（一）移动设备集成</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;移动设备中，SDIO 蓝牙模块可通过<strong>模块化设计</strong>（独立模块插 SDIO 槽，便于升级）或<strong>芯片级集成</strong>（省空间、但难扩展）方案部署。软件需完成 &ldquo;驱动安装&rarr;协议栈配置&rarr;应用 API 开发&rdquo;，实现系统层与应用层协同。</p><h3>（二）开发与调试</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;搭建开发环境需适配 IDE（如 Android Studio）、调试工具（如 BlueZ 抓包），通过多线程、异步 I/O 优化程序响应。调试需覆盖 &ldquo;硬件兼容性、协议栈通信、应用功能&rdquo; 全流程，保障稳定运行。</p><h3>（三）大致的开发环境搭建与案例分析</h3><h4>（1）开发环境搭建</h4><p>SDIO 蓝牙应用的开发环境需整合工具链，支持从编码到部署的全流程，核心工具包括：</p><ul><li><p><strong>集成开发环境（IDE）</strong>：<br />选择适配目标系统的 IDE（如 Android Studio 用于安卓设备，Qt Creator 用于跨平台开发），提供代码编辑、编译、调试及性能分析功能，简化开发流程。例如，Android Studio 可通过 SDK 集成蓝牙 API，直接调用 SDIO 接口驱动。</p></li><li><p><strong>调试工具</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;协议分析工具：如 Linux 下的 BlueZ，可捕获蓝牙通信数据包，解析连接建立、数据传输等过程，定位协议交互错误；&lt;/li&gt;&lt;li&gt;硬件调试工具：逻辑分析仪用于监测 SDIO 总线信号（时钟、数据、命令），确保硬件时序符合规范；&lt;/li&gt;&lt;li&gt;日志工具：通过系统日志（如 Android 的 Logcat）输出蓝牙模块状态、SDIO 读写结果等信息，辅助排查软件逻辑问题。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><p><strong>搭建流程</strong>：</p><p>安装基础工具</p><p>配置驱动与协议栈</p><p>安装辅助工具</p><p>开发环境搭建</p><p>部署IDE及SDK</p><p>集成蓝牙/SDIO开发包</p><p>部署调试/日志工具</p><p>环境验证与测试</p><h4>（2）调试方法与步骤</h4><p>调试需结合硬件信号、软件日志和模拟环境，定位问题根源：</p><ol><li><p><strong>连接调试器</strong>：<br />通过 USB 或无线调试将设备与开发机连接，启动调试会话（如 GDB 调试器），设置断点监控 SDIO 数据读写、蓝牙连接等关键流程。</p></li><li><p><strong>日志分析</strong>：<br />实时抓取系统日志，重点关注：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;SDIO 初始化状态（如 &amp;ldquo;卡识别成功&amp;rdquo;&amp;ldquo;速率配置为 50MHz&amp;rdquo;）；&lt;/li&gt;&lt;li&gt;蓝牙事件（如 &amp;ldquo;设备发现&amp;rdquo;&amp;ldquo;连接失败原因&amp;rdquo;&amp;ldquo;数据发送成功 / 失败&amp;rdquo;），通过日志时序还原执行路径。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;模拟器验证&lt;/strong&gt;：&lt;br /&gt;对硬件依赖高或场景复杂的功能（如多设备并发连接），使用模拟器（如 Android Emulator）模拟蓝牙模块与 SDIO 接口交互，排除硬件干扰，快速验证软件逻辑。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h4>（3）成功案例分析</h4><p>SDIO 与蓝牙的融合已在移动设备中落地，典型案例体现了架构设计与性能优化的实践价值：</p><h5>（3.1） 系统架构设计</h5><ul><li><strong>多层次通信模型</strong>：<br />底层 SDIO 蓝牙模块负责物理层数据收发，经数据链路层（L2CAP 协议）封装、网络层（服务发现）路由，最终由应用层（如音频播放、文件传输）处理，各层解耦，便于维护。</li><li><strong>模块化服务架构</strong>：<br />将蓝牙功能拆分为独立服务（如 &ldquo;音频服务&rdquo;&ldquo;数据同步服务&rdquo;），通过 SDIO 接口与主机交互，服务可单独升级（如更新蓝牙协议栈），不影响系统其他功能。</li></ul><h5>（3.2）性能与能耗评估</h5><ul><li><p><strong>性能指标</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;连接速度：SDIO 蓝牙模块平均配对时间较传统 UART 模块缩短 30%；&lt;/li&gt;&lt;li&gt;传输速率：4-bit SD 模式下，蓝牙音频流传输速率稳定在 2Mbps，无卡顿；&lt;/li&gt;&lt;li&gt;稳定性：连续 72 小时通信无断连，丢包率低于 0.1%。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;能耗指标&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;待机功耗：蓝牙模块进入低功耗模式后，电流从 10mA 降至 0.5mA；&lt;/li&gt;&lt;li&gt;传输能耗：采用批量传输策略后，数据发送阶段平均功耗降低 20%，续航延长 1.5 小时。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO 与蓝牙技术的融合应用需依托完善的开发环境与调试工具，通过合理的系统架构设计与指标评估，实现 &ldquo;高速传输 + 低功耗&rdquo; 的平衡。成功案例表明，二者结合可显著提升移动设备的无线通信能力，为物联网、可穿戴设备等场景提供可靠技术支撑。</p><h2>2.6 未来趋势：挑战与创新</h2><h3>（一）发展方向</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO 与蓝牙技术将向<strong>更深层标准化、多场景融合</strong>演进：物联网中，二者结合可赋能智能家居、工业传感；车载场景下，可优化信息娱乐系统无线连接。</p><h3>（二）挑战与应对</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;需解决<strong>兼容性、安全性</strong>难题：通过统一标准（如 SDIO 协会、蓝牙 SIG 规范）保障设备互操作，强化加密认证（如蓝牙 AES 加密）保护数据隐私。</p><hr /><h1>三、补充说明</h1><h2>3.1&nbsp;与其他蓝牙传输协议对比（以 H4 为例）</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙传输协议有多种，H4 是基于五线 UART（RX/TX/CTS/RTS/GND 带硬件流控）的传输协议，是较为简单的一种。与 SDIO Transport 相比，H4 只是在 HCI 数据前面加上一个 Type，用于标识数据类型（如 HCI COMMAND、HCI EVENT、HCI ACL 等）。而 SDIO Transport 则依托 SDIO 接口强大的功能，在数据传输速率、数据传输量以及可扩展性方面具有明显优势。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在数据传输速率上，SDIO 接口最高传输速率可达 50MB/s 甚至更高（如 SDIO 3.0 在特定模式下支持 200MB/s），远远超过 UART 接口的速率，能够满足蓝牙在高速数据传输场景（如蓝牙音频流传输、大数据文件传输）下的需求。在数据传输量方面，SDIO 的 4 - bit 数据传输模式以及较大的数据包长度，使得一次能够传输更多的数据，减少了数据传输的次数，提高了整体传输效率。从可扩展性来看，SDIO 接口可以方便地连接多种外围设备，除了蓝牙模块，还能连接 Wi - Fi 模块、GPS 接收器等，而 UART 接口主要用于简单的串口通信，扩展能力有限。</p><hr /><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDIO 与蓝牙技术的融合，构建了 &ldquo;高速有线通道 + 灵活无线连接&rdquo; 的协同体系，既适配当前移动设备需求，也为物联网、车载等场景提供创新路径。未来需持续推进标准化、优化能耗与安全，释放技术更大价值。</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth SDIO</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第五章 基于基础UART的蓝牙硬件发送协议 UART H5 Transport详解</title>
    <link href="/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E5%9F%BA%E7%A1%80UART%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20UART%20H5%20Transport%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/08/10/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E5%9F%BA%E7%A1%80UART%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20UART%20H5%20Transport%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在蓝牙协议栈的 Transport 层中，UART（通用异步收发传输器）是最常用的硬件接口之一，而<strong>UART H5 Transport</strong>是蓝牙规范中定义的基于 UART 物理层的传输协议，主要用于蓝牙芯片（如 BLE 模块、经典蓝牙模块）与主机（如 MCU、AP）之间的通信。本章将详细解析 UART H5 Transport 的协议规范、帧结构、数据传输流程及应用场景。</p><h2>一、 UART H5 Transport 的定位与作用</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙协议栈的 Transport 层负责<strong>主机（Host）与控制器（Controller）之间的数据传输</strong>，而 UART H5 Transport 是其中基于 UART 硬件接口的具体实现方案。其核心作用是：</p><ul><li>定义主机与控制器通过 UART 接口传输数据时的<strong>帧格式、编码规则、流控机制</strong>；</li><li>确保 HCI（主机控制器接口）命令、事件、数据在 UART 物理层上的<strong>可靠传输</strong>；</li><li>兼容蓝牙核心规范（如 Core Specification v5.0+）中对 UART 传输的要求，支持 BLE、经典蓝牙等多种蓝牙技术。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;与其他 Transport 方案（如 USB、SPI）相比，UART H5 Transport 的优势在于<strong>硬件实现简单</strong>（仅需 TX/RX 两根信号线，可选流控线）、<strong>成本低</strong>，因此广泛应用于中小型嵌入式设备（如智能家居传感器、可穿戴设备）。</p><h2>二、物理层基础：UART 接口特性</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART H5 Transport 依赖 UART 硬件接口，其物理层特性需满足以下要求：</p><ul><li><strong>信号线</strong>：至少包含 TX（发送）和 RX（接收）两根数据线，可选 CTS（清除发送）和 RTS（请求发送）用于硬件流控；</li><li><strong>波特率</strong>：支持多种速率，常见为 115200 bps、230400 bps、1 Mbps 等，主机与控制器需预先协商一致；</li><li><strong>数据格式</strong>：1 个起始位、8 个数据位、1 个停止位，无奇偶校验（即 &ldquo;8N1&rdquo; 格式）；</li><li><strong>电气特性</strong>：遵循 TTL 电平（3.3V）或 RS-232 电平，需根据硬件设计匹配。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 的异步传输特性决定了其无需时钟线，通过预先约定的波特率实现数据同步，但需通过协议层的帧结构确保数据边界的识别。</p><h2>三、UART H5 Transport 的帧结构</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为解决 UART 异步传输中 &ldquo;数据边界模糊&rdquo; 的问题，H5 协议定义了明确的<strong>帧结构</strong>，用于标识数据的开始、结束及校验。完整的 H5 帧格式如下（按传输顺序排列）：</p><table><thead><tr><th>字段</th><th>长度（字节）</th><th>作用描述</th></tr></thead><tbody><tr><td>起始标志（SOF）</td><td>1</td><td>固定值<code>0x7E</code>，标识一帧数据的开始。</td></tr><tr><td>长度（Length）</td><td>2</td><td>表示后续 &ldquo;数据字段&rdquo; 的长度（Little-Endian 格式），范围 0~65535 字节。</td></tr><tr><td>数据字段（Data）</td><td>可变（0~65535）</td><td>实际传输的 HCI 数据包，包括 HCI 命令、事件或 ACL 数据（格式遵循 HCI 规范）。</td></tr><tr><td>校验（CRC）</td><td>2</td><td>对 &ldquo;长度字段&rdquo; 和 &ldquo;数据字段&rdquo; 的 CRC16 校验值（多项式：0x1021），用于检错。</td></tr><tr><td>结束标志（EOF）</td><td>1</td><td>固定值<code>0x7F</code>，标识一帧数据的结束。</td></tr></tbody></table><h2 style="background-color:transparent">3.1 转义机制（Escape）</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于 &ldquo;数据字段&rdquo; 中可能包含与 SOF（0x7E）或 EOF（0x7F）相同的字节，导致帧边界识别错误，H5 协议引入<strong>转义机制</strong>：</p><ul><li>当数据中出现<code>0x7E</code>时，替换为<code>0x7D</code>&nbsp;+&nbsp;<code>0x5E</code>（0x7E ^ 0x20）；</li><li>当数据中出现<code>0x7F</code>时，替换为<code>0x7D</code>&nbsp;+&nbsp;<code>0x5F</code>（0x7F ^ 0x20）；</li><li>当数据中出现转义符<code>0x7D</code>时，替换为<code>0x7D</code>&nbsp;+&nbsp;<code>0x5D</code>（0x7D ^ 0x20）。</li></ul><p>接收端需对上述转义序列进行反向解析，还原原始数据。</p><h2>3.2 帧示例</h2><p>假设需传输的 HCI 数据为<code>0x01 0x00 0x00</code>（一条简单的 HCI 命令），则 H5 帧的构建过程如下：</p><ol><li>长度字段：数据长度为 3 &rarr; 0x03 0x00（Little-Endian）；</li><li>CRC 计算：对<code>0x03 0x00 0x01 0x00 0x00</code>计算 CRC16，假设结果为<code>0x12 0x34</code>；</li><li>完整帧（未转义）：<code>0x7E 0x03 0x00 0x01 0x00 0x00 0x12 0x34 0x7F</code>。</li></ol><h2>四、数据传输流程</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART H5 Transport 的传输流程分为<strong>发送流程</strong>和<strong>接收流程</strong>，两者需严格遵循帧结构和转义规则。</p><h2>4.1 发送流程（主机&rarr;控制器或控制器&rarr;主机）</h2><ol><li>发送端将原始 HCI 数据包按 H5 帧结构封装（添加 SOF、Length、CRC、EOF）；</li><li>对帧中需转义的字节（0x7E、0x7F、0x7D）进行转义处理；</li><li>通过 UART TX 线逐字节发送处理后的帧数据；</li><li>若启用硬件流控（CTS/RTS），发送端需在 CTS 有效（低电平）时才能发送数据。</li></ol><h2>4.2 接收流程</h2><ol><li>接收端通过 UART RX 线持续监测数据，当检测到 SOF（0x7E）时，开始接收一帧数据；</li><li>接收 Length 字段，确定后续数据字段的长度；</li><li>接收数据字段和 CRC 字段，期间对转义序列进行反向解析；</li><li>检测到 EOF（0x7F）后，帧接收完成；</li><li>验证 CRC：若 CRC 校验通过，则提取数据字段并提交给上层（HCI 层）；若失败，则丢弃该帧并记录错误。</li></ol><h2>五、流控与错误处理</h2><h2>5.1 流控机制</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART H5 Transport 支持<strong>硬件流控</strong>（CTS/RTS）和<strong>软件流控</strong>（XON/XOFF），其中硬件流控更常用：</p><ul><li>硬件流控：当接收端缓冲区即将满时，拉低 RTS（通知发送端暂停发送）；缓冲区空闲时，拉高 RTS（允许继续发送）；</li><li>软件流控：通过特定字符（如 XON=0x11，XOFF=0x13）控制发送端启停，适用于无硬件流控引脚的场景。</li></ul><h2>5.2 错误处理</h2><ul><li><strong>CRC 校验失败</strong>：接收端丢弃该帧，可通过 HCI 事件向上层报告 &ldquo;传输错误&rdquo;；</li><li><strong>帧不完整</strong>：若超时未检测到 EOF（如超过 100ms），接收端重置接收状态，重新等待 SOF；</li><li><strong>波特率不匹配</strong>：会导致接收数据全为乱码，需通过硬件设计确保主机与控制器波特率一致。</li></ul><h2>六、应用场景与局限性</h2><h2>6.1 典型应用</h2><ul><li>中小型嵌入式设备：如 BLE 传感器（温湿度、心率）、蓝牙遥控器，通过 MCU（如 STM32、GD32）与蓝牙模块（如 CC2541、ESP32-BLE）的 UART 接口通信；</li><li>低成本蓝牙方案：无需复杂硬件（如 USB 控制器），仅通过 UART 即可实现主机与蓝牙控制器的连接。</li></ul><h2>6.2 局限性</h2><ul><li>速率限制：UART 的波特率通常最高为 1-2 Mbps，难以满足高速数据传输（如蓝牙音频流）；</li><li>可靠性依赖上层：UART 本身无重传机制，需依赖 HCI 层或应用层实现数据重传；</li><li>抗干扰性较弱：相比差分信号（如 USB），UART 的单端信号易受电磁干扰，需在硬件设计中增加滤波电路。</li></ul><h2>七、总结</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART H5 Transport 是蓝牙 Transport 层中基于 UART 接口的轻量级传输协议，通过定义明确的帧结构、转义机制和流控规则，实现了主机与控制器之间的可靠通信。其硬件简单、成本低的特点使其在中小型嵌入式设备中广泛应用，但受限于 UART 的物理层特性，在高速、高可靠性场景中需考虑其他传输方案（如 USB Transport）。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;理解 UART H5 Transport 的协议细节，对蓝牙硬件设计（如模块选型、引脚配置）和软件开发（如驱动编写、帧解析）具有重要指导意义。</p><h1>八、补充说明</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以下是蓝牙不同接口传输协议的核心区别，按接口类型和特性整理：</p><table><thead><tr><th>协议</th><th>物理接口</th><th>核心特点</th></tr></thead><tbody><tr><td>H2</td><td>USB</td><td>基于 USB 总线的传输协议，支持高速数据传输，适用于需要大带宽的场景（如蓝牙音频）。</td></tr><tr><td>H4</td><td>五线 UART</td><td>包含 RX/TX/CTS/RTS/GND，依赖硬件流控；帧结构简单，仅在 HCI 原始数据前加 1 字节类型标识（如命令 / 事件 / 数据），是最基础的 UART 传输方式。</td></tr><tr><td>H5</td><td>三线 UART</td><td>仅用 RX/TX/GND，无硬件流控；通过协议层添加帧头（SOF）、长度、CRC 校验和帧尾（EOF）保证数据完整性，需软件处理转义机制和校验。</td></tr><tr><td>BCSP</td><td>UART</td><td>基于 UART 的专用传输协议，支持错误检测、重传和流控，设计更复杂，适用于对可靠性要求高的场景（如早期蓝牙模块通信）。</td></tr><tr><td>SDIO</td><td>SDIO 接口</td><td>基于安全数字输入输出接口，传输速率高，适合需要高速数据交互的场景（如蓝牙与 Wi-Fi 共存的芯片）。</td></tr></tbody></table><p><strong>核心区别总结</strong>：</p><ul><li>接口类型：H2 用 USB，H4/H5/BCSP 用 UART（线数和流控不同），SDIO 用 SDIO 接口。</li><li>复杂度：H4 最简单（仅加类型标识），H5 和 BCSP 需额外处理校验或重传，H2 和 SDIO 依赖总线特性。</li><li>适用场景：H4 适合简单低成本场景，H5 适合无硬件流控的简化设计，H2/SDIO 适合高速需求，BCSP 适合高可靠性需求。</li></ul>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth 蓝牙通信协议 H5</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Ubuntu】【pyenv】【python】基于pyenv的python版本管理模式下，对于特定python版本开发环境的要求下相关设置</title>
    <link href="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/"/>
    <url>/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>&nbsp; &nbsp; &nbsp; &nbsp;最近，在基于w800开发板环境下的学习过程中，由于在Windows下使用联盛VSCode+SDK，或者win下的命令行ide环境中的编译速度实在不尽如人意，于是笔者就开始转战Ubuntu下的联盛德提供的Linux环境配置，但是由于笔者之前搞了其他的环境，于是就用到了pyenv来管理python版本。但是，由于这个pyenv的python与Ubuntu系统自带的python3有时会冲突，有些时候使用SDK会默认使用系统自带的python导致编译不过，在此记录一些解决方法。</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="WM IoT SDK 编程指南 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/" title="WM IoT SDK 编程指南 — WinnerMicro 在线文档">WM IoT SDK 编程指南 &mdash; WinnerMicro 在线文档</a></p><h1>二、相关设置</h1><p>部分命令：</p><pre><code class="language-cpp">## 查看帮助文档pyenv## 查看某个命令帮助文档pyenv install --help## 查看版本pyenv version## 检查 Python 是否正常运行python -c "import sys; print(sys.executable)"## 查看已安装的 Python 版本pyenv versions## 查看当前使用的 Python 版本pyenv version## 查看所有可用的 Python 版pyenv install --list ## 安装指定版本pyenv install 3.9.1## 验证python --version## 卸载指定版本pyenv uninstall 3.9.1## 全局指定 Python 版本（影响所有项目）pyenv global 3.9.1 ## 局部指定 Python 版本（仅影响当前项目目录），指定后在当前项目目录内创建 .python-version 文件，保存版本信息## 优先级高于 globalpyenv local 3.9.1## 会话级指定 Python 版本（影响所有项目）pyenv shell 3.9.1 ## 查看 python 的安装目录pyenv which python## 重新生成 pyenv 的 shims 目录中的可执行文件pyenv rehash </code></pre><h2 style="background-color:transparent">2.1 对于pyenv的下载缓慢问题</h2><h3 style="background-color:transparent">2.1.1 常用方法</h3><h4>（1）查看pyenv已经安装的版本</h4><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/f4326a138dac4196a5623e3d2b9fcef2.png"></p><h4>（2）列出所有可以安装的版本，有普通的python，还有anaconda、jython</h4><pre><code class="language-python">pyenv install --list</code></pre><h4>（3）另辟蹊径，按住ctrl键点击这个网址打开去手动进入网页下载</h4><p>有些时候会卡在这里</p><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/4e33db82269746e3ad385c8ac4e6875a.png"></p><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/8d3a8c6652434a51be64fa4a810db6c9.png"></p><h4>（4）找到你安装的pyenv的本体的文件夹所在的地方，在/pyenv/下创建一个cache文件夹，这其实就是缓存文件夹，将你在网页下载的python包放在cache文件夹下，然后，后面就在使用命令行</h4><pre><code class="language-python">pyenv install 版本号</code></pre><h4>安装在网页下载的python包对应的版本，实际上它pyenv内部会检出cache文件夹内的python包缓存，就不用再使用http拉取了，会直接解压cache文件夹内的python包，然后导入到你的pyenv内部</h4><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/29938c2b82824af5af5a8ab9236c89ed.png"></p><h4>（5）放入cache文件夹</h4><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/0953f1a8a8b24cd28705dde2805adeee.png"></p><h4>（5）输入指令重新安装，如果要指定修改镜像源需要.pyenv添加文件，但是笔者用的其他方式安装的pyenv就不用这个方法了，可以看看其他文章</h4><pre><code class="language-bash">pyenv install 版本号</code></pre><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/1cb1df882e2440f5a5a54dbc447d5f3f.png"></p><h4>注：可以指定镜像网站下载到cache文件夹</h4><pre><code class="language-bash">#wget https://mirrors.huaweicloud.com/python/${v}/Python-${v}.tar.xz -P ~/.pyenv/cache/wget https://mirrors.huaweicloud.com/python/3.9.0/Python-3.9.0.tar.xz -P ~/.pyenv/cache/</code></pre><h2 style="background-color:transparent">2.2 对于Ubuntu的命令环境下的WM IoT SDK</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="Linux 搭建命令行编译环境 — WinnerMicro 在线文档" href="https://doc.winnermicro.net/w800/zh_CN/latest/get_started/linux.html" title="Linux 搭建命令行编译环境 — WinnerMicro 在线文档">Linux 搭建命令行编译环境 &mdash; WinnerMicro 在线文档</a></p><p>根据文档的步骤一步步部署就可以了，但是其中，有些需要注意的地方，在这里会指出来。</p><h3>2.2.1 根据2.1.1来，pyenv安装python3.8.10</h3><p>其他的正常使用apt/apt-get安装</p><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/f0fb437092af4443ba403084a482223e.png"></p><p>注：这里使用的apt安装的工具就不用添加环境变量了</p><p>同时，激活一下变成全局的配置</p><pre><code class="language-bash">pyenv global 版本号</code></pre><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/2037168b0c5d4512bb94903642c10101.png"></p><h3>2.2.2 由上一步安装了pyenv的python3.8.10，然后，我们的目标是使用pyenv的python3.8.10，所以要指定使用pyenv的python3.8.10来安装这个SDK运行需要的python3.8.10的依赖工具环境。全局的pyenv的python3.8.10的配置后面说。</h3><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/0fedbdd4d33c4ac6b2db881af05760a0.png"></p><pre><code class="language-bash">#requirements.txt里是WM SDK需要的有些依赖工具包/home/zky/Pyenv/pyenv/versions/3.8.10/bin/python -m pip install --user --break-system-packages -r /home/wm/wm_iot_sdk/tools/wm/requirements.txt</code></pre><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/6b33bad13064454d91ca675c45f71185.png"></p><pre><code class="language-bash">sudo apt-get install python-tk</code></pre><h3 style="background-color:transparent">2.2.3 将pyenv的python3.8.10配置为全局，这样子SDK的wm.py就不会调用ubuntu的默认的系统python3，需要编写~/.bashrc里面添加环境变量路径（像windows的path一样）</h3><h4>（1）向.bashrc里添加</h4><p>使用笔记本打开或者vim打开.bashrc编辑</p><pre><code class="language-bash">#设置 WM IoT SDK 路径（替换为你的SDK实际路径）这个SDK作为Linux里的命令行环境#vscode的wmsdk插件可以使用其他SDK#你的SDK实际存放路径export WM_IOT_SDK_PATH=/home/zky/SoftwaresHub/wm/wm_iot_sdk_v2_4/wm_iot_sdk  # 将 wm.py 工具添加到环境变量export PATH=$WM_IOT_SDK_PATH/tools/wm:$PATH#pyenv python 路径export PYENV_ROOT="$HOME/Pyenv/pyenv"  export PATH="$PYENV_ROOT/bin:$PATH"# 如果你的shell是bash，请启用下面的命令  if [ -d "$PYENV_ROOT/shims" ]; then    export PATH="$PYENV_ROOT/shims:$PATH"  fi  # 初始化pyenv（对于bash shell）  eval "$(pyenv init --path)"  eval "$(pyenv init -)"export PATH=/home/zky/Pyenv/pyenv/shims/python:$PATH</code></pre><h4>（2）同时，还有2个工具的环境变量</h4><pre><code class="language-bash">#ccache工具提升编译速度 可能对于系统文件下的.ccache没有读写权限export CCACHE_DIR=$HOME/.ccache#export CCACHE_DIR=~/.ccache#csky-elfabiv2-tools-x86_64-minilibc-20210423export PATH=/home/zky/SoftwaresHub/wm/tools/csky-elfabiv2-tools-x86_64-minilibc-20210423/bin:$PATH</code></pre><p>调试工具需要单独配置，这里暂时不演示了</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="T-Head_Debugger_Server_User_Guide_ZH-CN.pdf" href="https://doc.winnermicro.net/download/debug_server/T-Head_Debugger_Server_User_Guide_ZH-CN.pdf" title="T-Head_Debugger_Server_User_Guide_ZH-CN.pdf">T-Head_Debugger_Server_User_Guide_ZH-CN.pdf</a></p><h4>（3）保存编辑内容，并重启.bashrc</h4><pre><code class="language-bash">source ~/.bashrc</code></pre><p>然后就可以查看这个全局的python，而不是系统的/usr/bin/python</p><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/62a9b7f65c394177a50a291c293df995.png"></p><h4>（4）最好在命令环境下的sdk里wm.py脚本的第1行指定一下pyenv的python3.8.10</h4><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/315fdc37eb7e43d69cb5e936ddccce9e.png"></p><h4>（5）缺模块就自己加，最好显示指定用pyenv的python安装py工具什么的</h4><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/79af9677959f4d3daa1eaaf2ce3031f4.png"></p><p>参考链接：</p><p><a data-link-desc="文章浏览阅读5.5k次，点赞5次，收藏10次。一个简单的Python版本管理器，可以轻松地在各个Python版本之间进行切换。pyenv默认下载源是www.python.org，国内下载特别慢，可以通过修改环境变量修改为国内下载源。_pyenv换源" data-link-icon="https://g.csdnimg.cn/static/logo/favicon32.ico" data-link-title="python多版本管理器--pyenv更换下载源_pyenv换源-CSDN博客" href="https://blog.csdn.net/weixin_49021852/article/details/130268545" title="python多版本管理器--pyenv更换下载源_pyenv换源-CSDN博客">python多版本管理器--pyenv更换下载源_pyenv换源-CSDN博客</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="【Ubuntu】安装使用pyenv - Python版本管理_ubuntu安装pyenv-CSDN博客" href="https://blog.csdn.net/weixin_60915103/article/details/140440061" title="【Ubuntu】安装使用pyenv - Python版本管理_ubuntu安装pyenv-CSDN博客">【Ubuntu】安装使用pyenv - Python版本管理_ubuntu安装pyenv-CSDN博客</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" data-link-title="【Pyenv 更换国内源】_pyenv 国内源-CSDN博客" href="https://blog.csdn.net/axiaowua/article/details/139627637?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-139627637-blog-143912174.235^v43^pc_blog_bottom_relevance_base8&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=2" title="【Pyenv 更换国内源】_pyenv 国内源-CSDN博客">【Pyenv 更换国内源】_pyenv 国内源-CSDN博客</a></p><h2>2.3 对于Ubuntu下的vscode的wm_iot_sdk的扩展配置</h2><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/1aec8fe42ed647418d50945fc31686f3.png"></p><h3>（1）出现缺少模块tomlkit，但是，我是用pyenv的python3.8.10安装过了</h3><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/fd4f79df0bad42b3b979aff8eabaf022.png"></p><h3>（2）可能就是调用的是系统默认的python3，如下图：</h3><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/30d6ff25875a456690ee3f7133740f91.png"></p><h3>（3）pyenv的python3.8.10修改为全局环境，就编译成功了</h3><p><img src="/2025/08/10/%E3%80%90Ubuntu%E3%80%91%E3%80%90pyenv%E3%80%91%E3%80%90python%E3%80%91%E5%9F%BA%E4%BA%8Epyenv%E7%9A%84python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%89%B9%E5%AE%9Apython%E7%89%88%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%A6%81%E6%B1%82%E4%B8%8B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/42ae0fb583ac4a849c05f55df9b92792.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>ubuntu linux 嵌入式Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第四章 基于基础UART的蓝牙硬件发送协议 UART H4 Transport详解</title>
    <link href="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E5%9F%BA%E7%A1%80UART%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20UART%20H4%20Transport%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E5%9F%BA%E7%A1%80UART%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20UART%20H4%20Transport%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、UART H4 Transport 简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙&nbsp;<strong>Transport</strong>&nbsp;是主机（Host，蓝牙协议栈）与控制器（Controller，蓝牙芯片）之间的<strong>硬件层通信协议</strong>，负责承载 HCI（Host Controller Interface）数据。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙 <strong>Transport </strong>就是蓝牙的硬件发送协议，硬件的传输介质有：<strong>UART/USB/SDIO</strong>，如果有读者有一些嵌入式知识基础的话，这些通信方式就没有那么陌生了，那么Transport 就是在特定的硬件传输介质上增加了一些协议。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;比如：H4就是在UART上增加了一个小协议，H4算是最简单的一个协议，只是在数据前面加一个Type（类型标识），了解过蓝牙HCI一般都会知道<strong>蓝牙协议栈（Host）</strong>跟<strong>芯片（Controller）</strong>一般是通过<strong>硬件传输介质</strong>传输<strong>HCI数据</strong>来沟通，那么H4就是在HCI数据前面加上一个TYPE。</p><p><strong>&nbsp; &nbsp; &nbsp;</strong> &nbsp;简而言之，<strong>H4</strong>&nbsp;是 UART 介质上的轻量实现：仅在 HCI 原始数据前附加&nbsp;<strong>1 字节类型标识</strong>，用于区分 HCI 数据包的类别，是连接 &ldquo;协议逻辑&rdquo; 与 &ldquo;硬件传输&rdquo; 的桥梁。</p><h1 style="background-color:transparent">二、H4 协议格式与数据包类型</h1><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E5%9F%BA%E4%BA%8E%E5%9F%BA%E7%A1%80UART%E7%9A%84%E8%93%9D%E7%89%99%E7%A1%AC%E4%BB%B6%E5%8F%91%E9%80%81%E5%8D%8F%E8%AE%AE%20UART%20H4%20Transport%E8%AF%A6%E8%A7%A3/682d49a6ddd44af49c7bf704cc32a0a4.jpeg"></p><p>H4 的传输格式为&nbsp;<strong>&ldquo;类型前缀 + HCI 原始数据&rdquo;</strong>，结构如下：</p><p>plaintext</p><pre><code>| 1 Byte (H4 Type) | N Bytes (HCI Raw Data) |</code></pre><p>根据蓝牙 Core 规范，H4 定义了 5 种类型（对应不同 HCI 数据包）：</p><table><thead><tr><th>HCI 数据包类型</th><th>Type 值</th><th>方向与用途</th></tr></thead><tbody><tr><td>HCI Command</td><td><code>0x01</code></td><td>主机&rarr;控制器，由蓝牙协议栈发送给芯片的命令，发送控制命令（如 HCI_RESET）</td></tr><tr><td>HCI ACL Data</td><td><code>0x02</code></td><td>双向，蓝牙协议栈跟蓝牙芯片双向交互的普通数据，传输普通数据（如 BLE 连接数据）</td></tr><tr><td>HCI Synchronous Data (SCO)</td><td><code>0x03</code></td><td>双向，蓝牙芯片跟蓝牙协议栈双向交互的通话/语音识别等音频数据，传输实时音频（如传统语音通话）</td></tr><tr><td>HCI Event</td><td><code>0x04</code></td><td>控制器&rarr;主机，由蓝牙芯片上报给蓝牙协议栈的事件，上报事件（如命令完成、状态变化）</td></tr><tr><td>HCI ISO Data（Core 5.2+）</td><td><code>0x05</code></td><td>双向，用于发送LE audio，传输 LE Audio 的 ISO 同步数据（这部分是在core5.2才添加）</td></tr></tbody></table><h1 style="background-color:transparent">三、代码实现：H4 数据发送流程（以 HCI_RESET 为例）</h1><p>以下通过<strong>HCI_RESET 命令发送</strong>，解析 H4 的核心逻辑：</p><h2 style="background-color:transparent">3.1 缓冲区分配</h2><p>H4 需要额外 1 字节存储 Type，因此缓冲区长度 =&nbsp;<strong>HCI 原始数据长度 + 1</strong>：</p><pre><code>// BT_TRANSPORT_TYPE=0x02 表示H4模式struct bt_pbuf_t *p = bt_pbuf_alloc(BT_TRANSPORT_TYPE, HCI_RESET_PLEN + 1, BT_PBUF_RAM);</code></pre><h2>3.2 组装 HCI 原始数据</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过<code>hci_cmd_ass</code>函数构建 HCI 命令的 opcode、参数（如 HCI_RESET 的原始数据为<code>0x03 0x0c 0x00</code>）。</p><h2>3.3 插入 H4 Type</h2><ul><li>先通过<code>bt_pbuf_header</code>将缓冲区头部后移 1 字节，预留 Type 空间；</li><li>再填充类型（命令类型对应<code>0x01</code>）：</li></ul><pre><code>bt_pbuf_header(p, 1); // 头部后移1字节，腾出Type位置  ((uint8_t *)p-&gt;payload)[0] = PHYBUSIF_PACKET_TYPE_CMD; // 写入Type=0x01  </code></pre><h2>3.4 UART 发送</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;将 &ldquo;Type + HCI 数据&rdquo; 拷贝到 UART 发送缓冲区，最终通过<code>uart_bt_send</code>发送：</p><pre><code>uint8_t *tx_buffer = bt_get_tx_buffer();  bt_pbuf_copy_partial(p, tx_buffer, p-&gt;tot_len, 0); // 拷贝完整数据包  uart_bt_send(tx_buffer, p-&gt;tot_len); // UART发送  </code></pre><h1 style="background-color:transparent">四、UART 硬件配置要求</h1><p>为保证 H4 通信稳定，UART 需严格配置：</p><table><thead><tr><th>配置项</th><th>参数值</th><th>说明</th></tr></thead><tbody><tr><td>数据位</td><td>8 bit</td><td>标准 HCI 数据宽度</td></tr><tr><td>奇偶校验</td><td>无（No Parity）</td><td>避免校验位干扰</td></tr><tr><td>停止位</td><td>1 bit</td><td>最简同步方式</td></tr><tr><td>流控</td><td>硬件流控（RTS/CTS）</td><td>防止数据溢出（必选）</td></tr></tbody></table><h2 style="background-color:transparent">STM32 配置示例：</h2><pre><code>USART_InitStructure.USART_WordLength = USART_WordLength_8b;  USART_InitStructure.USART_StopBits = USART_StopBits_1;  USART_InitStructure.USART_Parity = USART_Parity_No;  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_RTS_CTS;  </code></pre><h2>Linux 配置示例（termios）：</h2><pre><code>toptions.c_cflag &amp;= ~CSTOPB; // 1停止位  toptions.c_cflag |= CS8;     // 8数据位  toptions.c_cflag &amp;= ~PARENB; // 无校验  toptions.c_cflag |= CRTSCTS; // 使能硬件流控  </code></pre><p></p><h1 style="background-color:transparent">五、同步与纠错机制</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 通信可能因噪声、波特率偏差等<strong>失步</strong>（如检测到无效 Type，或数据包长度异常），处理规则：</p><ol><li><p><strong>控制器&rarr;主机 失步</strong>：<br />控制器会上报&nbsp;<strong>HCI Hardware Error</strong>&nbsp;事件，主机需发送&nbsp;<strong>HCI_RESET 命令</strong>&nbsp;复位控制器，通过 &ldquo;HCI Reset 命令完成事件&rdquo; 重新同步。</p></li><li><p><strong>主机&rarr;控制器 失步</strong>：<br />主机检测到失步后，发送&nbsp;<strong>HCI_RESET 命令</strong>，控制器执行复位并恢复同步。</p></li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H4 通过 &ldquo;1 字节 Type&rdquo; 的极简设计，在 UART 上高效承载 HCI 数据；结合硬件流控和复位机制，保障了通信的可靠性。这种设计让 H4 成为资源受限场景（如嵌入式设备）的首选传输方案。</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth UART H4</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【Transport层篇】第三章 基础的串口（UART）通信</title>
    <link href="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%9A%84%E4%B8%B2%E5%8F%A3%EF%BC%88UART%EF%BC%89%E9%80%9A%E4%BF%A1/"/>
    <url>/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%9A%84%E4%B8%B2%E5%8F%A3%EF%BC%88UART%EF%BC%89%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、串口简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;串口（UART）是嵌入式系统与外设通信中最常用的接口之一，其 &ldquo;通用、异步、串行&rdquo; 的特性使其在低速数据传输场景中占据重要地位。本章将从基本概念、工作原理到实际特性，系统解析 UART 通信的核心知识。</p><h2 style="background-color:transparent">1.1 UART 的定义与核心作用</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART（Universal Asynchronous Receiver/Transmitter，通用异步接收 / 发送装置）是一种<strong>串行通信协议</strong>，通过两根数据线（发送线 TX、接收线 RX）实现设备间的双向数据传输，无需专用时钟线（&ldquo;异步&rdquo; 的核心特征）。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其核心作用是：将设备内部的并行数据（如 CPU 处理的 8 位字节）转换为串行数据（逐位传输）发送出去，同时将接收的串行数据转换为并行数据供设备处理，是 &ldquo;并行数据&rdquo; 与 &ldquo;串行传输&rdquo; 之间的桥梁。</p><h2 style="background-color:transparent">1.2 串行通信与并行通信的本质区别</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通信按数据传输方式可分为<strong>串行通信</strong>和<strong>并行通信</strong>，UART 属于典型的串行通信，二者的核心差异如下：</p><table><thead><tr><th><strong>维度</strong></th><th>串行通信（以 UART 为例）</th><th>并行通信（如 CPU 与内存）</th></tr></thead><tbody><tr><td><strong>数据线数量</strong></td><td>仅需 1-2 根（单工 1 根，全双工 2 根）</td><td>需多根（如 8 位数据需 8 根数据线，加控制线共十余根）</td></tr><tr><td><strong>传输方式</strong></td><td>数据位逐位依次传输（如 1 字节的 8 位分 8 次发送）</td><td>多个数据位同时传输（如 1 字节的 8 位同时发送）</td></tr><tr><td><strong>抗干扰能力</strong></td><td>强（少线传输，受干扰概率低）</td><td>弱（多线间存在串扰，高速时更明显）</td></tr><tr><td><strong>传输距离</strong></td><td>较长（通常数米至数十米，配合优化可达百米）</td><td>短（通常厘米级，高速时仅数厘米）</td></tr><tr><td><strong>硬件复杂度</strong></td><td>低（布线简单，适合小型设备）</td><td>高（布线复杂，成本高）</td></tr></tbody></table><p>串行</p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%9A%84%E4%B8%B2%E5%8F%A3%EF%BC%88UART%EF%BC%89%E9%80%9A%E4%BF%A1/4a05b0993f784b7c9fcf0508a569e267.png"></p><p>并行</p><p>&nbsp;<img alt="" height="233" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/d8acd906208242bf8423a5703504d875.png" width="508" /></p><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;举例</strong>：用 UART 传输字符 &ldquo;A&rdquo;（二进制<code>01000001</code>）时，需通过 TX 线分 8 次逐位发送；而并行通信则通过 8 根线同时发送这 8 位，速度更快但硬件成本更高。</p><h1 style="background-color:transparent">二、 UART 的硬件组成与工作流程</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 的硬件核心由三部分组成，协同完成数据的发送与接收：</p><ul><li><strong>发送器（Transmitter）</strong>：将设备内部的并行数据（如 8 位字节）转换为串行数据，按约定格式添加起始位、校验位、停止位，通过 TX 线发送。</li><li><strong>接收器（Receiver）</strong>：通过 RX 线接收串行数据，去除起始位、停止位（校验位可选），转换为并行数据供设备处理。</li><li><strong>波特率发生器（Baud Rate Generator）</strong>：生成稳定的时钟信号，控制数据位的传输速率（波特率），确保收发双方节奏一致。</li></ul><p><strong>工作流程示例</strong>（发送 &ldquo;A&rdquo;，8 位数据，无校验，1 位停止位）：</p><ol><li>发送器接收并行数据<code>01000001</code>（字符 &ldquo;A&rdquo; 的 ASCII 码）；</li><li>按 UART 格式封装：添加起始位（1 位低电平<code>0</code>）&rarr; 数据位（<code>01000001</code>）&rarr; 停止位（1 位高电平<code>1</code>），形成完整帧<code>0 01000001 1</code>；</li><li>发送器以约定波特率（如 115200 bps）将帧数据逐位通过 TX 线发送；</li><li>接收器通过 RX 线检测到起始位（低电平跳变），触发同步，按相同波特率逐位接收数据；</li><li>接收器去除起始位和停止位，将数据位<code>01000001</code>转换为并行数据，传递给设备内部处理。</li></ol><h1 style="background-color:transparent">三、UART 数据帧格式：异步通信的 &ldquo;规则&rdquo;</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 通过<strong>固定帧结构</strong>实现异步同步（无需时钟线），确保接收方正确解析数据。标准帧格式由 5 部分组成（按传输顺序）：</p><ol><li><p><strong>起始位（Start Bit）</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;1 位低电平（逻辑 0），标志数据传输开始。&lt;/li&gt;&lt;li&gt;作用：空闲时总线为高电平（逻辑 1），起始位的低电平跳变可触发接收方 &amp;ldquo;开始采样&amp;rdquo;，实现收发同步。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据位（Data Bits）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;5-9 位（常用 8 位），代表实际传输的数据（如 ASCII 字符、传感器数值）。&lt;/li&gt;&lt;li&gt;传输顺序：从最低位（LSB）到最高位（MSB），例如发送&lt;code&gt;01000001&lt;/code&gt;时，先传&lt;code&gt;1&lt;/code&gt;（最低位），最后传&lt;code&gt;0&lt;/code&gt;（最高位）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;校验位（Parity Bit，可选）&lt;/strong&gt;&lt;/p&gt;1 位，用于简单错误检测，根据数据位中 &amp;ldquo;1&amp;rdquo; 的数量计算：&lt;ul&gt;&lt;li&gt;无校验（None）：不添加校验位（常用，需上层协议保障可靠性）。&lt;/li&gt;&lt;li&gt;偶校验（Even）：数据位 + 校验位中 &amp;ldquo;1&amp;rdquo; 的总数为偶数；&lt;/li&gt;&lt;li&gt;奇校验（Odd）：数据位 + 校验位中 &amp;ldquo;1&amp;rdquo; 的总数为奇数；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;停止位（Stop Bit）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;1 位、1.5 位或 2 位高电平（逻辑 1），标志一帧数据结束。&lt;/li&gt;&lt;li&gt;作用：为接收方提供缓冲时间，确保下一帧起始位的低电平跳变可被准确识别。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;空闲位（Idle）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;总线空闲时为高电平（逻辑 1），无数据传输时持续保持，直到新帧的起始位到来。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p><strong>示例</strong>：8 位数据、奇校验、1 位停止位的帧结构<br />发送数据<code>01000001</code>（含 3 个 &ldquo;1&rdquo;）&rarr; 奇校验位为<code>0</code>（3+0=3，奇数）&rarr; 完整帧：<code>0（起始） 01000001（数据） 0（校验） 1（停止）</code>。</p><h1 style="background-color:transparent">四、波特率：UART 的 &ldquo;传输速度&rdquo;</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;波特率（Baud Rate）是 UART 的核心参数，定义为<strong>每秒传输的位数（bps，bit per second）</strong>，直接决定通信速度。</p><ul><li><p><strong>常见波特率</strong>：9600、19200、38400、115200、921600 bps 等（蓝牙模块常用 115200 或更高）。</p></li><li><p><strong>实际有效速率</strong>：需扣除起始位、校验位、停止位。例如：<br />波特率 115200 bps，8 位数据、无校验、1 位停止位 &rarr; 每帧含 10 位（1+8+1）&rarr; 有效字节速率 = 115200&divide;10=11520 字节 / 秒。</p></li><li><p><strong>同步原理</strong>：收发双方必须使用相同波特率，接收方通过起始位触发后，按波特率对应的时间间隔（如 115200 bps 对应每 bit 约 8.68&mu;s）采样数据，确保采样点落在数据位的中间（最稳定区域）。</p></li></ul><h1 style="background-color:transparent">五、通信方向：单工、半双工与全双工</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 支持全双工通信，其通信方向特性如下：</p><ul><li><strong>单工（Simplex）</strong>：数据仅能单向传输（如红外遥控器&rarr;电视），仅需 1 根数据线（TX 或 RX）。</li><li><strong>半双工（Half-Duplex）</strong>：数据可双向传输，但同一时刻只能单向进行（如对讲机），需 1 根数据线（分时收发）。</li><li><strong>全双工（Full-Duplex）</strong>：数据可同时双向传输（如手机通话），UART 通过 TX（发送）和 RX（接收）两根独立数据线实现，无需切换方向。</li></ul><h1 style="background-color:transparent">六、流控：避免数据丢失的 &ldquo;交通规则&rdquo;</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当发送方速率快于接收方处理速度时，可能导致接收方缓冲区溢出、数据丢失。UART 通过<strong>流控</strong>机制解决这一问题，分为两类：</p><ol><li><p><strong>硬件流控（Hardware Flow Control）</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;需额外两根线：RTS（Request To Send，发送请求）和 CTS（Clear To Send，发送允许）。&lt;/li&gt;&lt;li&gt;工作逻辑：&lt;ul&gt;&lt;li&gt;接收方准备好接收数据时，拉低 RTS（通知发送方 &amp;ldquo;可发送&amp;rdquo;）；&lt;/li&gt;&lt;li&gt;发送方检测到对方 CTS（即接收方 RTS）为低电平时，开始发送数据；&lt;/li&gt;&lt;li&gt;接收方缓冲区满时，拉高 RTS（禁止发送），发送方暂停传输。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;软件流控（Software Flow Control）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;无需额外硬件，通过特定字符（XON=0x11，XOFF=0x13）控制：&lt;ul&gt;&lt;li&gt;接收方缓冲区快满时，发送 XOFF（暂停发送）；&lt;/li&gt;&lt;li&gt;接收方处理完数据后，发送 XON（恢复发送）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;说明</strong>：硬件流控响应速度快、可靠性高，适合高速通信（如蓝牙 HCI 交互）；软件流控节省硬件资源，适合低速场景（如调试打印）。</p><hr /><p><span style="background-color:#f9eda6">注：基础串口硬件流控模式下&nbsp;</span><strong><span style="background-color:#f9eda6">四线制（TX, RX, RTS, CTS）</span></strong><span style="background-color:#f9eda6">&nbsp;的详细介绍表格：</span></p><table><thead><tr><th><strong><span style="background-color:#f9eda6">信号线</span></strong></th><th><strong><span style="background-color:#f9eda6">方向 (DTE视角)</span></strong></th><th><strong><span style="background-color:#f9eda6">全称</span></strong></th><th><strong><span style="background-color:#f9eda6">功能描述</span></strong></th></tr></thead><tbody><tr><td><strong><span style="background-color:#f9eda6">TX</span></strong></td><td><span style="background-color:#f9eda6">输出 &rarr;</span></td><td><span style="background-color:#f9eda6">Transmit Data</span></td><td><span style="background-color:#f9eda6">DTE 发送数据到 DCE（如：计算机 &rarr; 调制解调器）</span></td></tr><tr><td><strong><span style="background-color:#f9eda6">RX</span></strong></td><td><span style="background-color:#f9eda6">输入 &larr;</span></td><td><span style="background-color:#f9eda6">Receive Data</span></td><td><span style="background-color:#f9eda6">DTE 接收来自 DCE 的数据（如：计算机 &larr; 调制解调器）</span></td></tr><tr><td><strong><span style="background-color:#f9eda6">RTS</span></strong></td><td><span style="background-color:#f9eda6">输出 &rarr;</span></td><td><span style="background-color:#f9eda6">Request To Send</span></td><td><strong><span style="background-color:#f9eda6">DTE 通知 DCE</span></strong><span style="background-color:#f9eda6">：&ldquo;我已准备好接收数据，</span><strong><span style="background-color:#f9eda6">你可以发送</span></strong><span style="background-color:#f9eda6">&rdquo;（请求对方发送）</span></td></tr><tr><td><strong><span style="background-color:#f9eda6">CTS</span></strong></td><td><span style="background-color:#f9eda6">输入 &larr;</span></td><td><span style="background-color:#f9eda6">Clear To Send</span></td><td><strong><span style="background-color:#f9eda6">DCE 通知 DTE</span></strong><span style="background-color:#f9eda6">：&ldquo;我已准备好接收数据，</span><strong><span style="background-color:#f9eda6">你可以发送</span></strong><span style="background-color:#f9eda6">&rdquo;（允许本端发送）</span></td></tr></tbody></table><p style="background-color:transparent"><span style="background-color:#f9eda6">关键说明：</span></p><ol><li><p><strong><span style="background-color:#f9eda6">硬件流控作用</span></strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;通过&amp;nbsp;&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;RTS/CTS 信号自动协调&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;数据传输，避免因缓冲区满导致的数据丢失（&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;解决&amp;ldquo;过载&amp;rdquo;问题&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;）。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;当接收方无法处理数据时，通过拉低 CTS 信号暂停发送方传输。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;信号方向&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;DTE (数据终端设备)&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;：如计算机、单片机&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;DCE (数据通信设备)&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;：如调制解调器、串口模块&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;RTS 是 DTE 的输出 &amp;rarr; DCE 的输入&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;CTS 是 DCE 的输出 &amp;rarr; DTE 的输入&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;流控交互流程&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;步骤&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;DTE 动作&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;DCE 动作&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;1&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;置高 RTS：&amp;quot;&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;我可以接收&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;检测到 RTS 高电平&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;2&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;等待 CTS 高电平&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;若就绪，置高 CTS：&amp;quot;&lt;/span&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;你可以发送&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;3&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;开始发送 TX 数据&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;接收数据&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;4&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;若 DCE 缓冲区满&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;拉低 CTS&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;：&amp;quot;暂停发送！&amp;quot;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;5&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;立即停止发送&lt;/span&gt;&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;缓冲区空后重新置高 CTS&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;物理连接&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;直连方案&lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;（DTE 与 DCE 连接）：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;text&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;</code></pre><p><span style="background-color:#f9eda6">DTE_TX  &rarr; DCE_RX<br>DTE_RX  &larr; DCE_TX<br>DTE_RTS &rarr; DCE_CTS<br>DTE_CTS &larr; DCE_RTS  </span></pre><br></li><br><li><br><p><strong><span style="background-color:#f9eda6">交叉方案</span></strong><span style="background-color:#f9eda6">（两台 DTE 直连需交叉 RTS&#x2F;CTS）：</span></p></p><pre><code class="hljs">&lt;p&gt;&lt;span style=&quot;background-color:#f9eda6&quot;&gt;text&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;</code></pre><p><span style="background-color:#f9eda6">DTE1_RTS &rarr; DTE2_CTS<br>DTE1_CTS &larr; DTE2_RTS  </span></pre><br></li><br></ul><br></li></p></ol><p style="background-color:transparent"><span style="background-color:#f9eda6">应用场景</span></p><ul><li><p><span style="background-color:#f9eda6">高速串口通信（&ge;115200 bps）</span></p></li><li><p><span style="background-color:#f9eda6">大数据量传输（如文件传输、视频流控制）</span></p></li><li><p><span style="background-color:#f9eda6">嵌入式设备与模组通信（如4G模块、GPS模块）</span></p></li></ul><blockquote><p><strong><span style="background-color:#f9eda6">注意</span></strong><span style="background-color:#f9eda6">：若无需流控，仅&nbsp;</span><strong><span style="background-color:#f9eda6">TX/RX 2根线</span></strong><span style="background-color:#f9eda6">即可工作；启用硬件流控需&nbsp;</span><strong><span style="background-color:#f9eda6">4根线</span></strong><span style="background-color:#f9eda6">（TX+RX+RTS+CTS）。RTS/CTS 是硬件流控的核心，可显著提升通信可靠性。</span></p></blockquote><hr /><p>&nbsp;（注：因为蓝牙产品会用到可靠的硬件流控，所以这里补充说明了一下。）</p><h1 style="background-color:transparent">七、UART 的优缺点与典型应用</h1><p><strong>优点</strong>：</p><ul><li>硬件简单：仅需 2-4 根线（TX、RX、RTS、CTS），布线成本低；</li><li>灵活性高：支持不同波特率、数据位配置，适配多种设备；</li><li>全双工：可同时收发，适合交互场景。</li></ul><p><strong>缺点</strong>：</p><ul><li>速率有限：最高通常不超过 10Mbps（远低于 USB、SPI）；</li><li>抗干扰弱：TTL 电平信号易受电磁干扰，传输距离短（通常数米）；</li><li>无时钟线：波特率误差超过 3% 可能导致数据错误（需严格匹配）。</li></ul><p><strong>典型应用</strong>：</p><ul><li>嵌入式调试（通过 UART 打印日志）；</li><li>传感器数据传输（如温湿度传感器&rarr;MCU）；</li><li>蓝牙模块交互（如 MCU 通过 UART 控制蓝牙模块发送 AT 指令）；</li><li>低速外设通信（如 GPS 模块、RFID 读卡器）。</li></ul><h1 style="background-color:transparent">八、基础串口小结</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 作为一种通用异步串行通信协议，通过简洁的硬件设计和灵活的配置，成为嵌入式系统中低速数据传输的首选方案。其核心是通过固定帧结构（起始位、数据位、停止位）实现异步同步，通过波特率控制传输速度，通过流控机制保障可靠性。理解 UART 的工作原理，是掌握蓝牙模块交互、传感器通信等场景的基础。</p><h1>九、补充说明</h1><h2>9.1 RS485</h2><p>请参考：<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="【STM32】基于标准库和HAL库分别实现RS485通信方式-CSDN博客" href="https://blog.csdn.net/qq_73648789/article/details/149055140?spm=1001.2014.3001.5502" title="【STM32】基于标准库和HAL库分别实现RS485通信方式-CSDN博客">【STM32】基于标准库和HAL库分别实现RS485通信方式-CSDN博客</a></p><h2 style="background-color:transparent">9.2 RS232</h2><h3 style="background-color:transparent">9.2.1 RS232：UART 物理层的标准化升级</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS232（全称 EIA-RS-232）是串行通信领域首个标准化接口规范，由美国电子工业协会（EIA）于 1970 年联合设备厂商制定，旨在解决基础 UART 在实际应用中的兼容性问题。它并非替代 UART 的协议，而是对 UART<strong>物理层</strong>（接口形式、电平标准、抗干扰设计）的规范化定义，让不同厂商的设备能通过统一标准实现串行通信。</p><h3 style="background-color:transparent">9.2.2&nbsp;RS232 的核心价值：解决 UART 的三大痛点</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;基础 UART 虽能实现串行通信，但存在接口混乱、电平不统一、抗干扰弱等问题，RS232 针对性地给出了解决方案：</p><h4 style="background-color:transparent">（1）接口标准化：统一硬件连接形式</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 仅定义了信号名称（如 TX、RX），但未规定物理接口（如连接器类型、引脚排列），导致不同设备间难以直接对接。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS232 通过<strong>DB9 连接器</strong>（9 针插头 / 插座）统一了接口标准，所有遵循 RS232 的设备均采用相同的引脚定义和机械尺寸，彻底解决了 &ldquo;线不对口&rdquo; 的兼容问题。&nbsp;</p><h4>（2）电平规范化：提升抗干扰能力</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 采用 TTL 电平（通常 3.3V 或 5V，逻辑 1 为高电平、逻辑 0 为低电平），但未统一电平范围，且低电压信号易受电磁干扰（如工业环境中的电机噪声）。<br />RS232 重新定义了电平标准：</p><ul><li>逻辑 &ldquo;1&rdquo;（MARK）：-5V~-15V（负电压）；</li><li>逻辑 &ldquo;0&rdquo;（SPACE）：+5V~+15V（正电压）；</li><li>噪声容限：&plusmn;2V（即接收器会将 + 3V 以下视为逻辑 1，-3V 以上视为逻辑 0）。</li></ul><p>通过正负电压差（最小 10V）传输信号，RS232 能有效抵抗环境噪声，大幅提升通信稳定性。</p><h4 style="background-color:transparent">（3）延长传输距离：突破 UART 的短距限制</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 的 TTL 电平信号传输距离通常仅数米（受噪声干扰限制），而 RS232 通过高电压信号和抗干扰设计，在无中继的情况下可稳定传输<strong>30 米</strong>；若配合光电隔离（20mA 电流环）或 Modem（调制解调器），传输距离可延伸至千米级甚至更远（如通过电话线、光纤传输）。</p><h3 style="background-color:transparent">9.2.3 RS232 的核心特性：协议层兼容，物理层优化</h3><ul><li><strong>与 UART 的关系</strong>：RS232 不改变 UART 的协议逻辑（如数据帧格式、波特率、软件编程接口），仅优化物理层。因此，RS232 通信的软件实现（如串口初始化、数据收发代码）与 UART 完全一致，开发者无需修改程序即可适配。</li><li><strong>通信模式</strong>：仅支持<strong>一对一通信</strong>（点到点），无法像 RS485 那样实现多设备组网。</li></ul><h3 style="background-color:transparent">9.2.4 DB9 接口：RS232 的 &ldquo;标准化连接器&rdquo;</h3><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90Transport%E5%B1%82%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%9A%84%E4%B8%B2%E5%8F%A3%EF%BC%88UART%EF%BC%89%E9%80%9A%E4%BF%A1/429134a2046d4aff97fac77dc9087d70.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS232 最常用的接口是<strong>DB9</strong>（9 针），其引脚定义严格规范了信号功能和传输方向，以下是各引脚的核心说明（蓝牙场景重点关注标红部分）：</p><table><thead><tr><th>引脚编号</th><th>定义（全称）</th><th>传输方向</th><th>功能说明</th></tr></thead><tbody><tr><td>1</td><td>DCD（Data Carrier Detect）</td><td>&larr;</td><td>数据载波检测：DCE（如 Modem）通知 DTE（如计算机）&ldquo;已检测到载波信号&rdquo;</td></tr><tr><td>2</td><td>RXD（Receive Data）</td><td>&larr;</td><td>接收数据：DTE 从 DCE 接收串行数据（对应 UART 的 RX 线）</td></tr><tr><td>3</td><td>TXD（Transmit Data）</td><td>&rarr;</td><td>发送数据：DTE 向 DCE 发送串行数据（对应 UART 的 TX 线）</td></tr><tr><td>4</td><td>DTR（Data Terminal Ready）</td><td>&rarr;</td><td>终端就绪：DTE 通知 DCE &ldquo;自身已准备好接收数据&rdquo;</td></tr><tr><td>5</td><td>GND（Ground）</td><td>&mdash;</td><td>信号地：为所有信号提供参考电位（必须连接，否则电平无法正确识别）</td></tr><tr><td>6</td><td>DSR（Data Set Ready）</td><td>&larr;</td><td>设备就绪：DCE 通知 DTE &ldquo;自身已准备好通信&rdquo;（如 Modem 已拨号成功）</td></tr><tr><td>7</td><td>RTS（Request To Send）</td><td>&rarr;</td><td>请求发送：DTE 向 DCE 请求发送数据（硬件流控信号，对应 UART 的 RTS）</td></tr><tr><td>8</td><td>CTS（Clear To Send）</td><td>&larr;</td><td>允许发送：DCE 通知 DTE &ldquo;可开始发送数据&rdquo;（硬件流控信号，对应 UART 的 CTS）</td></tr><tr><td>9</td><td>RI（Ring Indicator）</td><td>&larr;</td><td>振铃指示：DCE 通知 DTE &ldquo;检测到外部呼叫&rdquo;（如 Modem 接到电话振铃）</td></tr></tbody></table><p><strong>蓝牙场景的简化应用</strong>：<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙模块与上位机（如 PC、MCU）通过 RS232 通信时，无需使用全部引脚，核心只需连接 4 根线：</p><ul><li>TXD（3 脚）：蓝牙模块&rarr;上位机（发送数据）；</li><li>RXD（2 脚）：上位机&rarr;蓝牙模块（接收数据）；</li><li>RTS（7 脚）+ CTS（8 脚）：硬件流控（可选，高速通信时必接）；</li><li>GND（5 脚）：信号地（必须连接，否则电平紊乱）。</li></ul><h3 style="background-color:transparent">9.2.5 硬件设计关键：TTL 与 RS232 的电平转换</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UART 设备（如蓝牙模块、MCU）通常输出 TTL 电平（3.3V/5V），而 RS232 设备（如 PC 的 DB9 串口）使用 &plusmn;15V 电平，二者无法直接连接，必须通过<strong>电平转换芯片</strong>实现信号转换。</p><ul><li><strong>典型转换芯片</strong>：MAX232、SP3232 等（支持 3.3V 或 5V 供电）；</li><li><strong>转换原理</strong>：将 TTL 的高电平（3.3V/5V）转为 RS232 的 + 5V~+15V（逻辑 0），将 TTL 的低电平（0V）转为 RS232 的 - 5V~-15V（逻辑 1）；</li><li><strong>电路架构</strong>：UART 设备 &rarr; 转换芯片 &rarr; DB9 接口 &rarr; 另一端 RS232 设备（如 PC）。</li></ul><h3 style="background-color:transparent">9.2.6 RS232 的应用与局限性</h3><h4 style="background-color:transparent">（1）典型应用场景</h4><ul><li>传统计算机与外设通信（如老式 PC 的串口与蓝牙模块调试）；</li><li>工业设备本地调试（如 PLC 通过 RS232 连接蓝牙网关）；</li><li>低速数据传输（如 POS 机、考勤机与主机通信）。</li></ul><h4>（2）局限性</h4><ul><li>仅支持一对一通信，无法组网；</li><li>速率较低（通常&le;115200 bps，高速时抗干扰能力下降）；</li><li>电缆成本高（需屏蔽线减少干扰）；</li><li>逐渐被 USB、以太网等替代，但在工业和传统设备中仍广泛存在。</li></ul><h3 style="background-color:transparent">9.2.7 RS232 小结</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS232 是 UART 物理层的标准化升级，通过统一接口（DB9）、规范电平（&plusmn;15V）、增强抗干扰能力，解决了早期串行通信的兼容性和可靠性问题。它不改变 UART 的协议逻辑，却大幅扩展了串行通信的应用场景（如中短距离设备互联）。在蓝牙领域，RS232 常用于模块与上位机的调试或近距离数据传输，是理解更复杂串行标准（如 RS485）的基础。</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>串口</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【基础篇】第二章 关于蓝牙协议栈架构与其硬件方案架构大致概述</title>
    <link href="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/"/>
    <url>/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、蓝牙技术概述</h1><h3>1.1 蓝牙技术概述</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙协议包含两种核心技术：Basic Rate（BR，基本速率）和 Low Energy（LE，低功耗）。两者虽均具备搜索管理、连接管理等基础机制，但技术体系相互独立、无法直接互通。若设备厂商仅实现其中一种技术，该设备只能与同样支持该技术的设备通信；若需确保与所有蓝牙设备兼容，则必须同时集成两种技术，无论实际应用是否需要。</p><h4>1.1.1 Basic Rate（BR）</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BR 是蓝牙的经典技术，可包含两类扩展技术：可选的 Enhanced Data Rate（EDR，增强数据速率），以及交替使用的 Alternate MAC and PHY layer extension（AMP，交替 MAC 与 PHY 层扩展）。</p><ul><li><strong>BR</strong>：作为早期蓝牙技术，其最高传输速率为 721.2Kbps，在推出时属于高端技术。</li><li><strong>EDR</strong>：是 BR 的增强版本，通过技术升级将理论速率提升至 2.1Mbps，属于 BR 的可选扩展，可与 BR 同时存在。</li><li><strong>AMP</strong>：进一步提升速率至理论 54Mbps，但由于其物理层和 MAC 层与 BR/EDR 差异显著，两者无法同时工作，需交替使用（即 BR/EDR 与 AMP 只能二选一）。</li></ul><p><span style="background-color:#f9eda6">注：</span></p><p><span style="background-color:#f9eda6">在蓝牙技术中，</span><strong><span style="background-color:#f9eda6">AMP</span></strong><span style="background-color:#f9eda6">&nbsp;是&nbsp;</span><strong><span style="background-color:#f9eda6">Alternate MAC and PHY layer extension</span></strong><span style="background-color:#f9eda6">&nbsp;的缩写，中文译为</span><strong><span style="background-color:#f9eda6">交替 MAC 与 PHY 层扩展</span></strong><span style="background-color:#f9eda6">。它是经典蓝牙（BR 技术）的一种扩展技术，主要作用是提升数据传输速率 &mdash;&mdash; 理论上可达到 54Mbps，远高于基础的 BR（721.2Kbps）和 EDR（2.1Mbps）。不过，由于 AMP 的物理层（PHY）和媒体访问控制层（MAC）与 BR/EDR（基本速率 / 增强数据速率）差异显著，两者无法同时工作，必须 &ldquo;交替使用&rdquo;（即同一时间只能启用 BR/EDR 或 AMP 中的一种），这也是其名称中 &ldquo;Alternate（交替）&rdquo; 的由来。</span></p><h4>1.1.2 Low Energy（LE）</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BR 技术的演进方向是不断提升传输速率，但高速率往往伴随高能耗。而许多场景对速率要求不高，却极度关注功耗，蓝牙低功耗技术（LE）由此诞生。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LE 是蓝牙技术联盟专为低功耗场景设计的个人局域网技术，广泛应用于医疗保健、运动健身、信标、安防、家庭娱乐及 IoT（物联网）产品领域。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;尽管 LE 与经典蓝牙（BR/EDR）同属蓝牙体系，且均使用 2.4GHz 无线电频率（双模设备可共享天线），但两者技术差异极大，堪称 &ldquo;同名不同技&rdquo;：LE 采用更简单的调制系统，功耗远低于经典蓝牙。</p><p>经典蓝牙与低功耗蓝牙的核心技术规范对比如下：</p><table><thead><tr><th>技术规范</th><th>经典蓝牙（BT，含 BR/EDR）</th><th>低功耗蓝牙（BLE）</th></tr></thead><tbody><tr><td>无线电频率</td><td>2.4GHz</td><td>2.4GHz</td></tr><tr><td>通信距离</td><td>约 10 米</td><td>最大 100 米</td></tr><tr><td>发送数据耗时</td><td>100ms</td><td>＜3ms</td></tr><tr><td>响应延时</td><td>约 100ms</td><td>6ms</td></tr><tr><td>安全性</td><td>64/128-bit 及应用层自定义</td><td>128-bit AES 及应用层自定义</td></tr><tr><td>能耗（参考值）</td><td>100%</td><td>1%-50%</td></tr><tr><td>空中传输速率</td><td>1-3Mb/s</td><td>1Mb/s</td></tr><tr><td>主要应用场景</td><td>手机、游戏机、耳机、汽车、PC</td><td>手机、游戏机、PC、智能穿戴、汽车、家用电子</td></tr></tbody></table><p><span style="background-color:#fefcd8">注：容易混淆的蓝牙名称：</span><br /><span style="background-color:#fefcd8">&nbsp; &nbsp; &nbsp; &nbsp; 主要在于经典蓝牙BT与低功耗蓝牙BLE的区别。</span></p><p><span style="background-color:#fefcd8">&nbsp; &nbsp; &nbsp; &nbsp; BT、BR、Basic Rate、EDR、BR/EDR、AMP一般统统都是经典蓝牙。</span></p><p><span style="background-color:#fefcd8">&nbsp; &nbsp; &nbsp; &nbsp; BLE、Bluetooth Low Energy 、Bluetooth Smart、LE指的是低功耗蓝牙。</span></p><p><span style="background-color:#fefcd8">&nbsp; &nbsp; &nbsp; &nbsp; 双模蓝牙是经典蓝牙和低功耗蓝牙的结合，它可以同时支持这两种技术。</span></p><hr /><h1>二、蓝牙协议栈的架构概述</h1><h2>2.1&nbsp;<strong>协议栈（Protocol Stack）</strong></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在通信技术中，<strong>协议栈（Protocol Stack）</strong>&nbsp;是指一组按层次结构组织的通信协议集合，每层协议负责特定的通信功能，且上层协议依赖下层协议提供的服务，共同实现不同设备或系统之间的有序、可靠通信。</p><h3>2.1.1 核心含义：</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通信过程涉及数据的封装、传输、解析、错误处理、安全验证等多个环节，单一协议难以覆盖所有细节。协议栈通过 &ldquo;分层&rdquo; 将复杂功能拆解：</p><ul><li>底层协议（如物理层、数据链路层）负责处理硬件接口、信号传输、数据帧封装等基础工作；</li><li>上层协议（如网络层、传输层、应用层）负责数据路由、传输控制、应用数据解析等逻辑处理。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例如，蓝牙协议栈包含物理层（PHY）、链路层（LL）、主机控制接口（HCI）、逻辑链路控制与适配协议（L2CAP）等多层协议，每层各司其职，最终实现设备间的蓝牙通信。</p><h3>2.1.2 在通信技术中的位置：软件部分</h3><p>协议栈的核心是<strong>软件逻辑</strong>，其本质是对通信规则（协议）的代码实现。</p><ul><li>底层协议（如物理层协议）可能需要与硬件（如射频芯片、控制器）交互，但协议栈本身的逻辑（如数据帧的格式定义、传输时序控制、错误校验算法等）是通过软件（固件、驱动或应用程序）实现的；</li><li>上层协议（如应用层协议）则完全由软件实现，负责将用户数据按照协议规则处理后，通过下层协议传递。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简单说，硬件（如芯片、天线）提供物理传输能力，而协议栈（软件）定义了 &ldquo;如何使用硬件&rdquo; 进行有效通信 &mdash;&mdash; 硬件是 &ldquo;载体&rdquo;，协议栈是 &ldquo;操作系统&rdquo;，二者协同工作，但协议栈本身属于软件部分。</p><h2>2.2 蓝牙协议栈的前提知识储备</h2><h3><span style="background-color:#dad5e9">2.2.1 HCI</span></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙的&nbsp;<strong>HCI（Host Controller Interface，主机控制器接口）</strong>&nbsp;是蓝牙协议栈中至关重要的标准化接口，其核心作用是实现 &ldquo;主机（Host）&rdquo; 与 &ldquo;控制器（Controller）&rdquo; 的分离与通信，是蓝牙技术模块化、标准化设计的核心体现。以下从定位、组成、交互逻辑、规范细节及意义等方面详细介绍：</p><h4><span style="color:#0d0016"><span style="background-color:#ffd7b9">（1）核心定位：分离 &ldquo;软&rdquo; 与 &ldquo;硬&rdquo; 的 &ldquo;中间层&rdquo;</span></span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙协议栈按功能分为&nbsp;<strong>主机（Host）</strong>&nbsp;和&nbsp;<strong>控制器（Controller）</strong>&nbsp;两大模块：</p><ul><li><strong>主机（Host）</strong>：以软件为主，负责高层协议与逻辑处理，例如经典蓝牙的 L2CAP、RFCOMM、SDP，或低功耗蓝牙（BLE）的 GAP、GATT 等，本质是 &ldquo;决策层&rdquo;，决定 &ldquo;做什么&rdquo;（如发起连接、查询设备、传输数据）。</li><li><strong>控制器（Controller）</strong>：以硬件 + 固件为主，负责底层信号处理，例如物理层（PHY）、媒体访问控制（MAC）、链路管理（经典蓝牙的 LMP 或 BLE 的 LL），本质是 &ldquo;执行层&rdquo;，负责 &ldquo;怎么做&rdquo;（如无线电信号收发、信道切换、物理连接维护）。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;而&nbsp;<strong>HCI 正是连接这两层的 &ldquo;桥梁&rdquo;</strong>：它定义了主机如何向控制器发送指令、控制器如何反馈状态，以及两者如何传输数据，让 &ldquo;决策&rdquo; 与 &ldquo;执行&rdquo; 既能分离开发，又能高效协作。</p><h4><span style="color:#0d0016"><span style="background-color:#ffd7b9">（2）HCI 的组成：逻辑协议 + 物理接口</span></span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HCI 并非单一的 &ldquo;软件&rdquo; 或 &ldquo;硬件&rdquo;，而是一套 &ldquo;规范集合&rdquo;，包含两部分核心内容：</p><h5><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#cbe0f1">1）&nbsp;逻辑协议：定义 &ldquo;数据交互规则&rdquo;</span></h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这是 HCI 的核心，规定了主机与控制器之间交换的信息格式、类型和语义，包括三大类交互：</p><ul><li><p><strong>命令（Commands）</strong>：主机&rarr;控制器的 &ldquo;指令&rdquo;，用于控制控制器执行特定操作。<br />例如：&ldquo;开始扫描周围设备&rdquo;&ldquo;建立与某设备的连接&rdquo;&ldquo;设置发射功率&rdquo; 等。<br />命令格式标准化：由&nbsp;<strong>操作码（Opcode）</strong>&nbsp;+&nbsp;<strong>参数（Parameters）</strong>&nbsp;组成。</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;操作码（Opcode）：由 16 位二进制构成，前 6 位为 &amp;ldquo;命令组（OGF，Opcode Group Field）&amp;rdquo;，后 10 位为 &amp;ldquo;命令码（OCF，Opcode Command Field）&amp;rdquo;。&lt;br /&gt;例如：OGF=0x01（链路控制组）、OCF=0x0001（&amp;ldquo;建立连接&amp;rdquo; 命令），组合后唯一标识一个命令。&lt;/li&gt;&lt;li&gt;参数：根据命令类型携带具体信息（如目标设备地址、连接参数等）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;事件（Events）&lt;/strong&gt;：控制器&amp;rarr;主机的 &amp;ldquo;反馈&amp;rdquo;，用于告知命令执行结果或异步状态变化。&lt;br /&gt;例如：&amp;ldquo;扫描完成，发现 3 个设备&amp;rdquo;&amp;ldquo;连接成功&amp;rdquo;&amp;ldquo;连接断开（原因：信号弱）&amp;rdquo; 等。&lt;br /&gt;事件格式标准化：由&amp;nbsp;&lt;strong&gt;事件码（Event Code）&lt;/strong&gt;&amp;nbsp;+&amp;nbsp;&lt;strong&gt;参数（Parameters）&lt;/strong&gt;&amp;nbsp;组成。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;事件码：8 位二进制，标识事件类型（如 0x01=&amp;ldquo;命令完成&amp;rdquo;、0x02=&amp;ldquo;命令状态&amp;rdquo;、0x05=&amp;ldquo;连接完成&amp;rdquo;）。&lt;/li&gt;&lt;li&gt;参数：携带事件细节（如命令执行结果、错误码、设备信息等）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;数据（Data）&lt;/strong&gt;：主机与控制器之间的 &amp;ldquo;业务数据&amp;rdquo; 传输（双向）。&lt;br /&gt;例如：应用层的文件、音频数据，经主机高层协议处理后，通过 HCI 传给控制器发送；控制器接收的无线信号解析后，通过 HCI 传给主机处理。&lt;br /&gt;数据帧格式：包含 &amp;ldquo;数据长度&amp;rdquo;+&amp;ldquo; payload（有效数据）&amp;rdquo;，根据蓝牙类型（经典蓝牙 / BLE）或物理接口略有差异。&lt;/p&gt;&lt;/li&gt;</code></pre></ul><h5><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#cbe0f1">2）&nbsp;物理接口：定义 &ldquo;实际传输载体&rdquo;</span></h5><p>逻辑协议需要通过具体的物理链路实现，HCI 支持多种标准化物理接口，适配不同设备场景：</p><ul><li><strong>UART（异步串口）</strong>：最常见于嵌入式设备（如蓝牙模块、智能硬件），优点是硬件简单、成本低，速率通常在 115200bps~1Mbps。</li><li><strong>USB</strong>：电脑、手机等设备的主流接口，速率高（USB 2.0 可达 480Mbps），支持即插即用，适合大数据量传输（如音频、文件）。</li><li><strong>SDIO</strong>：较少见，主要用于部分移动设备（如早期手机），通过 SD 卡接口传输，速率中等。</li><li><strong>PCM（脉冲编码调制）</strong>：专为音频设计，用于蓝牙音频设备（如耳机）的实时语音传输。</li></ul><p><strong>关键特点</strong>：无论采用哪种物理接口，上层的逻辑协议（命令 / 事件 / 数据格式）完全一致，确保 &ldquo;换接口不换逻辑&rdquo;，提升兼容性。</p><h4><span style="background-color:#ffd7b9">（3）HCI 在经典蓝牙与 BLE 中的差异</span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HCI 是蓝牙技术的通用接口（经典蓝牙和 BLE 均支持），但因两者底层协议不同，HCI 的 &ldquo;命令集&rdquo; 略有差异：</p><ul><li><strong>经典蓝牙（BR/EDR）</strong>：控制器包含 LMP（链路管理协议），因此 HCI 命令多与 LMP 交互相关（如链路加密、功率控制、同步连接）。</li><li><strong>BLE</strong>：控制器包含 LL（链路层），因此 HCI 命令多与 LL 交互相关（如广播控制、连接参数更新、广告包发送）。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但核心交互逻辑（命令&rarr;事件&rarr;数据）完全一致，仅具体命令的 &ldquo;功能范围&rdquo; 因底层协议差异而不同。</p><h4><span style="background-color:#ffd7b9">（4）HCI 的核心意义</span></h4><ol><li><strong>兼容性保障</strong>：不同厂商的主机（如 Windows 蓝牙驱动）和控制器（如高通蓝牙芯片），只要遵循 HCI 规范，就能无缝对接（例如电脑的 USB 蓝牙适配器，无论品牌，都能被系统识别）。</li><li><strong>开发简化</strong>：主机开发者无需关注控制器的硬件细节（如射频电路、芯片型号），只需调用 HCI 命令即可控制蓝牙功能；控制器厂商只需实现 HCI 接口，无需关心上层应用逻辑。</li><li><strong>灵活扩展</strong>：同一主机可适配不同物理接口的控制器（如电脑既可用 USB 蓝牙适配器，也可通过 UART 连接蓝牙模块），适应多样化设备需求。</li></ol><h4><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#ffd7b9">总结</span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HCI 是蓝牙协议栈的 &ldquo;神经中枢&rdquo;，通过标准化的逻辑协议和物理接口，实现了高层软件（主机）与底层硬件（控制器）的解耦。它不仅是技术规范，更是蓝牙设备兼容、开发高效的核心保障，无论是经典蓝牙还是 BLE，其模块化设计都离不开 HCI 的支撑。</p><h3><span style="background-color:#dad5e9">2.2.2&nbsp;BT Controller</span><strong><span style="background-color:#dad5e9">（蓝牙控制器）</span></strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong><span style="background-color:null">&nbsp;BT Controller</span></strong>指的是蓝牙芯片，包括BR/EDR芯片（蓝牙2.1芯片），AMP芯片（蓝牙3.0芯片），LE芯片（蓝牙4.0芯片），芯片层面会有2种模式，包括：</p><ul><li>单模芯片：仅支持&nbsp;<strong>BR/EDR（传统）</strong>&nbsp;或仅支持&nbsp;<strong>LE（低功耗）</strong>（例如早期蓝牙音箱多为单模 BR/EDR，多数 BLE 传感器为单模 LE）。</li><li>双模芯片：同时支持&nbsp;<strong>BR/EDR + LE</strong>（例如手机蓝牙芯片，既可以连传统蓝牙耳机，也可以连 BLE 手环）。</li><li><strong>BR/EDR、AMP、LE 的本质</strong>：<ul><li><strong>BR/EDR</strong>（Basic Rate/Enhanced Data Rate）是 &ldquo;经典蓝牙&rdquo; 的核心技术，从蓝牙 1.0 到 3.0 均以其为基础（如蓝牙 2.1 是 BR/EDR 的一个版本，优化了配对等功能），负责中高速数据传输（如音频、文件），属于 &ldquo;传统蓝牙&rdquo; 技术范畴。</li><li><strong>AMP</strong>（Alternate MAC/PHY，交替射频）是蓝牙 3.0 引入的扩展技术，允许控制器通过其他射频（如 Wi-Fi）传输高速数据（理论速率达 24Mbps），本质是对 BR/EDR 的补充，仍属于控制器的硬件功能模块。</li><li><strong>LE</strong>（Low Energy，低功耗）是蓝牙 4.0 引入的全新技术，专注低功耗、短距离通信（如传感器数据），与 BR/EDR 是平行的两种射频技术，而非 &ldquo;4.0 以上&rdquo; 的专属。</li></ul></li></ul><p><span style="background-color:#fefcd8">补充：</span></p><ul><li><p><span style="background-color:#fefcd8">蓝牙 4.0 是</span><strong><span style="background-color:#fefcd8">第一个同时支持 BR/EDR（传统）和 LE（低功耗）</span></strong><span style="background-color:#fefcd8">&nbsp;的版本（即 &ldquo;双模&rdquo; 的起点），并非 &ldquo;4.0 以上就是低功耗蓝牙&rdquo;。</span></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color:#fefcd8&quot;&gt;低功耗蓝牙（BLE）的核心技术是从 4.0 开始引入的，后续的 5.0、5.1、5.3 等版本是对 BLE 的性能升级（如更远距离、更快速率），但 BLE 本身是一种技术类型，而非 &amp;ldquo;4.0 以上的版本统称&amp;rdquo;。&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;background-color:#fefcd8&quot;&gt;传统蓝牙（BR/EDR）在 4.0 及以上版本中并未消失，而是可以与 LE 共存于 &amp;ldquo;双模芯片&amp;rdquo; 中（如蓝牙 5.0 芯片既支持 BLE 的新特性，也可兼容传统 BR/EDR 的音频传输）。&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><ul><li><span style="background-color:#fefcd8">蓝牙版本（如 4.0、5.0）是技术规范的版本号，而非 &ldquo;传统 / 低功耗&rdquo; 的划分依据；</span></li><li><span style="background-color:#fefcd8">LE 是一种技术类型（低功耗），BR/EDR 是另一种（传统），两者可在同一版本（如 4.0 及以上）中通过双模芯片共存。</span></li></ul><h3><span style="background-color:#dad5e9">2.2.3 Controller（控制器）的类别</span></h3><p>蓝牙协议栈的<strong>下层硬件 + 固件部分</strong>，负责底层射频（PHY）、链路管理（如经典蓝牙的 LMP、BLE 的 LL），分为三类：</p><ul><li><strong>LE Controller</strong>：仅支持&nbsp;<strong>低功耗蓝牙（BLE）</strong>&nbsp;技术（蓝牙 4.0 + 引入，专注低功耗、短数据传输）。</li><li><strong>BR/EDR Controller</strong>：仅支持&nbsp;<strong>经典蓝牙</strong>&nbsp;技术（Basic Rate/Enhanced Data Rate，负责中高速数据 / 音频传输，如蓝牙 2.1~3.0）。</li><li><strong>AMP Controller</strong>（Alternate MAC/PHY）：蓝牙 3.0 引入的<strong>辅助射频控制器</strong>，允许借用其他射频（如 Wi-Fi）传输高速数据（理论速率达 24Mbps），需依赖主控制器（BR/EDR）管理。</li></ul><h3>&nbsp;<span style="background-color:#dad5e9">2.2.4&nbsp;BT Host</span><strong><span style="background-color:#dad5e9">（蓝牙主机）</span></strong></h3><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BT Host 是蓝牙协议栈中位于 HCI 之上的 &ldquo;主机层&rdquo;</strong>，以软件为主，负责高层协议逻辑处理，不直接接触硬件。它包含的核心模块因技术类型不同而有差异：</p><ul><li>针对&nbsp;<strong>经典蓝牙（BR/EDR）</strong>：Host 包含 L2CAP（逻辑链路控制与适配协议）、RFCOMM（串口仿真协议）、SDP（服务发现协议）等。</li><li>针对&nbsp;<strong>低功耗蓝牙（LE）</strong>：Host 包含 L2CAP、GAP（通用访问配置文件）、GATT（通用属性配置文件）等。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简单说：BT Host 是 &ldquo;协议栈的上层软件部分&rdquo;，而 BT Controller 是 &ldquo;协议栈的下层硬件 + 固件部分&rdquo;，两者通过 HCI 接口交互 &mdash;&mdash; 这才是 &ldquo;主机 - 控制器&rdquo; 架构的核心逻辑。</p><h2>2.3 蓝牙协议栈的架构与框架</h2><h3>2.3.1 协议栈架构方案：</h3><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/23de3e89e7de48d2bf8c11dc66714cf5.jpeg"></p><p>我们可以从&nbsp;<strong>技术类型（单模 / 双模）、控制器角色（主 / 副）、应用场景</strong>&nbsp;三个维度，拆解图中&nbsp;<strong>Figure 1.1（上排）和 Figure 1.2（下排）</strong>&nbsp;的蓝牙主机 - 控制器组合方案：</p><h4><strong>（1）Figure 1.1：单模主控制器 + 可选 AMP 辅助（上排 4 种）</strong></h4><p>核心特点：<strong>主控制器仅支持一种蓝牙技术（LE 或 BR/EDR），AMP 作为辅助射频扩展</strong>。</p><table><thead><tr><th>序号</th><th>架构示意图</th><th>技术组成</th><th>核心逻辑与应用场景</th></tr></thead><tbody><tr><td>1</td><td><code>Host &harr; LE Controller</code></td><td>单模&nbsp;<strong>LE 主控制器</strong></td><td>- 仅支持&nbsp;<strong>低功耗蓝牙（BLE）</strong>，专注低功耗、短数据传输（如 BLE 传感器、智能手环）。<br />- 典型场景：无需经典蓝牙功能，追求极致功耗。</td></tr><tr><td>2</td><td><code>Host &harr; BR/EDR Controller</code></td><td>单模&nbsp;<strong>BR/EDR 主控制器</strong></td><td>- 仅支持&nbsp;<strong>经典蓝牙</strong>（中高速数据 / 音频，如蓝牙 2.1~3.0），适合传统蓝牙设备（如音箱、打印机）。<br />- 典型场景：需要稳定音频或文件传输，不关心低功耗。</td></tr><tr><td>3</td><td><code>Host &harr; BR/EDR + 1个AMP</code></td><td>单模&nbsp;<strong>BR/EDR（主）</strong>&nbsp;+ AMP（副）</td><td>-&nbsp;<strong>BR/EDR 负责核心蓝牙协议</strong>（连接、配对、时序），<strong>AMP 作为 &ldquo;射频外挂&rdquo;</strong>（如借用 Wi-Fi 传输高速数据，提升速率至 24Mbps）。<br />- 典型场景：经典蓝牙设备需偶尔传大文件（如高清图片），但仍以 BR/EDR 为核心。</td></tr><tr><td>4</td><td><code>Host &harr; BR/EDR + 多AMP</code></td><td>单模&nbsp;<strong>BR/EDR（主）</strong>&nbsp;+ 多 AMP（副）</td><td>- BR/EDR 主控制器 +&nbsp;<strong>多射频 AMP</strong>（如同时支持 Wi-Fi、LTE），灵活适配不同网络环境，进一步扩展高速传输能力。<br />- 典型场景：高端经典蓝牙设备，需兼容多射频高速传输（如旗舰平板传视频）。</td></tr></tbody></table><h4><strong>（2）Figure 1.2：双模主控制器 + 可选 AMP 辅助（下排 3 种）</strong></h4><p>核心特点：<strong>主控制器集成&nbsp;<code>BR/EDR + LE</code>&nbsp;双模能力，AMP 仍为辅助扩展</strong>。</p><table><thead><tr><th>序号</th><th>架构示意图</th><th>技术组成</th><th>核心逻辑与应用场景</th></tr></thead><tbody><tr><td>1</td><td><code>Host &harr; （BR/EDR + LE）双模Controller</code></td><td>单芯片集成&nbsp;<strong>BR/EDR + LE 双模主控制器</strong></td><td>- 同一控制器同时支持&nbsp;<strong>经典蓝牙（中高速 / 音频）+ 低功耗蓝牙（BLE）</strong>，实现 &ldquo;一芯双协议&rdquo;。<br />- 典型场景：手机、平板等消费电子，需同时连接经典耳机（BR/EDR）和 BLE 手环（LE）。</td></tr><tr><td>2</td><td><code>Host &harr; 双模Controller + 1个AMP</code></td><td>双模主控制器 + AMP（副）</td><td>- 双模主控制器覆盖&nbsp;<strong>全蓝牙功能</strong>（经典 + BLE），AMP 补充超高速传输能力（如传 4K 视频）。<br />- 典型场景：旗舰手机，既要连耳机 / 手环，又要快速传大文件。</td></tr><tr><td>3</td><td><code>Host &harr; 双模Controller + 多AMP</code></td><td>双模主控制器 + 多 AMP（副）</td><td>- 双模主控制器 +&nbsp;<strong>多射频 AMP</strong>，同时满足：<br />- BLE：低功耗传感；<br />- BR/EDR：稳定音频；<br />- AMP：多射频高速传输（如 Wi-Fi 6、5G 副链）。<br />- 典型场景：未来智能终端，追求全场景蓝牙能力。</td></tr></tbody></table><h4><strong>（3）关键概念补充</strong></h4><ol><li><p><strong>主控制器（Primary Controller）</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;负责&amp;nbsp;&lt;strong&gt;核心蓝牙协议栈&lt;/strong&gt;（链路建立、配对、时序同步、协议调度），是蓝牙功能的 &amp;ldquo;中枢&amp;rdquo;。&lt;/li&gt;&lt;li&gt;单模主控制器：仅支持 LE 或 BR/EDR；双模主控制器：同时支持两者（芯片级集成）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;辅助控制器（Secondary Controller，如 AMP）&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;仅负责&amp;nbsp;&lt;strong&gt;&amp;ldquo;数据传输的射频扩展&amp;rdquo;&lt;/strong&gt;，不处理核心蓝牙协议（需依附主控制器运行）。&lt;/li&gt;&lt;li&gt;AMP 是蓝牙 3.0 的扩展，本质是 BR/EDR 的 &amp;ldquo;高速插件&amp;rdquo;，无法独立作为蓝牙控制器。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;单模 vs 双模的本质&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;单模：控制器硬件 / 固件仅支持&amp;nbsp;&lt;strong&gt;一种蓝牙技术&lt;/strong&gt;（LE 或 BR/EDR）。&lt;/li&gt;&lt;li&gt;双模：控制器硬件 / 固件&amp;nbsp;&lt;strong&gt;同时支持两种技术&lt;/strong&gt;（芯片级集成，如蓝牙 4.0 及以上的双模芯片）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>通过这两类方案，蓝牙技术实现了&nbsp;<strong>&ldquo;从单一功能到全场景覆盖&rdquo;</strong>&nbsp;的灵活扩展：</p><ul><li>Figure 1.1 满足&nbsp;<strong>&ldquo;专一需求&rdquo;</strong>（纯 LE 低功耗、纯 BR/EDR 高速、BR/EDR+AMP 超高速）；</li><li>Figure 1.2 满足&nbsp;<strong>&ldquo;全功能需求&rdquo;</strong>（同时支持经典蓝牙 + BLE，再叠加 AMP 扩展）。<br />这种模块化设计，让蓝牙能适配从廉价传感器到旗舰手机的所有设备。</li></ul><h3>2.3.2 AMP的依赖对象问题</h3><h4><span style="color:#fe2c24">单模：</span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#fbd4d0">在蓝牙&nbsp;</span><strong><span style="background-color:#fbd4d0">单模场景</span></strong><span style="background-color:#fbd4d0">&nbsp;中，AMP 的依赖对象需结合&nbsp;</span><strong><span style="background-color:#fbd4d0">单模类型</span></strong><span style="background-color:#fbd4d0">&nbsp;和&nbsp;</span><strong><span style="background-color:#fbd4d0">AMP 的技术本质</span></strong><span style="background-color:#fbd4d0">&nbsp;分析，核心结论是：</span></p><p><strong><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;只有 &ldquo;单模 BR/EDR 控制器&rdquo; 能承载 AMP，且 AMP 完全依赖该 BR/EDR 控制器</span></strong><span style="background-color:#fbd4d0">；而 &ldquo;单模 LE 控制器&rdquo; 与 AMP 无任何关联（因协议设计完全不兼容）。</span></p><h5><span style="background-color:#fbd4d0">（1）单模的分类与 AMP 的关联前提</span></h5><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙单模控制器分为两类：</span></p><ul><li><strong><span style="background-color:#fbd4d0">单模 BR/EDR 控制器</span></strong><span style="background-color:#fbd4d0">：仅支持经典蓝牙（BR/EDR），可扩展 AMP（蓝牙 3.0 设计的能力）。</span></li><li><strong><span style="background-color:#fbd4d0">单模 LE 控制器</span></strong><span style="background-color:#fbd4d0">：仅支持低功耗蓝牙（BLE），</span><strong><span style="background-color:#fbd4d0">与 AMP 无任何技术交集</span></strong><span style="background-color:#fbd4d0">（BLE 的协议栈、设计目标与 AMP 完全无关，也未预留 AMP 的控制接口）。</span></li></ul><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;因此，</span><strong><span style="background-color:#fbd4d0">只有单模 BR/EDR 控制器的场景中，才会涉及 AMP</span></strong><span style="background-color:#fbd4d0">；单模 LE 控制器的设备，根本不会集成 AMP 功能。</span></p><h5><span style="background-color:#fbd4d0">（2）单模 BR/EDR 场景中，AMP 的依赖逻辑</span></h5><p><span style="background-color:#fbd4d0">即使在&nbsp;</span><strong><span style="background-color:#fbd4d0">单模 BR/EDR 控制器</span></strong><span style="background-color:#fbd4d0">&nbsp;架构下，AMP 依然是&nbsp;</span><strong><span style="background-color:#fbd4d0">BR/EDR 的 &ldquo;辅助扩展&rdquo;</span></strong><span style="background-color:#fbd4d0">，依赖关系与双模场景一致：</span></p><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1. 核心协议依赖：BR/EDR 主控制器</strong></span></p><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AMP 自身&nbsp;</span><strong><span style="background-color:#fbd4d0">不具备独立的蓝牙核心能力</span></strong><span style="background-color:#fbd4d0">，必须依靠单模 BR/EDR 控制器完成：</span></p><ul><li><strong><span style="background-color:#fbd4d0">设备发现、配对、连接建立</span></strong><span style="background-color:#fbd4d0">：AMP 无法主动搜索或配对设备，需 BR/EDR 先建立基础连接。</span></li><li><strong><span style="background-color:#fbd4d0">激活与协商</span></strong><span style="background-color:#fbd4d0">：是否启用 AMP、切换到哪种辅助射频（如 Wi-Fi），需通过 BR/EDR 的链路协商。</span></li><li><strong><span style="background-color:#fbd4d0">时序同步、安全验证</span></strong><span style="background-color:#fbd4d0">：数据传输的时序和加密，依赖 BR/EDR 的协议栈支持。</span></li></ul><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>2. 架构上的 &ldquo;主 - 副&rdquo; 关系</strong></span></p><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在单模 BR/EDR + AMP 的架构中：</span></p><ul><li><strong><span style="background-color:#fbd4d0">BR/EDR 控制器是 &ldquo;主控制器&rdquo;</span></strong><span style="background-color:#fbd4d0">：负责所有蓝牙核心协议（链路管理、安全、时序）。</span></li><li><strong><span style="background-color:#fbd4d0">AMP 是 &ldquo;副控制器&rdquo;</span></strong><span style="background-color:#fbd4d0">：仅负责</span><strong><span style="background-color:#fbd4d0">数据传输的射频扩展</span></strong><span style="background-color:#fbd4d0">（如把 BR/EDR 协商好的数据流，通过 Wi-Fi 射频发送），自身不参与蓝牙协议的核心逻辑。</span></li></ul><h5><span style="background-color:#fbd4d0">（3）为什么单模 LE 和 AMP 无关？</span></h5><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BLE 的设计目标是&nbsp;</span><strong><span style="background-color:#fbd4d0">&ldquo;低功耗、短数据&rdquo;</span></strong><span style="background-color:#fbd4d0">，其链路层（LL）、协议栈（GAP/GATT）与 BR/EDR 差异极大：</span></p><ul><li><span style="background-color:#fbd4d0">BLE 没有为 &ldquo;高速射频扩展&rdquo; 预留设计（如 AMP 的协商机制、链路迁移逻辑）。</span></li><li><span style="background-color:#fbd4d0">即使强行尝试，BLE 的低功耗链路也无法支撑 AMP 所需的 &ldquo;高速数据调度、时序同步&rdquo; 等复杂流程。</span></li></ul><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;因此，</span><strong><span style="background-color:#fbd4d0">单模 LE 控制器的设备，从硬件到协议都不会集成 AMP 功能</span></strong><span style="background-color:#fbd4d0">，自然不存在依赖关系。</span></p><h5><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结：单模场景中 AMP 的依赖对象</span></h5><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;只有&nbsp;</span><strong><span style="background-color:#fbd4d0">单模 BR/EDR 控制器</span></strong><span style="background-color:#fbd4d0">&nbsp;能与 AMP 配合，且 AMP 完全依赖该 BR/EDR 控制器的核心协议能力；单模 LE 控制器与 AMP 无关联。</span></p><p><span style="background-color:#fbd4d0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简单说：</span><strong><span style="background-color:#fbd4d0">AMP 是 BR/EDR 的专属扩展，和单模 / 双模无关 &mdash;&mdash; 只要涉及 AMP，必然依赖 BR/EDR 主控制器</span></strong><span style="background-color:#fbd4d0">。</span></p><h4><span style="color:#e6b223">双模：</span></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#f9eda6">在 &ldquo;双模 Controller + 单&nbsp;AMP&rdquo; 和 &ldquo;双模 Controller + 多 AMP&rdquo; 方案中，</span><strong><span style="background-color:#f9eda6">AMP 依然依赖 BR/EDR（经典蓝牙）</span></strong><span style="background-color:#f9eda6">，而</span><strong><span style="background-color:#f9eda6">与 BLE（低功耗蓝牙）无关</span></strong><span style="background-color:#f9eda6">。这是由蓝牙协议的底层设计决定的，具体原因如下：</span></p><h5><span style="background-color:#f9eda6">（1）AMP 的 &ldquo;基因&rdquo; 决定了它依赖 BR/EDR</span></h5><p><span style="background-color:#f9eda6">AMP（Alternate MAC/PHY）是蓝牙 3.0 专为</span><strong><span style="background-color:#f9eda6">经典蓝牙（BR/EDR）</span></strong><span style="background-color:#f9eda6">&nbsp;设计的扩展技术，其核心逻辑是 &ldquo;借助 BR/EDR 的基础链路，实现高速射频的切换与管理&rdquo;。</span></p><ul><li><span style="background-color:#f9eda6">蓝牙规范明确规定：AMP 的激活、连接协商、时序同步、安全验证等核心控制流程，</span><strong><span style="background-color:#f9eda6">必须通过 BR/EDR 的链路完成</span></strong><span style="background-color:#f9eda6">（例如，设备需要先通过 BR/EDR 建立基础连接，才能协商是否启用 AMP 传输数据）。</span></li><li><span style="background-color:#f9eda6">AMP 自身不具备独立的 &ldquo;设备发现、配对、链路维护&rdquo; 能力，这些核心协议功能完全依赖 BR/EDR 主控制器提供的服务。</span></li></ul><h5><span style="background-color:#f9eda6">（2）BLE 与 AMP &ldquo;无交集&rdquo;，不存在依赖关系</span></h5><p><span style="background-color:#f9eda6">双模控制器虽然同时支持 BR/EDR 和 BLE，但这两种技术是</span><strong><span style="background-color:#f9eda6">平行的协议栈</span></strong><span style="background-color:#f9eda6">，BLE 的设计目标与 AMP 完全无关：</span></p><ul><li><span style="background-color:#f9eda6">BLE 专注于低功耗、短数据传输（如传感器数据），其链路层（LL）、协议逻辑（GAP/GATT）与 BR/EDR 差异极大，</span><strong><span style="background-color:#f9eda6">没有为 AMP 预留任何控制接口或管理机制</span></strong><span style="background-color:#f9eda6">。</span></li><li><span style="background-color:#f9eda6">即使在双模设备中，AMP 的激活和管理也只会通过 BR/EDR 链路完成，BLE 仅负责自身的低功耗通信（如连接手环、传感器），不会参与 AMP 的任何流程。</span></li></ul><h5><span style="background-color:#f9eda6">（3）总结：双模控制器中 AMP 的依赖关系不变</span></h5><p><span style="background-color:#f9eda6">无论主控制器是 &ldquo;单模 BR/EDR&rdquo; 还是 &ldquo;双模（BR/EDR+LE）&rdquo;，</span><strong><span style="background-color:#f9eda6">AMP 始终依赖 BR/EDR 的核心协议</span></strong><span style="background-color:#f9eda6">，与 BLE 无关。</span></p><ul><li><span style="background-color:#f9eda6">双模控制器的价值是 &ldquo;同时支持 BR/EDR（含 AMP 扩展）和 BLE&rdquo;，让设备既能通过 BR/EDR+AMP 实现高速传输 + 音频，又能通过 BLE 实现低功耗传感，但这两个功能模块是独立运作的 &mdash;&mdash;AMP 的依赖关系不会因 &ldquo;双模&rdquo; 而转移到 BLE 上。</span></li></ul><p><span style="background-color:#f9eda6">简单说：AMP 是 BR/EDR 的 &ldquo;专属外挂&rdquo;，哪怕和 BLE 共处一个双模芯片里，也只认 BR/EDR 这个 &ldquo;主&rdquo;。</span></p><h3>2.3.3 蓝牙协议栈的层次框图</h3><p><strong>英文大致框图</strong></p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/9c76d6bc21ce48f09cb93fda6e717fc3.png"></p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/17f4c390fde84efcb666fc113365ebf3.png"></p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/ea56c2dd1ab54faa93523553531ad71e.png"></p><p><strong>中文大致框图</strong></p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/4c429de180e641ca844991f942d85984.png"></p><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/0e2cf335fd554d958da806da7d4d984c.png"></p><p>（蓝牙系统框图）</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/9688aa49c99f427da8ea0a8b489e44dd.png">https://i-blog.csdnimg.cn/direct/9688aa49c99f427da8ea0a8b489e44dd.png</a>“ width&#x3D;”775” &#x2F;&gt;&nbsp;（低功耗规范）</p></p><p><img alt=)<p>（层次框图）&nbsp;</p><h4>（1）单模-经典蓝牙（无AMP）</h4><p><img src="/2025/08/03/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%85%B3%E4%BA%8E%E8%93%9D%E7%89%99%E5%8D%8F%E8%AE%AE%E6%A0%88%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%85%B6%E7%A1%AC%E4%BB%B6%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E5%A4%A7%E8%87%B4%E6%A6%82%E8%BF%B0/92cb9df4ea7d455b8a056efa76aa9d12.png"></p><h4>（2）双模-经典蓝牙+低功耗蓝牙（无AMP）</h4><p>&nbsp;<img alt="" height="488" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/5ccc31fc052a4d349a834ff75733d81a.png" width="317" /></p><h4>&nbsp;（3）单模-低功耗蓝牙（无AMP）</h4><p>&nbsp;<img alt="" height="480" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/5babd5af1d7545c7b3148efeec3b9b3f.png" width="270" /></p><h3>2.3.4&nbsp;蓝牙协议栈详解</h3><p>请等待后续章节：-</p><hr /><h1>三、蓝牙硬件的架构概述</h1><h2>3.1 蓝牙硬件的架构与框架</h2><h3>3.1.1 蓝牙硬件架构方案</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件架构的设计直接影响开发复杂度和应用场景，主要分为以下四类方案：</p><h4>（1）SoC 单芯片方案</h4><p><strong>架构特点</strong>：蓝牙协议栈（Host + Controller）与应用处理器集成在同一芯片内，无需额外组件。<br /><strong>核心优势</strong>：设计简单、功耗低、成本低、尺寸小，适合资源受限场景。<br /><strong>典型芯片</strong>：Nordic nRF52 系列、Dialog DA14531、TI CC2640。<br /><strong>典型应用</strong>：蓝牙耳机、智能手环、无线传感器、低功耗 IoT 设备。<br /><strong>开发特点</strong>：芯片厂商已封装协议栈，开发者通过调用接口即可开发，类似普通 MCU 开发，无需深入协议栈细节。</p><h4>（2）SoC 蓝牙 + MCU 方案</h4><p><strong>架构特点</strong>：蓝牙模块（集成协议栈与射频，Host + Controller）与独立 MCU 分离，MCU 负责上层应用逻辑与数据处理。<br /><strong>核心优势</strong>：蓝牙模块专注通信，MCU 专注应用处理，性能更优；可灵活搭配不同性能的 MCU。<br /><strong>典型芯片</strong>：Cypress CYW20719（常以模块形式存在）。<br /><strong>典型应用</strong>：智能家居、工业控制、医疗设备、蓝牙网关。<br /><strong>开发特点</strong>：最简单的开发方式，MCU 通过串口发送 AT 指令控制蓝牙功能，但自定义功能扩展受限。</p><h4>（3）蓝牙 Host + Controller 分离方案</h4><p><strong>架构特点</strong>：协议栈拆分为 Host（高层协议，如 L2CAP、GATT）和 Controller（低层协议，如 PHY、链路层），两者通过 HCI（UART/SPI/USB）通信；Host 运行在主机（MCU/CPU），Controller 为独立模块。<br /><strong>核心优势</strong>：适用于计算能力强的设备，Host 端可灵活管理多连接，扩展性高。<br /><strong>典型应用</strong>：智能手机、笔记本电脑、车载系统（如外接 USB 蓝牙适配器，适配器仅实现 Controller 功能）。<br /><strong>开发特点</strong>：Host 端需根据业务需求实现高层协议与应用，灵活性高，适合复杂场景。</p><h4>（4）蓝牙 + Wi-Fi 方案</h4><p><strong>架构特点</strong>：蓝牙与 Wi-Fi 共享射频前端，集成于同一芯片，优化共存机制减少干扰。<br /><strong>核心优势</strong>：同时支持两种无线技术，射频干扰低，兼顾高吞吐量（Wi-Fi）与低功耗（蓝牙）。<br /><strong>典型芯片</strong>：Broadcom BCM4375、Qualcomm QCA9377、AIC8800M40B。<br /><strong>典型应用</strong>：智能手机、智能电视、物联网网关、IPC 摄像机（蓝牙用于配网，Wi-Fi 传输音视频）。<br /><strong>开发特点</strong>：需处理两者的协同（如蓝牙传递 Wi-Fi 配网信息），适合多无线技术融合场景。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;四类方案从 &ldquo;全集成低功耗&rdquo; 到 &ldquo;分离式高灵活&rdquo;，覆盖了从简单传感器到复杂智能终端的需求，开发难度随架构复杂度递增。</p><h3>3.1.2 蓝牙硬件的核心模块组成</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件架构的实现依赖于多个核心模块的协同工作，这些模块从物理层信号处理到链路管理、功耗控制，共同支撑起设备间的无线通信。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件的核心组成部分包括无线通信的关键模块。首先，无线收发器（RF）作为蓝牙协议栈的关键部分，负责无线信号的发送和接收。基带控制器（BB）则负责处理无线数据的编码和解码，确保数据的准确传输。链路管理层（LMP）则维护和管理蓝牙设备之间的连接，确保通信的稳定性和效率。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件模块由蓝牙协议栈的无线收发器（RF）、基带控制器（BB）和链路管理层（LMP）组成。大多数生产厂家都是利用片上系统技术SOC（System-On-Chip）将这三层功能模块集嵌在同一块芯片上。</p><p>以下从功能划分角度，解析蓝牙硬件的核心组成：</p><h4>（1）射频（RF）模块（无线射频模块（Radio））</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;射频模块是蓝牙硬件与无线环境交互的 &quot;接口&quot;，负责完成无线信号的发射与接收，是决定通信距离、抗干扰能力的关键。其核心功能包括：</p><ul><li><strong>频段与调制</strong>：工作在全球通用的 2.4GHz ISM 频段（2.402-2.480GHz），采用跳频扩频（FHSS）技术（每秒跳变 1600 次）规避同频段干扰（如 Wi-Fi、微波炉）。调制方式随蓝牙技术类型不同：经典蓝牙（BR/EDR）主要用 GFSK（高斯频移键控），BLE（低功耗蓝牙）采用更节能的 2GFSK（二进制 GFSK），高速蓝牙（HS）则支持 PSK（相移键控）提升速率。</li><li><strong>发射与接收性能</strong>：发射功率决定传输距离（如 BLE 的 - 40dBm 至 + 20dBm 可调，对应近距微瓦级功耗到远距百米级覆盖）；接收灵敏度（通常 - 90dBm 至 - 105dBm）决定弱信号接收能力，灵敏度越高，抗干扰越强。</li><li><strong>射频前端</strong>：包含功率放大器（PA）、低噪声放大器（LNA）、滤波器等，负责信号放大、滤波，减少噪声干扰。在蓝牙 + Wi-Fi 共存方案中，射频前端需支持动态频段切换与干扰抑制（如通过时分复用避免同频冲突）。</li></ul><h4>（2）基带（Baseband）模块</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;基带模块是数字信号处理的 &quot;中枢&quot;，连接射频模块与上层协议，负责将射频接收的模拟信号转为数字信号，或反之。其核心功能包括：</p><ul><li><strong>跳频与同步</strong>：基于蓝牙设备地址（BD_ADDR）生成跳频序列，确保通信双方在同一频率点收发；通过时钟同步（如主设备时钟校准从设备）维持跳频一致性。</li><li><strong>帧处理</strong>：解析或生成蓝牙数据帧（包含前导码、访问码、头部、载荷），支持不同帧类型（如经典蓝牙的 SCO 语音帧、ACL 数据帧；BLE 的广播帧、数据帧）。</li><li><strong>差错控制</strong>：通过 CRC 校验检测数据错误，结合重传机制（ARQ）确保数据可靠传输；对 BLE 等低功耗场景，还支持缩短帧长减少传输时间，降低功耗。</li></ul><h4>（3）链路控制器（Link Controller）（LC）</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;链路控制器是通信链路的 &quot;管理者&quot;，基于链路层协议（LL）实现设备发现、连接建立与维护，是蓝牙设备交互的核心控制逻辑。其核心功能包括：</p><ul><li><strong>设备交互流程</strong>：执行设备发现（Inquiry，主设备搜索周围从设备）、连接建立（Page，主设备呼叫目标从设备）、连接参数协商（如 BLE 的连接间隔、从设备延迟）。</li><li><strong>链路状态管理</strong>：控制设备在不同状态间切换（如 BLE 的广播、扫描、连接、休眠状态）；支持多连接管理（如 BLE 主设备同时连接多个从设备时的调度）。</li><li><strong>安全加速</strong>：硬件级支持加密（AES-128）、认证（基于 E0 或 AES 算法）、配对（如 LE Secure Connections），减少软件计算开销，提升安全响应速度。</li></ul><h4>（4）链路管理模块（LM）</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;链路管理模块（Link Manager，LM）是蓝牙协议栈中负责链路逻辑管控的核心单元，主要运行于链路管理层（Link Manager Layer），上接 L2CAP 等高层协议，下连链路控制器（Link Controller），是连接物理层信号传输与上层应用数据交互的 &ldquo;桥梁&rdquo;。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>与其他模块的协同逻辑：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LM 不直接处理物理层信号，而是通过 &ldquo;链路管理协议（LMP）&rdquo; 与链路控制器（LC）交互：LM 生成的控制指令（如参数调整、加密启动）经 LMP 封装后，由 LC 转化为基带帧发送；LC 监测到的链路状态（如信号弱、连接超时）也通过 LMP 反馈给 LM，触发 LM 的调整逻辑。这种 &ldquo;LM 决策 + LC 执行&rdquo; 的分工，既保证了链路管理的灵活性（适应不同应用场景），又确保了底层执行的高效性（硬件加速处理）。</p><h4>（5）协议栈载体与接口（主机控制器接口（HCI））</h4><p>协议栈的运行依赖硬件载体，且需通过接口实现内外交互，这部分与 3.1.1 的架构方案直接关联：</p><ul><li><strong>协议栈硬件载体</strong>：在 SoC 单芯片方案中，协议栈（Host+Controller）运行在芯片内置 MCU 上，部分厂商会集成专用协处理器（如 BLE 的链路层协处理器）加速协议处理；在分离方案中，Controller 为独立硬件（如蓝牙模块），Host 运行在外部 MCU/CPU，两者通过 HCI（主机控制器接口）通信，硬件接口包括 UART（低速场景）、SPI（中速）、USB（高速，如 PC 蓝牙适配器）。</li><li><strong>外设接口</strong>：为扩展应用场景，蓝牙硬件通常集成丰富外设接口，如 GPIO（连接传感器、按键）、UART/SPI/I2C（对接外部 MCU 或传感器模块）、ADC（检测电池电压）、PWM（控制 LED 或电机），部分高端芯片还支持 USB、以太网接口（如蓝牙网关设备）。</li></ul><h4>（6）电源管理单元（PMU）</h4><p>蓝牙硬件（尤其是 BLE 设备）对功耗极度敏感，PMU 是续航能力的 &quot;调控中心&quot;，核心功能包括：</p><ul><li><strong>电源转换</strong>：将电池电压（如 3V CR2032 纽扣电池）转换为芯片各模块所需电压（如射频 1.8V、数字电路 3.3V），支持低 dropout（LDO）稳压器减少转换损耗。</li><li><strong>低功耗模式控制</strong>：支持多级休眠模式，如 BLE 的 &quot;深度睡眠&quot;（Deep Sleep）模式下，关闭射频、基带等模块，仅保留实时时钟（RTC）和中断控制器，电流可低至 1&mu;A 以下；通过外部中断（如按键、传感器触发）或定时唤醒（RTC）快速恢复工作状态。</li></ul><h4>（7）模块协同逻辑</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件的工作流程可概括为：外部数据（如传感器数据）通过外设接口传入，经协议栈（Host 层）处理后，由链路控制器生成通信指令，基带模块将数据封装为帧，射频模块调制为无线信号发送；接收时则反向执行（射频接收&rarr;基带解析&rarr;链路控制器处理&rarr;协议栈上传至应用），整个过程由 PMU 动态调控功耗，确保性能与续航平衡。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这些核心模块的设计差异，直接决定了蓝牙硬件的适用场景 &mdash;&mdash; 例如，BLE 设备会强化 PMU 的低功耗控制和射频的窄带传输，而经典蓝牙音频设备则侧重基带的语音帧处理和链路控制器的 SCO 同步连接支持。</p><h2>3.2 蓝牙硬件技术细节&nbsp;</h2><h3>3.2.1 蓝牙硬件外设接口</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙硬件的外设接口是实现与外部设备数据交互的核心通道，需根据应用场景的需求（如数据类型、传输速率）选择适配接口，常见类型如下：</p><h4><strong>（1）PCM 接口</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;主要用于传输语音数据（如蓝牙耳机、车载蓝牙的通话功能），通过时分复用机制实现语音信号的实时收发。核心信号包括：</p><table><thead><tr><th>信号名称</th><th>描述</th><th>信号电平</th></tr></thead><tbody><tr><td>PCM_CLK</td><td>数据同步时钟信号</td><td>参考所选芯片的电源电压域</td></tr><tr><td>PCM_SYNC</td><td>帧同步信号（区分声道或时隙）</td><td>参考所选芯片的电源电压域</td></tr><tr><td>PCM_IN</td><td>接收外部语音数据信号</td><td>参考所选芯片的电源电压域</td></tr><tr><td>PCM_OUT</td><td>向外部发送语音数据信号</td><td>参考所选芯片的电源电压域</td></tr></tbody></table><h4><strong>（2）UART 接口</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通用异步收发传输接口，适用于传输非实时通用数据（如传感器数据、配置指令、文件数据等，音乐文件也可通过 UART 传输），通过 TX/RX 双向信号线实现全双工通信。核心信号包括：</p><table><thead><tr><th>信号名称</th><th>描述</th><th>信号电平</th></tr></thead><tbody><tr><td>UART_RX</td><td>接收外部数据信号</td><td>参考所选芯片的电源电压域</td></tr><tr><td>UART_TX</td><td>向外部发送数据信号</td><td>参考所选芯片的电源电压域</td></tr></tbody></table><h4><strong>（3）其他扩展接口</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;随着蓝牙模组集成度提升，为满足多样化场景需求，还支持以下接口：</p><ul><li><strong>USB 接口</strong>：适用于高速数据传输（如蓝牙适配器与电脑连接），支持即插即用；</li><li><strong>SPI 接口</strong>：与 MCU 等设备的高速同步通信（如工业传感器通过 SPI 与蓝牙模组交互）；</li><li><strong>I2S 接口</strong>：专为音频传输设计（如蓝牙音箱的无损音乐传输），支持多声道同步；<br />接口的选择需结合传输速率、硬件复杂度及应用场景（如消费电子优先 UART/USB，工业设备常用 SPI）。</li></ul><h3>3.2.2 应用方案设计</h3><p>蓝牙硬件的应用方案需基于接口特性与场景需求灵活调整：</p><ul><li>简单场景（如低功耗传感器）可采用 UART 接口，通过 AT 指令快速实现数据上传；</li><li>语音场景（如蓝牙耳机）需搭配 PCM 或 I2S 接口，保证语音实时性；</li><li>高速数据场景（如蓝牙网关）优先选择 USB 或 SPI 接口，提升传输效率。<br />实际设计中，模组的接口兼容性（如同时支持 UART 和 SPI）可降低方案迭代成本。</li></ul><h2>3.3 蓝牙硬件设计目标</h2><h3>3.3.1 合规性认证</h3><p>蓝牙硬件需通过多项强制认证，确保合法合规及市场准入：</p><ul><li><p><strong>BQB 认证</strong><br />所有具备蓝牙功能的产品必须通过蓝牙技术联盟（SIG）的 BQB（Bluetooth Qualification Body）认证，核心是验证产品符合蓝牙协议规范，获得唯一的 QDID（Qualification Design ID）。未通过认证的产品不得使用 &ldquo;Bluetooth&reg;&rdquo; 标识，否则将被视为侵权。</p></li><li><p><strong>SRRC 认证</strong><br />在中国市场销售的蓝牙设备需通过国家无线电管理委员会（SRRC）认证，由中国国家无线电监测中心负责检测，核心验证射频参数（如发射功率、工作频段）符合国内无线电法规，确保不对其他无线设备造成干扰。</p></li></ul><h3>3.3.2&nbsp;协议兼容性</h3><p>硬件需支持目标应用场景的蓝牙协议栈，确保与其他设备的互操作性：</p><ul><li>低功耗场景需支持 Bluetooth Low Energy（BLE，原 &ldquo;Bluetooth Smart&rdquo;）协议（如 BLE 5.0 及以上，支持长距离、高速率模式）；</li><li>经典蓝牙场景（如音频传输）需兼容 BR/EDR 协议，支持 SCO（同步语音）、ACL（异步数据）链路；</li><li>协议支持需匹配应用需求（如医疗设备需支持 BLE 的加密配对协议 SMP，确保数据安全）。</li></ul><h3>3.3.3&nbsp;关键性能指标</h3><p>硬件设计需明确以下核心指标，以满足功能与性能需求：</p><ul><li><p><strong>射频基础指标</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;阻抗控制：射频链路（含天线、走线）需满足 50&amp;Omega; 阻抗匹配（具体以芯片 datasheet 为准），避免信号反射导致功率损耗；&lt;/li&gt;&lt;li&gt;工作频段：需覆盖 2.4GHz ISM 频段（2.402&amp;ndash;2.480GHz，实际可用频段为 2.400&amp;ndash;2.4835GHz），符合全球通用频谱规范。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;天线设计&lt;/strong&gt;&lt;br /&gt;天线类型需结合产品形态与通信需求选择：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;外置天线（如拉杆天线、贴片天线）：适用于远距离通信（如工业设备），增益较高；&lt;/li&gt;&lt;li&gt;PCB 内置天线：适合小型设备（如智能手环），成本低但需预留净空区减少干扰。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;射频性能指标&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;发射功率：需符合认证标准（如中国 SRRC 要求&amp;le;10dBm），同时根据通信距离调整（远距离场景可提升至 + 20dBm）；&lt;/li&gt;&lt;li&gt;接收灵敏度：通常需&amp;ge;-90dBm（BLE）或&amp;ge;-85dBm（经典蓝牙），灵敏度越高，抗干扰能力越强；&lt;/li&gt;&lt;li&gt;其他射频指标：如邻道抑制、频率误差等，需满足 BQB 及 SRRC 认证要求。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;功能与性能指标&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通信距离：需结合应用场景定义（如室内传感器 10-30 米，户外设备 50-100 米），受发射功率、天线增益及环境遮挡影响；&lt;/li&gt;&lt;li&gt;连接数量：BLE 主设备需支持多从设备连接（如网关需同时连接 10 + 传感器）；&lt;/li&gt;&lt;li&gt;功耗：低功耗场景（如可穿戴设备）需控制待机电流&amp;le;1&amp;mu;A，工作电流&amp;le;10mA；&lt;/li&gt;&lt;li&gt;成本：通过芯片集成度（如 SoC 方案）、接口简化（如仅保留 UART）优化硬件成本。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h2>3.4 项目设计流程</h2><p>基于上述背景，蓝牙硬件项目的开发流程可分为以下阶段：</p><ol><li><strong>需求分析</strong>：明确应用场景（如消费电子 / 工业）、功能需求（如数据传输 / 语音）、性能指标（如通信距离、功耗）及合规要求（如 BQB/SRRC 认证）；</li><li><strong>系统与结构设计</strong>：确定硬件架构（如 SoC 单芯片 / Host-Controller 分离）、接口选型（如 UART/PCM）、结构布局（如天线位置、散热设计）；</li><li><strong>工程详细设计</strong>：绘制原理图（含射频电路、电源管理、外设接口）、PCB 布局（重点优化射频走线阻抗与抗干扰）、元件选型（确保温湿度、可靠性符合场景需求）；</li><li><strong>投板与首件测试</strong>：制作首版 PCB，进行焊接质量检查（如虚焊、短路），验证硬件基本功能；</li><li><strong>单元测试</strong>：针对核心模块测试（如射频性能：发射功率 / 接收灵敏度；接口功能：UART 数据传输）；</li><li><strong>功能测试</strong>：验证蓝牙全流程功能（如设备发现、连接建立、数据收发、加密配对、断开重连）；</li><li><strong>系统测试</strong>：模拟实际应用场景测试（如多设备连接稳定性、高低温环境下的通信可靠性）；</li><li><strong>验收测试</strong>：依据需求规格与认证标准，确认所有指标达标，完成 BQB、SRRC 等认证，最终交付。</li></ol><hr /><p>&nbsp; &nbsp; &nbsp; &nbsp;后续，笔者会对蓝牙协议栈中各层次以及每层中的各个规范进行逐步讲解，同时，如有错误，可在评论区指出、讨论。</p><p>（如有侵权，请联系删除。）&nbsp;</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bluetooth 蓝牙通信协议</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Bluetooth】【基础篇】第一章 对于蓝牙通信协议的初步认识</title>
    <link href="/2025/07/31/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%AF%B9%E4%BA%8E%E8%93%9D%E7%89%99%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/"/>
    <url>/2025/07/31/%E3%80%90Bluetooth%E3%80%91%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%AF%B9%E4%BA%8E%E8%93%9D%E7%89%99%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、蓝牙的基础概念</h1><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙（Bluetooth）</strong>是一种基于<strong> 2.4GHz ISM</strong>（工业、科学、医疗）免费频段的<strong>短距离无线通信技术</strong>，核心目标是实现设备间的<strong>低成本</strong>、<strong>低功耗</strong>、<strong>灵活便捷</strong>的无线互联，替代传统有线连接（如串口线、数据线），解决多设备协同的<strong> &ldquo;线缆困扰&rdquo;</strong>。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;作为小范围无线连接技术，其核心价值在于<strong>简化设备通信</strong>：不仅能简化移动通信终端设备之间的连接，还能简化设备与因特网的通信，让数据传输更迅速高效，为无线通信拓展了路径。同时，它具备<strong>方便快捷</strong>、<strong>灵活安全</strong>、<strong>低成本</strong>、<strong>低功耗</strong>的特点，可支持数据与语音双向通信，因此成为当前无线个域网通信的主流技术之一。​</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其<strong>本质</strong>是为<strong>固定设备</strong>与<strong>移动设备</strong>建立通用的<strong>无线电空中接口</strong>，将通信技术与计算机技术结合，使 3C 设备在无需电线或电缆连接的情况下，能在近距离内实现相互通信或操作，有力推动着低速率无线个人区域网络的发展。</p><h2><strong>1.1 从技术本质的方面来看</strong></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;蓝牙通过<strong>跳频扩频（FHSS）</strong>技术在<strong> 2.4GHz 频段</strong>（全球通用的无需授权频段）实现抗干扰传输，设备间可自动发现、配对并建立<strong>稳定连接</strong>，<strong>支持语音</strong>、<strong>数据</strong>等多种信息的<strong>双向传输</strong>。其设计注重 <strong>&ldquo;轻量级&rdquo; </strong>特性：通信距离通常在 <strong>10 米</strong>内（部分版本可扩展至百米级），<strong>功耗和成本较低</strong>，适配从消费电子到工业设备的<strong>多样化场景</strong>。</p><h2><strong>1.2 从功能定位的方面来看</strong></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>蓝牙的核心价值</strong>是<strong> &ldquo;统一短距离无线标准&rdquo;</strong>。通过蓝牙特别兴趣小组（Bluetooth SIG）制定的通用协议栈（涵盖物理层、链路层、应用层等），不同品牌、类型的设备（如手机、耳机、电脑、智能家电）可遵循同一套 &ldquo;通信规则&rdquo;，实现<strong>跨设备兼容</strong> &mdash;&mdash; 例如，无论安卓还是苹果手机，都能与任意符合蓝牙标准的耳机配对，这也是其能成为全球主流无线技术的关键。</p><h2>1.3 从技术分支的方面来看</h2><p>现蓝牙已形成两大核心方向：</p><ul><li><strong>经典蓝牙（Classic Bluetooth）</strong>：侧重高速率、持续连接，早期版本（如 1.0-3.0）支持 1-3Mbps 传输速率，主要用于音频流传输（如无线耳机、车载蓝牙）、文件传输等；</li><li><strong>低功耗蓝牙（BLE，Bluetooth Low Energy）</strong>：2010 年随蓝牙 4.0 推出，以超低功耗为核心优势（待机电流可低至微安级），传输速率适中（125kbps-2Mbps），广泛应用于物联网场景（如智能手环、传感器、智能家居设备），支持长时间续航。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;简言之，蓝牙是一种<strong> &ldquo;让设备无线&lsquo;对话&rsquo;的通用技术&rdquo;</strong>，通过<strong>标准化协议</strong>和<strong>轻量化设计</strong>，成为连接个人设备、智能硬件、工业系统的 &ldquo;隐形桥梁&rdquo;，深刻改变了人们的无线交互方式。</p><h1>二、蓝牙的起源</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>蓝牙（Bluetooth）技术</strong>的起源可追溯至20世纪90年代，其诞生是多家科技公司协作的结果，旨在解决短距离设备间的无线连接问题。以下是关键发展历程的梳理：</p><h2>2.1&nbsp;<strong>概念提出与技术雏形（1994&ndash;1997年）</strong></h2><ul><li><p><strong>爱立信的初步探索</strong>：1994年，瑞典电信公司爱立信（Ericsson）的工程师<strong>Jaap Haartsen</strong>主导研发一种低成本、低功耗的无线通信技术，核心目标是替代移动电话与配件（如耳机、键盘）之间的有线连接（如RS-232串口线），解决设备间数据同步的难题。</p></li><li><p><strong>技术基础</strong>：蓝牙的核心技术基于<strong>跳频扩频（FHSS）</strong>，这一概念源自二战时期好莱坞女演员<strong>Hedy Lamarr</strong>与作曲家George Antheil的专利，后于20世纪80年代被军方采用，最终下沉至民用领域。</p></li></ul><h2>&nbsp;2.2&nbsp;<strong>联盟成立与标准化（1998年）</strong></h2><ul><li><p><strong>蓝牙技术联盟（Bluetooth SIG）诞生</strong>：1998年，爱立信联合诺基亚（Nokia）、IBM、英特尔（Intel）和东芝（Toshiba）五家公司成立&ldquo;蓝牙特别兴趣小组&rdquo;（Bluetooth Special Interest Group, SIG），推动技术标准化。分工明确：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;英特尔&lt;/strong&gt;：负责芯片与传输软件；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;爱立信&lt;/strong&gt;：开发无线射频与手机软件；&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;IBM与东芝&lt;/strong&gt;：设计笔记本电脑接口规范。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;命名由来&lt;/strong&gt;：&amp;ldquo;蓝牙&amp;rdquo; 这一名称的由来，藏着一段与北欧历史相关的小故事。​它源自 10 世纪的丹麦国王哈拉尔德・戈尔姆松（Harald Gormsson）。这位国王出身海盗家庭，凭借领导力统一了当时四分五裂的北欧地区，建立起维京王国。由于他酷爱食用蓝莓 &amp;mdash;&amp;mdash; 这种在当时被认为 &amp;ldquo;不适合食用&amp;rdquo; 的果实，长期下来牙齿被染成了蓝色，因此获得了 &amp;ldquo;蓝牙&amp;rdquo; 的绰号，而他本人也成为了 &amp;ldquo;勇于尝试、推动统一&amp;rdquo; 的象征。​&lt;/p&gt;&lt;p&gt;1998 年，瑞典爱立信公司联合其他企业推动无线通信技术标准化时，便借用了 &amp;ldquo;蓝牙&amp;rdquo; 这一名称。其寓意正是希望这项技术能像哈拉尔德国王统一北欧那样，打破不同设备间的通信壁垒，实现无线连接标准的统一。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;标志设计&lt;/strong&gt;：蓝牙符号融合了北欧卢恩字母&amp;nbsp;&lt;strong&gt;ᚼ&lt;/strong&gt;（H）和&amp;nbsp;&lt;strong&gt;ᛒ&lt;/strong&gt;（B），代表哈拉尔德名字的首字母缩写。&lt;/p&gt;&lt;/li&gt;</code></pre></ul><h1>三、蓝牙的发展与演变历程​</h1><p>蓝牙技术的发展历程不仅是技术迭代的过程，更体现了从解决设备互联痛点到支撑物联网生态的演进逻辑，其命名与版本迭代背后藏着清晰的技术脉络：</p><h2>3.1 标准奠基（1998-1999）</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.7 版作为首个标准版本，已支持&nbsp;<strong>Baseband（基带）</strong>&nbsp;与&nbsp;<strong>LMP（链路管理协议）</strong>&nbsp;通信协定；随后，随着 SIG 的推进，陆续发布了 0.8 版、0.9 版、1.0 Draft 版、1.0a 版及 1.0B 版，逐步完善技术规范。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1999 年下半年，微软、摩托罗拉、三星、朗讯与蓝牙特别兴趣小组的原有成员共同发起成立蓝牙技术推广组织，加速了技术的市场化进程，在全球范围内掀起蓝牙热潮。不过，同年推出的蓝牙 1.0 正式版本因存在&nbsp;<strong>数据泄露</strong>&nbsp;的技术缺陷（如设备地址 BD_ADDR 明文传输），加之当时支持蓝牙功能的电子设备种类有限且成本高昂，未能实现大规模应用，这些问题也成为后续版本优化的重要方向。</p><h2>3.2 技术成熟与市场认可（2001-2007）</h2><ul><li><strong>2001 年蓝牙 1.1</strong>：首个正式商用版本，解决了 1.0 的兼容问题，被纳入 IEEE 802.15.1 标准，SIG 成员突破 2000 家，蓝牙开始进入消费电子领域。</li><li><strong>2003 年蓝牙 1.2</strong>：新增&nbsp;<strong>自适应跳频技术（AFH）</strong>，抗干扰能力显著提升，降低了与 Wi-Fi 的频段冲突；引入&nbsp;<strong>eSCO 同步信道</strong>，支持立体声传输，代表作为爱立信 T39mc 手机。</li><li><strong>2004 年蓝牙 2.0+EDR</strong>：引入增强数据速率（EDR），传输速度提升至 3Mbps，支持&nbsp;<strong>双工模式</strong>（同时传输语音与数据），成为首个被市场广泛接受的版本，无线耳机、车载蓝牙等应用兴起。</li><li><strong>2007 年蓝牙 2.1</strong>：简化配对流程，通过&nbsp;<strong>6 位数字校验</strong>&nbsp;防止中间人攻击，手机间蓝牙传文件成为主流功能；支持 NFC 近场通信，提升配对便利性。</li></ul><h2>3.3 速率跃升与场景拓展（2009-2010）</h2><ul><li><strong>2009 年蓝牙 3.0+HS</strong>：采用&nbsp;<strong>交替射频技术（AMP）</strong>，集成 802.11 PAL（高速蓝牙模式），传输速率峰值达 24Mbps，支持大量数据快速传输（如高清图片），同时优化功耗控制。</li><li><strong>2010 年蓝牙 4.0</strong>：融合<span style="background-color:#ffd900">经典蓝牙</span>、<span style="background-color:#ffd900">高速蓝牙</span>和<span style="background-color:#ffd900">低功耗蓝牙</span>（BLE，源自诺基亚 Wibree 技术），BLE 模式待机功耗降至微安级，传输距离突破 100 米，为智能手环、传感器等物联网设备奠定基础，标志着蓝牙从消费电子向物联网延伸。苹果 iPhone 4S 是首款支持该标准的智能手机。</li></ul><h2>3.4 物联网适配与功能强化（2013-2016）</h2><ul><li><strong>2013 年蓝牙 4.1</strong>：支持设备同时扮演多重角色（如既是主机又是从机），实现智能手表与计步器直接通信，无需经手机中转；新增&nbsp;<strong>IPv6 通道</strong>，支持云同步。</li><li><strong>2014 年蓝牙 4.2</strong>：传输速度提升 2.5 倍，支持&nbsp;<strong>6LoWPAN 协议</strong>，使蓝牙设备可直接接入互联网；采用&nbsp;<strong>Diffie-Hellman 密钥交换</strong>，强化配对安全性。</li><li><strong>2016 年蓝牙 5.0</strong>：传输速度翻倍（2Mbps）、距离增至 4 倍（最远 300 米）、数据容量提升 8 倍，优化与 Wi-Fi 的共存性；支持&nbsp;<strong>室内定位导航</strong>（精度 &lt;1 米），针对 IoT 物联网进行底层优化，成为大规模部署的核心技术。</li></ul><h2>3.5 定位与网状网络突破（2017-2023）</h2><ul><li><strong>2017 年蓝牙 Mesh</strong>：支持多对多通信的网状网络，兼容 4.0 及以上版本，适用于楼宇自动化、工业监测等大规模设备组网场景，加速智能家居互联互通。</li><li><strong>2019 年蓝牙 5.1</strong>：新增&nbsp;<strong>到达角（AoA）/ 出发角（AoD）定位技术</strong>，精度达厘米级，为室内导航、资产追踪提供可能。</li><li><strong>2019 年蓝牙 5.2</strong>：引入&nbsp;<strong>LE Audio 标准</strong>，采用 LC3 编解码器，在降低 3 倍功耗的同时提升 3 倍音质，支持多设备音频共享，推动 TWS 耳机进入低功耗高清时代。</li><li><strong>2021 年蓝牙 5.3</strong>：优化&nbsp;<strong>LE 同步信道</strong>，增强隐私保护，减少设备间干扰；改进安全连接认证（SCA），防止重放攻击。</li></ul><h2>3.6 物联网安全与高效通信（2023 年至今）</h2><ul><li><strong>2023 年蓝牙 5.4</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;加密广播数据（EAD）&lt;/strong&gt;：提供标准化的广播包加密方法，加密后的数据仅能被持有相同密钥的设备解密，需在 GATT 连接并完成安全认证后生成密钥。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;带响应的周期性广播（PAwR）&lt;/strong&gt;：支持无连接、双向、一对多的低功耗拓扑，适用于零售电子价签（ESL）、工业设备监控等场景，可远程批量更新数据并实时响应。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;LE GATT 安全级别特性&lt;/strong&gt;：设备可通过 GATT 字段声明安全模式，扩展广播时可选择编解码器，提升通信灵活性。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;抗干扰优化&lt;/strong&gt;：改善与 4G/5G 等无线通信并存时的干扰问题，确保复杂环境下的稳定性。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><p><span style="color:#0d0016"><span style="background-color:#ffd900">注：</span></span></p><p>（1）第一代蓝牙：关于短距离通讯早期的探索，使用的是BR技术，此时蓝牙的理论传输速率，只能达到721.2Kbps。<br />（2）第二代蓝牙：新增的 EDR（Enhanced Data Rate）技术，使得蓝牙设备的传输率可达 3Mbps。<br />（3）第三代蓝牙：核心是 AMP（Generic Alternate MAC/PHY），这是一种全新的交替射频技术，支持动态地选择正确射频，传输速率高达 24Mbps。<br />（4）第四代蓝牙：主推&rdquo; Low Energy&rdquo;低功耗， BLE（Bluetooth Low Energy）低功耗功能。<br />（5）第五代蓝牙：开启「物联网」时代大门，在低功耗模式下具备更快更远的传输能力。</p><h2>总结&nbsp; &nbsp; &nbsp; &nbsp;</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从解决线缆混乱到支撑万物互联，蓝牙通过持续迭代，已成为连接个人设备、智能硬件、工业系统的核心技术，其开放式标准和场景适配能力，使其在无线通信领域保持着长久生命力。</p>]]></content>
    
    
    <categories>
      
      <category>蓝牙通信协议学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bluetooth 通信协议 蓝牙发展过程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【ESP32】无法找到: &#39;${env:IDF_PATH}/components/&#39; 的路径报错问题以及CMAKE构建不成功问题</title>
    <link href="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/"/>
    <url>/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、解决路径报错问题</h1><p><img src="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/7504b3a1798b41209ac301d25a28565f.png"></p><p>添加环境变量&nbsp;</p><p><img src="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/3cd6aa2e89464ded98a31739ba7c0a8d.png"></p><p><img src="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/8f27a52edace48f8a47c2ba1aa01e19f.png"></p><p>成功解决：</p><p><img src="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/84230e1c291d4c55a6bc9ce49d4cc126.png"></p><h1>二、补充说明（如果cmake无法构建项目成功）</h1><p>REQUIRES FreeRTOS&nbsp;改为&nbsp;REQUIRES freertos</p><p><img src="/2025/07/27/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%20%7BenvIDF_PATH%7Dcomponents%E7%9A%84%E8%B7%AF%E5%BE%84%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8ACMAKE%E6%9E%84%E5%BB%BA%E4%B8%8D%E6%88%90%E5%8A%9F%E9%97%AE%E9%A2%98/1c4e9294376c4caea159d07648b6531e.png"></p><p>错误日志：</p><pre><code class="language-cpp">*  正在文件夹 ESP32_multitasking_led 中执行任务: D:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe D:\Espressif\frameworks\esp-idf-v5.4\tools\idf.py -B e:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\build -DSDKCONFIG='e:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\sdkconfig' reconfigure Executing action: reconfigureRunning cmake in directory E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\buildExecuting "cmake -G Ninja -DPYTHON_DEPS_CHECKED=1 -DPYTHON=D:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe -DESP_PLATFORM=1 -DSDKCONFIG='e:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\sdkconfig' -DCCACHE_ENABLE=1 E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led"...-- Found Git: D:/Espressif/tools/idf-git/2.39.2/cmd/git.exe (found version "2.39.2.windows.1")-- ccache will be used for faster recompilation-- The C compiler identification is GNU 14.2.0-- The CXX compiler identification is GNU 14.2.0-- The ASM compiler identification is GNU-- Found assembler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-gcc.exe-- Detecting C compiler ABI info-- Detecting C compiler ABI info - done-- Check for working C compiler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-gcc.exe - skipped-- Detecting C compile features-- Detecting C compile features - done-- Detecting CXX compiler ABI info-- Detecting CXX compiler ABI info - done-- Check for working CXX compiler: D:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32s3-elf-g++.exe - skipped-- Detecting CXX compile features-- Detecting CXX compile features - done-- git rev-parse returned 'fatal: not a git repository (or any of the parent directories): .git'-- Could not use 'git describe' to determine PROJECT_VER.-- Building ESP-IDF components for target esp32s3CMake Error at D:/Espressif/frameworks/esp-idf-v5.4/tools/cmake/build.cmake:318 (message):  Failed to resolve component 'FreeRTOS' required by component 'main':  unknown name.Call Stack (most recent call first):  D:/Espressif/frameworks/esp-idf-v5.4/tools/cmake/build.cmake:361 (__build_resolve_and_add_req)  D:/Espressif/frameworks/esp-idf-v5.4/tools/cmake/build.cmake:665 (__build_expand_requirements)  D:/Espressif/frameworks/esp-idf-v5.4/tools/cmake/project.cmake:710 (idf_build_process)  CMakeLists.txt:6 (project)-- Configuring incomplete, errors occurred!HINT: The component 'FreeRTOS' could not be found. This could be because: component name was misspelled, the component was not added to the build, the component has been moved to the IDF component manager, the component has been removed and refactored into some other component or the component may not be supported by the selected target.Please look out for component in 'https://components.espressif.com' and add using 'idf.py add-dependency' command.Refer to the migration guide for more details about moved components.Refer to the build-system guide for more details about how components are found and included in the build.cmake failed with exit code 1, output of the command is in the E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\build\log\idf_py_stderr_output_12868 and E:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\build\log\idf_py_stdout_output_12868 *  终端进程“D:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe 'D:\Espressif\frameworks\esp-idf-v5.4\tools\idf.py', '-B', 'e:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\build', '-DSDKCONFIG='e:\ESP_IDF_Projects\ESP_IDF_Examples_Workspaces\ESP32_multitasking_led\sdkconfig'', 'reconfigure'”已终止，退出代码: 2。</code></pre><p>分析过程：</p><p>从你给出的错误信息来看，在构建 ESP32 多任务 LED 项目时，CMake 没办法找到并解析<code>FreeRTOS</code>组件，进而致使配置失败。下面为你详细分析可能的原因以及相应的解决办法：</p><h3><strong>1、错误原因剖析</strong></h3><ol><li><p><strong>组件名称拼写有误</strong><br />在 ESP-IDF v5.4 里，FreeRTOS 组件的名称已经变为<code>freertos</code>（全部小写），但你的项目或许仍在使用旧名称<code>FreeRTOS</code>。</p></li><li><p><strong>组件路径缺失或者损坏</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;FreeRTOS 组件原本属于 ESP-IDF 的核心组件，不过在 v5.0 版本之后，部分组件被迁移到了&lt;strong&gt;组件管理器&lt;/strong&gt;（Component Manager）。&lt;/li&gt;&lt;li&gt;要是你的 ESP-IDF 安装不完整，就可能会丢失 FreeRTOS 组件。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;项目配置文件存在问题&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;CMakeLists.txt&lt;/code&gt;文件里对组件的引用格式不正确。&lt;/li&gt;&lt;li&gt;&lt;code&gt;sdkconfig&lt;/code&gt;文件被损坏或者与当前的 ESP-IDF 版本不兼容。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;版本不兼容状况&lt;/strong&gt;&lt;br /&gt;项目是基于旧版 ESP-IDF 开发的，没有适配 v5.4 的组件结构变化。&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h3><strong>2、解决办法</strong></h3><h4><strong>1. 修正组件名称引用</strong></h4><p>把<code>CMakeLists.txt</code>文件中对 FreeRTOS 的引用从<code>FreeRTOS</code>改成<code>freertos</code>（全部小写）。</p><p><strong>示例修改</strong>：</p><p>cmake</p><pre><code># 原来的错误引用（假设）idf_component_register(REQUIRES FreeRTOS ...)# 修改为idf_component_register(REQUIRES freertos ...)</code></pre><h4><strong>2. 重新安装 ESP-IDF 工具链</strong></h4><p>借助 ESP-IDF 工具安装器重新安装或者更新工具链，保证所有组件都完整无缺。</p><h4><strong>3. 手动添加 FreeRTOS 依赖</strong></h4><p>通过组件管理器添加 FreeRTOS 依赖：</p><p>bash</p><pre><code>idf.py add-dependency "espressif/freertos^10.6.0"</code></pre><h4><strong>4. 检查并更新 CMakeLists.txt</strong></h4><p>确认项目的<code>CMakeLists.txt</code>文件正确引用了 FreeRTOS 组件。</p><p><strong>正确示例</strong>：</p><p>cmake</p><pre><code>idf_component_register(    SRCS "main.c"    INCLUDE_DIRS "."    REQUIRES freertos  # 确保使用小写的freertos)</code></pre><h4><strong>5. 清除并重新配置项目</strong></h4><p>删除构建目录，然后重新进行配置：</p><p>bash</p><pre><code>idf.py fullcleanidf.py set-target esp32s3  # 根据你的目标芯片进行设置idf.py menuconfig  # 可选：打开配置菜单进行验证idf.py build</code></pre><p></p><h4><strong>6. 验证 ESP-IDF 版本兼容性</strong></h4><ul><li>检查项目是否与 ESP-IDF v5.4 兼容，必要时参考<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="官方迁移指南" href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/migration-guides/index.html" title="官方迁移指南">官方迁移指南</a>。</li><li>考虑暂时切换到旧版 ESP-IDF（例如 v4.4）来运行旧项目。</li></ul><h3><strong>3、预防措施</strong></h3><ol><li><p><strong>使用版本控制系统</strong><br />利用 Git 管理项目，避免直接修改 ESP-IDF 的核心文件。</p></li><li><p><strong>定期更新工具链</strong><br />通过<code>idf.py update</code>命令定期更新 ESP-IDF，减少版本不兼容的问题。</p></li><li><p><strong>参考官方示例</strong><br />参考 ESP-IDF 的<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="官方多任务示例" href="https://github.com/espressif/esp-idf/tree/master/examples/system/freertos" title="官方多任务示例">官方多任务示例</a>，确保项目结构正确无误。</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ESP32 ESP-IDF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】Git LFS的使用</title>
    <link href="/2025/07/27/%E3%80%90Git%E3%80%91Git%20LFS%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/07/27/%E3%80%90Git%E3%80%91Git%20LFS%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>Git LFS（Git Large File Storage）是由 GitHub 开发的一款 Git 扩展工具，旨在帮助开发者更高效地管理仓库中的大文件。传统 Git 会将文件的每个版本完整存储在仓库历史中，导致大文件（如音频、视频、数据集、二进制文件等）快速膨胀仓库体积，影响克隆和推送效率。Git LFS 通过以下机制解决这一问题：</p><h3>核心原理</h3><ol><li><strong>指针替换</strong>：在提交时，将大文件替换为轻量级的文本指针（Pointer File），仅几 KB 大小，包含原文件的元信息（如哈希值、存储路径）。</li><li><strong>远程存储</strong>：大文件实际内容被存储在 Git LFS 服务器（如 GitHub、GitLab 提供的服务，或自建服务器），与代码仓库分离。</li><li><strong>按需下载</strong>：克隆或切换分支时，Git LFS 会根据指针文件从远程服务器下载当前需要的大文件版本，而非全部历史版本。</li></ol><h3>工作流程</h3><ol><li><strong>安装</strong>：先安装 Git LFS 客户端（<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="官网下载" href="https://git-lfs.github.com/" title="官网下载">官网下载</a>），并在仓库中初始化：<pre><code class="hljs">&lt;p&gt;bash&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>git lfs install<br></code></pre><br></li><br><li><strong>跟踪文件</strong>：指定需要使用 LFS 管理的文件类型或路径（支持通配符）：<br><p>bash</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>git lfs track &quot;<em>.mp4&quot;  # 跟踪所有 MP4 文件<br>git lfs track &quot;data/</em>&quot; # 跟踪 data 目录下的所有文件<br></code></pre><br>此操作会生成&nbsp;<code>.gitattributes</code>&nbsp;文件并自动提交，记录跟踪规则。</li><br><li><strong>正常提交</strong>：添加、提交和推送文件时，Git LFS 会自动处理大文件：<br><p>bash</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>git add video.mp4<br>git commit -m &quot;添加视频文件&quot;<br>git push origin main<br></code></pre><br>推送时，大文件会上传至 LFS 服务器，代码仓库仅包含指针。</li><br><li><strong>克隆仓库</strong>：使用&nbsp;<code>git clone</code>&nbsp;时，LFS 文件会自动下载：<br><p>bash</p></p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>git clone <a href="https://example.com/repo.git">https://example.com/repo.git</a><br></code></pre><br>若只需代码而不下载大文件，可使用：</p><pre><code class="hljs">&lt;p&gt;bash&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>git lfs clone --skip-smudge <a href="https://example.com/repo.git">https://example.com/repo.git</a><br></code></pre><br>后续按需下载指定文件：</p><pre><code class="hljs">&lt;p&gt;bash&lt;/p&gt;&lt;pre&gt;</code></pre><p><code>git lfs pull --include=&quot;video.mp4&quot;<br></code></pre></p><pre><code class="hljs">&lt;p&gt;&lt;/p&gt;&lt;/li&gt;</code></pre></ol><h3>主要优势</h3><ul><li><strong>仓库体积显著减小</strong>：避免大文件占用过多空间，提升克隆速度。</li><li><strong>版本控制更高效</strong>：仅需管理轻量级指针，历史记录更清晰。</li><li><strong>协作友好</strong>：团队成员可选择性下载需要的大文件，节省带宽。</li><li><strong>兼容性强</strong>：与现有 Git 工作流程无缝集成，无需改变使用习惯。</li></ul><h3>注意事项</h3><ul><li><strong>存储成本</strong>：部分托管平台（如 GitHub）对 LFS 存储和带宽有限额，超出需付费。</li><li><strong>依赖外部服务</strong>：需确保 LFS 服务器可用，否则可能影响文件访问。</li><li><strong>历史清理复杂</strong>：若误提交大文件到普通 Git 历史，需使用&nbsp;<code>git filter-repo</code>&nbsp;等工具清理。</li></ul><p>Git LFS 适合需要在 Git 仓库中管理大文件的场景，尤其在音视频制作、机器学习（数据集）、游戏开发（资源文件）等领域应用广泛。</p><h1>二、Git LFS的使用过程</h1><h2>1.创建文件夹，使用git init&nbsp;</h2><p># 在当前目录初始化一个新的 Git 仓库 git init</p><h2>2.在该仓库下安装Git LFS</h2><pre><code class="language-bash">15155@MM MINGW64 /e/Git_Projects/MDK (main)$ git lfs installUpdated Git hooks.Git LFS initialized.</code></pre><p>验证</p><pre><code class="language-bash">$ git lfs versiongit-lfs/3.5.1 (GitHub; windows amd64; go 1.21.7; git e237bb3a)</code></pre><h2>3.<strong>配置跟踪规则</strong></h2><p>在仓库中指定哪些文件需要使用 LFS 管理，支持通配符（如&nbsp;<code>*.mp4</code>、<code>data/*</code>）。</p><h3><strong>方式一：命令行直接跟踪</strong></h3><p>bash</p><pre><code>git lfs track "*.mp4"     # 跟踪所有 MP4 文件git lfs track "data/*"    # 跟踪 data 目录下的所有文件git lfs track "model.h5"  # 跟踪特定文件</code></pre><p>执行后，Git LFS 会自动创建或更新&nbsp;<code>.gitattributes</code>&nbsp;文件（需提交该文件）。</p><pre><code class="language-bash">$ git lfs track "*.zip"Tracking "*.zip"</code></pre><p>产生文件</p><p><img src="/2025/07/27/%E3%80%90Git%E3%80%91Git%20LFS%E7%9A%84%E4%BD%BF%E7%94%A8/6fc4c786aa3940fb94eafdc635bf193e.png"></p><h3>&nbsp;<strong>方式二：手动编辑&nbsp;<code>.gitattributes</code></strong></h3><p>直接在仓库根目录创建或编辑&nbsp;<code>.gitattributes</code>&nbsp;文件，添加类似以下内容：</p><p>plaintext</p><pre><code>*.mp4 filter=lfs diff=lfs merge=lfs -textdata/* filter=lfs diff=lfs merge=lfs -text</code></pre><h2>4.<strong>提交Git LFS配置文件，目标大文件和推送到运程的目标大文件</strong></h2><p>添加、提交和推送文件的操作与普通 Git 流程一致，但大文件会自动上传到 LFS 服务器：</p><p>bash</p><pre><code class="language-bash">git add .gitattributes    # 提交跟踪规则git add video.mp4        # 添加大文件（实际只提交指针）git commit -m "添加视频文件"git push origin main     # 推送时，大文件会上传到 LFS 服务器</code></pre><h3>（1）提交配置</h3><pre><code class="language-bash">$ git add .gitattributes</code></pre><h3>（2）查看大文件</h3><pre><code class="language-bash">$ ls -altotal 813758drwxr-xr-x 1 28970 197609         0 Jul 27 10:24 ./drwxr-xr-x 1 28970 197609         0 Jul 27 09:55 ../drwxr-xr-x 1 28970 197609         0 Jul 27 10:27 .git/-rw-r--r-- 1 28970 197609        43 Jul 27 10:24 .gitattributes-rw-r--r-- 1 28970 197609 833276817 Jul 16 22:16 MDK528.zip-rw-r--r-- 1 28970 197609        39 Jul 27 09:45 README.md</code></pre><h3>（3）暂存目标大文件</h3><pre><code class="language-bash">$ git add MDK528.zip</code></pre><h3>（4）提交到本地</h3><pre><code class="language-bash">$ git commit -m "Firstly,commit a big MDK_Setup_package."[main 39e1935] Firstly,commit a big MDK_Setup_package. 2 files changed, 4 insertions(+) create mode 100644 .gitattributes create mode 100644 MDK528.zip</code></pre><h3>（5）推送至远程</h3><pre><code class="language-bash">$ git push origin mainUploading LFS objects: 100% (1/1), 833 MB | 3.6 MB/s, done.Enumerating objects: 5, done.Counting objects: 100% (5/5), done.Delta compression using up to 20 threadsCompressing objects: 100% (3/3), done.Writing objects: 100% (4/4), 498 bytes | 249.00 KiB/s, done.Total 4 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)To github.com:Molesidy/MDK.git   58bc491..39e1935  main -&gt; main</code></pre><h2>5.成功提交并上传大文件</h2><p><img src="/2025/07/27/%E3%80%90Git%E3%80%91Git%20LFS%E7%9A%84%E4%BD%BF%E7%94%A8/54b19d4e17344c38a8f0e67625694eca.png"></p><p><span style="background-color:#f9eda6">注：普通git不能传输超过100MB的文件，而git lfs在github上最大支持2GB；</span></p><p><span style="background-color:#f9eda6">普通的<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="免费 GitHub 仓库建议" href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github" title="免费 GitHub 仓库建议">免费 GitHub 仓库建议</a>最大存放 1GB 的文件：</span></p><p><span style="background-color:#f9eda6">GitHub 虽未对免费仓库设置严格的硬性容量上限，但建议将仓库大小保持在 1GB 以内，理想情况是小于 5GB。若超过该大小，可能会收到 GitHub 支持团队要求减小仓库大小的邮件。此外，免费账户单个文件不能超过 100MB，若文件大于 50MB 会收到警告，若通过浏览器上传文件，则不得大于 25MB。</span></p><h1 style="background-color:transparent">三、补充说明1</h1><p>Git LFS 的文件大小限制取决于具体的<strong>存储提供商</strong>和<strong>客户端配置</strong>，而非 Git LFS 本身。以下是常见场景的限制说明：</p><h2 style="background-color:transparent"><strong>1. 不同平台的文件大小限制</strong></h2><table><thead><tr><th>平台</th><th>免费版限制</th><th>付费版限制</th></tr></thead><tbody><tr><td><strong>GitHub</strong></td><td>单个文件 &le; 2GB</td><td>单个文件 &le; 5GB（需联系支持）</td></tr><tr><td><strong>GitLab</strong></td><td>单个文件 &le; 10GB（取决于实例配置）</td><td>企业版可提升限制</td></tr><tr><td><strong>Bitbucket</strong></td><td>单个文件 &le; 2GB</td><td>单个文件 &le; 5GB（需联系支持）</td></tr><tr><td><strong>AWS CodeCommit</strong></td><td>无明确限制（受 S3 存储桶限制）</td><td>无明确限制</td></tr><tr><td><strong>自建服务器</strong></td><td>取决于服务器配置（如 Nginx/Apache 限制）</td><td>自定义配置</td></tr></tbody></table><ul><li><strong>注意</strong>：即使平台支持大文件，上传速度也可能受网络和服务器性能影响。</li></ul><h2><strong>2. 客户端配置限制</strong></h2><p>Git LFS 客户端默认没有严格的文件大小上限，但可能受以下因素影响：</p><ul><li><strong>HTTP 请求大小限制</strong>：如果使用 HTTP 协议传输，服务器（如 Nginx、Apache）可能限制最大请求体大小。例如：<pre><code class="hljs">&lt;p&gt;bash&lt;/p&gt;&lt;pre&gt;</code></pre><p><code># Nginx 配置示例（需修改 nginx.conf）<br>client_max_body_size 10G;<br></code></pre><br></li><br><li><strong>内存和磁盘空间</strong>：上传 &#x2F; 下载大文件时，客户端需要足够的临时空间缓存数据。</li></p></ul><h2 style="background-color:transparent"><strong>3. 突破限制的方法</strong></h2><ul><li><strong>使用专业存储服务</strong>：对于超大文件（如数十 GB），可考虑将文件存储在云存储（如 S3、Google Cloud Storage），仅在 Git 中记录下载链接。</li><li><strong>分块处理</strong>：将大文件分割为多个小文件（如使用&nbsp;<code>split</code>&nbsp;命令），分别管理。</li><li><strong>联系平台支持</strong>：企业版用户可联系 GitHub/GitLab 等平台提升限制。</li></ul><h2><strong>4. 最佳实践</strong></h2><ul><li><strong>避免超大型文件</strong>：尽量将单个文件控制在 1GB 以内，过大的文件会显著降低协作效率。</li><li><strong>使用&nbsp;<code>.gitattributes</code>&nbsp;严格过滤</strong>：仅对必要的大文件使用 LFS，避免意外提交不需要的大文件。</li><li><strong>定期清理历史</strong>：使用&nbsp;<code>git lfs prune</code>&nbsp;清理不再需要的本地 LFS 文件。</li></ul><h2 style="background-color:transparent"><strong>总结</strong></h2><p>Git LFS 的实际文件大小限制因平台而异，<strong>免费版通常支持 2GB 以内</strong>，付费版或自建服务器可扩展到更大。在使用前，建议查看对应平台的文档或联系技术支持确认具体限制。</p><h1>四、补充说明2</h1><p>对于免费 GitHub 用户，<strong>单个仓库内的 Git LFS 文件最大支持 2GB</strong>，这一结论是正确的。以下是具体细节和限制说明：</p><h2 style="background-color:transparent"><strong>1. 单个文件大小限制：2GB（免费版明确支持）</strong></h2><p>根据 <a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="GitHub 官方文档" href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-git-large-file-storage" title="GitHub 官方文档">GitHub 官方文档</a>，免费用户的 Git LFS 文件大小限制为：</p><ul><li><strong>单个文件上限</strong>：2GB（付费版如 GitHub Team 为 4GB，GitHub Enterprise Cloud 为 5GB）。</li><li><strong>超出处理</strong>：若上传超过 2GB 的文件，Git LFS 会直接拒绝并报错。</li></ul><p>例如，用户上传一个 2.1GB 的视频文件时，会收到类似以下的错误提示：</p><p>bash</p><pre><code>error: The file "large_video.mp4" is 2.1 GB; this exceeds GitHub's file size limit of 2.0 GB for Git LFS files.</code></pre><h2 style="background-color:transparent"><strong>2. 仓库总存储量限制：所有仓库共享 1GB</strong></h2><p>尽管单个文件支持 2GB，但免费用户的<strong>所有仓库的 LFS 文件总存储量被限制为 1GB</strong>。例如：</p><ul><li>若在多个仓库中分别上传 2 个 1GB 的 LFS 文件，总存储量将达到 2GB，超出免费配额，导致后续上传失败。</li><li>需通过 GitHub 账户设置中的<strong>Billing and plans</strong>页面查看实时用量。</li></ul><h2><strong>3. 带宽配额：每月 1GB（所有仓库共享）</strong></h2><p>免费用户的 LFS 文件下载和上传带宽每月总计 1GB。例如：</p><ul><li>若一个 2GB 的 LFS 文件被下载 5 次，总带宽消耗为 10GB（远超免费配额），此时文件将无法继续下载，需升级付费计划。</li></ul><h2 style="background-color:transparent"><strong>4. 常见误区与注意事项</strong></h2><h3>（1）仓库总大小与 LFS 存储的区别</h3><ul><li><strong>仓库总大小</strong>：GitHub 建议免费仓库总大小控制在 1GB 以内（含普通文件和 LFS 指针文件），但这是软性建议，非硬性限制。</li><li><strong>LFS 存储量</strong>：仅计算实际存储在 GitHub LFS 服务器上的大文件内容，不包含仓库中的普通文件和指针文件。</li></ul><h3>（2）LFS 指针文件不占用存储配额</h3><p>Git LFS 在仓库中存储的是<strong>轻量级指针文件</strong>（约 1KB），这些文件不计入 1GB 的 LFS 存储配额。例如：</p><ul><li>即使仓库中有 1000 个 LFS 指针文件，它们的总大小仍可忽略不计。</li></ul><h3>（3）历史文件清理的重要性</h3><ul><li><strong>未引用的 LFS 文件</strong>：即使文件被删除或从仓库历史中移除，其内容仍可能保留在 LFS 存储中，继续占用配额。</li><li><strong>清理方法</strong>：使用&nbsp;<code>git lfs prune</code>&nbsp;命令清理本地未引用的 LFS 文件，或通过 GitHub API 删除远程未引用的对象。</li></ul><h2 style="background-color:transparent"><strong>5. 突破限制的可行方案</strong></h2><h3>（1）拆分大文件</h3><ul><li>将单个 2GB 以上的文件拆分为多个 2GB 以内的片段（如使用&nbsp;<code>split</code>&nbsp;命令），分别上传。</li><li>示例：<p>bash</p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code>split -b 2G large_file.iso large_file_part_<br></code></pre><br></li></p></ul><h3>（2）混合使用 LFS 和外部存储</h3><ul><li>对超过 2GB 的文件，将其存储在云存储（如 AWS S3、Google Cloud Storage），仅在 Git 中记录下载链接。</li><li>示例：<p>markdown</p><pre><code class="hljs">&lt;pre&gt;</code></pre><p><code># 下载大文件的说明</p><ol><li>访问 <a href="https://example-bucket.s3.amazonaws.com/large_model.pth">S3链接</a></li><li>将文件放置在 <code>models/</code> 目录下<br></code></pre> </li></ul></li></ol><h3>（3）升级付费计划</h3><ul><li><strong>GitHub Team</strong>（$4 / 用户 / 月）：提供 50GB 存储 + 50GB / 月带宽，单个文件支持 4GB。</li><li><strong>GitHub Enterprise Cloud</strong>：支持 5GB 单个文件，存储和带宽配额更高。</li></ul><h3><strong>总结</strong></h3><p>免费 GitHub 用户的<strong>单个仓库内的 Git LFS 文件最大支持 2GB</strong>，但需注意以下全局限制：</p><ol><li><strong>所有仓库的 LFS 文件总存储量</strong>：1GB。</li><li><strong>每月带宽配额</strong>：1GB。</li><li><strong>仓库总大小建议</strong>：控制在 1GB 以内（含普通文件和指针文件）。</li></ol><p>若需频繁处理大文件，建议结合外部存储或升级付费计划，以避免因配额不足影响协作。</p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git git lfs 远程推送 学习记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【EWARM】EWARM（IAR）的安装过程以及GD32的IAR工程模板搭建</title>
    <link href="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="IAR官网" href="https://www.iar.com/zh/embedded-development-tools/free-trials" title="IAR官网">IAR官网</a></p><p>EWARM，即 IAR Embedded Workbench for ARM，是由 IAR Systems 开发的一款专门用于 ARM 微处理器软件开发的集成开发环境。以下是具体介绍：</p><ul><li><strong>功能特性</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;完整工具链支持&lt;/strong&gt;：集成了高级编辑器、全面的编译器工具链以及功能强大的调试器，支持从编码、编译、调试到固件下载的完整开发周期。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;多核心支持&lt;/strong&gt;：支持多种 ARM 核心，如 Cortex-M、Cortex-R 等，还为不同的 ARM 内核和硬件平台提供了一系列预设的项目模板，可针对不同处理器进行优化编译。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;实时操作系统兼容&lt;/strong&gt;：支持多种 RTOS，包括 FreeRTOS、RT-Thread、uC/OS 等，方便开发者在多任务或高实时性要求的应用场景中进行开发。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;调试功能&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;丰富调试接口&lt;/strong&gt;：支持 JTAG 调试，也可使用 SWD 接口，方便开发者访问微控制器的内部资源，如寄存器、内存和外设等，以进行实时调试和分析。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;多种调试手段&lt;/strong&gt;：内置的调试器提供了断点、步进、单步、变量观察和寄存器查看等功能，还支持事件追踪、数据追踪和地址追踪等多种追踪模式，以及代码覆盖率分析和性能分析等功能，有助于开发者发现程序瓶颈并优化程序性能。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;主要模块&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;编译器&lt;/strong&gt;：高度优化的 IAR ARM C/C++ Compiler，具有先进的通用编译器优化和针对特定处理器的速度优化及存储器优化功能。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;链接器&lt;/strong&gt;：一个通用的 IAR XLINK Linker，可将编译后的目标文件链接成可执行文件或库文件。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;建库程序和运行库&lt;/strong&gt;：IAR XAR 和 XLIB 建库程序用于创建和管理库文件，IAR DLIB C/C++ 运行库提供了运行时所需的函数支持。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;调试器&lt;/strong&gt;：IAR C-SPY 调试器是一款先进的高级语言调试器，支持源代码和反汇编程序调试，具备复杂的代码和数据断点、丰富的数据监视功能等。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;其他&lt;/strong&gt;：还包括项目管理器、功能强大的编辑器以及命令行实用程序等。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;优势特点&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;入门容易&lt;/strong&gt;：相较于其他一些 ARM 开发环境，EWARM 具有较为友好的操作界面和相对简单的配置流程，开发者能够较快上手，适合初学者使用。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;代码紧凑&lt;/strong&gt;：通过其优化的编译器和相关工具，生成的代码具有较高的效率，代码体积相对较小，能够更好地适应嵌入式系统对资源有限的特点。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;跨平台支持良好&lt;/strong&gt;：从软件模拟器到高性能的硬件调试器，EWARM 提供了广泛的目标设备支持，可在不同的开发环境和硬件平台上使用。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h1>二、EWARM（IAR）安装过程</h1><h2>1.点击运行安装程序</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/41967378adec45b1a82ef5f08be4ad65.png"></p><h2>2.选择第1个选项安装IAR FOR ARM（对于ARM架构的）</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/db66662a209c4c48a9b3139eee7ed2b0.png"></p><h2>3.NEXT</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/85b7fdd7382542139d73f07b659ddad8.png"></p><h2>4.accept，NEXT</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/10d3121768ac475a9f11c46dcb64168e.png"></p><h2>5.选择安装路径（建议C盘以外，最好新建一个不含有中文的文件夹，因为后续有些版本不支持中文路径），下一步</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/cfc5ed60253743e5a08b1e956ddd7bfd.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/eb607764585441f695e4555f52c91bdf.png"></p><h2>6.驱动</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4a29adfa63b04fdd827328227453739d.png"></p><h2>7.下一步</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4c6815e2ab214c15b642cb46c4358cff.png"></p><h2>8.确定</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/d6de6c484f314969a07d947bb24ffd00.png"></p><h2>9.安装</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/0d8d5a8e68cb427f8dfa52a70c82212d.png"></p><h2>10.等待安装完成</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/719430643e1c46f6aa4416d3f02d73b1.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/fb450c19c7804e9c804580805cf76954.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/8ea851a2e2d249179d698b2c0eccd6d5.png"></p><h2>11.暂时不打开软件，暂时取消证书的安装</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/437e5380b06849b8b494495567187014.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/50d72f58952149b3a7c57496a5e325f3.png"></p><h2>12.驱动无脑装</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/648d735855db4604a8ddccf1b3cad1cc.png"></p><p>&nbsp;<img alt="" height="457" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/a428b4b9732b4e4daf015f3baf1b949c.png" width="758" /></p><p>这是&nbsp;<strong>TI Emulators 8.0.803.0</strong>（德州仪器仿真器软件）的安装许可协议界面，核心内容是：</p><p>1. 界面功能</p><ul><li>呈现&nbsp;<strong>德州仪器（Texas Instruments）的软件许可协议</strong>，要求你阅读并决定是否接受条款。</li><li>协议里有版权、使用限制、责任等法律约束内容（2004 年 3 月 11 日版本 ）。</li></ul><p>2. 操作选项</p><ul><li><strong>接受协议（I accept the agreement）</strong>：选这个才能继续安装，代表你同意遵守协议条款。</li><li><strong>不接受（I do not accept the agreement）</strong>：选这个会终止安装，无法使用软件。</li></ul><p>简单说，就是安装前让你确认 &ldquo;是否同意德州仪器的软件使用规则&rdquo;，想装软件就得选 &ldquo;接受&rdquo;，点 &ldquo;Next&rdquo; 继续流程；不想装就选 &ldquo;不接受&rdquo; 或直接关窗口～</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/6e20715afbb7415f9468e286c1335153.png"></p><p>这是&nbsp;<strong>TI Emulators 8.0.803.0（德州仪器仿真器软件）</strong>&nbsp;的安装路径设置界面，核心信息是：</p><p>1. 标题含义</p><p>&ldquo;Code Composer Studio Installation Directory&rdquo;：需指定软件安装路径，若和 Code Composer Studio（CCS，德州仪器的集成开发环境）一起用，要选对应 CCS 版本（ccsv5/6/7）的文件夹。</p><p>2. 路径说明</p><ul><li>默认路径是&nbsp;<code>C:\ti</code>，你可以修改成其他自定义路径（点输入框右侧文件夹图标选位置）。</li><li>若已有 CCS，按提示选到 CCS 安装目录里的&nbsp;<code>ccsv5</code>/<code>ccsv6</code>/<code>ccsv7</code>&nbsp;文件夹，能让仿真器和 CCS 更好配合。</li></ul><p>3. 操作逻辑</p><p>选好路径后点 &ldquo;Next&rdquo; 继续安装；想改路径就调整输入框内容；不想装了点 &ldquo;Cancel&rdquo; 退出。</p><p>简单说，就是让你选 &ldquo;把 TI 仿真器软件装到电脑哪个位置&rdquo;，按需求（或默认）设好路径，继续下一步安装流程～</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/0a4341a8db314fdb8fc4c81922cee8e7.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/78dd668748964102b413cafc65939362.png"></p><h2>13.打开运行，准备安装证书</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/a35a6c39d4bc47b7983cce08561cf6b2.png"></p><p>取消</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/9e605363547e470e98363f82d5c90ccd.png"></p><h2><strong>14.到help下的License manager</strong></h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/574a7cf8b8ac41f2804ad793cd681577.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/b6823374096f421c87a13c83f3a6a96c.png"></p><h2>15.点击License下的离线激活</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/71accec030414739b0053d3cb71d663a.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/87ae9305c2fc4f8a87c3b1d994dfee62.png"></p><h2>16.注册机</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/0a2e93871937493489911e9d714da05e.png"></p><h2>17.将注册机的License Number，放到离线激活里，然后，离线激活里再点击下一步</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/bd1cb0dae962491ea0fbaa7e71c5fafa.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/5b59e2920ab84e96a2ad5dd18283f255.png"></p><h2>18.NO&nbsp;</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/a09cf6fdbf324a5cb250464e69822d36.png"></p><h2>19.选择存放初始证书的位置，后面再使用这个产生一个回应的验证证书</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/9d7fb85d8c6047ef9e0d44d99f32bf27.png"></p><h2>20.确认下一步</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/12c95f0672214cdb8b89ba9d57454f12.png"></p><h2>21.使用注册机去使用初始证书，产生一个回应的验证证书（真正的证书）</h2><p>选择初始证书</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/1edeff94adf641008a91722e5f4a785e.png"></p><p>点击产生&nbsp;</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/fd80ee27e2cb4eac91867bbf3e49fd1e.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4e58e6c42e684b7e9641eed3cb52b88b.png"></p><h2>22.回到注册页面，选择回应文件</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/a7e5714ca60e46dfa8e367343f693ee0.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/7a8249b36ff44c93b634e064230be81d.png"></p><p>&nbsp;<img alt="" height="719" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/f3a318de15704fbd8753c1ebac67d476.png" width="900" /></p><h2>23.后续</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/6171531af9104b37a81c34a4cf99eb0d.png"></p><p>这是&nbsp;<strong>IAR License Manager（IAR 许可证管理器）</strong>&nbsp;的弹窗，对应&nbsp;<code>IAR Embedded Workbench for Arm 8.32</code>&nbsp;版本，核心内容是：</p><h3>1. 功能说明</h3><p>你的许可证允许提取&nbsp;<strong>IAR Library Source for Arm（ARM 库源代码包）</strong>，这些代码可辅助开发，但<strong>提取需要管理员权限</strong>（确保系统级操作权限）。</p><h3>2. 操作选项</h3><ul><li><strong>Yes</strong>：立即提取库源代码，点了之后会触发管理员权限申请（可能弹 UAC 确认框），完成后把代码放到指定路径。</li><li><strong>No</strong>：暂不提取，之后想提随时能在许可证管理器里操作；若勾选&nbsp;<code>Don&#39;t notify me about this again</code>，下次不会再弹这个提示。</li></ul><h3>3. 建议逻辑</h3><ul><li>若开发时需要调试 / 查看库代码（比如做底层优化、排错），选&nbsp;<strong>Yes</strong>&nbsp;提取，方便后续开发；</li><li>若只是简单用 IAR 编译、不碰库源码，选&nbsp;<strong>No</strong>&nbsp;也不影响基础功能。</li></ul><p>简单说，就是 &ldquo;许可证给你权限提取 ARM 库源码，要不要现在用管理员权限提取&rdquo;，按需选就行～</p><p>我选的yes&nbsp;</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/0a1492d064984070a766209f11096cfa.png"></p><h2>24.绿色状态，完成</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/541da624ad7e4522b9f66b463d0ffca3.png"></p><h1>三、初步新建IAR下的GD32工程模板</h1><p>注：硬件平台：立创梁山派</p><h2>1.到<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="GD32的官网" href="https://www.gd32mcu.com/cn/download/7?kw=GD32F4" title="GD32的官网">GD32的官网</a>下载固件库和IAR环境支持包（环境补丁）</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/20c34fa1b28340b48b7851536cc81735.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/6526f93ba3d147ee8c665a61d496b26d.png"></p><h2>2.安装IAR补丁，一定一定要以管理员身份运行才能让其自动检测到你安装的IAR路径！！！</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/1d351a386ee84ff1bdefc47e20555e46.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/3dda492670894f2caf9baa1a0a076b2d.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/c66dea1dfb9e4d1493073f24cef1b802.png"></p><h2>3.新建工程文件夹IAR_GD32_Template</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/2c26700478d44c7bb55362cdd9c7790a.png"></p><h2>4.\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library下的Firmware里就是外设源文件，但是，首先，在我们的工程文件夹里新建文件夹</h2><p>![](<a href="https://i-blog.csdnimg.cn/direct/a317b177cb654598ae6d6d9a745233d9.png">https://i-blog.csdnimg.cn/direct/a317b177cb654598ae6d6d9a745233d9.png</a>“ width&#x3D;”1095” &#x2F;&gt;&lt;img alt&#x3D;)</p><h2>5.搬移文件</h2><h3>（1）CMSIS</h3><p>\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Firmware\CMSIS的core内核文件放到CMSIS</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/e4b9f06273ee47e4bb12ef80a163d13d.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/d06c38ab6a2d4381a344b3af278ae7b4.png"></p><h3>（2）StartUp</h3><p>IAR环境启动文件</p><p>\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Firmware\CMSIS\GD\GD32F4xx\Source\IAR下的启动文件放到StartUp</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4a0271b37a0341ab9541fa19c8906987.png"></p><h3>（3）SYSTEM</h3><h3>\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Firmware\CMSIS\GD\GD32F4xx下的头文件放到SYSTEM的INCLUDE</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/97d1dc708d5f414797c31f4f68a3e8ee.png"></p><p>\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Firmware\CMSIS\GD\GD32F4xx\Source下的system_gd32f4xx.c放到SYSTEM的SOURCE</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/608145bff3324ab2a9fe85ca9d77eb6d.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/c9cbb2ae54124ecf880dda0825dbbbc3.png"></p><p>![](<a href="https://i-blog.csdnimg.cn/direct/5a77ec7d48bb4c189f252c7a963db04a.png">https://i-blog.csdnimg.cn/direct/5a77ec7d48bb4c189f252c7a963db04a.png</a>“ width&#x3D;”1057” &#x2F;&gt;&lt;img alt&#x3D;)</p><h3>（4）USER</h3><p>同时根据官方例程需要一些其他文件支持，在\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Template寻找</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/efd6a240aa67437bb9b6d84a3a7d986c.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/5d722d90dd1948998a8b5c5519ead3eb.png"></p><p>根据自己习惯，分个类</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/298cf32e14264e1682be76365ba1a567.png"></p><h3>（5）GD32F4xx_standard_peripheral</h3><p>\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library_V3.3.1\GD32F4xx_Firmware_Library\Firmware\GD32F4xx_standard_peripheral</p><h3><img alt="" height="264" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/1fe5d5328a334f67b039aa4a35b9920c.png" width="835" /></h3><p>将外设源文件全放到GD32F4xx_standard_peripheral</p><h2>6.打开IAR，创建IAR工程</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/f09942136c4f4d409e90e8410326c3ae.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/62d3b559009c4301ae033a4c5639f2f8.png"></p><h2>7.跟keil就差不多了，就是新建组别，添加文件</h2><p>&nbsp;<img alt="" height="635" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/f9dac6d91a7e42359ceaa0fe7cc421a9.png" width="656" /></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/7ba445a4f60f409687617eef45a8e431.png"></p><h2>8.工程配置</h2><h3>（1）右击项目，选择Options</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/3a3179a169d54eb9ae4df4df0ef4d729.png"></p><h3>（2）选芯片</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/eeb7b916dc5d40b785701518d020081d.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/ecccb03c1a8642b298e921cbd44d5b8f.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/ad45a6366f7b4b2ebce94df9366a1629.png"></p><h3>（3）配置库，内核文件已有CMSIS</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/ffaeaf2542d04815b787d0d46c8bbe02.png"></p><p>设置外部文件夹Debug</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/39b1feb3387a48f8aef629cedef02fcb.png"></p><h3>（4）添加宏，路径</h3><pre><code class="language-cpp">USE_STDPERIPH_DRIVER,GD32F4XX,LV_CONF_INCLUDE_SIMPLE</code></pre><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/b8e9dcb9539c4ba4a7af465056a972b2.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/46ad1503b87f42b5a72b9c2459df6d5d.png"></p><p>下拉选择相对路径：</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4bf2dc3368624c30968e654e17416f9a.png"></p><h3>（5）输出配置</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/9d2146db536243c5969012eb7ec1c765.png"></p><h3>（6）选择下载模式</h3><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/7c9fd1e8f68342938c2b3c0cde4fb092.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/033aee7c93d24cf98135c8e5c1a6755f.png"></p><p>差点忘记立创梁山派用的DAP了</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/18c6e45e6e244cde9bb18615b7739fed.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4fab926f4a304dccbc260709287ce18a.png"></p><h3>（7）选择链接文件</h3><p>Linker --&gt; Config --&gt; Linker configuration file&nbsp; 勾选上 Override default 重设默认文件</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/b8d7b8dcc3b443eeb61d857874478523.png"></p><h2>9.编译</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/75246ef2e8c64952949c2a6bbe589600.png"></p><p>保存工作空间</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/cacc1d15e3e04425bae6246a9e8e0008.png"></p><h2>10.解决报错</h2><pre><code class="language-cpp">Building configuration: IAR_GD32 - Debug Updating build tree...  0  file(s) deleted. Updating build tree... startup_gd32f450_470.s gd32f4xx_exmc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_dbg.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_enet.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_dci.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_dma.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_dac.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_crc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_can.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_ctc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_adc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_misc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_i2c.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_pmu.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_fwdgt.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_exti.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_ipa.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_fmc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_it.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_gpio.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_iref.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_wwdgt.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_tli.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_rcu.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_rtc.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_sdio.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_spi.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_syscfg.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_usart.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_timer.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler gd32f4xx_trng.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler main.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler systick.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler system_gd32f4xx.c  Fatal Error[Pe035]: #error directive: "Please select the target GD32F4xx device in gd32f4xx.h file" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\SYSTEM\Include\gd32f4xx.h 56 Error while running C/C++ Compiler  Total number of errors: 33 Total number of warnings: 0 </code></pre><p>添加具体的芯片的宏&nbsp;</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/68f168be29564851be592fbd446afc4c.png"></p><pre><code class="language-cpp">Building configuration: IAR_GD32 - Debug Updating build tree...  1  file(s) deleted. Updating build tree... startup_gd32f450_470.s gd32f4xx_exmc.c  gd32f4xx_can.c  gd32f4xx_ctc.c  gd32f4xx_dbg.c  gd32f4xx_dma.c  gd32f4xx_dci.c  gd32f4xx_crc.c  gd32f4xx_enet.c  gd32f4xx_dac.c  gd32f4xx_adc.c  gd32f4xx_exti.c  gd32f4xx_i2c.c  gd32f4xx_pmu.c  gd32f4xx_misc.c  gd32f4xx_fmc.c  gd32f4xx_gpio.c  gd32f4xx_fwdgt.c  gd32f4xx_rcu.c  gd32f4xx_it.c  gd32f4xx_ipa.c  gd32f4xx_iref.c  main.c  Fatal Error[Pe1696]: cannot open source file "gd32f450i_eval.h" E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\USER\Source\main.c 39             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\USER\Source\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\CMSIS\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\GD32F4xx_standard_peripheral\Include\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\GD32F4xx_standard_peripheral\Source\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\StartUp\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\SYSTEM\Include\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\SYSTEM\Source\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\USER\Include\"             searched: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\Project\..\USER\Source\"             searched: "D:\IAR Systems\Embedded Workbench 8.2\arm\inc\"             searched: "D:\IAR Systems\Embedded Workbench 8.2\arm\inc\c\"             current directory: "E:\EWARM_Projects\EWARM_Examples_Workspaces\IAR_GD32\IAR_GD32_Template\USER\Source" Error while running C/C++ Compiler gd32f4xx_wwdgt.c  gd32f4xx_rtc.c  gd32f4xx_trng.c  gd32f4xx_syscfg.c  gd32f4xx_tli.c  gd32f4xx_sdio.c  gd32f4xx_spi.c  gd32f4xx_usart.c  gd32f4xx_timer.c  systick.c  system_gd32f4xx.c   Total number of errors: 1 Total number of warnings: 0 </code></pre><p>方法1：</p><p>添加上去gd32f450i_eval.c/h</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/4025d15c096345128f09f241a6215ffc.png"></p><p>方法二：</p><p>重写main.c，不用#include &quot;gd32f450i_eval.h&quot;</p><h2>11.代码改正</h2><p>gd32f4xx_it.c</p><p>注释led_spark();</p><pre><code class="language-cpp">/*!    \file    gd32f4xx_it.c    \brief   interrupt service routines    \version 2024-12-20, V3.3.1, firmware for GD32F4xx*//*    Copyright (c) 2024, GigaDevice Semiconductor Inc.    Redistribution and use in source and binary forms, with or without modification,are permitted provided that the following conditions are met:    1. Redistributions of source code must retain the above copyright notice, this       list of conditions and the following disclaimer.    2. Redistributions in binary form must reproduce the above copyright notice,       this list of conditions and the following disclaimer in the documentation       and/or other materials provided with the distribution.    3. Neither the name of the copyright holder nor the names of its contributors       may be used to endorse or promote products derived from this software without       specific prior written permission.    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIEDWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUTNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, ORPROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITYOF SUCH DAMAGE.*/#include "gd32f4xx_it.h"#include "main.h"#include "systick.h"/*!    \brief      this function handles NMI exception    \param[in]  none    \param[out] none    \retval     none*/void NMI_Handler(void){    /* if NMI exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles HardFault exception    \param[in]  none    \param[out] none    \retval     none*/void HardFault_Handler(void){    /* if Hard Fault exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles MemManage exception    \param[in]  none    \param[out] none    \retval     none*/void MemManage_Handler(void){    /* if Memory Manage exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles BusFault exception    \param[in]  none    \param[out] none    \retval     none*/void BusFault_Handler(void){    /* if Bus Fault exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles UsageFault exception    \param[in]  none    \param[out] none    \retval     none*/void UsageFault_Handler(void){    /* if Usage Fault exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles SVC exception    \param[in]  none    \param[out] none    \retval     none*/void SVC_Handler(void){    /* if SVC exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles DebugMon exception    \param[in]  none    \param[out] none    \retval     none*/void DebugMon_Handler(void){    /* if DebugMon exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief      this function handles PendSV exception    \param[in]  none    \param[out] none    \retval     none*/void PendSV_Handler(void){    /* if PendSV exception occurs, go to infinite loop */    while(1) {    }}/*!    \brief    this function handles SysTick exception    \param[in]  none    \param[out] none    \retval     none*/void SysTick_Handler(void){    //led_spark();    delay_decrement();}</code></pre><p>&nbsp;main.h</p><p>注释void led_spark(void);</p><pre><code class="language-cpp">/*!    \file    main.h    \brief   the header file of main    \version 2024-12-20, V3.3.1, firmware for GD32F4xx*//*    Copyright (c) 2024, GigaDevice Semiconductor Inc.    Redistribution and use in source and binary forms, with or without modification,are permitted provided that the following conditions are met:    1. Redistributions of source code must retain the above copyright notice, this       list of conditions and the following disclaimer.    2. Redistributions in binary form must reproduce the above copyright notice,       this list of conditions and the following disclaimer in the documentation       and/or other materials provided with the distribution.    3. Neither the name of the copyright holder nor the names of its contributors       may be used to endorse or promote products derived from this software without       specific prior written permission.    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIEDWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUTNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, ORPROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITYOF SUCH DAMAGE.*/#ifndef __MAIN_H#define __MAIN_H/* led spark function *///void led_spark(void);#endif /* __MAIN_H */</code></pre><p>main.c</p><pre><code class="language-cpp">/*!    \file    main.c    \brief   led spark with systick    \version 2024-12-20, V3.3.1, firmware for GD32F4xx*//*    Copyright (c) 2024, GigaDevice Semiconductor Inc.    Redistribution and use in source and binary forms, with or without modification,are permitted provided that the following conditions are met:    1. Redistributions of source code must retain the above copyright notice, this       list of conditions and the following disclaimer.    2. Redistributions in binary form must reproduce the above copyright notice,       this list of conditions and the following disclaimer in the documentation       and/or other materials provided with the distribution.    3. Neither the name of the copyright holder nor the names of its contributors       may be used to endorse or promote products derived from this software without       specific prior written permission.    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIEDWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUTNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, ORPROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITYOF SUCH DAMAGE.*/#include "gd32f4xx.h"#include "systick.h"#include &lt;stdio.h&gt;#include "main.h"//#include "gd32f450i_eval.h"int main(void){  systick_config();    // 开启时钟    rcu_periph_clock_enable(RCU_GPIOD);     /* 配置为输出模式 */  gpio_mode_set(GPIOD,GPIO_MODE_OUTPUT, GPIO_PUPD_NONE, GPIO_PIN_7);    /* 配置为推挽输出 50MHZ */  gpio_output_options_set(GPIOD, GPIO_OTYPE_PP, GPIO_OSPEED_50MHZ, GPIO_PIN_7);  gpio_bit_set(GPIOD,  GPIO_PIN_7);  while(1)  {    gpio_bit_write(GPIOD, GPIO_PIN_7, RESET);    delay_1ms(100);        gpio_bit_write(GPIOD, GPIO_PIN_7, SET);    delay_1ms(100);      }}///*!//    \brief    toggle the led every 500ms//    \param[in]  none//    \param[out] none//    \retval     none//*///void led_spark(void)//{//    static __IO uint32_t timingdelaylocal = 0U;////    if(timingdelaylocal) {////        if(timingdelaylocal &lt; 500U) {//            gd_eval_led_on(LED1);//        } else {//            gd_eval_led_off(LED1);//        }////        timingdelaylocal--;//    } else {//        timingdelaylocal = 1000U;//    }//}/////*!//    \brief    main function//    \param[in]  none//    \param[out] none//    \retval     none//*///int main(void)//{//#ifdef __FIRMWARE_VERSION_DEFINE//    uint32_t fw_ver = 0;//#endif////    gd_eval_led_init(LED1);//    systick_config();////#ifdef __FIRMWARE_VERSION_DEFINE//    fw_ver = gd32f4xx_firmware_version_get();//    /* print firmware version *///    printf("\r\nGD32F4xx series firmware version: V%d.%d.%d", (uint8_t)(fw_ver &gt;&gt; 24), (uint8_t)(fw_ver &gt;&gt; 16), (uint8_t)(fw_ver &gt;&gt; 8));//#endif /* __FIRMWARE_VERSION_DEFINE */////    while(1) {//    }//}////#ifdef GD_ECLIPSE_GCC///* retarget the C library printf function to the USART, in Eclipse GCC environment *///int __io_putchar(int ch)//{//    usart_data_transmit(EVAL_COM0, (uint8_t)ch);//    while(RESET == usart_flag_get(EVAL_COM0, USART_FLAG_TBE));//    return ch;//}//#else///* retarget the C library printf function to the USART *///int fputc(int ch, FILE *f)//{//    usart_data_transmit(EVAL_COM0, (uint8_t)ch);//    while(RESET == usart_flag_get(EVAL_COM0, USART_FLAG_TBE));////    return ch;//}//#endif /* GD_ECLIPSE_GCC */</code></pre><p>&nbsp;编译没有问题<img alt="" height="1022" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/c6f3a52a6311468db2f7c02be408c251.png" width="1919" /></p><h2>12.下载</h2><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/0eab5d8d6a984f99b81ea0a28b463e31.png"></p><p>注意：由于IAR对于DAP支持较差，可能出问题，需要重新设置一下DAP</p><p>参考链接：<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!" href="https://www.armbbs.cn/forum.php?mod=viewthread&amp;tid=113113" title="H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!">H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!</a></p><p>DAP下载失败问题的解决方法：</p><p>（1）DAP开启&nbsp;</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/e67bf6ae7f2243229016da5fd4322e53.png"></p><p>（2）这里建议选择Software和Hardware，我选的Software成功</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/26e3b463604e4327a6503eeb4b390710.png"></p><p>勾选</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/9477ae95c3954b01b96ec6b22f72be3c.png"></p><p>（3）接口模式SWD</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/9d60dc2c55fd4d1595044b69f4b0969a.png"></p><p>我成功了&nbsp;</p><h2>13.成功，演示过程</h2><p>点OK&nbsp;</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/bbb0a3db66d949b8adbd24b58f29e060.png"></p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/30a00a614d794697a366e2a629ae7aa5.png"></p><p>点GO，不打断点，全速运行</p><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/8429acd9a3cc4257872a6b17682a593a.png"></p><h1>四、实验效果</h1><p><img src="/2025/07/27/%E3%80%90EWARM%E3%80%91EWARM%EF%BC%88IAR%EF%BC%89%E7%9A%84%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%BB%A5%E5%8F%8AGD32%E7%9A%84IAR%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA/6e7a9ad63f2141cb89c5243feb2a22a6.gif"></p><p>工程链接：</p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="https://github.com/Molesidy/GD32.git" href="https://github.com/Molesidy/GD32.git" title="https://github.com/Molesidy/GD32.git"><span class="link-card-box" contenteditable="false"><span class="link-title">https://github.com/Molesidy/GD32.git</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://github.com/Molesidy/GD32.git</span></span></a></p><p>参考链接（如有侵权，请联系删除）：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="IAR新建工程模块及工程配置 - GWen9 - 博客园" href="https://www.cnblogs.com/Gentle-Wen/p/13278524.html" title="IAR新建工程模块及工程配置 - GWen9 - 博客园">IAR新建工程模块及工程配置 - GWen9 - 博客园</a></p><p id="articleContentId"><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="IAR for ARM下载、安装、注册，并搭建stm32工程（胎教版）" href="https://blog.csdn.net/qq_56527127/article/details/119815640#:~:text=%E4%BA%8E%E6%98%AF%E5%88%B0%E7%BD%91%E4%B8%8A%E6%89%BE%E5%88%B0%E4%BA%86%E4%B8%80%E4%B8%AA%E7%89%88%E6%9C%AC%E6%AF%94%E8%BE%83%E9%AB%98%E7%9A%84%E8%B5%84%E6%BA%90%20IAR%20For%20ARM%208.31%20%28%E6%8F%90%E5%8F%96%E7%A0%81i91o%29%EF%BC%8C%E4%BA%B2%E6%B5%8B%E5%8F%AF%E7%94%A8%E3%80%82%20%E4%B8%8B%E8%BE%B9%E6%98%AF%E5%AE%89%E8%A3%85%E5%8F%8A%E6%B3%A8%E5%86%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A,1%E3%80%81%E6%89%93%E5%BC%80%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%8C%E9%80%89%E6%8B%A9%E2%80%9C%E5%AE%89%E8%A3%85%E2%80%9D%E9%80%89%E9%A1%B9%202%E3%80%81%E7%9B%B4%E6%8E%A5%E4%B8%8B%E4%B8%80%E6%AD%A5%203%E3%80%81%E6%8E%A5%E5%8F%97%EF%BC%8C%E4%B8%8B%E4%B8%80%E6%AD%A5%204%E3%80%81%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84%EF%BC%88%E5%BB%BA%E8%AE%AE%E7%B3%BB%E7%BB%9F%E7%9B%98%E4%BB%A5%E5%A4%96%EF%BC%8C%E4%B8%BA%E4%BA%86%E4%BB%A5%E9%98%B2%E4%B8%87%E4%B8%80%E6%9C%80%E5%A5%BD%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%90%AB%E6%9C%89%E4%B8%AD%E6%96%87%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%89%EF%BC%8C%E4%B8%8B%E4%B8%80%E6%AD%A5%205%E3%80%81%E9%80%89%E6%8B%A9%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E7%9A%84%E8%B0%83%E8%AF%95%E9%A9%B1%E5%8A%A8%EF%BC%8C%E6%88%91%E6%98%AF%E5%85%A8%E9%80%89%E4%BA%86%EF%BC%8C%E5%A4%A7%E5%AE%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E9%9C%80%E8%A6%81%20%E9%80%89%E6%8B%A9%EF%BC%8C%E4%B8%8B%E4%B8%80%E6%AD%A5%206%E3%80%81%E4%B8%8B%E4%B8%80%E6%AD%A5%207%E3%80%81%E7%A1%AE%E5%AE%9A%E5%AE%89%E8%A3%85" title="IAR for ARM下载、安装、注册，并搭建stm32工程（胎教版）">IAR for ARM下载、安装、注册，并搭建stm32工程（胎教版）</a></p><p id="articleContentId"><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="IAR的工程路径和头文件路径的配置问题" href="https://blog.csdn.net/qq_38351824/article/details/81591904" title="IAR的工程路径和头文件路径的配置问题">IAR的工程路径和头文件路径的配置问题</a></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!" href="https://www.armbbs.cn/forum.php?mod=viewthread&amp;tid=113113" title="H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!">H7-TOOL的高速DAPLINKY用于IAR9.30的设置说明(2022-06-18) - H7-TOOL开发工具 - 硬汉嵌入式论坛 - Powered by Discuz!</a></p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏 EWARM学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IAR GD32 学习记录 嵌入式 单片机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【GD32】基于GD32+OV5640的摄像头模块学习记录</title>
    <link href="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>前言</h1><p>目前，该文章仅仅是记录学习过程，代码方面还有些许问题，未调通，这里的代码仅供参考。</p><h1>一、OV5640摄像头模块介绍</h1><h2>1.摄像头简介</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在信息载体中，图像包含的信息最为丰富。作为机器视觉领域的核心组件，摄像头的应用场景十分广泛，涵盖安防监控、野外探险、车牌识别检测等多个领域。</p><p>从不同维度对摄像头进行分类，具体如下：</p><ol><li><strong>按输出信号类型</strong>：可分为数字摄像头和模拟摄像头。<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;数字摄像头输出的是数字信号，能直接与数字设备（如计算机、单片机等）进行数据传输和处理。&lt;/li&gt;&lt;li&gt;模拟摄像头输出的是模拟信号，通常需要经过模数转换后才能被数字设备处理。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;按图像传感器材料构成&lt;/strong&gt;：可分为 CCD（电荷耦合器件）摄像头和 CMOS（互补金属氧化物半导体）摄像头。&lt;ul&gt;&lt;li&gt;CCD 传感器在成像质量、灵敏度等方面有一定优势，但成本较高、功耗较大。&lt;/li&gt;&lt;li&gt;CMOS 传感器具有成本低、功耗小、集成度高等特点，随着技术的不断发展，其成像质量已得到显著提升。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;值得注意的是，当前智能手机所配备的摄像头，绝大部分都属于 CMOS 类型的数字摄像头，这得益于 CMOS 传感器在功耗、成本和集成度上的优势，能够很好地满足智能手机对小型化、低功耗和高性价比的需求。</p><h3>1.1 数字摄像头与模拟摄像头在输出信号类型和接口类型上存在显著区别，具体如下：</h3><h4>1. 1.1 输出信号类型</h4><ul><li><strong>数字摄像头</strong>：直接输出数字信号，信号以二进制数据（0 和 1）的形式存在，可直接被计算机、单片机、数字显示屏等数字设备识别和处理，无需额外的模数转换步骤。</li><li><strong>模拟摄像头</strong>：输出标准的模拟信号（如复合视频信号、分量视频信号等），信号形式为连续变化的电压或电流，需要通过模数转换器（ADC）转换为数字信号后，才能被数字设备处理。</li></ul><h4>1.1.2 接口类型</h4><ul><li><p><strong>数字摄像头</strong>：常见接口包括：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;USB 接口&lt;/strong&gt;：如电脑端的免驱摄像头，通过 USB 总线传输数字数据，即插即用性强。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;IEEE 1394（火线）接口&lt;/strong&gt;：由苹果公司主导开发，数据传输率可达 800Mbps，适用于需要高速传输的场景（如专业视频采集）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;千兆网接口&lt;/strong&gt;：常见于网络摄像头，通过以太网传输数字信号，支持远程数据传输和监控。&lt;/li&gt;&lt;li&gt;此外，还有 MIPI、DVP 等适用于嵌入式设备（如开发板、智能手机）的数字接口。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;模拟摄像头&lt;/strong&gt;：常用接口为：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;AV 视频端子&lt;/strong&gt;：由信号线和地线组成，输出复合模拟视频信号，常见于早期监控设备、老式录像机等。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;S-VIDEO（超级视频）接口&lt;/strong&gt;：为五芯接口，包含两路视频亮度信号、两路视频色度信号和一路公共屏蔽地线，相比 AV 接口能减少信号干扰，画质稍优。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4>1.1.3 补充说明</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;除了信号和接口的差异，两者的应用场景也因特性不同而有所区分：数字摄像头因信号稳定、抗干扰能力强、易与数字系统集成，广泛用于计算机外设、网络监控、智能手机等；模拟摄像头则因技术成熟、成本较低，曾在传统监控、电视直播等领域普及，但目前已逐渐被数字摄像头替代。</p><h3>1.2CCD（电荷耦合器件）与 CMOS（互补金属氧化物半导体）作为摄像头核心的图像传感器，二者的区别主要体现在以下几个方面：​</h3><h4>1.2.1 名称与成像材料基础​</h4><p>两者的名称直接源于其核心技术原理和材料构成：​</p><ul><li>CCD：全称为 &ldquo;电荷耦合器件&rdquo;，其工作机制基于电荷的耦合与传输，核心结构由 MOS 电容构成，通过特定的时序脉冲信号控制电荷移动来完成成像。​</li></ul><ul><li>CMOS：全称为 &ldquo;互补金属氧化物半导体&rdquo;，依托半导体材料的互补特性实现光电转换与信号处理，集成度更高，能将感光元件与信号处理电路整合在同一芯片上。​</li></ul><h4>1.2.2 功耗表现​</h4><p>在功耗方面，两者存在显著差异：​</p><ul><li>CCD：由于其像素结构依赖 MOS 电容，读取电荷信号时需要电压较高（至少 12V）的二相、三相或四相时序脉冲信号，因此整个取像系统不仅需要多个电源支持，外设电路的功耗也较大，通常功耗在 2~5W。​</li></ul><ul><li>CMOS：光电传感器仅需单电源（5V 或 3V）供电，且电路设计更精简，功耗远低于 CCD，仅为 CCD 的 1/8~1/10，部分 CMOS 取像系统的功耗可低至 20~50mW，在便携式设备（如智能手机、小型监控设备）中优势尤为明显。​</li></ul><h4>1.2.3 成像质量​</h4><p>成像质量是两者早期差异的核心体现，不过随着技术发展，这一差距已大幅缩小：​</p><ul><li>CCD：起步早、技术成熟，通过 PN 结或二氧化硅（SiO₂）隔离层有效降低噪声干扰，因此在噪声控制、灵敏度和图像一致性上表现更优，早期在专业摄影、高精度成像领域（如单反相机、工业检测设备）占据主导。​</li></ul><ul><li>CMOS：早期因噪声较高、灵敏度较低，成像质量略逊于 CCD。但近年来，随着消噪技术、像素优化技术的快速发展，其噪声水平大幅降低，成像质量显著提升。目前，CMOS 凭借成本低、集成度高、功耗低等综合优势，已占据市场主流，不仅智能手机、消费级相机广泛采用，主流单反相机也普遍使用 CMOS 传感器。</li></ul><h2>2.OV5640摄像头模块简介</h2><p></p><p>参考链接：<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="野火OV5640摄像头模块" href="https://doc.embedfire.com/mcu/gd32/h7/general/zh/latest/doc/ov5640/ov5640.html#id1" title="野火OV5640摄像头模块">野火OV5640摄像头模块</a></p><p>注：如有侵权，请联系删除。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;镜头部件包含一个镜头座和一个可旋转调节距离的凸透镜，通过旋转可以调节焦距，正常使用时，镜头座覆盖在电路板上遮光，光线只能经过镜头传输到正中央的图像传感器，它采集光线信号，然后把采集得的数据通过下方的信号引脚输出数据到外部器件。</p><h3>2.1 OV5640传感器简介</h3><p>OV5640 是一款 CMOS 类型的数字图像传感器，作为摄像头的核心部件，具备丰富的功能和特性，具体如下：</p><ul><li><p><strong>分辨率与像素</strong>：支持输出最大 500 万像素的图像，对应分辨率为 2592x1944，同时兼容 VGA 时序输出图像数据。</p></li><li><p><strong>数据格式</strong>：输出图像的数据格式多样，包括 YUV（422/420）、YCbCr422、RGB565 以及 JPEG 格式。其中，直接输出 JPEG 格式图像可大幅减少数据量，有利于网络传输等场景。</p></li><li><p><strong>图像处理能力</strong>：具备基础的图像补偿与处理功能，支持对伽玛曲线、白平衡、饱和度、色度等参数进行调节，提升图像质量。</p></li><li><p><strong>帧率与功耗</strong>：根据分辨率配置不同，输出图像的帧率可在 15-60 帧之间调节；工作时的功率范围为 150mW-200mW，功耗较低，适用于对能耗有要求的设备场景。</p></li></ul><h3>2.2 OV5640引脚及功能框图</h3><p>OV5640模组带有自动对焦功能，引脚的定义见下图：</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/15f83e5a5d9a4882ae24b7cbc8bd7cfa.png"></p><p>硬件原理图：</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/d4a80bf096664495ac6c00a6eeea8ce1.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/5fe49d91805c44848cf78d630662b743.png"></p><p>OV5640管脚：</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/68b9a2e48060400488bc79143e8b84e0.png"></p><p>功能框图：</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/a8eceffe090446a1a383c9924512eb2b.png"></p><p>(1) 控制寄存器</p><p>标号1处的是 OV5640 的控制寄存器，它根据这些寄存器配置的参数来运行，而这些参数是由外部控制器通过 SIO_C 和 SIO_D 引脚写入的， SIO_C 与 SIO_D 使用的通讯协议跟 I2C 十分类似，在 STM32 中我们完全可以直接用 I2C 硬件外设来控制。</p><p>(2) 通信、控制信号及时钟</p><p>标号2处包含了 OV5640 的通信、控制信号及外部时钟，其中 PCLK、 HREF 及VSYNC 分别是像素同步时钟、行同步信号以及帧同步信号，这与液晶屏控制中的信号是很类似的。 RESETB 引脚为低电平时，用于复位整个传感器芯片， PWDN 用于控制芯片进入低功耗模式。注意最后的一个 XCLK 引脚，它跟 PCLK是完全不同的， XCLK 是用于驱动整个传感器芯片的时钟信号，是外部输入到OV5640 的信号；而 PCLK 是 OV5640 输出数据时的同步信号，它是由 OV5640 输出的信号。 XCLK 可以外接晶振或由外部控制器提供，若要类比 XCLK 之于OV5640 就相当于 HSE 时钟输入引脚与 STM32 芯片的关系， PCLK 引脚可类比STM32 的 I2C 外设的 SCL 引脚。</p><p>(3) 感光矩阵</p><p>标号3处的是感光矩阵，光信号在这里转化成电信号，经过各种处理，这些信号存储成由一个个像素点表示的数字图像。</p><p>(4) 数据输出信号</p><p>标号4处包含了 DSP 处理单元，它会根据控制寄存器的配置做一些基本的图像处理运算。这部分还包含了图像格式转换单元及压缩单元，转换出的数据最终通过Y0-Y9 引脚输出，一般来说我们使用 8 根据数据线来传输，这时仅使用 Y2-Y9 引脚， OV5640 与外部器件的连接方式见图 0-4。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/1c2641a3b8204317b626f6767ded4012.png"></p><p>(5) 数据输出信号</p><p>标号5处为 VCM 处理单元，他会通过图像分析来实现图像的自动对焦功能。要实现自动对焦还需要下载自动对焦固件到模组。</p><h3>2.3 SCCB时序（用于控制OV5640传感器）</h3><p>OV5640 的寄存器配置参数通过<strong>SCCB 总线</strong>传输，该总线与 I2C 协议极为相似，因此在 STM32/GD32 驱动中，可直接使用片上 I2C 外设与 OV5640 进行通讯。</p><p>SCCB 与标准 I2C 协议的核心区别在于：<strong>SCCB 每次传输仅能写入或读取一个字节的数据</strong>，而标准 I2C 协议支持 &ldquo;突发读写&rdquo;&mdash;&mdash; 即一次传输过程中可连续写入或读取多个字节（例如：EEPROM 的页写入时序就属于突发写操作）。</p><p>关于 SCCB 协议的完整细节，可参考野火配套资料中的《SCCB 协议》文档。</p><h4>2.3.1 SCCB的起始、停止信号及数据有效性</h4><p>SCCB的起始信号、停止信号及数据有效性与I2C完全一样。</p><ul><li><p>起始信号：在SIO_C为高电平时，SIO_D出现一个下降沿，则SCCB开始传输。</p></li><li><p>停止信号：在SIO_C为高电平时，SIO_D出现一个上升沿，则SCCB停止传输。</p></li><li><p>数据有效性：除了开始和停止状态，在数据传输过程中，当SIO_C为高电平时， 必须保证SIO_D上的数据稳定，也就是说，SIO_D上的电平变换只能发生在SIO_C为低电平的时候，SIO_D的信号在SIO_C为高电平时被采集。</p></li></ul><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/5e6b090552c74601b1b293460f9fd114.png"></p><h4>2.3.2&nbsp;SCCB 数据读写过程</h4><p>在 SCCB 协议中定义的读写操作与 I2C 也是一样的，只是换了一种说法。它定义了两种写操作，即三步写操作和两步写操作。三步写操作可向从设备的一个目的寄存器中写入数据，见图 0-7。</p><p>在三步写操作中，第一阶段发送从设备的 ID 地址+W 标志(等于 I2C 的设备地址： 7 位设备地址+读写方向标志)，第二阶段发送从设备目标寄存器的 16 位地址，第三阶段发送要写入寄存器的 8 位数据。图中的&ldquo;X&rdquo;数据位可写入 1 或 0，对通讯无影响。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/bd1609e3bcf2408ca71f2944b009f0ea.png"></p><p>两步读操作，它用于读取从设备目的寄存器中的数据，见图 0-9。在第一阶段中发送从设备的设备 ID+R 标志(设备地址+读方向标志)和自由位，在第二阶段中读取寄存器中的8 位数据和写 NA 位(非应答信号)。 由于两步读操作没有确定目的寄存器的地址，所以在读操作前，必需有一个两步写操作，以提供读操作中的寄存器地址。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/b8014a7f987d4bb0a4170416473f0a01.png"></p><p>可以看到，以上介绍的 SCCB 特性都与 I2C 无区别，而 I2C 比 SCCB 还多出了突发读写的功能，所以 SCCB 可以看作是 I2C 的子集，我们完全可以使用 STM32 的 I2C 外设来与OV5640 进行 SCCB 通讯。</p><h4>2.3.3&nbsp;OV5640 的寄存器</h4><p>控制 OV5640 涉及到它很多的寄存器，可直接查询《ov5640datasheet》了解，通过这些寄存器的配置，可以控制它输出图像的分辨率大小、图像格式及图像方向等。要注意的是 OV5640 寄存器地址为 16 位。</p><p>官方还提供了一个《OV5640_自动对焦照相模组应用指南(DVP_接口)__R2.13C.pdf》的文档，它针对不同的配置需求，提供了配置范例，见图 0-10。其中 write_SCCB 是一个利用 SCCB 向寄存器写入数据的函数，第一个参数为要写入的寄存器的地址，第二个参数为要写入的内容。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/99148b76d9de41ac94f6ea8e60a04e8e.png"></p><h4>&nbsp;补充说明（ATK-OV2640）：</h4><p>ATK-OV2640 摄像头模块的所有配置，都是通过 SCCB 总线来实现的， SCCB 全称是：<br />Seril Camera Control Bus 即串行摄像头控制总线， 它由两条数据线组成：一个是用于传输时钟信号的 SIO_C（即 OV_SCL），另一个是用于传输数据信号的 SIO_D（即 OV_SDA）。</p><p>SCCB 的传输协议与 IIC 协议极其相似，只不过 IIC 在每传输完一个字节后，接收数<br />据的一方要发送一位的确认数据，而 SCCB 一次要传输 9 位数据，前 8 位为有用数据，而第9 位数据在写周期中是 don&rsquo;t care 位（即不必关心位），在读周期中是 NA 位。 SCCB 定义数据传输的基本单元为相（phase），即一个相传输一个字节数据。</p><p>SCCB 只包括三种传输周期，即 3 相写传输周期（三个相依次为设备从地址，内存地址，<br />所写数据）， 2 相写传输周期（两个相依次为设备从地址，内存地址）和 2 相读传输周期（两个相依次为设备从地址，所读数据）。当需要写操作时，应用 3 相写传输周期，当需要读操作时，依次应用 2 相写传输周期和 2 相读传输周期。</p><p>其中SCCB_E没有引出，这个信号为1的时候，说明设备时空闲的。<br />SIO_C相当于IIC中的SCL<br />SIO_D相当于IIC中的SDA</p><h4>2.3.4&nbsp;像素数据输出时序</h4><p>对 OV5640 采用 SCCB 协议进行控制，而它输出图像时则使用 VGA 时序(还可用SVGA、UXGA，这些时序都差不多)，这跟控制液晶屏输入图像时很类似。 OV5640 输出图像时，一帧帧地输出，在帧内的数据一般从左到右，从上到下，一个像素一个像素地输出(也可通过寄存器修改方向)，见图 0-11。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/de98ddebef0e47359d69559462f6ff77.png"></p><p>例如， 图 0-12，若我们使用 Y2-Y9 数据线，图像格式设置为 RGB565，进行数据输出时， Y2-Y9 数据线会在 1 个像素同步时钟 PCLK 的驱动下发送 1 字节的数据信号，所以 2个 PCLK 时钟可发送 1 个 RGB565 格式的像素数据。像素数据依次传输，每传输完一行数据时，行同步信号 HREF 会输出一个电平跳变信号，每传输完一帧图像时， VSYNC 会输出一个电平跳变信号。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/07ae7e375e4147a09216a31a7434a7d2.png"></p><h1>二、GD32的DCI介绍</h1><h2><a id="1_79"></a>1.GD32 的 DCI 接口简介</h2><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/20f18637517c4fbc92786e2ed9114c05.png"></p><p>DCI（Digital Camera Interface）即数字摄像头接口，是 GD32 系列微控制器中用于连接摄像头的专用接口，其功能与 STM32 中的 DCMI（Digital Camera Interface）类似。</p><p>作为一种同步并行接口，DCI 的核心作用是从数字摄像头中捕获视频流或静态图像数据。它具备灵活的兼容性，不仅支持 YUV、RGB 等多种常用颜色空间的图像数据传输，还可直接处理经过压缩的 JPEG 格式图像，满足不同场景下的图像采集需求。</p><p>这一接口为 GD32 与数字摄像头的连接提供了高效、便捷的解决方案，适用于需要实时图像采集的嵌入式应用，如监控设备、机器视觉模块等。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/23d35233575e4486a21bce6c1276ab92.png"></p><h3>1.1 GD32的外设框图&mdash;&mdash;DCI</h3><p>DCI外设挂载在AHB2</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/0c2b14184d5c44e0968f1b1e626cf6db.jpeg"></p><h3>1.2 DCI的GPIO相关引脚</h3><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/4638ea4f7a0449de81271d0d280efe88.png"></p><h3><img alt="" height="40" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/96acaafb5b054ad7bfeefbf15dce42c2.png" width="1119" /></h3><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/867691638cef4a3d9dc002317d4afb91.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/35952168835444a9a4271d754aa6b644.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/4ed801c6287c4cf4937075a89b22e4b9.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/c5c1529af412448d97982424dbdc2d8d.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/08656b19f56140f9b87d93cc8da9626c.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/5bc400596e264d3d8fe43ad40b9bbdf9.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/aa1e530e9b1d4b8c9fee78790d3b561a.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/f8954bdaa73f4f83bbad7954806e8998.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/1e1f076444f24ee0b778c90022719b49.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/278851f88bae41cb8c5a38d4d6852d55.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/60f4f9a5b88a4e29b2dbfac0e45999c4.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/62c8b864b6d4431d9a840a7f5c2da307.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/94daac9b00004ceea1394fcf61082769.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/1513b8619b504d37b063ba93df0336ee.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/68088347e61d4dfdaf133d7bd8a2bd69.png"></p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/7472ca400836448e984976977bceba2e.png"></p><p>根据手册，DCI的引脚复用功能都是GPIO的AF13复用功能，由于OV5640摄像头的数据只有8位，因此，我们只需要用D0-D7引脚、PIXCLK引脚、VSYNC引脚、HSYNC引脚即可，同时我们选用PA12引脚来连接RST，PA2引脚来控制PWDN，所以摄像头和GD32的连线如下表</p><table><thead><tr><th style="text-align:center">摄像头引脚</th><th style="text-align:center">开发板引脚</th></tr></thead><tbody><tr><td style="text-align:center">PCLK（PIXCLK）</td><td style="text-align:center">PA6</td></tr><tr><td style="text-align:center">VS（VSYNC）</td><td style="text-align:center">PG9</td></tr><tr><td style="text-align:center">HS（HSYNC）（HREF）</td><td style="text-align:center">PA4</td></tr><tr><td style="text-align:center">D0</td><td style="text-align:center">PC6</td></tr><tr><td style="text-align:center">D1</td><td style="text-align:center">PC7</td></tr><tr><td style="text-align:center">D2</td><td style="text-align:center">PC8</td></tr><tr><td style="text-align:center">D3</td><td style="text-align:center">PC9</td></tr><tr><td style="text-align:center">D4</td><td style="text-align:center">PE4</td></tr><tr><td style="text-align:center">D5</td><td style="text-align:center">PD3</td></tr><tr><td style="text-align:center">D6</td><td style="text-align:center">PB8</td></tr><tr><td style="text-align:center">D7</td><td style="text-align:center">PB9</td></tr><tr><td style="text-align:center">RST</td><td style="text-align:center">PA12</td></tr><tr><td style="text-align:center">PDN（PWDN）</td><td style="text-align:center">PA2</td></tr><tr><td style="text-align:center">SCL</td><td style="text-align:center">PB6</td></tr><tr><td style="text-align:center">SDA</td><td style="text-align:center">PB7</td></tr><tr><td style="text-align:center">NC</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">NC</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">XCLK（XCLK_IN）</td><td style="text-align:center">接入外部晶振</td></tr><tr><td style="text-align:center">5V</td><td style="text-align:center">5V</td></tr><tr><td style="text-align:center">GND</td><td style="text-align:center">GND</td></tr></tbody></table><h3><strong>1.3 特性参数表</strong></h3><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/e822d3fcf3164f73b0f120675e8771ac.png"></p><p><strong>表格参数详解（按行）</strong></p><table><thead><tr><th>符号（Symbol）</th><th>参数（Parameter）</th><th>最小（Min）</th><th>最大（Max）</th><th>单位（Unit）</th><th>解读</th></tr></thead><tbody><tr><td>Frequency ratio</td><td>DCI_PIXCLK /fHCLK</td><td>&mdash;</td><td>0.4</td><td></td><td>像素时钟（DCI_PIXCLK）与系统时钟（fHCLK）的比值最大为 0.4，限制时钟分频 / 倍频关系</td></tr><tr><td>DCI_PIXCLK</td><td>Pixel clock input</td><td>&mdash;</td><td>80</td><td>MHz</td><td>输入像素时钟的最大频率为 80MHz，决定图像数据传输的 &ldquo;节奏快慢&rdquo;</td></tr><tr><td>DPixel</td><td>Pixel clock input duty cycle</td><td>30</td><td>70</td><td>%</td><td>像素时钟的占空比需在 30%~70% 之间（高电平时间占一个时钟周期的比例），保证时序兼容</td></tr><tr><td>tsu(DATA)</td><td>Data input setup time</td><td>2.5</td><td>&mdash;</td><td>ns</td><td>数据输入 &ldquo;建立时间&rdquo;：时钟沿到来前，数据需保持稳定的最小时间&ge;2.5ns，否则可能采样错误</td></tr><tr><td>th(DATA)</td><td>Data output valid time</td><td>1</td><td>&mdash;</td><td>ns</td><td>数据输出 &ldquo;保持时间&rdquo;：时钟沿过后，数据需继续稳定的最小时间&ge;1ns</td></tr><tr><td>tsu(HSYNC)</td><td>DCI_HS input setup time</td><td>2</td><td>&mdash;</td><td>ns</td><td>行同步（HSYNC）信号的建立时间&ge;2ns，确保行同步信号能被正确识别</td></tr><tr><td>tsu(VSYNC)</td><td>DCI_VS input setup time</td><td>2</td><td>&mdash;</td><td>ns</td><td>场同步（VSYNC）信号的建立时间&ge;2ns，确保场同步信号能被正确识别</td></tr><tr><td>th(HSYNC)</td><td>DCI_HS input hold time</td><td>0.5</td><td>&mdash;</td><td>ns</td><td>行同步（HSYNC）信号的保持时间&ge;0.5ns，避免信号提前变化导致同步失败</td></tr><tr><td>th(VSYNC)</td><td>DCI_VS input hold time</td><td>0.5</td><td>&mdash;</td><td>ns</td><td>场同步（VSYNC）信号的保持时间&ge;0.5ns，同理保证场同步信号稳定识别</td></tr></tbody></table><p><strong>核心作用</strong></p><p>这些参数定义了 DCI 接口与摄像头通信时的<strong>时序边界</strong>，硬件设计和驱动开发时，必须让摄像头输出的时钟、同步信号、数据信号满足这些 &ldquo;最小 / 最大时间、频率限制&rdquo;，否则会出现图像花屏、丢帧、无法识别等问题。简单说：<strong>照着这些参数设计电路、写驱动，才能让 DCI 接口正常 &ldquo;读懂&rdquo; 摄像头传过来的图像数据</strong>&nbsp;。</p><h3>1.4 DMA&mdash;&mdash;DCI</h3><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/fdc59ab9084448a09767e2711758cb6f.png"></p><p><strong>直接内存访问（DMA）</strong></p><ul><li><strong>16 通道 DMA 控制器且各通道可配置</strong>：拥有一个 16 通道的 DMA 控制器，其中 DMA0 有 8 个通道，DMA1 有 8 个通道 。每个通道都可以根据实际需求进行单独配置，以适应不同外设和数据传输场景。例如，在不同的应用中，可以灵活设置某个通道的数据传输优先级、传输模式等参数。</li><li><strong>支持独立的 8 位、16 位、32 位内存和外设传输</strong>：能够在内存和外设之间进行数据传输时，支持 8 位、16 位、32 位这几种不同的数据宽度。这使得 DMA 可以适配各种不同数据处理要求的设备，比如一些简单的传感器可能输出 8 位数据，而复杂的图像传感器可能输出 32 位数据，DMA 都能有效地进行传输处理 。</li><li><strong>支持的外设</strong>：涵盖了定时器（Timers）、模数转换器（ADC）、串行外设接口（SPIs）、集成电路总线（I2Cs）、通用同步异步收发器（USARTs）、通用异步收发传输器（UARTs）、数模转换器（DAC）、音频总线（I2S）、安全数字输入输出接口（SDIO）以及数字摄像头接口（DCI） 。这意味着这些外设与内存之间的数据传输都可以借助 DMA 来完成，极大地提高了数据传输的效率和系统资源的利用率 。</li></ul><p>灵活通用的 DMA 控制器提供了一种在无需 CPU 干预的情况下，在外设和（或）内存之间传输数据的硬件方法，从而为其他系统功能释放带宽 。它支持三种访问方式：外设到内存、内存到外设、内存到内存 。</p><p>每个通道都连接到固定的硬件 DMA 请求。DMA 通道请求的优先级由软件配置和硬件通道号共同决定 。源端和目的端的传输大小是相互独立且可配置的，用户可以根据具体的数据传输需求，设置每次传输的数据量大小，增强了 DMA 在不同应用场景下的适用性 。</p><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/d4d80033d9634970992b9886f0ac3a17.png"></p><h3>1.5 DCI特点</h3><p><img src="/2025/07/26/%E3%80%90MCU%E3%80%91%E3%80%90GD32%E3%80%91%E5%9F%BA%E4%BA%8EGD32+OV5640%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/069863b5825548158d405dbceb9ec0f1.png"></p><p><strong>数字摄像头接口（DCI）</strong></p><ul><li><strong>数字视频 / 图像采集</strong>：可从摄像头捕获数字视频或图像 。</li><li><strong>支持 8/10/12/14 位数据宽度</strong>：能适配不同数据位宽需求的摄像头，灵活传输图像数据 。</li><li><strong>搭配 DMA 接口实现高传输效率</strong>：借助直接内存访问（DMA），无需 CPU 过多参与，数据可快速在接口与内存间传输，提升整体采集效率 。</li><li><strong>支持视频 / 图像裁剪</strong>：可按需求对采集的视频或图像进行裁剪，获取特定区域内容 。</li><li><strong>支持多种像素格式</strong>：涵盖 JPEG、YCrCb、RGB 等，适配不同摄像头输出及应用场景对图像格式的要求 。</li><li><strong>支持硬件 / 嵌入式同步信号</strong>：依靠硬件或嵌入式同步机制，保障图像采集时序稳定、数据准确 。</li></ul><p>DCI 是一种 8 位至 14 位的并行接口，能够通过数字摄像头接口从摄像头捕获视频或图像。它可通过 DMA 操作，支持 8/10/12/14 位的数据宽度 ，为数字图像采集提供了灵活、高效的解决方案 ，常应用于嵌入式视觉系统、智能摄像头等场景 ，帮助设备快速、稳定获取图像信息 。</p><h1>三、GD32的DCI外设代码（仅供参考！）</h1><p>bsp_sccb.h</p><pre><code class="language-cpp">#ifndef __BSP_SCCB_H#define __BSP_SCCB_H#include "gd32f4xx.h"                   // Device header#include "bsp_rtos_delay.h"#define delay_us(x) delay_us(x)#define OV5640_DEVICE_IIC_ADDR0x78#define SCCB_SCL_GPIO_RCURCU_GPIOB#define SCCB_SCL_GPIO_PORTGPIOB#define SCCB_SCL_GPIO_PINGPIO_PIN_6#define SCCB_SDA_GPIO_RCURCU_GPIOB#define SCCB_SDA_GPIO_PORTGPIOB#define SCCB_SDA_GPIO_PINGPIO_PIN_7//SDA输出模式#define SCCB_SDA_MODE_OUT()   gpio_mode_set(SCCB_SDA_GPIO_PORT, GPIO_MODE_OUTPUT, GPIO_PUPD_PULLUP, SCCB_SDA_GPIO_PIN)#define SCCB_SDA_MODE_IN()    gpio_mode_set(SCCB_SDA_GPIO_PORT, GPIO_MODE_INPUT, GPIO_PUPD_PULLUP, SCCB_SDA_GPIO_PIN)//获取SDA引脚变化#define SDA_GET()gpio_input_bit_get(SCCB_SDA_GPIO_PORT,SCCB_SDA_GPIO_PIN)//SDA输出#define SDA(x)gpio_bit_write(SCCB_SDA_GPIO_PORT,SCCB_SDA_GPIO_PIN, (x?SET:RESET))//SCL输出#define SCL(x)gpio_bit_write(SCCB_SCL_GPIO_PORT,SCCB_SCL_GPIO_PIN, (x?SET:RESET))void SCCB_IIC_Init(void);void IIC_gpio_config(void);void IIC_Start(void);void IIC_Stop(void);void IIC_Send_Ack(void);void IIC_Send_No_Ack(void);unsigned char IIC_WaitAck(void);uint8_t IIC_Send_Byte(uint8_t dat);unsigned char IIC_Read_Byte(void);uint8_t IIC_WR_Reg_8bit(uint8_t reg,uint8_t data);uint8_t IIC_WR_Reg_16bit(uint16_t reg, uint8_t data);uint8_t IIC_RD_Reg_8bit(uint8_t reg);uint8_t IIC_RD_Reg_16bit(uint16_t reg);#endif</code></pre><p>bsp_sccb.c</p><pre><code class="language-cpp">#include "bsp_sccb.h"void IIC_gpio_config(void){rcu_periph_clock_enable(SCCB_SCL_GPIO_RCU);rcu_periph_clock_enable(SCCB_SDA_GPIO_RCU);// 初始化SCLgpio_mode_set(SCCB_SCL_GPIO_PORT, GPIO_MODE_OUTPUT, GPIO_PUPD_PULLUP, SCCB_SCL_GPIO_PIN);gpio_output_options_set(SCCB_SCL_GPIO_PORT, GPIO_OTYPE_PP, GPIO_OSPEED_50MHZ, SCCB_SCL_GPIO_PIN);// 初始化SDAgpio_mode_set(SCCB_SDA_GPIO_PORT, GPIO_MODE_OUTPUT, GPIO_PUPD_PULLUP, SCCB_SDA_GPIO_PIN);gpio_output_options_set(SCCB_SDA_GPIO_PORT, GPIO_OTYPE_PP, GPIO_OSPEED_50MHZ, SCCB_SDA_GPIO_PIN);SCCB_SDA_MODE_OUT(); // 设置SDA为输出模式}void SCCB_IIC_Init(void){IIC_gpio_config();// SCL输出高电平gpio_bit_write(SCCB_SCL_GPIO_PORT, SCCB_SCL_GPIO_PIN, SET);// SDA输出高电平gpio_bit_write(SCCB_SDA_GPIO_PORT, SCCB_SDA_GPIO_PIN, SET);}// 起始信号：在SIO_C为高电平时，SIO_D出现一个下降沿，则SCCB开始传输。void IIC_Start(void){SCCB_SDA_MODE_OUT();        SDA(1);  // 释放SDA    SCL(1);  // 拉高SCL    delay_us(100);  // 延长稳定时间    SDA(0);  // SCL高时，SDA下降沿（起始信号）    delay_us(100);    SCL(0);  // 拉低SCL，准备数据传输          }// 停止信号：在SIO_C为高电平时，SIO_D出现一个上升沿，则SCCB停止传输。void IIC_Stop(void){SCCB_SDA_MODE_OUT();        SDA(0);  // 拉低SDA    SCL(1);  // 拉高SCL    delay_us(100);  // 稳定时间    SDA(1);  // SCL高时，SDA上升沿（停止信号）    delay_us(100);    SCL(0);  // 拉低SCL，释放总线}// 主机发送应答信号（告知从机：数据已正确接收）void IIC_Send_Ack(void){    SCCB_SDA_MODE_OUT();    SCL(0);    SDA(0);  // 拉低SDA表示应答    delay_us(50);    SCL(1);  // SCL高电平期间保持SDA低    delay_us(100);  // 确保从机检测到    SCL(0);  // 拉低SCL    SDA(1);  // 释放SDA}//主机发送非应答信号void IIC_Send_No_Ack(void){    SCCB_SDA_MODE_OUT();    SCL(0);    SDA(1);  // 拉高SDA表示非应答    delay_us(50);    SCL(1);  // SCL高电平期间保持SDA高    delay_us(100);    SCL(0);  // 拉低SCL}//主机等待从机应答unsigned char IIC_WaitAck(void){unsigned char ack_flag = 200;  // 延长超时计数    SCCB_SDA_MODE_IN();  // 切换为输入模式（释放SDA，由上拉电阻拉高）        SCL(0);    delay_us(50);    SCL(1);  // 拉高SCL，等待从机应答    delay_us(50);        while (SDA_GET() == 1 &amp;&amp; ack_flag--) {        delay_us(1);  // 超时等待    }        if (ack_flag == 0) {        // 超时，发送停止信号释放总线        IIC_Stop();        return 1;  // 无应答    } else {        // 收到应答，拉低SCL准备后续操作        SCL(0);        SCCB_SDA_MODE_OUT();  // 切换回输出模式        return 0;  // 有应答    }}//写入一个字节uint8_t IIC_Send_Byte(uint8_t dat){uint8_t i = 0, res = 0;    SCCB_SDA_MODE_OUT();    SCL(0);  // 拉低时钟准备传输        for (i = 0; i &lt; 8; i++) {        SDA((dat &amp; 0x80) &gt;&gt; 7);  // 发送高位        dat &lt;&lt;= 1;        delay_us(50);        SCL(1);  // 拉高时钟，从机采样        delay_us(100);  // 延长采样时间        SCL(0);  // 拉低时钟，准备下一位    }        SCCB_SDA_MODE_IN();  // 切换为输入，等待应答    delay_us(50);    SCL(1);  // 拉高时钟，读取应答    delay_us(100);    res = SDA_GET();  // 1：无应答，0：有应答    SCL(0);  // 拉低时钟    SCCB_SDA_MODE_OUT();  // 切换回输出    return res;}//接收一个字节unsigned char IIC_Read_Byte(void){    unsigned char i, receive = 0;    SCCB_SDA_MODE_IN();  // 输入模式，释放SDA        for (i = 0; i &lt; 8; i++) {        SCL(0);  // 拉低时钟，从机准备数据        delay_us(100);        SCL(1);  // 拉高时钟，主机采样        delay_us(100);  // 延长采样时间        receive &lt;&lt;= 1;        if (SDA_GET()) receive |= 1;    }    SCL(0);  // 拉低时钟，结束读取    return receive;}//写寄存器(三步写操作)uint8_t IIC_WR_Reg_8bit(uint8_t reg,uint8_t data){uint8_t res=0;IIC_Start(); //启动IIC传输if( IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR) ) res=1;//写器件ID delay_us(100);  if( IIC_Send_Byte(reg) ) res=2;  //写寄存器地址 delay_us(100);  if( IIC_Send_Byte(data) )res=3; //写数据   IIC_Stop();    returnres;}// 写寄存器（支持16位地址，四步写操作）uint8_t IIC_WR_Reg_16bit(uint16_t reg, uint8_t data){    uint8_t res = 0;    uint8_t reg_high = (reg &gt;&gt; 8) &amp; 0xFF;    uint8_t reg_low = reg &amp; 0xFF;        IIC_Start();        // 发送器件地址（写模式）    if (IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR)) {        res = 1;        IIC_Stop();  // 失败立即停止        return res;    }    delay_us(100);        // 发送地址高8位    if (IIC_Send_Byte(reg_high)) {        res = 2;        IIC_Stop();        return res;    }    delay_us(100);        // 发送地址低8位    if (IIC_Send_Byte(reg_low)) {        res = 3;        IIC_Stop();        return res;    }    delay_us(100);        // 发送数据    if (IIC_Send_Byte(data)) {        res = 4;        IIC_Stop();        return res;    }        IIC_Stop();    return res;}//读寄存器(两步读操作)//I2C 应答机制的基本规则//数据流向与应答方向：//发送数据时：发送方（主机或从机）每发送 1 字节后，接收方必须返回ACK/NACK。//接收数据时：接收方每接收 1 字节后，必须向发送方返回ACK/NACK，告知是否继续接收。//应答信号的含义：//ACK（应答）：SDA 线被接收方拉低（SDA=0），表示 “我已成功接收，请继续发送”。//NACK（非应答）：SDA 线保持高（SDA=1），表示两种情况：//接收方无法继续接收（如缓冲区已满）。//接收方完成数据接收，主动结束通信（常见于最后一个字节的接收）。uint8_t IIC_RD_Reg_8bit(uint8_t reg){uint8_t val=0;IIC_Start(); //启动SCCB传输IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR);//写器件ID  delay_us(100);   IIC_Send_Byte(reg);//写寄存器地址  delay_us(100);  IIC_Stop();   delay_us(100);   //设置寄存器地址后，才是读IIC_Start();IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR | 0X01);//发送1读命令 0x78 实际上011 100才是地址，最后一位是读写位  delay_us(100);  val = IIC_Read_Byte(); //读取数据  IIC_Send_No_Ack(); // 主动结束通讯  IIC_Stop();  return val;}// 读取16位地址的寄存器（支持高8位非0的地址，如0x300A、0x300B）uint8_t IIC_RD_Reg_16bit(uint16_t reg){    uint8_t val = 0;    uint8_t reg_high = (reg &gt;&gt; 8) &amp; 0xFF;  // 提取寄存器地址高8位    uint8_t reg_low = reg &amp; 0xFF;          // 提取寄存器地址低8位    // 第一步：发送16位寄存器地址（高8位 + 低8位）    IIC_Start();                           // 启动IIC传输    IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR); // 发送写命令（器件地址+写位）    delay_us(100);    IIC_Send_Byte(reg_high);               // 发送地址高8位    delay_us(100);    IIC_Send_Byte(reg_low);                // 发送地址低8位    delay_us(100);    IIC_Stop();                            // 结束地址写入阶段    delay_us(100);    // 第二步：读取该地址的寄存器值    IIC_Start();                           // 重新启动IIC    // 发送读命令（器件地址+读位，通过|0x01设置读位）    IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR | 0x01);    delay_us(100);    val = IIC_Read_Byte();                 // 读取寄存器数据    IIC_Send_No_Ack();                     // 最后一个字节，发送非应答表示结束    IIC_Stop();                            // 停止传输    return val;}</code></pre><p>#include &quot;bsp_OV5640.h&quot;</p><pre><code class="language-cpp">#ifndef __BSP_OV5640_H#define __BSP_OV5640_H#include "gd32f4xx.h"#include "bsp_OV5640_Output.h"#define FRAME_RATE_30FPS0 //30帧#define FRAME_RATE_15FPS1 //15帧//DMA#define DCI_DMA_RCU RCU_DMA1#define DCI_DMA_PORT DMA1#define DCI_DMA_CH  DMA_CH7//控制引脚#define PWDN_GPIO_RCU RCU_GPIOA#define PWDN_GPIO_PORTGPIOA#define PWDN_GPIO_PINGPIO_PIN_12#define RST_GPIO_RCURCU_GPIOA#define RST_GPIO_PORTGPIOA#define RST_GPIO_PINGPIO_PIN_2#define OV5640_PWDN_OUT(x)     gpio_bit_write(PWDN_GPIO_PORT, PWDN_GPIO_PIN, x?SET:RESET)#define OV5640_RST_OUT(x)      gpio_bit_write(RST_GPIO_PORT,  RST_GPIO_PIN,  x?SET:RESET)//存储摄像头ID的结构体typedef struct{  uint8_t PIDH;  uint8_t PIDL;}OV5640_IDTypeDef;extern OV5640_IDTypeDef OV5640_Camera_ID;/*摄像头配置结构体*/typedef struct{uint8_t frame_rate;//输出帧率uint16_t cam_isp_sx; //摄像头ISP X起始位置uint16_t cam_isp_sy; //摄像头ISP Y起始位置uint16_t cam_isp_width; //摄像头ISP 宽uint16_t cam_isp_height; //摄像头ISP 高uint8_t scaling;//是否使用自动缩放，推荐使用，1:使用，0:不使用uint16_t cam_out_sx; //摄像头输出窗口X起始位置uint16_t cam_out_sy; //摄像头输出窗口Y起始位置uint16_t cam_out_width;//输出图像分辨率，宽uint16_t cam_out_height;//输出图像分辨率，高uint16_t lcd_sx;//图像显示在液晶屏的X起始位置uint16_t lcd_sy;//图像显示在液晶屏的Y起始位置uint8_t lcd_scan;//液晶屏的扫描模式（0-7）uint8_t light_mode;//光照模式，参数范围[0~4]int8_t saturation;//饱和度,参数范围[-3 ~ +3]   int8_t brightness;//光照度，参数范围[-4~+4]int8_t contrast;//对比度，参数范围[-3~+3]uint8_t effect;//特殊效果，参数范围[0~9]:int8_t exposure;//曝光补偿，参数范围[-3~+3]uint8_t auto_focus;//是否使用自动对焦功能 1:使用，0:不使用}OV5640_MODE_PARAM;extern OV5640_MODE_PARAM cam_mode;//extern uint32_t photo_buff[320*240/2];//extern uint16_t camera_framebuffer[240*320];// 定义缓冲区大小常量#define CAMERA_FRAMEBUFFER_WIDTH  240#define CAMERA_FRAMEBUFFER_HEIGHT 320#define CAMERA_FRAMEBUFFER_SIZE   (CAMERA_FRAMEBUFFER_WIDTH * CAMERA_FRAMEBUFFER_HEIGHT)#define PHOTO_BUFF_SIZE           (CAMERA_FRAMEBUFFER_SIZE / 2)// 声明指针extern uint32_t *photo_buff;extern uint16_t *camera_framebuffer;extern uint8_t dci_frame_it_done_flag;extern uint8_t dci_dma_it_done_flag;/* Image Sizes enumeration */typedef enum   {  BMP_320x240          =   0x00,  /* BMP Image 320x240 Size */  BMP_352x288          =   0x01,      /* BMP Image 352x288 Size */  BMP_640x480          =   0x02,  /* BMP Image 640x480 Size */  BMP_800x480          =   0x03,  /* BMP Image 800x480 Size */}ImageFormat_TypeDef;//DCI数据寄存器#define DCI_DR_ADDRESS       0x50050028//ID#define OV5640_SENSOR_PIDH       0x300A#define OV5640_SENSOR_PIDL       0x300Bvoid DCI_gpio_config(void);void DCI_config(void);void DCI_IRQHandler(void);void DCI_Start(void);void DCI_Stop(void);void CTRL_gpio_config(void);void DMA_config(void);void DMA1_Channel7_IRQHandler(void);void BSP_OV5640_Init(void);void OV5640_ReadID(OV5640_IDTypeDef *OV5640ID);void OV5640_Reset(void);void OV5640_RGB565Config(void);void OV5640_FrameRate_Set(uint8_t frame_rate);void OV5640_OutSize_Set(uint8_t scaling,uint16_t x_off,uint16_t y_off,uint16_t width,uint16_t height);void OV5640_BrightnessConfig(int8_t Brightness);void OV5640_Color_Saturation(int8_t sat);void OV5640_ContrastConfig(int8_t cnst);void OV5640_Exposure(int8_t ev);void OV5640_LightMode(uint8_t mode);void OV5640_SpecialEffects(uint8_t mode);void OV5640_USER_Config(void);uint8_t OV5640_WriteFW(uint8_t *pBuffer, uint16_t BufferSize);void photo_buff_to_framebuffer(void);#endif</code></pre><p>#include &quot;bsp_OV5640.c&quot;</p><pre><code class="language-cpp">#include "bsp_OV5640.h"#include "bsp_OV5640_AF.h"#include "bsp_rtos_delay.h"#include "bsp_sccb.h"#include "bsp_uart.h"#include "FreeRTOS.h"#include "task.h"#include "stdio.h"#include "string.h"#include "malloc.h"uint8_t dci_frame_it_done_flag = 0;uint8_t dci_dma_it_done_flag  = 0;OV5640_IDTypeDef OV5640_Camera_ID;ImageFormat_TypeDef ImageFormat;/*液晶屏的分辨率，用来计算地址偏移*/uint16_t lcd_width = 800, lcd_height = 480;/*摄像头采集图像的大小*///uint16_t img_width = 800, img_height = 480;// uint16_t img_width=640, img_height=480;uint16_t img_width=320, img_height=240;//uint32_t photo_buff[240*320/2];//uint16_t camera_framebuffer[240*320];// 定义指针uint32_t *photo_buff = NULL;uint16_t *camera_framebuffer = NULL;//摄像头初始化配置//注意：使用这种方式初始化结构体，要在c/c++选项中选择 C99 modeOV5640_MODE_PARAM cam_mode ={/*以下包含几组摄像头配置，可自行测试，保留一组，把其余配置注释掉即可*//************配置1***854*480******横屏显示*****************************///.frame_rate = FRAME_RATE_15FPS,//////ISP窗口//.cam_isp_sx = 0,//.cam_isp_sy = 0,////.cam_isp_width = 1920,//.cam_isp_height = 1080,//////输出窗口//.scaling = 1,      //使能自动缩放//.cam_out_sx = 16,//使能自动缩放后，一般配置成16即可//.cam_out_sy = 4,  //使能自动缩放后，一般配置成4即可//.cam_out_width = 800,//.cam_out_height = 480,//////LCD位置//.lcd_sx = 0,//.lcd_sy = 0,//.lcd_scan = 5, //LCD扫描模式，本横屏配置可用1、3、5、7模式//////以下可根据自己的需要调整，参数范围见结构体类型定义//.light_mode = 0x04,//自动光照模式//.saturation = 0,//.brightness = 0,//.contrast = 0,//.effect = 0x00,//正常模式//.exposure = 0,//.auto_focus = 1,/**********配置2*****240*320****竖屏显示****************************/.frame_rate = FRAME_RATE_30FPS,//ISP窗口.cam_isp_sx = 0,.cam_isp_sy = 0,.cam_isp_width = 1920,.cam_isp_height = 1080,//输出窗口.scaling = 1,      //使能自动缩放.cam_out_sx = 16,//使能自动缩放后，一般配置成16即可.cam_out_sy = 4,  //使能自动缩放后，一般配置成4即可.cam_out_width = 240,.cam_out_height = 320,//LCD位置.lcd_sx = 120,.lcd_sy = 267,.lcd_scan = 6, //LCD扫描模式，//以下可根据自己的需要调整，参数范围见结构体类型定义.light_mode = 0,//自动光照模式.saturation = 0,.brightness = 0,.contrast = 0,.effect = 0,//正常模式.exposure = 0,.auto_focus = 1,//自动对焦/*******配置3********640*480****小分辨率****************************///  .frame_rate = FRAME_RATE_30FPS,//////ISP窗口//.cam_isp_sx = 0,//.cam_isp_sy = 0,////.cam_isp_width = 1920,//.cam_isp_height = 1080,//////输出窗口//.scaling = 0,      //使能自动缩放//.cam_out_sx = 16,//使能自动缩放后，一般配置成16即可//.cam_out_sy = 4,  //使能自动缩放后，一般配置成4即可//.cam_out_width = 640,//.cam_out_height = 480,//////LCD位置//.lcd_sx = 100,//.lcd_sy = 0,//.lcd_scan = 5, //LCD扫描模式，//////以下可根据自己的需要调整，参数范围见结构体类型定义//.light_mode = 0,//自动光照模式//.saturation = 0,//.brightness = 0,//.contrast = 0,//.effect = 0,//正常模式//.exposure = 0,//.auto_focus = 1,//自动对焦};//输出格式数组定义unsigned short RGB565_Init[][2]={    //15fps VGA RGB565 output    // 24MHz input clock, 24MHz PCLK    0x3103, 0x11, // system clock from pad, bit[1]    0x3008, 0x82, // software reset, bit[7]    // delay 5ms    0x3008, 0x42, // software power down, bit[6]    0x3103, 0x03, // system clock from PLL, bit[1]    0x3017, 0xff, // FREX, Vsync, HREF, PCLK, D[9:6] output enable    0x3018, 0xff, // D[5:0], GPIO[1:0] output enable    0x3034, 0x1a, // MIPI 10-bit    0x3037, 0x13, // PLL root divider, bit[4], PLL pre-divider, bit[3:0]    0x3108, 0x01, // PCLK root divider, bit[5:4], SCLK2x root divider, bit[3:2]    // SCLK root divider, bit[1:0]    0x3630, 0x36,    0x3631, 0x0e,    0x3632, 0xe2,    0x3633, 0x12,    0x3621, 0xe0,    0x3704, 0xa0,    0x3703, 0x5a,    0x3715, 0x78,    0x3717, 0x01,    0x370b, 0x60,    0x3705, 0x1a,    0x3905, 0x02,    0x3906, 0x10,    0x3901, 0x0a,    0x3731, 0x12,    0x3600, 0x08, // VCM control    0x3601, 0x33, // VCM control    0x302d, 0x60, // system control    0x3620, 0x52,    0x371b, 0x20,    0x471c, 0x50,    0x3a13, 0x43, // pre-gain = 1.047x    0x3a18, 0x00, // gain ceiling    0x3a19, 0xf8, // gain ceiling = 15.5x    0x3635, 0x13,    0x3636, 0x03,    0x3634, 0x40,    0x3622, 0x01,    // 50/60Hz detection 50/60Hz 灯光条纹过滤    0x3c01, 0x34, // Band auto, bit[7]    0x3c04, 0x28, // threshold low sum    0x3c05, 0x98, // threshold high sum    0x3c06, 0x00, // light meter 1 threshold[15:8]    0x3c07, 0x08, // light meter 1 threshold[7:0]    0x3c08, 0x00, // light meter 2 threshold[15:8]    0x3c09, 0x1c, // light meter 2 threshold[7:0]    0x3c0a, 0x9c, // sample number[15:8]    0x3c0b, 0x40, // sample number[7:0]    0x3810, 0x00, // Timing Hoffset[11:8]    0x3811, 0x10, // Timing Hoffset[7:0]    0x3812, 0x00, // Timing Voffset[10:8]    0x3708, 0x64,    0x4001, 0x02, // BLC start from line 2    0x4005, 0x1a, // BLC always update    0x3000, 0x00, // enable blocks    0x3004, 0xff, // enable clocks    0x300e, 0x58, // MIPI power down, DVP enable    0x302e, 0x00,    0x4300, 0x6f, // RGB565    0x501f, 0x01, // RGB565    0x440e, 0x00,    0x5000, 0xa7, // Lenc on, raw gamma on, BPC on, WPC on, CIP on    // AEC target 自动曝光控制    0x3a0f, 0x30, // stable range in high    0x3a10, 0x28, // stable range in low    0x3a1b, 0x30, // stable range out high    0x3a1e, 0x26, // stable range out low    0x3a11, 0x60, // fast zone high    0x3a1f, 0x14, // fast zone low    // Lens correction for ? 镜头补偿    0x5800, 0x23,    0x5801, 0x14,    0x5802, 0x0f,    0x5803, 0x0f,    0x5804, 0x12,    0x5805, 0x26,    0x5806, 0x0c,    0x5807, 0x08,    0x5808, 0x05,    0x5809, 0x05,    0x580a, 0x08,    0x580b, 0x0d,    0x580c, 0x08,    0x580d, 0x03,    0x580e, 0x00,    0x580f, 0x00,    0x5810, 0x03,    0x5811, 0x09,    0x5812, 0x07,    0x5813, 0x03,    0x5814, 0x00,    0x5815, 0x01,    0x5816, 0x03,    0x5817, 0x08,    0x5818, 0x0d,    0x5819, 0x08,    0x581a, 0x05,    0x581b, 0x06,    0x581c, 0x08,    0x581d, 0x0e,    0x581e, 0x29,    0x581f, 0x17,    0x5820, 0x11,    0x5821, 0x11,    0x5822, 0x15,    0x5823, 0x28,    0x5824, 0x46,    0x5825, 0x26,    0x5826, 0x08,    0x5827, 0x26,    0x5828, 0x64,    0x5829, 0x26,    0x582a, 0x24,    0x582b, 0x22,    0x582c, 0x24,    0x582d, 0x24,    0x582e, 0x06,    0x582f, 0x22,    0x5830, 0x40,    0x5831, 0x42,    0x5832, 0x24,    0x5833, 0x26,    0x5834, 0x24,    0x5835, 0x22,    0x5836, 0x22,    0x5837, 0x26,    0x5838, 0x44,    0x5839, 0x24,    0x583a, 0x26,    0x583b, 0x28,    0x583c, 0x42,    0x583d, 0xce, // lenc BR offset    // AWB 自动白平衡    0x5180, 0xff, // AWB B block    0x5181, 0xf2, // AWB control    0x5182, 0x00, // [7:4] max local counter, [3:0] max fast counter    0x5183, 0x14, // AWB advanced    0x5184, 0x25,    0x5185, 0x24,    0x5186, 0x09,    0x5187, 0x09,    0x5188, 0x09,    0x5189, 0x75,    0x518a, 0x54,    0x518b, 0xe0,    0x518c, 0xb2,    0x518d, 0x42,    0x518e, 0x3d,    0x518f, 0x56,    0x5190, 0x46,    0x5191, 0xf8, // AWB top limit    0x5192, 0x04, // AWB bottom limit    0x5193, 0x70, // red limit    0x5194, 0xf0, // green limit    0x5195, 0xf0, // blue limit    0x5196, 0x03, // AWB control    0x5197, 0x01, // local limit    0x5198, 0x04,    0x5199, 0x12,    0x519a, 0x04,    0x519b, 0x00,    0x519c, 0x06,    0x519d, 0x82,    0x519e, 0x38, // AWB control    // Gamma 伽玛曲线    0x5480, 0x01, // Gamma bias plus on, bit[0]    0x5481, 0x08,    0x5482, 0x14,    0x5483, 0x28,    0x5484, 0x51,    0x5485, 0x65,    0x5486, 0x71,    0x5487, 0x7d,    0x5488, 0x87,    0x5489, 0x91,    0x548a, 0x9a,    0x548b, 0xaa,    0x548c, 0xb8,    0x548d, 0xcd,    0x548e, 0xdd,    0x548f, 0xea,    0x5490, 0x1d,    // color matrix 色彩矩阵    0x5381, 0x1e, // CMX1 for Y    0x5382, 0x5b, // CMX2 for Y    0x5383, 0x08, // CMX3 for Y    0x5384, 0x0a, // CMX4 for U    0x5385, 0x7e, // CMX5 for U    0x5386, 0x88, // CMX6 for U    0x5387, 0x7c, // CMX7 for V    0x5388, 0x6c, // CMX8 for V    0x5389, 0x10, // CMX9 for V    0x538a, 0x01, // sign[9]    0x538b, 0x98, // sign[8:1]    // UV adjust UV 色彩饱和度调整    0x5580, 0x06, // saturation on, bit[1]    0x5583, 0x40,    0x5584, 0x10,    0x5589, 0x10,    0x558a, 0x00,    0x558b, 0xf8,    0x501d, 0x40, // enable manual offset of contrast    // CIP 锐化和降噪    0x5300, 0x08, // CIP sharpen MT threshold 1    0x5301, 0x30, // CIP sharpen MT threshold 2    0x5302, 0x10, // CIP sharpen MT offset 1    0x5303, 0x00, // CIP sharpen MT offset 2    0x5304, 0x08, // CIP DNS threshold 1    0x5305, 0x30, // CIP DNS threshold 2    0x5306, 0x08, // CIP DNS offset 1    0x5307, 0x16, // CIP DNS offset 2    0x5309, 0x08, // CIP sharpen TH threshold 1    0x530a, 0x30, // CIP sharpen TH threshold 2    0x530b, 0x04, // CIP sharpen TH offset 1    0x530c, 0x06, // CIP sharpen TH offset 2    0x5025, 0x00,    0x3008, 0x02, // wake up from standby, bit[6]   //    0x503d, 0x80,//测试彩条//    0x4741, 0x00,};unsigned short RGB565_QVGA[][2]={        0x3212, 0x03, // start group 3    0x3808, 0x01, // DVPHO = 320    0x3809, 0x40, // DVP HO    0x380a, 0x00, // DVPVO = 240    0x380b, 0xf0, // DVPVO    0x3810, 0x00, // H offset = 16    0x3811, 0x10, // H offset    0x3812, 0x00, // V offset = 4    0x3813, 0x04, // V offset    0x3212, 0x13, // end group 3    0x3212, 0xa3, // launch group 3   };unsigned short RGB565_VGA[][2]={    0x3212, 0x03, // start group 3    0x3808, 0x02, // DVPHO = 2048    0x3809, 0x80, // DVP HO    0x380a, 0x01, // DVPVO = 1536    0x380b, 0xe0, // DVPVO    0x3810, 0x00, // H offset = 16    0x3811, 0x10, // H offset    0x3812, 0x00, // V offset = 4    0x3813, 0x04, // V offset    0x3212, 0x13, // end group 3    0x3212, 0xa3, // launch group 3};unsigned short RGB565_WVGA[][2]={    // 800x480 15fps, night mode 5fps    // input clock 24Mhz, PCLK 45.6Mhz    0x3035, 0x41, // PLL    0x3036, 0x72, // PLL    0x3c07, 0x08, // light meter 1 threshold[7:0]    0x3820, 0x42, // flip    0x3821, 0x00, // mirror    0x3814, 0x31, // timing X inc    0x3815, 0x31, // timing Y inc    0x3800, 0x00, // HS    0x3801, 0x00, // HS    0x3802, 0x00, // VS    0x3803, 0xbe, // VS    0x3804, 0x0a, // HW (HE)    0x3805, 0x3f, // HW (HE)    0x3806, 0x06, // VH (VE)    0x3807, 0xe4, // VH (VE)    0x3808, 0x03, // DVPHO    0x3809, 0x20, // DVPHO    0x380a, 0x01, // DVPVO    0x380b, 0xe0, // DVPVO    0x380c, 0x07, // HTS    0x380d, 0x69, // HTS    0x380e, 0x03, // VTS    0x380f, 0x21, // VTS    0x3813, 0x06, // timing V offset    0x3618, 0x00,    0x3612, 0x29,    0x3709, 0x52,    0x370c, 0x03,    0x3a02, 0x09, // 60Hz max exposure, night mode 5fps    0x3a03, 0x63, // 60Hz max exposure    // banding filters are calculated automatically in camera driver    //0x3a08, 0x00, // B50 step    //0x3a09, 0x78, // B50 step    //0x3a0a, 0x00, // B60 step    //0x3a0b, 0x64, // B60 step    //0x3a0e, 0x06, // 50Hz max band    //0x3a0d, 0x08, // 60Hz max band    0x3a14, 0x09, // 50Hz max exposure, night mode 5fps    0x3a15, 0x63, // 50Hz max exposure    0x4004, 0x02, // BLC line number    0x3002, 0x1c, // reset JFIFO, SFIFO, JPG    0x3006, 0xc3, // disable clock of JPEG2x, JPEG    0x4713, 0x03, // JPEG mode 3    0x4407, 0x04, // Quantization sacle    0x460b, 0x35,    0x460c, 0x22,    0x4837, 0x22, // MIPI global timing    0x3824, 0x02, // PCLK manual divider    0x5001, 0xa3, // SDE on, CMX on, AWB on    0x3503, 0x00, // AEC/AGC on//  /* Initialize OV5640 */        //    0x3016, 0x01,//    0x301C, 0x00,//    0x3016, 0x01,//    0x301C, 0x01,//    0x3019, 0x01,//    0x503d, 0x80,//测试彩条//    0x4741, 0x00,};void DCI_gpio_config(void){/*开启GPIO时钟和DCI的时钟*/    rcu_periph_clock_enable(RCU_GPIOA);    rcu_periph_clock_enable(RCU_GPIOB);    rcu_periph_clock_enable(RCU_GPIOC);    rcu_periph_clock_enable(RCU_GPIOD);rcu_periph_clock_enable(RCU_GPIOE);    rcu_periph_clock_enable(RCU_GPIOG);        /*配置引脚复用，配置为DCI模式 */gpio_af_set(GPIOA, GPIO_AF_13, GPIO_PIN_6);//PCLK    gpio_af_set(GPIOA, GPIO_AF_13, GPIO_PIN_4);//HSgpio_af_set(GPIOG, GPIO_AF_13, GPIO_PIN_9);//VS        gpio_af_set(GPIOC, GPIO_AF_13, GPIO_PIN_6);//D0    gpio_af_set(GPIOC, GPIO_AF_13, GPIO_PIN_7);//D1    gpio_af_set(GPIOC, GPIO_AF_13, GPIO_PIN_8);//D2    gpio_af_set(GPIOC, GPIO_AF_13, GPIO_PIN_9);//D3    gpio_af_set(GPIOE, GPIO_AF_13, GPIO_PIN_4);//D4gpio_af_set(GPIOD, GPIO_AF_13, GPIO_PIN_3);//D5    gpio_af_set(GPIOB, GPIO_AF_13, GPIO_PIN_8);//D6    gpio_af_set(GPIOB, GPIO_AF_13, GPIO_PIN_9);//D7    //PCLKgpio_mode_set(GPIOA, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_6);gpio_output_options_set(GPIOA, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_6);//HSgpio_mode_set(GPIOA, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_4);gpio_output_options_set(GPIOA, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_4);//VSgpio_mode_set(GPIOG, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_9);gpio_output_options_set(GPIOG, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_9);//D0gpio_mode_set(GPIOC, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_6);gpio_output_options_set(GPIOC, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_6);//D1gpio_mode_set(GPIOC, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_7);gpio_output_options_set(GPIOC, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_7);//D2gpio_mode_set(GPIOC, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_8);gpio_output_options_set(GPIOC, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_8);//D3gpio_mode_set(GPIOC, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_9);gpio_output_options_set(GPIOC, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_9);//D4gpio_mode_set(GPIOE, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_4);gpio_output_options_set(GPIOE, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_4);//D5gpio_mode_set(GPIOD, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_3);gpio_output_options_set(GPIOD, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_3);//D6gpio_mode_set(GPIOB, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_8);gpio_output_options_set(GPIOB, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_8);//D7gpio_mode_set(GPIOB, GPIO_MODE_AF, GPIO_PUPD_NONE, GPIO_PIN_9);gpio_output_options_set(GPIOB, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, GPIO_PIN_9);}void DCI_config(void){rcu_periph_clock_enable(RCU_DCI);/**DCI参数结构体*/    dci_parameter_struct dci_struct = {0};    dci_deinit(); // DCI复位    /* DCI configuration */    dci_struct.capture_mode = DCI_CAPTURE_MODE_SNAPSHOT;      // 配置为连续捕获    dci_struct.clock_polarity = DCI_CK_POLARITY_RISING;       // 时钟极性PCLK上升沿有效    dci_struct.hsync_polarity = DCI_HSYNC_POLARITY_LOW;       // 水平参考信号低电平有效    dci_struct.vsync_polarity = DCI_VSYNC_POLARITY_LOW;       // 垂直参考信号低电平有效    dci_struct.frame_rate = DCI_FRAME_RATE_ALL;               // 全帧捕获    dci_struct.interface_format = DCI_INTERFACE_FORMAT_8BITS; // 8位数据    dci_init(&amp;dci_struct);}void DCI_IRQHandler(void){    if( dci_interrupt_flag_get(DCI_INT_FLAG_EF) == SET )    {        dci_interrupt_flag_clear(DCI_INT_EF);dci_frame_it_done_flag = 1;        printf("DCI中断完成\r\n");          }}void DCI_Start(void){dma_channel_enable(DCI_DMA_PORT, DCI_DMA_CH);dci_interrupt_enable(DCI_INT_EF);dci_enable();}void DCI_Stop(void){uint32_t timeout = 0xFFFF;  // 超时计数器，防止死锁    dci_capture_disable();    while(dci_flag_get(DCI_FLAG_EF) == RESET &amp;&amp; timeout--) {        // 等待帧结束标志（EF）置位，或超时退出    }    dci_disable();    dma_channel_disable(DCI_DMA_PORT, DCI_DMA_CH);  // 根据实际使用的DMA通道修改}void CTRL_gpio_config(void){rcu_periph_clock_enable(PWDN_GPIO_RCU);    rcu_periph_clock_enable(RST_GPIO_RCU);// PWDN    gpio_mode_set(PWDN_GPIO_PORT, GPIO_MODE_OUTPUT, GPIO_PUPD_PULLUP, PWDN_GPIO_PIN);    gpio_output_options_set(PWDN_GPIO_PORT, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, PWDN_GPIO_PIN);    // RST    gpio_mode_set(RST_GPIO_PORT, GPIO_MODE_OUTPUT, GPIO_PUPD_PULLUP, RST_GPIO_PIN);    gpio_output_options_set(RST_GPIO_PORT, GPIO_OTYPE_PP, GPIO_OSPEED_200MHZ, RST_GPIO_PIN);}void DMA_config(void){dma_single_data_parameter_struct dma_single_struct; //定义DMA参数结构体    rcu_periph_clock_enable(DCI_DMA_RCU);    dma_deinit(DCI_DMA_PORT, DCI_DMA_CH);    dma_single_struct.periph_addr = (uint32_t)DCI_DR_ADDRESS;//外设基地址    dma_single_struct.memory0_addr =  (uint32_t)photo_buff; //存储器基地址，定义的数组的地址    dma_single_struct.direction = DMA_PERIPH_TO_MEMORY;//DMA数据传输方向，外设到存储器    dma_single_struct.number = 65535;//65535; // 38400 x 4 = 153600B    dma_single_struct.periph_inc = DMA_PERIPH_INCREASE_DISABLE;//外设地址生成算法，串口地址不变，设置为固定模式    dma_single_struct.memory_inc = DMA_MEMORY_INCREASE_ENABLE;//存储器基地址，每次存放的地址不同，要配置为增量模式    dma_single_struct.periph_memory_width = DMA_PERIPH_WIDTH_32BIT;//DMA_PERIPH_WIDTH_32BIT    dma_single_struct.priority = DMA_PRIORITY_HIGH;//DMA的软件优先级，这里配置为高优先级    dma_single_struct.circular_mode = DMA_CIRCULAR_MODE_DISABLE; //DMA循环模式，关闭循环模式    dma_single_data_mode_init(DCI_DMA_PORT, DCI_DMA_CH, &amp;dma_single_struct);    dma_channel_subperipheral_select(DCI_DMA_PORT, DCI_DMA_CH, DMA_SUBPERI1);dma_channel_enable(DCI_DMA_PORT, DCI_DMA_CH);dma_interrupt_enable(DCI_DMA_PORT, DCI_DMA_CH, DMA_CHXCTL_FTFIE);//通道传输完成中断dma_interrupt_enable(DCI_DMA_PORT,DCI_DMA_CH,DMA_CHXCTL_TAEIE);//传输访问错误中断使能nvic_irq_enable(DMA1_Channel7_IRQn, 2, 1);//配置中断优先级}void DMA1_Channel7_IRQHandler(void){            if (dma_interrupt_flag_get(DCI_DMA_PORT, DCI_DMA_CH, DMA_INT_FLAG_FTF ) == SET){          dma_interrupt_flag_clear(DCI_DMA_PORT, DCI_DMA_CH, DMA_INT_FLAG_FTF);printf("DCI DMA 中断 ok\r\n");dci_dma_it_done_flag = 1;DCI_Stop();}if (dma_interrupt_flag_get(DCI_DMA_PORT, DCI_DMA_CH, DMA_INT_FLAG_TAE) == SET){            printf("DCI DMA 错误 no\r\n");dci_dma_it_done_flag = 0;}printf("DCI DMA 中断 enter\r\n");}void BSP_OV5640_Init(void){uint8_t focus_status = 0;// 分配内存    photo_buff = (uint32_t *)mymalloc(SRAMEX, PHOTO_BUFF_SIZE * sizeof(uint32_t));    camera_framebuffer = (uint16_t *)mymalloc(SRAMEX, CAMERA_FRAMEBUFFER_SIZE * sizeof(uint16_t));DCI_gpio_config();DCI_config();CTRL_gpio_config();/* RST, 低电平复位，高电平不复位 */OV5640_RST_OUT(0);/*PWDN引脚，高电平关闭电源，低电平开启供电*/OV5640_PWDN_OUT(1);delay_us(100);OV5640_PWDN_OUT(1);delay_us(100);OV5640_RST_OUT(1);//初始化SCCB-IICSCCB_IIC_Init();//检查摄像头连接taskENTER_CRITICAL();OV5640_ReadID(&amp;OV5640_Camera_ID);if(OV5640_Camera_ID.PIDH  == 0x56){printf("%x %x",OV5640_Camera_ID.PIDH ,OV5640_Camera_ID.PIDL);}else{printf("%x %x",OV5640_Camera_ID.PIDH ,OV5640_Camera_ID.PIDL);printf("没有检测到OV5640摄像头，请重新检查连接。\r\n");while(1);  }taskEXIT_CRITICAL();OV5640_RGB565Config();OV5640_USER_Config();OV5640_FOCUS_AD5820_Init();if(cam_mode.auto_focus ==1){OV5640_FOCUS_AD5820_Constant_Focus();focus_status = 1;}//启动DCI开始图像采集DMA_config();DCI_Start();// 配置中断优先级（确保能被正确响应）nvic_irq_enable(DCI_IRQn, 0U, 0U);          // DCI中断nvic_irq_enable(DMA1_Channel7_IRQn, 2, 1);  // DMA中断//dci_capture_enable();}//读取摄像头的IDvoid OV5640_ReadID(OV5640_IDTypeDef *OV5640ID){/*读取寄存芯片ID*/OV5640ID-&gt;PIDH = IIC_RD_Reg_16bit(OV5640_SENSOR_PIDH);OV5640ID-&gt;PIDL = IIC_RD_Reg_16bit(OV5640_SENSOR_PIDL);}void OV5640_Reset(void){/*OV5640软件复位*/  IIC_WR_Reg_16bit(0x3008, 0x80);}unsigned short sensor_reg[(sizeof(RGB565_Init)/4)];//用于验证是否写入正常void OV5640_RGB565Config(void){  uint32_t i;  /*摄像头复位*/OV5640_Reset();  /* 写入寄存器配置 */  /* Initialize OV5640   Set to output RGB565 */for(i=0; i&lt;(sizeof(RGB565_Init)/4); i++){IIC_WR_Reg_16bit(RGB565_Init[i][0], RGB565_Init[i][1]);sensor_reg[i] = IIC_RD_Reg_16bit(RGB565_Init[i][0]);printf("sensor_reg[0x%x]:%x-%x\n",RGB565_Init[i][0],RGB565_Init[i][1],sensor_reg[i]);}  vTaskDelay(pdMS_TO_TICKS(500));      if(img_width == 320)     ImageFormat = BMP_320x240;  else if(img_width == 640)    ImageFormat = BMP_640x480;  else if(img_width == 800)    ImageFormat = BMP_800x480;    switch(ImageFormat)  {    case BMP_320x240:    {      for(i=0; i&lt;(sizeof(RGB565_QVGA)/2); i++)      {        IIC_WR_Reg_16bit(RGB565_QVGA[i][0], RGB565_QVGA[i][1]);      }      break;    }    case BMP_640x480:    {       for(i=0; i&lt;(sizeof(RGB565_VGA)/2); i++)      {        IIC_WR_Reg_16bit(RGB565_VGA[i][0], RGB565_VGA[i][1]);      }      break;    }    case BMP_800x480:    {      for(i=0; i&lt;(sizeof(RGB565_WVGA)/2); i++)      {        IIC_WR_Reg_16bit(RGB565_WVGA[i][0], RGB565_WVGA[i][1]);      }      break;    }    default:    {      for(i=0; i&lt;(sizeof(RGB565_WVGA)/2); i++)      {        IIC_WR_Reg_16bit(RGB565_WVGA[i][0], RGB565_WVGA[i][1]);      }      break;    }  }}/**  * @brief  设置帧率  * @param  可使用宏：FRAME_RATE_30FPS，FRAME_RATE_15FPS  * @retval 无  */void OV5640_FrameRate_Set(uint8_t frame_rate){ if(frame_rate == FRAME_RATE_30FPS){IIC_WR_Reg_16bit(0x3035,0x21);//X_ADDR_ST高字节IIC_WR_Reg_16bit(0x3036,0x72);//X_ADDR_ST低字节}else if(frame_rate == FRAME_RATE_15FPS){IIC_WR_Reg_16bit(0x3035,0x41);//X_ADDR_ST高字节IIC_WR_Reg_16bit(0x3036,0x72);//X_ADDR_ST低字节}}/**  * @brief  设置图像输出像大小，位置，以及是否使用自动缩放功能  * @param  scaling:0,关闭自动缩放功能，1，开启自动缩放功能  * @param  x_off,y_off:-关闭自动缩放功能时，这两个值为输出窗口在ISP图像中的偏移。 ！！不使用自动缩放功能时，非常容易出错。                         ！！使用15fps相对不容易出错，但还是推荐使用自动缩放功能。                        -开启自动缩放功能时，这两个值设置为 16,4 一般能正常使用，                        也可根据输出窗口的宽高比例来调整，比较复杂，                        请参考《OV5640 自动对焦摄像模组应用指南》第46页  * @param  width,height:图像宽度和图像高度  * @retval 无  */void OV5640_OutSize_Set(uint8_t scaling,uint16_t x_off,uint16_t y_off,uint16_t width,uint16_t height){ uint8_t reg_temp;//读取原寄存器内容reg_temp = IIC_RD_Reg_16bit(0x5001);//不使用自动缩放功能if(scaling == 0 ){IIC_WR_Reg_16bit(0x5001,reg_temp &amp;~(1&lt;&lt;5) );//scaling off}else{IIC_WR_Reg_16bit(0x5001,reg_temp|(1&lt;&lt;5) );//scaling on}IIC_WR_Reg_16bit(0x3810,x_off&gt;&gt;8);//X offset高字节IIC_WR_Reg_16bit(0x3811,x_off&amp;0xff);//X offset低字节IIC_WR_Reg_16bit(0x3812,y_off&gt;&gt;8);//Y offset高字节IIC_WR_Reg_16bit(0x3813,y_off&amp;0xff);//Y offset低字节    IIC_WR_Reg_16bit(0X3212,0X03);      IIC_WR_Reg_16bit(0x3808,width&gt;&gt;8);//输出宽度高字节    IIC_WR_Reg_16bit(0x3809,width&amp;0xff);//输出宽度低字节      IIC_WR_Reg_16bit(0x380a,height&gt;&gt;8);//输出高度高字节    IIC_WR_Reg_16bit(0x380b,height&amp;0xff);//输出高度低字节    IIC_WR_Reg_16bit(0X3212,0X13);    IIC_WR_Reg_16bit(0X3212,0Xa3);}//这段代码实现了 OV5640 摄像头的亮度调节功能，通过修改特定寄存器的值来调整图像的整体亮度。//亮度调节范围为 -2（最暗）到 +2（最亮），共 5 个等级。函数使用了 OV5640 的 寄存器组控制机制，确保配置参数被正确应用。void OV5640_BrightnessConfig(int8_t Brightness){IIC_WR_Reg_16bit(0x3212, 0x03); // start group 3IIC_WR_Reg_16bit(0x5587, (Brightness&lt;&lt;4)&amp;0xF0);if(Brightness &gt;= 0){IIC_WR_Reg_16bit(0x5588, 0x01);}else{IIC_WR_Reg_16bit(0x5588, 0x09);}IIC_WR_Reg_16bit(0x3212, 0x13); // end group 3IIC_WR_Reg_16bit(0x3212, 0xa3); // launch group 3}//色彩饱和度参数表const static uint8_t OV5640_Saturation_reg[][6]={ 0X0C,0x30,0X3D,0X3E,0X3D,0X01,//-3 0X10,0x3D,0X4D,0X4E,0X4D,0X01,//-2  0X15,0x52,0X66,0X68,0X66,0X02,//-1  0X1A,0x66,0X80,0X82,0X80,0X02,//0  0X1F,0x7A,0X9A,0X9C,0X9A,0X02,//+1  0X24,0x8F,0XB3,0XB6,0XB3,0X03,//+20X2B,0xAB,0XD6,0XDA,0XD6,0X04,//+3}; /**  * @brief  设置饱和度  * @param  sat:饱和度,参数范围[-3 ~ +3]               * @retval 无  */void OV5640_Color_Saturation(int8_t sat){uint8_t i;IIC_WR_Reg_16bit(0x3212, 0x03); // start group 3IIC_WR_Reg_16bit(0x5381, 0x1c);IIC_WR_Reg_16bit(0x5382, 0x5a);IIC_WR_Reg_16bit(0x5383, 0x06);for(i=0;i&lt;6;i++){IIC_WR_Reg_16bit(0x5384+i, OV5640_Saturation_reg[sat+3][i]);}IIC_WR_Reg_16bit(0x538b, 0x98);IIC_WR_Reg_16bit(0x538a, 0x01);IIC_WR_Reg_16bit(0x3212, 0x13); // end group 3IIC_WR_Reg_16bit(0x3212, 0xa3); // launch group 3}//对比度参数表const static uint8_t OV5640_Contrast_reg[][2]={0x2C,0x1C,0x28,0x18,0x24,0x10,0x20,0x00,0x1C,0x1C,0x18,0x18,0x14,0x14,};/**  * @brief  设置对比度* @param  cnst:对比度，参数范围[-3~+3]  * @retval 无  */void OV5640_ContrastConfig(int8_t cnst){IIC_WR_Reg_16bit(0x3212, 0x03); // start group 3IIC_WR_Reg_16bit(0x5586, OV5640_Contrast_reg[cnst+3][0]);IIC_WR_Reg_16bit(0x5585, OV5640_Contrast_reg[cnst+3][1]);IIC_WR_Reg_16bit(0x3212, 0x13); // end group 3IIC_WR_Reg_16bit(0x3212, 0xa3); // launch group 3}//曝光补偿设置参数表const static uint8_t OV5640_Exposure_reg[][6]={    0x10,0x08,0x10,0x08,0x20,0x10,//-3      0x20,0x18,0x41,0x20,0x18,0x10,//-2    0x30,0x28,0x61,0x30,0x28,0x10,//-1     0x38,0x30,0x61,0x38,0x30,0x10,//0      0x40,0x38,0x71,0x40,0x38,0x10,//+1     0x50,0x48,0x90,0x50,0x48,0x20,//+2       0x60,0x58,0xa0,0x60,0x58,0x20,//+3    };/**  * @brief  设置曝光补偿  * @param  ev:曝光补偿等级，参数范围[-3 ~ +3]               * @retval 无  */void OV5640_Exposure(int8_t ev){IIC_WR_Reg_16bit(0x3212, 0x03); // start group 3IIC_WR_Reg_16bit(0x3a0f, OV5640_Exposure_reg[ev+3][0]);IIC_WR_Reg_16bit(0x3a10, OV5640_Exposure_reg[ev+3][1]);IIC_WR_Reg_16bit(0x3a11, OV5640_Exposure_reg[ev+3][2]);IIC_WR_Reg_16bit(0x3a1b, OV5640_Exposure_reg[ev+3][3]);IIC_WR_Reg_16bit(0x3a1e, OV5640_Exposure_reg[ev+3][4]);IIC_WR_Reg_16bit(0x3a1f, OV5640_Exposure_reg[ev+3][5]);IIC_WR_Reg_16bit(0x3212, 0x13); // end group 3IIC_WR_Reg_16bit(0x3212, 0xa3); // launch group 3}//环境光模式参数表const static uint8_t OV5640_LightMode_reg[][7]={ 0x04,0X00,0X04,0X00,0X04,0X00,0X00,//Auto,自动 0x06,0X1C,0X04,0X00,0X04,0XF3,0X01,//Sunny,日光0x05,0X48,0X04,0X00,0X07,0XCF,0X01,//Office,办公室0x06,0X48,0X04,0X00,0X04,0XD3,0X01,//Cloudy,阴天 0x04,0X10,0X04,0X00,0X08,0X40,0X01,//Home,室内}; /**  * @brief  配置光线模式  * @param  参数用于选择光线模式  *         0x00 Auto     自动  *         0x01 Sunny    光照  *         0x02 Cloudy   阴天  *         0x03 Office   办公室  *         0x04 Home     家里  * @retval None  */void OV5640_LightMode(uint8_t mode){IIC_WR_Reg_16bit(0x3212, 0x03); // start group 3IIC_WR_Reg_16bit(0x3406, OV5640_LightMode_reg[mode][0]);IIC_WR_Reg_16bit(0x3400, OV5640_LightMode_reg[mode][1]);IIC_WR_Reg_16bit(0x3401, OV5640_LightMode_reg[mode][2]);IIC_WR_Reg_16bit(0x3402, OV5640_LightMode_reg[mode][3]);IIC_WR_Reg_16bit(0x3403, OV5640_LightMode_reg[mode][4]);IIC_WR_Reg_16bit(0x3404, OV5640_LightMode_reg[mode][5]);IIC_WR_Reg_16bit(0x3405, OV5640_LightMode_reg[mode][6]);IIC_WR_Reg_16bit(0x3212, 0x13); // end group 3IIC_WR_Reg_16bit(0x3212, 0xa3); // lanuch group 3}/**  * @brief  特殊效果  * @param  参数用于选择光线模式  *         0x00 Antique   复古    *         0x01 Bluish    偏蓝  *         0x02 Greenish  偏绿   *         0x03 Reddish   偏红  *         0x04 B&amp;W       黑白  *         0x05 Negative  反相  *         0x06 B&amp;W negative  黑白反相  *         0x07 Normal     正常   * @retval None  */void OV5640_SpecialEffects(uint8_t mode){  switch(mode)  {    case 0:   // Antique    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x18);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x40);    IIC_WR_Reg_16bit(0x7d, 0xa6);    break;        case 1:        //Bluish    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x18);    IIC_WR_Reg_16bit(0x7c,0x05);    IIC_WR_Reg_16bit(0x7d, 0xa0);    IIC_WR_Reg_16bit(0x7d, 0x40);        break;        case 2:    //Greenish    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x18);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x40);    IIC_WR_Reg_16bit(0x7d, 0x40);    break;        case 3:   // Reddish    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x18);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x40);    IIC_WR_Reg_16bit(0x7d, 0xc0);    break;        case 4:   // B&amp;W    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x18);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x80);    IIC_WR_Reg_16bit(0x7d, 0x80);    break;        case 5:    //Negative    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x40);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x80);    IIC_WR_Reg_16bit(0x7d, 0x80);        break;        case 6:    //B&amp;W negative    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x58);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x80);    IIC_WR_Reg_16bit(0x7d, 0x80);        break;        case 7:    //Normal    IIC_WR_Reg_16bit(0xff, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x00);    IIC_WR_Reg_16bit(0x7d, 0x00);    IIC_WR_Reg_16bit(0x7c, 0x05);    IIC_WR_Reg_16bit(0x7d, 0x80);    IIC_WR_Reg_16bit(0x7d, 0x80);        break;  }}//用户对于摄像头设置void OV5640_USER_Config(void){OV5640_FrameRate_Set(cam_mode.frame_rate);vTaskDelay(pdMS_TO_TICKS(100));//OV5640_ISPSize_Set(cam_mode.cam_isp_sx,// cam_mode.cam_isp_sy,// cam_mode.cam_isp_width,// cam_mode.cam_isp_height);//Delay(100);  OV5640_OutSize_Set(cam_mode.scaling,cam_mode.cam_out_sx,cam_mode.cam_out_sy,cam_mode.cam_out_width,cam_mode.cam_out_height);vTaskDelay(pdMS_TO_TICKS(100));OV5640_BrightnessConfig(cam_mode.brightness);vTaskDelay(pdMS_TO_TICKS(100));OV5640_Color_Saturation(cam_mode.saturation);vTaskDelay(pdMS_TO_TICKS(100));OV5640_ContrastConfig(cam_mode.contrast);vTaskDelay(pdMS_TO_TICKS(100));OV5640_Exposure(cam_mode.exposure);vTaskDelay(pdMS_TO_TICKS(100));OV5640_LightMode(cam_mode.light_mode);vTaskDelay(pdMS_TO_TICKS(100));OV5640_SpecialEffects(cam_mode.effect);vTaskDelay(pdMS_TO_TICKS(100));//Delay(500);}//============================================================================================================#define OV5640_DEVICE_IIC_ADDR0x78/**  * @brief  将固件写入到OV5640片内MCU  * @param  pBuffer: 指向要写入的固件数据缓冲区的指针  * @param  BufferSize: 固件数据的大小（字节数）  * @retval 返回0表示写入正常，0xFF表示错误  */uint8_t OV5640_WriteFW(uint8_t *pBuffer, uint16_t BufferSize){    uint16_t Addr = 0x8000;  // OV5640的MCU基地址    uint8_t res;        // 1. 启动IIC传输    IIC_Start();        // 2. 发送设备地址（写模式）    res = IIC_Send_Byte(OV5640_DEVICE_IIC_ADDR);    if (res != 0)    {        IIC_Stop();        return 0xFF;  // 设备地址发送失败    }    delay_us(100);  // 延时等待响应        // 3. 发送地址高8位（0x80）    res = IIC_Send_Byte((uint8_t)((Addr &gt;&gt; 8) &amp; 0xFF));    if (res != 0)    {        IIC_Stop();        return 0xFF;  // 地址高8位发送失败    }    delay_us(100);        // 4. 发送地址低8位（0x00）    res = IIC_Send_Byte((uint8_t)(Addr &amp; 0xFF));    if (res != 0)    {        IIC_Stop();        return 0xFF;  // 地址低8位发送失败    }    delay_us(100);        // 5. 循环发送固件数据    while (BufferSize--)    {        // 发送一个字节数据        res = IIC_Send_Byte(*pBuffer);        if (res != 0)        {            IIC_Stop();            return 0xFF;  // 数据发送失败        }        pBuffer++;  // 指向 next 字节        delay_us(50);  // 适当延时，确保数据稳定发送    }        // 6. 发送停止信号，结束传输    IIC_Stop();        // 7. 操作成功    return 0;}/** * @brief  将RGB565格式的32位缓冲区拆分为16位缓冲区 * @note   假设photo_buff中每个uint32_t存储2个RGB565像素（高16位在前，低16位在后） * @param  无 * @retval 无 */void photo_buff_to_framebuffer(void){    uint32_t i;    uint32_t total_pairs = 240 * 320 / 2;  // photo_buff的元素总数（每元素含2个像素）        for (i = 0; i &lt; total_pairs; i++) {        uint32_t pixel_pair = photo_buff[i];  // 获取一组（2个）RGB565像素                // 拆分高16位为第一个像素（RGB565格式）        camera_framebuffer[2 * i] = (uint16_t)((pixel_pair &gt;&gt; 16) &amp; 0xFFFF);                // 拆分低16位为第二个像素（RGB565格式）        camera_framebuffer[2 * i + 1] = (uint16_t)(pixel_pair &amp; 0xFFFF);    }}</code></pre><p>#include &quot;bsp_OV5640_AF.h&quot;</p><pre><code class="language-cpp">#ifndef __BSP_OV5640_AF_H#define __BSP_OV5640_AF_H#include "gd32f4xx.h"                   // Device headervoid OV5640_AUTO_FOCUS(void);void OV5640_FOCUS_AD5820_Init(void);void OV5640_FOCUS_AD5820_Pause_Focus(void);void OV5640_FOCUS_AD5820_Constant_Focus(void);#endif</code></pre><p>#include &quot;bsp_OV5640_AF.c&quot;</p><pre><code class="language-cpp">#include "bsp_OV5640_AF.h"#include "bsp_uart.h"#include "bsp_sccb.h"#include "bsp_OV5640.h"#include "FreeRTOS.h"#include "task.h"static void OV5640_FOCUS_AD5820_Check_MCU(void);static u8 OV5640_AF_FW[] =    {    0x02, 0x0d, 0xf3, 0x02, 0x0a, 0x5f, 0xc2, 0x01, 0x22, 0x22, 0x00, 0x02, 0x0f, 0x31, 0x30, 0x01,    0x03, 0x02, 0x03, 0x09, 0x30, 0x02, 0x03, 0x02, 0x03, 0x09, 0x90, 0x51, 0xa5, 0xe0, 0x78, 0xbb,     0xf6, 0xa3, 0xe0, 0x08, 0xf6, 0xa3, 0xe0, 0x08, 0xf6, 0xe5, 0x1f, 0x70, 0x45, 0x75, 0x1e, 0x20,     0xd2, 0x34, 0x12, 0x0c, 0x0c, 0x78, 0x9c, 0x12, 0x0b, 0xd2, 0x78, 0xa8, 0xa6, 0x14, 0x08, 0xa6,     0x15, 0x78, 0xb3, 0xa6, 0x09, 0x18, 0x76, 0x01, 0x78, 0x4c, 0xa6, 0x0a, 0x08, 0xa6, 0x0b, 0x78,     0x6c, 0xa6, 0x14, 0x08, 0xa6, 0x15, 0x78, 0xb3, 0xe6, 0x78, 0x8c, 0xf6, 0x75, 0x1f, 0x01, 0x78,     0xbb, 0xe6, 0x78, 0xb8, 0xf6, 0x78, 0xbc, 0xe6, 0x78, 0xb9, 0xf6, 0x78, 0xbd, 0xe6, 0x78, 0xba,     0xf6, 0x22, 0x79, 0xb8, 0xe7, 0xd3, 0x78, 0xbb, 0x96, 0x40, 0x05, 0xe7, 0x96, 0xff, 0x80, 0x08,     0xc3, 0x79, 0xbb, 0xe7, 0x78, 0xb8, 0x96, 0xff, 0x78, 0xa6, 0x76, 0x00, 0x08, 0xa6, 0x07, 0x79,     0xb9, 0xe7, 0xd3, 0x78, 0xbc, 0x96, 0x40, 0x05, 0xe7, 0x96, 0xff, 0x80, 0x08, 0xc3, 0x79, 0xbc,     0xe7, 0x78, 0xb9, 0x96, 0xff, 0x12, 0x0c, 0x13, 0x79, 0xba, 0xe7, 0xd3, 0x78, 0xbd, 0x96, 0x40,     0x05, 0xe7, 0x96, 0xff, 0x80, 0x08, 0xc3, 0x79, 0xbd, 0xe7, 0x78, 0xba, 0x96, 0xff, 0x12, 0x0c,     0x13, 0x78, 0xb2, 0xe6, 0x25, 0xe0, 0x24, 0x4c, 0xf8, 0xa6, 0x0a, 0x08, 0xa6, 0x0b, 0x78, 0xb2,     0xe6, 0x25, 0xe0, 0x24, 0x6c, 0xf8, 0xa6, 0x14, 0x08, 0xa6, 0x15, 0x78, 0xb2, 0xe6, 0x24, 0x8c,     0xf8, 0xa6, 0x09, 0x78, 0xb2, 0xe6, 0x24, 0x01, 0xff, 0xe4, 0x33, 0xfe, 0xd3, 0xef, 0x94, 0x0f,     0xee, 0x64, 0x80, 0x94, 0x80, 0x40, 0x04, 0x7f, 0x00, 0x80, 0x05, 0x78, 0xb2, 0xe6, 0x04, 0xff,     0x78, 0xb2, 0xa6, 0x07, 0xe5, 0x1f, 0xb4, 0x01, 0x0a, 0xe6, 0x60, 0x03, 0x02, 0x03, 0x09, 0x75,     0x1f, 0x02, 0x22, 0x12, 0x0c, 0x0c, 0x78, 0x9e, 0x12, 0x0b, 0xd2, 0x12, 0x0c, 0x0c, 0x78, 0xa0,     0x12, 0x0b, 0xff, 0x78, 0xaa, 0x12, 0x0b, 0xff, 0xff, 0x78, 0xac, 0xa6, 0x06, 0x08, 0xa6, 0x07,     0x78, 0x8c, 0xe6, 0x78, 0xb4, 0xf6, 0x78, 0x8c, 0xe6, 0x78, 0xb5, 0xf6, 0x7f, 0x01, 0xef, 0x25,     0xe0, 0x24, 0x4d, 0x78, 0x9f, 0x12, 0x0b, 0xc9, 0x50, 0x0a, 0x12, 0x0b, 0xab, 0x78, 0x9e, 0xa6,     0x04, 0x08, 0xa6, 0x05, 0xef, 0x25, 0xe0, 0x24, 0x6d, 0x78, 0xab, 0x12, 0x0b, 0xc9, 0x50, 0x0f,     0xef, 0x25, 0xe0, 0x24, 0x6c, 0x12, 0x0b, 0xb0, 0x78, 0xaa, 0xa6, 0x04, 0x08, 0xa6, 0x05, 0x74,     0x8c, 0x2f, 0xf9, 0x78, 0xb4, 0xe6, 0xc3, 0x97, 0x50, 0x08, 0x74, 0x8c, 0x2f, 0xf8, 0xe6, 0x78,     0xb4, 0xf6, 0xef, 0x25, 0xe0, 0x24, 0x4d, 0xf9, 0xd3, 0x78, 0xa1, 0x12, 0x0b, 0xcb, 0x40, 0x0a,     0x12, 0x0b, 0xab, 0x78, 0xa0, 0xa6, 0x04, 0x08, 0xa6, 0x05, 0xef, 0x25, 0xe0, 0x24, 0x6d, 0xf9,     0xd3, 0x78, 0xad, 0x12, 0x0b, 0xcb, 0x40, 0x0f, 0xef, 0x25, 0xe0, 0x24, 0x6c, 0x12, 0x0b, 0xb0,     0x78, 0xac, 0xa6, 0x04, 0x08, 0xa6, 0x05, 0x74, 0x8c, 0x2f, 0xf9, 0x78, 0xb5, 0xe6, 0xd3, 0x97,     0x40, 0x08, 0x74, 0x8c, 0x2f, 0xf8, 0xe6, 0x78, 0xb5, 0xf6, 0x0f, 0xef, 0x64, 0x10, 0x60, 0x03,     0x02, 0x01, 0x3e, 0xc3, 0x79, 0x9f, 0x78, 0xa1, 0x12, 0x0b, 0xf7, 0x78, 0xa2, 0xf6, 0x08, 0xa6,     0x07, 0xc3, 0x79, 0xab, 0x78, 0xad, 0x12, 0x0b, 0xf7, 0x78, 0xae, 0xf6, 0x08, 0xa6, 0x07, 0xc3,     0x79, 0xb4, 0xe7, 0x78, 0xb5, 0x96, 0x08, 0xf6, 0xd3, 0x79, 0x9f, 0xe7, 0x78, 0x9d, 0x96, 0x19,     0xe7, 0x18, 0x96, 0x40, 0x05, 0x09, 0xe7, 0x08, 0x80, 0x06, 0xc3, 0x79, 0x9d, 0xe7, 0x78, 0x9f,     0x12, 0x0b, 0xf8, 0xfe, 0x78, 0xa4, 0xa6, 0x06, 0x08, 0xa6, 0x07, 0xd3, 0x79, 0xab, 0xe7, 0x78,     0xa9, 0x96, 0x19, 0xe7, 0x18, 0x96, 0x40, 0x05, 0x09, 0xe7, 0x08, 0x80, 0x06, 0xc3, 0x79, 0xa9,     0xe7, 0x78, 0xab, 0x12, 0x0b, 0xf8, 0xfe, 0x78, 0xb0, 0xa6, 0x06, 0x08, 0xa6, 0x07, 0x79, 0xb4,     0xe7, 0xd3, 0x78, 0xb3, 0x96, 0x40, 0x05, 0xe7, 0x96, 0xff, 0x80, 0x08, 0xc3, 0x79, 0xb3, 0xe7,     0x78, 0xb4, 0x96, 0xff, 0x78, 0xb7, 0xa6, 0x07, 0xe5, 0x1f, 0x64, 0x02, 0x60, 0x03, 0x02, 0x02,     0xef, 0x90, 0x30, 0x24, 0x74, 0x0f, 0xf0, 0x90, 0x0e, 0x8a, 0xe4, 0x93, 0xff, 0x18, 0xe6, 0xc3,     0x9f, 0x40, 0x03, 0x02, 0x03, 0x09, 0x90, 0x30, 0x24, 0x74, 0x0e, 0xf0, 0x78, 0xa2, 0x12, 0x0b,     0xd9, 0x12, 0x0b, 0xa2, 0x90, 0x0e, 0x87, 0x12, 0x0b, 0xb7, 0x78, 0x9e, 0x12, 0x0b, 0xe8, 0x7b,     0x04, 0x12, 0x0b, 0x90, 0xc3, 0x12, 0x07, 0x0e, 0x50, 0x6f, 0x90, 0x0e, 0x8b, 0xe4, 0x93, 0xff,     0x78, 0xb7, 0xe6, 0x9f, 0x40, 0x07, 0x90, 0x30, 0x24, 0x74, 0x0a, 0x80, 0x16, 0x90, 0x0e, 0x89,     0xe4, 0x93, 0xff, 0xd3, 0x78, 0xa7, 0xe6, 0x9f, 0x18, 0xe6, 0x94, 0x00, 0x40, 0x09, 0x90, 0x30,     0x24, 0x74, 0x0b, 0xf0, 0x75, 0x1f, 0x05, 0x78, 0xae, 0x12, 0x0b, 0xd9, 0x12, 0x0b, 0xa2, 0x90,     0x0e, 0x88, 0x12, 0x0b, 0xb7, 0x78, 0xa8, 0x12, 0x0b, 0xe8, 0x7b, 0x40, 0x12, 0x0b, 0x90, 0xd3,     0x12, 0x07, 0x0e, 0x40, 0x24, 0x90, 0x30, 0x24, 0x74, 0x0c, 0xf0, 0x75, 0x1f, 0x05, 0x22, 0x90,     0x30, 0x24, 0x74, 0x01, 0xf0, 0xe5, 0x1f, 0xb4, 0x05, 0x0f, 0xd2, 0x01, 0xc2, 0x02, 0xe4, 0xf5,     0x1f, 0xf5, 0x1e, 0xd2, 0x34, 0xd2, 0x32, 0xd2, 0x35, 0x22, 0xe5, 0x1f, 0x60, 0x03, 0x02, 0x03,     0x93, 0xf5, 0x1e, 0xd2, 0x34, 0x75, 0x34, 0xff, 0x75, 0x35, 0x0e, 0x75, 0x36, 0x55, 0x75, 0x37,     0x01, 0x12, 0x0d, 0x85, 0xe4, 0xff, 0xef, 0x25, 0xe0, 0x24, 0x4c, 0xf8, 0xe4, 0xf6, 0x08, 0xf6,     0x0f, 0xbf, 0x34, 0xf2, 0x90, 0x0e, 0x8c, 0xe4, 0x93, 0xff, 0xe5, 0x49, 0xc3, 0x9f, 0x50, 0x04,     0x7f, 0x05, 0x80, 0x02, 0x7f, 0xfb, 0x78, 0xbb, 0xa6, 0x07, 0x12, 0x0e, 0xbc, 0x40, 0x04, 0x7f,     0x03, 0x80, 0x02, 0x7f, 0x30, 0x78, 0xba, 0xa6, 0x07, 0xe6, 0x18, 0xf6, 0x08, 0xe6, 0x78, 0xb7,     0xf6, 0x78, 0xba, 0xe6, 0x78, 0xb8, 0xf6, 0x78, 0xbd, 0x76, 0x33, 0xe4, 0x08, 0xf6, 0x78, 0xb6,     0x76, 0x01, 0x75, 0x48, 0x02, 0x78, 0xb4, 0xf6, 0x08, 0xf6, 0x74, 0xff, 0x78, 0xbf, 0xf6, 0x08,     0xf6, 0x75, 0x1f, 0x01, 0x78, 0xba, 0xe6, 0x75, 0xf0, 0x05, 0xa4, 0xf5, 0x49, 0x12, 0x0a, 0xfd,     0xc2, 0x36, 0x22, 0x78, 0xb6, 0xe6, 0xd3, 0x94, 0x00, 0x40, 0x02, 0x16, 0x22, 0xe5, 0x1f, 0xb4,     0x05, 0x23, 0xe4, 0xf5, 0x1f, 0xc2, 0x01, 0x78, 0xb4, 0xe6, 0xfe, 0x08, 0xe6, 0xff, 0x78, 0x4c,     0xa6, 0x06, 0x08, 0xa6, 0x07, 0xa2, 0x36, 0xe4, 0x33, 0xf5, 0x3c, 0x90, 0x30, 0x28, 0xf0, 0x75,     0x1e, 0x10, 0xd2, 0x34, 0x22, 0xe5, 0x49, 0x75, 0xf0, 0x05, 0x84, 0x78, 0xba, 0xf6, 0x90, 0x0e,     0x85, 0xe4, 0x93, 0xff, 0x25, 0xe0, 0x24, 0x0a, 0xf8, 0xe6, 0xfc, 0x08, 0xe6, 0xfd, 0x78, 0xba,     0xe6, 0x25, 0xe0, 0x24, 0x4c, 0xf8, 0xa6, 0x04, 0x08, 0xa6, 0x05, 0xef, 0x12, 0x0e, 0xc3, 0xd3,     0x78, 0xb5, 0x96, 0xee, 0x18, 0x96, 0x40, 0x0d, 0x78, 0xba, 0xe6, 0x78, 0xb7, 0xf6, 0x78, 0xb4,     0xa6, 0x06, 0x08, 0xa6, 0x07, 0x90, 0x0e, 0x85, 0xe4, 0x93, 0x12, 0x0e, 0xc3, 0xc3, 0x78, 0xc0,     0x96, 0xee, 0x18, 0x96, 0x50, 0x0d, 0x78, 0xba, 0xe6, 0x78, 0xb8, 0xf6, 0x78, 0xbf, 0xa6, 0x06,     0x08, 0xa6, 0x07, 0x78, 0xb4, 0xe6, 0xfe, 0x08, 0xe6, 0xc3, 0x78, 0xc0, 0x96, 0xff, 0xee, 0x18,     0x96, 0x78, 0xc1, 0xf6, 0x08, 0xa6, 0x07, 0x90, 0x0e, 0x8e, 0xe4, 0x18, 0x12, 0x0e, 0xa1, 0x40,     0x02, 0xd2, 0x36, 0x78, 0xba, 0xe6, 0x08, 0x26, 0x08, 0xf6, 0xe5, 0x1f, 0x64, 0x01, 0x70, 0x4a,     0xe6, 0xc3, 0x78, 0xbe, 0x12, 0x0e, 0x97, 0x40, 0x05, 0x12, 0x0e, 0x92, 0x40, 0x39, 0x12, 0x0e,     0xba, 0x40, 0x04, 0x7f, 0xfe, 0x80, 0x02, 0x7f, 0x02, 0x78, 0xbb, 0xa6, 0x07, 0x78, 0xb7, 0xe6,     0x24, 0x03, 0x78, 0xbd, 0xf6, 0x78, 0xb7, 0xe6, 0x24, 0xfd, 0x78, 0xbe, 0xf6, 0x12, 0x0e, 0xba,     0x40, 0x06, 0x78, 0xbe, 0xe6, 0xff, 0x80, 0x04, 0x78, 0xbd, 0xe6, 0xff, 0x78, 0xbc, 0xa6, 0x07,     0x75, 0x1f, 0x02, 0x78, 0xb6, 0x76, 0x01, 0x02, 0x05, 0x59, 0xe5, 0x1f, 0x64, 0x02, 0x60, 0x03,     0x02, 0x05, 0x39, 0x78, 0xbc, 0xe6, 0xff, 0xc3, 0x78, 0xbe, 0x12, 0x0e, 0x98, 0x40, 0x08, 0x12,     0x0e, 0x92, 0x50, 0x03, 0x02, 0x05, 0x37, 0x12, 0x0e, 0xba, 0x40, 0x04, 0x7f, 0xff, 0x80, 0x02,     0x7f, 0x01, 0x78, 0xbb, 0xa6, 0x07, 0x78, 0xb7, 0xe6, 0x04, 0x78, 0xbd, 0xf6, 0x78, 0xb7, 0xe6,     0x14, 0x78, 0xbe, 0xf6, 0x18, 0x12, 0x0e, 0xbc, 0x40, 0x04, 0xe6, 0xff, 0x80, 0x02, 0x7f, 0x00,     0x78, 0xbd, 0xa6, 0x07, 0xd3, 0x08, 0xe6, 0x64, 0x80, 0x94, 0x80, 0x40, 0x04, 0xe6, 0xff, 0x80,     0x02, 0x7f, 0x00, 0x78, 0xbe, 0xa6, 0x07, 0xc3, 0x18, 0xe6, 0x64, 0x80, 0x94, 0xb3, 0x50, 0x04,     0xe6, 0xff, 0x80, 0x02, 0x7f, 0x33, 0x78, 0xbd, 0xa6, 0x07, 0xc3, 0x08, 0xe6, 0x64, 0x80, 0x94,     0xb3, 0x50, 0x04, 0xe6, 0xff, 0x80, 0x02, 0x7f, 0x33, 0x78, 0xbe, 0xa6, 0x07, 0x12, 0x0e, 0xba,     0x40, 0x06, 0x78, 0xbe, 0xe6, 0xff, 0x80, 0x04, 0x78, 0xbd, 0xe6, 0xff, 0x78, 0xbc, 0xa6, 0x07,     0x75, 0x1f, 0x03, 0x78, 0xb6, 0x76, 0x01, 0x80, 0x20, 0xe5, 0x1f, 0x64, 0x03, 0x70, 0x26, 0x78,     0xbc, 0xe6, 0xff, 0xc3, 0x78, 0xbe, 0x12, 0x0e, 0x98, 0x40, 0x05, 0x12, 0x0e, 0x92, 0x40, 0x09,     0x78, 0xb7, 0xe6, 0x78, 0xbc, 0xf6, 0x75, 0x1f, 0x04, 0x78, 0xbc, 0xe6, 0x75, 0xf0, 0x05, 0xa4,     0xf5, 0x49, 0x02, 0x0a, 0xfd, 0xe5, 0x1f, 0xb4, 0x04, 0x1f, 0x90, 0x0e, 0x8d, 0xe4, 0x78, 0xc1,     0x12, 0x0e, 0xa1, 0x40, 0x02, 0xd2, 0x36, 0x75, 0x1f, 0x05, 0x75, 0x34, 0xff, 0x75, 0x35, 0x0e,     0x75, 0x36, 0x59, 0x75, 0x37, 0x01, 0x12, 0x0d, 0x85, 0x22, 0xef, 0x8d, 0xf0, 0xa4, 0xa8, 0xf0,     0xcf, 0x8c, 0xf0, 0xa4, 0x28, 0xce, 0x8d, 0xf0, 0xa4, 0x2e, 0xfe, 0x22, 0xbc, 0x00, 0x0b, 0xbe,     0x00, 0x29, 0xef, 0x8d, 0xf0, 0x84, 0xff, 0xad, 0xf0, 0x22, 0xe4, 0xcc, 0xf8, 0x75, 0xf0, 0x08,     0xef, 0x2f, 0xff, 0xee, 0x33, 0xfe, 0xec, 0x33, 0xfc, 0xee, 0x9d, 0xec, 0x98, 0x40, 0x05, 0xfc,     0xee, 0x9d, 0xfe, 0x0f, 0xd5, 0xf0, 0xe9, 0xe4, 0xce, 0xfd, 0x22, 0xed, 0xf8, 0xf5, 0xf0, 0xee,     0x84, 0x20, 0xd2, 0x1c, 0xfe, 0xad, 0xf0, 0x75, 0xf0, 0x08, 0xef, 0x2f, 0xff, 0xed, 0x33, 0xfd,     0x40, 0x07, 0x98, 0x50, 0x06, 0xd5, 0xf0, 0xf2, 0x22, 0xc3, 0x98, 0xfd, 0x0f, 0xd5, 0xf0, 0xea,     0x22, 0xe8, 0x8f, 0xf0, 0xa4, 0xcc, 0x8b, 0xf0, 0xa4, 0x2c, 0xfc, 0xe9, 0x8e, 0xf0, 0xa4, 0x2c,     0xfc, 0x8a, 0xf0, 0xed, 0xa4, 0x2c, 0xfc, 0xea, 0x8e, 0xf0, 0xa4, 0xcd, 0xa8, 0xf0, 0x8b, 0xf0,     0xa4, 0x2d, 0xcc, 0x38, 0x25, 0xf0, 0xfd, 0xe9, 0x8f, 0xf0, 0xa4, 0x2c, 0xcd, 0x35, 0xf0, 0xfc,     0xeb, 0x8e, 0xf0, 0xa4, 0xfe, 0xa9, 0xf0, 0xeb, 0x8f, 0xf0, 0xa4, 0xcf, 0xc5, 0xf0, 0x2e, 0xcd,     0x39, 0xfe, 0xe4, 0x3c, 0xfc, 0xea, 0xa4, 0x2d, 0xce, 0x35, 0xf0, 0xfd, 0xe4, 0x3c, 0xfc, 0x22,     0x75, 0xf0, 0x08, 0x75, 0x82, 0x00, 0xef, 0x2f, 0xff, 0xee, 0x33, 0xfe, 0xcd, 0x33, 0xcd, 0xcc,     0x33, 0xcc, 0xc5, 0x82, 0x33, 0xc5, 0x82, 0x9b, 0xed, 0x9a, 0xec, 0x99, 0xe5, 0x82, 0x98, 0x40,     0x0c, 0xf5, 0x82, 0xee, 0x9b, 0xfe, 0xed, 0x9a, 0xfd, 0xec, 0x99, 0xfc, 0x0f, 0xd5, 0xf0, 0xd6,     0xe4, 0xce, 0xfb, 0xe4, 0xcd, 0xfa, 0xe4, 0xcc, 0xf9, 0xa8, 0x82, 0x22, 0xb8, 0x00, 0xc1, 0xb9,     0x00, 0x59, 0xba, 0x00, 0x2d, 0xec, 0x8b, 0xf0, 0x84, 0xcf, 0xce, 0xcd, 0xfc, 0xe5, 0xf0, 0xcb,     0xf9, 0x78, 0x18, 0xef, 0x2f, 0xff, 0xee, 0x33, 0xfe, 0xed, 0x33, 0xfd, 0xec, 0x33, 0xfc, 0xeb,     0x33, 0xfb, 0x10, 0xd7, 0x03, 0x99, 0x40, 0x04, 0xeb, 0x99, 0xfb, 0x0f, 0xd8, 0xe5, 0xe4, 0xf9,     0xfa, 0x22, 0x78, 0x18, 0xef, 0x2f, 0xff, 0xee, 0x33, 0xfe, 0xed, 0x33, 0xfd, 0xec, 0x33, 0xfc,     0xc9, 0x33, 0xc9, 0x10, 0xd7, 0x05, 0x9b, 0xe9, 0x9a, 0x40, 0x07, 0xec, 0x9b, 0xfc, 0xe9, 0x9a,     0xf9, 0x0f, 0xd8, 0xe0, 0xe4, 0xc9, 0xfa, 0xe4, 0xcc, 0xfb, 0x22, 0x75, 0xf0, 0x10, 0xef, 0x2f,     0xff, 0xee, 0x33, 0xfe, 0xed, 0x33, 0xfd, 0xcc, 0x33, 0xcc, 0xc8, 0x33, 0xc8, 0x10, 0xd7, 0x07,     0x9b, 0xec, 0x9a, 0xe8, 0x99, 0x40, 0x0a, 0xed, 0x9b, 0xfd, 0xec, 0x9a, 0xfc, 0xe8, 0x99, 0xf8,     0x0f, 0xd5, 0xf0, 0xda, 0xe4, 0xcd, 0xfb, 0xe4, 0xcc, 0xfa, 0xe4, 0xc8, 0xf9, 0x22, 0xeb, 0x9f,     0xf5, 0xf0, 0xea, 0x9e, 0x42, 0xf0, 0xe9, 0x9d, 0x42, 0xf0, 0xe8, 0x9c, 0x45, 0xf0, 0x22, 0xe8,     0x60, 0x0f, 0xef, 0xc3, 0x33, 0xff, 0xee, 0x33, 0xfe, 0xed, 0x33, 0xfd, 0xec, 0x33, 0xfc, 0xd8,     0xf1, 0x22, 0xe4, 0x93, 0xfc, 0x74, 0x01, 0x93, 0xfd, 0x74, 0x02, 0x93, 0xfe, 0x74, 0x03, 0x93,     0xff, 0x22, 0xe6, 0xfb, 0x08, 0xe6, 0xf9, 0x08, 0xe6, 0xfa, 0x08, 0xe6, 0xcb, 0xf8, 0x22, 0xec,     0xf6, 0x08, 0xed, 0xf6, 0x08, 0xee, 0xf6, 0x08, 0xef, 0xf6, 0x22, 0xa4, 0x25, 0x82, 0xf5, 0x82,     0xe5, 0xf0, 0x35, 0x83, 0xf5, 0x83, 0x22, 0xd0, 0x83, 0xd0, 0x82, 0xf8, 0xe4, 0x93, 0x70, 0x12,     0x74, 0x01, 0x93, 0x70, 0x0d, 0xa3, 0xa3, 0x93, 0xf8, 0x74, 0x01, 0x93, 0xf5, 0x82, 0x88, 0x83,     0xe4, 0x73, 0x74, 0x02, 0x93, 0x68, 0x60, 0xef, 0xa3, 0xa3, 0xa3, 0x80, 0xdf, 0x90, 0x38, 0x04,     0x78, 0x50, 0x12, 0x0c, 0x7f, 0x90, 0x38, 0x00, 0xe0, 0xfe, 0xa3, 0xe0, 0xfd, 0xed, 0xff, 0xc3,     0x12, 0x0c, 0x38, 0x90, 0x38, 0x10, 0x12, 0x0c, 0x2c, 0x90, 0x38, 0x06, 0x78, 0x52, 0x12, 0x0c,     0x7f, 0x90, 0x38, 0x02, 0xe0, 0xfe, 0xa3, 0xe0, 0xfd, 0xed, 0xff, 0xc3, 0x12, 0x0c, 0x38, 0x90,     0x38, 0x12, 0x12, 0x0c, 0x2c, 0xa3, 0xe0, 0xb4, 0x31, 0x07, 0x78, 0x50, 0x79, 0x50, 0x12, 0x0c,     0x95, 0x90, 0x38, 0x14, 0xe0, 0xb4, 0x71, 0x15, 0x78, 0x50, 0xe6, 0xfe, 0x08, 0xe6, 0x78, 0x02,     0xce, 0xc3, 0x13, 0xce, 0x13, 0xd8, 0xf9, 0x79, 0x51, 0xf7, 0xee, 0x19, 0xf7, 0x90, 0x38, 0x15,     0xe0, 0xb4, 0x31, 0x07, 0x78, 0x52, 0x79, 0x52, 0x12, 0x0c, 0x95, 0x90, 0x38, 0x15, 0xe0, 0xb4,     0x71, 0x15, 0x78, 0x52, 0xe6, 0xfe, 0x08, 0xe6, 0x78, 0x02, 0xce, 0xc3, 0x13, 0xce, 0x13, 0xd8,     0xf9, 0x79, 0x53, 0xf7, 0xee, 0x19, 0xf7, 0x79, 0x50, 0x12, 0x0c, 0x67, 0x09, 0x12, 0x0c, 0x67,     0xaf, 0x45, 0x12, 0x0c, 0x1d, 0x7d, 0x50, 0x12, 0x05, 0x9c, 0x78, 0x58, 0xa6, 0x06, 0x08, 0xa6,     0x07, 0xaf, 0x43, 0x12, 0x0c, 0x1d, 0x7d, 0x50, 0x12, 0x05, 0x9c, 0x78, 0x54, 0xa6, 0x06, 0x08,     0xa6, 0x07, 0xaf, 0x46, 0x78, 0x52, 0x12, 0x0c, 0x1f, 0x7d, 0x3c, 0x12, 0x05, 0x9c, 0x78, 0x5a,     0xa6, 0x06, 0x08, 0xa6, 0x07, 0xaf, 0x44, 0x7e, 0x00, 0x78, 0x52, 0x12, 0x0c, 0x21, 0x7d, 0x3c,     0x12, 0x05, 0x9c, 0x78, 0x56, 0xa6, 0x06, 0x08, 0xa6, 0x07, 0xc3, 0x78, 0x59, 0xe6, 0x94, 0x08,     0x18, 0xe6, 0x94, 0x00, 0x50, 0x05, 0x76, 0x00, 0x08, 0x76, 0x08, 0xc3, 0x78, 0x5b, 0xe6, 0x94,     0x08, 0x18, 0xe6, 0x94, 0x00, 0x50, 0x05, 0x76, 0x00, 0x08, 0x76, 0x08, 0x78, 0x58, 0x12, 0x0c,     0x54, 0xff, 0xd3, 0x78, 0x55, 0xe6, 0x9f, 0x18, 0xe6, 0x9e, 0x40, 0x0e, 0x78, 0x58, 0xe6, 0x13,     0xfe, 0x08, 0xe6, 0x78, 0x55, 0x12, 0x0c, 0x8a, 0x80, 0x04, 0x7e, 0x00, 0x7f, 0x00, 0x78, 0x5c,     0x12, 0x0c, 0x4c, 0xff, 0xd3, 0x78, 0x57, 0xe6, 0x9f, 0x18, 0xe6, 0x9e, 0x40, 0x0e, 0x78, 0x5a,     0xe6, 0x13, 0xfe, 0x08, 0xe6, 0x78, 0x57, 0x12, 0x0c, 0x8a, 0x80, 0x04, 0x7e, 0x00, 0x7f, 0x00,     0xe4, 0xfc, 0xfd, 0x78, 0x60, 0x12, 0x07, 0x4f, 0x78, 0x58, 0x12, 0x0c, 0x54, 0x78, 0x55, 0x26,     0xff, 0xee, 0x18, 0x36, 0xfe, 0x78, 0x64, 0x12, 0x0c, 0x4c, 0x78, 0x57, 0x26, 0xff, 0xee, 0x18,     0x36, 0xfe, 0xe4, 0xfc, 0xfd, 0x78, 0x68, 0x12, 0x07, 0x4f, 0x12, 0x0c, 0x5c, 0x78, 0x64, 0x12,     0x07, 0x42, 0xd3, 0x12, 0x07, 0x0e, 0x40, 0x08, 0x12, 0x0c, 0x5c, 0x78, 0x64, 0x12, 0x07, 0x4f,     0x78, 0x52, 0x12, 0x0c, 0x5e, 0x78, 0x68, 0x12, 0x07, 0x42, 0xd3, 0x12, 0x07, 0x0e, 0x40, 0x0a,     0x78, 0x52, 0x12, 0x0c, 0x5e, 0x78, 0x68, 0x12, 0x07, 0x4f, 0xe4, 0xfd, 0x78, 0x5f, 0x12, 0x0c,     0x77, 0x24, 0x01, 0x12, 0x0c, 0x40, 0x78, 0x63, 0x12, 0x0c, 0x77, 0x24, 0x02, 0x12, 0x0c, 0x40,     0x78, 0x67, 0x12, 0x0c, 0x77, 0x24, 0x03, 0x12, 0x0c, 0x40, 0x78, 0x6b, 0x12, 0x0c, 0x77, 0x24,     0x04, 0x12, 0x0c, 0x40, 0x0d, 0xbd, 0x05, 0xd4, 0xc2, 0x0e, 0xc2, 0x06, 0x22, 0x85, 0x08, 0x41,     0x90, 0x30, 0x24, 0xe0, 0xf5, 0x3d, 0xa3, 0xe0, 0xf5, 0x3e, 0xa3, 0xe0, 0xf5, 0x3f, 0xa3, 0xe0,     0xf5, 0x40, 0xa3, 0xe0, 0xf5, 0x3c, 0xd2, 0x33, 0xe5, 0x41, 0x12, 0x07, 0x67, 0x09, 0xb4, 0x03,     0x09, 0xb8, 0x04, 0x09, 0xbe, 0x05, 0x09, 0xc1, 0x06, 0x09, 0xc4, 0x07, 0x09, 0xcd, 0x08, 0x09,     0xde, 0x12, 0x09, 0xe0, 0x80, 0x09, 0xe5, 0x81, 0x0a, 0x43, 0x8f, 0x0a, 0x32, 0x90, 0x0a, 0x43,     0x91, 0x0a, 0x43, 0x92, 0x0a, 0x43, 0x93, 0x0a, 0x43, 0x94, 0x0a, 0x43, 0x98, 0x0a, 0x40, 0x9f,     0x00, 0x00, 0x0a, 0x5e, 0x12, 0x0e, 0xce, 0x22, 0x12, 0x0e, 0xce, 0xd2, 0x03, 0x22, 0xd2, 0x03,     0x22, 0xc2, 0x03, 0x22, 0xa2, 0x36, 0xe4, 0x33, 0xf5, 0x3c, 0x02, 0x0a, 0x43, 0xc2, 0x01, 0xc2,     0x02, 0xc2, 0x03, 0x12, 0x0d, 0x14, 0x75, 0x1e, 0x70, 0xd2, 0x34, 0x02, 0x0a, 0x43, 0x80, 0x4d,     0x12, 0x0f, 0x17, 0x80, 0x5e, 0x85, 0x3d, 0x43, 0x85, 0x3e, 0x44, 0xe5, 0x45, 0xc3, 0x13, 0xff,     0xe5, 0x43, 0xc3, 0x9f, 0x50, 0x02, 0x8f, 0x43, 0xe5, 0x46, 0xc3, 0x13, 0xff, 0xe5, 0x44, 0xc3,     0x9f, 0x50, 0x02, 0x8f, 0x44, 0xe5, 0x45, 0xc3, 0x13, 0xff, 0xfd, 0xe5, 0x43, 0x90, 0x0e, 0x7f,     0x12, 0x0e, 0xea, 0x40, 0x04, 0xee, 0x9f, 0xf5, 0x43, 0xe5, 0x46, 0xc3, 0x13, 0xff, 0xfd, 0xe5,     0x44, 0x90, 0x0e, 0x80, 0x12, 0x0e, 0xea, 0x40, 0x04, 0xee, 0x9f, 0xf5, 0x44, 0x12, 0x07, 0x8d,     0x80, 0x11, 0x85, 0x40, 0x46, 0x85, 0x3f, 0x45, 0x85, 0x3e, 0x44, 0x85, 0x3d, 0x43, 0x80, 0x03,     0x02, 0x07, 0x8d, 0x90, 0x30, 0x24, 0xe5, 0x3d, 0xf0, 0xa3, 0xe5, 0x3e, 0xf0, 0xa3, 0xe5, 0x3f,     0xf0, 0xa3, 0xe5, 0x40, 0xf0, 0xa3, 0xe5, 0x3c, 0xf0, 0x90, 0x30, 0x23, 0xe4, 0xf0, 0x22, 0xc0,     0xe0, 0xc0, 0x83, 0xc0, 0x82, 0xc0, 0xd0, 0x90, 0x3f, 0x0c, 0xe0, 0xf5, 0x32, 0xe5, 0x32, 0x30,     0xe3, 0x4c, 0x30, 0x35, 0x3e, 0x90, 0x60, 0x19, 0xe0, 0xf5, 0x0a, 0xa3, 0xe0, 0xf5, 0x0b, 0x90,     0x60, 0x1d, 0xe0, 0xf5, 0x14, 0xa3, 0xe0, 0xf5, 0x15, 0x30, 0x01, 0x06, 0x30, 0x32, 0x03, 0xd3,     0x80, 0x01, 0xc3, 0x92, 0x09, 0x30, 0x02, 0x06, 0x30, 0x32, 0x03, 0xd3, 0x80, 0x01, 0xc3, 0x92,     0x0a, 0x30, 0x32, 0x0c, 0x30, 0x03, 0x09, 0x20, 0x02, 0x06, 0x20, 0x01, 0x03, 0xd3, 0x80, 0x01,     0xc3, 0x92, 0x0b, 0x90, 0x30, 0x01, 0xe0, 0x44, 0x40, 0xf0, 0xe0, 0x54, 0xbf, 0xf0, 0xe5, 0x32,     0x30, 0xe1, 0x14, 0x30, 0x33, 0x11, 0x90, 0x30, 0x22, 0xe0, 0xf5, 0x08, 0xe4, 0xf0, 0x30, 0x00,     0x03, 0xd3, 0x80, 0x01, 0xc3, 0x92, 0x08, 0xe5, 0x32, 0x30, 0xe5, 0x12, 0x90, 0x56, 0xa1, 0xe0,     0xf5, 0x09, 0x30, 0x30, 0x09, 0x30, 0x05, 0x03, 0xd3, 0x80, 0x01, 0xc3, 0x92, 0x0d, 0x90, 0x3f,     0x0c, 0xe5, 0x32, 0xf0, 0xd0, 0xd0, 0xd0, 0x82, 0xd0, 0x83, 0xd0, 0xe0, 0x32, 0x90, 0x0e, 0x7d,     0xe4, 0x93, 0xfe, 0x74, 0x01, 0x93, 0xff, 0xc3, 0x90, 0x0e, 0x7b, 0x74, 0x01, 0x93, 0x9f, 0xff,     0xe4, 0x93, 0x9e, 0xfe, 0xe4, 0x8f, 0x3b, 0x8e, 0x3a, 0xf5, 0x39, 0xf5, 0x38, 0xab, 0x3b, 0xaa,     0x3a, 0xa9, 0x39, 0xa8, 0x38, 0xaf, 0x49, 0xfc, 0xfd, 0xfe, 0x12, 0x05, 0xf1, 0x12, 0x0e, 0xfc,     0xe4, 0x7b, 0xff, 0xfa, 0xf9, 0xf8, 0x12, 0x06, 0x7c, 0x12, 0x0e, 0xfc, 0x90, 0x0e, 0x69, 0xe4,     0x12, 0x0f, 0x11, 0x12, 0x0e, 0xfc, 0xe4, 0x85, 0x48, 0x37, 0xf5, 0x36, 0xf5, 0x35, 0xf5, 0x34,     0xaf, 0x37, 0xae, 0x36, 0xad, 0x35, 0xac, 0x34, 0xa3, 0x12, 0x0f, 0x11, 0x8f, 0x37, 0x8e, 0x36,     0x8d, 0x35, 0x8c, 0x34, 0xe5, 0x3b, 0x45, 0x37, 0xf5, 0x3b, 0xe5, 0x3a, 0x45, 0x36, 0xf5, 0x3a,     0xe5, 0x39, 0x45, 0x35, 0xf5, 0x39, 0xe5, 0x38, 0x45, 0x34, 0xf5, 0x38, 0xe4, 0xf5, 0x22, 0xf5,     0x23, 0x85, 0x3b, 0x31, 0x85, 0x3a, 0x30, 0x85, 0x39, 0x2f, 0x85, 0x38, 0x2e, 0x02, 0x0d, 0xc5,     0xad, 0x39, 0xac, 0x38, 0xfa, 0xf9, 0xf8, 0x12, 0x05, 0xf1, 0x8f, 0x3b, 0x8e, 0x3a, 0x8d, 0x39,     0x8c, 0x38, 0xab, 0x37, 0xaa, 0x36, 0xa9, 0x35, 0xa8, 0x34, 0x22, 0xef, 0x25, 0xe0, 0x24, 0x4c,     0xf8, 0xe6, 0xfc, 0x08, 0xe6, 0xfd, 0x22, 0x93, 0xff, 0xe4, 0xfc, 0xfd, 0xfe, 0x12, 0x05, 0xf1,     0x8f, 0x37, 0x8e, 0x36, 0x8d, 0x35, 0x8c, 0x34, 0x22, 0xf9, 0xc3, 0xe6, 0x97, 0x18, 0xe6, 0x19,     0x97, 0x22, 0xff, 0xa6, 0x06, 0x08, 0xa6, 0x07, 0x22, 0xe6, 0xfe, 0x08, 0xe6, 0xff, 0xe4, 0x8f,     0x37, 0x8e, 0x36, 0xf5, 0x35, 0xf5, 0x34, 0x22, 0xe6, 0xfe, 0x08, 0xe6, 0xff, 0xe4, 0x8f, 0x3b,     0x8e, 0x3a, 0xf5, 0x39, 0xf5, 0x38, 0x22, 0xe7, 0x96, 0xff, 0x19, 0xe7, 0x18, 0x96, 0x22, 0xff,     0xa6, 0x06, 0x08, 0xa6, 0x07, 0x78, 0x6c, 0xe6, 0xfe, 0x08, 0xe6, 0x22, 0x78, 0x4c, 0xe6, 0xfe,     0x08, 0xe6, 0x22, 0x78, 0xa7, 0xef, 0x26, 0xf6, 0x18, 0xe4, 0x36, 0xf6, 0x22, 0x78, 0x50, 0x7e,     0x00, 0xe6, 0xfc, 0x08, 0xe6, 0xfd, 0x12, 0x05, 0x8a, 0x7c, 0x00, 0x22, 0xe0, 0xa3, 0xe0, 0x75,     0xf0, 0x02, 0xa4, 0xff, 0xae, 0xf0, 0xc3, 0x08, 0xe6, 0x9f, 0xf6, 0x18, 0xe6, 0x9e, 0xf6, 0x22,     0xff, 0xe5, 0xf0, 0x34, 0x60, 0x8f, 0x82, 0xf5, 0x83, 0xec, 0xf0, 0x22, 0xe4, 0xfc, 0xfd, 0x12,     0x07, 0x4f, 0x78, 0x5a, 0xe6, 0xc3, 0x13, 0xfe, 0x08, 0xe6, 0x13, 0x22, 0x78, 0x50, 0xe6, 0xfe,     0x08, 0xe6, 0xff, 0xe4, 0xfc, 0xfd, 0x22, 0xe7, 0xc4, 0xf8, 0x54, 0xf0, 0xc8, 0x68, 0xf7, 0x09,     0xe7, 0xc4, 0x54, 0x0f, 0x48, 0xf7, 0x22, 0xe6, 0xfc, 0xed, 0x75, 0xf0, 0x04, 0xa4, 0x22, 0xe0,     0xfe, 0xa3, 0xe0, 0xfd, 0xee, 0xf6, 0xed, 0x08, 0xf6, 0x22, 0x13, 0xff, 0xc3, 0xe6, 0x9f, 0xff,     0x18, 0xe6, 0x9e, 0xfe, 0x22, 0xe6, 0xc3, 0x13, 0xf7, 0x08, 0xe6, 0x13, 0x09, 0xf7, 0x22, 0x75,     0x89, 0x03, 0x75, 0xa8, 0x01, 0x75, 0xb8, 0x04, 0x75, 0x34, 0xff, 0x75, 0x35, 0x0e, 0x75, 0x36,     0x15, 0x75, 0x37, 0x0d, 0x12, 0x0d, 0x85, 0x12, 0x00, 0x09, 0x12, 0x0f, 0x17, 0x12, 0x00, 0x06,     0xd2, 0x00, 0xd2, 0x33, 0xd2, 0xaf, 0x75, 0x34, 0xff, 0x75, 0x35, 0x0e, 0x75, 0x36, 0x49, 0x75,     0x37, 0x03, 0x12, 0x0d, 0x85, 0x30, 0x08, 0x09, 0xc2, 0x33, 0x12, 0x09, 0x5d, 0xc2, 0x08, 0xd2,     0x33, 0x30, 0x0b, 0x09, 0xc2, 0x35, 0x12, 0x00, 0x0e, 0xc2, 0x0b, 0xd2, 0x35, 0x30, 0x09, 0x09,     0xc2, 0x35, 0x12, 0x03, 0x0a, 0xc2, 0x09, 0xd2, 0x35, 0x30, 0x0e, 0x03, 0x12, 0x07, 0x8d, 0x30,     0x34, 0xd3, 0x90, 0x30, 0x29, 0xe5, 0x1e, 0xf0, 0xb4, 0x10, 0x05, 0x90, 0x30, 0x23, 0xe4, 0xf0,     0xc2, 0x34, 0x80, 0xc1, 0xe4, 0xf5, 0x49, 0x90, 0x0e, 0x77, 0x93, 0xff, 0xe4, 0x8f, 0x37, 0xf5,     0x36, 0xf5, 0x35, 0xf5, 0x34, 0xaf, 0x37, 0xae, 0x36, 0xad, 0x35, 0xac, 0x34, 0x90, 0x0e, 0x6a,     0x12, 0x0f, 0x11, 0x8f, 0x37, 0x8e, 0x36, 0x8d, 0x35, 0x8c, 0x34, 0x90, 0x0e, 0x72, 0x12, 0x07,     0x32, 0xef, 0x45, 0x37, 0xf5, 0x37, 0xee, 0x45, 0x36, 0xf5, 0x36, 0xed, 0x45, 0x35, 0xf5, 0x35,     0xec, 0x45, 0x34, 0xf5, 0x34, 0xe4, 0xf5, 0x22, 0xf5, 0x23, 0x85, 0x37, 0x31, 0x85, 0x36, 0x30,     0x85, 0x35, 0x2f, 0x85, 0x34, 0x2e, 0x12, 0x0d, 0xc5, 0xe4, 0xf5, 0x22, 0xf5, 0x23, 0x90, 0x0e,     0x72, 0x12, 0x0f, 0x05, 0x12, 0x0d, 0xc5, 0xe4, 0xf5, 0x22, 0xf5, 0x23, 0x90, 0x0e, 0x6e, 0x12,     0x0f, 0x05, 0x02, 0x0d, 0xc5, 0xae, 0x35, 0xaf, 0x36, 0xe4, 0xfd, 0xed, 0xc3, 0x95, 0x37, 0x50,     0x33, 0x12, 0x0f, 0x52, 0xe4, 0x93, 0xf5, 0x38, 0x74, 0x01, 0x93, 0xf5, 0x39, 0x45, 0x38, 0x60,     0x23, 0x85, 0x39, 0x82, 0x85, 0x38, 0x83, 0xe0, 0xfc, 0x12, 0x0f, 0x52, 0x74, 0x03, 0x93, 0x52,     0x04, 0x12, 0x0f, 0x52, 0x74, 0x02, 0x93, 0x42, 0x04, 0x85, 0x39, 0x82, 0x85, 0x38, 0x83, 0xec,     0xf0, 0x0d, 0x80, 0xc7, 0x22, 0xa2, 0xaf, 0x92, 0x31, 0xc2, 0xaf, 0xe5, 0x23, 0x45, 0x22, 0x90,     0x0e, 0x5d, 0x60, 0x0b, 0x12, 0x0f, 0x47, 0xe0, 0xf5, 0x2c, 0xe0, 0xf5, 0x2d, 0x80, 0x0f, 0x12,     0x0f, 0x47, 0xe5, 0x30, 0xf0, 0x90, 0x0e, 0x5f, 0x12, 0x0f, 0x47, 0xe5, 0x31, 0xf0, 0xa2, 0x31,     0x92, 0xaf, 0x22, 0x78, 0x7f, 0xe4, 0xf6, 0xd8, 0xfd, 0x75, 0x81, 0xcb, 0x02, 0x0c, 0x9f, 0x00,     0x11, 0x05, 0x25, 0x16, 0x33, 0x02, 0x50, 0x72, 0x6f, 0x66, 0x69, 0x74, 0x20, 0x20, 0x14, 0x00,     0x10, 0x00, 0x56, 0x40, 0x1a, 0x30, 0x29, 0x7e, 0x00, 0x30, 0x04, 0x20, 0xdf, 0x30, 0x05, 0x40,     0xbf, 0x50, 0x03, 0x00, 0xfd, 0x50, 0x27, 0x01, 0xfe, 0x60, 0x00, 0x11, 0x00, 0x3f, 0x05, 0x30,     0x00, 0x3f, 0x06, 0x22, 0x00, 0x3f, 0x01, 0x2a, 0x00, 0x3f, 0x02, 0x00, 0x00, 0x36, 0x06, 0x07,     0x00, 0x3f, 0x0b, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x30, 0x01, 0x40, 0xbf, 0x30, 0x01, 0x00,     0xbf, 0x30, 0x29, 0x70, 0x00, 0x3a, 0x00, 0x00, 0xff, 0x3a, 0x00, 0x00, 0xff, 0x36, 0x03, 0x36,     0x02, 0x41, 0x44, 0x58, 0x20, 0x18, 0x10, 0x0a, 0x04, 0x04, 0x00, 0x03, 0xff, 0x64, 0x00, 0x00,     0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x04, 0x06, 0x00, 0x03, 0x98, 0x00, 0xcc, 0x50,     0x3c, 0x28, 0x1e, 0x0c, 0x0c, 0x00, 0x00, 0x10, 0x0c, 0x10, 0x04, 0x0c, 0x6e, 0x06, 0x05, 0x00,     0xa5, 0x5a, 0x78, 0xbc, 0xe6, 0xd3, 0x08, 0xff, 0xe6, 0x64, 0x80, 0xf8, 0xef, 0x64, 0x80, 0x98,     0x22, 0x93, 0xff, 0x7e, 0x00, 0xe6, 0xfc, 0x08, 0xe6, 0xfd, 0x12, 0x05, 0x8a, 0x78, 0xbf, 0xe6,     0xfc, 0x08, 0xe6, 0xfd, 0xd3, 0xef, 0x9d, 0xee, 0x9c, 0x22, 0x78, 0xbb, 0xd3, 0xe6, 0x64, 0x80,     0x94, 0x80, 0x22, 0x25, 0xe0, 0x24, 0x0a, 0xf8, 0xe6, 0xfe, 0x08, 0xe6, 0xff, 0x22, 0xd2, 0x01,     0xc2, 0x02, 0xe4, 0xf5, 0x1f, 0xf5, 0x1e, 0xd2, 0x34, 0xd2, 0x32, 0xd2, 0x35, 0xd2, 0x01, 0xc2,     0x02, 0xf5, 0x1f, 0xf5, 0x1e, 0xd2, 0x34, 0xd2, 0x32, 0x22, 0x2d, 0xfd, 0xe4, 0x33, 0xfc, 0xe4,     0x93, 0xfe, 0xfb, 0xd3, 0xed, 0x9b, 0x74, 0x80, 0xf8, 0x6c, 0x98, 0x22, 0x8f, 0x3b, 0x8e, 0x3a,     0x8d, 0x39, 0x8c, 0x38, 0x22, 0x12, 0x07, 0x32, 0x8f, 0x31, 0x8e, 0x30, 0x8d, 0x2f, 0x8c, 0x2e,     0x22, 0x93, 0xf9, 0xf8, 0x02, 0x07, 0x1f, 0x90, 0x0e, 0x81, 0x12, 0x07, 0x32, 0x8f, 0x46, 0x8e,     0x45, 0x8d, 0x44, 0x8c, 0x43, 0xd2, 0x06, 0x30, 0x06, 0x03, 0xd3, 0x80, 0x01, 0xc3, 0x92, 0x0e,     0x22, 0xc0, 0xe0, 0xc0, 0x83, 0xc0, 0x82, 0x90, 0x3f, 0x0d, 0xe0, 0xf5, 0x33, 0xe5, 0x33, 0xf0,     0xd0, 0x82, 0xd0, 0x83, 0xd0, 0xe0, 0x32, 0xe4, 0x93, 0xfe, 0x74, 0x01, 0x93, 0xf5, 0x82, 0x8e,     0x83, 0x22, 0x8f, 0x82, 0x8e, 0x83, 0x75, 0xf0, 0x04, 0xed, 0x02, 0x07, 0x5b,  };void OV5640_FOCUS_AD5820_Init(void){    u8  state=0x8F;    u32 iteration = 100;    u16 totalCnt = 0;     printf("OV5640_FOCUS_AD5820_Init\n");         IIC_WR_Reg_16bit(0x3000, 0x20);    totalCnt = sizeof(OV5640_AF_FW);     printf("Total Count = %d\n", totalCnt);//  写入自动对焦固件 Brust mode    OV5640_WriteFW(OV5640_AF_FW, totalCnt);    IIC_WR_Reg_16bit(0x3022, 0x00);    IIC_WR_Reg_16bit(0x3023, 0x00);    IIC_WR_Reg_16bit(0x3024, 0x00);    IIC_WR_Reg_16bit(0x3025, 0x00);    IIC_WR_Reg_16bit(0x3026, 0x00);    IIC_WR_Reg_16bit(0x3027, 0x00);    IIC_WR_Reg_16bit(0x3028, 0x00);    IIC_WR_Reg_16bit(0x3029, 0xFF);    IIC_WR_Reg_16bit(0x3000, 0x00);    IIC_WR_Reg_16bit(0x3004, 0xFF);    IIC_WR_Reg_16bit(0x0000, 0x00);    IIC_WR_Reg_16bit(0x0000, 0x00);    IIC_WR_Reg_16bit(0x0000, 0x00);    IIC_WR_Reg_16bit(0x0000, 0x00);    //    Delay(100);    do {        state = (u8)IIC_RD_Reg_16bit(0x3029);        printf("when init af, state=0x%x\n",state);         vTaskDelay(pdMS_TO_TICKS(10));        if (iteration-- == 0)        {            printf("[OV5640]STA_FOCUS state check ERROR!!, state=0x%x\n",state);            break;        }    }     while(state!=0x70);        OV5640_FOCUS_AD5820_Check_MCU();    return;    }   /*  OV5640_FOCUS_AD5820_Init  *///set constant focusvoid OV5640_FOCUS_AD5820_Constant_Focus(void){    u8 state = 0x8F;    u32 iteration = 300;//    //send idle command to firmware//    IIC_WR_Reg_16bit(0x3023,0x01);//    IIC_WR_Reg_16bit(0x3022,0x08);//    iteration = 300;//    do {//     state = (u8)IIC_RD_Reg_16bit(0x3023);//        if (iteration-- == 0)//        {////            RETAILMSG(1, (TEXT("[OV5640]AD5820_Single_Focus time out !!0x%x \r\n")), state);//            CAMERA_DEBUG("[OV5640]AD5820_Single_Focus time out !! %x\n",state);//            return ;//        }   //        Delay(10);//    } while(state!=0x00);     //send constant focus mode command to firmware    IIC_WR_Reg_16bit(0x3023,0x01);    IIC_WR_Reg_16bit(0x3022,0x04);    iteration = 5000;    do {     state = (u8)IIC_RD_Reg_16bit(0x3023);        if (iteration-- == 0)        {//            RETAILMSG(1, (TEXT("[OV5640]AD5820_Single_Focus time out II\r\n")));            printf("[OV5640]AD5820_Single_Focus time out !! %x\n",state);            return ;        }        vTaskDelay(pdMS_TO_TICKS(10));    } while(state!=0x00);//0x0 : focused 0x01: is focusing    return;}void OV5640_FOCUS_AD5820_Single_Focus(){         u8 state = 0x8F;    u8 state_ack = 0x8F;    u8 state_cmd = 0x8F;    u32 iteration = 300;    printf("OV5640_FOCUS_AD5820_Single_Focus\n");//1.update zone    //OV5640_FOCUS_AD5820_Update_Zone();//2.change focus window    //OV5640_FOCUS_AD5820_Set_AF_Window_to_IC();//3.update zone    //OV5640_FOCUS_AD5820_Update_Zone();//4.send single focus mode command to firmware    IIC_WR_Reg_16bit(0x3023,0x01);    IIC_WR_Reg_16bit(0x3022,0x03);    printf("after single focus  \n");//5.after sigle focus cmd, check the STA_FOCUS until S_FOCUSED 0x10    iteration = 1000;      do{        state = (u8)IIC_RD_Reg_16bit(0x3023);        printf("test,Single state = 0x%x,state_ack=0x%x,state_cmd=0x%x\n",state,state_ack,state_cmd);                if(state == 0x00)        {//            state = (u8)IIC_RD_Reg_16bit(0x3029);//            if(state == 0x10) //           {                   printf("single focused!\n");                break; //           }        }        vTaskDelay(pdMS_TO_TICKS(10));        iteration --;    }while(iteration);    return;}void OV5640_FOCUS_AD5820_Pause_Focus(){    u8 state = 0x8F;    u32 iteration = 300;    //send idle command to firmware    IIC_WR_Reg_16bit(0x3023,0x01);    IIC_WR_Reg_16bit(0x3022,0x06);    iteration = 100;      do{        state = (u8)IIC_RD_Reg_16bit(0x3023);                if(state == 0x00)        {            printf("idle!\n");            break;        }        vTaskDelay(pdMS_TO_TICKS(10));        iteration --;    }while(iteration);}//static void OV5640_FOCUS_AD5820_Cancel_Focus()//{//    u8 state = 0x8F;//    u32 iteration = 300;//    CAMERA_DEBUG("OV5640_FOCUS_AD5820_Cancel_Focus\n");//    //send idle command to firmware//    IIC_WR_Reg_16bit(0x3023,0x01);//    IIC_WR_Reg_16bit(0x3022,0x08);////    iteration = 100;  //    do{//        state = (u8)IIC_RD_Reg_16bit(0x3023);//        if(state == 0x00)//    {//            CAMERA_DEBUG("idle!\n");//            break;//    }//        Delay(10);//        iteration --;////    }while(iteration);////}static void OV5640_FOCUS_AD5820_Check_MCU(void){    int i = 0;        u8 check[13] = {0x00};//mcu on    check[0] = IIC_RD_Reg_16bit(0x3000);    check[1] = IIC_RD_Reg_16bit(0x3004);//soft reset of mcu    check[2] = IIC_RD_Reg_16bit(0x3f00);//afc on    check[3] = IIC_RD_Reg_16bit(0x3001);    check[4] = IIC_RD_Reg_16bit(0x3005);//gpio1,gpio2    check[5] = IIC_RD_Reg_16bit(0x3018);    check[6] = IIC_RD_Reg_16bit(0x301e);    check[7] = IIC_RD_Reg_16bit(0x301b);    check[8] = IIC_RD_Reg_16bit(0x3042);//y0    check[9] = IIC_RD_Reg_16bit(0x3018);    check[10] = IIC_RD_Reg_16bit(0x301e);    check[11] = IIC_RD_Reg_16bit(0x301b);    check[12] = IIC_RD_Reg_16bit(0x3042);    for(i = 0; i &lt; 13; i++)    printf("check[%d]=0x%x\n", i, check[i]);}void OV5640_AUTO_FOCUS(void){   OV5640_FOCUS_AD5820_Init();   OV5640_FOCUS_AD5820_Constant_Focus();}</code></pre><p>注：仍待后续更新~&nbsp;</p><p>参考了野火的OV5640相关资料。</p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>学习 OV5640 GD32 DCI</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MicroPython】基于ESP32S3+MicroPython固件的初步开发</title>
    <link href="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/"/>
    <url>/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;什么是&nbsp;<code>MicroPython</code>&nbsp;固件？它是指运行在&nbsp;<code>ESP32</code>&nbsp;上的一段代码，功能为将你写的&nbsp;<code>python</code>&nbsp;代码翻译成&nbsp;<code>ESP32</code>&nbsp;可以运行的机器码，也称之为&nbsp;<code>python</code>&nbsp;解释器。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;基于 ESP32S3 与 MicroPython 固件进行初步开发，不仅能让开发者快速掌握微控制器的基本操作，还能为后续更复杂的物联网项目打下坚实的基础。本文将围绕这一开发组合，从基础环境搭建到简单功能实现，逐步引导读者踏入 ESP32S3+MicroPython 开发的世界，帮助读者开启物联网开发的奇妙之旅。</p><h1>一、ESP32S3的MicroPython固件烧录</h1><h2>1.获取固件</h2><p>登录<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="MicroPython官网" href="https://micropython.org/download/" title="MicroPython官网">MicroPython官网</a>（<code>https://micropython.org/download/</code>）下载，下拉并选中&nbsp;<code>ESP32-S3</code>&nbsp;如下图所示：</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/1b39d1084a1749319fbf77c9a892f671.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/534aaae1909c42c9a5e45dc637f42719.png"></p><p>选择最新<strong>&nbsp;<code>bin</code></strong>&nbsp;文件，并下载</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/0111e008fdae4999a45961d572ada937.png"></p><h2>2.获取Flash工具</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Flash 下载工具用户指南 - ESP32 - — ESP 测试工具 latest 文档" href="https://docs.espressif.com/projects/esp-test-tools/zh_CN/latest/esp32/production_stage/tools/flash_download_tool.html" title="Flash 下载工具用户指南 - ESP32 - — ESP 测试工具 latest 文档">Flash 下载工具用户指南 - ESP32 - &mdash; ESP 测试工具 latest 文档</a></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/6295ad2c176443229a5afa87afa4022e.png"></p><h2>3.安装CH340系列的串口驱动</h2><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="CH341SER.EXE - 南京沁恒微电子股份有限公司" href="https://www.wch.cn/downloads/CH341SER_EXE.html" title="CH341SER.EXE - 南京沁恒微电子股份有限公司">CH341SER.EXE - 南京沁恒微电子股份有限公司</a></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/d44b52e38fc145a384fb18ac9578f812.png"></p><p>&nbsp;<img alt="" height="832" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/80d8af8eb57845dc99e8f8a1dcaa1261.png" width="1669" /></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/533b37dddfb84bc9b7c00e8372b3f8f0.png"></p><h2>4.TypeC数据线接上TTL转USB接口</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/0ef4caba5d694844af74bd914d470a9c.jpeg"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/5d901d537af142e389e7af6839fb99e3.jpeg"></p><h2>5.使用Flash烧写工具（还有另外两种方法）</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/11c2c3e9cad04303bb045bf0ff2e5046.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/797ad205d3a746b2bb015046ee761640.png"></p><p>进入界面</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/7a075ffb0445406ab17a371ccaa72824.png"></p><p><span style="color:#fe2c24">注：其他方法</span></p><p><span style="color:#fe2c24">方法一：官方有推荐的固件烧写安装方法</span><br /><img alt="" height="821" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/ce26e3c8769d48fea864fd22850fd563.png" width="779" /></p><p><span style="color:#fe2c24">方法二：使用Thonny内置更新固件工具</span></p><p>（1）点击右下角，点击配置解释器</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/c5c7d6806c4c4d05bd1e428624aba142.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/4384302ea1864d9d9e7f42e3043bb0bd.png"></p><p>（2）点击解释器选项</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/49f23b3012a04e80ba3448ba8002a497.png"></p><p>（3） 选择类型ESP32，并点击右下角的安装或更新</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/8cce23f5c17942919c3df7088d5d1cd5.png"></p><p>（4）点击三线按钮选择第一个选项，选择烧录我们下载的本地MicroPython固件（镜像）</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/bd108e134e224f4b98af35d619533f38.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/c3fa07e32d76479ba5d517e66be95097.png"></p><p>（5） 烧录固件</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/d7742457900e4a78a35992271bb33ef2.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/053c4868674c46efbbefab0bb8bf25ed.png"></p><p>Done完成</p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/91250f2268f6469f9e12a5fe87f081a4.png"></p><h2>6.点击第一行的三个点的地方选择固件</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/62c28c07b9ea4307bc5c2d4d5ad7bbea.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/3b6228c2aebc4a82aafcf6ab5a42758e.png"></p><h2>7.配置如下：</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/cf7a6ef4e6a24427a238ac710cf6f3a1.png"></p><h2>8.点击ERASE，先擦除</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/88ca4c4b08e04fa3a3c99fb6927d5a9b.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/95a5167c87cb458c9c7080c10105fe21.png"></p><h2>9.点击START，开始烧写</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/0af81f68ab274c3fa27016f3ea56ebd3.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/fe53a658f19e4e83849a7ab73cbcd0dc.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/cda24b79d4af41a69b9b6eb87567dfe2.png"></p><p>固件烧录完成</p><h1>二、基于Thonny的ESP32S3开发环境配置</h1><h2>1.安装 Thonny IDE 软件 并配置编译环境</h2><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Thonny, Python IDE for beginners" href="https://thonny.org/" title="Thonny, Python IDE for beginners"><span class="link-card-box" contenteditable="false"><span class="link-title">Thonny, Python IDE for beginners</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://thonny.org/</span></span></a></p><h2>2.下的Windows版本&nbsp;</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/770edc460985432e92547af050d0a5fe.png"></p><h2>3. 配置解释器</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/b80d7abadac04755a56a2fd8e9333ee9.png"></p><h2>4.出现Shell控制台，左下角出现boot.py，表示已同步连接上了ESP32S3</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/cd51052a65d14a3489156ba756b4b943.png"></p><h2>&nbsp;5.查看固件的内置的功能（help()）</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/bd481f2509ec421a980da074b22ce07c.png"></p><p><strong><span style="color:#fe2c24">help()说明：</span></strong></p><p>在 ESP32 上运行的 MicroPython 环境中，<code>help()</code>命令是获取交互式帮助的重要工具。上述输出展示了 MicroPython 的基础功能和使用方法，下面为你详细解释：</p><h3>1. 硬件控制（<code>machine</code>模块）</h3><p>这部分介绍了借助<code>machine</code>模块对 ESP32 硬件资源进行操控的方法：</p><p>python</p><p>运行</p><pre><code class="language-cpp">import machine# 配置GPIO引脚12为输出模式，然后输出高电平pin12 = machine.Pin(12, machine.Pin.OUT)pin12.value(1)# 配置GPIO引脚13为输入模式，并且启用上拉电阻，之后读取其电平pin13 = machine.Pin(13, machine.Pin.IN, machine.Pin.PULL_UP)print(pin13.value())# 配置I2C总线，使用GPIO21作为时钟线（SCL），GPIO22作为数据线（SDA）i2c = machine.I2C(scl=machine.Pin(21), sda=machine.Pin(22))i2c.scan()                # 扫描I2C总线上的设备i2c.writeto(addr, b'1234') # 向指定地址的设备写入数据i2c.readfrom(addr, 4)      # 从指定地址的设备读取4字节数据</code></pre><h3>2. WiFi 网络配置（<code>network</code>模块）</h3><p>这里说明了如何利用<code>network</code>模块来配置 ESP32 的 WiFi 连接：</p><p>python运行</p><pre><code>import network# 启用STA模式（即作为客户端连接到WiFi）sta_if = network.WLAN(network.WLAN.IF_STA); sta_if.active(True)sta_if.scan()                             # 扫描可用的WiFi接入点sta_if.connect("&lt;AP_name&gt;", "&lt;password&gt;") # 连接到指定的WiFista_if.isconnected()                      # 检查是否成功连接</code></pre><h3>3. REPL 控制命令</h3><p>REPL（交互式解释器）的控制命令如下，这些命令在空行输入时有效：</p><ul><li><strong>CTRL - A</strong>：进入<strong>raw REPL 模式</strong>。在此模式下，键盘输入会直接传输到设备，不会被本地终端处理，通常用于上传文件。</li><li><strong>CTRL - B</strong>：进入<strong>normal REPL 模式</strong>，也就是普通的交互式解释器模式。</li><li><strong>CTRL - C</strong>：中断正在运行的程序，可用于终止无限循环。</li><li><strong>CTRL - D</strong>：执行<strong>软复位</strong>，会重新启动 MicroPython 解释器。</li><li><strong>CTRL - E</strong>：进入<strong>粘贴模式</strong>，适合粘贴多行代码，避免逐行执行。</li></ul><h3>4. 进一步帮助</h3><ul><li><strong><code>help(obj)</code></strong>：获取特定对象（如模块、函数）的详细帮助信息。例如：<code>help(machine.Pin)</code>。</li><li><strong><code>help(&#39;modules&#39;)</code></strong>：查看所有可用模块的列表。</li></ul><h1>三、基于Thonny+MicroPython+ESP32S3的初步程序开发</h1><h2>1.控制台点灯</h2><p>电路方面是低电平点亮</p><pre><code class="language-cpp">&gt;&gt;&gt; import machine&gt;&gt;&gt; led1 = machine.Pin(1, machine.Pin.OUT)&gt;&gt;&gt; led1.value(1)&gt;&gt;&gt; led1.value(0)</code></pre><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/c8825f9410ef400a85aa60eb0489809e.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/9655aa8797d049a4bae1faf44c025b5e.jpeg"></p><h2>2.编写测试程序</h2><pre><code class="language-python">import machineimport uosimport gcimport timedef print_system_info():    """打印ESP32S3的系统信息"""        # Flash信息    fs_stat = uos.statvfs('/')    total_flash = fs_stat[0] * fs_stat[2]    free_flash = fs_stat[0] * fs_stat[3]        # SRAM信息    allocated_ram = gc.mem_alloc()    free_ram = gc.mem_free()    total_ram = allocated_ram + free_ram        # 时钟频率    cpu_freq = machine.freq()        # 打印信息    print("=" * 30)    print("ESP32S3 系统信息")    print("=" * 30)    print(f"Flash: 总空间 {total_flash / 1024:.2f} KB, 可用 {free_flash / 1024:.2f} KB")    print(f"SRAM: 总空间 {total_ram / 1024:.2f} KB, 已用 {allocated_ram / 1024:.2f} KB, 空闲 {free_ram / 1024:.2f} KB")    print(f"CPU: 时钟频率 {cpu_freq / 1000000:.2f} MHz")    print("=" * 30)def led1_toggle():    """控制LED闪烁"""    led1.value(1)         # 点亮LED    time.sleep_ms(100)    # 延时100毫秒    led1.value(0)         # 熄灭LED    time.sleep_ms(100)    # 延时100毫秒def main():    """主函数，程序的入口点"""    global led1  # 声明led1为全局变量，以便在其他函数中使用        # 初始化硬件    led1 = machine.Pin(1, machine.Pin.OUT)        # 打印系统信息    print_system_info()        # 主循环    try:        while True:            led1_toggle()    except KeyboardInterrupt:        print("\n程序已停止")        led1.value(0)  # 确保LED在程序退出时熄灭# 程序入口点if __name__ == '__main__':    main()</code></pre><h2>3.ctrl+s保存</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/905c00ff86ee448384931ed73028d6d9.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/a35adfb0f349448fbe6cdd36a15f32c1.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/9d5ff01f6ec14f42b1cf34c2019df313.png"></p><h2>4.编译运行</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/bd06f5b9b7d846629feb35ee9d2ef219.png"></p><h2>5.实验效果</h2><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/46a026152caa481bb1f9c37216e13ec8.png"></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/b42d07065654446b86099f4ef0da8697.gif"></p><p><strong>MicroPyhton学习网址：</strong></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="MicroPython 文档— MicroPython中文 1.17 文档" href="http://www.micropython.com.cn/en/latet/index-2.html" title="MicroPython 文档— MicroPython中文 1.17 文档">MicroPython 文档&mdash; MicroPython中文 1.17 文档</a></p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="官方最新文档连接 " href="https://docs.micropython.org/en/latest/" title="官方最新文档连接 ">官方最新文档连接&nbsp;</a></p><p><img src="/2025/07/23/%E3%80%90MicroPython%E3%80%91%E5%9F%BA%E4%BA%8EESP32S3+MicroPython%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%9D%E6%AD%A5%E5%BC%80%E5%8F%91/85f8a44af0774439af4164c0e82c05a8.png"></p>]]></content>
    
    
    <categories>
      
      <category>MicroPython学习专栏 SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机 嵌入式硬件 ESP32 Thonny MicroPython</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【RK3566】适用于萌新与小白的立创泰山派到手初体验速通教程</title>
    <link href="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/"/>
    <url>/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言</strong></p><p>本文目前只涉及到了<strong>立创泰山派到手后的速通验货过程</strong>，后面的虚拟机内的编译过程演示请等待后续更新&middot;&middot;&middot;&middot;&middot;&middot;</p><h1>一、以<strong>2G+16G版本</strong>的<strong>立创泰山派</strong>为例的<strong>速通验货过程</strong></h1><h2>1.到手后拆开包装，仔细有没有因为检查运输导致出现的物理损坏与硬件是否齐全。</h2><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/dea6ea56ff184d17b46b4a2770b72222.jpeg"></p><h2>2.2G+16G版本的立创泰山派出厂时，就在EMMC里刷好了Android系统，利用已刷的Android系统进行初步验证。</h2><h3>（1）接入显示设备查看Android系统是否运行正常，如果有带HDMI接口的显示器设备的读者使用HDMI转miniHDMI的接口将其与显示器连接起来，然后再上电！但是，如果没有mini屏幕和显示器的读者，因为是安卓系统所以可以使用远程桌面访问工具进行验证。</h3><p>显示器：</p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/eea99de4cc6a4088afe5c012843b53a7.jpeg"></p><p>远程桌面：&nbsp;</p><p>远程桌面访问就是ADB调试口，一定要用typeC-USB连接电脑。</p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/fb656ab6212f46e683307390bfcb6f38.png"></p><p>查看是否接入成功。&nbsp;</p><p>&nbsp;<img alt="" height="50" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/6252337f920d47828abc5792fe7431a4.png" width="281" /></p><p>然后，去立创官方那里下载资料，在\立创&middot;泰山派开发板资料\第07章.【立创&middot;泰山派】开发工具的文件夹下，就使用scrcpy工具，直接点击scrcpy.exe运行就可以看到界面了，但是要注意查看开发板的RGB灯正常循环点亮才是系统正常运行。</p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/6cbbffd02b5942bfb892d871f67e47b1.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/247f46d69801499c8e83f641d65507dd.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/b5d5f861b77340d69464bd5d6bda6a7b.jpeg"></p><h3>（2）供电说明：将一根具有供电和数据传输的typeC数据线与开发板的typeC-USB口相连接，建议最好使用电源转接板进行稳定供电。注意：泰山派有两种供电方式分别是通过typec供电与外接电源座供电，如果使用typeC接电脑的情况下不建议再接外接电源座共同供电，避免意外造成电脑损伤，后果需自行承担。</h3><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/1c6e4b9964da4d6d90d969315cf5aece.jpeg"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/1f0e3fd929dd4da6b7b85d3a63369c65.jpeg"></p><p>RGB循环点亮表示系统运行正常。</p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/b5d5f861b77340d69464bd5d6bda6a7b.jpeg"></p><h2>3.烧录Ubuntu系统镜像</h2><h3>（一）将其与电脑连接起来</h3><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/966a6a6fb85046038650b552a9cf25d7.jpeg"></p><h3 style="background-color:transparent">（二）打开烧录工具，并选择官方已编译好的镜像进行烧写下载</h3><p><span style="background-color:#f9eda6">注：烧写官方的系统进入，如果需要用户名和密码，去\立创&middot;泰山派开发板资料\第06章.【立创&middot;泰山派】系统镜像里找对应的用户名和密码</span></p><h4>（1）下载相应的驱动，\立创&middot;泰山派开发板资料\第07章.【立创&middot;泰山派】开发工具的DriverAssitant_v5.1.1安装驱动</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/8c0df9ddd0a244c4aad43a1d935e7f7a.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/5a0b165b525645568c4339671f4061ac.png"></p><h4>（2）\立创&middot;泰山派开发板资料\第07章.【立创&middot;泰山派】开发工具的RKDevTool_Release_v2.92</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/2a8e90d1044d4a5cadc5168b6ba777a2.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/207f1cc1958047c19eae07b2df97b94f.png"></p><h4>（3）先一直按着REC，再点按RST，然后松开REC，就会识别到Loader设备，选择升级固件</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/47033218b1cd4693bb13c6cb3f785d52.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/f59aecf9151c4e90a698e39b5365e300.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/835a5e45fd1e4b14b99ed81dcf72e2ca.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/e5a4d8053baa4acc9494e12707617b63.png"></p><h4>（4）点击&ldquo;固件&rdquo;按钮，接着选择镜像，点击打开</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/7806a94d2c55462fa5f16efcedba92f2.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/525dd1a85d584fe8a2e863f6f1fd1917.png"></p><h4>（5）点击升级按钮</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/13ac3ec77cbc4ef98ba76bf0c588e3e6.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/a7eea0750aeb4a26a0350cd3f6842eac.png"></p><p>RGB灯光正常闪烁，下载成功：</p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/88dd7bf4653a41b4ba877f49fdfbcc2b.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/e17505787ba2480b89e6f2e63a469b29.jpeg"></p><h4>（6）串口连接，5v不连是因为立创在内部已经连接</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/43b84995366243f6a385c89fe9c1f542.jpeg"></p><h4>（7）使用MobaXterm，创建串口会话，注意：波特率一定是1500000</h4><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/9ed7ebbfefa641d096118ab704f69202.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/874870fc358f457fbb675e837e3e3aff.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/0278ee3a251b4497be02c00b0b9124f4.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/671bc019a87546109bb96ad8a6e29a0e.png"></p><h4>（8）命令测试</h4><pre><code class="language-cpp">root@localhost:~# iduid=0(root) gid=0(root) groups=0(root)root@localhost:~# ls -altotal 28drwx------  3 root root 4096 Nov 30  2023 .drwxr-xr-x 25 root root 4096 Jul 22  2025 ..-rw-------  1 root root 5843 Nov 30  2023 .bash_history-rw-r--r--  1 root root 3106 Dec  5  2019 .bashrcdrwx------  3 root root 4096 Jul 22  2025 .cache-rw-r--r--  1 root root  161 Dec  5  2019 .profileroot@localhost:~# cd /[  116.056857] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 4, bssidx: 0root@localhost:/# ls -al\total 86drwxr-xr-x  25 root  root   4096 Jul 22  2025 .drwxr-xr-x  25 root  root   4096 Jul 22  2025 ..lrwxrwxrwx   1 root  root      7 Feb 21  2022 bin -&gt; usr/bindrwxr-xr-x   2 root  root   4096 Nov 30  2023 bootlrwxrwxrwx   1 root  root      8 Nov 30  2023 data -&gt; userdatadrwxr-xr-x  13 root  root   4060 Mar 27 17:55 devdrwxrwxr-x 128 lckfb lckfb  4096 Jul 22  2025 etcdrwxr-xr-x   3 root  root   4096 Nov 30  2023 homelrwxrwxrwx   1 root  root      7 Feb 21  2022 lib -&gt; usr/libdrwx------   2 root  root  16384 Nov 30  2023 lost+founddrwxr-xr-x   2 root  root   4096 Feb 21  2022 mediadrwxr-xr-x   4 root  root   4096 Nov 30  2023 mntdrwxr-xr-x   3 root  root   1024 Nov 15  2023 oemdrwxr-xr-x   2 root  root   4096 Feb 21  2022 optdrwxr-xr-x  24 root  root   4096 Nov 30  2023 packagesdr-xr-xr-x 230 root  root      0 Jan  1  1970 procdrwxr-xr-x  17 root  root   4096 Nov 30  2023 rockchip-testdrwx------   3 root  root   4096 Nov 30  2023 rootdrwxr-xr-x  19 root  root    600 Mar 27 17:55 runlrwxrwxrwx   1 root  root      8 Feb 21  2022 sbin -&gt; usr/sbinlrwxrwxrwx   1 root  root     10 Nov 30  2023 sdcard -&gt; mnt/sdcarddrwxr-xr-x   2 root  root   4096 Jul 22  2025 snapdrwxr-xr-x   2 root  root   4096 Feb 21  2022 srvdr-xr-xr-x  15 root  root      0 Mar 27 17:55 sysdrwxr-xr-x   4 root  root   4096 Nov 30  2023 systemdrwxrwxrwt  13 root  root    300 Mar 27 17:56 tmplrwxrwxrwx   1 root  root     10 Nov 30  2023 udisk -&gt; media/usb0drwxr-xr-x   4 root  root   1024 Jul 22  2025 userdatadrwxr-xr-x  11 lckfb lckfb  4096 Mar 27 17:55 usrdrwxr-xr-x  13 root  root   4096 Nov 30  2023 vardrwxr-xr-x   3 root  root   4096 Nov 30  2023 vendorroot@localhost:/#</code></pre><h4>（9）连接手机热点，最好把开发板的天线接上</h4><p>命令：</p><pre><code class="language-cpp">#检查网络设备状态root@localhost:/# nmcli device status#扫描可用 WiFi 网络root@localhost:/# nmcli device wifi list#连接到 WiFiroot@localhost:/# nmcli device wifi connect "你的WiFi名称" password "你的WiFi密码"</code></pre><p>效果：</p><pre><code class="language-cpp">root@localhost:/# nmcli device statusDEVICE         TYPE      STATE         CONNECTIONeth0           ethernet  disconnected  --wlan0          wifi      disconnected  --lo             loopback  unmanaged     --p2p-dev-wlan0  wifi-p2p  unmanaged     --root@localhost:/# nmcli device wifi list[  356.551534] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 8, bssidx: 0IN-USE  BSSID              SSID  MODE   CHAN  RATE        SIGNAL  BARS  SECURITY        42:52:F5:57:DF:95  abc   Infra  1 130 Mbit/s  55      ▂▄__  WPA2        2C:C5:46:B1:C7:C9  --    Infra  1 130 Mbit/s  7       ▂___  WPA2        2C:C5:46:B1:C7:CD  --    Infra  1     130 Mbit/s  5       ____  WPA2root@localhost:/# nmcli device wifi connect "abc" password "abc123456"[  408.318086] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 9, bssidx: 0[  409.451579] [dhd-wlan0] wl_cfg80211_connect : Connecting with 42:52:f5:57:df:95 ssid "abc", len (3), sec=wpa2psk/mfpc/516, channel=1[  409.451579][  409.541313] [dhd-wlan0] wl_iw_event : Link UP with 42:52:f5:57:df:95[  409.541423] [dhd-wlan0] wl_ext_iapsta_event : [S] Link UP with 42:52:f5:57:df:95[  409.541556] [dhd-wlan0] wl_notify_connect_status : wl_bss_connect_done succeeded with 42:52:f5:57:df:95[  409.557743] [dhd-wlan0] wl_notify_connect_status : wl_bss_connect_done succeeded with 42:52:f5:57:df:95 vndr_oui: 00-0C-E7Device 'wlan0' successfully activated with 'bc7dbf68-1907-4f73-a0e9-5ea11dbdde8c'.</code></pre><h1>&nbsp;二、以<strong>2G+16G版本模拟1G+0G</strong>的<strong>立创泰山派</strong>为例的<strong>烧写镜像到TF卡</strong>的<strong>速通验货过程</strong></h1><h2>1.下载SDDiskTool_v1.7.zip，\立创&middot;泰山派开发板资料\第07章.【立创&middot;泰山派】开发工具\SDDiskTool_v1.7，找到SD_Firmware_Tool.exe可执行文件，以管理员运行SD_Firmware_Tool.exe可执行文件</h2><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/0772e60ce9ff4ea2844ff9a47f592eb7.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/736288a923f1475b9255047f1c70143d.jpeg"></p><h2>2.烧写下载Debian</h2><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/c52f46aeee6c488981b9225e9d787e18.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/6c27e5ec1d054969988eba26dcc997b4.png"></p><p><img src="/2025/07/22/%E3%80%90RK3566%E3%80%91%E9%80%82%E7%94%A8%E4%BA%8E%E8%90%8C%E6%96%B0%E4%B8%8E%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AB%8B%E5%88%9B%E6%B3%B0%E5%B1%B1%E6%B4%BE%E5%88%B0%E6%89%8B%E5%88%9D%E4%BD%93%E9%AA%8C%E9%80%9F%E9%80%9A%E6%95%99%E7%A8%8B/a2d7be92f6714d01b5d06f7924c9c2dd.png"></p><h2 style="background-color:transparent">（3）插卡，由于之前EMMC里已经有系统了，所以还是Ubuntu系统，所以TF卡的系统就没有进入，但是如果是1G+0G应该是可以的</h2><pre><code class="language-cpp">This system has been minimized by removing packages and content that arenot required on a system that users do not log into.To restore this content, you can run the 'unminimize' command.Last login: Mon Mar 27 17:55:49 UTC 2023 on ttyFIQ0[   13.088371] [dhd] dhd_conf_read_config : Ignore config file /vendor/etc/firmware/config.txt[   13.088434] [dhd] dhd_conf_set_path_params : Final fw_path=/vendor/etc/firmware/fw_bcm43438a1.bin[   13.088441] [dhd] dhd_conf_set_path_params : Final nv_path=/vendor/etc/firmware/nvram_ap6212a.txt[   13.088448] [dhd] dhd_conf_set_path_params : Final clm_path=/vendor/etc/firmware/clm_bcm43438a1.blob[   13.088454] [dhd] dhd_conf_set_path_params : Final conf_path=/vendor/etc/firmware/config.txt[   13.279573] [dhd] dhd_conf_set_txglom_params : txglom_mode=copy[   13.279601] [dhd] dhd_conf_set_txglom_params : txglomsize=36, deferred_tx_len=0[   13.279607] [dhd] dhd_conf_set_txglom_params : txinrx_thres=-1, dhd_txminmax=1[   13.279613] [dhd] dhd_conf_set_txglom_params : tx_max_offset=0, txctl_tmo_fix=300[   13.279646] [dhd] dhd_conf_get_disable_proptx : fw_proptx=1, disable_proptx=-1[   13.338250] [dhd] dhd_conf_set_country : set country CN, revision 0[   13.346097] [dhd] dhd_conf_set_country : Country code: CN (CN/0)[   13.363550] [dhd] CONFIG-ERROR) dhd_conf_set_intiovar : ampdu_mpdu setting failed -29[   13.363595] [dhd-wlan0] wl_android_wifi_on : Success[   13.555037] rk_gmac-dwmac fe010000.ethernet: Failed to reset the dma[   13.555089] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_hw_setup: DMA engine initialization failed[   13.555098] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_open: Hw setup failed[   13.700918] rk_gmac-dwmac fe010000.ethernet: Failed to reset the dma[   13.700960] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_hw_setup: DMA engine initialization failed[   13.700969] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_open: Hw setup failedroot@localhost:~# [   13.843506] rk_gmac-dwmac fe010000.ethernet: Failed to reset the dma[   13.843542] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_hw_setup: DMA engine initialization failed[   13.843550] rk_gmac-dwmac fe010000.ethernet eth0: stmmac_open: Hw setup failed[   13.884053] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 0, bssidx: 0[   15.075441] [dhd-wlan0] wl_cfg80211_connect : Connecting with 42:52:f5:57:df:95 ssid "abc", len (3), sec=wpa2psk/mfpc/516, channel=1[   15.075441][   15.143934] [dhd-wlan0] wl_notify_connect_status : wl_bss_connect_done succeeded with 42:52:f5:57:df:95[   15.144022] [dhd-wlan0] wl_iw_event : Link UP with 42:52:f5:57:df:95[   15.144043] [dhd-wlan0] wl_ext_iapsta_event : [S] Link UP with 42:52:f5:57:df:95[   15.203040] [dhd-wlan0] wl_notify_connect_status : wl_bss_connect_done succeeded with 42:52:f5:57:df:95 vndr_oui: 00-0C-E7[   45.207263] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 1, bssidx: 0root@localhost:~#root@localhost:~#root@localhost:~# [   76.046797] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 2, bssidx: 0[   78.287713] [dhd-wlan0] wl_iw_event : Link Down with 42:52:f5:57:df:95, reason=1[   78.287892] [dhd-wlan0] wl_ext_iapsta_event : [S] Link down with 42:52:f5:57:df:95, WLC_E_LINK(16), reason 1[   78.288116] [dhd-wlan0] wl_notify_connect_status : link down if wlan0 may call cfg80211_disconnected. event : 16, reason=1 from 42:52:f5:57:df:95[   78.292834] [dhd-wlan0] wl_iw_event : Link Down with 42:52:f5:57:df:95, reason=2[   78.292997] [dhd-wlan0] wl_ext_iapsta_event : [S] Link down with 42:52:f5:57:df:95, WLC_E_LINK(16), reason 2[   78.399189] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 3, bssidx: 0root@localhost:~# [   84.503231] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 4, bssidx: 0root@localhost:~#root@localhost:~# [   90.629650] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 5, bssidx: 0[   94.094140] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 6, bssidx: 0[   96.772780] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 7, bssidx: 0</code></pre><pre><code class="language-cpp">root@localhost:~# cat /etc/os-releaseNAME="Ubuntu"VERSION="20.04.6 LTS (Focal Fossa)"ID=ubuntuID_LIKE=debianPRETTY_NAME="Ubuntu 20.04.6 LTS"VERSION_ID="20.04"HOME_URL="https://www.ubuntu.com/"SUPPORT_URL="https://help.ubuntu.com/"BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"VERSION_CODENAME=focalUBUNTU_CODENAME=focalBUILD_INFO="root@lckfb Thu 30 Nov 2023 07:52:00 PM CST"root@localhost:~# [  441.069076] [dhd-wlan0] wl_run_escan : LEGACY_SCAN sync ID: 21, bssidx: 0</code></pre><p>注：如有错误，可在评论区指出。&nbsp;</p>]]></content>
    
    
    
    <tags>
      
      <tag>立创泰山派 RK3566 验货 烧写镜像</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Docker】Docker的初步认识以及Ubuntu下的Docker环境安装、配置</title>
    <link href="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/"/>
    <url>/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在当今快速迭代的软件开发与部署领域，容器化技术已成为不可或缺的核心力量，而 Docker 作为容器化技术的杰出代表，正以其轻量、高效、可移植的特性深刻改变着开发与运维的模式。它有效解决了 &ldquo;在我机器上能运行，在你那里却不行&rdquo; 的环境一致性难题，极大简化了应用的打包、分发与部署流程，让开发者能够更专注于业务逻辑的实现，而非环境配置的琐碎细节。​</p><h1>一、Docker的初步认识</h1><h2><span style="color:#ff9900">1.什么是Docker？</span></h2><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Docker官网" href="https://www.docker.com/" title="Docker官网">Docker官网</a></p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="DockerHub官网 " href="https://hub.docker.com/" title="DockerHub官网 ">DockerHub官网</a></p><p><strong>Docker </strong>是一个用于开发、部署和运行应用程序的开源平台，它采用容器化技术，将应用及其依赖项打包成独立的容器，确保应用在不同环境中无缝运行。以下是对 Docker 的详细解释：</p><p><img src="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/9695687ead6b4e64942b9ddfdc4bc498.png"></p><h3><span style="color:#ed7976"><strong>（1）. 核心概念</strong></span></h3><h4><strong>仓库（Registry）</strong></h4><ul><li><strong>镜像存储中心</strong>：仓库用于存储和分发镜像，例如 Docker Hub、阿里云容器镜像服务等。</li><li><strong>公有与私有</strong>：公有仓库免费使用，私有仓库适合企业内部管理镜像。</li><li><span style="color:#0d0016"><span style="background-color:#f9eda6">注：类比为软件官网，其具有分发软件安装包（</span></span><span style="background-color:#f9eda6">镜像</span><span style="color:#0d0016"><span style="background-color:#f9eda6">）的功能。</span></span></li></ul><h4><strong>镜像（Image）</strong></h4><ul><li><strong>容器的模板</strong>：镜像是一个只读的文件，包含创建容器所需的所有内容（代码、依赖、配置等）。</li><li><strong>分层结构</strong>：镜像采用分层存储，复用公共层，减少存储空间和下载时间。</li><li><span style="background-color:#f9eda6">注：类比为常见的软件安装包。</span></li></ul><h4><strong>容器（Container）</strong></h4><ul><li><strong>轻量级隔离环境</strong>：容器是应用运行的独立环境，包含代码、运行时、系统工具和库，与其他容器共享宿主机操作系统内核。</li><li><strong>隔离性</strong>：容器之间相互隔离，不会影响其他容器或宿主机的运行状态。</li><li><span style="background-color:#f9eda6">注：类比为软件安装包安装软件后的一个正在运行的软件，在该软件环境（就相当于容器）下进行相应的工作。</span></li></ul><h3><span style="color:#ed7976"><strong>（2）. Docker 与传统虚拟机的区别</strong></span></h3><h4><strong>Docker 与虚拟化技术：本质差异与演进逻辑</strong></h4><p>Docker 与传统虚拟化技术（如 VMware、Hypervisor）均属于环境隔离技术，但在架构设计、资源利用和应用场景上存在本质差异。Docker 通过<strong>容器化技术</strong>对操作系统层进行深度封装，实现了比虚拟机更轻量、更高效的应用隔离方案。</p><h4><strong>1）. 技术架构对比：从系统级隔离到应用级隔离</strong></h4><table><thead><tr><th><strong>维度</strong></th><th><strong>Docker 容器</strong></th><th><strong>传统虚拟机</strong></th></tr></thead><tbody><tr><td><strong>隔离层级</strong></td><td>操作系统层（共享内核，隔离用户空间）</td><td>硬件层（通过 Hypervisor 虚拟完整硬件）</td></tr><tr><td><strong>资源抽象</strong></td><td>应用进程 + 依赖库</td><td>完整操作系统 + 硬件驱动</td></tr><tr><td><strong>启动机制</strong></td><td>直接启动应用进程（无需加载内核）</td><td>需要引导整个操作系统</td></tr><tr><td><strong>镜像体积</strong></td><td>通常几十 MB 到 GB 级（分层存储）</td><td>通常数 GB 到 TB 级（含完整系统）</td></tr><tr><td><strong>运行密度</strong></td><td>单主机可运行数百个容器</td><td>单主机通常运行数十个虚拟机</td></tr></tbody></table><h4><strong>2）. Docker 的核心创新：容器深度封装技术</strong></h4><p>Docker 在容器基础上引入了三大核心封装机制：</p><ol><li><p><strong>联合文件系统（UnionFS）</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;通过分层存储技术，将应用依赖、配置和代码分层打包，不同容器可共享基础层，大幅减少存储空间占用和部署时间。&lt;/li&gt;&lt;li&gt;示例：多个 Python 应用可共享同一 Python 运行时镜像层。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;网络命名空间与虚拟网络&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;为每个容器分配独立的网络栈（IP、端口、路由表），支持桥接、overlay 等多种网络模式，实现容器间安全通信。&lt;/li&gt;&lt;li&gt;对比虚拟机：无需为每个容器分配虚拟网卡，网络延迟更低。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Cgroups 资源隔离&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通过 Linux Control Groups 精确限制容器的 CPU、内存、IO 等资源，避免单个容器耗尽系统资源。&lt;/li&gt;&lt;li&gt;特性：支持动态调整资源配额，适应弹性伸缩场景。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h4><strong>3）. 性能对比：轻量与高效的实证数据</strong></h4><table><thead><tr><th><strong>测试指标</strong></th><th><strong>Docker 容器</strong></th><th><strong>虚拟机</strong></th><th><strong>性能差异</strong></th></tr></thead><tbody><tr><td><strong>启动时间</strong></td><td>0.1-1 秒</td><td>30-120 秒</td><td><strong>快 30-1000 倍</strong></td></tr><tr><td><strong>内存占用（Nginx）</strong></td><td>~5MB</td><td>~200MB</td><td><strong>节省 97% 内存</strong></td></tr><tr><td><strong>吞吐量（HTTP 请求）</strong></td><td>约 95% 原生性能</td><td>约 70% 原生性能</td><td><strong>提升 35% 吞吐量</strong></td></tr></tbody></table><h4><strong>4）. 应用场景的分化与融合</strong></h4><ul><li><p><strong>Docker 适用场景</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;微服务架构（如 Netflix、Amazon 的容器化改造）&lt;/li&gt;&lt;li&gt;CI/CD 流水线（GitLab、Jenkins 的容器化部署）&lt;/li&gt;&lt;li&gt;开发环境一致性保障（DevOps 团队协作）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;虚拟机适用场景&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;异构操作系统共存（Windows + Linux 混合环境）&lt;/li&gt;&lt;li&gt;安全敏感型应用（金融、医疗领域的合规要求）&lt;/li&gt;&lt;li&gt;资源密集型单应用（传统数据库、中间件）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;融合趋势&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;容器云平台&lt;/strong&gt;：在虚拟机集群上部署 Docker，兼顾隔离性与弹性（如 AWS EKS、阿里云 ACK）&lt;/li&gt;&lt;li&gt;&lt;strong&gt;边缘计算&lt;/strong&gt;：轻量级容器在资源受限设备上替代虚拟机（如 Raspberry Pi + Docker）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4><strong>5）. 技术选型决策矩阵</strong></h4><table><thead><tr><th><strong>需求维度</strong></th><th><strong>优先选择 Docker</strong></th><th><strong>优先选择虚拟机</strong></th></tr></thead><tbody><tr><td><strong>资源利用率</strong></td><td>高（密度部署）</td><td>低（冗余系统开销）</td></tr><tr><td><strong>部署速度</strong></td><td>秒级（适合频繁迭代）</td><td>分钟级（适合长期稳定运行）</td></tr><tr><td><strong>异构环境支持</strong></td><td>单一内核（Linux/Windows）</td><td>多操作系统（跨平台兼容）</td></tr><tr><td><strong>安全隔离级别</strong></td><td>进程级隔离（需加固配置）</td><td>系统级隔离（天然安全边界）</td></tr></tbody></table><h4><strong>Docker 与传统虚拟机的区别的总结：容器技术的演进价值</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Docker 通过<strong>操作系统级虚拟化</strong>，在保留虚拟机隔离优势的同时，消除了传统虚拟化的性能损耗和资源冗余。其核心价值在于：</p><ul><li><strong>开发效率提升</strong>：一次构建，随处运行，彻底解决 &ldquo;环境不一致&rdquo; 问题</li><li><strong>运维成本降低</strong>：资源利用率提升 3-5 倍，部署速度提升 10-100 倍</li><li><strong>架构创新</strong>：推动微服务、Serverless 等新型架构落地</li></ul><table><thead><tr><th><strong>对比项</strong></th><th><strong>Docker 容器</strong></th><th><strong>传统虚拟机</strong></th></tr></thead><tbody><tr><td><strong>隔离级别</strong></td><td>共享内核，进程级隔离</td><td>完全隔离，包含独立操作系统</td></tr><tr><td><strong>启动速度</strong></td><td>秒级启动</td><td>分钟级启动</td></tr><tr><td><strong>资源占用</strong></td><td>轻量，仅需必要依赖</td><td>重量级，需完整操作系统</td></tr><tr><td><strong>性能</strong></td><td>接近原生性能</td><td>性能损耗较大</td></tr><tr><td><strong>部署效率</strong></td><td>高（镜像复用、快速部署）</td><td>低（需安装完整操作系统）</td></tr></tbody></table><p><strong>虚拟机的架构图：</strong></p><p><img src="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/8c72f2dd61c441f89779ab5aafa306b5.png"></p><p><strong>Docker的架构图：</strong></p><p><img src="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/1535b7298cfb4486b217c99940b2a8a9.png"></p><p><strong>简化的虚拟机和Docker的架构对比图：</strong></p><p><img src="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/50c1c37de49e452d8543f062251fe36a.png"></p><h3><span style="color:#ed7976"><strong>（3）. Docker 的优势</strong></span></h3><ul><li><strong>环境一致性</strong>：确保开发、测试、生产环境一致，避免 &ldquo;环境差异&rdquo; 导致的问题。</li><li><strong>快速部署与扩展</strong>：容器秒级启动，支持快速复制和扩展，适应微服务架构。</li><li><strong>资源利用率高</strong>：多个容器共享内核，资源占用少，提升硬件利用率。</li><li><strong>可移植性强</strong>：一次构建，随处运行（支持 Linux、Windows、macOS 等）。</li><li><strong>版本控制</strong>：镜像支持版本管理，方便回滚和追踪变更。</li></ul><h3><span style="color:#ed7976"><strong>（4）. 典型应用场景</strong></span></h3><ul><li><strong>微服务架构</strong>：将应用拆分为多个独立容器，实现松耦合、高可用。</li><li><strong>持续集成与部署（CI/CD）</strong>：自动化构建、测试和部署容器化应用。</li><li><strong>开发环境管理</strong>：为团队提供一致的开发环境，避免依赖冲突。</li><li><strong>资源密集型应用</strong>：通过容器隔离和资源限制，优化资源分配。</li></ul><h3><span style="color:#ed7976"><strong>（5）. 基本工作流程</strong></span></h3><ol><li><strong>编写 Dockerfile</strong>：定义应用的环境和依赖。</li><li><strong>构建镜像</strong>：使用&nbsp;<code>docker build</code>&nbsp;命令创建镜像。</li><li><strong>运行容器</strong>：使用&nbsp;<code>docker run</code>&nbsp;命令启动容器。</li><li><strong>推送 / 拉取镜像</strong>：将镜像上传至仓库或从仓库下载。</li></ol><h3><span style="color:#ed7976"><strong>（6）. 核心组件</strong></span></h3><ul><li><strong>Docker 引擎</strong>：运行在宿主机上的服务，负责创建和管理容器。</li><li><strong>Docker CLI</strong>：命令行工具，用于与 Docker 引擎交互。</li><li><strong>Docker Compose</strong>：定义和运行多容器应用的工具（通过 YAML 文件配置）。</li><li><strong>Docker Swarm/Kubernetes</strong>：容器编排工具，用于集群管理和自动化部署。</li></ul><h3><span style="color:#ff9900">Docker-</span><strong>总结</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Docker 通过容器化技术，将应用与环境解耦，实现了高效、一致的应用交付。它已成为云计算、DevOps 和微服务领域的基石技术，帮助开发者和运维团队降低成本、提升效率。在后续内容中，我们将详细介绍如何在 Ubuntu 系统上安装和配置 Docker 环境。</p><h2><span style="color:#ff9900">2.为什么使用Docker？</span></h2><p>使用 Docker 的核心价值，在于它从根本上解决了软件开发、部署和运维中的一系列经典痛点，尤其在云原生、微服务和 DevOps 兴起的背景下，其优势被进一步放大。具体可从以下 6 个核心场景和技术价值展开：</p><h3>1）.&nbsp;<strong>彻底解决 &ldquo;环境不一致&rdquo; 问题：一次构建，随处运行</strong></h3><p>开发中最常见的矛盾是：&ldquo;在我电脑上能跑，到你这怎么就报错了？&rdquo; 根源在于开发、测试、生产环境的依赖（如系统版本、库版本、配置文件）存在差异。<br />Docker 通过<strong>容器镜像</strong>将应用及其所有依赖（代码、运行时、库、环境变量、配置文件）打包成一个不可变的 &ldquo;标准化交付单元&rdquo;。无论在开发者的笔记本（Ubuntu/macOS）、测试服务器（CentOS）还是生产集群（云服务器），只要安装了 Docker，容器就能以完全一致的方式运行，消除了 &ldquo;环境适配&rdquo; 的重复劳动。</p><h3>2）.&nbsp;<strong>资源效率碾压传统虚拟化：轻量、高密度、低成本</strong></h3><p>相比虚拟机（VM），Docker 容器的 &ldquo;轻量性&rdquo; 带来了显著的资源优势：</p><ul><li><strong>启动速度</strong>：容器直接复用宿主机内核，无需加载完整操作系统，启动时间从虚拟机的 &ldquo;分钟级&rdquo; 缩短到 &ldquo;秒级甚至毫秒级&rdquo;（如 Nginx 容器启动仅需 0.1 秒）。</li><li><strong>资源占用</strong>：容器仅包含应用及必要依赖，镜像体积通常是虚拟机镜像的 1/10 到 1/100（例如一个 Python 应用容器约 50MB，而同等功能的虚拟机镜像可能达 5GB）。</li><li><strong>运行密度</strong>：单台服务器可运行数百个容器（而虚拟机通常只能运行几十个），大幅提升硬件利用率，降低服务器采购和运维成本（尤其对云服务器按资源计费场景）。</li></ul><h3>3）.&nbsp;<strong>简化部署与运维：从 &ldquo;手动配置&rdquo; 到 &ldquo;自动化交付&rdquo;</strong></h3><p>传统部署流程（如手动安装依赖、改配置、启停服务）不仅繁琐，还容易因人为操作出错。Docker 通过<strong>镜像版本管理</strong>和<strong>容器编排</strong>，将部署流程 &ldquo;代码化&rdquo;：</p><ul><li><strong>版本可控</strong>：镜像支持版本标签（如<code>app:v1.0</code>、<code>app:v2.0</code>），部署时指定版本即可，回滚时只需切换标签，比手动卸载 / 重装高效 10 倍以上。</li><li><strong>自动化集成</strong>：无缝对接 CI/CD 工具（如 GitLab CI、Jenkins），代码提交后自动构建镜像、运行测试、部署到目标环境，实现 &ldquo;提交即部署&rdquo; 的 DevOps 闭环。</li><li><strong>批量操作</strong>：通过 Docker Compose 或 Kubernetes，可一键启动 / 停止 / 扩容多个关联容器（如 &ldquo;前端 + 后端 + 数据库&rdquo; 的微服务组合），替代复杂的手动脚本。</li></ul><h3>4）.&nbsp;<strong>微服务架构的 &ldquo;最佳搭档&rdquo;：解耦与弹性伸缩</strong></h3><p>在微服务架构中，一个系统被拆分为多个独立服务（如用户服务、订单服务、支付服务），每个服务需要独立部署、扩展和维护。Docker 的特性完美适配这一需求：</p><ul><li><strong>服务隔离</strong>：每个微服务运行在独立容器中，通过虚拟网络通信，单个服务崩溃不会影响其他服务，且资源（CPU / 内存）可单独限制，避免 &ldquo;一个服务耗尽整机资源&rdquo;。</li><li><strong>弹性伸缩</strong>：当某个服务压力增大时，可通过容器编排工具（如 K8s）快速复制多个容器实例分担负载，压力减小时自动销毁冗余实例，实现 &ldquo;按需分配资源&rdquo;。</li><li><strong>技术栈灵活</strong>：不同微服务可使用不同技术栈（如 A 服务用 Python，B 服务用 Java），容器化后无需担心依赖冲突，降低跨团队协作的技术门槛。</li></ul><h3>5）.&nbsp;<strong>开发效率提升：快速搭建 &ldquo;干净环境&rdquo;</strong></h3><p>开发者常需要在本地测试不同版本的依赖（如 &ldquo;测试 Python 3.8 和 3.9 对应用的影响&rdquo;），或临时启动辅助服务（如 Redis、MySQL）。传统方式需手动安装、配置，结束后还得清理残留文件，耗时且易污染系统。<br />Docker 可通过<strong>临时容器</strong>快速解决：</p><ul><li>启动一个<code>redis:6.2</code>容器，用完直接删除（<code>docker rm</code>），无需担心系统残留配置；</li><li>为不同依赖版本创建独立镜像（如<code>app:py38</code>、<code>app:py39</code>），切换环境只需切换容器，避免本地环境 &ldquo;越用越乱&rdquo;。</li></ul><h3>6）.&nbsp;<strong>跨平台兼容性：从本地到云，无缝迁移</strong></h3><p>无论是个人电脑（Windows/macOS/Linux）、物理服务器，还是公有云（AWS/Azure/ 阿里云）、私有云，只要支持 Docker，容器就能一致运行。这打破了 &ldquo;云厂商锁定&rdquo;：</p><ul><li>开发者在本地用 Ubuntu 开发的容器，可直接部署到阿里云 ECS（CentOS 系统），无需修改任何配置；</li><li>未来若需从 AWS 迁移到自建数据中心，只需迁移镜像和容器配置，避免因平台差异导致的 &ldquo;重写适配代码&rdquo;。</li></ul><h3>总结：Docker 的核心价值公式</h3><p><strong>Docker = 环境一致性 + 资源效率 + 部署自动化 + 架构灵活性</strong></p><p>它不是 &ldquo;银弹&rdquo;，但在大多数场景下（尤其是分布式系统、频繁迭代、多环境协作），能将团队的 &ldquo;无效劳动&rdquo;（环境调试、手动部署、跨平台适配）转化为 &ldquo;有效创新&rdquo;，这也是它从 2013 年诞生至今，成为云原生时代基础设施的核心原因。</p><h2><span style="color:#ff9900">3.概念详解</span></h2><h3><strong>1）镜像</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;操作系统一般分为内核和用户空间，而对于 Linux 而言，内核启动后，会挂载 root 文件系统（<strong>rootfs</strong>）为其提供用户空间支持。而 Docker 镜像（Image）就相当于是一个 root 文件系统。比如：官方镜像 ubuntu:22.04 就包含了完整的一套 Ubuntu 22.04 最小系统的 root 文件系统。同时，Docker 镜像 是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含 任何动态数据，其内容在构建之后也不会被改变。</p><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;镜像的分层存储：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;因为镜像包含操作系统完整的 root 文件系统，其体积往往是庞大的，因此在 Docker 设计时，就充分利用 Union FS 的技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个 ISO 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;镜像构建时，会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需的内容，构建新的镜像。、</p><h3>2）容器</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;镜像和容器的关系，就像面向对象编程里的类和实例：镜像是静态的模板，容器是镜像运行起来的实体，能被创建、启动、停止、删除等。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;容器本质是进程，但它运行在独立的命名空间中，有自己的 root 文件系统、网络配置、进程空间等，就像在独立系统中操作，比直接在宿主运行更安全，这也让初学者易与虚拟机混淆。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;容器和镜像一样采用分层存储，运行时以镜像为基础层，再创建一个容器存储层供读写。容器存储层随容器消亡而消失，所以里面的信息会跟着容器删除而丢失。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;按 Docker 最佳实践，容器存储层要保持无状态，不写入数据。文件写入应使用数据卷或绑定宿主目录，这样能跳过容器存储层，直接操作宿主或网络存储，性能和稳定性更好。而且数据卷生命周期独立于容器，容器没了，数据卷里的数据也不会丢失。</p><h3>3）仓库</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；而每个标签对应一个镜像。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 &lt;仓库名&gt;:&lt;标签&gt; 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以 Ubuntu 镜像为例，ubuntu 是仓库的名字，其内包含有不同的版本标签，如：16.04, 18.04。我们可以通过 ubuntu:16.04，或者 ubuntu:18.04 来具体指定所需哪个版本的镜像。如果忽略了标签，比如 ubuntu，那将视为 ubuntu:latest。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;仓库名经常以两段式路径形式出现，比如 jwilder/nginx-proxy，前者往往意味着 Docker Registry 多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体 Docker Registry 的软件或服务。</p><p><strong>参考链接（如有侵权，请联系删除）：</strong></p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="一文说清 Docker 是什么（非常详细），零基础入门到精通，看这一篇就够了-CSDN博客" href="https://blog.csdn.net/SpringJavaMyBatis/article/details/142784654?spm=1001.2101.3001.6650.14&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-14-142784654-blog-143731844.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-14-142784654-blog-143731844.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=23" title="一文说清 Docker 是什么（非常详细），零基础入门到精通，看这一篇就够了-CSDN博客">一文说清 Docker 是什么（非常详细），零基础入门到精通，看这一篇就够了-CSDN博客</a></p><h1>二、基于Ubuntu下的Docker安装步骤</h1><h2><span style="color:#6eaad7">1.查看是否已经安装了Docker，如果安装则删除旧版本</span></h2><pre><code class="language-bash">#查看Docker版本docker --version#删除旧版本sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre><h2><span style="color:#6eaad7">2.安装下载Docker时需要的依赖</span></h2><pre><code class="language-bash">#更新 apt 包索引sudo apt-get update#安装相关软件包以允许 apt 通过 HTTPS 使用 docker 存储库sudo apt-get install ca-certificates curl gnupg lsb-release</code></pre><h2><span style="color:#6eaad7">3.<strong>使用存储库安装 Docker</strong></span></h2><h3><strong>&nbsp;&nbsp;&nbsp;&nbsp;为什么使用存储库安装 Docker？</strong></h3><ol><li><strong>自动解决依赖</strong>：Docker 依赖于多个系统组件（如 <code>containerd</code>、<code>runc</code>），存储库安装会自动处理这些依赖关系。</li><li><strong>版本管理</strong>：通过存储库可以轻松安装、升级或降级软件版本，且支持自动更新。</li><li><strong>安全性</strong>：官方存储库的软件包经过签名验证，确保来源可信。</li><li><strong>标准化流程</strong>：所有 Linux 发行版都支持通过存储库安装软件，操作统一。</li></ol><h3><span style="color:#6eaad7"><strong>（1）添加 Docker 的官方 GPG 密钥</strong></span></h3><pre><code class="language-bash"># 1. 创建存放GPG密钥的目录sudo mkdir -p /etc/apt/keyrings# 2. 下载Docker官方GPG密钥并保存curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg</code></pre><h3><strong>第一条命令：创建存放 GPG 密钥的目录</strong></h3><p><strong>参数解析</strong></p><ul><li><p><strong><code>sudo</code></strong><br />以超级用户（root）权限执行命令，因为 <code>/etc</code> 目录通常只有 root 用户可写。</p></li><li><p><strong><code>mkdir</code></strong><br />创建目录的命令（Make Directory）。</p></li><li><p><strong><code>-p</code></strong><br /><strong>递归创建父目录</strong>。如果 <code>/etc/apt/keyrings</code> 的上级目录（如 <code>/etc/apt</code>）不存在，会自动创建它们。<br />例如：若 <code>/etc/apt</code> 不存在，会先创建 <code>/etc/apt</code>，再创建 <code>/etc/apt/keyrings</code>。</p></li><li><p><strong><code>/etc/apt/keyrings</code></strong><br />目标目录路径。</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;code&gt;/etc/apt&lt;/code&gt;：Debian 系 Linux 存放软件源配置的目录。&lt;/li&gt;&lt;li&gt;&lt;code&gt;keyrings&lt;/code&gt;：专门用于存放 GPG 密钥环的子目录（从 APT 2.4 版本开始推荐）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3>&nbsp;<strong>第二条命令：下载并保存 Docker 官方 GPG 密钥</strong></h3><h4><strong>管道前半部分：<code>curl -fsSL [...]</code></strong></h4><ul><li><p><strong><code>curl</code></strong><br />用于发送 HTTP 请求、下载文件的命令行工具。</p></li><li><p><strong><code>-f</code> (<code>--fail</code>)</strong><br />若 HTTP 请求返回错误状态码（如 404、500），立即终止并返回错误，避免输出错误页面内容。</p></li><li><p><strong><code>-s</code> (<code>--silent</code>)</strong><br />静默模式，不显示进度条和错误信息（但 <code>-S</code> 会覆盖此选项，显示错误）。</p></li><li><p><strong><code>-S</code> (<code>--show-error</code>)</strong><br />与 <code>-s</code> 配合使用，即使静默模式也显示错误信息。</p></li><li><p><strong><code>-L</code> (<code>--location</code>)</strong><br />若服务器返回重定向（如 301、302），自动跟随重定向到新 URL。</p></li><li><p><strong><code>https://download.docker.com/linux/ubuntu/gpg</code></strong><br />Docker 官方提供的 GPG 公钥下载地址，用于验证软件包的签名。</p></li></ul><h4><strong>管道后半部分：<code>sudo gpg --dearmor -o [...]</code></strong></h4><ul><li><p><strong><code>gpg</code></strong><br />GNU Privacy Guard，用于加密、签名和验证的工具。</p></li><li><p><strong><code>--dearmor</code></strong><br />将 ASCII 格式的 GPG 密钥（文本形式）转换为二进制格式（<code>.gpg</code> 文件）。</p></li></ul><p>例如，下载的原始密钥是：</p><p>plaintext</p><pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----...（长文本）...-----END PGP PUBLIC KEY BLOCK-----</code></pre><ul><li><p>转换后变为二进制格式，便于 APT 系统读取。</p></li><li><p><strong><code>-o /etc/apt/keyrings/docker.gpg</code></strong><br /><strong><code>-o</code> (<code>--output</code>)</strong>：指定输出文件路径。<br />将转换后的二进制密钥保存为 <code>/etc/apt/keyrings/docker.gpg</code>。</p></li></ul><h4><strong>为什么需要这两步？</strong></h4><ol><li><p><strong>安全性</strong><br />GPG 密钥用于验证软件包是否由 Docker 官方发布，防止中间人攻击或篡改。</p></li><li><p><strong>兼容性</strong><br />从 APT 2.4 版本开始，推荐将密钥存放在 <code>/etc/apt/keyrings/</code> 目录，并在软件源配置中用 <code>signed-by</code> 指定密钥路径。</p></li><li><p><strong>自动化</strong><br />通过命令自动下载和配置密钥，避免手动操作可能的错误。</p></li></ol><h4><strong>验证配置结果</strong></h4><p>bash</p><pre><code># 检查目录是否创建成功ls -ld /etc/apt/keyrings# 检查密钥文件是否存在且正确ls -l /etc/apt/keyrings/docker.gpggpg --show-keys /etc/apt/keyrings/docker.gpg</code></pre><p>正常情况下，密钥文件权限应为 <code>-rw-r--r--</code>（644），且能显示密钥的指纹信息（如 <code>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88</code>）。</p><h3><span style="color:#6eaad7">（2）设置存储库</span></h3><pre><code class="language-bash">echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee -a /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></pre><h4><strong>逐段解析：</strong></h4><h4><strong>1. <code>echo &quot;deb [...]&quot;</code></strong></h4><ul><li><strong><code>echo</code></strong>：输出字符串到标准输出</li><li><strong><code>deb [...]</code></strong>：这是 APT 软件源配置的格式，告诉系统从哪里下载软件包</li></ul><h4><strong>2. <code>[arch=$(dpkg --print-architecture)]</code></strong></h4><ul><li><strong><code>arch=</code></strong>：指定软件包的架构（如 amd64、arm64）</li><li><strong><code>dpkg --print-architecture</code></strong>：自动获取当前系统的架构<ul><li>例如在 x86_64 系统上会输出 <code>amd64</code></li><li>在 ARM64 系统上会输出 <code>arm64</code></li></ul></li><li><strong>作用</strong>：确保只下载与当前系统架构匹配的软件包</li></ul><h4><strong>3. <code>signed-by=/etc/apt/keyrings/docker.gpg</code></strong></h4><ul><li><strong><code>signed-by</code></strong>：指定用于验证软件包签名的 GPG 密钥</li><li><strong><code>/etc/apt/keyrings/docker.gpg</code></strong>：Docker 官方 GPG 密钥的路径</li><li><strong>作用</strong>：防止软件包被篡改，确保来源可信</li></ul><h4><strong>4. <code>https://download.docker.com/linux/ubuntu</code></strong></h4><ul><li>Docker 官方软件源的基础 URL</li><li>Ubuntu 系统的 Docker 软件包都存放在这个服务器上</li></ul><h4><strong>5. <code>$(lsb_release -cs)</code></strong></h4><ul><li><strong><code>lsb_release -cs</code></strong>：获取当前 Ubuntu 系统的<strong>版本代号</strong>（Codename）<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;例如 Ubuntu 22.04 的代号是 &lt;code&gt;jammy&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Ubuntu 20.04 的代号是 &lt;code&gt;focal&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：自动适配不同版本的 Ubuntu，确保下载的软件包兼容&lt;/li&gt;</code></pre></ul><h4><strong>6. <code>stable</code></strong></h4><ul><li>Docker 软件源的<strong>通道</strong>（channel）<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;code&gt;stable&lt;/code&gt;：稳定版（推荐生产环境使用）&lt;/li&gt;&lt;li&gt;其他可选通道：&lt;code&gt;edge&lt;/code&gt;（测试版）、&lt;code&gt;nightly&lt;/code&gt;（开发版）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4><strong>7. <code>| sudo tee -a /etc/apt/sources.list.d/docker.list</code></strong></h4><ul><li><strong><code>|</code></strong>：管道符号，将前面的输出作为后面命令的输入</li><li><strong><code>sudo tee -a</code></strong>：<ul><li><code>tee</code>：将输出同时写入文件和屏幕</li><li><code>-a</code>：追加模式（append），不覆盖原有内容</li><li><code>sudo</code>：以管理员权限执行</li></ul></li><li><strong><code>/etc/apt/sources.list.d/docker.list</code></strong>：APT 软件源配置文件<ul><li>APT 会自动读取这个目录下的所有 <code>.list</code> 文件</li></ul></li></ul><h4><strong>8. <code>&gt; /dev/null</code></strong></h4><ul><li><strong><code>&gt;</code></strong>：重定向符号</li><li><strong><code>/dev/null</code></strong>：Linux 的黑洞设备，所有写入的数据都会被丢弃</li><li><strong>作用</strong>：隐藏命令的输出（不显示在终端）</li></ul><h4><strong>总结</strong></h4><p>这个命令的核心作用是：</p><ol><li>自动生成 Docker 官方软件源的配置</li><li>将配置写入 <code>/etc/apt/sources.list.d/docker.list</code> 文件</li><li>配置会根据当前系统架构和版本自动适配</li><li>使用 Docker 官方 GPG 密钥确保软件包安全</li></ol><h2><span style="color:#6eaad7">4.安装 Docker engine</span></h2><pre><code class="language-bash">sudo apt-get updatesudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</code></pre><h2><span style="color:#6eaad7">5.验证安装是否完成</span></h2><pre><code class="language-bash">sudo docker -v</code></pre><p><img src="/2025/07/22/%E3%80%90Docker%E3%80%91Docker%E7%9A%84%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E4%BB%A5%E5%8F%8AUbuntu%E4%B8%8B%E7%9A%84Docker%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AE/fcd1cda725ae42b79917364b0dc4fa8f.png"></p><p><strong>注：</strong>拉取镜像除了使用VPN，还可以配置到国内的镜像源进行拉取；Docker桌面版没怎么用，暂不介绍。</p>]]></content>
    
    
    <categories>
      
      <category>Docker学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker 容器 运维 Ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Ubuntu】基于Ubuntu+移动硬盘的Linux To Go的超详细制作全过程</title>
    <link href="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/"/>
    <url>/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言</strong></p><p>&nbsp; &nbsp; &nbsp; &nbsp;<strong>为什么需要Linux To Go？</strong></p><p>&nbsp; &nbsp; &nbsp; &nbsp;<strong>（1）</strong>或许你尝试过用虚拟机体验 Linux &mdash;&mdash; 这种方式确实成本低廉，只需在现有系统中划分部分资源即可运行。但它的短板也十分明显：虚拟机里的 Linux 始终是 &ldquo;不完整的存在&rdquo;。一方面，受限于虚拟层的资源分配，计算机性能会大幅缩水，运行大型程序或多任务时卡顿频发；另一方面，虚拟机的隔离环境会带来诸多实操障碍，比如 IP 地址映射、硬件设备直通等问题，往往会让新手在配置网络服务、连接外部设备时频繁碰壁，远不如原生 Linux 系统来得顺畅。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;<strong>（2）</strong>另一种常见选择是安装双系统 &mdash;&mdash; 看似能获得原生 Linux 体验，但实际使用中的成本却并不低。首先是启动体验的割裂：每次开机都得进入 BIOS 界面手动选择系统，频繁切换时难免让人觉得繁琐；其次，双系统间的兼容性隐患始终存在，不少用户反馈过分区冲突、引导文件损坏等互相干扰的问题，排查起来颇为棘手。​</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;更关键的是存储空间的压力。如今主流电脑的硬盘多为 512G，双系统至少要占用 100G 以上空间，对于本就存储空间紧张的用户而言，这意味着要牺牲大量存放学习资料、项目文件的空间。对于只是想完成作业、简单体验 Linux 的人来说，这样的投入显然有些 &ldquo;得不偿失&rdquo;。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;<strong>（3）</strong>但是，你是否曾幻想过，将一套完整的 Linux 系统装进随身 U 盘/移动硬盘，插入任何电脑都能立即进入熟悉的操作环境？无需繁琐安装，不必担心设备兼容性，带着系统 &ldquo;说走就走&rdquo;&mdash;&mdash; 这正是 Linux To Go 的魅力所在。​</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于经常需要在不同设备间切换的开发者、运维人员，或是想随时随地体验 Linux 却不想改动本地系统的用户，Linux To Go 无疑是提升效率的 &ldquo;神器&rdquo;。它不仅能保留你的个性化配置、软件环境和工作文件，还能在 Windows、macOS 设备上无缝运行，让你彻底摆脱 &ldquo;换电脑就重新配置环境&rdquo; 的困扰。</p><hr /><h1 id="main-toc" name="tableOfContents"><strong>目录</strong></h1><p id="%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" target="_self">一、基础知识</a></p><p id="1.GUID%E4%B8%8EGPT-toc" name="tableOfContents" style="margin-left:40px"><a href="#1.GUID%E4%B8%8EGPT" target="_self">1.GUID与GPT</a></p><p id="GUID%EF%BC%88%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6%EF%BC%89%E4%B8%8E%20GPT%EF%BC%88GUID%20%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%89%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%85%B3%E7%B3%BB-toc" name="tableOfContents" style="margin-left:80px"><a href="#GUID%EF%BC%88%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6%EF%BC%89%E4%B8%8E%20GPT%EF%BC%88GUID%20%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%89%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%85%B3%E7%B3%BB" target="_self">GUID（全局唯一标识符）与 GPT（GUID 分区表）的核心概念及关系</a></p><p id="%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E5%AE%9A%E4%B9%89-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E5%AE%9A%E4%B9%89" target="_self">一、基础定义</a></p><p id="%E4%BA%8C%E3%80%81GUID%20%E4%B8%8E%20GPT%20%E7%9A%84%E5%85%B3%E7%B3%BB-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E4%BA%8C%E3%80%81GUID%20%E4%B8%8E%20GPT%20%E7%9A%84%E5%85%B3%E7%B3%BB" target="_self">二、GUID 与 GPT 的关系</a></p><p id="%E4%B8%89%E3%80%81%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E4%B8%89%E3%80%81%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" target="_self">三、技术对比与应用场景</a></p><p id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93" target="_self">四、总结</a></p><p id="%C2%A02.ESP%E4%B8%8EMSR-toc" name="tableOfContents" style="margin-left:40px"><a href="#%C2%A02.ESP%E4%B8%8EMSR" target="_self">2.ESP与MSR</a></p><p id="%E4%B8%80%E3%80%81ESP%20%E5%88%86%E5%8C%BA%EF%BC%88EFI%20System%20Partition%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%B8%80%E3%80%81ESP%20%E5%88%86%E5%8C%BA%EF%BC%88EFI%20System%20Partition%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89" target="_self">一、ESP 分区（EFI System Partition，EFI 系统分区）</a></p><p id="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89-toc" name="tableOfContents" style="margin-left:120px"><a href="#1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89" target="_self">1. 核心定义</a></p><p id="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8-toc" name="tableOfContents" style="margin-left:120px"><a href="#2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8" target="_self">2. 功能与作用</a></p><p id="3.%20%E7%89%B9%E7%82%B9-toc" name="tableOfContents" style="margin-left:120px"><a href="#3.%20%E7%89%B9%E7%82%B9" target="_self">3. 特点</a></p><p id="%E4%BA%8C%E3%80%81MSR%20%E5%88%86%E5%8C%BA%EF%BC%88Microsoft%20Reserved%20Partition%EF%BC%8C%E5%BE%AE%E8%BD%AF%E4%BF%9D%E7%95%99%E5%88%86%E5%8C%BA%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%BA%8C%E3%80%81MSR%20%E5%88%86%E5%8C%BA%EF%BC%88Microsoft%20Reserved%20Partition%EF%BC%8C%E5%BE%AE%E8%BD%AF%E4%BF%9D%E7%95%99%E5%88%86%E5%8C%BA%EF%BC%89" target="_self">二、MSR 分区（Microsoft Reserved Partition，微软保留分区）</a></p><p id="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89-toc" name="tableOfContents" style="margin-left:120px"><a href="#1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89" target="_self">1. 核心定义</a></p><p id="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8-toc" name="tableOfContents" style="margin-left:120px"><a href="#2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8" target="_self">2. 功能与作用</a></p><p id="3.%20%E7%89%B9%E7%82%B9-toc" name="tableOfContents" style="margin-left:120px"><a href="#3.%20%E7%89%B9%E7%82%B9" target="_self">3. 特点</a></p><p id="%E4%B8%89%E3%80%81ESP%20%E5%92%8C%20MSR%20%E7%9A%84%E5%85%B3%E7%B3%BB-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%B8%89%E3%80%81ESP%20%E5%92%8C%20MSR%20%E7%9A%84%E5%85%B3%E7%B3%BB" target="_self">三、ESP 和 MSR 的关系</a></p><p id="%E5%85%B3%E9%94%AE%E8%81%94%E7%B3%BB%EF%BC%9A-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E5%85%B3%E9%94%AE%E8%81%94%E7%B3%BB%EF%BC%9A" target="_self">关键联系：</a></p><p id="%E5%9B%9B%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%BB%BA%E8%AE%AE-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E5%9B%9B%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%BB%BA%E8%AE%AE" target="_self">四、实际应用建议</a></p><p id="3.boot%E4%B8%8EESP%EF%BC%88EFI%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#3.boot%E4%B8%8EESP%EF%BC%88EFI%EF%BC%89" target="_self">3.Reserved BIOS Boot Area与EFI System Partition（ESP）</a></p><p id="%E4%B8%80%E3%80%81Reserved%20BIOS%20Boot%20Area%EF%BC%88BIOS%20%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%88%E7%A7%B0%20BIOS%20Boot%20Partition%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%B8%80%E3%80%81Reserved%20BIOS%20Boot%20Area%EF%BC%88BIOS%20%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%88%E7%A7%B0%20BIOS%20Boot%20Partition%EF%BC%89" target="_self">一、Reserved BIOS Boot Area（BIOS 引导分区，又称 BIOS Boot Partition）</a></p><p id="%E4%BA%8C%E3%80%81EFI%20System%20Partition%EF%BC%88ESP%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%BA%8C%E3%80%81EFI%20System%20Partition%EF%BC%88ESP%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89" target="_self">二、EFI System Partition（ESP，EFI 系统分区）</a></p><p id="%E4%B8%89%E3%80%81%E4%B8%A4%E8%80%85%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E4%B8%89%E3%80%81%E4%B8%A4%E8%80%85%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB" target="_self">三、两者核心区别</a></p><p id="%E5%9B%9B%E3%80%81%E8%83%BD%E4%B8%8D%E8%83%BD%E6%8A%8A%2Fboot%E8%A3%85%E5%9C%A8%20ESP%20%E9%87%8C%EF%BC%9F-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E5%9B%9B%E3%80%81%E8%83%BD%E4%B8%8D%E8%83%BD%E6%8A%8A%2Fboot%E8%A3%85%E5%9C%A8%20ESP%20%E9%87%8C%EF%BC%9F" target="_self">四、能不能把/boot装在 ESP 里？</a></p><p id="%E7%90%86%E8%AE%BA%E4%B8%8A%EF%BC%9A%E5%8F%AF%E4%BB%A5%EF%BC%8C%E4%BD%86%E9%9C%80%E5%88%86%E6%83%85%E5%86%B5-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E7%90%86%E8%AE%BA%E4%B8%8A%EF%BC%9A%E5%8F%AF%E4%BB%A5%EF%BC%8C%E4%BD%86%E9%9C%80%E5%88%86%E6%83%85%E5%86%B5" target="_self">理论上：可以，但需分情况</a></p><p id="%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88UEFI%20%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%89%EF%BC%9A-toc" name="tableOfContents" style="margin-left:120px"><a href="#%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88UEFI%20%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%89%EF%BC%9A" target="_self">实践建议（UEFI 模式下）：</a></p><p id="%E6%80%BB%E7%BB%93%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E6%80%BB%E7%BB%93%EF%BC%9A" target="_self">总结：</a></p><p id="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" target="_self">二、准备工作</a></p><p id="1.%E8%BD%AF%E4%BB%B6%E6%96%B9%E9%9D%A2-toc" name="tableOfContents" style="margin-left:40px"><a href="#1.%E8%BD%AF%E4%BB%B6%E6%96%B9%E9%9D%A2" target="_self">1.软件方面</a></p><p id="2.%E7%A1%AC%E4%BB%B6%E6%96%B9%E9%9D%A2-toc" name="tableOfContents" style="margin-left:40px"><a href="#2.%E7%A1%AC%E4%BB%B6%E6%96%B9%E9%9D%A2" target="_self">2.硬件方面</a></p><p id="%E4%B8%89%E3%80%81%E6%AD%A3%E5%BC%8F%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%B8%89%E3%80%81%E6%AD%A3%E5%BC%8F%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B" target="_self">三、正式操作过程</a></p><p id="1.%E5%AF%B9%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:40px"><a href="#1.%E5%AF%B9%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8C%BA" target="_self">1.对移动固态硬盘进行分区</a></p><p id="%EF%BC%881%EF%BC%89%E9%A6%96%E5%85%88%EF%BC%8C%E7%82%B9%E5%87%BB%E7%A9%BA%E7%9A%84%E7%A1%AC%E7%9B%98%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B9%B6%E5%88%A0%E6%8E%89%E6%89%80%E6%9C%89%E5%88%86%E5%8C%BA%EF%BC%8C%E5%9C%A8%E6%AD%A4%E4%B9%8B%E5%89%8D%E6%B3%A8%E6%84%8F%E5%A4%87%E4%BB%BD%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E9%A6%96%E5%85%88%EF%BC%8C%E7%82%B9%E5%87%BB%E7%A9%BA%E7%9A%84%E7%A1%AC%E7%9B%98%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B9%B6%E5%88%A0%E6%8E%89%E6%89%80%E6%9C%89%E5%88%86%E5%8C%BA%EF%BC%8C%E5%9C%A8%E6%AD%A4%E4%B9%8B%E5%89%8D%E6%B3%A8%E6%84%8F%E5%A4%87%E4%BB%BD%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82" target="_self">（1）首先，点击空的硬盘，对于移动固态硬盘进行格式化并删掉所有分区，在此之前注意备份好自己的数据。</a></p><p id="%EF%BC%882%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E8%BD%AC%E6%8D%A2%E4%B8%BAGUID%E6%A0%BC%E5%BC%8F-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E8%BD%AC%E6%8D%A2%E4%B8%BAGUID%E6%A0%BC%E5%BC%8F" target="_self">（2）分区表转换为GUID格式</a></p><p id="%EF%BC%883%EF%BC%89%E5%8F%B3%E5%87%BB%E7%81%B0%E8%89%B2%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E5%8F%B3%E5%87%BB%E7%81%B0%E8%89%B2%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA" target="_self">（3）右击灰色部分，创建引导分区</a></p><p id="%EF%BC%884%EF%BC%89%E7%82%B9%E5%87%BB%E5%BB%BA%E7%AB%8BESP%2FMSR%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%96%E6%B6%88%E5%8B%BE%E9%80%89%E5%BB%BA%E7%AB%8BMSR%EF%BC%8C%E6%88%91%E9%80%89%E6%8B%A9%E7%9A%84%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%BA1GB-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E7%82%B9%E5%87%BB%E5%BB%BA%E7%AB%8BESP%2FMSR%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%96%E6%B6%88%E5%8B%BE%E9%80%89%E5%BB%BA%E7%AB%8BMSR%EF%BC%8C%E6%88%91%E9%80%89%E6%8B%A9%E7%9A%84%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%BA1GB" target="_self">（4）点击建立ESP/MSR分区，取消勾选建立MSR，我选择的分区大小为1GB</a></p><p id="%EF%BC%885%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%BB%BA%E7%AB%8Bswap%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%BB%BA%E7%AB%8Bswap%E5%88%86%E5%8C%BA" target="_self">（5）建立新分区，建立swap分区</a></p><p id="%EF%BC%886%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%882%EF%BC%89%E6%98%AF%E4%BD%9C%E4%B8%BA%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%883%EF%BC%89%E4%BD%9C%E4%B8%BA%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E9%83%BD%E6%98%AFext4%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%9E%E9%99%85%E9%9C%80%E6%B1%82%E9%85%8D%E7%BD%AE%E3%80%82-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%886%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%882%EF%BC%89%E6%98%AF%E4%BD%9C%E4%B8%BA%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%883%EF%BC%89%E4%BD%9C%E4%B8%BA%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E9%83%BD%E6%98%AFext4%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%9E%E9%99%85%E9%9C%80%E6%B1%82%E9%85%8D%E7%BD%AE%E3%80%82" target="_self">（6）建立新分区，分区（2）是作为根目录（/）载体，分区（3）作为家目录（/home）载体，文件系统类型都是ext4，根据自己的实际需求配置。</a></p><p id="%C2%A0%EF%BC%887%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%884%EF%BC%89%E4%BD%9C%E4%B8%BAUbuntu%E5%92%8CWindows%E4%B8%8B%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4-toc" name="tableOfContents" style="margin-left:80px"><a href="#%C2%A0%EF%BC%887%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%884%EF%BC%89%E4%BD%9C%E4%B8%BAUbuntu%E5%92%8CWindows%E4%B8%8B%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4" target="_self">&nbsp;（7）建立新分区，分区（4）作为Ubuntu和Windows下的存储空间</a></p><p id="%EF%BC%888%EF%BC%89%E5%88%86%E5%8C%BA%E5%AE%8C%E6%88%90-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%888%EF%BC%89%E5%88%86%E5%8C%BA%E5%AE%8C%E6%88%90" target="_self">（8）分区完成</a></p><p id="2.%E5%80%9F%E5%8A%A9%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%B8%8A%E5%AE%89%E8%A3%85Ubuntu-toc" name="tableOfContents" style="margin-left:40px"><a href="#2.%E5%80%9F%E5%8A%A9%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%B8%8A%E5%AE%89%E8%A3%85Ubuntu" target="_self">2.借助虚拟机来在移动硬盘上安装Ubuntu</a></p><p id="%EF%BC%881%EF%BC%89%E5%9C%A8VMware%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%AE%89%E8%A3%85ubuntu-22.04.5%E6%A1%8C%E9%9D%A2%E7%89%88%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E5%9C%A8VMware%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%AE%89%E8%A3%85ubuntu-22.04.5%E6%A1%8C%E9%9D%A2%E7%89%88%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F" target="_self">（1）在VMware中创建虚拟机来安装ubuntu-22.04.5桌面版系统镜像</a></p><p id="%EF%BC%882%EF%BC%89%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5" target="_self">（2）选择自定义安装，然后点击下一步</a></p><p id="%EF%BC%883%EF%BC%89%E6%A0%B9%E6%8D%AE%E9%BB%98%E8%AE%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E6%A0%B9%E6%8D%AE%E9%BB%98%E8%AE%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5" target="_self">（3）根据默认虚拟机，点击下一步</a></p><p id="%EF%BC%884%EF%BC%89%E9%9A%8F%E6%84%8F%E5%91%BD%E5%90%8D%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8D%E5%AD%97%EF%BC%88%E9%99%A4%E4%BA%86%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%EF%BC%89%EF%BC%8C%E9%9A%8F%E6%84%8F%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%E5%AD%98%E6%94%BE-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E9%9A%8F%E6%84%8F%E5%91%BD%E5%90%8D%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8D%E5%AD%97%EF%BC%88%E9%99%A4%E4%BA%86%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%EF%BC%89%EF%BC%8C%E9%9A%8F%E6%84%8F%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%E5%AD%98%E6%94%BE" target="_self">（4）随意命名虚拟机名字（除了不使用中文），随意找到一个存储位置存放</a></p><p id="%EF%BC%885%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%9A%8F%E6%84%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E6%9C%80%E5%90%8E%E7%9A%84%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E6%98%AF%E6%88%91%E4%BB%AC%E7%9A%84%E7%89%A9%E7%90%86%E6%9C%BA%EF%BC%8C%E9%80%9A%E8%BF%87UEFI%20BIOS%E5%90%AF%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E4%B8%8A%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%9A%8F%E6%84%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E6%9C%80%E5%90%8E%E7%9A%84%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E6%98%AF%E6%88%91%E4%BB%AC%E7%9A%84%E7%89%A9%E7%90%86%E6%9C%BA%EF%BC%8C%E9%80%9A%E8%BF%87UEFI%20BIOS%E5%90%AF%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E4%B8%8A%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F" target="_self">（5）处理器配置可以是随意的，因为我们最后的运行平台是我们的物理机，通过UEFI BIOS启动存放在移动固态硬盘上的Ubuntu系统</a></p><p id="%EF%BC%886%EF%BC%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%886%EF%BC%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE" target="_self">（6）虚拟机内存设置</a></p><p id="%EF%BC%887%EF%BC%89%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%887%EF%BC%89%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B" target="_self">（7）默认网络类型</a></p><p id="%EF%BC%888%EF%BC%89%E9%BB%98%E8%AE%A4I%2FO%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E5%9E%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%888%EF%BC%89%E9%BB%98%E8%AE%A4I%2FO%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E5%9E%8B" target="_self">（8）默认I/O控制器类型</a></p><p id="%EF%BC%889%EF%BC%89%E9%BB%98%E8%AE%A4%E7%A3%81%E7%9B%98%E7%B1%BB%E5%9E%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%889%EF%BC%89%E9%BB%98%E8%AE%A4%E7%A3%81%E7%9B%98%E7%B1%BB%E5%9E%8B" target="_self">（9）默认磁盘类型</a></p><p id="%EF%BC%8810%EF%BC%89%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8810%EF%BC%89%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98" target="_self">（10）使用物理磁盘</a></p><p id="%EF%BC%8811%EF%BC%89%E9%80%89%E6%8B%A9%E7%89%A9%E7%90%86%E7%9B%98%EF%BC%8C%E5%8D%B3%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8811%EF%BC%89%E9%80%89%E6%8B%A9%E7%89%A9%E7%90%86%E7%9B%98%EF%BC%8C%E5%8D%B3%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98" target="_self">（11）选择物理盘，即移动硬盘</a></p><p id="%EF%BC%8812%EF%BC%89%E4%B8%8B%E4%B8%80%E6%AD%A5-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8812%EF%BC%89%E4%B8%8B%E4%B8%80%E6%AD%A5" target="_self">（12）下一步</a></p><p id="%EF%BC%8813%EF%BC%89%E7%82%B9%E5%87%BB%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8813%EF%BC%89%E7%82%B9%E5%87%BB%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6" target="_self">（13）点击自定义硬件</a></p><p id="%EF%BC%8814%EF%BC%89%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8814%EF%BC%89%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90" target="_self">（14）配置完成，并返回点击完成</a></p><p id="%EF%BC%8815%EF%BC%89%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8815%EF%BC%89%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA" target="_self">（15）开启虚拟机</a></p><p id="%EF%BC%8816%EF%BC%89%E6%8C%89%E4%B8%8BENTER%E5%AE%89%E8%A3%85-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8816%EF%BC%89%E6%8C%89%E4%B8%8BENTER%E5%AE%89%E8%A3%85" target="_self">（16）按下ENTER安装</a></p><p id="%EF%BC%8817%EF%BC%89%E9%80%89%E6%8B%A9%E8%AF%AD%E8%A8%80%EF%BC%8C%E7%82%B9%E5%87%BB%E8%AF%95%E7%94%A8Ubuntu-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8817%EF%BC%89%E9%80%89%E6%8B%A9%E8%AF%AD%E8%A8%80%EF%BC%8C%E7%82%B9%E5%87%BB%E8%AF%95%E7%94%A8Ubuntu" target="_self">（17）选择语言，点击试用Ubuntu</a></p><p id="%EF%BC%8818%EF%BC%89%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8818%EF%BC%89%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F" target="_self">（18）点击左上角第一个的安装程序</a></p><p id="%EF%BC%8819%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8819%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD" target="_self">（19）点击继续</a></p><p id="%EF%BC%8820%EF%BC%89%E9%9C%80%E8%A6%81%E8%81%94%E7%BD%91-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8820%EF%BC%89%E9%9C%80%E8%A6%81%E8%81%94%E7%BD%91" target="_self">（20）需要联网</a></p><p id="%EF%BC%8821%EF%BC%89%E9%80%89%E6%8B%A9%E5%B7%B2%E6%9C%89%E5%88%86%E5%8C%BA%E7%9A%84%E6%8C%82%E8%BD%BD-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8821%EF%BC%89%E9%80%89%E6%8B%A9%E5%B7%B2%E6%9C%89%E5%88%86%E5%8C%BA%E7%9A%84%E6%8C%82%E8%BD%BD" target="_self">（21）选择已有分区的挂载</a></p><p id="%EF%BC%8822%EF%BC%89%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8822%EF%BC%89%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD" target="_self">（22）分区挂载</a></p><p id="%EF%BC%8823%EF%BC%89%E5%AE%89%E8%A3%85-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8823%EF%BC%89%E5%AE%89%E8%A3%85" target="_self">（23）安装</a></p><p id="%EF%BC%8824%EF%BC%89%E6%97%B6%E5%8C%BA%E9%80%89%E6%8B%A9-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8824%EF%BC%89%E6%97%B6%E5%8C%BA%E9%80%89%E6%8B%A9" target="_self">（24）时区选择</a></p><p id="%EF%BC%8825%EF%BC%89%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8825%EF%BC%89%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE" target="_self">（25）系统配置</a></p><p id="%EF%BC%8826%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD%E8%AF%95%E7%94%A8%EF%BC%8C%E5%85%B3%E6%9C%BA%E9%80%80%E5%87%BA-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8826%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD%E8%AF%95%E7%94%A8%EF%BC%8C%E5%85%B3%E6%9C%BA%E9%80%80%E5%87%BA" target="_self">（26）点击继续试用，关机退出</a></p><p id="%EF%BC%8827%EF%BC%89%E7%82%B9%E5%87%BB%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8827%EF%BC%89%E7%82%B9%E5%87%BB%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE" target="_self">（27）点击虚拟机设置</a></p><p id="%C2%A0%EF%BC%8828%EF%BC%89%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%AF%86%E5%88%AB%E9%AA%8C%E8%AF%81-toc" name="tableOfContents" style="margin-left:80px"><a href="#%C2%A0%EF%BC%8828%EF%BC%89%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%AF%86%E5%88%AB%E9%AA%8C%E8%AF%81" target="_self">&nbsp;（28）再次启动识别验证</a></p><p id="%EF%BC%8829%EF%BC%89BIOS%E8%AE%BE%E7%BD%AE%E5%B9%B6%E5%90%AF%E5%8A%A8Linux%20To%20Go-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%8829%EF%BC%89BIOS%E8%AE%BE%E7%BD%AE%E5%B9%B6%E5%90%AF%E5%8A%A8Linux%20To%20Go" target="_self">（29）BIOS设置并启动Linux To Go</a></p><p id="%E5%9B%9B%E3%80%81%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E5%9B%9B%E3%80%81%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA" target="_self">四、视频演示</a></p><p id="1.%20%E4%B8%89-2-%EF%BC%8829%EF%BC%89%E6%AD%A5%E9%AA%A4%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA%E9%93%BE%E6%8E%A5%EF%BC%9A-toc" name="tableOfContents" style="margin-left:0px"><a href="#1.%20%E4%B8%89-2-%EF%BC%8829%EF%BC%89%E6%AD%A5%E9%AA%A4%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA%E9%93%BE%E6%8E%A5%EF%BC%9A" target="_self">1. 三-2-（29）步骤视频演示链接：</a></p><p id="%E4%BA%94%E3%80%81%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%C2%A0-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%BA%94%E3%80%81%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%C2%A0" target="_self">五、补充说明&nbsp;</a></p><p id="1.%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%AF%BC%E8%87%B4%E5%90%AF%E5%8A%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%86%85%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF-toc" name="tableOfContents" style="margin-left:40px"><a href="#1.%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%AF%BC%E8%87%B4%E5%90%AF%E5%8A%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%86%85%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF" target="_self">1.对于移动硬盘使用不同的接口导致启动移动硬盘内的Ubuntu系统出现错误</a></p><p id="%EF%BC%881%EF%BC%89%E9%94%99%E8%AF%AF%E7%8E%B0%E8%B1%A1%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E9%94%99%E8%AF%AF%E7%8E%B0%E8%B1%A1%EF%BC%9A" target="_self">（1）错误现象：</a></p><p id="%EF%BC%882%EF%BC%89%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A" target="_self">（2）解决方法：</a></p><hr id="hr-toc" name="tableOfContents" /><h1><span style="color:#fe2c24">一、基础知识</span></h1><h2 id="1.GUID%E4%B8%8EGPT" name="1.GUID%E4%B8%8EGPT"><span style="color:#6eaad7">1.GUID与GPT</span></h2><h3 id="GUID%EF%BC%88%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6%EF%BC%89%E4%B8%8E%20GPT%EF%BC%88GUID%20%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%89%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%85%B3%E7%B3%BB" name="GUID%EF%BC%88%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6%EF%BC%89%E4%B8%8E%20GPT%EF%BC%88GUID%20%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%89%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%85%B3%E7%B3%BB">GUID（全局唯一标识符）与 GPT（GUID 分区表）的核心概念及关系</h3><h4 id="%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E5%AE%9A%E4%B9%89" name="%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E5%AE%9A%E4%B9%89">一、基础定义</h4><ol><li><p><strong>GUID（全局唯一标识符，Globally Unique Identifier）</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;是一种由算法生成的 128 位（16 字节）数字标识符，格式通常为&lt;code&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&lt;/code&gt;（如&lt;code&gt;C12A7328-F81F-11D2-BA4B-00A0C93EC93B&lt;/code&gt;）。&lt;/li&gt;&lt;li&gt;设计目标是在全球范围内保证唯一性，即使在不同设备或时间生成也不会重复。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;用途&lt;/strong&gt;：在计算机系统中用于标识各种资源（如分区、软件组件、网络节点等），避免命名冲突。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;GPT（GUID 分区表，GUID Partition Table）&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;是一种磁盘分区方案，作为 UEFI（统一可扩展固件接口）标准的一部分，替代传统的 MBR（主引导记录）分区表。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;核心特性&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;支持最大 18EB（约 180 亿 GB）的磁盘容量（远超 MBR 的 2TB 限制）。&lt;/li&gt;&lt;li&gt;最多可定义 128 个主分区（MBR 仅支持 4 个主分区或 3 主 + 1 扩展）。&lt;/li&gt;&lt;li&gt;提供分区表的冗余备份（在磁盘首尾各存储一份），增强数据可靠性。&lt;/li&gt;&lt;li&gt;通过 GUID 标识分区类型和用途，而非 MBR 的简单数字编码。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h4 id="%E4%BA%8C%E3%80%81GUID%20%E4%B8%8E%20GPT%20%E7%9A%84%E5%85%B3%E7%B3%BB" name="%E4%BA%8C%E3%80%81GUID%20%E4%B8%8E%20GPT%20%E7%9A%84%E5%85%B3%E7%B3%BB">二、GUID 与 GPT 的关系</h4><ol><li><p><strong>GUID 是 GPT 的核心标识机制</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;GPT 分区表中，每个分区都由一个唯一的 GUID 标识其类型和用途。例如：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;EFI 系统分区&lt;/strong&gt;：类型 GUID 固定为&lt;code&gt;C12A7328-F81F-11D2-BA4B-00A0C93EC93B&lt;/code&gt;。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Linux 文件系统分区&lt;/strong&gt;：类型 GUID 为&lt;code&gt;0FC63DAF-8483-4772-8E79-3D69D8477DE4&lt;/code&gt;。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Windows NTFS 分区&lt;/strong&gt;：类型 GUID 为&lt;code&gt;EBD0A0A2-B9E5-4433-87C0-68B6B72699C7&lt;/code&gt;。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;这些 GUID 由 UEFI 论坛统一分配，确保全球唯一性和跨平台兼容性。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;GPT 依赖 GUID 实现高级功能&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;分区类型识别&lt;/strong&gt;：UEFI 固件通过读取分区的 GUID 判断其用途（如是否为 EFI 系统分区），而非像 MBR 那样依赖分区表中的简单数字代码。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;分区唯一性&lt;/strong&gt;：每个 GPT 分区还有一个唯一的&lt;strong&gt;分区 GUID&lt;/strong&gt;（区别于类型 GUID），用于在系统中唯一标识该分区（类似 UUID）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;兼容性与扩展性&lt;/strong&gt;：GUID 的全球唯一性使得不同操作系统（如 Windows、Linux、macOS）能统一识别和管理 GPT 分区，避免冲突。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h4 id="%E4%B8%89%E3%80%81%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" name="%E4%B8%89%E3%80%81%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">三、技术对比与应用场景</h4><table><thead><tr><th><strong>特性</strong></th><th><strong>GUID</strong></th><th><strong>GPT</strong></th></tr></thead><tbody><tr><td><strong>本质</strong></td><td>128 位唯一标识符</td><td>磁盘分区表格式</td></tr><tr><td><strong>用途</strong></td><td>标识分区类型、软件组件等资源</td><td>管理磁盘分区结构（替代 MBR）</td></tr><tr><td><strong>依赖关系</strong></td><td>GPT 必须使用 GUID 标识分区类型</td><td>无直接依赖，但通常与 UEFI 固件配合使用</td></tr><tr><td><strong>应用场景</strong></td><td>所有需要唯一标识的场景（如分区、对象）</td><td>大容量硬盘（&ge;2TB）、UEFI 系统</td></tr></tbody></table><h4 id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93" name="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93">四、总结</h4><ul><li><strong>GUID</strong>是一种生成唯一标识符的技术，为 GPT 分区表提供了标准化的分区类型标识方案。</li><li><strong>GPT</strong>是基于 GUID 的分区表格式，通过 GUID 实现了分区类型的全球统一识别和大规模磁盘管理能力。</li><li><strong>关系</strong>：GUID 是 GPT 的技术基础之一，GPT 是 GUID 在磁盘分区领域的具体应用。两者共同推动了现代存储系统的发展，尤其是在大容量硬盘和 UEFI 系统中成为标配。</li></ul><h2 id="%C2%A02.ESP%E4%B8%8EMSR" name="%C2%A02.ESP%E4%B8%8EMSR"><span style="color:#6eaad7">2.ESP与MSR</span></h2><p>要理解&nbsp;<strong>ESP</strong>&nbsp;和&nbsp;<strong>MSR</strong>，需结合&nbsp;<strong>GPT 分区表</strong>&nbsp;和&nbsp;<strong>UEFI 启动架构</strong>&nbsp;来分析，以下是详细解析：</p><h3 id="%E4%B8%80%E3%80%81ESP%20%E5%88%86%E5%8C%BA%EF%BC%88EFI%20System%20Partition%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89" name="%E4%B8%80%E3%80%81ESP%20%E5%88%86%E5%8C%BA%EF%BC%88EFI%20System%20Partition%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89"><strong>一、ESP 分区（EFI System Partition，EFI 系统分区）</strong></h3><h4 id="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89" name="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89">1. 核心定义</h4><ul><li>是&nbsp;<strong>GPT 磁盘</strong>&nbsp;下，支持&nbsp;<strong>UEFI 启动模式</strong>&nbsp;的<strong>必选分区</strong>（Legacy/MBR 架构无此分区）。</li><li>文件系统：<strong>FAT32</strong>（少数情况用 FAT16），需被 UEFI 固件识别。</li></ul><h4 id="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8" name="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8">2. 功能与作用</h4><ul><li><strong>启动核心</strong>：存储 UEFI 启动程序（如 Windows Boot Manager、GRUB 引导器）、系统驱动（如显卡 UEFI 驱动）、系统维护工具（如启动修复工具）。</li><li><strong>多系统兼容</strong>：同一台电脑安装 Windows、Linux 等多系统时，ESP 是所有系统<strong>共享的引导文件存储区</strong>，避免每个系统单独维护引导。</li><li><strong>安全隔离</strong>：UEFI 固件直接从 ESP 加载引导程序，与操作系统分区（如 C 盘）分离，降低引导文件被破坏的风险。</li></ul><h4 id="3.%20%E7%89%B9%E7%82%B9" name="3.%20%E7%89%B9%E7%82%B9">3. 特点</h4><ul><li><strong>大小灵活</strong>：通常建议&nbsp;<strong>100&ndash;500MB</strong>（Windows 安装默认 100MB，多系统或复杂引导场景可扩至 300MB 以上）。</li><li><strong>可见性</strong>：在 Windows 资源管理器中默认隐藏（需通过磁盘管理工具查看），但可手动挂载访问。</li></ul><h3 id="%E4%BA%8C%E3%80%81MSR%20%E5%88%86%E5%8C%BA%EF%BC%88Microsoft%20Reserved%20Partition%EF%BC%8C%E5%BE%AE%E8%BD%AF%E4%BF%9D%E7%95%99%E5%88%86%E5%8C%BA%EF%BC%89" name="%E4%BA%8C%E3%80%81MSR%20%E5%88%86%E5%8C%BA%EF%BC%88Microsoft%20Reserved%20Partition%EF%BC%8C%E5%BE%AE%E8%BD%AF%E4%BF%9D%E7%95%99%E5%88%86%E5%8C%BA%EF%BC%89"><strong>二、MSR 分区（Microsoft Reserved Partition，微软保留分区）</strong></h3><h4 id="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89" name="1.%20%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89">1. 核心定义</h4><ul><li>是&nbsp;<strong>GPT 磁盘</strong>&nbsp;下，<strong>微软为 Windows 系统预留的专属分区</strong>（Linux、macOS 系统无需此分区）。</li><li>无文件系统，也<strong>无法直接访问</strong>（Windows 系统后台管理）。</li></ul><h4 id="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8" name="2.%20%E5%8A%9F%E8%83%BD%E4%B8%8E%E4%BD%9C%E7%94%A8">2. 功能与作用</h4><ul><li><strong>动态磁盘支持</strong>：将 Windows 基本磁盘转换为<strong>动态磁盘</strong>（用于磁盘镜像、条带化等高级功能）时，MSR 会存储动态磁盘的元数据（如分区映射关系）。</li><li><strong>BitLocker 加密</strong>：可能存储加密密钥的备份或元数据（辅助 BitLocker 功能）。</li><li><strong>分区调整缓冲</strong>：Windows 调整分区大小时，MSR 提供临时空间保障操作稳定（类似 &ldquo;安全缓冲区&rdquo;）。</li></ul><h4 id="3.%20%E7%89%B9%E7%82%B9" name="3.%20%E7%89%B9%E7%82%B9">3. 特点</h4><ul><li><strong>大小规则</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;磁盘容量 &amp;lt;16GB 时，MSR 通常 32MB；&lt;/li&gt;&lt;li&gt;磁盘容量 &amp;ge;16GB 时，Win10/11 默认&amp;nbsp;&lt;strong&gt;16MB&lt;/strong&gt;（早期 Windows 版本可能 128MB）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;必要性&lt;/strong&gt;：对 Windows 并非 &amp;ldquo;启动必需&amp;rdquo;，但删除后可能导致&amp;nbsp;&lt;strong&gt;动态磁盘转换、BitLocker 等功能异常&lt;/strong&gt;。&lt;/li&gt;</code></pre></ul><h3 id="%E4%B8%89%E3%80%81ESP%20%E5%92%8C%20MSR%20%E7%9A%84%E5%85%B3%E7%B3%BB" name="%E4%B8%89%E3%80%81ESP%20%E5%92%8C%20MSR%20%E7%9A%84%E5%85%B3%E7%B3%BB"><strong>三、ESP 和 MSR 的关系</strong></h3><table><thead><tr><th><strong>维度</strong></th><th><strong>ESP 分区</strong></th><th><strong>MSR 分区</strong></th></tr></thead><tbody><tr><td><strong>依赖架构</strong></td><td>必须搭配&nbsp;<strong>GPT 磁盘 + UEFI 启动</strong></td><td>必须搭配&nbsp;<strong>GPT 磁盘 + Windows 系统</strong></td></tr><tr><td><strong>核心角色</strong></td><td>负责<strong>系统启动</strong>（存引导文件）</td><td>负责<strong>Windows 高级功能支持</strong>（动态磁盘、加密等）</td></tr><tr><td><strong>跨系统兼容性</strong></td><td>支持 Windows、Linux、macOS 等多系统</td><td>仅对 Windows 有效，Linux/macOS 可忽略</td></tr><tr><td><strong>创建时机</strong></td><td>安装 UEFI 系统时自动创建（或手动建）</td><td>安装 Windows（GPT 磁盘）时自动创建</td></tr></tbody></table><h4 id="%E5%85%B3%E9%94%AE%E8%81%94%E7%B3%BB%EF%BC%9A" name="%E5%85%B3%E9%94%AE%E8%81%94%E7%B3%BB%EF%BC%9A">关键联系：</h4><ol><li><strong>同属 GPT 生态</strong>：两者仅存在于&nbsp;<strong>GPT 分区表</strong>&nbsp;的磁盘中（MBR 磁盘无这两个分区）。</li><li><strong>UEFI 依赖 ESP</strong>：MSR 本身不影响启动，但 ESP 是 UEFI 系统启动的<strong>必要条件</strong>（无 ESP 则 UEFI 无法加载引导程序）。</li></ol><h3 id="%E5%9B%9B%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%BB%BA%E8%AE%AE" name="%E5%9B%9B%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%BB%BA%E8%AE%AE"><strong>四、实际应用建议</strong></h3><ul><li><strong>装 Windows（GPT+UEFI）</strong>：系统会自动创建&nbsp;<strong>ESP（100MB）+ MSR（16MB）</strong>，无需手动调整（删除 MSR 可能影响动态磁盘等功能）。</li><li><strong>装 Linux（GPT+UEFI）</strong>：需手动创建&nbsp;<strong>ESP（建议 300MB，存 GRUB 引导）</strong>，<strong>MSR 可跳过</strong>（Linux 不用其功能）。</li><li><strong>多系统共存</strong>：ESP 共享，MSR 仅 Windows 需要（Linux 分区无需包含 MSR）。</li></ul><p>简单总结：</p><ul><li><strong>ESP 是 &ldquo;启动命脉&rdquo;</strong>：UEFI 系统启动的核心载体；</li><li><strong>MSR 是 &ldquo;Windows 后盾&rdquo;</strong>：为 Windows 高级功能提供底层支持；</li><li>两者因 GPT 分区表而存在，共同支撑现代 UEFI 系统的启动和管理。</li></ul><h2 id="3.boot%E4%B8%8EESP%EF%BC%88EFI%EF%BC%89" name="3.boot%E4%B8%8EESP%EF%BC%88EFI%EF%BC%89"><span style="color:#6eaad7">3.Reserved BIOS Boot Area与EFI System Partition（ESP）</span></h2><p>&ldquo;Reserved BIOS boot area&rdquo; 和 &ldquo;EFI System Partition&rdquo;（ESP）有什么区别？能不能把<code>/boot</code>装在 ESP 里？首先得回忆这两个区域的背景，分别对应 BIOS（Legacy）和 UEFI 引导模式。</p><p>首先分析两个分区的定义：</p><h3 id="%E4%B8%80%E3%80%81Reserved%20BIOS%20Boot%20Area%EF%BC%88BIOS%20%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%88%E7%A7%B0%20BIOS%20Boot%20Partition%EF%BC%89" name="%E4%B8%80%E3%80%81Reserved%20BIOS%20Boot%20Area%EF%BC%88BIOS%20%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%88%E7%A7%B0%20BIOS%20Boot%20Partition%EF%BC%89">一、Reserved BIOS Boot Area（BIOS 引导分区，又称 BIOS Boot Partition）</h3><ul><li><strong>适用场景</strong>：针对传统 BIOS（Legacy）引导 + GPT 磁盘的情况。因为传统 BIOS 原本只支持 MBR 磁盘，当用 GPT 磁盘装 Linux 时，GRUB 需要一个保留区域来存储引导代码（因为 GPT 的保护 MBR 没有足够空间放 GRUB 的 stage1 代码）。</li><li><strong>特点</strong>：<ul><li>无文件系统，是一个 &ldquo;原始&rdquo; 分区，类型 GUID 为<code>21686148-6449-6E6F-744E-656564454649</code>（或通过<code>gdisk</code>里的<code>bios_grub</code>标识）。</li><li>大小很小（通常 1~8MB），只存 GRUB 的引导 Stub，让 BIOS 能链式加载 GRUB。</li><li>仅在<strong>BIOS 引导 + GPT 磁盘</strong>时需要，纯 MBR 磁盘或 UEFI 引导都用不上。</li></ul></li></ul><h3 id="%E4%BA%8C%E3%80%81EFI%20System%20Partition%EF%BC%88ESP%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89" name="%E4%BA%8C%E3%80%81EFI%20System%20Partition%EF%BC%88ESP%EF%BC%8CEFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%89">二、EFI System Partition（ESP，EFI 系统分区）</h3><ul><li><strong>适用场景</strong>：UEFI 引导 + GPT 磁盘（UEFI 只支持 GPT）。</li><li><strong>特点</strong>：<ul><li>必须是 FAT32 文件系统（UEFI 固件原生支持），类型 GUID 为<code>C12A7328-F81F-11D2-BA4B-00A0C93EC93B</code>。</li><li>存储 UEFI 引导程序（如 Windows Boot Manager、GRUB 的 UEFI 版本）、驱动、启动配置文件（.efi 文件）。</li><li>多系统共存时，ESP 是共享的引导区，比如 Windows 和 Linux 的引导程序都放在这里。</li><li>大小建议 100~500MB，需被 UEFI 固件识别为启动分区。</li></ul></li></ul><h3 id="%E4%B8%89%E3%80%81%E4%B8%A4%E8%80%85%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB" name="%E4%B8%89%E3%80%81%E4%B8%A4%E8%80%85%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB">三、两者核心区别</h3><table><thead><tr><th><strong>维度</strong></th><th>Reserved BIOS Boot Area（BIOS 引导分区）</th><th>EFI System Partition（ESP）</th></tr></thead><tbody><tr><td><strong>引导模式</strong></td><td>仅用于 **BIOS（Legacy）** 引导</td><td>仅用于<strong>UEFI</strong>引导</td></tr><tr><td><strong>磁盘分区表</strong></td><td>搭配<strong>GPT 磁盘</strong>（因为 MBR 磁盘不需要，BIOS 直接读 MBR）</td><td>搭配<strong>GPT 磁盘</strong>（UEFI 只支持 GPT）</td></tr><tr><td><strong>文件系统</strong></td><td>无文件系统（ raw 分区）</td><td>必须是<strong>FAT32</strong>（UEFI 原生支持）</td></tr><tr><td><strong>存储内容</strong></td><td>GRUB 的引导 Stub（让 BIOS 识别 GPT 磁盘的引导）</td><td>UEFI 引导程序（.efi）、启动配置等</td></tr><tr><td><strong>必要性</strong></td><td>BIOS+GPT 时必须，否则 GRUB 无法安装</td><td>UEFI 引导时必须，否则无法启动</td></tr><tr><td><strong>跨系统兼容</strong></td><td>仅 Linux（GRUB）使用</td><td>支持 Windows、Linux、macOS 等多系统</td></tr></tbody></table><h3 id="%E5%9B%9B%E3%80%81%E8%83%BD%E4%B8%8D%E8%83%BD%E6%8A%8A%2Fboot%E8%A3%85%E5%9C%A8%20ESP%20%E9%87%8C%EF%BC%9F" name="%E5%9B%9B%E3%80%81%E8%83%BD%E4%B8%8D%E8%83%BD%E6%8A%8A%2Fboot%E8%A3%85%E5%9C%A8%20ESP%20%E9%87%8C%EF%BC%9F">四、能不能把<code>/boot</code>装在 ESP 里？</h3><h4 id="%E7%90%86%E8%AE%BA%E4%B8%8A%EF%BC%9A%E5%8F%AF%E4%BB%A5%EF%BC%8C%E4%BD%86%E9%9C%80%E5%88%86%E6%83%85%E5%86%B5" name="%E7%90%86%E8%AE%BA%E4%B8%8A%EF%BC%9A%E5%8F%AF%E4%BB%A5%EF%BC%8C%E4%BD%86%E9%9C%80%E5%88%86%E6%83%85%E5%86%B5">理论上：可以，但需分情况</h4><ul><li><p><strong>UEFI 引导场景</strong>：<br />ESP 本身就是存储引导文件的地方，而 Linux 的<code>/boot</code>主要存内核、initramfs、GRUB 配置。在 UEFI 模式下，<strong>GRUB 的 UEFI 版本（grubx64.efi）存放在 ESP</strong>，而内核和 initramfs 可以放在 ESP 里，也可以放在其他分区（但 ESP 必须有引导程序）。</p><pre><code class="hljs">&lt;p&gt;实际操作中：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;可以将&lt;code&gt;/boot&lt;/code&gt;直接挂载到 ESP 分区（即 ESP 同时作为&lt;code&gt;/boot&lt;/code&gt;），这样内核、initramfs、GRUB 的配置和引导程序都在 ESP 里。&lt;/li&gt;&lt;li&gt;优点：简化分区，减少一个分区（不用单独分&lt;code&gt;/boot&lt;/code&gt;）。&lt;/li&gt;&lt;li&gt;注意：ESP 必须是 FAT32，而 Linux 的&lt;code&gt;/boot&lt;/code&gt;里的文件（如内核）本身支持存放在 FAT32，但需确保权限和兼容性（FAT32 无权限位，不过 UEFI 引导不关心 Linux 权限，只要引导程序能读就行）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;BIOS 引导场景&lt;/strong&gt;：&lt;br /&gt;不行，因为 BIOS 引导时 ESP 是 UEFI 的分区，BIOS 根本不识别 FAT32 的 ESP（BIOS 只认 MBR 或 BIOS 引导分区），所以 BIOS 模式下&lt;code&gt;/boot&lt;/code&gt;必须放在支持的分区（如 Ext4），且需要 Reserved BIOS Boot Area 来辅助引导。&lt;/p&gt;&lt;/li&gt;</code></pre></ul><h4 id="%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88UEFI%20%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%89%EF%BC%9A" name="%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE%EF%BC%88UEFI%20%E6%A8%A1%E5%BC%8F%E4%B8%8B%EF%BC%89%EF%BC%9A">实践建议（UEFI 模式下）：</h4><ul><li><p><strong>推荐做法</strong>：将 ESP 和<code>/boot</code>分开还是合并？</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;合并&lt;/strong&gt;：ESP 直接作为&lt;code&gt;/boot&lt;/code&gt;（挂载到&lt;code&gt;/boot&lt;/code&gt;），适合简单场景，减少分区数量。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;分开&lt;/strong&gt;：ESP 只存 UEFI 引导程序（.efi 文件），&lt;code&gt;/boot&lt;/code&gt;单独分 Ext4 分区存内核、initramfs。优点是&lt;code&gt;/boot&lt;/code&gt;的 Ext4 支持更完整的 Linux 权限和特性，避免 FAT32 的限制（比如大文件？不过内核一般没那么大，FAT32 支持到 4GB，足够）。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;实际中，很多 Linux 发行版（如 Ubuntu）在 UEFI 安装时，会自动创建 ESP（挂载到&lt;code&gt;/boot/efi&lt;/code&gt;），而&lt;code&gt;/boot&lt;/code&gt;单独分 Ext4 分区，这样：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ESP 里存&lt;code&gt;grubx64.efi&lt;/code&gt;和启动配置（&lt;code&gt;/boot/efi/EFI/ubuntu/&lt;/code&gt;）。&lt;/li&gt;&lt;li&gt;&lt;code&gt;/boot&lt;/code&gt;里存内核、initramfs、GRUB 的配置（&lt;code&gt;/boot/grub/&lt;/code&gt;）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3 id="%E6%80%BB%E7%BB%93%EF%BC%9A" name="%E6%80%BB%E7%BB%93%EF%BC%9A">总结：</h3><ol><li><p><strong>区别</strong>：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;Reserved BIOS Boot Area 是 BIOS+GPT 时的 &amp;ldquo;引导补丁&amp;rdquo;，无文件系统，只辅助 GRUB 启动。&lt;/li&gt;&lt;li&gt;ESP 是 UEFI+GPT 的 &amp;ldquo;引导核心&amp;rdquo;，必须 FAT32，存多系统引导程序。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;/boot&lt;/code&gt;能否装在 ESP 里&lt;/strong&gt;：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;UEFI 模式&lt;/strong&gt;：可以（甚至发行版有时默认将&lt;code&gt;/boot/efi&lt;/code&gt;指向 ESP，而&lt;code&gt;/boot&lt;/code&gt;单独存在），但需注意文件系统兼容性（FAT32 足够存内核和 initramfs）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;BIOS 模式&lt;/strong&gt;：不行，BIOS 不识别 ESP，必须用 Reserved BIOS Boot Area + 传统&lt;code&gt;/boot&lt;/code&gt;分区（Ext4 等）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>简单说：UEFI 下，ESP 和<code>/boot</code>可以关联（甚至部分重叠），但 BIOS 下两者完全无关，且 ESP 没用。建议还是将/boot（传统BIOS）与ESP（UEFI）两个部分分开。</p><h1 id="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" name="%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span style="color:#fe2c24">二、准备工作</span></h1><h2 id="1.%E8%BD%AF%E4%BB%B6%E6%96%B9%E9%9D%A2" name="1.%E8%BD%AF%E4%BB%B6%E6%96%B9%E9%9D%A2">1.软件方面</h2><p><strong>（1）硬盘分区软件：</strong>DiskGenius</p><p><strong>（2）虚拟机软件：</strong>VMware Workstation Pro</p><p><strong>（3）ubuntu-22.04.5桌面版系统镜像：<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="ubuntu-22.04.5-desktop-amd64.iso" href="https://releases.ubuntu.com/22.04.5/" title="ubuntu-22.04.5-desktop-amd64.iso">ubuntu-22.04.5-desktop-amd64.iso</a></strong></p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/1aac3a359b604392afe32dbd063d21e4.jpeg"></p><h2 id="2.%E7%A1%AC%E4%BB%B6%E6%96%B9%E9%9D%A2" name="2.%E7%A1%AC%E4%BB%B6%E6%96%B9%E9%9D%A2">2.硬件方面</h2><p><strong>（1）运行平台：</strong>一台能够运行Linux to go的电脑</p><p><strong>（2）Linux to go载体：</strong>一个至少32G以上的优质U盘，或者一块移动固态硬盘</p><p>注：笔者所用的是三星T7 shield的1T版本的移动固态硬盘。</p><h1 id="%E4%B8%89%E3%80%81%E6%AD%A3%E5%BC%8F%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B" name="%E4%B8%89%E3%80%81%E6%AD%A3%E5%BC%8F%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B"><span style="color:#fe2c24">三、正式操作过程</span></h1><h2 id="1.%E5%AF%B9%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8C%BA" name="1.%E5%AF%B9%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E5%88%86%E5%8C%BA">1.对移动固态硬盘进行分区</h2><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="分区分配方案参考链接" href="https://blog.csdn.net/qq_73648789/article/details/149438228?sharetype=blogdetail&amp;sharerId=149438228&amp;sharerefer=PC&amp;sharesource=qq_73648789&amp;spm=1011.2480.3001.8118" title="分区分配方案参考链接">分区分配方案参考链接</a></p><h3 id="%EF%BC%881%EF%BC%89%E9%A6%96%E5%85%88%EF%BC%8C%E7%82%B9%E5%87%BB%E7%A9%BA%E7%9A%84%E7%A1%AC%E7%9B%98%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B9%B6%E5%88%A0%E6%8E%89%E6%89%80%E6%9C%89%E5%88%86%E5%8C%BA%EF%BC%8C%E5%9C%A8%E6%AD%A4%E4%B9%8B%E5%89%8D%E6%B3%A8%E6%84%8F%E5%A4%87%E4%BB%BD%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82" name="%EF%BC%881%EF%BC%89%E9%A6%96%E5%85%88%EF%BC%8C%E7%82%B9%E5%87%BB%E7%A9%BA%E7%9A%84%E7%A1%AC%E7%9B%98%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B9%B6%E5%88%A0%E6%8E%89%E6%89%80%E6%9C%89%E5%88%86%E5%8C%BA%EF%BC%8C%E5%9C%A8%E6%AD%A4%E4%B9%8B%E5%89%8D%E6%B3%A8%E6%84%8F%E5%A4%87%E4%BB%BD%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82">（1）首先，点击空的硬盘，对于移动固态硬盘进行格式化并删掉所有分区，在此之前注意备份好自己的数据。</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/306c12d682c94e508af9e92a5c4fccb5.png"></p><h3 id="%EF%BC%882%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E8%BD%AC%E6%8D%A2%E4%B8%BAGUID%E6%A0%BC%E5%BC%8F" name="%EF%BC%882%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E8%BD%AC%E6%8D%A2%E4%B8%BAGUID%E6%A0%BC%E5%BC%8F">（2）分区表转换为GUID格式</h3><p>为什么使用GUID？因为我们现在主流使用的是UEFI引导+GPT分区表的方式，而没有使用Legacy BIOS+MBR的方式，GPT分区表依赖于GUID。</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/050648b0c6024a5fa23cdecced0793f3.png"></p><h3 id="%EF%BC%883%EF%BC%89%E5%8F%B3%E5%87%BB%E7%81%B0%E8%89%B2%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA" name="%EF%BC%883%EF%BC%89%E5%8F%B3%E5%87%BB%E7%81%B0%E8%89%B2%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA">（3）右击灰色部分，创建引导分区</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/4f31f5a368de45d68e20921e4190b3c6.png"></p><h3 id="%EF%BC%884%EF%BC%89%E7%82%B9%E5%87%BB%E5%BB%BA%E7%AB%8BESP%2FMSR%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%96%E6%B6%88%E5%8B%BE%E9%80%89%E5%BB%BA%E7%AB%8BMSR%EF%BC%8C%E6%88%91%E9%80%89%E6%8B%A9%E7%9A%84%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%BA1GB" name="%EF%BC%884%EF%BC%89%E7%82%B9%E5%87%BB%E5%BB%BA%E7%AB%8BESP%2FMSR%E5%88%86%E5%8C%BA%EF%BC%8C%E5%8F%96%E6%B6%88%E5%8B%BE%E9%80%89%E5%BB%BA%E7%AB%8BMSR%EF%BC%8C%E6%88%91%E9%80%89%E6%8B%A9%E7%9A%84%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F%E4%B8%BA1GB">（4）点击建立ESP/MSR分区，取消勾选建立MSR，我选择的分区大小为1GB</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ae2158a9b52e449b94ee874a75ec45c6.jpeg"></p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/d423bbf8a5f246be89b04cfe99babe21.png"></p><h3 id="%EF%BC%885%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%BB%BA%E7%AB%8Bswap%E5%88%86%E5%8C%BA" name="%EF%BC%885%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%BB%BA%E7%AB%8Bswap%E5%88%86%E5%8C%BA">（5）建立新分区，建立swap分区</h3><p>不用管，直接点取消</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/58c7c48cbeac4775be8ec83157eaaa54.png"></p><p>找到swap分区类型，swap分区并不是越大越好</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/c28db8e3d00b4847a05aacbbf605a442.png"></p><p>配置如下：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/6142124614444be7a7f1cebab4029069.png"></p><h3 id="%EF%BC%886%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%882%EF%BC%89%E6%98%AF%E4%BD%9C%E4%B8%BA%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%883%EF%BC%89%E4%BD%9C%E4%B8%BA%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E9%83%BD%E6%98%AFext4%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%9E%E9%99%85%E9%9C%80%E6%B1%82%E9%85%8D%E7%BD%AE%E3%80%82" name="%EF%BC%886%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%882%EF%BC%89%E6%98%AF%E4%BD%9C%E4%B8%BA%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%883%EF%BC%89%E4%BD%9C%E4%B8%BA%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89%E8%BD%BD%E4%BD%93%EF%BC%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E9%83%BD%E6%98%AFext4%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%9E%E9%99%85%E9%9C%80%E6%B1%82%E9%85%8D%E7%BD%AE%E3%80%82">（6）建立新分区，分区（2）是作为根目录（/）载体，分区（3）作为家目录（/home）载体，文件系统类型都是ext4，根据自己的实际需求配置。</h3><p><strong>规则：硬盘分区（存储设备） &rarr; 挂载 &rarr; 挂载点（目录）</strong><br />即：<strong>分区被挂载到挂载点目录上</strong>，用户通过访问挂载点目录，间接操作分区里的文件。</p><p>分区（2）被挂载到根目录（/）</p><p>分区（3）被挂载到家目录（/home）</p><p>分区（2）：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/cd6872bff86a47dab53a30e6eb178bc4.png"></p><p>分区（3）：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/9b48745276904bd9a42cb170ae55267a.png"></p><h3 id="%C2%A0%EF%BC%887%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%884%EF%BC%89%E4%BD%9C%E4%B8%BAUbuntu%E5%92%8CWindows%E4%B8%8B%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4" name="%C2%A0%EF%BC%887%EF%BC%89%E5%BB%BA%E7%AB%8B%E6%96%B0%E5%88%86%E5%8C%BA%EF%BC%8C%E5%88%86%E5%8C%BA%EF%BC%884%EF%BC%89%E4%BD%9C%E4%B8%BAUbuntu%E5%92%8CWindows%E4%B8%8B%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4">&nbsp;（7）建立新分区，分区（4）作为Ubuntu和Windows下的存储空间</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/f1046010a1c34f5d8c682e57a0eabb82.png"></p><h3 id="%EF%BC%888%EF%BC%89%E5%88%86%E5%8C%BA%E5%AE%8C%E6%88%90" name="%EF%BC%888%EF%BC%89%E5%88%86%E5%8C%BA%E5%AE%8C%E6%88%90">（8）分区完成</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/23714d87d8e8492c865056855c4454f6.png"></p><p>（9）一定要保存更改</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/b915611f95ee47cbbe21c16a5d16fa3e.png">https://i-blog.csdnimg.cn/direct/b915611f95ee47cbbe21c16a5d16fa3e.png</a>“ width&#x3D;”1511” &#x2F;&gt;&nbsp;&lt;img alt&#x3D;)</p><p>（10）磁盘效果</p><p>&nbsp;<img alt="" height="96" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/a5739e1ca5cd455183c49f23348799f6.png" width="588" /></p><p><span style="background-color:#f9eda6">注：为什么需要使用DiskGenius提前对移动固态硬盘行分区，而不是使用虚拟机的Ubuntu试用版内置分区功能？因为Ubuntu试用版内置分区功能有些时候并不可靠，如：出现不与移动固态硬盘匹配的字节不对齐情况；对部分品牌移动硬盘的 USB 控制器或芯片组兼容性较差，可能出现 &ldquo;分区表写入失败&rdquo; 却无明确提示的情况，后续启动时才发现设备无法识别等情况。</span></p><h2 id="2.%E5%80%9F%E5%8A%A9%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%B8%8A%E5%AE%89%E8%A3%85Ubuntu" name="2.%E5%80%9F%E5%8A%A9%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%B8%8A%E5%AE%89%E8%A3%85Ubuntu">2.借助虚拟机来在移动硬盘上安装Ubuntu</h2><p>首先要以管理员身份运行VMware</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ee10b7300656414eb05bbab71d99c465.png"></p><h3 id="%EF%BC%881%EF%BC%89%E5%9C%A8VMware%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%AE%89%E8%A3%85ubuntu-22.04.5%E6%A1%8C%E9%9D%A2%E7%89%88%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F" name="%EF%BC%881%EF%BC%89%E5%9C%A8VMware%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9D%A5%E5%AE%89%E8%A3%85ubuntu-22.04.5%E6%A1%8C%E9%9D%A2%E7%89%88%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F">（1）在VMware中创建虚拟机来安装<strong>ubuntu-22.04.5桌面版系统镜像</strong></h3><p>为什么要使用虚拟机呢？因为通过虚拟机更方便去安装并配置在移动固态硬盘上的Ubuntu系统，尤其是固化Ubuntu系统的引导程序在移动固态硬盘上以便通过BIOS设置多种系统盘的优先级来实现插上移动固态硬盘直接开机进入到其中的Ubuntu系统，而不用PE U盘做引导。</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/331efaeda0a64619a4d9ec933b585721.png"></p><h3 id="%EF%BC%882%EF%BC%89%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5" name="%EF%BC%882%EF%BC%89%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E8%A3%85%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5">（2）选择自定义安装，然后点击下一步</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/d657b8457de54171913946f657dec703.png"></p><h3 id="%EF%BC%883%EF%BC%89%E6%A0%B9%E6%8D%AE%E9%BB%98%E8%AE%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5" name="%EF%BC%883%EF%BC%89%E6%A0%B9%E6%8D%AE%E9%BB%98%E8%AE%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5">（3）根据默认虚拟机，点击下一步</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/bfa20642e0294f71b338bc45444433d3.png"></p><p>默认配置，点击下一步</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/0e8f6d5f9c6942f59d81d6d166e6959b.png"></p><p>默认操作系统，点击下一步</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/42f320f7120f414cb6827bed3964cea0.png"></p><h3 id="%EF%BC%884%EF%BC%89%E9%9A%8F%E6%84%8F%E5%91%BD%E5%90%8D%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8D%E5%AD%97%EF%BC%88%E9%99%A4%E4%BA%86%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%EF%BC%89%EF%BC%8C%E9%9A%8F%E6%84%8F%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%E5%AD%98%E6%94%BE" name="%EF%BC%884%EF%BC%89%E9%9A%8F%E6%84%8F%E5%91%BD%E5%90%8D%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8D%E5%AD%97%EF%BC%88%E9%99%A4%E4%BA%86%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%96%87%EF%BC%89%EF%BC%8C%E9%9A%8F%E6%84%8F%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%E5%AD%98%E6%94%BE">（4）随意命名虚拟机名字（除了不使用中文），随意找到一个存储位置存放</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/64397321ad344a398ae8552cf5977a58.png"></p><h3 id="%EF%BC%885%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%9A%8F%E6%84%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E6%9C%80%E5%90%8E%E7%9A%84%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E6%98%AF%E6%88%91%E4%BB%AC%E7%9A%84%E7%89%A9%E7%90%86%E6%9C%BA%EF%BC%8C%E9%80%9A%E8%BF%87UEFI%20BIOS%E5%90%AF%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E4%B8%8A%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F" name="%EF%BC%885%EF%BC%89%E5%A4%84%E7%90%86%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%9A%8F%E6%84%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E6%9C%80%E5%90%8E%E7%9A%84%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E6%98%AF%E6%88%91%E4%BB%AC%E7%9A%84%E7%89%A9%E7%90%86%E6%9C%BA%EF%BC%8C%E9%80%9A%E8%BF%87UEFI%20BIOS%E5%90%AF%E5%8A%A8%E5%AD%98%E6%94%BE%E5%9C%A8%E7%A7%BB%E5%8A%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E4%B8%8A%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F">（5）处理器配置可以是随意的，因为我们最后的运行平台是我们的物理机，通过UEFI BIOS启动存放在移动固态硬盘上的Ubuntu系统</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/73a190e4ec394f4f9e53fa351e70abb5.png"></p><h3 id="%EF%BC%886%EF%BC%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE" name="%EF%BC%886%EF%BC%89%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE">（6）虚拟机内存设置</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/5328af5e277444b990df025e761d26f6.png"></p><h3 id="%EF%BC%887%EF%BC%89%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B" name="%EF%BC%887%EF%BC%89%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B">（7）默认网络类型</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/2e005b35e7f0440e9ffad09ee3fb9922.png"></p><h3 id="%EF%BC%888%EF%BC%89%E9%BB%98%E8%AE%A4I%2FO%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E5%9E%8B" name="%EF%BC%888%EF%BC%89%E9%BB%98%E8%AE%A4I%2FO%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB%E5%9E%8B">（8）默认I/O控制器类型</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/9e37fc30295743f7863d2450ec85f188.png"></p><h3 id="%EF%BC%889%EF%BC%89%E9%BB%98%E8%AE%A4%E7%A3%81%E7%9B%98%E7%B1%BB%E5%9E%8B" name="%EF%BC%889%EF%BC%89%E9%BB%98%E8%AE%A4%E7%A3%81%E7%9B%98%E7%B1%BB%E5%9E%8B">（9）默认磁盘类型</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/df230e9d49d3457ba4c86aadbf567428.png"></p><h3 id="%EF%BC%8810%EF%BC%89%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98" name="%EF%BC%8810%EF%BC%89%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E7%A3%81%E7%9B%98">（10）使用物理磁盘</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ba1b3580806642f9a886786511c14b91.png"></p><h3 id="%EF%BC%8811%EF%BC%89%E9%80%89%E6%8B%A9%E7%89%A9%E7%90%86%E7%9B%98%EF%BC%8C%E5%8D%B3%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98" name="%EF%BC%8811%EF%BC%89%E9%80%89%E6%8B%A9%E7%89%A9%E7%90%86%E7%9B%98%EF%BC%8C%E5%8D%B3%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98">（11）选择物理盘，即移动硬盘</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/2f97fe8483884ab48cabc682463df5a1.png"></p><p>出现下面的情况，需要使用管理员身份运行VM</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/3965abbbb9624ede9e9d768a690a18e1.png"></p><h3 id="%EF%BC%8812%EF%BC%89%E4%B8%8B%E4%B8%80%E6%AD%A5" name="%EF%BC%8812%EF%BC%89%E4%B8%8B%E4%B8%80%E6%AD%A5">（12）下一步</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/b7856b6fac4a4ee7bcab4ba1534a07c5.png"></p><h3 id="%EF%BC%8813%EF%BC%89%E7%82%B9%E5%87%BB%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6" name="%EF%BC%8813%EF%BC%89%E7%82%B9%E5%87%BB%E8%87%AA%E5%AE%9A%E4%B9%89%E7%A1%AC%E4%BB%B6">（13）点击自定义硬件</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/470bbc1dfe1d47fa93699565d15b2e93.png"></p><p>配置镜像</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ee1c6faaa8784aac9cf869e81f5ec4e5.png"></p><p>配置USB3.1</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/0040fb3130514bda98bac39cbd11d4d3.png"></p><h3 id="%EF%BC%8814%EF%BC%89%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90" name="%EF%BC%8814%EF%BC%89%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%82%B9%E5%87%BB%E5%AE%8C%E6%88%90">（14）配置完成，并返回点击完成</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/4a95af4073a543a69f7aa41f68c59138.png"></p><h3 id="%EF%BC%8815%EF%BC%89%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA" name="%EF%BC%8815%EF%BC%89%E5%BC%80%E5%90%AF%E8%99%9A%E6%8B%9F%E6%9C%BA" style="background-color:transparent">（15）开启虚拟机</h3><p>点击确定</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/3dea96da1037418b84c8fb35514a3a57.png"></p><p>点击确定</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/f149c875c9e54bbbb669767b5dec18de.png"></p><h3 id="%EF%BC%8816%EF%BC%89%E6%8C%89%E4%B8%8BENTER%E5%AE%89%E8%A3%85" name="%EF%BC%8816%EF%BC%89%E6%8C%89%E4%B8%8BENTER%E5%AE%89%E8%A3%85">（16）按下ENTER安装</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/2a76d8b4c49f45e1b04d14f0837e26ab.png"></p><h3 id="%EF%BC%8817%EF%BC%89%E9%80%89%E6%8B%A9%E8%AF%AD%E8%A8%80%EF%BC%8C%E7%82%B9%E5%87%BB%E8%AF%95%E7%94%A8Ubuntu" name="%EF%BC%8817%EF%BC%89%E9%80%89%E6%8B%A9%E8%AF%AD%E8%A8%80%EF%BC%8C%E7%82%B9%E5%87%BB%E8%AF%95%E7%94%A8Ubuntu">（17）选择语言，点击试用Ubuntu</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/f3af63cbc36344289eb21ec484c680ed.png"></p><p>（14）</p><p>左下角就是之前分好的分区</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/b551fa0e0fbf4822a56530b194ba9289.png"></p><p>查看分区</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/4cd289cd477d4f3388fe64b6442c82d9.png"></p><h3 id="%EF%BC%8818%EF%BC%89%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F" name="%EF%BC%8818%EF%BC%89%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F">（18）点击左上角第一个的安装程序</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/232f154514e14d21a92af79605f4bf98.png"></p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/d90274ed83644da69694e43efd56febd.png"></p><h3 id="%EF%BC%8819%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD" name="%EF%BC%8819%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD">（19）点击继续</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/6b0f098aaebb4061bd88913c6cb629d2.png"></p><h3 id="%EF%BC%8820%EF%BC%89%E9%9C%80%E8%A6%81%E8%81%94%E7%BD%91" name="%EF%BC%8820%EF%BC%89%E9%9C%80%E8%A6%81%E8%81%94%E7%BD%91">（20）需要联网</h3><p>&nbsp;<img alt="" height="693" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/0b055226455e46fb9fad30dde1d8dc56.png" width="859" /></p><h3 id="%EF%BC%8821%EF%BC%89%E9%80%89%E6%8B%A9%E5%B7%B2%E6%9C%89%E5%88%86%E5%8C%BA%E7%9A%84%E6%8C%82%E8%BD%BD" name="%EF%BC%8821%EF%BC%89%E9%80%89%E6%8B%A9%E5%B7%B2%E6%9C%89%E5%88%86%E5%8C%BA%E7%9A%84%E6%8C%82%E8%BD%BD">（21）选择已有分区的挂载</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/25d90f5ac7fd47ea8c76642be4af9206.png"></p><h3 id="%EF%BC%8822%EF%BC%89%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD" name="%EF%BC%8822%EF%BC%89%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD">（22）分区挂载</h3><p>boot：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/48c8f923d57c4a089212318d1d3cc38f.png"></p><p>最下面一定要选择引导程序位置在我们的移动固态硬盘设备</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/08088e9b0cc74f648e25098e8cd9773b.png"></p><p>swap：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/b55437e7df614de793b4ad7233fcdab7.png"></p><p>/：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/e3314e24225f44558ee11f3da36b1fb2.png"></p><p>/home：</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/6e3772974d8f4bcdbe9343735c02266c.png"></p><h3 id="%EF%BC%8823%EF%BC%89%E5%AE%89%E8%A3%85" name="%EF%BC%8823%EF%BC%89%E5%AE%89%E8%A3%85">（23）安装</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/893d0bb97ae04bd8b8082c14dd87192f.png"></p><p>点击继续，传统BIOS引导程序会找其他空间存放，我们使用的主流还是UEFI，传统BIOS存放空间可以自己在之前分区时分一个分区单独存放</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ed815d657e88406398ba3a3d032c6657.png"></p><p>点击继续</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/87e5d923065d4cbdb89505964fc92fe1.png"></p><p>点击继续</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/38c3ab1f23b248168d35ebd816fd70cc.png"></p><h3 id="%EF%BC%8824%EF%BC%89%E6%97%B6%E5%8C%BA%E9%80%89%E6%8B%A9" name="%EF%BC%8824%EF%BC%89%E6%97%B6%E5%8C%BA%E9%80%89%E6%8B%A9">（24）时区选择</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/67d7eb14bec54045b8e028e4a6949c6a.png"></p><h3 id="%EF%BC%8825%EF%BC%89%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE" name="%EF%BC%8825%EF%BC%89%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE">（25）系统配置</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/86dda6659cfb4cd1bda87dc844391580.png"></p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/a4b32b19ceec4415bafddcb9f97ab6e5.png"></p><h3 id="%EF%BC%8826%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD%E8%AF%95%E7%94%A8%EF%BC%8C%E5%85%B3%E6%9C%BA%E9%80%80%E5%87%BA" name="%EF%BC%8826%EF%BC%89%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD%E8%AF%95%E7%94%A8%EF%BC%8C%E5%85%B3%E6%9C%BA%E9%80%80%E5%87%BA">（26）点击继续试用，关机退出</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/ada93c272cdf4e2080215e721ca7d0c3.png"></p><h3 id="%EF%BC%8827%EF%BC%89%E7%82%B9%E5%87%BB%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE" name="%EF%BC%8827%EF%BC%89%E7%82%B9%E5%87%BB%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%AE%BE%E7%BD%AE">（27）点击虚拟机设置</h3><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/595d400dc654441e92c1d634a8f49b9e.png"></p><p>取消勾选启动时连接</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/f162df57af3c4177b06390ad7474f10e.png"></p><p>选择UEFI</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/63adfbce478342069f6aebf174464a13.png"></p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/085aea5cd74c457a9682ea4b15aed6b1.png"></p><h3 id="%C2%A0%EF%BC%8828%EF%BC%89%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%AF%86%E5%88%AB%E9%AA%8C%E8%AF%81" name="%C2%A0%EF%BC%8828%EF%BC%89%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E8%AF%86%E5%88%AB%E9%AA%8C%E8%AF%81">&nbsp;（28）再次启动识别验证</h3><p>&nbsp;点击确定</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/bcb5bd6a05b749c68a37baca7529b160.png"></p><p>成功开启了移动硬盘的系统</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/c926f584684c4cf3844e7466265fe44a.png"></p><p>关机退出</p><h3 id="%EF%BC%8829%EF%BC%89BIOS%E8%AE%BE%E7%BD%AE%E5%B9%B6%E5%90%AF%E5%8A%A8Linux%20To%20Go" name="%EF%BC%8829%EF%BC%89BIOS%E8%AE%BE%E7%BD%AE%E5%B9%B6%E5%90%AF%E5%8A%A8Linux%20To%20Go">（29）BIOS设置并启动Linux To Go</h3><p>1）电脑关机重启。</p><p>2）重启时连按F10进入BIOS设置，在启动选项下，USB闪存驱动器/USB硬盘设置在最上方，然后按F10保存并退出。</p><p>3）然后如果什么都不做就会一直reset system，所以需要在启动过程中，需要进入启动管理界面，即连按ESC</p><p>4）按下F9进入引导菜单，选择Ubuntu系统启动</p><p>注：笔者的运行平台是光影精灵8plus。</p><h1 id="%E5%9B%9B%E3%80%81%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA" name="%E5%9B%9B%E3%80%81%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA" style="background-color:transparent"><span style="color:#fe2c24">四、视频演示</span></h1><h1 id="1.%20%E4%B8%89-2-%EF%BC%8829%EF%BC%89%E6%AD%A5%E9%AA%A4%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA%E9%93%BE%E6%8E%A5%EF%BC%9A" name="1.%20%E4%B8%89-2-%EF%BC%8829%EF%BC%89%E6%AD%A5%E9%AA%A4%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA%E9%93%BE%E6%8E%A5%EF%BC%9A">1. 三-2-（29）步骤视频演示链接：</h1><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Linux To Go的成功启动过程_哔哩哔哩_bilibili" href="https://www.bilibili.com/video/BV1Etu1zPEkC/?vd_source=77379e487a8ecc7d4f9e65b8d9cd422d" title="Linux To Go的成功启动过程_哔哩哔哩_bilibili"><span class="link-card-box" contenteditable="false"><span class="link-title">Linux To Go的成功启动过程_哔哩哔哩_bilibili</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://www.bilibili.com/video/BV1Etu1zPEkC/?vd_source=77379e487a8ecc7d4f9e65b8d9cd422d</span></span></a></p><h1 id="%E4%BA%94%E3%80%81%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%C2%A0" name="%E4%BA%94%E3%80%81%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%C2%A0"><span style="color:#fe2c24">五、补充说明&nbsp;</span></h1><h2 id="1.%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%AF%BC%E8%87%B4%E5%90%AF%E5%8A%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%86%85%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF" name="1.%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%AF%BC%E8%87%B4%E5%90%AF%E5%8A%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%86%85%E7%9A%84Ubuntu%E7%B3%BB%E7%BB%9F%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF">1.对于移动硬盘使用不同的接口导致启动移动硬盘内的Ubuntu系统出现错误</h2><h3 id="%EF%BC%881%EF%BC%89%E9%94%99%E8%AF%AF%E7%8E%B0%E8%B1%A1%EF%BC%9A" name="%EF%BC%881%EF%BC%89%E9%94%99%E8%AF%AF%E7%8E%B0%E8%B1%A1%EF%BC%9A">（1）错误现象：</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先，我使用的是移动硬盘的Type-C口&lt;&mdash;连接&mdash;&gt;笔记本电脑的USB3.0，连按ESC进入启动项选择Ubuntu系统可以正常启动；但是后面使用移动硬盘的Type-C口&lt;&mdash;连接&mdash;&gt;笔记本电脑的Type-C口再重新启动电脑进入Ubuntu系统的启动过程中出现问题，之后，查询AI得知是无法正确识别接口导致启动异常（笔者在其出错后换回之前的方式发现Ubuntu系统是能正常使用的）。</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91%E5%9F%BA%E4%BA%8EUbuntu+%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E7%9A%84Linux%20To%20Go%E7%9A%84%E8%B6%85%E8%AF%A6%E7%BB%86%E5%88%B6%E4%BD%9C%E5%85%A8%E8%BF%87%E7%A8%8B/753a50e3117a4ff4b6b2fd04ef06290b.jpeg"></p><p>![](<a href="https://i-blog.csdnimg.cn/direct/40078c5b292d41849c9e7132862191cc.jpeg">https://i-blog.csdnimg.cn/direct/40078c5b292d41849c9e7132862191cc.jpeg</a>“ &#x2F;&gt;&lt;img alt&#x3D;)</p><p>![](“<a href="https://i-blog.csdnimg.cn/direct/5955e2fbe2964a9ca0e3bba7429ede05.png">https://i-blog.csdnimg.cn/direct/5955e2fbe2964a9ca0e3bba7429ede05.png</a>“ width&#x3D;”499” &#x2F;&gt;&nbsp;</p></p><h3 id="%EF%BC%882%EF%BC%89%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A" name="%EF%BC%882%EF%BC%89%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A">（2）解决方法：</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以制作<span style="color:#0d0016"><span style="background-color:null">Linux To Go的时候所使用的连接方式和接口作为标准（对于这种方式，大部分情况是不会出问题的），建议不要轻易更换连接方式和接口。</span>)<p><span style="color:#0d0016"><span style="background-color:#ffd7b9">注意：在使用虚拟机制作Linux To Go的时候，最好在虚拟机设置那里勾选上使用USB3.1，因为是向下兼容，所以来保证能够支持移动硬盘的Type-C口能连接大部分电脑的USB接口使用；这里在说明一下在某台电脑制作的Linux To Go接入有些其他类型的配置的电脑，导致无法启动Ubuntu系统，很可能是因为硬件不兼容或者硬件差异化太大（环境不适配）。</span></span></p>]]></content>
    
    
    
    <tags>
      
      <tag>linux ubuntu Linux To Go</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Ubuntu】Ubuntu的分区深入详解以及制定最佳分区分配策略</title>
    <link href="/2025/07/18/%E3%80%90Ubuntu%E3%80%91Ubuntu%E7%9A%84%E5%88%86%E5%8C%BA%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%88%B6%E5%AE%9A%E6%9C%80%E4%BD%B3%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/"/>
    <url>/2025/07/18/%E3%80%90Ubuntu%E3%80%91Ubuntu%E7%9A%84%E5%88%86%E5%8C%BA%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%88%B6%E5%AE%9A%E6%9C%80%E4%BD%B3%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="%E5%89%8D%E8%A8%80" name="%E5%89%8D%E8%A8%80">前言</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于该文章仅适用于个人Linux电脑，笔者暂时没有深入研究运维方面的服务器Ubuntu系统安装和分区配置，有待后续更新。</p><hr /><h1 id="main-toc" name="tableOfContents"><strong>目录</strong></h1><p id="%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">一、基础知识</a></p><p id="%EF%BC%88%E4%B8%80%EF%BC%89%E5%9C%A8%E4%BA%86%E8%A7%A3%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E5%89%8D%EF%BC%8C%E5%85%88%E6%98%8E%E7%A1%AE%E7%A1%AC%E7%9B%98%E7%9A%84%E4%B8%BB%E8%A6%81%E5%88%86%E7%B1%BB%E5%8F%8A%20Linux%20%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%A0%87%E8%AF%86%E8%A7%84%E5%88%99%EF%BC%9A%E2%80%8B-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%88%E4%B8%80%EF%BC%89%E5%9C%A8%E4%BA%86%E8%A7%A3%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E5%89%8D%EF%BC%8C%E5%85%88%E6%98%8E%E7%A1%AE%E7%A1%AC%E7%9B%98%E7%9A%84%E4%B8%BB%E8%A6%81%E5%88%86%E7%B1%BB%E5%8F%8A%20Linux%20%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%A0%87%E8%AF%86%E8%A7%84%E5%88%99%EF%BC%9A%E2%80%8B">（一）在了解硬盘分区前，先明确硬盘的主要分类及 Linux 系统中的标识规则：​</a></p><p id="%EF%BC%88%E4%BA%8C%EF%BC%89%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%E5%8F%8A%E7%B3%BB%E7%BB%9F%E9%80%82%E9%85%8D%E2%80%8B-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%E5%8F%8A%E7%B3%BB%E7%BB%9F%E9%80%82%E9%85%8D%E2%80%8B">（二）硬盘分区表格式与 BIOS 引导方式的对应关系及系统适配​</a></p><p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%AE%E5%BC%82%E2%80%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%AE%E5%BC%82%E2%80%8B">（1）分区表格式与 BIOS 引导方式的核心差异​</a></p><p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E4%B8%8D%E5%90%8C%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E9%80%82%E9%85%8D%E8%A7%84%E5%88%99%E2%80%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E4%B8%8D%E5%90%8C%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E9%80%82%E9%85%8D%E8%A7%84%E5%88%99%E2%80%8B">（2）不同系统下的适配规则​</a></p><p id="%C2%A0%EF%BC%883%EF%BC%89%E5%85%B3%E4%BA%8EGPT%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E-toc" name="tableOfContents" style="margin-left:80px"><a href="#%C2%A0%EF%BC%883%EF%BC%89%E5%85%B3%E4%BA%8EGPT%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E">（3）关于GPT分区表的简要说明</a></p><p id="GPT%20%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91-toc" name="tableOfContents" style="margin-left:0px"><a href="#GPT%20%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91">GPT 分区表的底层逻辑</a></p><p id="%EF%BC%884%EF%BC%89%E5%85%B3%E9%94%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%80%8B-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E5%85%B3%E9%94%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%80%8B">（4）关键注意事项​</a></p><p id="%EF%BC%88%E4%B8%89%EF%BC%89%E7%90%86%E8%A7%A3%20Ubuntu%20%E5%88%86%E5%8C%BA%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%88%E4%B8%89%EF%BC%89%E7%90%86%E8%A7%A3%20Ubuntu%20%E5%88%86%E5%8C%BA%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">（三）理解 Ubuntu 分区的核心概念</a></p><p id="%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E5%88%86%E5%8C%BA%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E5%88%86%E5%8C%BA%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88">二、常见分区推荐方案</a></p><p id="1.EFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%88%2Fboot%2Fefi%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#1.EFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%88%2Fboot%2Fefi%EF%BC%89">1.EFI 系统分区（/boot/efi）</a></p><p id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A300MB%20%E2%80%93%201GB-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A300MB%20%E2%80%93%201GB">（1）大小：300MB &ndash; 1GB</a></p><p id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E4%B8%BB%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E4%B8%BB%E5%88%86%E5%8C%BA">（2）类型：主分区</a></p><p id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9AFAT32-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9AFAT32">（3）文件系统：FAT32</a></p><p id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fboot%2Fefi-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fboot%2Fefi">（4）挂载点：/boot/efi</a></p><p id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A">（5）说明：</a></p><p id="2.Swap%20%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%EF%BC%88Swap%20Space%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#2.Swap%20%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%EF%BC%88Swap%20Space%EF%BC%89">2.Swap 交换分区（Swap Space）</a></p><p id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A">（1）大小：</a></p><p id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%C2%A0(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%C2%A0(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)">（2）类型：逻辑分区&nbsp;(如果是 GPT 硬盘则无此概念，直接创建即可)</a></p><p id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9A%E9%80%89%E6%8B%A9%E2%80%9C%E4%BA%A4%E6%8D%A2%E7%A9%BA%E9%97%B4%20(linux%20swap%20partition)%E2%80%9D-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9A%E9%80%89%E6%8B%A9%E2%80%9C%E4%BA%A4%E6%8D%A2%E7%A9%BA%E9%97%B4%20(linux%20swap%20partition)%E2%80%9D">（3）文件系统：选择&ldquo;交换空间 (linux swap partition)&rdquo;</a></p><p id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%EF%BC%88%E9%80%9A%E8%BF%87%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%BF%80%E6%B4%BB%EF%BC%8C%E6%97%A0%E9%9C%80%E6%8C%82%E8%BD%BD%E5%88%B0%E7%9B%AE%E5%BD%95%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%EF%BC%88%E9%80%9A%E8%BF%87%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%BF%80%E6%B4%BB%EF%BC%8C%E6%97%A0%E9%9C%80%E6%8C%82%E8%BD%BD%E5%88%B0%E7%9B%AE%E5%BD%95%EF%BC%89">（4）挂载点：（通过系统配置自动激活，无需挂载到目录）</a></p><p id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A">（5）说明：</a></p><p id="3.%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#3.%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89">3.根目录（/）</a></p><p id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A50GB%20%E2%80%93%20100GB%EF%BC%88%E5%BB%BA%E8%AE%AE%E8%87%B3%E5%B0%91%2050GB%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E8%80%85%E5%BB%BA%E8%AE%AE%2080GB-100GB%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A50GB%20%E2%80%93%20100GB%EF%BC%88%E5%BB%BA%E8%AE%AE%E8%87%B3%E5%B0%91%2050GB%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E8%80%85%E5%BB%BA%E8%AE%AE%2080GB-100GB%EF%BC%89">（1）大小：50GB &ndash; 100GB（建议至少 50GB，对于开发者建议 80GB-100GB）</a></p><p id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)">（2）类型：逻辑分区 (如果是 GPT 硬盘则无此概念，直接创建即可)</a></p><p id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4%EF%BC%88%E5%85%BC%E5%AE%B9%E6%80%A7%E5%BC%BA%EF%BC%8C%E7%A8%B3%E5%AE%9A%E6%80%A7%E9%AB%98%EF%BC%8C%E9%80%82%E5%90%88%E5%A4%A7%E5%A4%9A%E6%95%B0%E5%9C%BA%E6%99%AF%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4%EF%BC%88%E5%85%BC%E5%AE%B9%E6%80%A7%E5%BC%BA%EF%BC%8C%E7%A8%B3%E5%AE%9A%E6%80%A7%E9%AB%98%EF%BC%8C%E9%80%82%E5%90%88%E5%A4%A7%E5%A4%9A%E6%95%B0%E5%9C%BA%E6%99%AF%EF%BC%89">（3）文件系统：ext4（兼容性强，稳定性高，适合大多数场景）</a></p><p id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2F%EF%BC%88%E5%9B%BA%E5%AE%9A%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%8C%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9%EF%BC%89-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2F%EF%BC%88%E5%9B%BA%E5%AE%9A%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%8C%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9%EF%BC%89">（4）挂载点：/（固定挂载点，不可更改）</a></p><p id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A">（5）说明：</a></p><p id="4.%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#4.%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89">4.用户目录（/home）</a></p><p id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4">（1）大小：剩余所有空间</a></p><p id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)">（2）类型：逻辑分区 (如果是 GPT 硬盘则无此概念，直接创建即可)</a></p><p id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4">（3）文件系统：ext4</a></p><p id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fhome-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fhome">（4）挂载点：/home</a></p><p id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A-toc" name="tableOfContents" style="margin-left:80px"><a href="#%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A">（5）说明：</a></p><p id="%E4%B8%89%E3%80%81%E4%B8%AA%E4%BA%BA%E6%8E%A8%E8%8D%90%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E4%B8%89%E3%80%81%E4%B8%AA%E4%BA%BA%E6%8E%A8%E8%8D%90%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88">三、个人推荐分区方案</a></p><p id="%EF%BC%881%EF%BC%89%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%881%EF%BC%89%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA">（1）引导分区</a></p><p id="%EF%BC%882%EF%BC%89Swap%E5%88%86%E5%8C%BA-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%882%EF%BC%89Swap%E5%88%86%E5%8C%BA">（2）Swap分区</a></p><p id="%EF%BC%883%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E5%B0%86%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8E%2Fhome%E7%9B%AE%E5%BD%95%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%EF%BC%9F-toc" name="tableOfContents" style="margin-left:40px"><a href="#%EF%BC%883%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E5%B0%86%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8E%2Fhome%E7%9B%AE%E5%BD%95%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%EF%BC%9F">（3）为什么将根目录与/home目录放在一起？</a></p><p id="1.%C2%A0%E7%AE%80%E5%8C%96%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%EF%BC%8C%E9%99%8D%E4%BD%8E%E9%97%A8%E6%A7%9B-toc" name="tableOfContents" style="margin-left:80px"><a href="#1.%C2%A0%E7%AE%80%E5%8C%96%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%EF%BC%8C%E9%99%8D%E4%BD%8E%E9%97%A8%E6%A7%9B">1.&nbsp;简化分区管理，降低门槛</a></p><p id="2.%C2%A0%E7%A9%BA%E9%97%B4%E5%88%A9%E7%94%A8%E6%9B%B4%E7%81%B5%E6%B4%BB-toc" name="tableOfContents" style="margin-left:80px"><a href="#2.%C2%A0%E7%A9%BA%E9%97%B4%E5%88%A9%E7%94%A8%E6%9B%B4%E7%81%B5%E6%B4%BB">2.&nbsp;空间利用更灵活</a></p><p id="3.%C2%A0%E9%80%82%E5%90%88%E5%B0%8F%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8%E6%88%96%E4%B8%B4%E6%97%B6%E7%B3%BB%E7%BB%9F-toc" name="tableOfContents" style="margin-left:80px"><a href="#3.%C2%A0%E9%80%82%E5%90%88%E5%B0%8F%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8%E6%88%96%E4%B8%B4%E6%97%B6%E7%B3%BB%E7%BB%9F">3.&nbsp;适合小容量存储或临时系统</a></p><p id="4.%C2%A0%E5%AF%B9%20%E2%80%9C%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E6%80%A7%E2%80%9D%20%E8%A6%81%E6%B1%82%E4%B8%8D%E9%AB%98%E7%9A%84%E5%9C%BA%E6%99%AF-toc" name="tableOfContents" style="margin-left:80px"><a href="#4.%C2%A0%E5%AF%B9%20%E2%80%9C%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E6%80%A7%E2%80%9D%20%E8%A6%81%E6%B1%82%E4%B8%8D%E9%AB%98%E7%9A%84%E5%9C%BA%E6%99%AF">4.&nbsp;对 &ldquo;数据安全性&rdquo; 要求不高的场景</a></p><p id="%E6%80%BB%E7%BB%93-toc" name="tableOfContents" style="margin-left:80px"><a href="#%E6%80%BB%E7%BB%93">总结</a></p><p id="%E5%9B%9B%E3%80%81%E5%90%8E%E7%BB%AD%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9%E4%B8%8E%E8%B0%83%E6%95%B4%E6%96%B9%E6%A1%88-toc" name="tableOfContents" style="margin-left:0px"><a href="#%E5%9B%9B%E3%80%81%E5%90%8E%E7%BB%AD%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9%E4%B8%8E%E8%B0%83%E6%95%B4%E6%96%B9%E6%A1%88">四、后续分区扩容与调整方案</a></p><p id="%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E7%BB%9F%E5%88%86%E5%8C%BA%E5%B7%A5%E5%85%B7%E8%B0%83%E6%95%B4%EF%BC%88%E5%A6%82%20GParted%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E7%BB%9F%E5%88%86%E5%8C%BA%E5%B7%A5%E5%85%B7%E8%B0%83%E6%95%B4%EF%BC%88%E5%A6%82%20GParted%EF%BC%89">一、使用传统分区工具调整（如 GParted）</a></p><p id="%E4%BA%8C%E3%80%81%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%20LVM%EF%BC%88%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86%EF%BC%89-toc" name="tableOfContents" style="margin-left:40px"><a href="#%E4%BA%8C%E3%80%81%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%20LVM%EF%BC%88%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86%EF%BC%89">二、推荐使用 LVM（逻辑卷管理）</a></p><hr id="hr-toc" name="tableOfContents" /><h1>一、基础知识</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分区是将硬盘分割成一个或多个逻辑部分的过程。每个分区都被视为一个独立的存储设备，可以单独格式化、挂载和管理。在Ubuntu系统中，通常会有根分区、家目录分区、交换分区等不同类型的分区。在Ubuntu系统中，常用的文件系统包括ext4、btrfs、xfs等。</p><h2 id="%EF%BC%88%E4%B8%80%EF%BC%89%E5%9C%A8%E4%BA%86%E8%A7%A3%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E5%89%8D%EF%BC%8C%E5%85%88%E6%98%8E%E7%A1%AE%E7%A1%AC%E7%9B%98%E7%9A%84%E4%B8%BB%E8%A6%81%E5%88%86%E7%B1%BB%E5%8F%8A%20Linux%20%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%A0%87%E8%AF%86%E8%A7%84%E5%88%99%EF%BC%9A%E2%80%8B" name="%EF%BC%88%E4%B8%80%EF%BC%89%E5%9C%A8%E4%BA%86%E8%A7%A3%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E5%89%8D%EF%BC%8C%E5%85%88%E6%98%8E%E7%A1%AE%E7%A1%AC%E7%9B%98%E7%9A%84%E4%B8%BB%E8%A6%81%E5%88%86%E7%B1%BB%E5%8F%8A%20Linux%20%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%A0%87%E8%AF%86%E8%A7%84%E5%88%99%EF%BC%9A%E2%80%8B"><span style="color:#956fe7"><strong>（一）在了解硬盘分区前，先明确硬盘的主要分类及 Linux 系统中的标识规则：​</strong></span></h2><h3>硬盘按存储介质可分为机械硬盘（HDD）和固态硬盘（SSD），按接口及协议可细分为多种类型。不同设备（手机、笔记本、台式机）因设计需求，常用的硬盘类型存在差异：</h3><h3>(1)&nbsp;手机中的硬盘</h3><p>手机受体积限制，均采用嵌入式固态存储，无机械硬盘：</p><ul><li><strong>eMMC（嵌入式多媒体卡）</strong>：早期中低端手机常用，集成控制器和闪存芯片，接口为并行总线，速度较慢，属于入门级固态存储。</li><li><strong>UFS（通用闪存存储）</strong>：当前主流手机存储，采用串行接口，分 UFS 2.1、UFS 3.1、UFS 4.0 等版本，速度远高于 eMMC，支持全双工读写，属于高性能固态存储。</li><li>手机存储在 Linux 系统中通常以 &ldquo;mmcblk&rdquo; 为标识（如 mmcblk0 代表第一块存储设备，分区为 mmcblk0p1、mmcblk0p2 等），无机械部件。</li></ul><h3>(2) 笔记本电脑中的硬盘</h3><p>笔记本兼顾便携与性能，机械硬盘逐渐被固态硬盘取代：</p><ul><li><strong>机械硬盘（HDD）</strong>：多为 2.5 英寸 SATA 接口，依赖磁头和盘片转动读写数据，体积较大、功耗较高，目前仅在低端机型或大容量需求场景中保留。在 Linux 中标识为 &ldquo;sd&rdquo; 系列（如 sda、sdb）。</li><li><strong>固态硬盘（SSD）</strong>：<ul><li><strong>SATA 接口 SSD</strong>：外形与 2.5 英寸机械硬盘兼容，采用 SATA 协议，速度受接口限制（约 500MB/s），在 Linux 中标识为 &ldquo;sd&rdquo; 系列（如 sdc、sdd）。</li><li><strong>NVMe M.2 SSD</strong>：主流高性能选择，采用 PCIe 通道和 NVMe 协议，体积小巧（M.2 接口，无外壳），速度可达 3000MB/s 以上。在 Linux 中标识为 &ldquo;nvme&rdquo; 系列（如 nvme0 代表第一块设备，分区为 nvme0n1p1、nvme0n1p2 等，n 为命名空间，p 为分区）。</li></ul></li></ul><h3>(3) 台式机主板中的硬盘</h3><p>台式机空间充裕，支持的硬盘类型更丰富：</p><ul><li><strong>机械硬盘（HDD）</strong>：多为 3.5 英寸 SATA 接口，容量大（可达 20TB 以上）、成本低，适合存储大量数据。Linux 中标识为 &ldquo;sd&rdquo; 系列（如 sda、sdb）。</li><li><strong>固态硬盘（SSD）</strong>：<ul><li><strong>SATA 接口 SSD</strong>：与台式机 SATA 主板接口兼容，速度与笔记本 SATA SSD 一致，Linux 标识为 &ldquo;sd&rdquo; 系列。</li><li><strong>NVMe M.2 SSD</strong>：通过主板 M.2 插槽连接，支持 PCIe 3.0/4.0/5.0 通道，速度随通道数提升（最高可达 10GB/s 以上），Linux 标识为 &ldquo;nvme&rdquo; 系列。</li><li><strong>PCIe 接口 SSD</strong>：直接插在主板 PCIe 插槽（如 x4、x8、x16），采用 NVMe 协议，多为高端发烧级或企业级产品，速度与 NVMe M.2 SSD 相当，Linux 中部分仍以 &ldquo;nvme&rdquo; 标识，部分特殊型号可能以 &ldquo;sd&rdquo; 标识。</li></ul></li><li><strong>SCSI 硬盘</strong>：多为企业级机械硬盘，接口速度快、稳定性强，主要用于服务器，民用台式机极少使用，Linux 中标识为 &ldquo;sd&rdquo; 系列。</li><li><strong>IDE 硬盘</strong>：已完全淘汰，早期台式机曾广泛使用，Linux 中标识为 &ldquo;hd&rdquo; 系列（如 hda、hdb）。</li></ul><h3>(4)关于硬盘分区的核心规则（传统规则，MBR分区表）如下：</h3><p>分区类型：硬盘分区分为主分区、扩展分区和逻辑分区。其中主分区最多只能有 4 个；扩展分区是主分区以外的分区（可不存在），但硬盘必须至少有一个主分区。主分区中需有一个激活分区，用于启动 Windows/Linux 系统。</p><p>主分区（Primary Partition）：可以用来直接安装操作系统或存储数据。一个硬盘最多可以有四个主分区。</p><p>扩展分区（Extended Partition）：扩展分区本身不能直接使用，它需要被进一步划分为逻辑分区。扩展分区的主要作用是突破四个主分区的限制。</p><p>合理分区方式：为充分利用主分区名额，最合理的方案是划分 3 个主分区和 1 个扩展分区，再在扩展分区内建立若干逻辑分区。</p><p>Linux 系统中的分区标识：单块硬盘最多支持 16 个分区。</p><ul><li>对于 IDE、SCSI、SATA 接口的硬盘，4 个主分区依次标识为 sda1、sda2、sda3、sda4；逻辑分区从 sda5 开始，依次到 sda16。</li><li>对于 NVMe 硬盘，分区标识格式为 &ldquo;nvme &lt; 设备号&gt; n &lt; 命名空间 &gt; p &lt; 分区号 &gt;&rdquo;，如第一块 NVMe 硬盘的第一个主分区为 nvme0n1p1，逻辑分区从 nvme0n1p5 开始（遵循主分区最多 4 个的规则）。</li><li>手机嵌入式存储（eMMC/UFS）的分区标识为 &ldquo;mmcblk &lt; 设备号&gt; p &lt; 分区号 &gt;&rdquo;，如 mmcblk0p1（主分区）、mmcblk0p5（逻辑分区）。</li></ul><p><strong><span style="background-color:#d4e9d5">补充说明：</span></strong></p><p><span style="background-color:#d4e9d5">传统分区规则（主分区最多 4 个、依赖扩展分区和逻辑分区等）的核心限制来源于</span><strong><span style="background-color:#d4e9d5">MBR 分区表</span></strong><span style="background-color:#d4e9d5">（Master Boot Record，主引导记录），而非 BIOS 固件本身；而 UEFI 固件的普及，通常搭配</span><strong><span style="background-color:#d4e9d5">GPT 分区表</span></strong><span style="background-color:#d4e9d5">（GUID Partition Table，全局唯一标识分区表）使用，这才真正突破了传统分区规则的限制。两者的关系需要从 &ldquo;分区表类型&rdquo; 和 &ldquo;固件类型&rdquo; 的关联来理解：</span></p><h3><span style="background-color:#d4e9d5">1）传统规则的本质：MBR 分区表的限制</span></h3><p><span style="background-color:#d4e9d5">你提到的 &ldquo;主分区最多 4 个、扩展分区 + 逻辑分区突破限制&rdquo; 等规则，是</span><strong><span style="background-color:#d4e9d5">MBR 分区表</span></strong><span style="background-color:#d4e9d5">的固有特性：</span></p><ul><li><span style="background-color:#d4e9d5">MBR 分区表的结构中，仅预留了 4 个主分区表项，因此最多只能创建 4 个主分区；</span></li><li><span style="background-color:#d4e9d5">为了突破这个限制，才设计了 &ldquo;扩展分区&rdquo;（占用 1 个主分区表项），再在扩展分区内划分 &ldquo;逻辑分区&rdquo;（数量最多 12 个，总分区数最多 16 个）。</span></li><li><span style="background-color:#d4e9d5">这种规则与传统 BIOS 固件配合使用，但本质是 MBR 分区表的技术限制，而非 BIOS 本身的限制。</span></li></ul><h3><span style="background-color:#d4e9d5">2） UEFI 环境下的分区规则：取决于分区表类型</span></h3><p><span style="background-color:#d4e9d5">UEFI 是新一代固件标准，它本身不强制限制分区数量，但</span><strong><span style="background-color:#d4e9d5">推荐使用 GPT 分区表</span></strong><span style="background-color:#d4e9d5">（也兼容 MBR 分区表，称为 &ldquo;Legacy 模式&rdquo;）。因此分区规则是否适用，取决于使用的分区表类型：</span></p><h4><span style="background-color:#d4e9d5">（1）UEFI + GPT 分区表：完全突破传统规则</span></h4><p><span style="background-color:#d4e9d5">GPT 分区表是为配合 UEFI 设计的，彻底抛弃了 MBR 的限制：</span></p><ul><li><strong><span style="background-color:#d4e9d5">无主分区 / 扩展分区 / 逻辑分区的区分</span></strong><span style="background-color:#d4e9d5">：所有分区都是 &ldquo;主分区&rdquo;，无需扩展分区中转；</span></li><li><strong><span style="background-color:#d4e9d5">分区数量无严格限制</span></strong><span style="background-color:#d4e9d5">：理论上支持无限分区，实际中受操作系统限制（如 Windows 支持最多 128 个分区，Linux 无明确上限）；</span></li><li><strong><span style="background-color:#d4e9d5">无需 &ldquo;激活分区&rdquo;</span></strong><span style="background-color:#d4e9d5">：UEFI 启动依赖专门的 &ldquo;EFI 系统分区（ESP）&rdquo;（通常为 FAT32 格式），用于存放启动文件，而非 MBR 中的 &ldquo;激活主分区&rdquo;。</span></li></ul><p><span style="background-color:#d4e9d5">此时，传统的 &ldquo;4 个主分区限制&rdquo;&ldquo;逻辑分区从 5 开始编号&rdquo; 等规则</span><strong><span style="background-color:#d4e9d5">完全不适用</span></strong><span style="background-color:#d4e9d5">。</span></p><h4><span style="background-color:#d4e9d5">（2）UEFI + MBR 分区表：仍受传统规则限制</span></h4><p><span style="background-color:#d4e9d5">UEFI 固件为了兼容旧系统，支持以 &ldquo;Legacy 模式&rdquo; 使用 MBR 分区表。这种情况下：</span></p><ul><li><span style="background-color:#d4e9d5">分区规则仍遵循 MBR 的限制（最多 4 个主分区、需扩展分区 + 逻辑分区突破限制等）；</span></li><li><span style="background-color:#d4e9d5">启动方式仍依赖 MBR 中的激活分区，与传统 BIOS 一致。</span></li></ul><p><span style="background-color:#d4e9d5">此时，传统规则</span><strong><span style="background-color:#d4e9d5">仍然适用</span></strong><span style="background-color:#d4e9d5">。</span></p><h3><span style="background-color:#d4e9d5">3） 总结：关键在分区表类型，而非 UEFI 本身</span></h3><p><span style="background-color:#d4e9d5">&ldquo;UEFI 下分区没有限制&rdquo; 的说法，本质是 &ldquo;UEFI+GPT 分区表&rdquo; 突破了 MBR 的限制，而非 UEFI 固件直接取消了规则：</span></p><ul><li><span style="background-color:#d4e9d5">若用 UEFI+GPT：传统分区规则（主分区 4 个限制、扩展 / 逻辑分区划分）完全失效；</span></li><li><span style="background-color:#d4e9d5">若用 UEFI+MBR（兼容模式）：传统规则仍有效；</span></li><li><span style="background-color:#d4e9d5">传统 BIOS+MBR：必须遵循传统规则；</span></li><li><span style="background-color:#d4e9d5">传统 BIOS+GPT：兼容性差（多数旧 BIOS 不支持），即使支持也需特殊处理，不推荐。</span></li></ul><p><span style="background-color:#d4e9d5">因此，现代 UEFI 系统普遍采用 GPT 分区表，也就不再受传统分区规则的约束了。</span></p><h2 id="%EF%BC%88%E4%BA%8C%EF%BC%89%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%E5%8F%8A%E7%B3%BB%E7%BB%9F%E9%80%82%E9%85%8D%E2%80%8B" name="%EF%BC%88%E4%BA%8C%EF%BC%89%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%E5%8F%8A%E7%B3%BB%E7%BB%9F%E9%80%82%E9%85%8D%E2%80%8B"><span style="color:#956fe7">（二）硬盘分区表格式与 BIOS 引导方式的对应关系及系统适配​</span></h2><h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%AE%E5%BC%82%E2%80%8B" name="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%881%EF%BC%89%E5%88%86%E5%8C%BA%E8%A1%A8%E6%A0%BC%E5%BC%8F%E4%B8%8E%20BIOS%20%E5%BC%95%E5%AF%BC%E6%96%B9%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%AE%E5%BC%82%E2%80%8B">（1）分区表格式与 BIOS 引导方式的核心差异​</h3><p>磁盘分区表主要有两种格式，对应的 BIOS 引导方式也分为两类，核心特性如下：​</p><ul><li>MBR 分区表：传统格式，仅支持最大 2.2TB 硬盘和最多 4 个主分区，适配Legacy BIOS（传统 BIOS） 引导方式。​</li></ul><ul><li>GPT 分区表：属于 UEFI 规范的一部分，支持超百 TB 硬盘和最多 100 个主分区，适配UEFI BIOS（新型 BIOS） 引导方式，原生支持大容量硬盘更高效。​</li></ul><p>&nbsp;注：现在主流的分区表类型是&nbsp;<strong>GPT（GUID Partition Table）</strong>，尤其在新设备和大容量存储场景中已成为标准选择。后面方案主要以<strong>UEFI+GPT</strong>为主。(也存在其他分区表如：苹果生态专用：APFS 分区图（APFS Partition Map）、UNIX/BSD 系统专用：BSD 磁盘标签（BSD Disk Label）等等，但是主流还是GPT、MBR)</p><h3 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E4%B8%8D%E5%90%8C%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E9%80%82%E9%85%8D%E8%A7%84%E5%88%99%E2%80%8B" name="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%EF%BC%882%EF%BC%89%E4%B8%8D%E5%90%8C%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E9%80%82%E9%85%8D%E8%A7%84%E5%88%99%E2%80%8B">（2）不同系统下的适配规则​</h3><p>1. Windows 系统​</p><ul><li>Legacy BIOS 引导：需搭配 MBR 分区表。对于 32 位系统，可通过厂商（如华硕、技嘉、希捷）的 &ldquo;虚拟磁盘&rdquo; 技术在 MBR 分区下使用 2TB 以上硬盘，但体验不如原生支持。​</li></ul><ul><li>UEFI BIOS 引导：需搭配 GPT 分区表，原生支持大容量硬盘，尤其对 Windows 7 用户更友好，无需额外技术适配。​</li><li>演示Windows11下如何查看BIOS类型</li></ul><p>WIN+R输入msinfo32</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91Ubuntu%E7%9A%84%E5%88%86%E5%8C%BA%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%88%B6%E5%AE%9A%E6%9C%80%E4%BD%B3%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/169741e83a9a485a83059be02aacd355.png"></p><p>点击确定</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91Ubuntu%E7%9A%84%E5%88%86%E5%8C%BA%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%88%B6%E5%AE%9A%E6%9C%80%E4%BD%B3%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/fd0597cc9b124a6c9dfd876e0793b95a.jpeg"></p><p>2. Linux 系统（以 Ubuntu 为例）​</p><ul><li>Legacy BIOS 引导：必须使用 MBR 分区表，按常规划分/、/boot、swap、/home等分区即可。​</li></ul><ul><li>UEFI BIOS 引导：必须使用 GPT 分区表，且需额外创建ESP 分区（EFI 系统分区）（注：ESP 分区即 EFI 分区，为系统引导关键分区），划分/、/boot等分区时，严禁删除 ESP 分区，否则会导致系统重启时出现 &ldquo;Invalid Partition Table（无效分区表）&rdquo; 错误。​</li></ul><h3 id="%C2%A0%EF%BC%883%EF%BC%89%E5%85%B3%E4%BA%8EGPT%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E" name="%C2%A0%EF%BC%883%EF%BC%89%E5%85%B3%E4%BA%8EGPT%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E">（3）关于GPT分区表的简要说明</h3><p>在 GPT 分区表下，所有分区<strong>本质上都是主分区</strong>，没有逻辑分区的概念，也不存在主分区与逻辑分区的区分限制。这是 GPT 相对于 MBR 的核心改进之一，具体原理和使用方式如下：</p><h1 id="GPT%20%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91" name="GPT%20%E5%88%86%E5%8C%BA%E8%A1%A8%E7%9A%84%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91"><span style="color:#e6b223"><strong>GPT 分区表的底层逻辑</strong></span></h1><ol><li><p><strong>无主分区数量限制</strong><br />GPT 通过全局唯一标识符（GUID）管理分区，理论上支持最多 128 个主分区。这种设计彻底打破了 MBR 的 &ldquo;4 主分区&rdquo; 限制，用户可直接创建多个独立主分区（如 /、/home、/boot 等），无需依赖扩展分区或逻辑分区。</p></li><li><p><strong>分区类型由 GUID 标识</strong><br />GPT 通过<strong>分区类型 GUID</strong>区分不同功能的分区，例如：</p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;Linux 根目录（/）的类型 GUID 为&lt;code&gt;0FC63DAF-8483-4772-8E79-3D69D8477DE4&lt;/code&gt;；&lt;/li&gt;&lt;li&gt;EFI 系统分区（ESP）的类型 GUID 为&lt;code&gt;C12A7328-F81F-11D2-BA4B-00A0C93EC93B&lt;/code&gt;。&lt;br /&gt;这些 GUID 仅用于标识分区用途，与分区类型（主 / 逻辑）无关。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;分区表结构简化&lt;/strong&gt;&lt;br /&gt;GPT 分区表直接存储在磁盘的特定位置（如 LBA 1），并包含备份分区表以提高可靠性。所有分区平等存在，无需像 MBR 那样通过扩展分区嵌套逻辑分区，因此创建 /home 分区时只需指定挂载点和文件系统即可。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;理解主分区与逻辑分区限制：&lt;/strong&gt;&amp;nbsp;对于使用 MBR 分区表的硬盘，你最多只能创建 4 个主分区。如果你需要更多分区，则必须将其中一个主分区设置为&amp;ldquo;扩展分区&amp;rdquo;，然后在扩展分区内部创建逻辑分区。GPT 分区表则没有这种限制，可以创建更多分区。&lt;/li&gt;</code></pre></ol><h3 id="%EF%BC%884%EF%BC%89%E5%85%B3%E9%94%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%80%8B" name="%EF%BC%884%EF%BC%89%E5%85%B3%E9%94%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E2%80%8B">（4）关键注意事项​</h3><ul><li>若 UEFI BIOS 引导的主机使用 MBR 分区表，或 GPT 分区表下删除 ESP 分区，都会导致系统安装后无法正常启动。​</li></ul><ul><li>GPT+UEFI 组合对大容量硬盘的支持是原生且高效的，优于 MBR 分区表在 32 位系统中的兼容方案。</li></ul><h2 id="%EF%BC%88%E4%B8%89%EF%BC%89%E7%90%86%E8%A7%A3%20Ubuntu%20%E5%88%86%E5%8C%BA%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5" name="%EF%BC%88%E4%B8%89%EF%BC%89%E7%90%86%E8%A7%A3%20Ubuntu%20%E5%88%86%E5%8C%BA%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span style="color:#956fe7">（三）理解 Ubuntu 分区的核心概念</span></h2><p><strong>&nbsp; &nbsp; &nbsp; &nbsp;（1）文件系统 (File System)：</strong>文件系统是操作系统用来组织和存储文件的方法。对于 Linux 系统，ext4 是目前最常用且推荐的文件系统，它提供了良好的性能和稳定性。<br /><strong>&nbsp; &nbsp; &nbsp; &nbsp;（2）挂载点 (Mount Point)：</strong>在 Linux 中，所有存储设备和分区都必须&ldquo;挂载&rdquo;到文件系统树的一个特定目录上，这个目录就是挂载点。例如，根目录 / 是整个文件系统的起点。<br /><strong>&nbsp; &nbsp; &nbsp; &nbsp;（3）主分区 (Primary Partition) 与 逻辑分区 (Logical Partition)：</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&nbsp;主分区：</strong>直接定义在硬盘的 MBR（主引导记录）或 GPT（GUID 分区表）中。MBR 硬盘最多支持 4 个主分区。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>逻辑分区：</strong>为了突破 MBR 硬盘主分区数量的限制，可以在一个主分区（扩展分区）内创建多个逻辑分区。GPT 硬盘则没有主分区和逻辑分区的概念，可以直接创建大量分区。<br /><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（4）UEFI 与 BIOS 启动模式：</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>UEFI (Unified Extensible Firmware Interface)：</strong>现代计算机普遍采用的启动模式，支持更大的硬盘和更快的启动速度。UEFI 系统需要一个 EFI 系统分区 (EFI System Partition, ESP) 来存放引导文件。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Legacy BIOS (Basic Input/Output System)：</strong>传统的启动模式，通常用于老旧设备。BIOS 模式下不需要 EFI 分区。</p><h1 id="%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E5%88%86%E5%8C%BA%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88" name="%E4%BA%8C%E3%80%81%E5%B8%B8%E8%A7%81%E5%88%86%E5%8C%BA%E6%8E%A8%E8%8D%90%E6%96%B9%E6%A1%88">二、常见分区推荐方案</h1><h2 id="1.EFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%88%2Fboot%2Fefi%EF%BC%89" name="1.EFI%20%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%EF%BC%88%2Fboot%2Fefi%EF%BC%89"><span style="color:#fe2c24">1.EFI 系统分区（/boot/efi）</span></h2><h3 id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A300MB%20%E2%80%93%201GB" name="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A300MB%20%E2%80%93%201GB"><span style="color:#4da8ee">（1）大小：</span>300MB &ndash; 1GB</h3><h3 id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E4%B8%BB%E5%88%86%E5%8C%BA" name="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E4%B8%BB%E5%88%86%E5%8C%BA"><span style="color:#6eaad7">（2）类型：</span>主分区</h3><h3 id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9AFAT32" name="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9AFAT32"><span style="color:#6eaad7">（3）文件系统：</span><strong>FAT32</strong></h3><h3 id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fboot%2Fefi" name="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fboot%2Fefi"><span style="color:#6eaad7">（4）挂载点：</span>/boot/efi</h3><h3 id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A" name="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A"><span style="color:#6eaad7">（5）说明：</span></h3><p>该分区是 UEFI BIOS 引导模式下（搭配 GPT 分区表）Linux 系统（如 Ubuntu）的核心引导分区。其核心参数与特性如下：</p><ul><li><strong>文件系统要求</strong>：必须格式化为<strong>FAT32</strong>。这是 UEFI 固件的标准要求，因为 FAT32 具有跨平台兼容性，可被 Windows、Linux、macOS 等主流操作系统识别，确保引导程序能被多系统环境下的 UEFI 固件正确读取。</li><li><strong>分区类型标识</strong>：在 GPT 分区表中，该分区的类型标识为<strong>EFI 系统分区（类型 GUID：C12A7328-F81F-11D2-BA4B-00A0C93EC93B）</strong>，与文件系统类型（FAT32）是两个独立概念。</li><li><strong>大小方面：</strong>一般是300MB/512MB就够了，但如果需要后续引导多系统就要1GB或者大一些。</li><li><strong>核心功能</strong>：<ul><li>存储 UEFI 引导程序（如 GRUB）、内核镜像及启动配置文件，是系统启动的 &ldquo;入口&rdquo;。</li><li>支持 UEFI 固件直接访问引导文件，确保系统快速启动和安全启动功能正常运行。</li></ul></li><li><strong>操作注意事项</strong>：<ul><li>严禁删除或格式化该分区，否则会导致系统启动失败（如出现 &ldquo;Invalid Partition Table&rdquo; 错误）。</li><li>挂载点必须设置为 **/boot/efi**，而非传统 BIOS 模式下的 &ldquo;/boot&rdquo;，以确保 UEFI 固件能正确识别引导路径。</li><li>若手动分区，需使用工具（如<code>gdisk</code>）明确指定分区类型为 EFI 系统分区，并格式化为 FAT32。</li></ul></li></ul><h2 id="2.Swap%20%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%EF%BC%88Swap%20Space%EF%BC%89" name="2.Swap%20%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%EF%BC%88Swap%20Space%EF%BC%89"><span style="color:#fe2c24">2.Swap 交换分区（Swap Space）</span></h2><h3 id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A" name="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A"><span style="color:#6eaad7">（1）大小：</span></h3><ul><li><strong>常规建议</strong>：通常为物理内存的&nbsp;<strong>1-2 倍</strong>，但需结合实际场景调整。例如：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;内存 &amp;le; 4GB：建议设置为&amp;nbsp;&lt;strong&gt;4-8GB&lt;/strong&gt;；&lt;/li&gt;&lt;li&gt;内存 4-16GB：建议设置为&amp;nbsp;&lt;strong&gt;8-16GB&lt;/strong&gt;；&lt;/li&gt;&lt;li&gt;内存 &amp;ge; 16GB：可适当减少（如&amp;nbsp;&lt;strong&gt;2-4GB&lt;/strong&gt;），甚至可关闭（但需禁用休眠功能）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;特殊需求&lt;/strong&gt;：若需启用休眠（Hibernate）功能，Swap 大小需&amp;nbsp;&lt;strong&gt;&amp;ge; 物理内存&lt;/strong&gt;，以确保休眠文件能完整写入磁盘。&lt;/li&gt;</code></pre></ul><h3 id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%C2%A0(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)" name="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%C2%A0(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)"><span style="color:#6eaad7">（2）类型：</span>逻辑分区&nbsp;(如果是 GPT 硬盘则无此概念，直接创建即可)</h3><ul><li><strong>MBR 分区表</strong>：通常作为&nbsp;<strong>逻辑分区</strong>&nbsp;存在于扩展分区中（受限于 MBR 的 4 主分区限制）。</li><li><strong>GPT 分区表</strong>：可设置为&nbsp;<strong>主分区</strong>，无主分区数量限制。</li><li><strong>分区类型标识</strong>：<ul><li>MBR 中需设置为&nbsp;<strong>Linux Swap（类型代码 8200）</strong>；</li><li>GPT 中需设置为&nbsp;<strong>Swap 类型 GUID（0657FD6D-A4AB-43C4-84E5-0933C84B4F4F）</strong>。</li></ul></li></ul><h3 id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9A%E9%80%89%E6%8B%A9%E2%80%9C%E4%BA%A4%E6%8D%A2%E7%A9%BA%E9%97%B4%20(linux%20swap%20partition)%E2%80%9D" name="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9A%E9%80%89%E6%8B%A9%E2%80%9C%E4%BA%A4%E6%8D%A2%E7%A9%BA%E9%97%B4%20(linux%20swap%20partition)%E2%80%9D"><span style="color:#6eaad7">（3）文件系统：</span>选择&ldquo;<strong>交换空间 (linux swap partition)</strong>&rdquo;</h3><h3 id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%EF%BC%88%E9%80%9A%E8%BF%87%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%BF%80%E6%B4%BB%EF%BC%8C%E6%97%A0%E9%9C%80%E6%8C%82%E8%BD%BD%E5%88%B0%E7%9B%AE%E5%BD%95%EF%BC%89" name="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%EF%BC%88%E9%80%9A%E8%BF%87%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%BF%80%E6%B4%BB%EF%BC%8C%E6%97%A0%E9%9C%80%E6%8C%82%E8%BD%BD%E5%88%B0%E7%9B%AE%E5%BD%95%EF%BC%89"><span style="color:#6eaad7">（4）挂载点：</span>（通过系统配置自动激活，无需挂载到目录）</h3><h3 id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A" name="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A"><span style="color:#6eaad7">（5）说明：</span></h3><ul><li><strong>核心功能</strong>：当物理内存不足时，Swap 分区作为虚拟内存扩展，临时存储不活跃的内存数据，避免系统因内存耗尽崩溃。</li><li><strong>设置原则</strong>：<ul><li><strong>性能权衡</strong>：Swap 空间过大会增加磁盘 I/O 负担，影响系统响应速度；过小则无法有效缓解内存压力。</li><li><strong>休眠依赖</strong>：若需使用休眠功能（将内存状态保存到磁盘），Swap 大小必须&nbsp;<strong>&ge; 物理内存</strong>，否则休眠功能无法启用。</li></ul></li><li><strong>分区工具建议</strong>：<ul><li>MBR 环境下，使用<code>fdisk</code>或<code>parted</code>工具创建逻辑分区并设置类型为 8200；</li><li>GPT 环境下，使用<code>gdisk</code>工具创建主分区并指定 Swap 类型 GUID。</li></ul></li><li><strong>系统配置</strong>：<ul><li>通过<code>/etc/fstab</code>文件自动激活 Swap 分区（例如：<code>/dev/sdaX swap swap defaults 0 0</code>）；</li><li>可通过<code>swapon -a</code>命令手动启用，或<code>swapoff -a</code>关闭。</li></ul></li><li><strong>现代趋势</strong>：对于内存充足的系统（如 &ge; 16GB），Swap 分区可适当缩小甚至省略，但需通过<code>sysctl</code>调整<code>swappiness</code>参数（默认 60，表示内存使用率达 60% 时启用 Swap），以优化内存使用策略。</li><li><strong>类型方面：</strong><span style="color:#fe2c24">逻辑分区&nbsp;(如果是 GPT 硬盘则无此概念，直接创建即可)，我这里表达的是传统Legacy&nbsp; BIOS下的MBR 分区表情况下是逻辑分区；但是 GPT 分区表情况下就没有限制了没有逻辑分区概念了就全是主分区。</span></li></ul><h2 id="3.%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89" name="3.%E6%A0%B9%E7%9B%AE%E5%BD%95%EF%BC%88%2F%EF%BC%89"><span style="color:#fe2c24"><strong>3.根目录（/）</strong></span></h2><h3 id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A50GB%20%E2%80%93%20100GB%EF%BC%88%E5%BB%BA%E8%AE%AE%E8%87%B3%E5%B0%91%2050GB%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E8%80%85%E5%BB%BA%E8%AE%AE%2080GB-100GB%EF%BC%89" name="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A50GB%20%E2%80%93%20100GB%EF%BC%88%E5%BB%BA%E8%AE%AE%E8%87%B3%E5%B0%91%2050GB%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E8%80%85%E5%BB%BA%E8%AE%AE%2080GB-100GB%EF%BC%89"><span style="color:#6eaad7">（1）大小：</span>50GB &ndash; 100GB（建议至少 50GB，对于开发者建议 80GB-100GB）</h3><ul><li><strong>最小需求</strong>：至少&nbsp;<strong>10GB</strong>（适用于最小化安装的服务器或轻量级系统）。</li><li><strong>推荐配置</strong>：<ul><li><strong>个人桌面 / 工作站</strong>：20GB&ndash;50GB（需预留系统更新、软件安装及临时文件空间）。</li><li><strong>服务器 / 高负载环境</strong>：50GB 以上（根据日志、数据库等数据量调整，如 Web 服务器建议 100GB+）。</li></ul></li><li><strong>动态扩展</strong>：若使用&nbsp;<strong>LVM（逻辑卷管理）</strong>，可通过扩容卷组动态调整根目录大小，避免空间不足问题。</li></ul><h3 id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)" name="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)"><span style="color:#6eaad7">（2）类型：</span>逻辑分区 (如果是 GPT 硬盘则无此概念，直接创建即可)</h3><ul><li><strong>MBR 分区表</strong>：可作为&nbsp;<strong>主分区</strong>&nbsp;或&nbsp;<strong>逻辑分区</strong>（受限于 MBR 的 4 主分区限制，通常与扩展分区配合使用）。</li><li><strong>GPT 分区表</strong>：直接创建为&nbsp;<strong>主分区</strong>，无主分区数量限制。</li><li><strong>GPT 类型标识</strong>：在 GPT 分区表中，根目录的类型 GUID 为&nbsp;<strong>0FC63DAF-8483-4772-8E79-3D69D8477DE4</strong>（Linux 文件系统通用类型）。</li></ul><h3 id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4%EF%BC%88%E5%85%BC%E5%AE%B9%E6%80%A7%E5%BC%BA%EF%BC%8C%E7%A8%B3%E5%AE%9A%E6%80%A7%E9%AB%98%EF%BC%8C%E9%80%82%E5%90%88%E5%A4%A7%E5%A4%9A%E6%95%B0%E5%9C%BA%E6%99%AF%EF%BC%89" name="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4%EF%BC%88%E5%85%BC%E5%AE%B9%E6%80%A7%E5%BC%BA%EF%BC%8C%E7%A8%B3%E5%AE%9A%E6%80%A7%E9%AB%98%EF%BC%8C%E9%80%82%E5%90%88%E5%A4%A7%E5%A4%9A%E6%95%B0%E5%9C%BA%E6%99%AF%EF%BC%89"><span style="color:#6eaad7">（3）文件系统：</span><strong>ext4</strong>（兼容性强，稳定性高，适合大多数场景）</h3><ul><li><strong>其他选项</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;XFS&lt;/strong&gt;：适合大文件和高吞吐量场景（如数据库服务器）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Btrfs&lt;/strong&gt;：支持快照、校验和及弹性扩展，适合需要高级功能的系统。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;ZFS&lt;/strong&gt;：提供数据冗余和压缩功能，但需额外内核模块支持。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3 id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2F%EF%BC%88%E5%9B%BA%E5%AE%9A%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%8C%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9%EF%BC%89" name="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2F%EF%BC%88%E5%9B%BA%E5%AE%9A%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%8C%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9%EF%BC%89"><span style="color:#6eaad7">（4）挂载点：</span>/（固定挂载点，不可更改）</h3><h3 id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A" name="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A"><span style="color:#6eaad7">（5）说明：</span></h3><ul><li><strong>核心功能</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;根目录是 Linux 文件系统的起点，包含所有系统文件、用户文件、应用程序及配置文件（如&lt;code&gt;/etc&lt;/code&gt;、&lt;code&gt;/usr&lt;/code&gt;、&lt;code&gt;/var&lt;/code&gt;等）。&lt;/li&gt;&lt;li&gt;直接影响系统稳定性，若空间不足可能导致服务异常（如日志无法写入、软件更新失败）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;分区策略&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;独立分区建议&lt;/strong&gt;：若追求精细化管理，可将&lt;code&gt;/home&lt;/code&gt;、&lt;code&gt;/var&lt;/code&gt;、&lt;code&gt;/tmp&lt;/code&gt;等目录单独分区，避免根目录被单一目录占满。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;LVM 优势&lt;/strong&gt;：通过 LVM 将根目录创建为逻辑卷，可灵活扩展空间（如添加新硬盘后通过&lt;code&gt;vgextend&lt;/code&gt;和&lt;code&gt;lvextend&lt;/code&gt;命令扩容）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;操作注意事项&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;避免在根目录下直接存储大量用户数据，建议将数据存放在独立分区（如&lt;code&gt;/home&lt;/code&gt;）。&lt;/li&gt;&lt;li&gt;格式化时需指定正确的文件系统类型（如&lt;code&gt;mkfs.ext4 /dev/sdaX&lt;/code&gt;），并通过&lt;code&gt;/etc/fstab&lt;/code&gt;配置自动挂载。&lt;/li&gt;&lt;li&gt;若使用 GPT 分区表，需确保根目录分区类型 GUID 正确设置，否则可能导致系统无法识别。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;性能优化&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;对 SSD 硬盘，可启用&lt;code&gt;discard&lt;/code&gt;选项（在&lt;code&gt;/etc/fstab&lt;/code&gt;中添加&lt;code&gt;discard&lt;/code&gt;参数）以提升性能并延长寿命。&lt;/li&gt;&lt;li&gt;定期清理临时文件（如&lt;code&gt;/tmp&lt;/code&gt;目录），避免空间碎片化。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><p><strong>补充说明</strong>：</p><ul><li>根目录的大小需根据实际需求动态调整。例如，安装图形界面（如 GNOME/KDE）可能需要额外 5GB&ndash;10GB 空间；运行容器或虚拟机时，建议预留更多空间。</li><li>在多系统环境中，根目录应独立于其他系统分区，避免文件冲突。若使用 LVM，可通过卷组共享物理磁盘资源，但需注意不同系统对 LVM 的支持差异。</li></ul><h2 id="4.%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89" name="4.%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95%EF%BC%88%2Fhome%EF%BC%89"><span style="color:#fe2c24">4.用户目录（/home）</span></h2><h3 id="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4" name="%EF%BC%881%EF%BC%89%E5%A4%A7%E5%B0%8F%EF%BC%9A%E5%89%A9%E4%BD%99%E6%89%80%E6%9C%89%E7%A9%BA%E9%97%B4"><span style="color:#6eaad7">（1）大小：</span>剩余所有空间</h3><h3 id="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)" name="%EF%BC%882%EF%BC%89%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%80%BB%E8%BE%91%E5%88%86%E5%8C%BA%20(%E5%A6%82%E6%9E%9C%E6%98%AF%20GPT%20%E7%A1%AC%E7%9B%98%E5%88%99%E6%97%A0%E6%AD%A4%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%8D%B3%E5%8F%AF)"><span style="color:#6eaad7">（2）类型：</span>逻辑分区 (如果是 GPT 硬盘则无此概念，直接创建即可)</h3><ul><li>GPT 分区表：直接创建为<strong>主分区</strong>（无主分区数量限制，无需依赖扩展分区）。</li><li>MBR 分区表：通常作为<strong>逻辑分区</strong>（受限于 4 主分区限制，需先创建扩展分区后再划分）。</li></ul><h3 id="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4" name="%EF%BC%883%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9Aext4"><span style="color:#6eaad7">（3）文件系统：</span>ext4</h3><h3 id="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fhome" name="%EF%BC%884%EF%BC%89%E6%8C%82%E8%BD%BD%E7%82%B9%EF%BC%9A%2Fhome"><span style="color:#6eaad7">（4）挂载点：</span>/home</h3><h3 id="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A" name="%EF%BC%885%EF%BC%89%E8%AF%B4%E6%98%8E%EF%BC%9A"><span style="color:#6eaad7">（5）说明：</span></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/home 是 Linux 系统中存储用户个人数据的核心分区，包含所有用户的文档、下载文件、桌面数据、浏览器缓存、应用程序配置（如<code>.bashrc</code>、<code>.config</code>目录）等。</p><p>将 /home 独立分区的核心价值在于：</p><ul><li><strong>数据安全</strong>：重装系统或升级根目录（/）时，可直接保留 /home 分区，避免用户数据丢失；</li><li><strong>管理灵活</strong>：可单独对 /home 进行扩容、备份（如通过 btrfs 快照）或修复，不影响系统核心文件；</li><li><strong>权限隔离</strong>：用户数据与系统文件分离，降低误操作（如删除系统文件）对个人数据的影响。</li><li>尤其是对于作为服务器来说，因为需要经常被访问可能导致系统文件出现问题，而独立分区的/home出来的用户配置数据不会被&ldquo;污染&rdquo;，可以保留下来用于重载系统时用上之前的配置。</li></ul><h1 id="%E4%B8%89%E3%80%81%E4%B8%AA%E4%BA%BA%E6%8E%A8%E8%8D%90%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88" name="%E4%B8%89%E3%80%81%E4%B8%AA%E4%BA%BA%E6%8E%A8%E8%8D%90%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88">三、个人推荐分区方案</h1><p><span style="color:#fe2c24"><strong>前提条件：</strong>对于磁盘空间/硬件条件较低的读者就使用该方案，若是磁盘空间足够且配置较高请使用<strong>常见分区推荐方案</strong>，原因：对于&ldquo;开发老司机&rdquo;，如果经常折腾开发，/home独立分区隔离出来对于出现问题导致系统挂了，重装系统就可以继续使用之前的/home下的配置，这十分重要。</span></p><table border="1" cellpadding="1" cellspacing="1" style="width:700px"><tbody><tr><th style="text-align:center">分区</th><th style="text-align:center">推荐大小</th><th style="text-align:center">类型</th><th style="text-align:center">文件系统</th><th style="text-align:center">挂载点</th><th style="text-align:center">说明</th></tr><tr><td style="text-align:center">EFI（boot）</td><td style="text-align:center">300MB/1GB</td><td style="text-align:center">主分区</td><td style="text-align:center">FAT32</td><td style="text-align:center">/boot/efi</td><td style="text-align:center">UEFI 引导分区</td></tr><tr><td style="text-align:center">Swap</td><td style="text-align:center">16GB</td><td style="text-align:center">逻辑分区</td><td style="text-align:center">交换空间</td><td style="text-align:center">-</td><td style="text-align:center">虚拟内存 (假设物理内存16GB)</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">剩余空间</td><td style="text-align:center">逻辑分区</td><td style="text-align:center">ext4</td><td style="text-align:center">/</td><td style="text-align:center">系统核心、应用程序安装与用户文件</td></tr></tbody></table><p><span style="color:#ff9900">注：</span>这个需要根据个人习惯和个人需求的实际情况，同时，作为一名开发者的身份，在这里说明一下：</p><h2 id="%EF%BC%881%EF%BC%89%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA" name="%EF%BC%881%EF%BC%89%E5%BC%95%E5%AF%BC%E5%88%86%E5%8C%BA"><span style="color:#e6b223">（1）引导分区</span></h2><p>引导分区取决于你是否会用到多系统，即多系统的情况下需要对应的引导配置存放在该引导分区中。</p><h2 id="%EF%BC%882%EF%BC%89Swap%E5%88%86%E5%8C%BA" name="%EF%BC%882%EF%BC%89Swap%E5%88%86%E5%8C%BA"><span style="color:#e6b223">（2）Swap分区</span></h2><p>Swap分区要根据自己的实际物理内存和需求来看，现在笔记本一般是16GB的内存，笔者这里是因为有些时候需要编译系统镜像进行开发，防止内存不够就需要Swap分区（需要牺牲物理硬盘作为虚拟内存）顶上，如果自己的配置够高也可以不用设置。同时，有些时候使用Docker并不推荐使用Swap分区。</p><p><img src="/2025/07/18/%E3%80%90Ubuntu%E3%80%91Ubuntu%E7%9A%84%E5%88%86%E5%8C%BA%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E4%BB%A5%E5%8F%8A%E5%88%B6%E5%AE%9A%E6%9C%80%E4%BD%B3%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/aa07355343b94c8aba6a7489e9e955f8.png"></p><p>&nbsp;<img alt="" height="427" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/8302b545703c4994bc0b91c96e1ed979.png" width="675" /></p><h2 id="%EF%BC%883%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E5%B0%86%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8E%2Fhome%E7%9B%AE%E5%BD%95%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%EF%BC%9F" name="%EF%BC%883%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E5%B0%86%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8E%2Fhome%E7%9B%AE%E5%BD%95%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%EF%BC%9F"><span style="color:#e6b223">（3）为什么将根目录与/home目录放在一起？</span></h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里主要对于磁盘/硬件条件较低或者使用Linux To Go的情况下，Linux入门使用者或者其他特殊情况的用户可使用该方案，或者对于无法做到/和/home的预估分区分配，只需要知道条件较低的话就要明白<strong>&ldquo;每一份空间都要用在刀刃上&rdquo;</strong>。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;将根目录（<code>/</code>）与&nbsp;<code>/home</code>&nbsp;目录放在一起（即不单独划分&nbsp;<code>/home</code>&nbsp;分区，让&nbsp;<code>/home</code>&nbsp;作为根分区下的子目录），主要是出于<strong>简化管理、灵活利用空间</strong>的考虑，适合特定场景。</p><p>具体原因如下：</p><h3 id="1.%C2%A0%E7%AE%80%E5%8C%96%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%EF%BC%8C%E9%99%8D%E4%BD%8E%E9%97%A8%E6%A7%9B" name="1.%C2%A0%E7%AE%80%E5%8C%96%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86%EF%BC%8C%E9%99%8D%E4%BD%8E%E9%97%A8%E6%A7%9B">1.&nbsp;<strong>简化分区管理，降低门槛</strong></h3><p>对于新手或不想纠结分区细节的用户，合并根目录与&nbsp;<code>/home</code>&nbsp;可以省去分区规划的麻烦：</p><ul><li>无需提前计算根分区和&nbsp;<code>/home</code>&nbsp;分区的大小（避免 &ldquo;根分区太小不够用、<code>/home</code>&nbsp;分区剩余太多&rdquo; 或反之的尴尬）。</li><li>减少分区操作步骤，系统安装时只需创建一个根分区（无需单独设置&nbsp;<code>/home</code>），降低出错概率。</li></ul><h3 id="2.%C2%A0%E7%A9%BA%E9%97%B4%E5%88%A9%E7%94%A8%E6%9B%B4%E7%81%B5%E6%B4%BB" name="2.%C2%A0%E7%A9%BA%E9%97%B4%E5%88%A9%E7%94%A8%E6%9B%B4%E7%81%B5%E6%B4%BB">2.&nbsp;<strong>空间利用更灵活</strong></h3><p>根分区和&nbsp;<code>/home</code>&nbsp;共享同一存储空间时，空间可以动态分配：</p><ul><li>例如，当根目录需要更多空间（如安装大量软件）时，可直接使用原本可能属于&nbsp;<code>/home</code>&nbsp;的剩余空间；反之，当&nbsp;<code>/home</code>&nbsp;存放大量文件（如视频、文档）时，也能占用根分区的空闲空间。</li><li>避免了 &ldquo;分区大小固定导致空间浪费&rdquo; 的问题（尤其是对新手，常因预估错误导致某分区空间不足、另一分区闲置）。</li></ul><h3 id="3.%C2%A0%E9%80%82%E5%90%88%E5%B0%8F%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8%E6%88%96%E4%B8%B4%E6%97%B6%E7%B3%BB%E7%BB%9F" name="3.%C2%A0%E9%80%82%E5%90%88%E5%B0%8F%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8%E6%88%96%E4%B8%B4%E6%97%B6%E7%B3%BB%E7%BB%9F">3.&nbsp;<strong>适合小容量存储或临时系统</strong></h3><ul><li><strong>小容量硬盘 / SSD</strong>：如果硬盘空间较小（如 128GB 以下），单独划分&nbsp;<code>/home</code>&nbsp;会进一步碎片化空间，合并后能减少分区表复杂度，更高效利用有限容量。</li><li><strong>临时或测试系统</strong>：如虚拟机、短期使用的系统，无需长期保存&nbsp;<code>/home</code>&nbsp;下的用户数据（如配置文件、文档），合并后重装系统更简单（无需备份&nbsp;<code>/home</code>）。</li></ul><h3 id="4.%C2%A0%E5%AF%B9%20%E2%80%9C%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E6%80%A7%E2%80%9D%20%E8%A6%81%E6%B1%82%E4%B8%8D%E9%AB%98%E7%9A%84%E5%9C%BA%E6%99%AF" name="4.%C2%A0%E5%AF%B9%20%E2%80%9C%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E6%80%A7%E2%80%9D%20%E8%A6%81%E6%B1%82%E4%B8%8D%E9%AB%98%E7%9A%84%E5%9C%BA%E6%99%AF">4.&nbsp;<strong>对 &ldquo;数据安全性&rdquo; 要求不高的场景</strong></h3><p><code>/home</code>&nbsp;目录主要存放用户数据（文档、配置、下载等），单独分区的核心意义是<strong>系统重装时可保留&nbsp;<code>/home</code>&nbsp;数据</strong>。但如果满足以下情况，合并反而更合适：</p><ul><li>用户数据不重要（如临时文件、可随时从云端恢复的数据）。</li><li>习惯定期备份数据到外部存储（如移动硬盘、云盘），无需依赖&nbsp;<code>/home</code>&nbsp;分区隔离数据。</li></ul><p><strong>注意：合并的潜在缺点</strong></p><p>虽然合并有便利性，但也存在局限：</p><ul><li><strong>系统重装时数据易丢失</strong>：若根分区损坏或重装系统，<code>/home</code>&nbsp;下的用户数据会被一同清除（需提前备份）。</li><li>若根分区填满，会直接影响&nbsp;<code>/home</code>&nbsp;使用：例如，根分区因日志文件、软件缓存占满时，用户甚至无法在&nbsp;<code>/home</code>&nbsp;下保存新文件（而单独分区时&nbsp;<code>/home</code>&nbsp;空间不受根分区影响）。</li></ul><h3 id="%E6%80%BB%E7%BB%93" name="%E6%80%BB%E7%BB%93"><strong>总结</strong></h3><p>将根目录与&nbsp;<code>/home</code>&nbsp;放在一起，本质是<strong>以 &ldquo;数据灵活性&rdquo; 换取 &ldquo;管理便捷性&rdquo;</strong>，适合：</p><ul><li>新手用户（减少分区配置难度）；</li><li>小容量存储设备（避免空间碎片化）；</li><li>临时 / 测试系统（无需长期保留用户数据）。</li></ul><p><span style="color:#fe2c24">若重视数据安全（需保留用户数据跨系统重装）或使用大容量硬盘，更推荐单独划分&nbsp;<code>/home</code>&nbsp;分区。</span></p><h1 id="%E5%9B%9B%E3%80%81%E5%90%8E%E7%BB%AD%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9%E4%B8%8E%E8%B0%83%E6%95%B4%E6%96%B9%E6%A1%88" name="%E5%9B%9B%E3%80%81%E5%90%8E%E7%BB%AD%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9%E4%B8%8E%E8%B0%83%E6%95%B4%E6%96%B9%E6%A1%88"><strong>四、后续分区扩容与调整方案</strong></h1><p>若未来根目录（/）出现空间不足的情况，可通过以下两种方式灵活调整：</p><h2 id="%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E7%BB%9F%E5%88%86%E5%8C%BA%E5%B7%A5%E5%85%B7%E8%B0%83%E6%95%B4%EF%BC%88%E5%A6%82%20GParted%EF%BC%89" name="%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8%E4%BC%A0%E7%BB%9F%E5%88%86%E5%8C%BA%E5%B7%A5%E5%85%B7%E8%B0%83%E6%95%B4%EF%BC%88%E5%A6%82%20GParted%EF%BC%89">一、使用传统分区工具调整（如 GParted）</h2><p>适用于未采用 LVM 的常规分区场景，操作步骤如下：</p><ol><li><strong>准备环境</strong>：制作 Ubuntu Live USB 启动盘，从启动盘启动进入 Live 环境（避免分区被系统占用）。</li><li><strong>调整分区</strong>：<ul><li>打开 GParted 工具，先缩小相邻的空闲分区（如 /home 分区，需确保该分区有未使用空间），释放出可用空间。</li><li>将释放的空间分配给根目录（/）分区，完成扩容。</li></ul></li><li><strong>注意事项</strong>：操作前需备份重要数据，避免分区调整过程中因意外（如断电、误操作）导致数据丢失；此方法依赖分区物理位置相邻，灵活性有限。</li></ol><h2 id="%E4%BA%8C%E3%80%81%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%20LVM%EF%BC%88%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86%EF%BC%89" name="%E4%BA%8C%E3%80%81%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%20LVM%EF%BC%88%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86%EF%BC%89">二、推荐使用 LVM（逻辑卷管理）</h2><p>LVM 通过抽象物理硬盘为 &ldquo;卷组&rdquo;，再划分 &ldquo;逻辑卷&rdquo;（可理解为灵活的 &ldquo;分区&rdquo;），提供更高的动态调整能力，核心优势包括：</p><ul><li><strong>无需重新分区</strong>：可直接在线（或离线）调整逻辑卷大小（如根目录、/home 对应的逻辑卷），无需依赖分区物理位置。</li><li><strong>跨设备扩展</strong>：支持将多个物理硬盘的空间合并为一个卷组，灵活分配给不同逻辑卷，适合未来添加新硬盘扩展存储空间。</li><li><strong>适配频繁调整场景</strong>：对于编译工作等需频繁增减空间的需求，LVM 可快速响应调整，避免传统分区的繁琐操作。</li></ul><p>若初始分区时采用 LVM，后续根目录或 /home 空间不足时，只需通过<code>lvextend</code>（扩展）或<code>lvreduce</code>（缩小）命令即可完成调整，大幅降低操作复杂度。</p>]]></content>
    
    
    
    <tags>
      
      <tag>ubuntu linux 分区</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【ESP32】基于VSCode+ESP-IDF插件开发环境的示例工程</title>
    <link href="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/"/>
    <url>/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><h3>（1）开发环境</h3><ul><li><strong>VSCode</strong>：一款轻量级但功能强大的跨平台代码编辑器，拥有丰富的插件生态系统，方便进行代码编辑、调试等操作。</li><li><strong>ESP-IDF 插件</strong>：由乐鑫公司开发，集成了 ESP32 系列芯片开发所需的工具链、编译环境等，能在 VSCode 中直接进行 ESP32 项目的创建、编译、烧录和调试等工作。</li></ul><h3>（2）硬件基础</h3><ul><li><strong>ESP32 芯片</strong>：这是乐鑫推出的一款低功耗、高性能的 Wi-Fi + Bluetooth 双模无线微控制器，拥有双核处理器（或单核），丰富的外设接口（如 GPIO、SPI、I2C 等），可以满足各种物联网应用场景。</li><li><strong>LED</strong>：发光二极管，通过连接到 ESP32 的 GPIO 引脚，根据芯片输出的高低电平信号来实现点亮和熄灭的效果。</li></ul><h3>（3）软件核心 &mdash;&mdash;FreeRTOS</h3><ul><li><strong>实时操作系统</strong>：FreeRTOS 是一个开源的实时操作系统（RTOS），被广泛应用于资源受限的嵌入式系统中。它提供了任务管理、任务调度、信号量、消息队列等功能。</li><li><strong>多任务机制</strong>：在这个示例工程中，利用 FreeRTOS 的多任务特性，创建了 3 个独立的任务，每个任务负责控制一个 LED 进行闪烁操作。任务之间通过 FreeRTOS 的调度器进行调度，使得系统能够在同一时间内看似并发地执行多个任务 。</li></ul><h1>二、工程创建</h1><h2>1.新建工程，点击New project</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/ffff9398aae947e185efffd63fdf47a0.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/44243fc07d6a4356a333f0ccac9daf69.png"></p><h2>2.配置工程</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/2e8a3813d82b4404b4d01b5dd3f75425.png"></p><h2>3.选择模板</h2><ul><li><strong>插件名称</strong>：<code>espressif.esp-idf-extension</code>&nbsp;，版本&nbsp;<code>1.10.2</code></li><li><strong>模板名称</strong>：<ul><li><code>arduino-as-component</code>：可将 Arduino 代码作为组件集成到 ESP-IDF 项目</li><li><code>fibonacci-app</code>：斐波那契数列示例，演示 FreeRTOS 多任务</li><li><code>template-app</code>：ESP-IDF 基础项目模板，适合快速开始开发</li><li><code>unity-app</code>：集成 Unity 单元测试框架，用于组件测试</li></ul></li></ul><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/111f5bf2f0de4c9395ae2827586ed7ae.png"></p><p>选择空项目模板</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/2c7a752d54b84c91a9375e4dcdc65110.png"></p><p>或者freertos下的斐波那契数列程序的示例模板，我选择的是这个</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/e25d99f91c4b499aa1ea6d8eb5d91b13.png"></p><h2>4.首先，由左下角的烧写方式、烧写接口、确认芯片类型</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/17b1bc3240284205b3004610d72c00a3.png"></p><h2>5.进行SDK详细配置</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/894d5b677f274f2da7cf1aca0e207157.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/bf0fa11a77054ed2b9c25257554ca7e5.png"></p><h3>（1）flash</h3><p>ESP32-S3-N16R8 中， &ldquo;N16&rdquo; 代表的是16MB 的 Flash，&ldquo;R8&rdquo; 表示8MB 的 PSRAM。所以这款芯片的 Flash 大小是 16MB。</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/1f0f625515504fc09866bcdf5e0b16a7.png"></p><h3>（2）Partition Table</h3><p>选择自定义分区表，分区表自定义名称：partitions_tabel_16MB.csv</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/77318a1d43b44fc98f74d607d1094300.png"></p><h3>（3）PSRAM</h3><p>使能外部SRAM，主要调整为八线模式和80MHz。</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/7912fb1cde85409d8c7bc79c63ee48df.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/abdb1160120d46d8a33d30ce60957ac3.png"></p><h3>（4）CPU Frequency</h3><h3><img alt="" height="1022" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/d05fb88937f44603987df01bd2a2c2eb.png" width="1919" /></h3><h3>（5）FreeRTOS</h3><h4>一、GDB Stub（调试相关）</h4><p>GDB Stub 是 FreeRTOS 中用于支持 GDB 调试器的组件，允许通过 GDB 查看任务状态、断点调试等。</p><p><strong>Enable listing FreeRTOS tasks through GDB Stub</strong><br />启用后，GDB 调试器可以列出当前所有 FreeRTOS 任务的信息（如任务名、状态、优先级等），方便调试时监控任务运行状态。<br /><strong>Maximum number of tasks supported by GDB Stub: 32</strong><br />GDB Stub 最多支持同时显示 32 个任务的信息（超过则无法通过 GDB 完整列出）。</p><h4>二、FreeRTOS Kernel（内核核心配置）</h4><h5>1. 内核基础</h5><p><strong>Run the Amazon SMP FreeRTOS kernel instead (FEATURE UNDER DEVELOPMENT)</strong><br />启用后将使用亚马逊的 SMP（对称多处理）版本 FreeRTOS 内核（实验性功能），支持多核心同时运行任务（适用于 ESP32S3 等双核芯片）。默认不启用时，使用标准单核心调度的 FreeRTOS 内核。<br /><strong>Run FreeRTOS only on first core</strong><br />限制 FreeRTOS 仅在芯片的第一个核心（Core 0）上运行，第二个核心（若有，如 ESP32S3 的 Core 1）可用于其他裸机程序或独立任务。<br /><strong>configTICK_RATE_HZ: 1000</strong><br />FreeRTOS 系统时钟节拍频率，单位为 Hz。此处设置为 1000，即每秒产生 1000 个时钟节拍（每个节拍间隔 1ms），用于任务调度、延时（如 vTaskDelay()）等时间相关操作。节拍频率越高，时间精度越高，但内核开销略增。</p><h5>2. 栈溢出检测</h5><p><strong>configCHECK_FOR_STACK_OVERFLOW: Check using canary bytes (Method 2)</strong><br />启用栈溢出检测功能，采用「金丝雀字节（canary bytes）」方式（方法 2）：在任务栈的末尾放置特殊标记字节（金丝雀值），每次任务切换时检查标记是否被改写，若改写则判定为栈溢出（会触发栈溢出钩子函数）。这是一种常用的内存越界检测机制。</p><h5>3. 任务与内存相关</h5><p><strong>configNUM_THREAD_LOCAL_STORAGE_POINTERS: 1</strong><br />每个任务可分配的「线程本地存储指针（TLS）」数量。TLS 用于存储任务私有数据（如任务专属的变量），此处最多支持 1 个指针。<br /><strong>configMINIMAL_STACK_SIZE (Idle task stack size): 1536</strong><br />空闲任务（Idle Task）的栈大小（单位：字节）。空闲任务是 FreeRTOS 自动创建的最低优先级任务，用于系统空闲时运行，栈大小需根据系统最小需求配置（此处 1536 字节适用于多数嵌入式场景）。<br /><strong>configMAX_TASK_NAME_LEN: 16</strong><br />任务名称的最大长度（包含终止符 \0），超过则会被截断。例如，任务名最长为 15 个可见字符 + 1 个终止符。<br /><strong>configENABLE_BACKWARD_COMPATIBILITY</strong><br />启用后兼容旧版本 FreeRTOS 的 API 或宏定义（如旧版中的函数参数、结构体成员），避免因版本升级导致的兼容性问题。</p><h5>4. 定时器功能</h5><p><strong>configUSE_TIMERS</strong><br />启用 FreeRTOS 软件定时器功能，允许创建周期性或一次性定时器（通过 xTimerCreate() 等 API）。<br /><strong>configTIMER_SERVICE_TASK_NAME: Tmr Svc</strong><br />定时器服务任务的名称（默认 Tmr Svc），该任务负责处理所有软件定时器的触发逻辑。<br /><strong>configTIMER_SERVICE_TASK_CORE_AFFINITY: No affinity</strong><br />定时器服务任务的核心绑定（适用于多核芯片），「No affinity」表示不固定核心，由内核自动调度到任意核心。<br /><strong>configTIMER_TASK_PRIORITY: 1</strong><br />定时器服务任务的优先级（数值越大优先级越高），此处为 1（较低优先级，避免抢占关键任务）。<br /><strong>configTIMER_TASK_STACK_DEPTH: 2048</strong><br />定时器服务任务的栈大小（2048 字节），需根据定时器回调函数的复杂度调整（若回调函数复杂，需增大栈大小）。<br /><strong>configTIMER_QUEUE_LENGTH: 10</strong><br />定时器命令队列的长度，用于存储待处理的定时器操作（如启动、停止定时器），超过 10 个则需等待队列空闲。</p><h5>5. 队列与通知</h5><p><strong>configQUEUE_REGISTRY_SIZE: 0</strong><br />队列注册表的大小，用于将队列 / 信号量与名称关联（通过 vQueueAddToRegistry()），方便调试时识别队列。0 表示禁用该功能。<br /><strong>configTASK_NOTIFICATION_ARRAY_ENTRIES: 1</strong><br />每个任务的「任务通知数组」长度。任务通知是一种轻量级的通信机制（替代信号量 / 队列），此处最多支持 1 个通知条目（每个任务可接收 1 种通知）。</p><h5>6. 调试与统计</h5><p><strong>configUSE_TRACE_FACILITY</strong><br />启用跟踪功能，支持 FreeRTOS 的跟踪宏（如 vTaskList() 列出任务状态、vTaskGetRunTimeStats() 统计任务运行时间），用于系统性能分析。<br /><strong>configUSE_LIST_DATA_INTEGRITY_CHECK_BYTES</strong><br />启用链表数据完整性检查，在 FreeRTOS 内部链表（如任务就绪链表、阻塞链表）的节点中添加校验字节，检测链表是否被意外篡改（如内存越界导致的链表损坏）。<br /><strong>configGENERATE_RUN_TIME_STATS</strong><br />启用任务运行时间统计功能，可通过 vTaskGetRunTimeStats() 获取每个任务的运行时间占比（需配合硬件定时器实现）。<br /><strong>configUSE_APPLICATION_TASK_TAG</strong><br />允许为任务设置「标签（tag）」，通过 vTaskSetApplicationTaskTag() 关联一个整数或指针，用于标识任务（如区分任务类型、归属模块）。</p><h4>三、Port（端口配置，与硬件相关）</h4><p>针对特定硬件平台（如 ESP32S3 的 Xtensa 架构）的 FreeRTOS 移植配置。</p><p><strong>Wrap task functions</strong><br />对任务函数进行包装（如添加进入 / 退出钩子），通常用于调试或跟踪任务的创建 / 销毁。<br /><strong>Enable stack overflow debug watchpoint</strong><br />启用栈溢出调试断点（依赖硬件 watchpoint 功能），当栈指针超出栈范围时触发调试中断，方便定位栈溢出问题。<br /><strong>Enable thread local storage pointers deletion callbacks</strong><br />启用线程本地存储（TLS）指针的删除回调，当任务销毁时自动调用 TLS 指针的清理函数（释放资源）。<br /><strong>Enable task pre-deletion hook</strong><br />启用任务删除前的钩子函数（vTaskPreDeleteHook()），在任务被删除前执行自定义逻辑（如释放任务持有的资源）。<br /><strong>Enable static task clean up hook (DEPRECATED)</strong><br />启用静态任务的清理钩子（已过时），用于静态创建的任务（xTaskCreateStatic()）销毁时的资源清理。<br /><strong>Check that mutex semaphore is given by owner task</strong><br />检查互斥锁（mutex）的释放操作是否由持有锁的任务执行（避免其他任务释放不属于自己的锁，导致死锁）。<br /><strong>ISR stack size: 1536</strong><br />中断服务程序（ISR）的栈大小（1536 字节），用于处理中断时的临时数据存储（栈不足会导致系统崩溃）。<br /><strong>Enable backtrace from interrupt to task context</strong><br />启用从中断上下文到任务上下文的回溯功能，当发生中断时，可追踪中断前正在运行的任务调用栈（方便调试中断相关问题）。<br /><strong>Use float in Level 1 ISR</strong><br />允许在 Level 1 中断服务程序中使用浮点数（需硬件支持浮点运算，且会增加中断处理开销）。<br /><strong>Tick timer source (Xtensa Only): SYSTIMER 0 (level 1)</strong><br />选择 FreeRTOS 系统节拍（tick）的定时器源（仅 Xtensa 架构），此处使用 SYSTIMER 0（系统定时器 0），且为 Level 1 中断（较高优先级，确保节拍计时准确）。<br /><strong>Place FreeRTOS functions into Flash</strong><br />将 FreeRTOS 函数存储在 Flash 中（而非 RAM），节省 RAM 空间（适用于 RAM 有限的嵌入式设备）。<br /><strong>*Tests compliance with Vanilla FreeRTOS port _CRITICAL calls</strong><br />检查与「标准 FreeRTOS 端口」中临界区函数（如 taskENTER_CRITICAL()）的兼容性，确保临界区操作符合官方规范。</p><h4>四、Extra（额外配置）</h4><p><strong>Allow external memory as an argument to xTaskCreateStatic (READ HELP)</strong><br />允许将外部内存（如 SPI RAM）作为参数传递给 xTaskCreateStatic()（静态创建任务的 API），即任务的栈和控制块可存储在外部内存中（需确保外部内存的访问速度和稳定性）。</p><h4><strong>有如下更改：</strong></h4><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/fabf4f0371cb4540958348a44cd96fc7.png"></p><p>100对应的节拍周期是10ms，1000对应的节拍周期是1ms</p><h2>6.保存SDK配置后，ctrl+shift+p打开分区表编辑器</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这是 ESP-IDF Partition Table Editor（ESP-IDF 分区表编辑器） 的界面，用于可视化配置 ESP32/ESP32-S3 等设备的 Flash 分区表。以下逐行解释核心内容：</p><h3>1. 界面标题与功能说明</h3><p>ESP-IDF Partition Table Editor<br />标题：明确这是 ESP-IDF 框架的分区表可视化工具。<br />Partition Editor can help you to easily edit, build &amp; flash partition table through GUI...<br />功能说明：无需手动编辑 CSV 文件，可通过图形界面（GUI）轻松编辑、构建和烧录分区表。</p><h3>2. 操作按钮（右上角）</h3><p>Select Flash Method<br />选择烧录方式：指定如何将分区表烧录到设备（如串口、JTAG 等）。<br />Build<br />构建：根据当前配置生成分区表二进制文件（.bin）。<br />Flash<br />烧录：将生成的分区表二进制文件烧录到设备的 Flash 中。</p><h3>3. 分区表配置区域</h3><p>表格中每行对应一个 Flash 分区，包含以下字段：</p><p>字段 1：Name（分区名称）<br />nvs：Non-Volatile Storage（非易失性存储）分区，用于保存设备配置、键值对数据（如 WiFi 密码、自定义参数）。<br />phy_init：PHY（物理层）初始化数据分区，存储 WiFi / 蓝牙射频的校准参数。<br />factory：工厂应用分区，存储默认的固件镜像（设备首次启动或恢复出厂设置时运行的程序）。<br />vfs：Virtual File System（虚拟文件系统）分区，类型为 fat（FAT 文件系统），可用于存储文件（如配置文件、日志）。<br />storage：自定义存储分区，类型为 spiffs（SPIFFS 文件系统），适合嵌入式设备的轻量级文件存储。<br />字段 2：Type（分区类型）<br />data：数据分区（存储配置、文件系统等非程序数据）。<br />app：应用分区（存储固件程序，可被 Bootloader 加载运行）。<br />字段 3：Sub Type（子类型）<br />nvs：对应 nvs 分区，标识该数据分区用于 NVS。<br />phy：对应 phy_init 分区，标识该数据分区用于 PHY 初始化。<br />factory：对应 factory 分区，标识该应用分区为工厂固件。<br />fat：对应 vfs 分区，标识该数据分区使用 FAT 文件系统。<br />spiffs：对应 storage 分区，标识该数据分区使用 SPIFFS 文件系统。<br />字段 4：Offset（分区起始偏移）<br />如 0x9000、0xF000 等，表示该分区在 Flash 中的起始地址（相对于 Flash 起始位置）。<br />需注意分区之间不能重叠，且需符合 Flash 擦除块（erase block）对齐要求。<br />字段 5：Size（分区大小）<br />如 0x6000（24KB）、0x1F0000（2,048KB = 2MB）等，表示该分区占用的 Flash 空间大小。<br />字段 6：Encrypted（加密）<br />复选框：启用后，该分区数据会被加密（需配合 ESP-IDF 的安全机制，如 Secure Boot、Flash 加密）。<br />字段 7：&times;（删除按钮）<br />点击可删除对应分区的配置。</p><h3>4. 关键分区的作用</h3><p>nvs：必选分区，用于保存设备运行时的配置（掉电不丢失）。<br />phy_init：必选分区（若使用 WiFi / 蓝牙），存储射频校准参数，确保无线通信稳定。<br />factory：必选分区，存储默认固件，设备启动时 Bootloader 会优先加载此分区的程序。<br />vfs（FAT）：可选分区，适合存储文件（如文本、二进制数据），支持电脑直接挂载访问。<br />storage（SPIFFS）：可选分区，轻量级文件系统，适合嵌入式设备（无需复杂的文件系统支持）。</p><h3>5. 实际应用场景</h3><p>分区表的作用：将 Flash 划分为多个逻辑区域，分别存储程序、配置、文件系统等，让不同功能的数据互不干扰。<br />修改注意事项：<br />调整分区大小或偏移时，需确保 Flash 总容量足够（如 ESP32-S3-N16R8 的 Flash 是 16MB）。<br />若新增文件系统分区（如 vfs、storage），需在代码中初始化对应的文件系统（如 esp_vfs_fat_mount() 或 esp_spiffs_mount()）。<br />烧录新分区表后，若覆盖了原有数据分区（如 nvs），可能导致配置丢失，需谨慎操作。<br />简单说，这个界面让你可视化管理 ESP32 设备的 Flash 分区，像分硬盘区一样把 Flash 划给固件、配置、文件系统等不同功能使用，避免手动写 CSV 配置的麻烦～</p><p>分区如下：</p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/30d91d0e71b8489594d994fba8d41b63.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/7596eb39170b45a6b2019dd33caf9bd0.png"></p><h2>7.添加新的组件，选择第4个选项，组件名bsp_led</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/9774166274a3496d96a20febccb91ebe.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/ca542746d7fb43819c9dd69137b6d414.png"></p><h1>三、代码编写</h1><h2>1.编写3个led的初始化和闪烁代码</h2><p>bsp_led.h</p><pre><code class="language-cpp">#ifndef BSP_LED_H#define BSP_LED_H#define LED1_GPIO_PIN GPIO_NUM_1#define LED2_GPIO_PIN GPIO_NUM_2#define LED3_GPIO_PIN GPIO_NUM_3void bsp_led_init(void);void bsp_led1_toggle(void);void bsp_led2_toggle(void);void bsp_led3_toggle(void);#endif // BSP_LED_H</code></pre><p>bsp_led.c</p><pre><code class="language-cpp">#include &lt;stdio.h&gt;#include "freertos/FreeRTOS.h"#include "freertos/task.h"#include "bsp_led.h"#include "driver/gpio.h"void bsp_led_init(void){    //初始化LED1    gpio_config_t io_conf = {       .pin_bit_mask = (1ULL &lt;&lt; LED1_GPIO_PIN),       .mode = GPIO_MODE_OUTPUT,       .pull_up_en = GPIO_PULLUP_ENABLE,       .pull_down_en = GPIO_PULLDOWN_DISABLE,       .intr_type = GPIO_INTR_DISABLE      };    gpio_config(&amp;io_conf);    //gpio_set_direction(LED1_GPIO_PIN, GPIO_MODE_OUTPUT);    //gpio_set_level(LED1_GPIO_PIN, 1); // 默认关闭LED1    //初始化LED2        gpio_set_direction(LED2_GPIO_PIN, GPIO_MODE_OUTPUT);    gpio_set_level(LED2_GPIO_PIN, 1); // 默认关闭LED2    //初始化LED3    gpio_set_direction(LED3_GPIO_PIN, GPIO_MODE_OUTPUT);    gpio_set_level(LED3_GPIO_PIN, 1); // 默认关闭LED3}void bsp_led1_toggle(void){    // gpio_set_level(LED1_GPIO_PIN, !gpio_get_level(LED1_GPIO_PIN));//无作用，原因不明    // vTaskDelay(pdMS_TO_TICKS(100));//CONFIG_FREERTOS_HZ//无作用，原因不明    gpio_set_level(LED1_GPIO_PIN, 1);    vTaskDelay(1000);    gpio_set_level(LED1_GPIO_PIN, 0);    vTaskDelay(1000);}void bsp_led2_toggle(void){    gpio_set_level(LED2_GPIO_PIN, 1);    vTaskDelay(2000);    gpio_set_level(LED2_GPIO_PIN, 0);    vTaskDelay(2000);}void bsp_led3_toggle(void){    gpio_set_level(LED3_GPIO_PIN, 1);    vTaskDelay(3000);    gpio_set_level(LED3_GPIO_PIN, 0);    vTaskDelay(3000);}</code></pre><p>CMakeLists.txt</p><pre><code class="language-cpp">idf_component_register(SRCS "bsp_led.c"                    INCLUDE_DIRS "include"                    REQUIRES driver                    REQUIRES freertos)</code></pre><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/879032bc54d24956bb581a30fe3ec8df.png"></p><h2>2.编写多任务</h2><p>main.c</p><pre><code class="language-cpp">#include "sdkconfig.h"#include &lt;stdio.h&gt;#include "freertos/FreeRTOS.h"#include "freertos/task.h"#include "esp_system.h"//#include "esp_spi_flash.h"//已废弃#include "spi_flash_mmap.h"#include "bsp_led.h"//led1uint32_t led1_task_stack_size_word = 1024*3;//栈深度，单位：字节UBaseType_t uxPriority_led1 = 2;//优先级TaskHandle_t xHandle_led1;//任务句柄//led2uint32_t led2_task_stack_size_word = 1024*3;//栈深度，单位：字节UBaseType_t uxPriority_led2 = 2;//优先级TaskHandle_t xHandle_led2;//任务句柄//led3#define led3_task_stack_size_word 1024*3//栈深度，单位: 字节UBaseType_t uxPriority_led3 = 2;//优先级StackType_t puxStackBuffer_led3[led3_task_stack_size_word];//静态分配的栈StaticTask_t xHandle_led3;//任务句柄void led1_task(void *pvParameters){        while (1) {        printf("LED1 Task is running\n");        bsp_led1_toggle();    }}void led2_task(void *pvParameters){        while (1) {        printf("LED2 Task is running\n");        bsp_led2_toggle();    }}void led3_task(void *pvParameters){        while (1) {        printf("LED3 Task is running\n");        bsp_led3_toggle();    }}void app_main(void){    // 初始化LED硬件    bsp_led_init();    // 动态创建LED1任务    xTaskCreate(led1_task,       // 任务函数指针（入口函数）                "led1_task",       // 任务名称（用于调试，长度建议不超过 configMAX_TASK_NAME_LEN）                led1_task_stack_size_word,     // 任务栈大小（单位：字节）                NULL,       // 传递给任务函数的参数（可空）                uxPriority_led1,          // 任务优先级（0 为最低，configMAX_PRIORITIES-1 为最高）                &amp;xHandle_led1  // 任务句柄（用于后续操作任务，如删除、挂起等）（可空）                );        // 动态创建LED2任务    xTaskCreate(led2_task,       // 任务函数指针（入口函数）                "led2_task",       // 任务名称（用于调试，长度建议不超过 configMAX_TASK_NAME_LEN）                led2_task_stack_size_word,     // 任务栈大小（单位：字节）                NULL,       // 传递给任务函数的参数（可空）                uxPriority_led2,          // 任务优先级（0 为最低，configMAX_PRIORITIES-1 为最高）                &amp;xHandle_led2  // 任务句柄（用于后续操作任务，如删除、挂起等）（可空）                );    // 静态创建LED3任务    xTaskCreateStatic(led3_task,       // 任务函数指针（入口函数）                        "led3_task",       // 任务名称（用于调试，长度建议不超过 configMAX_TASK_NAME_LEN）                        led3_task_stack_size_word,     // 任务栈大小（单位：字节）                        NULL,       // 传递给任务函数的参数（可空）                        uxPriority_led3,          // 任务优先级（0 为最低，configMAX_PRIORITIES-1 为最高）                        puxStackBuffer_led3,  // 任务句柄（用于后续操作任务，如删除、挂起等）（可空）                        &amp;xHandle_led3); // 静态分配的任务控制块    // vTaskStartScheduler();//ESP-IDF v5.0 及以上版本不需要调用此函数，FreeRTOS 已经在底层自动启动调度器   // for( ;; );//ESP-IDF v5.0 及以上版本不需要调用此函数，FreeRTOS 已经在底层自动启动调度器 }</code></pre><p>&nbsp;CMakeLists.txt</p><pre><code class="language-cpp">idf_component_register(SRCS "main.c"                    REQUIRES esp_system                    REQUIRES bsp_led                    REQUIRES spi_flash                    INCLUDE_DIRS ".")</code></pre><h2>&nbsp;3.关闭看门狗</h2><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/376122547e954fd5a673b779b69ee8ef.png"></p><h1>四、实验效果</h1><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/2c4e2c84308c44b0bf0084c2b962dc71.png"></p><p><img src="/2025/07/11/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91%E5%9F%BA%E4%BA%8EVSCode+ESP-IDF%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B/8bc54c6c8bb04c20a1f7e10e9e1891f9.gif"></p><p><strong>示例工程链接：</strong></p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="https://github.com/Molesidy/ESP32.git" href="https://github.com/Molesidy/ESP32.git" title="https://github.com/Molesidy/ESP32.git"><span class="link-card-box" contenteditable="false"><span class="link-title">https://github.com/Molesidy/ESP32.git</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" />https://github.com/Molesidy/ESP32.git</span></span></a></p>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vscode ide 编辑器 ESP32 FreeRTOS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SoC】【ESP32】ESP-IDF+VSCode的初步使用</title>
    <link href="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h3>一、简介</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP-IDF（Espressif IoT Development Framework）是乐鑫为其 ESP32、ESP32-S 系列、ESP32-C 系列等芯片提供的官方物联网开发框架，基于 FreeRTOS 操作系统，支持 C、C++ 和 Lua 等语言，用于快速开发物联网、智能家居、工业控制等领域的嵌入式应用。</p><h3>（1）主要特点：</h3><ol><li><strong>硬件抽象层</strong>：提供 Wi-Fi、蓝牙、以太网、SPI、I2C、UART 等外设的驱动和 API。</li><li><strong>丰富组件</strong>：包含文件系统（FAT、SPIFFS）、网络协议栈（TCP/IP、MQTT、HTTP）、安全框架（SSL/TLS）等。</li><li><strong>工具链支持</strong>：集成 CMake 构建系统、idf.py 命令行工具，支持一键编译、烧录、调试。</li><li><strong>跨平台</strong>：支持 Windows、Linux、macOS 开发环境。</li><li><strong>示例与文档</strong>：提供大量官方示例和详细文档，便于快速上手。</li></ol><h3>（2）基本开发流程：</h3><ol><li><strong>环境搭建</strong>：安装 ESP-IDF 工具链（包含编译器、调试工具等）。</li><li><strong>项目创建</strong>：基于示例模板或自定义创建项目。</li><li><strong>配置</strong>：通过<code>idf.py menuconfig</code>配置项目参数（如 Wi-Fi、串口波特率等）。</li><li><strong>开发</strong>：编写代码实现业务逻辑。</li><li><strong>编译与烧录</strong>：使用<code>idf.py build</code>编译，<code>idf.py flash</code>烧录到设备。</li><li><strong>调试</strong>：通过<code>idf.py monitor</code>查看串口输出或调试信息。</li></ol><h3>（3）典型应用场景：</h3><ul><li>低功耗物联网设备（如温湿度传感器）</li><li>智能家居控制（如智能开关、灯光控制）</li><li>工业自动化数据采集</li><li>无线通信中继设备</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP-IDF 适合需要高性能、低功耗、丰富通信接口的嵌入式系统开发，尤其在物联网领域应用广泛。</p><h1>二、创建工程</h1><h2>1.新建文件夹ESP32_Example</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/0aaabd9f728241b98803b6cf7831cdc3.png"></p><h2>2. 使用命令idf.py build初始化该工程&nbsp;</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f7350203864243caa531a30a2f3fd747.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/efea735fe6a0454e95378d2457157526.png"></p><p>注：CMakeLists.txt是帮助链接编译的文件</p><h2>3.对于 ESP - IDF 等开发框架中<code>component</code>文件夹的功能，用于明确该目录在项目结构里承担存放特定代码（第三方组件、用户程序驱动代码 ）的角色 。使用命令idf.py create-component + 文件名字</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/d3ae334630bf42ea90f24a51cc2b1fce.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/879345b449594477b7cbd0efd3c80bd7.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/1467f00766124c528252b963733844ab.png"></p><h2>4.在ESP32_Example下新建一个文件夹components，把所有组件放在components下</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/4a08172660b248c8a089e5ddd000ad65.png"></p><h2>5.设置目标芯片</h2><p>使用查询命令idf.py --list-targets查看有哪些芯片类型</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/679df0a25a25448686bfe5624fc0a998.png"></p><p>idf.py set-target &lt;芯片类型&gt;</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/54f6134ea6684a8397ff362f1f4f1166.png"></p><p>成功设置</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/6d879ea3c64d46759b1061cc77672ab8.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/7e8b5d5937a947eabc32d3ec88a0faab.png"></p><h2>6.输入命令idf.py menuconfig启动文本界面进行详细配置</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a519f141471f42229dc47300bb6f3281.png"></p><p>7.设置SPI Flash速度模式，默认（DIO）即可</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/7a4bddace47d423ab23d068105968b08.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c07ebc72015c4dc29f24f4db9600c44d.png"></p><p>按下ESC退出</p><h2>7.使用命令idf.py -p COM8 flash下载代码，这里只是检测是否能正常下载</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5d8a09073ef943e9b76a5e3c1bbda6f6.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/45d11f1aa838453fb9d88e9cef2f3837.png"></p><h2>8.编写测试函数</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/20e1af789c53439da42635241f52408a.png"></p><h2>9.测试函数编译</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/6939bd8e885349be8dd0a8005f4fcf59.png"></p><h2>10.测试函数下载</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/0bd0e5adbda547fca43f4abb67f94f46.png"></p><h2>11.测试函数监控，使用命令idf.py monitor</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f10b8cd98cba4f38aa720d97457e7834.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/15ce6f77a7a8482684577d69617f41a4.png"></p><p>可以看到了成功打印了hello，然后按下ctrl + ]&nbsp;退出监控器。</p><h2>12.清除编译文件</h2><p>idf.py fullclean</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/0f24743e12f74b61b69e972dfcb16079.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/b68e473fc1344758aa7ea970669f653a.png"></p><h1>三、使用VSCode+ESP-IDF插件编写代码</h1><h2>1.使用VSCode打开工程文件夹ESP32_Example</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/3bc804add83d49a29ddce737077c3a28.png"></p><h2>2.配置工程</h2><p>选择下载程序方式、接口和目标芯片</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/d03e680227894b40aa54f7b1ba99647f.jpeg"></p><h2>3.扳手按钮编译</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/dfa5e01f45cb43e5b1ee2c19c2216476.png"></p><h2>4.闪电按钮烧写</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/73e801701dd143a9b321affeba4f7ea3.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/eb8dcee22b7f4ccab4470dfa34158cf8.png"></p><h2>5.电视按钮启用监控</h2><p>初步测试没问题。&nbsp;</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5534e6853ca349a997a0c56c08cbe685.png"></p><h2>6.最下方的芯片选择后的齿轮按钮进行SDK的详细配置</h2><h3>flash</h3><p>ESP32-S3-N16R8 中， &ldquo;N16&rdquo; 代表的是<strong>16MB 的 Flash</strong>，&ldquo;R8&rdquo; 表示<strong>8MB 的 PSRAM</strong>。所以这款芯片的 Flash 大小是 16MB。</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/e31d665cec6642448dc9296316a14cd3.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f0eb7daf66234bcabfc49b5b2c80013a.png"></p><h3>Partition Table</h3><p>选择自定义分区表，分区表自定义名称：partitions_tabel_16MB.csv</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/dbc7150b0f86466599f893dbb0435291.png"></p><p>PSRAM</p><p>使能外部SRAM，主要调整为八线模式和80MHz</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/9c629a196c524e3ea893ea71726a191b.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/07be58cb42e244ba85c6db1a441002ce.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/c0395d46406746c9bae05552d53b9a5e.png"></p><h3>CPU Frequency</h3><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/233a09f3f7b34876a50f5e06e86deafb.png"></p><h3>FreeRTOS</h3><h4><strong>一、GDB Stub（调试相关）</strong></h4><p>GDB Stub 是 FreeRTOS 中用于支持 GDB 调试器的组件，允许通过 GDB 查看任务状态、断点调试等。</p><p></p><ul><li><strong>Enable listing FreeRTOS tasks through GDB Stub</strong><br />启用后，GDB 调试器可以列出当前所有 FreeRTOS 任务的信息（如任务名、状态、优先级等），方便调试时监控任务运行状态。</li><li><strong>Maximum number of tasks supported by GDB Stub: 32</strong><br />GDB Stub 最多支持同时显示 32 个任务的信息（超过则无法通过 GDB 完整列出）。</li></ul><h4><strong>二、FreeRTOS Kernel（内核核心配置）</strong></h4><h5><strong>1. 内核基础</strong></h5><ul><li><strong>Run the Amazon SMP FreeRTOS kernel instead (FEATURE UNDER DEVELOPMENT)</strong><br />启用后将使用亚马逊的 SMP（对称多处理）版本 FreeRTOS 内核（实验性功能），支持多核心同时运行任务（适用于 ESP32S3 等双核芯片）。默认不启用时，使用标准单核心调度的 FreeRTOS 内核。</li><li><strong>Run FreeRTOS only on first core</strong><br />限制 FreeRTOS 仅在芯片的第一个核心（Core 0）上运行，第二个核心（若有，如 ESP32S3 的 Core 1）可用于其他裸机程序或独立任务。</li><li><strong>configTICK_RATE_HZ: 1000</strong><br />FreeRTOS 系统时钟节拍频率，单位为 Hz。此处设置为 1000，即每秒产生 1000 个时钟节拍（每个节拍间隔 1ms），用于任务调度、延时（如&nbsp;<code>vTaskDelay()</code>）等时间相关操作。节拍频率越高，时间精度越高，但内核开销略增。</li></ul><h5><strong>2. 栈溢出检测</strong></h5><ul><li><strong>configCHECK_FOR_STACK_OVERFLOW: Check using canary bytes (Method 2)</strong><br />启用栈溢出检测功能，采用「金丝雀字节（canary bytes）」方式（方法 2）：在任务栈的末尾放置特殊标记字节（金丝雀值），每次任务切换时检查标记是否被改写，若改写则判定为栈溢出（会触发栈溢出钩子函数）。这是一种常用的内存越界检测机制。</li></ul><h5><strong>3. 任务与内存相关</strong></h5><ul><li><strong>configNUM_THREAD_LOCAL_STORAGE_POINTERS: 1</strong><br />每个任务可分配的「线程本地存储指针（TLS）」数量。TLS 用于存储任务私有数据（如任务专属的变量），此处最多支持 1 个指针。</li><li><strong>configMINIMAL_STACK_SIZE (Idle task stack size): 1536</strong><br />空闲任务（Idle Task）的栈大小（单位：字节）。空闲任务是 FreeRTOS 自动创建的最低优先级任务，用于系统空闲时运行，栈大小需根据系统最小需求配置（此处 1536 字节适用于多数嵌入式场景）。</li><li><strong>configMAX_TASK_NAME_LEN: 16</strong><br />任务名称的最大长度（包含终止符&nbsp;<code>\0</code>），超过则会被截断。例如，任务名最长为 15 个可见字符 + 1 个终止符。</li><li><strong>configENABLE_BACKWARD_COMPATIBILITY</strong><br />启用后兼容旧版本 FreeRTOS 的 API 或宏定义（如旧版中的函数参数、结构体成员），避免因版本升级导致的兼容性问题。</li></ul><h5><strong>4. 定时器功能</strong></h5><ul><li><strong>configUSE_TIMERS</strong><br />启用 FreeRTOS 软件定时器功能，允许创建周期性或一次性定时器（通过&nbsp;<code>xTimerCreate()</code>&nbsp;等 API）。</li><li><strong>configTIMER_SERVICE_TASK_NAME: Tmr Svc</strong><br />定时器服务任务的名称（默认&nbsp;<code>Tmr Svc</code>），该任务负责处理所有软件定时器的触发逻辑。</li><li><strong>configTIMER_SERVICE_TASK_CORE_AFFINITY: No affinity</strong><br />定时器服务任务的核心绑定（适用于多核芯片），「No affinity」表示不固定核心，由内核自动调度到任意核心。</li><li><strong>configTIMER_TASK_PRIORITY: 1</strong><br />定时器服务任务的优先级（数值越大优先级越高），此处为 1（较低优先级，避免抢占关键任务）。</li><li><strong>configTIMER_TASK_STACK_DEPTH: 2048</strong><br />定时器服务任务的栈大小（2048 字节），需根据定时器回调函数的复杂度调整（若回调函数复杂，需增大栈大小）。</li><li><strong>configTIMER_QUEUE_LENGTH: 10</strong><br />定时器命令队列的长度，用于存储待处理的定时器操作（如启动、停止定时器），超过 10 个则需等待队列空闲。</li></ul><h5><strong>5. 队列与通知</strong></h5><ul><li><strong>configQUEUE_REGISTRY_SIZE: 0</strong><br />队列注册表的大小，用于将队列 / 信号量与名称关联（通过&nbsp;<code>vQueueAddToRegistry()</code>），方便调试时识别队列。0 表示禁用该功能。</li><li><strong>configTASK_NOTIFICATION_ARRAY_ENTRIES: 1</strong><br />每个任务的「任务通知数组」长度。任务通知是一种轻量级的通信机制（替代信号量 / 队列），此处最多支持 1 个通知条目（每个任务可接收 1 种通知）。</li></ul><h5><strong>6. 调试与统计</strong></h5><ul><li><strong>configUSE_TRACE_FACILITY</strong><br />启用跟踪功能，支持 FreeRTOS 的跟踪宏（如&nbsp;<code>vTaskList()</code>&nbsp;列出任务状态、<code>vTaskGetRunTimeStats()</code>&nbsp;统计任务运行时间），用于系统性能分析。</li><li><strong>configUSE_LIST_DATA_INTEGRITY_CHECK_BYTES</strong><br />启用链表数据完整性检查，在 FreeRTOS 内部链表（如任务就绪链表、阻塞链表）的节点中添加校验字节，检测链表是否被意外篡改（如内存越界导致的链表损坏）。</li><li><strong>configGENERATE_RUN_TIME_STATS</strong><br />启用任务运行时间统计功能，可通过&nbsp;<code>vTaskGetRunTimeStats()</code>&nbsp;获取每个任务的运行时间占比（需配合硬件定时器实现）。</li><li><strong>configUSE_APPLICATION_TASK_TAG</strong><br />允许为任务设置「标签（tag）」，通过&nbsp;<code>vTaskSetApplicationTaskTag()</code>&nbsp;关联一个整数或指针，用于标识任务（如区分任务类型、归属模块）。</li></ul><h4><strong>三、Port（端口配置，与硬件相关）</strong></h4><p>针对特定硬件平台（如 ESP32S3 的 Xtensa 架构）的 FreeRTOS 移植配置。</p><p></p><ul><li><strong>Wrap task functions</strong><br />对任务函数进行包装（如添加进入 / 退出钩子），通常用于调试或跟踪任务的创建 / 销毁。</li><li><strong>Enable stack overflow debug watchpoint</strong><br />启用栈溢出调试断点（依赖硬件 watchpoint 功能），当栈指针超出栈范围时触发调试中断，方便定位栈溢出问题。</li><li><strong>Enable thread local storage pointers deletion callbacks</strong><br />启用线程本地存储（TLS）指针的删除回调，当任务销毁时自动调用 TLS 指针的清理函数（释放资源）。</li><li><strong>Enable task pre-deletion hook</strong><br />启用任务删除前的钩子函数（<code>vTaskPreDeleteHook()</code>），在任务被删除前执行自定义逻辑（如释放任务持有的资源）。</li><li><strong>Enable static task clean up hook (DEPRECATED)</strong><br />启用静态任务的清理钩子（已过时），用于静态创建的任务（<code>xTaskCreateStatic()</code>）销毁时的资源清理。</li><li><strong>Check that mutex semaphore is given by owner task</strong><br />检查互斥锁（mutex）的释放操作是否由持有锁的任务执行（避免其他任务释放不属于自己的锁，导致死锁）。</li><li><strong>ISR stack size: 1536</strong><br />中断服务程序（ISR）的栈大小（1536 字节），用于处理中断时的临时数据存储（栈不足会导致系统崩溃）。</li><li><strong>Enable backtrace from interrupt to task context</strong><br />启用从中断上下文到任务上下文的回溯功能，当发生中断时，可追踪中断前正在运行的任务调用栈（方便调试中断相关问题）。</li><li><strong>Use float in Level 1 ISR</strong><br />允许在 Level 1 中断服务程序中使用浮点数（需硬件支持浮点运算，且会增加中断处理开销）。</li><li><strong>Tick timer source (Xtensa Only): SYSTIMER 0 (level 1)</strong><br />选择 FreeRTOS 系统节拍（tick）的定时器源（仅 Xtensa 架构），此处使用 SYSTIMER 0（系统定时器 0），且为 Level 1 中断（较高优先级，确保节拍计时准确）。</li><li><strong>Place FreeRTOS functions into Flash</strong><br />将 FreeRTOS 函数存储在 Flash 中（而非 RAM），节省 RAM 空间（适用于 RAM 有限的嵌入式设备）。</li><li>*<em>Tests compliance with Vanilla FreeRTOS port&nbsp;<em>_CRITICAL calls</em></em><br />检查与「标准 FreeRTOS 端口」中临界区函数（如&nbsp;<code>taskENTER_CRITICAL()</code>）的兼容性，确保临界区操作符合官方规范。</li></ul><h4><strong>四、Extra（额外配置）</strong></h4><ul><li><strong>Allow external memory as an argument to xTaskCreateStatic (READ HELP)</strong><br />允许将外部内存（如 SPI RAM）作为参数传递给&nbsp;<code>xTaskCreateStatic()</code>（静态创建任务的 API），即任务的栈和控制块可存储在外部内存中（需确保外部内存的访问速度和稳定性）。</li></ul><p><strong>有如下更改：</strong></p><p>100对应的节拍周期是10ms，1000对应的节拍周期是1ms</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/be7fe46eb84a46fab7509f42a98b498b.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/deaf86d0cfa649b49b836d7eff85bc18.png"></p><h2>7.保存SDK配置后，ctrl+shift+p打开分区表编辑器</h2><p>这是&nbsp;<strong>ESP-IDF Partition Table Editor（ESP-IDF 分区表编辑器）</strong>&nbsp;的界面，用于可视化配置 ESP32/ESP32-S3 等设备的 Flash 分区表。以下逐行解释核心内容：</p><h3><strong>1. 界面标题与功能说明</strong></h3><ul><li><strong><code>ESP-IDF Partition Table Editor</code></strong><br />标题：明确这是 ESP-IDF 框架的分区表可视化工具。</li><li><strong><code>Partition Editor can help you to easily edit, build &amp; flash partition table through GUI...</code></strong><br />功能说明：无需手动编辑 CSV 文件，可通过图形界面（GUI）轻松编辑、构建和烧录分区表。</li></ul><h3><strong>2. 操作按钮（右上角）</strong></h3><ul><li><strong><code>Select Flash Method</code></strong><br />选择烧录方式：指定如何将分区表烧录到设备（如串口、JTAG 等）。</li><li><strong><code>Build</code></strong><br />构建：根据当前配置生成分区表二进制文件（<code>.bin</code>）。</li><li><strong><code>Flash</code></strong><br />烧录：将生成的分区表二进制文件烧录到设备的 Flash 中。</li></ul><h3><strong>3. 分区表配置区域</strong></h3><p>表格中每行对应一个&nbsp;<strong>Flash 分区</strong>，包含以下字段：</p><h4><strong>字段 1：<code>Name</code>（分区名称）</strong></h4><ul><li><code>nvs</code>：Non-Volatile Storage（非易失性存储）分区，用于保存设备配置、键值对数据（如 WiFi 密码、自定义参数）。</li><li><code>phy_init</code>：PHY（物理层）初始化数据分区，存储 WiFi / 蓝牙射频的校准参数。</li><li><code>factory</code>：工厂应用分区，存储默认的固件镜像（设备首次启动或恢复出厂设置时运行的程序）。</li><li><code>vfs</code>：Virtual File System（虚拟文件系统）分区，类型为&nbsp;<code>fat</code>（FAT 文件系统），可用于存储文件（如配置文件、日志）。</li><li><code>storage</code>：自定义存储分区，类型为&nbsp;<code>spiffs</code>（SPIFFS 文件系统），适合嵌入式设备的轻量级文件存储。</li></ul><h4><strong>字段 2：<code>Type</code>（分区类型）</strong></h4><ul><li><code>data</code>：数据分区（存储配置、文件系统等非程序数据）。</li><li><code>app</code>：应用分区（存储固件程序，可被 Bootloader 加载运行）。</li></ul><h4><strong>字段 3：<code>Sub Type</code>（子类型）</strong></h4><ul><li><code>nvs</code>：对应&nbsp;<code>nvs</code>&nbsp;分区，标识该数据分区用于 NVS。</li><li><code>phy</code>：对应&nbsp;<code>phy_init</code>&nbsp;分区，标识该数据分区用于 PHY 初始化。</li><li><code>factory</code>：对应&nbsp;<code>factory</code>&nbsp;分区，标识该应用分区为工厂固件。</li><li><code>fat</code>：对应&nbsp;<code>vfs</code>&nbsp;分区，标识该数据分区使用 FAT 文件系统。</li><li><code>spiffs</code>：对应&nbsp;<code>storage</code>&nbsp;分区，标识该数据分区使用 SPIFFS 文件系统。</li></ul><h4><strong>字段 4：<code>Offset</code>（分区起始偏移）</strong></h4><ul><li>如&nbsp;<code>0x9000</code>、<code>0xF000</code>&nbsp;等，表示该分区在 Flash 中的起始地址（相对于 Flash 起始位置）。</li><li>需注意分区之间<strong>不能重叠</strong>，且需符合 Flash 擦除块（erase block）对齐要求。</li></ul><h4><strong>字段 5：<code>Size</code>（分区大小）</strong></h4><ul><li>如&nbsp;<code>0x6000</code>（24KB）、<code>0x1F0000</code>（2,048KB = 2MB）等，表示该分区占用的 Flash 空间大小。</li></ul><h4><strong>字段 6：<code>Encrypted</code>（加密）</strong></h4><ul><li>复选框：启用后，该分区数据会被加密（需配合 ESP-IDF 的安全机制，如 Secure Boot、Flash 加密）。</li></ul><h4><strong>字段 7：<code>&times;</code>（删除按钮）</strong></h4><ul><li>点击可删除对应分区的配置。</li></ul><h3><strong>4. 关键分区的作用</strong></h3><ul><li><strong><code>nvs</code></strong>：必选分区，用于保存设备运行时的配置（掉电不丢失）。</li><li><strong><code>phy_init</code></strong>：必选分区（若使用 WiFi / 蓝牙），存储射频校准参数，确保无线通信稳定。</li><li><strong><code>factory</code></strong>：必选分区，存储默认固件，设备启动时 Bootloader 会优先加载此分区的程序。</li><li><strong><code>vfs</code>（FAT）</strong>：可选分区，适合存储文件（如文本、二进制数据），支持电脑直接挂载访问。</li><li><strong><code>storage</code>（SPIFFS）</strong>：可选分区，轻量级文件系统，适合嵌入式设备（无需复杂的文件系统支持）。</li></ul><h3><strong>5. 实际应用场景</strong></h3><ul><li><strong>分区表的作用</strong>：将 Flash 划分为多个逻辑区域，分别存储程序、配置、文件系统等，让不同功能的数据互不干扰。</li><li><strong>修改注意事项</strong>：<ul><li>调整分区大小或偏移时，需确保 Flash 总容量足够（如 ESP32-S3-N16R8 的 Flash 是 16MB）。</li><li>若新增文件系统分区（如&nbsp;<code>vfs</code>、<code>storage</code>），需在代码中初始化对应的文件系统（如&nbsp;<code>esp_vfs_fat_mount()</code>&nbsp;或&nbsp;<code>esp_spiffs_mount()</code>）。</li><li>烧录新分区表后，若覆盖了原有数据分区（如&nbsp;<code>nvs</code>），可能导致配置丢失，需谨慎操作。</li></ul></li></ul><p>简单说，这个界面让你<strong>可视化管理 ESP32 设备的 Flash 分区</strong>，像分硬盘区一样把 Flash 划给固件、配置、文件系统等不同功能使用，避免手动写 CSV 配置的麻烦～</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/a2214a781d004eaeab623eee8f1a152b.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ccfd5df1725049cfbbe7fd8a38530c21.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/5b41598fbe744fdb8abe6734efd2b548.png"></p><p>分区如下：</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/9b9c835c53924c65aae7771520ff37ed.png"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/322a203c66444dd9804f7aaf12f5e9cd.png"></p><h2>8.编译烧写</h2><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/e14f4c3b0fe9460ba45004f7ea5d57ff.png"></p><h3>头文件报红问题：</h3><p>验证了程序正常，但是这里头文件报红是因为VSCode里找不到组件文件，需要配置一下路径，这个组件的位置其实是在ESP-IDF里带的组件源码</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/8a43902e50494ff788c106b49181d024.png"></p><h4>方法一：</h4><p>（1）可以在文件夹.vscode下手动添加c_cpp_properties.json，或者点击VSCode的右下角的WIN32点击JSON可以得到自动生成的c_cpp_properties.json文件</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/44a7fe18c981445c8575d7da155bda05.png">https://i-blog.csdnimg.cn/direct/44a7fe18c981445c8575d7da155bda05.png</a>“ width&#x3D;”131” &#x2F;&gt;&lt;img alt&#x3D;)</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/435bb75047e44d9f8385afa5c2e18947.png"></p><p>（2）&quot;D:/Espressif/frameworks/esp-idf-v5.4/components&quot;你需要将你安装的ESP-IDF里的组件路径导入VSCode的json配置文件里，然后如果还有波浪线需要使用VSCode的自带的快速修复自动添加路径。</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/29bb4daa9d3d4bb28e942d2dd4868622.png"></p><h4>方法二：</h4><p>按下ctrl+shift+P，输入Add VS Code Configuration Folder，然后VSCode会把我们自动配置路径，以及更好地完善组件文件与用户文件地内联关系，可以自己去看看，了解一下。</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/415a07dca1a44c64a9287d2b8b7d480e.jpeg"></p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/7ec1e06b8852440cb7a27fb2a662465f.png"></p><p>结果：</p><p><img src="/2025/07/10/%E3%80%90SoC%E3%80%91%E3%80%90ESP32%E3%80%91ESP-IDF+VSCode%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ffcdb7bbc5914e0bb560cf7eb6f0de50.png"></p><p>11.bsp_led和main的CMakeLists分别需要补充依赖</p><p>bsp_led</p><pre><code class="language-cpp"># idf_component_register(SRCS "bsp_led.c"#                     INCLUDE_DIRS "include")idf_component_register(    SRCS "bsp_led.c"  # 合并两个源文件    INCLUDE_DIRS "include"          # 合并头文件目录    REQUIRES driver                     # 声明依赖 driver 组件)</code></pre><p>main</p><pre><code class="language-cpp">idf_component_register(SRCS "ESP32_Example.c"                    INCLUDE_DIRS "."                    REQUIRES bsp_led        )</code></pre><p>10.编写点灯测试代码</p><p>bsp_led.c</p><pre><code class="language-cpp">#include &lt;stdio.h&gt;#include "freertos/FreeRTOS.h"#include "freertos/task.h"#include "driver/gpio.h"#include "bsp_led.h"void bsp_led_init(void){    // 设置GPIO1为输出    gpio_set_direction(GPIO_NUM_1, GPIO_MODE_OUTPUT);        // // GPIO配置结构体    // gpio_config_t io_conf = {    //     .pin_bit_mask = (1ULL&lt;&lt;GPIO_NUM_1), // 选择GPIO1    //     .mode = GPIO_MODE_OUTPUT,           // 设置为输出模式    //     .pull_up_en = GPIO_PULLUP_ENABLE,  // 启用上拉    //     .pull_down_en = GPIO_PULLDOWN_DISABLE, // 禁用下拉    //     .intr_type = GPIO_INTR_DISABLE       // 禁用中断    // };    // // 配置GPIO    // esp_err_t ret = gpio_config(&amp;io_conf);    // if (ret != ESP_OK) {    //     printf("GPIO配置失败\n");    // }}void bsp_led_toggle(void){    // 切换GPIO1的状态    gpio_set_level(GPIO_NUM_1, !gpio_get_level(GPIO_NUM_1));    //vTaskDelay(pdMS_TO_TICKS(1000)); // 延时1秒}</code></pre><p>main.c(ESP32_Example.c)</p><pre><code class="language-cpp">#include "freertos/FreeRTOS.h"#include "freertos/task.h"// #include "nvs_flash.h"#include "esp_system.h"#include "esp_chip_info.h"// #include "esp_psram.h"// #include "esp_flash.h"#include "bsp_led.h" /* 包含 LED 头文件 *//*** @brief 程序入口* @param 无* @retval 无*/void app_main(void){// esp_err_t ret;// uint32_t flash_size;// esp_chip_info_t chip_info; /* 定义芯片信息结构体变量 */// ret = nvs_flash_init(); /* 初始化 NVS */// if (ret == ESP_ERR_NVS_NO_FREE_PAGES || ret == ESP_ERR_NVS_NEW_VERSION_FOUND)// {// ESP_ERROR_CHECK(nvs_flash_erase());// ret = nvs_flash_init();// }// esp_flash_get_size(NULL, &amp;flash_size); /* 获取 FLASH 大小 */// esp_chip_info(&amp;chip_info);// printf("内核： cup 数量%d\n",chip_info.cores); /* 获取 CPU 内核数并显示 */// /* 获取 FLASH 大小并显示 */// printf("FLASH size:%ld MB flash\n",flash_size / (1024 * 1024));// /* 获取 PARAM 大小并显示 */// printf("PSRAM size: %d bytes\n", esp_psram_get_size());bsp_led_init(); /* 初始化 LED */while(1){printf("Hello-ESP32\r\n");bsp_led_toggle(); /* 切换 LED 状态 */vTaskDelay(1000);}}</code></pre><p>参考链接：<br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="【正点原子】手把手教你学ESP32S3快速入门" href="https://www.bilibili.com/video/BV1sH4y1W7Tc?spm_id_from=333.788.player.switch&amp;vd_source=77379e487a8ecc7d4f9e65b8d9cd422d&amp;p=13" title="【正点原子】手把手教你学ESP32S3快速入门">【正点原子】手把手教你学ESP32S3快速入门</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="ESP32的ESP-IDF在VScode工程下，头文件标红警告、报错、无法跳转" href="https://blog.csdn.net/weixin_49337111/article/details/135167692" title="ESP32的ESP-IDF在VScode工程下，头文件标红警告、报错、无法跳转">ESP32的ESP-IDF在VScode工程下，头文件标红警告、报错、无法跳转</a></p>]]></content>
    
    
    <categories>
      
      <category>SoC学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vscode ide 编辑器 ESP32 ESP-IDF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【CH32】基于CH32F103C8T6离线固件库和MDK环境下的工程模板搭建（纯手动）</title>
    <link href="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/"/>
    <url>/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>CH32F103C8T6 是南京沁恒微电子（WCH）推出的一款 32 位微控制器，<strong>兼容 STM32F103C8T6</strong>（意法半导体的经典型号），采用 ARM Cortex-M3 内核，性能与成本平衡，适合替代 STM32 在各类嵌入式项目中的应用。以下是其核心特性和应用场景：</p><h3><strong>（1）核心参数</strong></h3><ul><li><p><strong>内核与性能</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;32 位 ARM Cortex-M3 内核，最高 72MHz 主频，支持 Thumb-2 指令集。&lt;/li&gt;&lt;li&gt;1.25DMIPS/MHz，内置硬件乘法器和除法器。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;存储与外设&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;64KB Flash（支持 ICP/IAP）、20KB SRAM。&lt;/li&gt;&lt;li&gt;丰富通信接口：3 个 USART、2 个 SPI、2 个 I2C、1 个 USB 2.0 全速（12Mbps）、CAN 2.0B。&lt;/li&gt;&lt;li&gt;1 个 12 位 ADC（16 通道，最高 1MHz 采样率）、2 个 12 位 DAC。&lt;/li&gt;&lt;li&gt;7 个定时器（包括高级定时器），支持 PWM 输出和编码器接口。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;工作条件&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;供电电压：2.0V~3.6V，工作温度：-40&amp;deg;C~+85&amp;deg;C（工业级）。&lt;/li&gt;&lt;li&gt;低功耗模式：睡眠、停止、待机。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3><strong>（2）与 STM32F103C8T6 的兼容性</strong></h3><ul><li><strong>硬件引脚兼容</strong>：完全兼容 STM32F103C8T6 的 LQFP48 封装，可直接替换。</li><li><strong>软件兼容</strong>：支持标准库（需使用 WCH 提供的固件库）和 HAL 库，大部分 STM32 代码可无缝移植。</li><li><strong>工具链支持</strong>：<ul><li>开发环境：Keil MDK、IAR、GCC（如 OpenOCD）。</li><li>调试接口：支持 SWD/JTAG（与 STM32 相同）。</li></ul></li></ul><h3><strong>（3）应用场景</strong></h3><ul><li><strong>工业控制</strong>：电机控制、传感器数据采集、PLC 模块。</li><li><strong>消费电子</strong>：智能家居设备、手持设备、无线充电。</li><li><strong>通信设备</strong>：串口转 USB/CAN 转换器、网关。</li><li><strong>替代方案</strong>：在 STM32 缺货或成本敏感场景中作为直接替代品。</li></ul><h3><strong>（4）优势与注意事项</strong></h3><ul><li><p><strong>优势</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;成本更低&lt;/strong&gt;：价格通常低于 STM32F103C8T6。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;国产支持&lt;/strong&gt;：供货稳定，技术支持响应快。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;扩展特性&lt;/strong&gt;：部分型号增加了 USB 和 CAN 等接口（如 CH32F103xC 系列）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;注意事项&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;固件库差异&lt;/strong&gt;：虽然 API 与 STM32 类似，但细节可能不同，需参考 WCH 官方文档。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;生态资源较少&lt;/strong&gt;：第三方库和教程不如 STM32 丰富。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;性能微调&lt;/strong&gt;：部分外设（如 ADC）的精度和稳定性可能略逊于 STM32。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3><strong>（5）开发资源</strong></h3><ul><li><strong>官方资源</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;沁恒官网（&lt;a data-link-icon=&quot;https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5&quot; data-link-title=&quot;www.wch.cn&quot; href=&quot;http://www.wch.cn/&quot; title=&quot;www.wch.cn&quot;&gt;www.wch.cn&lt;/a&gt;）提供固件库、数据手册和开发工具（如 WCH-Link）。&lt;/li&gt;&lt;li&gt;支持标准的 ARM 开发工具链（如 Keil、GCC）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;社区支持&lt;/strong&gt;：国内开源社区（如 STM32 论坛）有部分 CH32 移植经验分享。&lt;/li&gt;</code></pre></ul><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="CH32F103C8T6的官方示例链接" href="https://www.wch.cn/search.html" title="CH32F103C8T6的官方示例链接">CH32F103C8T6的官方示例链接</a></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a46b471c874f43d4bdcd635adb657b31.jpeg"></p><p>安装CH32F103C8T6的MDK支持包</p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/e0106e842e0d46afb4d1bccf58e82826.png"></p><h1>二、工程搭建</h1><h2>1.新建文件夹CH32_Example，然后再在其内新建文件夹</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/d47d5962d0ec47c79066b6c7e578261e.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/cccc3e1d12b244ffb890ecbf5ba8fe1c.png"></p><h2>&nbsp;2.\CH32资料\CH32F103\GPIO_PC13LED Project下的ch32f10x_conf.h放到我们的工程文件夹下的config文件夹下</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用了商家给的示例工程方便来移植整理，官方的其实也可以，但是外设源码是分开的需要自己整理，所以这里我就使用了商家给的来移植。</p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/b1d41274734b49adbc78e8cc88e347c3.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c4005b7990de4fb7a82c4634b88711b3.png"></p><h2>3.将.s启动文件放到startup文件夹下</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a048618c8b3047248ce131bf5eb7c6df.png"></p><h2>4.将\CH32资料\CH32F103\GPIO_PC13LED Project\SRC\CMSIS下的内核文件放到cmsis文件夹下</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/bad8fa30d867434e89ba4d21a6d01e42.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/1c4d57684f5947c1b1fc690b4c154e62.png"></p><h2>5.将\CH32资料\CH32F103\GPIO_PC13LED Project下的system_ch32f10x.h/c系统文件放到system文件夹下</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/4b2e8e79cce94ee79948b2c3ec3e57e9.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/0b2a898c6bf24ce7994b9da023556931.png"></p><h2>6.将\CH32资料\CH32F103\GPIO_PC13LED Project\SRC\StdPeriphDriver下的外设头文件和c文件放到firmware下</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9add4bb019b44ed18f30366408a498cc.png"></p><h2>7.将\CH32资料\CH32F103\GPIO_PC13LED Project下的ch32f10x_it.h/c和main.c的文件放到user下</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9a2bd756343d4d7d894b91b7d106f00e.png"></p><h2>8.打开MDK新建工程在Project下，并选择CH32的支持包</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/b708e0d566f444fb8d9f7072ec13ae07.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/70244b0d11f1486f9cd26e74940c5447.png"></p><h2>9.重新建立工程结构</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/95255badcd744260a588b44cf17c3521.png"></p><h2>10.添加文件</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/fc29630b9916450988bfd4f4d256f20c.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/dcab07955a874d6ab4dfdfa6ca6299ad.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/bf574dbd7217423d8d46743ffeac0953.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/49958410cd6c4a3a864089c936b2837f.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/0af3448aeb4a4eaeaaa960fbbaab674f.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/e504f3a0c16e43b8979999bb96d954be.png"></p><h2>11.添加商家给的额外的库</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/3ac8f692784643bf997b1c8b8ffbfa77.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/56495ff8bc3c42f08ff5884625f65dfe.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/4ecf2791bc794450a2a12b14450bc4e0.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a53c8f1bacd84fe182380f0209f9f6ff.png"></p><h2>12.添加文件路径</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/8b04d82919814b899136dab9d1bb8e5c.png"></p><h2>13.移去ch32f10x_usb_host.c</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/697674279e6c4bd0974b31a0a179f137.png"></p><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/eb7219e3c2754aa281f49472617f23bf.png"></p><h2>14.编译完成</h2><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/e7e14ded568349be8ce520444416afbd.png"></p><h1>三、代码编写</h1><pre><code class="language-cpp">/********************************** (C) COPYRIGHT ******************************** File Name          : main.c* Author             : WCH* Version            : V1.0.0* Date               : 2019/10/15* Description        : Main program body.*******************************************************************************/ #include "debug.h"/* Global define *//* Global Variable */ /******************************************************************************** Function Name  : GPIO_Toggle_INIT* Description    : Initializes GPIOA.0* Input          : None* Return         : None*******************************************************************************/void GPIO_Toggle_INIT(void){GPIO_InitTypeDef  GPIO_InitStructure;RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC,ENABLE);    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;              GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;           GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;GPIO_Init(GPIOC, &amp;GPIO_InitStructure);                  }/******************************************************************************** Function Name  : main* Description    : Main program.* Input          : None* Return         : None*******************************************************************************/int main(void){NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);Delay_Init();//USART_Printf_Init(115200);GPIO_Toggle_INIT();//printf("SystemClk:%d\r\n",SystemCoreClock);//printf("GPIO Toggle TEST\r\n");    while(1){Delay_Ms(1000);GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_RESET);Delay_Ms(1000);GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET);}}</code></pre><h1>四、实验效果</h1><p><img src="/2025/07/09/%E3%80%90MCU%E3%80%91%E3%80%90CH32%E3%80%91%E5%9F%BA%E4%BA%8ECH32F103C8T6%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%BA%93%E5%92%8CMDK%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/5bbd4480e2ab4886b6e1c89e57737b57.gif"></p><p>示例工程链接：</p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="https://github.com/Molesidy/CH32.git" href="https://github.com/Molesidy/CH32.git" title="https://github.com/Molesidy/CH32.git"><span class="link-card-box" contenteditable="false"><span class="link-title">https://github.com/Molesidy/CH32.git</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" />https://github.com/Molesidy/CH32.git</span></span></a></p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CH32 单片机 keil 嵌入式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【AT32】利用AT32离线固件包搭建AT32工程模板（纯手动）</title>
    <link href="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/"/>
    <url>/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文将介绍如何自己手动搭建基于MDK开发环境下的AT32工程模板。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AT32 系列是 ** 雅特力科技（Arterytek）** 推出的 32 位 ARM Cortex-M 系列微控制器（MCU），兼容 STM32 生态，提供高性能、低功耗和丰富的外设接口，广泛应用于工业控制、消费电子、IoT 等领域。</p><h3><strong>核心特点</strong></h3><ol><li><p><strong>高性能内核</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;基于 **ARM Cortex-M4/M3/M0+** 内核，最高主频达 240MHz（AT32F437 系列）。&lt;/li&gt;&lt;li&gt;支持 DSP 指令集和 FPU（浮点单元，部分型号），适合数字信号处理。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;丰富的存储与接口&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Flash 容量：64KB~2MB，SRAM：16KB~512KB。&lt;/li&gt;&lt;li&gt;通信接口：UART、SPI、I2C、USB、CAN、Ethernet 等。&lt;/li&gt;&lt;li&gt;ADC/DAC：12 位 ADC（最高 2.6MSPS）、12 位 DAC。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;低功耗设计&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;支持多种低功耗模式（睡眠、停止、待机），最低功耗仅数 &amp;mu;A。&lt;/li&gt;&lt;li&gt;内置电源管理单元（PWR）和实时时钟（RTC）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;高安全性&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;支持代码加密（读保护、写保护）。&lt;/li&gt;&lt;li&gt;硬件 CRC 校验、随机数发生器（RNG）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h3><strong>典型型号与应用场景</strong></h3><table><thead><tr><th><strong>系列</strong></th><th><strong>内核</strong></th><th><strong>主频</strong></th><th><strong>典型应用</strong></th></tr></thead><tbody><tr><td>AT32F403A</td><td>Cortex-M4</td><td>96MHz</td><td>工业控制、电机驱动</td></tr><tr><td>AT32F415</td><td>Cortex-M4</td><td>120MHz</td><td>高端消费电子、智能设备</td></tr><tr><td>AT32F437</td><td>Cortex-M4</td><td>240MHz</td><td>高性能计算、通信网关</td></tr><tr><td>AT32F103</td><td>Cortex-M3</td><td>72MHz</td><td>低成本应用、替代 STM32F103</td></tr><tr><td>AT32F407</td><td>Cortex-M4</td><td>168MHz</td><td>网络设备、复杂控制</td></tr><tr><td>AT32F235</td><td>Cortex-M0+</td><td>48MHz</td><td>超低功耗 IoT 设备</td></tr></tbody></table><h3><strong>开发资源</strong></h3><ol><li><p><strong>软件开发工具</strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;AT32CubeMX&lt;/strong&gt;：图形化配置工具，兼容 STM32CubeMX。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;AT32IDE&lt;/strong&gt;：基于 Eclipse 的集成开发环境。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;支持第三方工具&lt;/strong&gt;：Keil MDK、IAR、GCC 等。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;固件库与中间件&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;标准外设库（SPL）&lt;/strong&gt;：类似 STM32 的标准库。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;HAL 库&lt;/strong&gt;：高级抽象层库，简化开发。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;RTOS 支持&lt;/strong&gt;：FreeRTOS、RT-Thread、uC/OS 等。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;硬件开发板&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;AT-START-F403A&lt;/strong&gt;：入门级开发板，适合基础学习。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;AT-PRO-F415&lt;/strong&gt;：专业开发板，集成丰富外设。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><h3><strong>与 STM32 的兼容性</strong></h3><ul><li><strong>代码兼容性高</strong>：大部分 STM32 代码可直接移植到 AT32（需修改头文件和少量寄存器配置）。</li><li><strong>引脚兼容</strong>：部分型号与 STM32 引脚完全兼容，可无缝替换。</li><li><strong>生态适配</strong>：支持 STM32 的开发工具和第三方库（如 FatFS、lwIP）。</li></ul><h3><strong>适用场景</strong></h3><ul><li><strong>工业控制</strong>：电机驱动、PLC、传感器接口。</li><li><strong>消费电子</strong>：智能家居、智能穿戴设备。</li><li><strong>通信设备</strong>：网关、路由器、IoT 终端。</li><li><strong>替代方案</strong>：作为 STM32 的高性价比替代方案（尤其在供应链紧张时期）。</li></ul><h3><strong>学习资源</strong></h3><ul><li><strong>官方文档</strong>：用户手册、参考手册、数据手册。</li><li><strong>示例代码</strong>：官方提供丰富的外设驱动示例。</li><li><strong>社区支持</strong>：雅特力官方论坛、GitHub 开源项目。</li></ul><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="固件库下载链接" href="https://www.arterytek.com/cn/product/AT32F403A.jsp#Resource" title="固件库下载链接">固件库下载链接</a></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a0a50a1cd95746f2925260640babefae.png"></p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="AT32的MDK支持包链接" href="https://www.arterytek.com/cn/product/AT32F403A.jsp#Resource" title="AT32的MDK支持包链接">AT32的MDK支持包链接</a></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ee596a2dceb04062bbc93066ca21f0ff.png"></p><h1>二、工程文件结构搭建</h1><h2>1.新建文件夹AT32_Example，在其下再次新建文件夹</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/e004c476ea584a9db83461ca5d6c522c.png"></p><h2>2.将\AT32F403AVGT7移植材料\libraries\drivers\src下的AT32外设c文件源码移植到firmware</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c4af2910e7fc4b77976aa167b875a1ff.png"></p><h2>3.将\AT32F403AVGT7移植材料\libraries\drivers\inc下的AT32外设h头文件放到/include/drivers/inc/下</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/94de730aa6cf466bae575bbe0e6b0c0f.png"></p><h2>&nbsp;4.\AT32F403AVGT7移植材料\project\at32f403a_407_board下的board.c，board.h放在bsp下</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/24cfcbd5747d4cc484b6aa101a472b57.png"></p><h2>5.\AT32F403AVGT7移植材料\libraries\cmsis\cm4\device_support\startup\mdk下的s文件是mdk环境下的启动文件放在cmsis</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c88335dd4fd04fcbb3e36d47dc3144f9.png"></p><h2>6.\AT32F403AVGT7移植材料\libraries\cmsis\cm4\device_support下的系统文件也放在cmsis下</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9330559b80644eae9681d251e4d236a0.png"></p><h2>&nbsp;7.将\AT32F403AVGT7移植材料\project\at_start_f403a\templates\inc下的3个头文件放到user下</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/066fca26267f4e7bafb9ade5dc5f78d7.png"></p><h2>&nbsp;8.将\AT32F403AVGT7移植材料\project\at_start_f403a\templates\src下的3个c文件放在user下</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ed0d78fcfa4b4bfdaf07bdad998f809c.png"></p><p>at32f403a_407_conf_template.h文件删掉，因为已经有at32f403a_407_conf.h</p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/0b715ca39ef84436a760a8af90b62732.png"></p><h2>&nbsp;9.在文件夹下再新建一个文件夹存放MDK工程启动文件</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c87d3f4d0b224ec7b04bd7ce28f604a6.png"></p><h2>10.打开MDK并新建工程</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/b966f7bd1e7f4b28ac1edfeeb2dd305f.png"></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/0c1f0b26730c49dc97e15e8cf0e6be01.png"></p><h2>11.选择对应支持芯片包</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/f594bbb437ae493080e531eb255ae473.png"></p><h2>12.跳过在线配置工具，重新自定义工程结构组</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/f5f17c17359044208aeb802d7546523b.png"></p><h2>13.添加文件</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a18acc26dd7247d6baa57f1fb636e49f.png"></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/e6d22626945a4f25a4c01eb4fa1f5391.png"></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ebf13cc797884cdd82c4c793e01dfb97.png"></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/929c593d352f4a61a344142d75b35ca7.png"></p><h2>14.添加文件路径</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/59a796e678f24bf2952de35751598c1d.png"></p><h2>15.再新建文件core</h2><h2><img alt="" height="422" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/58f675306641424cb15f3f1101ff7df2.png" width="1076" />16.\AT32F403AVGT7移植材料\libraries\cmsis\cm4\core_support下的文件（不包括文件夹），放到core下，再导入路径</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/4a6286e8fe55429391bc95965864f20f.png"></p><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9d7a4fa7821f4fe8a949e01fd00bda65.png"></p><h2>17.工程配置中添加宏定义</h2><pre><code class="language-cpp">AT32F403AVGT7,USE_STDPERIPH_DRIVER,AT_START_F403A_V1</code></pre><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/5288158b26c44bb48f7810607eeb2ca1.png"></p><h2>18.编译</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/30c3312d9ee4433097b8016b3e50ef82.png"></p><h1>三、代码编写</h1><h2>1.开启时钟初始化</h2><h2>2.延时初始化</h2><h2>3.gpio（Led）初始化</h2><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/d5687aad2dc544ea97a3769f3fb0eb74.png"></p><h2>4.灯光闪烁</h2><pre><code class="language-cpp">//低电平点亮  gpio_bits_toggle(GPIOD, GPIO_PINS_11|GPIO_PINS_12|GPIO_PINS_13);  delay_ms(1000);</code></pre><p>main.c</p><pre><code class="language-cpp">/**  **************************************************************************  * @file     main.c  * @brief    main program  **************************************************************************  *                       Copyright notice &amp; Disclaimer  *  * The software Board Support Package (BSP) that is made available to  * download from Artery official website is the copyrighted work of Artery.  * Artery authorizes customers to use, copy, and distribute the BSP  * software and its related documentation for the purpose of design and  * development in conjunction with Artery microcontrollers. Use of the  * software is governed by this copyright notice and the following disclaimer.  *  * THIS SOFTWARE IS PROVIDED ON "AS IS" BASIS WITHOUT WARRANTIES,  * GUARANTEES OR REPRESENTATIONS OF ANY KIND. ARTERY EXPRESSLY DISCLAIMS,  * TO THE FULLEST EXTENT PERMITTED BY LAW, ALL EXPRESS, IMPLIED OR  * STATUTORY OR OTHER WARRANTIES, GUARANTEES OR REPRESENTATIONS,  * INCLUDING BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY,  * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.  *  **************************************************************************  */#include "at32f403a_407_board.h"#include "at32f403a_407_clock.h"/** @addtogroup AT32F403A_periph_template  * @{  *//** @addtogroup 403A_LED_toggle LED_toggle  * @{  */#define DELAY                            100#define FAST                             1#define SLOW                             4uint8_t g_speed = FAST;void button_exint_init(void);void button_isr(void);/**  * @brief  configure button exint  * @param  none  * @retval none  */void button_exint_init(void){  exint_init_type exint_init_struct;  crm_periph_clock_enable(CRM_IOMUX_PERIPH_CLOCK, TRUE);  gpio_exint_line_config(GPIO_PORT_SOURCE_GPIOA, GPIO_PINS_SOURCE0);  exint_default_para_init(&amp;exint_init_struct);  exint_init_struct.line_enable = TRUE;  exint_init_struct.line_mode = EXINT_LINE_INTERRUPT;  exint_init_struct.line_select = EXINT_LINE_0;  exint_init_struct.line_polarity = EXINT_TRIGGER_RISING_EDGE;  exint_init(&amp;exint_init_struct);  nvic_priority_group_config(NVIC_PRIORITY_GROUP_4);  nvic_irq_enable(EXINT0_IRQn, 0, 0);}/**  * @brief  button handler function  * @param  none  * @retval none  */void button_isr(void){  /* delay 5ms */  delay_ms(5);  /* clear interrupt pending bit */  exint_flag_clear(EXINT_LINE_0);  /* check input pin state */  if(SET == gpio_input_data_bit_read(USER_BUTTON_PORT, USER_BUTTON_PIN))  {    if(g_speed == SLOW)      g_speed = FAST;    else      g_speed = SLOW;  }}/**  * @brief  exint0 interrupt handler  * @param  none  * @retval none  */void EXINT0_IRQHandler(void){  button_isr();}/**  * @brief  main function.  * @param  none  * @retval none  */int main(void){  system_clock_config();//  at32_board_init();//  button_exint_init();//  uart_print_init(115200);//  printf("at32 mcu initialize ok.\r\n");delay_init();gpio_init_type gpio_init_struct;//结构体定义crm_periph_clock_enable(CRM_GPIOD_PERIPH_CLOCK, TRUE);//初始化GPIOD时钟gpio_default_para_init(&amp;gpio_init_struct);//缺省值配置gpio_init_struct.gpio_drive_strength = GPIO_DRIVE_STRENGTH_STRONGER;//驱动强度gpio_init_struct.gpio_out_type  = GPIO_OUTPUT_PUSH_PULL;//推挽输出gpio_init_struct.gpio_mode = GPIO_MODE_OUTPUT;//输出gpio_init_struct.gpio_pins = GPIO_PINS_11|GPIO_PINS_12|GPIO_PINS_13;gpio_init_struct.gpio_pull = GPIO_PULL_NONE;gpio_init(GPIOD, &amp;gpio_init_struct);  while(1)  {//    at32_led_toggle(LED2);//    delay_ms(g_speed * DELAY);//    at32_led_toggle(LED3);//    delay_ms(g_speed * DELAY);//    at32_led_toggle(LED4);//    delay_ms(g_speed * DELAY);    //低电平点亮  gpio_bits_toggle(GPIOD, GPIO_PINS_11|GPIO_PINS_12|GPIO_PINS_13);  delay_ms(1000);    }}/**  * @}  *//**  * @}  */</code></pre><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ab7126c7ba7441dcae446da86ecf7327.png"></p><h1>四、 实验验证</h1><p><img src="/2025/07/08/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91%E5%88%A9%E7%94%A8AT32%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E6%90%AD%E5%BB%BAAT32%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/48b026d582db4b588087407870af1308.gif"></p><p><strong>示例工程链接：</strong><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Molesidy/AT32: This repository is used to store sample projects generated during the process of learning AT32." href="https://github.com/Molesidy/AT32" title="Molesidy/AT32: This repository is used to store sample projects generated during the process of learning AT32."><span class="link-card-box" contenteditable="false"><span class="link-title">Molesidy/AT32: This repository is used to store sample projects generated during the process of learning AT32.</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.4.1/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P758" />https://github.com/Molesidy/AT32</span></span></a></p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AT32 单片机 嵌入式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【MCU】【AT32】AT32IDE的初步使用</title>
    <link href="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、简介</h1><h3>基本信息</h3><ul><li><strong>开发基础</strong>：基于 Eclipse 框架，是一个跨平台 ARM 嵌入式系统的软件开发环境，集成了一系列 Eclipse 插件和工具。</li><li><strong>操作系统兼容性</strong>：支持 Windows 和 Linux 操作系统，其中 Linux 发行版本支持 Ubuntu 18.4 及以上、Fedora 34 及以上、Centos 7 及以上等 。在 Windows 系统中可直接运行安装程序，在 Linux 系统中按照特定步骤解压安装包即可完成安装，如在 Ubuntu 20.4 上，可先创建目录，再通过<code>tar</code>命令解压安装包到指定目录。</li><li><strong>自带资源</strong>：安装包包含 JRE 运行环境、ARM 工具链（如 GNU ARM 工具链，含 ARM 的 GCC 编译程序）和 GCC Make 构建工具 ，帮助开发者便捷组织资源、装备软件组件。</li></ul><h3>主要功能</h3><ul><li><strong>项目创建</strong>：通过雅特力项目向导，为不同的雅特力目标 MCU 提供创建模板项目。以创建基于 AT32F403AVGT7 的项目为例，在菜单栏选择【File】&gt;【New】&gt;【C Project】，输入项目名称，选择项目类型（如 AT32F403A_407 C Project ）和默认工具链（Arm Cross GCC），再按需配置目标芯片、调试等选项，即可完成项目创建 。</li><li><strong>项目构建</strong>：使用 GNU ARM 工具链来构建项目。构建时，右键单击项目，选择 &ldquo;Build Project&rdquo;，或者选中项目后点击菜单栏的 &ldquo;Build Project&rdquo;，即可生成 elf 文件，构建日志会在控制台打印。若需重新配置构建选项，可选择菜单【Project】&gt;【Properties】或右键项目选择【Properties】，在 C/C++ Build&gt;Settings 中更改配置，应用设置后重新构建项目 。</li><li><strong>项目调试</strong>：以 GDB 作为调试工具，支持暂停、单步、运行和监视目标芯片，能存取内存及闪存，还支持设置硬件断点及检测点，也可以抹除目标芯片和编程用户配置。调试前，选择菜单【Run】&gt;【Debug Configurations&hellip;】打开调试配置对话框，双击 GDB AT-Link Debugging 自动创建 AT-Link 调试配置，大部分配置信息会自动生成，一般无需修改。在调试透视图，可查看变量值、表达式值、外围寄存器等 。</li></ul><h1>二、工程建立</h1><h2>1.工程配置</h2><p>填写工程名，选择对应芯片</p><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/ffe01a2afe7d4aef8f7eea70c095c962.png"></p><h2>2.选择裸机开发，外部时钟，无跟踪打印输出等</h2><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/f15848de4f9046eb9e3057a1f5fb1a40.png"></p><h2>3.自定义工程目录</h2><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/772d14a4208f4e5fbdc458b9abcd44d9.png"></p><p>1. 通用作用</p><p>界面标题 &ldquo;<code>Folders settings</code>&rdquo; + 说明文字 &ldquo;<code>Define the project folders and other options.</code>&rdquo; ，功能是让开发者指定项目中不同类别文件的存储路径，方便工程文件分类管理、工具链 / 编译器识别依赖，让代码编译、链接流程更清晰。</p><p>2. 逐行解析参数</p><ul><li><p><strong><code>Include folder</code></strong></p><pre><code class="hljs">&lt;ul&gt;&lt;li&gt;用途：存放&lt;strong&gt;头文件（.h）&lt;/strong&gt;&amp;nbsp;，比如芯片寄存器定义、函数声明、宏定义等。&lt;/li&gt;&lt;li&gt;示例：&lt;code&gt;include&lt;/code&gt;&amp;nbsp;目录里可能有&amp;nbsp;&lt;code&gt;at32f403a.h&lt;/code&gt;（芯片外设寄存器头文件 ）、&lt;code&gt;project_config.h&lt;/code&gt;（项目全局配置 ），代码里&amp;nbsp;&lt;code&gt;#include &amp;quot;xxx.h&amp;quot;&lt;/code&gt;&amp;nbsp;会从这里找文件。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;Libraries folder&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;用途：存放&lt;strong&gt;库文件（.a、.lib 等二进制库，或 .c/.cpp 源码形式的库 ）&lt;/strong&gt;&amp;nbsp;，一般是通用算法、第三方功能封装（如加密库、数学库 ）。&lt;/li&gt;&lt;li&gt;示例：&lt;code&gt;libraries&lt;/code&gt;&amp;nbsp;里可能有&amp;nbsp;&lt;code&gt;math_lib&lt;/code&gt;&amp;nbsp;文件夹，包含数学运算函数的源码 / 编译好的库，工程编译时会链接这些代码实现功能。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BSP folder&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;含义：BSP = Board Support Package（板级支持包 ）。&lt;/li&gt;&lt;li&gt;用途：存放&lt;strong&gt;与硬件板卡强相关的代码&lt;/strong&gt;，比如特定开发板的引脚初始化（&lt;code&gt;bsp_gpio.c&lt;/code&gt;&amp;nbsp;）、硬件外设适配（显示屏、按键驱动 ）。&lt;/li&gt;&lt;li&gt;作用：隔离硬件差异，换开发板时只需替换 / 修改 BSP 目录，上层逻辑（如应用代码 ）可复用。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;CMSIS library folder&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;含义：CMSIS = Cortex Microcontroller Software Interface Standard（ARM Cortex 内核 MCU 软件接口标准 ）。&lt;/li&gt;&lt;li&gt;用途：存放&amp;nbsp;&lt;strong&gt;CMSIS 标准相关文件&lt;/strong&gt;，包含：&lt;ul&gt;&lt;li&gt;内核寄存器定义（如&amp;nbsp;&lt;code&gt;core_cm4.h&lt;/code&gt;&amp;nbsp;，针对 Cortex-M4 内核 ）；&lt;/li&gt;&lt;li&gt;内核外设驱动（如 SysTick 定时器、NVIC 中断控制器初始化 ）；&lt;/li&gt;&lt;li&gt;部分通用 API（如&amp;nbsp;&lt;code&gt;__disable_irq()&lt;/code&gt;&amp;nbsp;关中断函数 ）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;作用：让代码适配 ARM 内核规范，不同厂商（如雅特力、ST、NXP ）的 Cortex-M 系列 MCU，CMSIS 层可通用，降低移植成本。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;Firmware folder&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;用途：存放&lt;strong&gt;芯片厂商提供的固件库 / 驱动源码&lt;/strong&gt;，比如 AT32 官方的外设驱动（GPIO、UART、SPI 等初始化函数 ）。&lt;/li&gt;&lt;li&gt;示例：&lt;code&gt;firmware&lt;/code&gt;&amp;nbsp;里可能有&amp;nbsp;&lt;code&gt;at32f403a_gpio.c&lt;/code&gt;（GPIO 外设驱动 ）、&lt;code&gt;at32f403a_uart.c&lt;/code&gt;（串口驱动 ），包含寄存器操作的底层代码，开发者可直接调用这些驱动函数控制硬件。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;User folder&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;用途：存放&lt;strong&gt;用户自定义代码&lt;/strong&gt;，比如主函数（&lt;code&gt;main.c&lt;/code&gt;&amp;nbsp;）、应用逻辑（&lt;code&gt;app_task.c&lt;/code&gt;&amp;nbsp;）、业务功能实现（如传感器数据处理、协议解析 ）。&lt;/li&gt;&lt;li&gt;作用：区分开官方 / 通用代码（如 CMSIS、Firmware ）和开发者写的业务代码，工程结构更清晰，方便维护。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><p>实际开发价值</p><p>这样的目录划分是嵌入式工程 **&ldquo;模块化管理&rdquo;** 的体现：</p><ul><li>工具链（如 GCC 编译时 ）能通过这些路径找到头文件、库文件，确保&nbsp;<code>#include</code>&nbsp;不报错、链接不缺文件；</li><li>多人协作 / 后续维护时，一眼能区分 &ldquo;官方驱动&rdquo;&ldquo;用户代码&rdquo;&ldquo;硬件适配代码&rdquo;，降低理解成本；</li><li>移植项目到新芯片 / 新开发板时，只需替换 CMSIS、BSP、Firmware 等目录，用户代码大概率复用，效率更高。</li></ul><h2>4.工具链选择</h2><h2><img alt="" height="575" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/cd8a1dda5f76400caf7c0bd36650c98a.png" width="734" />5.添加DEBUG配置</h2><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/dcc47133e930484390a446904ac977c5.png"></p><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/aee0243a757141de95309a1af8cdafca.png"></p><p>选择烧写方式</p><p><img src="/2025/07/07/%E3%80%90MCU%E3%80%91%E3%80%90AT32%E3%80%91AT32IDE%E7%9A%84%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/1f1c1d265a9a4ce8a6b82f3e85408ee3.png"></p><p>注：<br />AT32IDE内无法使用ST-Link下载程序（如果有读者知道AT32IDE如何配置ST-Link可以在评论区发出来），需要使用AT-Link。</p>]]></content>
    
    
    <categories>
      
      <category>MCU学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AT32 单片机 嵌入式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】基于标准库和HAL库分别实现RS485通信方式</title>
    <link href="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/"/>
    <url>/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、简介</h1><p><strong>发展历程：</strong></p><ul><li><strong>UART 的产生</strong>：UART（通用异步收发器）的发展与串行通信的发展密切相关。早期的串行通讯主要用于电信和无线电设备，采用莫尔斯电码和调幅（AM），这些系统通常是定制化的，缺乏标准化的硬件模块。随着串行通信的普及，20 世纪 60 年代末，UART 应运而生。</li><li><strong>RS-232 的出现</strong>：UART 产生后，需要有相应的标准来规范其硬件的电气特性和协议，使串行通信更加规范化。1962 年，EIA 发布了 RS-232 标准，命名为 EIA-232-E，作为工业标准，以保证不同厂家产品之间的兼容。RS-232 采用单端信号传送，存在共地噪声和不能抑制共模干扰等问题，一般用于 20 米以内的通信，最大位速率为 20Kb/s。</li><li><strong>RS-422 的发展</strong>：由于 RS-232 存在通信距离短、速率低的缺点，为了改进这些不足，EIA 在 RS-232 的基础上发展出了 RS-422 标准。RS-422 定义了一种平衡通信接口，将传输速率提高到 10Mbps，传输距离延长到 1200 米（速率低于 100Kbps 时），并允许在一条平衡总线上连接最多 10 个接收器。它是一种单机发送、多机接收的单向、平衡传输规范，被命名为 TIA/EIA-422-A 标准。</li><li><strong>RS-485 的诞生</strong>：为了进一步扩展应用范围，EIA 于 1983 年在 RS-422 基础上制定了 RS-485 标准。RS-485 增加了多点、双向通信能力，即允许多个发送器连接到同一条总线上，同时增加了发送器的驱动能力和冲突保护特性，扩展了总线共模范围，后命名为 TIA/EIA-485-A 标准。RS-485 为半双工通信，用于多站互连时可节省信号线，便于高速、远距离传送，允许最多并联 32 台驱动器和 32 台接收器。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;需要注意的是，按照技术发展的先后顺序，应该是 UART-&gt;RS-232-&gt;RS-422-&gt;RS-485。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS485和RS422电路原理基本相同，都是以差动方式发送和接受，不需要数字地线。差动工作是同速率条件下传输距离远的根本原因，这正是二者与RS232的根本区别，因为RS232是单端输入输出，双工工作时至少需要数字地线、发送线和接受线三条线（异步传输），还可以加其它控制线完成同步等功能。RS422通过两对双绞线可以全双工工作收发互不影响，而RS485只能半双工工作，发收不能同时进行，但它只需要一对双绞线。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS-232、RS-422与RS-485标准只对接口的电气特性（电压，阻抗）做出规定，而不涉及接插件、电缆或协议，在此基础上用户可以建立自己的高层通信协议。</p><p><strong>RS485：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;与CAN类似，RS-485是一种工业控制环境中常用的通讯协议，它具有抗干扰能力强、传输距离远的特点。RS-485通讯协议由RS-232协议改进而来， 协议层不变，只是改进了物理层，因而保留了串口通讯协议应用简单的特点。（<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="参考链接" href="https://doc.embedfire.com/mcu/stm32/f407batianhu/std/zh/latest/book/RS485.html#id3" title="参考链接">参考链接</a>）</p><p>RS485通信网络示意图</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/d69148ca49c6472daf43a20817cb8d5c.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对比CAN通讯网络，可发现它们的网络结构组成是类似的，每个节点都是由一个通讯控制器和一个收发器组成，在RS-485通讯网络中， 节点中的串口控制器使用RX与TX信号线连接到收发器上，而收发器通过差分线连接到网络总线，串口控制器与收发器之间一般使用TTL信号传输， 收发器与总线则使用差分信号来传输。发送数据时，串口控制器的TX信号经过收发器转换成差分信号传输到总线上，而接收数据时， 收发器把总线上的差分信号转化成TTL信号通过RX引脚传输到串口控制器中。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS-485通讯网络的最大传输距离可达1200米，总线上可挂载128个通讯节点，而由于RS-485网络只有一对差分信号线，它使用差分信号来表达逻辑， 当AB两线间的电压差为-6V~-2V时表示逻辑1，当电压差为+2V~+6V表示逻辑0，在同一时刻只能表达一个信号，所以它的通讯是半双工形式的， 它与RS-232通讯协议的特性对比见图。</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/b54807c3aec44e96a2d9fee92c6f1ee1.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RS-485与RS-232的差异只体现在物理层上，它们的协议层是相同的，也是使用串口数据包的形式传输数据。而由于RS-485具有强大的组网功能， 人们在基础协议之上还制定了MODBUS协议，被广泛应用在工业控制网络中。此处说的基础协议是指前面串口章节中讲解的， 仅封装了基本数据包格式的协议(基于数据位)，而MODBUS协议是使用基本数据包组合成通讯帧格式的高层应用协议(基于数据包或字节)。 感兴趣的读者可查找MODBUS协议的相关资料了解。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于RS-485与RS-232的协议层没有区别，进行通讯时，同样是使用STM32的USART外设作为通讯节点中的串口控制器， 再外接一个RS-485收发器芯片把USART外设的TTL电平信号转化成RS-485的差分信号即可。</p><p>实际的RS485收发器的硬件原理图：</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/c8b14e492f4347aaa4ba60bb023bc3e8.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/90d1661810fe4ef3a773d8d4c489a433.png"></p><p>SP3485 是一款高性能、低功耗的 RS-485/RS-422 收发器。其引脚定义如下：</p><ol><li><strong>RO（接收输出）</strong>：将从 RS485 中接收到的差分信号转换为数字信号，并输出到 USART 的 RX 引脚。（RO接MCU的RX）</li><li><strong>RE（接收使能）</strong>：低电平有效，即当该引脚为低电平时，使能接收功能，高电平则禁用接收功能。（MCU对RE输出低电平就激活收发器的接收功能，反之禁用接收）</li><li><strong>DE（发送使能）</strong>：高电平有效，当该引脚为高电平时，使能发送功能，低电平则禁用发送功能。（MCU对DE输出高电平就激活收发器的发送功能，反之禁用发送）</li><li><strong>DI（发送输入）</strong>：将 USART 输入的数字信号发送到 RS485，将其转换为差分信号后输出到总线。（DI接MCU的TX）</li><li><strong>GND（接地）</strong>：连接到电源地。</li><li><strong>A（发送器输出 / 接收器输入正端）</strong>：用于 RS-485 差分信号传输的正极引脚。（半双工）</li><li><strong>B（发送器输出 / 接收器输入负端）</strong>：用于 RS-485 差分信号传输的负极引脚。（半双工）</li><li><strong>VCC（电源）</strong>：芯片供电引脚，通常接 + 3.3V 电源。</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;单片机通信一般是TTL电平，而外接设备如果是485设备，通信的电平就是485电平，电平是不一样的，所以两者不能直接相接。中间需要电平转换的芯片来转换一下，所以就有了我们的485芯片。因为485通信是半双工的，所以又把485芯片叫做半双工收发器。而SP3485芯片就是一款非常经典的低功耗半双工收发器的芯片，满足RS485串行协议要求。</p><p><strong>RS485 通信</strong>采用差分信号传输，通常情况下只需要两根信号线就可以进行正常的通信。<br />在差分信号中，<strong>逻辑0</strong>和<strong>逻辑1</strong>是用两根信号线（A+和B-）的<strong>电压差</strong>来表示。</p><ul><li><strong>逻辑 1</strong>：两根信号线（A+和B-）的电压差在&nbsp;<strong>+2V～+6V</strong>&nbsp;之间。</li><li><strong>逻辑 0</strong>：两根信号线（A+和B-）的电压差在&nbsp;<strong>-2V～-6V</strong>&nbsp;之间。</li></ul><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="串行接口RS485简介-视频链接" href="https://www.bilibili.com/video/BV15g4y1A7fZ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=77379e487a8ecc7d4f9e65b8d9cd422d" title="串行接口RS485简介-视频链接">串行接口RS485简介-视频链接</a></p><h1>二、工程创建</h1><h2 style="background-color:transparent">1.基于STM32CubeMX的HAL库实现RS485通讯</h2><h3>（1）打开STM32CubeMX进行工程创建，首先，开启外部高速时钟</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/6e350c5ca6d645e88b2126bff109b29f.png"></p><p>（2）开启SWD</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/69e21a425ad145dba75e4a6f975f62fb.png"></p><h3>（3）开启串口1，作为MCU链接RS485的串口接口，并且开启全局中断</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/575fd7f31f484701af7311d664ed8c4f.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/0d15133d255d4f6fbde96dd2542b28ce.png"></p><h3>（4）开启一个GPIO-PA7作为RS485的控制引脚</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/d7a508fba92a45bf8bc428ff3593c8ac.png"></p><h3>（5）PB8/9 作为OLED驱动引脚，PB1/11作为按键来控制发送部分</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/e8a4fb379f91470db5ca3cb2523054ec.png"></p><h3>（6）配置时钟树</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/79551238414047789e2c981c15d0f5db.png"></p><h3>（7）工程配置</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/c2dcb9f0360b4cc3a64555ec672e3f43.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E5%92%8CHAL%E5%BA%93%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0RS485%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F/e22a00928f534286885a818fcac7a694.png"></p><h3>（8）代码编写</h3><p><strong>接收部分：</strong></p><p>bsp_RS485.h</p><pre><code class="language-cpp">#ifndef __BSP_485_H#define __BSP_485_H#include "stm32f1xx_hal.h"#define USART1_RX_Byte_Size 1#define USART1_RxBuffer_Size 256#define RS485DIR_TX_MODE HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_SET);//定义我们的控制引脚为发送状态#define RS485DIR_RX_MODE HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_RESET);//定义我们的控制引脚为接收状态extern uint16_t USART1_RX_Flag;extern uint8_t USART1_RX_Byte[USART1_RX_Byte_Size];extern uint8_t USART1_RxBuffer[USART1_RxBuffer_Size];void RS485_Init(void);#endif //__BSP_485_H</code></pre><p>bsp_RS485.c</p><pre><code class="language-cpp">#include "bsp_RS485.h"#include "usart.h"uint16_t USART1_RX_Flag = 0;uint8_t USART1_RX_Byte[USART1_RX_Byte_Size]; //字节接受uint8_t USART1_RxBuffer[USART1_RxBuffer_Size]; //缓冲区uint8_t RX_index = 0;void RS485_Init(void){//RS485DIR_TX_MODE;RS485DIR_RX_MODE;HAL_UART_Receive_IT(&amp;huart1, (unsigned char *)USART1_RX_Byte, sizeof(USART1_RX_Byte));//初始化接收中断使能}void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart){if(huart-&gt;Instance==USART1)//如果是串口1{//if((USART1_RX_Flag&amp;0x8000)==0)//接收未完成//{//if(USART1_RX_Flag&amp;0x4000)//{//if(USART1_RX_Byte[0]!=0x0a)USART1_RX_Flag=0;//接收错误,重新开始//else USART1_RX_Flag|=0x8000;//收到0x0a 接收完成了 //}//else //{////判断是否收到0X0D//if(USART1_RX_Byte[0]==0x0d)USART1_RX_Flag|=0x4000; //收到0X0D USART1_RX_Flag为0x4000//else //没有收到0X0D//{//USART1_RxBuffer[USART1_RX_Flag&amp;0X3FFF]=USART1_RX_Byte[0] ;//USART1_RX_Flag++;//if(USART1_RX_Flag&gt;(USART1_RxBuffer_Size-1))USART1_RX_Flag=0;//接收数据错误,重新开始接收  //} //}//}USART1_RX_Flag = 1;USART1_RxBuffer[RX_index++] = USART1_RX_Byte[0];USART1_RX_Byte[0] = 0;HAL_UART_Receive_IT(&amp;huart1, (unsigned char *)USART1_RX_Byte, sizeof(USART1_RX_Byte));}}</code></pre><p>main.c</p><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "usart.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "bsp_key.h"#include "bsp_oled.h"#include "bsp_RS485.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */uint8_t len;uint8_t message[] = "tip";  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  MX_GPIO_Init();  MX_USART1_UART_Init();  /* USER CODE BEGIN 2 */OLED_Init();RS485_Init();//RXOLED_Clear();OLED_ShowString(1, 1, "TX:");OLED_ShowString(3, 1, "RX:");  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */HAL_Delay(100);HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);HAL_Delay(100);      //USART1_RX_Flag&amp;0x8000if(USART1_RX_Flag == 1){   //len=USART1_RX_Flag&amp;0x3fff;//得到此次接收到的数据长度//RS485DIR_TX_MODE;//拉高PB5，更改RS485模式为发送//HAL_UART_Transmit(&amp;huart1,(uint8_t*)message,sizeof(message),1000);//发送提示信息//while(__HAL_UART_GET_FLAG(&amp;huart1,UART_FLAG_TC)!=SET);//等待发送结束//HAL_UART_Transmit(&amp;huart1,(uint8_t*)USART1_RxBuffer,len,1000);//发送接收到的数据//while(__HAL_UART_GET_FLAG(&amp;huart1,UART_FLAG_TC)!=SET);//等待发送结束OLED_ShowNum(3, 5, USART1_RxBuffer[0], 2);OLED_ShowNum(3, 9, USART1_RxBuffer[1], 2);USART1_RxBuffer[0] = 0;USART1_RxBuffer[1] = 0;//USART1_RxBuffer[2] = 0;//USART1_RxBuffer[3] = 0;RX_index=0;//RS485DIR_RX_MODE;//拉低PB5，更改RS485模式为接收len = 0;USART1_RX_Flag=0;//if(USART1_RxBuffer[0] == '1') //HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_1);}  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *//* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><p><strong>发送部分：</strong></p><p>main.c</p><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "usart.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "bsp_key.h"#include "bsp_oled.h"#include "bsp_RS485.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */uint8_t TX_Buffer[2] = {1,2};uint8_t Key_Num = 0;  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  MX_GPIO_Init();  MX_USART1_UART_Init();  /* USER CODE BEGIN 2 */OLED_Init();RS485_Init();//TXOLED_Clear();OLED_ShowString(1, 1, "TX:");OLED_ShowString(3, 1, "RX:");uint8_t new[2] = "\r\n";  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 *///HAL_Delay(100);Key_Num = KEY_GetNum();if(Key_Num == 1){HAL_UART_Transmit(&amp;huart1, TX_Buffer, 2, 1000);//HAL_UART_Transmit(&amp;huart1, new, 2, 1000);OLED_ShowNum(1, 5, TX_Buffer[0], 2);OLED_ShowNum(1, 9, TX_Buffer[1], 2);TX_Buffer[0]++;TX_Buffer[1]++;}    HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);HAL_Delay(500);        }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *//* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><p><strong>实验效果：</strong></p><h1><img alt="" height="500" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/6906b0e595c84ff8b419906d672e130d.gif" width="700" /></h1><p><strong>总结：</strong></p><p>RS485 是在串口（UART）的串行通信原理基础上，通过以下方式实现升级的通信技术：</p><ol><li><strong>物理层增强</strong>：采用差分信号传输（通过 RS485 收发器实现电平转换和驱动），提升抗干扰能力和传输距离，支持多节点组网。</li><li><strong>上层协议补充</strong>：RS485 本身仅定义物理层标准，需搭配 Modbus 等上层协议规定数据帧格式、通信规则，以实现有效通信。</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 单片机 嵌入式 RS485</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】【USB】USB通讯方式的学习笔记以及基于CubeMX HAL库的例程验证</title>
    <link href="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/"/>
    <url>/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1>一、USB介绍</h1><h2>1.概述</h2><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB（Universal Serial Bus，通用串行总线）</strong>是一种用于计算机与外部设备连接的接口技术。它凭借高速传输、热插拔支持、多设备兼容及即插即用特性，成为现代电子设备互联的核心纽带。</p><h2>2.USB发展历程</h2><ul><li><strong>USB 1.0</strong>：1994 年，以 Intel 为首的七家公司联合研发和制定了 USB 传输协议的第一个草案。1996 年，USB1.0 标准问世，理论速率为 1.5Mbit/s，但该版本未在市场上广泛使用。</li><li><strong>USB 1.1</strong>：1998 年，USB-IF 发布了 USB1.1 规范，开始逐渐占据主流市场。其高速传输速率为 12Mbit/s，低速传输速率为 1.5Mbit/s，支持热插拔、同步和异步传输并内置电源 / 低压配电装置，线缆最长 5m，最多支持 127 台设备，抗干扰能力大大增强。</li><li><strong>USB 2.0</strong>：2000 年，USB2.0 规范出台，传输速率达到 480Mbit/s，是半双工数据传输模式，且完全向后兼容之前的 USB 版本。2001 年，USB OTG 功能发布，使特定外部设备在没有电脑的情况下可以互相通讯。2007 年，推出了 Micro-USB 接口，增加了接口的稳定性，同时 USB 充电规格（USB BC）也在同年推出。</li><li><strong>USB 3.0</strong>：2008 年，Intel、Microsoft、HP 等公司组成的 USB 3.0 Promoter Group 完成了 USB 3.0（SuperSpeed USB）标准的发布，传输速率达到 5.0Gbit/s，最大输出电流 900mA，兼容 USB2.0 并支持全双工数据传输。2013 年，USB 3.1（USB SuperSpeed Gen2）标准发布，传输速率达到 10Gbit/s，供电标准提高至 20V/5A 的 100W。2017 年，USB 3.2 标准发布，在 USB Type-C 下支持双 10Gbit/s 通道，速率达 20Gbit/s。</li><li><strong>USB 4</strong>：2019 年，USB Promoter Group 发布基于雷电 3 协议开发的 USB4 协议，最大传输率达到 40Gbit/s，具备动态带宽资源分配能力并支持 USB Power Delivery 快充协议。2022 年，推出 USB4 2.0，通过 USB Type-C 接口的传输速率到达 80Gbit/s，并扩展 USB Type-C 接口性能，与 USB3.2、USB2.0 向下兼容。</li></ul><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/2836aa41813c4103bc1dc305d42e4be5.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/14deba0e2534415cb9cd816be56694ae.png"></p><h2 style="background-color:transparent">3.USB的架构</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB系统架构由几个核心组件构成，包括主机控制器、集线器、以及连接的设备等。USB系统可以被视为一个树状的拓扑结构，每个USB设备都连接到一个集线器（Hub），而集线器又连接到主机控制器，进而连接到主机计算机。</p><p>&nbsp;&nbsp;&nbsp;<strong>&nbsp; &nbsp; （1）主机控制器（Host Controller）：</strong>这是连接USB设备与计算机系统总线的桥梁。它负责管理USB总线和处理主机与USB设备之间的通信。在USB 2.0及之前的版本中，又分为EHCI（Enhanced Host Controller Interface）和OHCI（Open Host Controller Interface）。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;主机（尤其是主控制器）控制着所有通信并向设备发出指令。共有三种常见的 USB 主控制器：</p><p>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color:#4da8ee">1）通用主控制器接口（UHCI）：</span> 由 Intel 生产，适用于 USB 1.0 和 USB 1.1。使用 UHCI 时需要得到 Intel 的许可。该控制器支持低速模式和全速模式。<br />&nbsp; &nbsp; &nbsp; <span style="color:#4da8ee">&nbsp;2）开放主控制器接口（OHCI）：</span> 由 Compaq、 Microsoft 和 National Semiconductor 生产， 适用于 USB 1.0 和 1.1。该控制器支持低速模式和全速模式， 并且它的效率比 UHCI 更高， 因为可以执行更多硬件功能。<br />&nbsp; &nbsp; &nbsp; <span style="color:#4da8ee">&nbsp;3）扩展型主控制器接口（EHCI）：</span> 在 USB-IF 要求发布单一主控制器规范后，已经生产了该控制器，它适用于 USB2.0。 EHCI 仅支持高速传输，并且将低速和全速传输委托给 OHCI 或 UHCI 控制器执行。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&nbsp;（2）集线器（Hub）：</strong>集线器允许一台主机控制器连接多个USB设备。集线器可以是物理的，也可以是虚拟的（例如在芯片内部集成）。它提供了端口的数量和位置的灵活性。</p><p><strong>&nbsp; &nbsp; &nbsp; &nbsp;（3）USB设备（Device）：</strong>连接到USB端口的各种设备，如键盘、鼠标、打印机、存储设备等。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB设备根据其功能和通用性，可以分为不同的类别，例如大容量存储设备（Mass Storage Class）、通信设备（Communication Device Class）、音频设备（Audio Device Class）、人体学接口设备（HID - Human Interface Device Class）等等。每个类设备都遵循特定的规范，以确保与不同主机的兼容性。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB规范定义了设备必须遵守的电气、协议和机械接口的标准。USB总线提供4线连接：电源线、地线、两条数据线（D+（DP）和D-（DM））。通过这些线上的电信号和协议，USB设备能够以高效率传输数据，并且支持热插拔。</p><h2>4.USB类设备的分类与实现</h2><h3>（一）USB类设备的定义</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB类设备定义了设备的特定功能和行为，使设备能够被操作系统识别和驱动。每个USB类都有特定的类规范，这些规范定义了设备如何响应各种USB请求以及如何与主机通信。一些常见的USB类设备包括：&nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>（1）大容量存储设备（Mass Storage Class, MSC）：</strong>如USB闪存驱动器、外部硬盘驱动器等，它们允许用户存储和传输文件。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>（2）音频设备类（Audio Device Class）：</strong>包括麦克风、扬声器、耳机、声卡等音频设备。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>（3）通信设备类（Communication Device Class, CDC）：</strong>常用于调制解调器、ISDN终端适配器、虚拟COM端口等。<br />&nbsp; &nbsp; &nbsp; &nbsp;<strong>（4）人体学接口设备（Human Interface Device, HID）：</strong>包括键盘、鼠标、游戏控制器等与人机交互相关的设备。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>（5）图像设备类（Image Device Class）：</strong>数码相机、网络摄像头等图像捕捉设备。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;每个类设备通过特定的设备请求和类特定的命令集来实现它们的功能。例如，MSC设备通过SCSI透明传输（Bulk-Only Transport）协议来实现数据传输，而HID设备则通过HID类规范定义的通信接口与主机进行数据交换。</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/da01003d63ff4a78978ffdfddbab1c30.png"></p><h3>（二）STM32的USB外设实现的大致步骤</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STM32的USB外设库（如STM32 USB-FS-Device）提供了实现USB类设备所需的抽象层。开发者需要通过实现回调函数来处理USB标准请求，并实现设备特定的功能。以下是实现USB类设备的一般步骤：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1）配置USB硬件 ：</strong>使用STM32CubeMX配置USB接口，设置时钟、中断等参数，并生成初始化代码。<br />&nbsp; &nbsp; &nbsp; &nbsp;<strong>2）编写USB类驱动 ：</strong>根据设备的功能，实现相应的USB类驱动代码。例如，对于HID设备，需要实现HID相关的报告描述符和数据交换函数。<br />&nbsp; &nbsp; &nbsp; &nbsp;<strong>3） 配置USB端点 ：</strong>设置用于数据传输的端点，包括端点的大小、类型和缓冲区。<br />&nbsp; &nbsp; &nbsp; &nbsp;<strong>4）处理USB事件 ：</strong>实现回调函数来处理USB事件，如设备挂载（attach）、断开（detach）、配置变化等。<br />&nbsp; &nbsp; &nbsp;<strong>&nbsp; 5）调试和测试 ：</strong>在开发板上下载代码，进行实际设备的连接测试和调试。</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/e3bf47b1b44d44d39a747d35addfd458.png">https://i-blog.csdnimg.cn/direct/e3bf47b1b44d44d39a747d35addfd458.png</a>“ width&#x3D;”634” &#x2F;&gt;<br /><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在STM32上实现USB类设备的过程中，开发者可以参考ST提供的示例代码和开发指南。对于较为复杂的类设备，如大容量存储设备，可以利用现成的库文件和模块，进行适当的裁剪和适配，以满足特定的需求。通过这种方式，开发者可以有效减少开发时间，提升开发效率。</p></p><h2>5.USB协议栈</h2><h3><strong>（一）USB 协议栈的分层结构</strong></h3><p>USB 协议栈通常分为<strong>硬件层、物理层、链路层、事务层、协议层和应用层</strong>，每层功能如下：</p><h4>1.&nbsp;<strong>硬件层（Hardware）</strong></h4><ul><li><strong>物理接口</strong>：USB 电缆（VCC、GND、D+、D-）、连接器（A 型、B 型、Type-C 等）。</li><li><strong>控制器</strong>：主机控制器（如 xHCI）和设备控制器（如 STM32 内置 USB 模块），负责信号收发与底层协议处理。</li></ul><h4>2.&nbsp;<strong>物理层（Physical Layer）</strong></h4><ul><li><strong>信号编码</strong>：使用 NRZI（非归零反向）编码，通过电平跳变表示数据（如 USB 2.0）。</li><li><strong>差分信号传输</strong>：通过 D + 和 D - 的电压差（&plusmn;0.3V）传输数据，抗干扰能力强。</li><li><strong>速率协商</strong>：根据设备类型自动协商低速（1.5Mbps）、全速（12Mbps）、高速（480Mbps）等模式。</li></ul><h4>3.&nbsp;<strong>链路层（Link Layer）</strong></h4><ul><li><strong>分组格式</strong>：将数据封装为固定格式的分组（Packet），包含同步头、地址、数据和 CRC 校验。</li><li><strong>错误检测与重传</strong>：通过 CRC 校验确保数据完整性，错误时触发重传机制。</li><li><strong>流量控制</strong>：使用 NAK（未准备好）、STALL（暂停）等握手信号管理数据传输。</li></ul><h4>4.&nbsp;<strong>事务层（Transaction Layer）</strong></h4><ul><li><strong>事务类型</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;控制事务&lt;/strong&gt;：设备枚举、配置命令（如获取设备描述符）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;批量事务&lt;/strong&gt;：大数据量传输（如文件拷贝），无严格实时性要求。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;中断事务&lt;/strong&gt;：小数据量、周期性传输（如键盘输入）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;同步事务&lt;/strong&gt;：实时数据流（如音频、视频），允许少量错误。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;事务组成&lt;/strong&gt;：由令牌（Token）、数据（Data）和握手（Handshake）三个阶段组成。&lt;/li&gt;</code></pre></ul><h4>5.&nbsp;<strong>协议层（Protocol Layer）</strong></h4><ul><li><strong>设备类协议</strong>：定义设备功能和通信规则，如：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;&lt;strong&gt;HID（人机接口设备）&lt;/strong&gt;：键盘、鼠标等。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;MSC（海量存储设备）&lt;/strong&gt;：U 盘、移动硬盘。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;CDC（通信设备类）&lt;/strong&gt;：虚拟串口（VCP）。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Audio（音频设备）&lt;/strong&gt;：麦克风、耳机。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;设备描述符&lt;/strong&gt;：设备向主机提供的元数据（如厂商 ID、产品 ID、支持的类）。&lt;/li&gt;</code></pre></ul><h4>6.&nbsp;<strong>应用层（Application Layer）</strong></h4><ul><li><strong>用户程序</strong>：通过操作系统 API（如 Windows 的 CreateFile、Linux 的 /dev/ttyUSB*）访问 USB 设备。</li><li><strong>驱动程序</strong>：将 USB 数据转换为应用可理解的格式（如串口数据、文件流）。</li></ul><h3><strong>（二）USB 协议栈的核心组件</strong></h3><h4>1.&nbsp;<strong>设备描述符（Descriptors）</strong></h4><ul><li><strong>设备描述符</strong>：包含厂商 ID、产品 ID、设备版本等基本信息。</li><li><strong>配置描述符</strong>：定义设备的工作模式（如支持的接口数量）。</li><li><strong>接口描述符</strong>：描述功能（如 HID 接口、音频接口）。</li><li><strong>端点描述符</strong>：指定端点地址、类型（控制 / 批量 / 中断 / 同步）和最大包大小。</li></ul><h4>2.&nbsp;<strong>端点（Endpoints）</strong></h4><ul><li>数据传输的逻辑通道，每个端点有唯一地址和方向（IN/OUT）。</li><li><strong>端点 0</strong>：固定为控制端点，用于设备枚举和配置。</li></ul><h4>3.&nbsp;<strong>主机与设备的交互流程</strong></h4><ol><li><strong>设备插入</strong>：主机检测到 D + 或 D - 上拉，识别设备速率。</li><li><strong>枚举过程</strong>：主机通过端点 0 获取设备描述符，分配地址。</li><li><strong>配置设备</strong>：主机选择配置并激活接口。</li><li><strong>数据传输</strong>：根据设备类协议进行数据交换。</li></ol><h3><strong>（三）数据传输流程详解</strong></h3><h4>1.&nbsp;<strong>控制传输（以设备枚举为例）</strong></h4><pre><code class="language-cpp">主机 → 设备：[SETUP] 获取设备描述符设备 → 主机：[DATA0] 发送设备描述符（含厂商ID、产品ID等）主机 → 设备：[ACK] 确认接收主机 → 设备：[SETUP] 设置地址（如0x01）设备 → 主机：[ACK] 确认地址设置主机 → 设备：[SETUP] 获取配置描述符设备 → 主机：[DATA1] 发送配置描述符...</code></pre><h4>2.&nbsp;<strong>批量传输（如 U 盘读写）</strong></h4><pre><code class="language-cpp">主机 → 设备：[OUT令牌] 发送写命令主机 → 设备：[DATA0] 发送数据块设备 → 主机：[ACK] 确认接收主机 → 设备：[IN令牌] 请求读取数据设备 → 主机：[DATA1] 发送数据块主机 → 设备：[ACK] 确认接收</code></pre><h4>3.&nbsp;<strong>中断传输（如键盘输入）</strong></h4><pre><code class="language-cpp">主机周期性发送：[IN令牌] 请求键盘数据键盘 → 主机：[DATA0] 发送按键状态（如按下'A'键）主机 → 设备：[ACK] 确认接收</code></pre><h2>6.STM32-USB</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STM32微控制器系列由STMicroelectronics（意法半导体公司）开发，是基于ARM Cortex-M处理器的32位微控制器。它们具有高性能、低功耗以及高集成度的特点，广泛应用于工业控制、医疗设备、通信系统等领域。STM32系列微控制器支持多种通信接口，其中USB（Universal Serial Bus，通用串行总线）因其高速和易用性成为主流的通信协议之一，也被STM32集成在硬件内。</p><p><strong>USB主要特征：</strong></p><p>● 符合USB2.0全速设备的技术规范</p><p>● 可配置1到8个USB端点</p><p>● CRC(循环冗余校验)生成/校验，反向不归零(NRZI)编码/解码和位填充</p><p>● 支持同步传输</p><p>● 支持批量/同步端点的双缓冲区机制</p><p>● 支持USB挂起/恢复操作</p><p>● 帧锁定时钟脉冲生成</p><p>注： USB和CAN共用一个专用的512字节的SRAM存储器用于数据的发送和接收，因此不能同时使用USB和CAN(共享的SRAM被USB和CAN模块互斥地访问)。 USB和CAN可以同时用于一个应用中但不能在同一个时间使用。</p><h3><strong>（一）硬件架构</strong></h3><h4>1.&nbsp;<strong>物理接口</strong></h4><ul><li><strong>数据线</strong>：D+（绿色）和 D-（白色）差分信号线，传输速率 1.5Mbps（低速）或 12Mbps（全速）</li><li><strong>上拉 / 下拉电阻</strong>：<ul><li><strong>Device 模式</strong>：D + 需通过 1.5k&Omega; 上拉电阻连接 VCC（全速设备）或 D - 上拉（低速设备）</li><li><strong>Host 模式</strong>：D + 和 D - 需通过 15k&Omega; 下拉电阻接地</li></ul></li><li><strong>电源</strong>：Vbus（红色）提供 5V 电源，GND（黑色）为地</li></ul><h4>2.&nbsp;<strong>内部模块</strong></h4><ul><li><strong>USB 核心控制器</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;处理 USB 协议层（如握手、错误恢复）&lt;/li&gt;&lt;li&gt;管理端点（Endpoint）和缓冲区&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;端点缓冲区&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;通常有 8 个端点（EP0~EP7），每个端点可配置为不同方向和类型&lt;/li&gt;&lt;li&gt;端点 0 固定为控制端点，用于设备枚举&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;收发器&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;实现 TTL 电平和 USB 差分信号的转换&lt;/li&gt;&lt;li&gt;支持 NRZI 编码和解码&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;时钟源&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;需 48MHz 精确时钟（通常由 PLL 提供）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从硬件接口功能上来说STM32系列MCU的USB分为 USB_FS 、 USB_OTG_FS 、 USB_OTG_HS 三种。其中的FS指的是全速（Full Speed），HS指的是高速（High Speed）。OTG指的是既可以作为Device（从设备）使用，也可以作为Host（主机）使用。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Full Speed 理论上速度为12Mbit/s，High Speed 理论上速度为480Mbit/s ，当然这都是理论速度，实际上通讯速度还依赖于所用通讯方式和设备性能。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于STM32系列MCU而言，USB FS的使用只要使用 DM / D- 和 DP / D+ 这两个引脚就行了，最多也就加上ID、SOF、VBUS这三个引脚。而使用USB HS大多数还需要外接PHY芯片（比如USB3300），这样使用的引脚就多了，至少也要用到12个引脚。STM32系列MCU中目前只有STM32F723内置USB HS PHY功能，不需要外接PHY芯片。</p><h3><strong>（二）工作模式</strong></h3><h4>1.&nbsp;<strong>Device 模式（最常用）</strong></h4><ul><li><strong>特性</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;作为从设备连接到主机（如 PC、充电器）&lt;/li&gt;&lt;li&gt;支持多种设备类（Class）：&lt;ul&gt;&lt;li&gt;&lt;strong&gt;HID&lt;/strong&gt;（Human Interface Device）：键盘、鼠标、游戏手柄&lt;/li&gt;&lt;li&gt;&lt;strong&gt;CDC&lt;/strong&gt;（Communication Device Class）：虚拟串口&lt;/li&gt;&lt;li&gt;&lt;strong&gt;MSC&lt;/strong&gt;（Mass Storage Class）：U 盘、移动硬盘&lt;/li&gt;&lt;li&gt;&lt;strong&gt;DFU&lt;/strong&gt;（Device Firmware Upgrade）：固件升级&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;枚举流程&lt;/strong&gt;：&lt;/li&gt;</code></pre></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;主机检测连接 &rarr; 分配地址 &rarr; 获取设备描述符 &rarr; 获取配置描述符 &rarr; 设置配置 &rarr; 数据传输</p><h4>2.&nbsp;<strong>Host 模式</strong></h4><ul><li><strong>特性</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;作为主机控制外部 USB 设备&lt;/li&gt;&lt;li&gt;需提供 5V 电源（通过 Vbus 引脚）&lt;/li&gt;&lt;li&gt;支持设备热插拔检测&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;典型应用&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;读取 U 盘文件系统&lt;/li&gt;&lt;li&gt;连接 USB 键盘 / 鼠标&lt;/li&gt;&lt;li&gt;控制 USB 摄像头&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4>3.&nbsp;<strong>OTG 模式（仅部分型号支持）</strong></h4><ul><li><strong>特性</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;支持双角色（Device/Host）动态切换&lt;/li&gt;&lt;li&gt;通过 ID 引脚或软件判断当前角色&lt;/li&gt;&lt;li&gt;支持会话请求协议（SRP）和主机协商协议（HNP）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;应用场景&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;移动设备间直接通信（如手机与相机互传数据）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3><strong>（三）端点（Endpoint）机制</strong></h3><h4>1.&nbsp;<strong>端点类型</strong></h4><table><thead><tr><th>类型</th><th>特点</th><th>应用场景</th></tr></thead><tbody><tr><td><strong>控制端点</strong></td><td>双向、无缓冲、低带宽</td><td>设备枚举、配置命令</td></tr><tr><td><strong>批量端点</strong></td><td>双向、有缓冲、高带宽</td><td>文件传输、大数据通信</td></tr><tr><td><strong>中断端点</strong></td><td>单向、低延迟、周期性</td><td>键盘、鼠标等实时设备</td></tr><tr><td><strong>同步端点</strong></td><td>单向、固定带宽、无握手</td><td>音频、视频等流数据</td></tr></tbody></table><h4>2.&nbsp;<strong>端点配置</strong></h4><p>每个端点需配置：</p><ul><li>端点号（0~7）</li><li>方向（IN/OUT）</li><li>类型（控制 / 批量 / 中断 / 同步）</li><li>最大包大小（如 64 字节、512 字节）</li><li>缓冲区地址和大小</li></ul><h3><strong>（四）软件架构</strong></h3><h4>1.&nbsp;<strong>USB 协议栈</strong></h4><pre><code class="language-cpp">应用层 ──────────────────── 用户代码类驱动层 ────────────────── HID/CDC/MSC/DFU驱动USB设备层 ───────────────── 端点管理、数据传输USB核心层 ───────────────── 协议处理、中断管理硬件抽象层 ──────────────── 寄存器操作、底层驱动</code></pre><h4>2.&nbsp;<strong>STM32Cube HAL 库接口</strong></h4><pre><code class="language-cpp">// 初始化USB设备HAL_StatusTypeDef HAL_PCD_Init(PCD_HandleTypeDef *hpcd);// 注册类驱动void HAL_PCD_RegisterClass(PCD_HandleTypeDef *hpcd, PCD_ClassTypeDef *pclass);// 端点数据发送HAL_StatusTypeDef HAL_PCD_EP_Transmit(PCD_HandleTypeDef *hpcd, uint8_t ep_addr, uint8_t *pdata, uint32_t size);// 端点数据接收HAL_StatusTypeDef HAL_PCD_EP_Receive(PCD_HandleTypeDef *hpcd, uint8_t ep_addr, uint8_t *pdata, uint32_t size);</code></pre><h4>3.&nbsp;<strong>中断处理</strong></h4><p>主要中断源：</p><ul><li><strong>Reset 中断</strong>：USB 总线复位</li><li><strong>SOF 中断</strong>：帧开始信号（1ms 周期）</li><li><strong>端点中断</strong>：端点传输完成</li><li><strong>错误中断</strong>：CRC 错误、位填充错误等</li></ul><h3><strong>（五）典型应用场景</strong></h3><h4>1.&nbsp;<strong>HID 设备（以鼠标为例）</strong></h4><pre><code class="language-cpp">// HID报告描述符示例（鼠标）const uint8_t HID_Mouse_ReportDesc[USB_HID_MOUSE_REPORT_DESC_SIZE] = {  0x05, 0x01,        // USAGE_PAGE (Generic Desktop)  0x09, 0x02,        // USAGE (Mouse)  0xA1, 0x01,        // COLLECTION (Application)  0x09, 0x01,        //   USAGE (Pointer)  0xA1, 0x00,        //   COLLECTION (Physical)  0x05, 0x09,        //     USAGE_PAGE (Button)  0x19, 0x01,        //     USAGE_MINIMUM (Button 1)  0x29, 0x03,        //     USAGE_MAXIMUM (Button 3)  0x15, 0x00,        //     LOGICAL_MINIMUM (0)  0x25, 0x01,        //     LOGICAL_MAXIMUM (1)  0x95, 0x03,        //     REPORT_COUNT (3)  0x75, 0x01,        //     REPORT_SIZE (1)  0x81, 0x02,        //     INPUT (Data,Var,Abs)  0x95, 0x01,        //     REPORT_COUNT (1)  0x75, 0x05,        //     REPORT_SIZE (5)  0x81, 0x03,        //     INPUT (Cnst,Var,Abs)  0x05, 0x01,        //     USAGE_PAGE (Generic Desktop)  0x09, 0x30,        //     USAGE (X)  0x09, 0x31,        //     USAGE (Y)  0x15, 0x81,        //     LOGICAL_MINIMUM (-127)  0x25, 0x7F,        //     LOGICAL_MAXIMUM (127)  0x75, 0x08,        //     REPORT_SIZE (8)  0x95, 0x02,        //     REPORT_COUNT (2)  0x81, 0x06,        //     INPUT (Data,Var,Rel)  0xC0,              //   END_COLLECTION  0xC0               // END_COLLECTION};</code></pre><h4>2.&nbsp;<strong>CDC 虚拟串口</strong></h4><ul><li><strong>工作原理</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;通过 USB 模拟 RS232 串口通信&lt;/li&gt;&lt;li&gt;支持 AT 命令（如调制解调器）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;应用场景&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;调试信息输出&lt;/li&gt;&lt;li&gt;设备配置接口&lt;/li&gt;&lt;li&gt;数据透传&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4>3.&nbsp;<strong>MSC 海量存储</strong></h4><ul><li><strong>工作原理</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;模拟 U 盘设备&lt;/li&gt;&lt;li&gt;实现 SCSI 命令集（如 READ、WRITE）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;存储介质&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;内部 Flash&lt;/li&gt;&lt;li&gt;外部 SPI Flash&lt;/li&gt;&lt;li&gt;SD 卡&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h3><strong>（六）开发要点</strong></h3><h4>1.&nbsp;<strong>时钟配置</strong></h4><ul><li>必须提供 48MHz 精确时钟给 USB 模块</li><li>通常通过 PLL 倍频得到（如 72MHz/1.5=48MHz）</li></ul><h4>2.&nbsp;<strong>电源管理</strong></h4><ul><li>Device 模式：通过 VBUS 引脚检测主机连接</li><li>Host 模式：需通过 Vbus 引脚向外设供电</li><li>支持挂起 / 唤醒功能，降低功耗</li></ul><h4>3.&nbsp;<strong>数据传输优化</strong></h4><ul><li>大数据量传输建议使用 DMA</li><li>合理设置端点缓冲区大小和数量</li><li>遵循 USB 协议的数据包大小限制</li></ul><h3><strong>（七）参考资源</strong></h3><ol><li><strong>官方文档</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;STM32 参考手册（RM）中 &amp;quot;USB 全速设备&amp;quot; 章节&lt;/li&gt;&lt;li&gt;STM32Cube HAL 库用户手册（UM）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;固件库&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;STM32Cube FW_F1（F1 系列）&lt;/li&gt;&lt;li&gt;STM32Cube FW_F4（F4 系列）&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;应用笔记&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;AN3156：USB CDC 通信实现&lt;/li&gt;&lt;li&gt;AN3587：USB MSC 海量存储实现&lt;/li&gt;&lt;li&gt;AN4221：USB OTG 双角色应用&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过合理配置 USB 外设，STM32 可轻松实现各种 USB 功能，为嵌入式系统提供强大的通信能力。</p><h1>二、USB-CDC类虚拟串口（VCP）的例程验证</h1><h2>（一）STM32-VCP理论知识</h2><p>STM32内置的USB，均可支持USB 2.0标准，可以支持三种传输速率：</p><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;高速模式：</strong>最高可达480 Mbps &nbsp;（部分型号支持，且需搭配外部芯片，不常用，同时，需要搭配外围USB PHY芯片，如USB3300，硬件成本偏高)<br /><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全速模式：</strong>最高可达12 Mbps &nbsp; &nbsp; &nbsp;(最常用，电路简单）<br /><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;低速模式：</strong>最高可达1.5 Mbps &nbsp; &nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从机在PCB布线时，仅需把STM32的引脚PA11、PA12, &nbsp;连接至USB座的DP、DM，然后，PA12(DP线)用1.5K电阻上拉至3.3V。具体如下图：</p><p style="text-align:center"><img alt=)<p>注：</p><p><strong>为什么是上拉？</strong></p><p>插拔检测：设备未插入时，主机端DP、DM为低电平，当发现被置高，即为有设备插入；</p><p>区分速率：DM线上拉是低速模式，DP线上拉是全速\高速模式；</p><p>上拉电压：3.3V。USB通信电平是3.3V，而不是总线供电的5V。</p><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USB虚拟串口</strong>，简称VPC，Virtual Port Com 的简写。但更习惯于把虚拟串口叫作: CDC，因为它是利用 USB 的 CDC类 实现的一种通信接口。利用STM32CubeMX可以快速配置并实现该功能，但是也可以使用ST提供的关于USB的设备库源码进行手动移植操作。</p><p>提示：1）Win10、Win11 已带虚拟串口驱动；2）无需安装任何驱动;&nbsp;Win7 要提前手动安装驱动，否则无法识别 ：虚拟串口驱动 下载。</p><h2><strong>（二）使用STM32CubeMX配置生成代码</strong></h2><h3>1.&nbsp; 打开STM32CubeMX新建工程并选择芯片</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/1f4c881aac304cd7b6a8b6c9fb2fc199.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/126811a0bb82493a8e2d20efc493f1d3.png"></p><h3>2.RCC</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/50724607224d4445b03a9e9e120a9faa.png"></p><h3>3.SWD</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/818e1e21dd414953879ec7928e344e54.png"></p><h3>4.激活USB，使用默认配置</h3><p>开启GPIO-PD6拉低使能USB，由野火指南者开发板原理图可知</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/c0660053d1f747b898d7802ed22e2156.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/3e12bcfe06884632ba82192955529ec8.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/d9c95611441d46d6b401a6e25ad4ad4b.png"></p><h3>5.使用STM32CubeMX集成的中间件USB_DEVICE下的CDC类-VPC，仍然使用默认配置或者按照自己的需求更改</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/ed34d7266d114daf860a864af7d3c1bc.png"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;以下是配置参数说明：</p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/6afae5bc3b804fdaabb11db066adb40e.png"></p><pre><code class="language-cpp">以下是对这些 STM32 USB 配置参数 的详细解释，结合 USB 协议和 STM32 USB 库（如 CubeMX 生成的配置）的作用说明：1. USBD_MAX_NUM_INTERFACES参数名：Maximum number of supported interfaces（支持的最大接口数）含义：USB 设备可以包含 多个 “接口（Interface）”，每个接口对应一种功能（如 “CDC 串口功能”“HID 键盘功能” 等）。该参数定义了你开发的 USB 设备最多能支持多少个独立的接口。范围要求：1 ~ 255（由 USB 协议地址空间决定，7 位地址理论最大 127 设备，但接口数独立限制）。典型场景：若做 复合设备（Composite Device）（如同时支持 “虚拟串口 + 自定义 HID”），需根据实际功能数调整。普通单功能设备（如仅 CDC 或仅 MSC）设为 1 即可。2. USBD_MAX_NUM_CONFIGURATION参数名：Maximum number of supported configuration（支持的最大配置数）含义：USB 设备可以有 多种 “配置（Configuration）”，不同配置可切换设备的功能组合、功耗等。该参数定义设备最多支持多少套配置。绝大多数场景下，设备只需 1 套配置（简单设备用默认配置即可）。典型场景：复杂设备可能需要 “高功耗模式（多功能全开）” 和 “低功耗模式（仅基础功能）”，这时需 2 套配置切换。3. USBD_MAX_STR_DESC_SIZ参数名：Maximum size for the string descriptors（字符串描述符的最大长度）含义：USB 设备的 字符串描述符 用于向主机报告文本信息（如厂商名、产品名、序列号等）。该参数限制单个字符串描述符的最大字节数（需包含 Unicode 编码、长度、类型等 overhead）。设为 512 bytes 属于比较充裕的配置，可容纳较长的字符串（如详细产品描述）。注意：实际字符串长度受 USB 协议限制（理论单字符串最多 126 字节有效内容，因描述符头占 2 字节），但库配置可留冗余。4. USBD_SELF_POWERED参数名：Enabled self power（启用自供电模式）含义：USB 设备供电模式分两种：总线供电（Bus-Powered）：从 USB 总线取电（主机 / Hub 提供 5V），电流受限（通常 ≤500mA）。自供电（Self-Powered）：设备自身有独立电源（如外接电源、电池），向总线报告 “不依赖总线供电”。设为 Enabled 表示设备是 自供电设备，主机需调整对设备的电流限制策略。典型场景：若设备外接电源（如带电源适配器的仪器），选 Self-Powered；若仅靠 USB 线供电，选 Bus-Powered。5. USBD_DEBUG_LEVEL参数名：USBD Debug Level（USB 设备库调试级别）含义：控制 STM32 USB 设备库是否输出 调试日志，方便开发时排查问题。选项：0: No debug message：关闭调试日志（发布版常用，避免日志占用资源）。1: Error：仅输出错误日志。2: Warning：输出错误 + 警告。3: Info：输出详细信息（开发阶段排障常用）。使用建议：开发时可临时设为 3 看详细流程，发布前改回 0 减少开销。6. USB CDC Rx Buffer Size参数名：USB CDC Rx Buffer Size（USB CDC 接收缓冲区大小）含义：当设备工作在 CDC（虚拟串口）类 时，该参数定义：设备端接收主机数据的缓冲区大小（即从 USB 总线收数据，暂存到 RAM 的缓冲区）。设为 1024 Bytes 表示最多一次暂存 1KB 数据，避免因主机发数据过快导致溢出。注意：若需传输大文件 / 高频数据，可适当增大；但会占用更多 RAM，需平衡。7. USB CDC Tx Buffer Size参数名：USB CDC Tx Buffer Size（USB CDC 发送缓冲区大小）含义：当设备工作在 CDC（虚拟串口）类 时，该参数定义：设备端向主机发送数据的缓冲区大小（即从用户代码取数据，暂存到 RAM 等待 USB 发送的缓冲区）。设为 1024 Bytes 表示最多一次缓存 1KB 数据，避免因 USB 发送慢导致用户数据堆积。典型场景：若设备需高频发数据（如传感器实时流），可增大缓冲区；但同样要权衡 RAM 占用。</code></pre><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/526db248530946c9bf28fabc32f677db.png"></p><pre><code class="language-cpp">1. Device Descriptor（设备描述符）VID (Vendor Identifier)含义：厂商识别码，由 USB-IF（USB Implementers Forum）分配，全球唯一 ，用于区分不同厂商。这里 1155 是 STMicroelectronics（意法半导体）的 VID ，主机通过它识别 “这是 ST 的设备”。LANGID_STRING (Language Identifier)含义：语言标识符，定义设备字符串描述符（厂商名、产品名等）使用的语言。这里 English(United States) 表示字符串是 “美式英语”，主机据此解析文本编码。2. Device Descriptor FS（全速设备描述符，FS=Full Speed）USB 设备可支持多种速度（如全速 12Mbps、高速 480Mbps ），Device Descriptor FS 是全速模式下的设备子描述符，补充更多细节：PID (Product Identifier)含义：产品识别码，由厂商自定义（需在 USB-IF 备案），用于区分同一厂商的不同产品。这里 22336 是 STM32 虚拟串口（Virtual ComPort）的 PID ，主机通过 VID=1155 + PID=22336 识别 “这是 STM32 的虚拟串口设备”。PRODUCT_STRING (Product Identifier)含义：产品名字符串，给用户 / 系统显示的设备名称（如在设备管理器里看到的名字 ）。这里 STM32 Virtual ComPort 表示 “这是 STM32 的虚拟串口设备”。CONFIGURATION_STRING (Configuration Identifier)含义：配置名字符串，描述设备当前配置的功能（一个设备可有多套配置，切换功能 / 功耗 ）。这里 CDC Config 表示当前配置是 “CDC（虚拟串口）功能配置”。INTERFACE_STRING (Interface Identifier)含义：接口名字符串，描述设备的接口功能（一个配置可包含多个接口，每个接口对应一类功能 ）。这里 CDC Interface 表示该接口是 “CDC 类接口”（实现虚拟串口通信）。</code></pre><h3>6.配置时钟树</h3><h3 style="text-align:center"><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/044ef261baef485b8152f6aaf3551083.png" /></h3><h3>7.工程配置</h3><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/9673004fb14c4fed99e7713b35971d26.png"></p><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/30432a0009c047b39c97af250373ccad.png"></p><h2>（三）代码编写</h2><p>main.c</p><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "usb_device.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "usbd_cdc_if.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  MX_GPIO_Init();  MX_USB_DEVICE_Init();  /* USER CODE BEGIN 2 */uint8_t TX[] = "abc\r\n";  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */  HAL_Delay(2000);  CDC_Transmit_FS(TX, 5);  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL6;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_1) != HAL_OK)  {    Error_Handler();  }  PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_USB;  PeriphClkInit.UsbClockSelection = RCC_USBCLKSOURCE_PLL;  if (HAL_RCCEx_PeriphCLKConfig(&amp;PeriphClkInit) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *//* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><p>&nbsp;usbd_cdc_if.c</p><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : usbd_cdc_if.c  * @version        : v2.0_Cube  * @brief          : Usb device for Virtual Com Port.  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "usbd_cdc_if.h"/* USER CODE BEGIN INCLUDE *//* USER CODE END INCLUDE *//* Private typedef -----------------------------------------------------------*//* Private define ------------------------------------------------------------*//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PV *//* Private variables ---------------------------------------------------------*//* USER CODE END PV *//** @addtogroup STM32_USB_OTG_DEVICE_LIBRARY  * @brief Usb device library.  * @{  *//** @addtogroup USBD_CDC_IF  * @{  *//** @defgroup USBD_CDC_IF_Private_TypesDefinitions USBD_CDC_IF_Private_TypesDefinitions  * @brief Private types.  * @{  *//* USER CODE BEGIN PRIVATE_TYPES *//* USER CODE END PRIVATE_TYPES *//**  * @}  *//** @defgroup USBD_CDC_IF_Private_Defines USBD_CDC_IF_Private_Defines  * @brief Private defines.  * @{  *//* USER CODE BEGIN PRIVATE_DEFINES *//* USER CODE END PRIVATE_DEFINES *//**  * @}  *//** @defgroup USBD_CDC_IF_Private_Macros USBD_CDC_IF_Private_Macros  * @brief Private macros.  * @{  *//* USER CODE BEGIN PRIVATE_MACRO *//* USER CODE END PRIVATE_MACRO *//**  * @}  *//** @defgroup USBD_CDC_IF_Private_Variables USBD_CDC_IF_Private_Variables  * @brief Private variables.  * @{  *//* Create buffer for reception and transmission           *//* It's up to user to redefine and/or remove those define *//** Received data over USB are stored in this buffer      */uint8_t UserRxBufferFS[APP_RX_DATA_SIZE];/** Data to send over USB CDC are stored in this buffer   */uint8_t UserTxBufferFS[APP_TX_DATA_SIZE];/* USER CODE BEGIN PRIVATE_VARIABLES *//* USER CODE END PRIVATE_VARIABLES *//**  * @}  *//** @defgroup USBD_CDC_IF_Exported_Variables USBD_CDC_IF_Exported_Variables  * @brief Public variables.  * @{  */extern USBD_HandleTypeDef hUsbDeviceFS;/* USER CODE BEGIN EXPORTED_VARIABLES *//* USER CODE END EXPORTED_VARIABLES *//**  * @}  *//** @defgroup USBD_CDC_IF_Private_FunctionPrototypes USBD_CDC_IF_Private_FunctionPrototypes  * @brief Private functions declaration.  * @{  */static int8_t CDC_Init_FS(void);static int8_t CDC_DeInit_FS(void);static int8_t CDC_Control_FS(uint8_t cmd, uint8_t* pbuf, uint16_t length);static int8_t CDC_Receive_FS(uint8_t* pbuf, uint32_t *Len);/* USER CODE BEGIN PRIVATE_FUNCTIONS_DECLARATION *//* USER CODE END PRIVATE_FUNCTIONS_DECLARATION *//**  * @}  */USBD_CDC_ItfTypeDef USBD_Interface_fops_FS ={  CDC_Init_FS,  CDC_DeInit_FS,  CDC_Control_FS,  CDC_Receive_FS};/* Private functions ---------------------------------------------------------*//**  * @brief  Initializes the CDC media low layer over the FS USB IP  * @retval USBD_OK if all operations are OK else USBD_FAIL  */static int8_t CDC_Init_FS(void){  /* USER CODE BEGIN 3 */  /* Set Application Buffers */  USBD_CDC_SetTxBuffer(&amp;hUsbDeviceFS, UserTxBufferFS, 0);  USBD_CDC_SetRxBuffer(&amp;hUsbDeviceFS, UserRxBufferFS);  return (USBD_OK);  /* USER CODE END 3 */}/**  * @brief  DeInitializes the CDC media low layer  * @retval USBD_OK if all operations are OK else USBD_FAIL  */static int8_t CDC_DeInit_FS(void){  /* USER CODE BEGIN 4 */  return (USBD_OK);  /* USER CODE END 4 */}/**  * @brief  Manage the CDC class requests  * @param  cmd: Command code  * @param  pbuf: Buffer containing command data (request parameters)  * @param  length: Number of data to be sent (in bytes)  * @retval Result of the operation: USBD_OK if all operations are OK else USBD_FAIL  */static int8_t CDC_Control_FS(uint8_t cmd, uint8_t* pbuf, uint16_t length){  /* USER CODE BEGIN 5 */  switch(cmd)  {    case CDC_SEND_ENCAPSULATED_COMMAND:    break;    case CDC_GET_ENCAPSULATED_RESPONSE:    break;    case CDC_SET_COMM_FEATURE:    break;    case CDC_GET_COMM_FEATURE:    break;    case CDC_CLEAR_COMM_FEATURE:    break;  /*******************************************************************************/  /* Line Coding Structure                                                       */  /*-----------------------------------------------------------------------------*/  /* Offset | Field       | Size | Value  | Description                          */  /* 0      | dwDTERate   |   4  | Number |Data terminal rate, in bits per second*/  /* 4      | bCharFormat |   1  | Number | Stop bits                            */  /*                                        0 - 1 Stop bit                       */  /*                                        1 - 1.5 Stop bits                    */  /*                                        2 - 2 Stop bits                      */  /* 5      | bParityType |  1   | Number | Parity                               */  /*                                        0 - None                             */  /*                                        1 - Odd                              */  /*                                        2 - Even                             */  /*                                        3 - Mark                             */  /*                                        4 - Space                            */  /* 6      | bDataBits  |   1   | Number Data bits (5, 6, 7, 8 or 16).          */  /*******************************************************************************/    case CDC_SET_LINE_CODING:    break;    case CDC_GET_LINE_CODING:    break;    case CDC_SET_CONTROL_LINE_STATE:    break;    case CDC_SEND_BREAK:    break;  default:    break;  }  return (USBD_OK);  /* USER CODE END 5 */}/**  * @brief  Data received over USB OUT endpoint are sent over CDC interface  *         through this function.  *  *         @note  *         This function will issue a NAK packet on any OUT packet received on  *         USB endpoint until exiting this function. If you exit this function  *         before transfer is complete on CDC interface (ie. using DMA controller)  *         it will result in receiving more data while previous ones are still  *         not sent.  *  * @param  Buf: Buffer of data to be received  * @param  Len: Number of data received (in bytes)  * @retval Result of the operation: USBD_OK if all operations are OK else USBD_FAIL  */static int8_t CDC_Receive_FS(uint8_t* Buf, uint32_t *Len){  /* USER CODE BEGIN 6 */CDC_Transmit_FS(Buf, *Len);  USBD_CDC_SetRxBuffer(&amp;hUsbDeviceFS, &amp;Buf[0]);  USBD_CDC_ReceivePacket(&amp;hUsbDeviceFS);  return (USBD_OK);  /* USER CODE END 6 */}/**  * @brief  CDC_Transmit_FS  *         Data to send over USB IN endpoint are sent over CDC interface  *         through this function.  *         @note  *  *  * @param  Buf: Buffer of data to be sent  * @param  Len: Number of data to be sent (in bytes)  * @retval USBD_OK if all operations are OK else USBD_FAIL or USBD_BUSY  */uint8_t CDC_Transmit_FS(uint8_t* Buf, uint16_t Len){  uint8_t result = USBD_OK;  /* USER CODE BEGIN 7 */  USBD_CDC_HandleTypeDef *hcdc = (USBD_CDC_HandleTypeDef*)hUsbDeviceFS.pClassData;  if (hcdc-&gt;TxState != 0){    return USBD_BUSY;  }  USBD_CDC_SetTxBuffer(&amp;hUsbDeviceFS, Buf, Len);  result = USBD_CDC_TransmitPacket(&amp;hUsbDeviceFS);  /* USER CODE END 7 */  return result;}/* USER CODE BEGIN PRIVATE_FUNCTIONS_IMPLEMENTATION *//* USER CODE END PRIVATE_FUNCTIONS_IMPLEMENTATION *//**  * @}  *//**  * @}  */</code></pre><h2>（四）实验效果</h2><p><img src="/2025/07/07/%E3%80%90STM32%E3%80%91%E3%80%90USB%E3%80%91USB%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8ECubeMX%20HAL%E5%BA%93%E7%9A%84%E4%BE%8B%E7%A8%8B%E9%AA%8C%E8%AF%81/bd7965d2a396456ca014cdffa41633a5.png"></p><p><br /><strong>参考链接：<br />&nbsp; &nbsp; &nbsp; &nbsp;</strong><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="STM32 USB通信知识与应用详解" href="https://blog.csdn.net/weixin_49735366/article/details/144367871?sharetype=blog&amp;shareId=144367871&amp;sharerefer=APP&amp;sharesource=qq_73648789&amp;sharefrom=qq" title="STM32 USB通信知识与应用详解">STM32 USB通信知识与应用详解</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="STM32 USB功能深入解析及应用指南" href="https://blog.csdn.net/weixin_33173126/article/details/148062131?sharetype=blog&amp;shareId=148062131&amp;sharerefer=APP&amp;sharesource=qq_73648789&amp;sharefrom=qq" title="STM32 USB功能深入解析及应用指南">STM32 USB功能深入解析及应用指南</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="基于STM32讲USB" href="https://blog.csdn.net/yu7i7i/article/details/127515361?sharetype=blog&amp;shareId=127515361&amp;sharerefer=APP&amp;sharesource=qq_73648789&amp;sharefrom=qq" title="基于STM32讲USB">基于STM32讲USB</a>&nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title=" 【正点原子STM32连载】 第六十一章 USB虚拟串口实验摘自【正点原子】STM32F103 战舰开发指南V1.2" href="https://blog.csdn.net/weixin_55796564/article/details/131786543" title=" 【正点原子STM32连载】 第六十一章 USB虚拟串口实验摘自【正点原子】STM32F103 战舰开发指南V1.2">&nbsp;【正点原子STM32连载】 第六十一章 USB虚拟串口实验摘自【正点原子】STM32F103 战舰开发指南V1.2</a></p><p>&nbsp; &nbsp; &nbsp; <a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title=" 【STM32H7】第8章 学习USB协议栈前要了解的基础知识" href="https://blog.csdn.net/Simon223/article/details/114029947" title=" 【STM32H7】第8章 学习USB协议栈前要了解的基础知识">&nbsp;【STM32H7】第8章 学习USB协议栈前要了解的基础知识</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="STM32 USB开发全面指南：从基础到应用" href="https://blog.csdn.net/weixin_42589700/article/details/148457922?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-5-148457922-blog-114029947.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-5-148457922-blog-114029947.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=9" title="STM32 USB开发全面指南：从基础到应用">STM32 USB开发全面指南：从基础到应用</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="STM32的USB接口介绍" href="https://blog.csdn.net/qq_38072731/article/details/140986805?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-140986805-blog-146330266.235^v43^pc_blog_bottom_relevance_base8&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=3" title="STM32的USB接口介绍">STM32的USB接口介绍</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="stm32学习记录-通讯接口-USB" href="https://blog.csdn.net/m0_60111912/article/details/143629143?spm=1001.2101.3001.6650.18&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-18-143629143-blog-140986805.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-18-143629143-blog-140986805.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=24" title="stm32学习记录-通讯接口-USB">stm32学习记录-通讯接口-USB</a><br />&nbsp; &nbsp; &nbsp; <a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title=" 硬汉嵌入式" href="https://www.armbbs.cn/forum.php?mod=viewthread&amp;tid=99710" title=" 硬汉嵌入式">&nbsp;硬汉嵌入式</a><br />&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="博客园-野火指南者USB" href="https://www.cnblogs.com/couvrir/p/17461078.html" title="博客园-野火指南者USB">博客园-野火指南者USB</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 USB 嵌入式 单片机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】CAN通讯的学习笔记以及项目实战</title>
    <link href="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    <url>/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="%E4%B8%80%E3%80%81CAN%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D" name="%E4%B8%80%E3%80%81CAN%E9%80%9A%E8%AE%AF%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D">一、CAN通讯方式介绍</h1><h2 id="1.CAN%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B" name="1.CAN%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B">1.CAN协议简介</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN是控制器局域网络(Controller Area Network)的简称，它是由研发和生产汽车电子产品著称的<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="德国BOSCH公司" href="http://baike.baidu.com/view/3762.htm" title="德国BOSCH公司">德国BOSCH公司</a>开发的，并最终成为国际标准（ISO11519），是国际上应用最广泛的现场总线之一。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN总线协议已经成为<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="汽车计算机控制系统" href="http://baike.baidu.com/view/1783239.htm" title="汽车计算机控制系统">汽车计算机控制系统</a>和嵌入式工业控制局域网的标准总线，并且拥有以CAN为底层协议专为大型货车和重工机械车辆设计的J1939协议。近年来， 它具有的高可靠性和良好的错误检测能力受到重视，被广泛应用于汽车计算机控制系统和环境温度恶劣、电磁辐射强及振动大的工业环境。</p><p><strong>CAN总线特点</strong></p><ol><li><strong>实时性：</strong>&nbsp;CAN总线具有优越的实时性能，适用于需要及时传输数据的应用，如汽车控制系统、工业自动化等。仲裁机制和帧优先级的设计保证了低延迟和可预测性。</li><li><strong>多主机系统：</strong>&nbsp;CAN支持多主机系统，多个节点可以同时发送和接收数据。这种分布式控制结构使得系统更加灵活，适用于复杂的嵌入式网络。CAN总线上的节点既可以发送数据又可以接收数据，没有主从之分。但是在同一个时刻，只能由一个节点发送数据，其他节点只能接收数据。</li><li><strong>差分信号传输：</strong>&nbsp;CAN使用差分信号传输，通过两个线路（CAN_H和CAN_L）之间的电压差来传递信息。这种差分传输方式提供了良好的抗干扰性能，使得CAN总线适用于工业环境等有电磁干扰的场合。</li><li><strong>仲裁机制：</strong>&nbsp;CAN总线采用非破坏性仲裁机制，通过比较消息标识符的优先级来决定哪个节点有权继续发送数据。这种机制确保了总线上数据传输的有序性，避免了冲突。</li><li><strong>广播通信：</strong>&nbsp;CAN总线采用广播通信方式，即发送的数据帧可以被总线上的所有节点接收。这种特性有助于信息的共享和同步，同时减少了系统的复杂性。</li><li><strong>低成本：</strong>&nbsp;CAN总线的硬件成本相对较低，适用于大规模的系统集成。由于CAN控制器在硬件上实现了仲裁机制，无需额外的主机处理器，减小了成本和复杂性。</li><li><strong>灵活性：</strong>&nbsp;CAN协议灵活适应不同的应用场景，支持不同的波特率和通信速率。这使得CAN总线可以被广泛用于各种嵌入式系统，从低速的传感器网络到高速的汽车控制系统。</li><li><strong>错误检测和处理：</strong>&nbsp;CAN总线具有强大的错误检测和处理机制。通过CRC检查和其他错误检测手段，CAN能够识别和处理传输过程中可能发生的错误，提高了通信的可靠性。</li><li><strong>多种帧类型：</strong>CAN总线上的节点没有地址的概念。CAN总线上的数据是以帧为单位传输的，帧又分为数据帧、遥控帧等多种帧类型，帧包含需要传输的数据或控制信息。</li><li><strong>线与逻辑：</strong>CAN总线具有&ldquo;线与&rdquo;的特性，也就是当由两个节点同时向总线发送信号时，一个是发送显性电平（逻辑0），另一个发送隐性电平（逻辑1），则总线呈现为显性电平。这个特性被用于总线总裁，也就是哪个节点优先占用总线进行发送操作。</li><li><strong>特定标识符</strong>：每一个帧有一个标识符（Identifier，一下简称ID）。ID不是地址，它表示传输数据的类型，也可以用于总线仲裁时确定优先级。例如，在汽车的CAN总线上，假设用于碰撞检测的节点输出数据帧ID为01，车内温度检测节点发送数据帧的ID为05等。</li><li><strong>滤波特性：</strong>每个CAN节点都接收数据，但是可以对接收的帧根据ID进行过滤。只有节点需要的数据才会被接收并进一步处理，不需要的数据会被自动舍弃。例如，假设安全气囊控制器只接受碰撞检测节点发出的ID为01的帧，这种ID的过滤时有硬件完成的，以便安全气囊控制器在发送碰撞时能及时响应。</li><li><strong>半双工：</strong>CAN总线通信时半双工的，即总线不能同时发送和接收。在多个节点竞争总线进行发送时，通过ID的优先级进行仲裁，竞争胜出的节点继续发送，竞争失败的节点立刻转入接收状态。</li><li><strong>无时钟信号：</strong>CAN总线没有用于同步的时钟信号，所以需要规定CAN总线通信的波特率，所以节点都是用同样的波特率进行通信。</li></ol><h2 id="2.CAN-%E7%89%A9%E7%90%86%E5%B1%82" name="2.CAN-%E7%89%A9%E7%90%86%E5%B1%82">2.CAN-物理层</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN通讯是异步通讯，只有CAN_High和CAN_Low两条信号线，共同构成一组差分信号线，以差分信号的形式进行通讯。</p><h3 id="%EF%BC%881%EF%BC%89%C2%A0%E9%97%AD%E7%8E%AF%E6%80%BB%E7%BA%BF%E7%BD%91%E7%BB%9C" name="%EF%BC%881%EF%BC%89%C2%A0%E9%97%AD%E7%8E%AF%E6%80%BB%E7%BA%BF%E7%BD%91%E7%BB%9C"><strong>（一）&nbsp;闭环总线网络</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN物理层的形式主要有两种，图&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="CAN闭环总线通讯网络" href="https://doc.embedfire.com/mcu/stm32/f103badao/std/zh/latest/book/CAN.html#id4" title="CAN闭环总线通讯网络">CAN闭环总线通讯网络</a>&nbsp;中的CAN通讯网络是一种遵循ISO11898标准的高速、 短距离&ldquo;闭环网络&rdquo;，它的总线最大长度为40m，通信速度最高为1Mbps，总线的两端各要求有一个&ldquo;120欧&rdquo;的电阻。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/f5b614ce1d2348e3806fb720ee3f558d.png"></p><h3 id="%EF%BC%882%EF%BC%89%E5%BC%80%E7%8E%AF%E6%80%BB%E7%BA%BF%E7%BD%91%E7%BB%9C" name="%EF%BC%882%EF%BC%89%E5%BC%80%E7%8E%AF%E6%80%BB%E7%BA%BF%E7%BD%91%E7%BB%9C"><strong>（二）开环总线网络</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;图中的是遵循ISO11519-2标准的低速、远距离&ldquo;开环网络&rdquo;，它的最大传输距离为1km， 最高通讯速率为125kbps，两根总线是独立的、不形成闭环，要求每根总线上各串联有一个&ldquo;2.2千欧&rdquo;的电阻。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/8ec30e9f7f5e400e9e77ada71f40d548.png"></p><h3 id="%EF%BC%883%EF%BC%89%E5%B7%AE%E5%88%86%E4%BF%A1%E5%8F%B7" name="%EF%BC%883%EF%BC%89%E5%B7%AE%E5%88%86%E4%BF%A1%E5%8F%B7"><strong>（三）差分信号</strong></h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;差分信号又称差模信号，与传统使用单根信号线电压表示逻辑的方式有区别，使用差分信号传输时，需要两根信号线，这两个信号线的振幅相等， 相位相反，通过两根信号线的电压差值来表示逻辑0和逻辑1。见下图，它使用了V+与V-信号的差值表达出了图下方的信号。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/e6adec8a0b7b450c90308e09ee261314.png"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;这样子来使用两个引脚来传输一路信号，利用这两个引脚间的电压差的正负极和大小来决定传输数据的数值（0和1），周期一模一样，振幅相等，相位相差180度，极性完全相反。由于差分信号是两个信号的差值，当两跟信号受到相同的干扰时（如环境温度变化、电磁干扰），两个信号受到的扰动程度一样，这样的扰动信号称为共模信号，相减的时候就会将这个共模信号给减掉，以此来抵消扰动，大大提升了信号传输的准确性。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;相对于单信号线传输方式，差分信号传输凭借其独特的电气特性，在抗干扰能力、信号完整性和传输性能等方面展现出显著优势。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/67ae848f4dde4efaa90adaa377d64842.png"></p><h3 id="%EF%BC%884%EF%BC%89%E5%9F%BA%E4%BA%8ECAN%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%AE%E5%88%86%E4%BF%A1%E5%8F%B7" name="%EF%BC%884%EF%BC%89%E5%9F%BA%E4%BA%8ECAN%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%AE%E5%88%86%E4%BF%A1%E5%8F%B7">（四）基于CAN协议的差分信号</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN协议中对它使用的CAN_High及CAN_Low表示的差分信号做了规定，见表CAN协议标准表示的信号逻辑及图CAN的差分信号高速。 以高速CAN协议为例，当表示逻辑1时(隐性电平)，CAN_High和CAN_Low线上的电压均为2.5v， 即它们的电压差VH-VL=0V；而表示逻辑0时(显性电平)， CAN_High的电平为3.5V，CAN_Low线的电平为1.5V， 即它们的电压差为VH-VL=2V。例如，当CAN收发器从CAN_Tx线接收到来自CAN控制器的低电平信号时(逻辑0)， 它会使CAN_High输出3.5V，同时CAN_Low输出1.5V，从而输出显性电平表示逻辑0。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/a1a134f36dfe4783bc25b4ddc15813f9.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/1ea2e6384aad4b3c88c0aea4215a5800.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在CAN总线中，必须使它处于隐性电平(逻辑1)或显性电平(逻辑0)中的其中一个状态。假如有两个CAN通讯节点，在同一时间，一个输出隐性电平， 另一个输出显性电平，类似I2C总线的&ldquo;线与&rdquo;特性将使它处于显性电平状态，显性电平的名字就是这样来的，即可以认为显性具有优先的意味。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于CAN总线协议的物理层只有1对差分线，在一个时刻只能表示一个信号，所以对通讯节点来说，CAN通讯是半双工的，收发数据需要分时进行。 在CAN的通讯网络中，因为共用总线，在整个网络中同一时刻只能有一个通讯节点发送信号，其余的节点在该时刻都只能接收。</p><h3>（五）电平标准</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN总线采用差分信号，即两线电压差（VCAN_H-VCAN_L）传输数据位。</p><p><strong>高速CAN规定： &nbsp;</strong>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）电压差为0V时表示逻辑1（隐性电平） &nbsp;&nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）电压差为2V时表示逻辑0（显性电平）</p><p><strong>低速CAN规定：</strong> &nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）电压差为-1.5V时表示逻辑1（隐性电平） &nbsp;&nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）电压差为3V时表示逻辑0（显性电平）</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/971e52d93b0f4b6d9cc306ac6323c471.png"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;如何记住逻辑1与隐性电平，逻辑0与显性电平相对应？可联想到I2C默认状态下是处于上拉电阻拉高电平的状态，即该默认状态下的高电平（逻辑1）就是隐性电平，所以低电平（逻辑0）就是显性电平</p><h3 id="%EF%BC%885%EF%BC%89%E9%80%9A%E4%BF%A1%E8%8A%82%E7%82%B9" name="%EF%BC%885%EF%BC%89%E9%80%9A%E4%BF%A1%E8%8A%82%E7%82%B9">（六）通信节点</h3><p>&nbsp; &nbsp; &nbsp; &nbsp;从CAN通讯网络图可了解到，CAN总线上可以挂载多个通讯节点，节点之间的信号经过总线传输，实现节点间通讯。由于CAN通讯协议不对节点进行地址编码， 而是对数据内容进行编码的，所以网络中的节点个数理论上不受限制，只要总线的负载足够即可，可以通过中继器增强负载。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN通讯节点由一个CAN控制器及CAN收发器组成，控制器与收发器之间通过CAN_Tx及CAN_Rx信号线相连，收发器与CAN总线之间使用CAN_High及CAN_Low信号线相连。 其中CAN_Tx及CAN_Rx使用普通的类似TTL逻辑信号，而CAN_High及CAN_Low是一对差分信号线，使用比较特别的差分信号。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当CAN节点需要发送数据时，控制器把要发送的二进制编码通过CAN_Tx线发送到收发器，然后由收发器把这个普通的逻辑电平信号（类似TTL）转化成差分信号， 通过差分线CAN_High和CAN_Low线输出到CAN总线网络。而通过收发器接收总线上的数据到控制器时，则是相反的过程， 收发器把总线上收到的CAN_High及CAN_Low信号转化成普通的逻辑电平信号，通过CAN_Rx输出到控制器（MCU）中。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例如，STM32的CAN片上外设就是通讯节点中的控制器，为了构成完整的节点，还要给它外接一个收发器。其实就是类比于RS485，STM32 具有USART片上外设作为串口控制器，再搭配RS485收发器（与STM32 之间串口连接）使用，收发器与外部设备（除控制器外）转差分电平通过差分信号和基于此基础上的特定协议格式通讯。</p><p><strong>CAN收发器实物图：</strong></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/f549acbba061449fbbfa0d66794293b8.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/b95ab39aaafa486d907fb5ef4149ebf4.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/de028a886f7c4bfc96a44ee7c454a79a.png"></p><h2 id="3.CAN-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82" name="3.CAN-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3.CAN-数据链路层</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据链路层分为&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="MAC 子层" href="https://zhida.zhihu.com/search?content_id=238720860&amp;content_type=Article&amp;match_order=1&amp;q=MAC+%E5%AD%90%E5%B1%82&amp;zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTE2MjI2MDgsInEiOiJNQUMg5a2Q5bGCIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjM4NzIwODYwLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.P-WtcA8SKxe89REaDrIJ2KIeZ7DW4jEorPbCQDdydhE&amp;zhida_source=entity" title="MAC 子层">MAC 子层</a>和&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="LLC 子层" href="https://zhida.zhihu.com/search?content_id=238720860&amp;content_type=Article&amp;match_order=1&amp;q=LLC+%E5%AD%90%E5%B1%82&amp;zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTE2MjI2MDgsInEiOiJMTEMg5a2Q5bGCIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjM4NzIwODYwLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.p45HM2x1rWKqn7c-PxmxBLJlCkVCz66hUFb0Cdcanxw&amp;zhida_source=entity" title="LLC 子层">LLC 子层</a>，MAC 子层是 CAN 协议的核心部分。数据链路层的功能是将物理层收到的信号组织成有意义的消息，并提供传送错误控制等传输控制的流程。具体地说，就是消息的帧化、仲裁、应答、错误的检测或报告。数据链路层的功能通常在 CAN 控制器的硬件中执行。 在物理层定义了信号实际的发送方式、位时序、位的编码方式及同步的步骤。但具体地说，信号电平、通信速度、采样点、驱动器和总线的电气特性、连接器的形态等均未定义。这些必须由用户根据系统需求自行确定。</p><h3 id="%EF%BC%88%E4%B8%80%EF%BC%89%E5%AA%92%E4%BD%93%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%AD%90%E5%B1%82%EF%BC%88MAC%EF%BC%89" name="%EF%BC%88%E4%B8%80%EF%BC%89%E5%AA%92%E4%BD%93%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%AD%90%E5%B1%82%EF%BC%88MAC%EF%BC%89">（一）媒体访问控制子层（MAC）</h3><h4 id="1.%C2%A0%E6%80%BB%E7%BA%BF%E4%BB%B2%E8%A3%81%E6%9C%BA%E5%88%B6%EF%BC%9A%E9%9D%9E%E7%A0%B4%E5%9D%8F%E6%80%A7%E9%80%90%E4%BD%8D%E4%BB%B2%E8%A3%81" name="1.%C2%A0%E6%80%BB%E7%BA%BF%E4%BB%B2%E8%A3%81%E6%9C%BA%E5%88%B6%EF%BC%9A%E9%9D%9E%E7%A0%B4%E5%9D%8F%E6%80%A7%E9%80%90%E4%BD%8D%E4%BB%B2%E8%A3%81">（1）&nbsp;<strong>总线仲裁机制：非破坏性逐位仲裁</strong></h4><ul><li><strong>原理</strong>：CAN 总线采用 &ldquo;线与&rdquo; 逻辑（显性电平 0，隐性电平 1），多个节点同时发送时，发送显性位的节点优先占用总线，发送隐性位的节点自动退避，避免总线冲突。</li><li><strong>仲裁示例</strong>：<br />节点 A 发送 ID 为 0x123 的帧，节点 B 发送 ID 为 0x122 的帧，两者前 7 位相同，第 8 位 A 为隐性（1），B 为显性（0），则 B 的帧优先传输，A 自动停止发送并等待总线空闲。</li><li><strong>优势</strong>：仲裁过程不浪费总线带宽，优先级高的消息（ID 值越小，优先级越高）实时性更强。</li></ul><h4 id="2.%C2%A0%E5%B8%A7%E7%BB%93%E6%9E%84%EF%BC%9A5%20%E7%A7%8D%E5%B8%A7%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%A0%BC%E5%BC%8F" name="2.%C2%A0%E5%B8%A7%E7%BB%93%E6%9E%84%EF%BC%9A5%20%E7%A7%8D%E5%B8%A7%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%A0%BC%E5%BC%8F">（2）<strong>帧结构：5 种帧类型及格式</strong></h4><table><thead><tr><th style="width:69px">帧类型</th><th style="width:207px">用途</th><th style="width:413px">帧结构（以标准帧为例）</th></tr></thead><tbody><tr><td style="width:69px">数据帧</td><td style="width:207px">传输用户数据</td><td style="width:413px">帧起始 (SOF)&rarr;仲裁段 (ID+RTR)&rarr;控制段&rarr;数据段&rarr;CRC&rarr;ACK&rarr;帧结束</td></tr><tr><td style="width:69px">远程帧</td><td style="width:207px">请求其他节点发送数据</td><td style="width:413px">无数据段，RTR 位为 1（隐性），用于主机轮询从机</td></tr><tr><td style="width:69px">错误帧</td><td style="width:207px">检测到错误时发送报警</td><td style="width:413px">错误标志（6 个显性位）+ 错误界定符（8 个隐性位）</td></tr><tr><td style="width:69px">过载帧</td><td style="width:207px">节点处理能力不足时请求延迟</td><td style="width:413px">过载标志（6 个显性位）+ 过载界定符（8 个隐性位）</td></tr><tr><td style="width:69px">帧间隔</td><td style="width:207px">分隔连续帧</td><td style="width:413px">3 个隐性位，用于恢复总线空闲状态</td></tr></tbody></table><h4 id="3.%C2%A0%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%81%A2%E5%A4%8D%E6%9C%BA%E5%88%B6" name="3.%C2%A0%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%81%A2%E5%A4%8D%E6%9C%BA%E5%88%B6">（3）<strong>错误检测与恢复机制</strong></h4><ul><li><strong>5 种错误检测方式</strong>：<pre><code class="hljs">&lt;ul&gt;&lt;li&gt;位错误：发送位与总线读取位不一致时检测；&lt;/li&gt;&lt;li&gt;填充错误：非数据段中出现 5 个连续同电平位时（CAN 采用位填充避免长连 0/1）；&lt;/li&gt;&lt;li&gt;CRC 错误：接收端计算 CRC 与帧中 CRC 字段不匹配；&lt;/li&gt;&lt;li&gt;格式错误：帧结构中的固定位（如 ACK 界定符）不符合规范；&lt;/li&gt;&lt;li&gt;应答错误：发送帧后未收到 ACK 应答（接收端未正确接收）。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;错误恢复策略&lt;/strong&gt;：&lt;ul&gt;&lt;li&gt;节点维护错误计数器，累计错误时进入 &amp;ldquo;错误激活&amp;rdquo;&amp;ldquo;错误认可&amp;rdquo;&amp;ldquo;总线关闭&amp;rdquo; 状态，自动重发或请求总线复位。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</code></pre></ul><h4 id="4.%C2%A0%E4%BD%8D%E6%97%B6%E5%BA%8F%E4%B8%8E%E5%90%8C%E6%AD%A5" name="4.%C2%A0%E4%BD%8D%E6%97%B6%E5%BA%8F%E4%B8%8E%E5%90%8C%E6%AD%A5">（4）<strong>位时序与同步</strong></h4><ul><li><strong>位时间划分</strong>：1 位分为同步段（SS）、传播时间段（PTS）、相位缓冲段 1（PBS1）、相位缓冲段 2（PBS2），可通过寄存器配置适应不同总线速率。</li><li><strong>同步机制</strong>：硬同步（帧起始 SOF 的下降沿）和重同步（根据位边沿偏移调整相位缓冲段），确保多节点时钟同步。</li></ul><h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89%E9%80%BB%E8%BE%91%E9%93%BE%E8%B7%AF%E6%8E%A7%E5%88%B6%E5%AD%90%E5%B1%82%EF%BC%88LLC%EF%BC%89" name="%EF%BC%88%E4%BA%8C%EF%BC%89%E9%80%BB%E8%BE%91%E9%93%BE%E8%B7%AF%E6%8E%A7%E5%88%B6%E5%AD%90%E5%B1%82%EF%BC%88LLC%EF%BC%89">（二）逻辑链路控制子层（LLC）</h3><h4 id="1.%C2%A0%E5%B8%A7%E7%B1%BB%E5%9E%8B%E6%8E%A7%E5%88%B6" name="1.%C2%A0%E5%B8%A7%E7%B1%BB%E5%9E%8B%E6%8E%A7%E5%88%B6">（1）&nbsp;<strong>帧类型控制</strong></h4><ul><li>区分数据帧和远程帧的逻辑功能，处理远程帧的请求响应逻辑（如接收远程帧后发送对应数据帧）。</li></ul><h4 id="2.%C2%A0%E6%B6%88%E6%81%AF%E8%BF%87%E6%BB%A4" name="2.%C2%A0%E6%B6%88%E6%81%AF%E8%BF%87%E6%BB%A4">（2）<strong>消息过滤</strong></h4><ul><li>通过接收滤波器（如掩码寄存器）筛选需要处理的消息 ID，减少节点 CPU 负载。例如，汽车 ECU 可只接收与自身功能相关的消息（如发动机控制模块只处理 ID 为 0x100~0x1FF 的帧）。</li></ul><h4 id="3.%C2%A0%E6%81%A2%E5%A4%8D%E7%AE%A1%E7%90%86" name="3.%C2%A0%E6%81%A2%E5%A4%8D%E7%AE%A1%E7%90%86">（3）<strong>恢复管理</strong></h4><ul><li>处理过载帧的发送与接收，协调节点间的数据流控制，避免缓冲区溢出。</li></ul><h2 id="4.%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%9A%E4%BB%8E%E5%BA%95%E5%B1%82%E5%88%B0%E5%9C%BA%E6%99%AF%E5%8C%96%E7%9A%84%E8%AF%AD%E4%B9%89%E5%AE%9A%E4%B9%89" name="4.%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%9A%E4%BB%8E%E5%BA%95%E5%B1%82%E5%88%B0%E5%9C%BA%E6%99%AF%E5%8C%96%E7%9A%84%E8%AF%AD%E4%B9%89%E5%AE%9A%E4%B9%89">4.应用层协议：从底层到场景化的语义定义</h2><h3 id="1.%C2%A0CANopen%EF%BC%88%E5%B7%A5%E4%B8%9A%E8%87%AA%E5%8A%A8%E5%8C%96%EF%BC%89" name="1.%C2%A0CANopen%EF%BC%88%E5%B7%A5%E4%B8%9A%E8%87%AA%E5%8A%A8%E5%8C%96%EF%BC%89">（1）&nbsp;<strong>CANopen（工业自动化）</strong></h3><ul><li><strong>架构</strong>：基于 CAN 的数据链路层，定义设备模型、通信协议和应用协议（如 SDO/PDO 服务）。</li><li><strong>典型应用</strong>：伺服电机控制、机器人关节驱动，支持主从模式和分布式时钟同步（如使用 Sync 报文）。</li></ul><h3 id="2.%C2%A0J1939%EF%BC%88%E5%95%86%E7%94%A8%E8%BD%A6%E7%94%B5%E5%AD%90%EF%BC%89" name="2.%C2%A0J1939%EF%BC%88%E5%95%86%E7%94%A8%E8%BD%A6%E7%94%B5%E5%AD%90%EF%BC%89">（2）<strong>J1939（商用车电子）</strong></h3><ul><li><strong>标准化组织</strong>：SAE（美国汽车工程师学会），定义卡车、公交车的电子控制单元通信标准。</li><li><strong>核心特性</strong>：<ul><li>分层地址分配（如发动机 ECU 地址 0x01，变速箱 ECU 地址 0x02）；</li><li>定义参数组（PGN）编码规则，如发动机转速对应 PGN 0x100004。</li></ul></li></ul><h3 id="3.%C2%A0%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE" name="3.%C2%A0%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE">（3）<strong>其他应用层协议</strong></h3><ul><li><strong>DeviceNet</strong>：工业自动化领域，支持多主通信和设备热插拔；</li><li><strong>SAE J1939-21</strong>：定义诊断协议，用于车辆故障码（DTC）的传输与解析；</li><li><strong>ISO 15118</strong>：电动汽车充电通信协议，基于 CAN 实现充电控制与状态交互。</li></ul><h2 id="5.CAN%E5%8D%8F%E8%AE%AE%E5%B1%82" name="5.CAN%E5%8D%8F%E8%AE%AE%E5%B1%82">5.CAN协议层</h2><p>&nbsp; &nbsp; &nbsp; &nbsp;CAN的物理层标准，约定了电气特性，以下介绍的协议层则规定了通讯逻辑。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN（Controller Area Network，控制器局域网）协议作为工业控制和汽车电子领域的核心通信标准，其协议层设计遵循 OSI 参考模型，主要包含<strong>数据链路层</strong>（又细分为逻辑链路控制子层 LLC 和媒体访问控制子层 MAC）和<strong>物理层</strong>，同时衍生出多种应用层协议（如 CANopen、J1939 等）。</p><p><strong>OSI 模型映射：</strong></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/59c544c2357f40c8a1d9528be5d56f30.png"></p><h3 id="%EF%BC%88%E4%B8%80%EF%BC%89%20CAN%E7%9A%84%E6%B3%A2%E7%89%B9%E7%8E%87%E5%8F%8A%E4%BD%8D%E5%90%8C%E6%AD%A5" name="%EF%BC%88%E4%B8%80%EF%BC%89%20CAN%E7%9A%84%E6%B3%A2%E7%89%B9%E7%8E%87%E5%8F%8A%E4%BD%8D%E5%90%8C%E6%AD%A5" style="background-color:transparent">（一） CAN的波特率及位同步</h3><h4 id="%EF%BC%881%EF%BC%89%E4%BD%8D%E6%97%B6%E5%BA%8F%E7%9A%84%E5%88%86%E8%A7%A3%EF%BC%9A" name="%EF%BC%881%EF%BC%89%E4%BD%8D%E6%97%B6%E5%BA%8F%E7%9A%84%E5%88%86%E8%A7%A3%EF%BC%9A">（1）位时序的分解：</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了实现位同步，CAN 协议把每一个数据位的时序分解成 SS 段、PTS 段、PBS1 段、PBS2 段，这四段的长度加起来即为一个 CAN 数据位的长度。分解后最小的时间单位是 Tq，而一个完整的位由 8~25 个 Tq 组成。为方便表示，下图中的高低电平直接代表信号逻辑 0 或逻辑 1(不是差分信号)。（为了避免不同设备的时钟误差和为了灵活调整每个采样点的位置，使采样点对齐数据位中心附近，CAN总线对每一个数据位的时长进行了更细的划分，分为同步段（SS）、传播时间段（PTS）、相位缓冲段1（PBS1）和相位缓冲段2（PBS2），每个段又由若干个最小时间单位（Tq）构成。）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tq 是 CAN 控制器的最小时间周期，称作时间份额（Time quantum）。它是通过芯片晶振周期分频而来。&nbsp;Tq 是 CAN 协议中定义位时间的基本单位，用于确定 CAN 数据位的各个组成部分的时间长度。一个完整的 CAN 数据位由 8~25 个 Tq 组成，CAN 协议把每一个数据位的时序分解成的 SS 段、PTS 段、PBS1 段、PBS2 段，其长度也是由若干个 Tq 构成。总线上的各个通讯节点约定好 1 个 Tq 的时间长度以及每一个数据位占据的 Tq 数量，就可以确定 CAN 通讯的波特率。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下图中表示的 CAN 通讯信号每一个数据位的长度为 19Tq，其中 SS 段占 1Tq，PTS 段 占 6Tq，PBS1 段占 5Tq，PBS2 段占 7Tq。信号的采样点位于 PBS1 段与 PBS2 段之间，通过控制各段的长度，可以对采样点的位置进行偏移，以便准确地采样。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/a9648bd0b65248d7814506194d7e1f50.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/356a1de24acf4520b032cba01f7c7a57.png"></p><p><strong>1）SS 段(SYNC SEG)</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SS 译为同步段，若通讯节点检测到总线上信号的跳变沿被包含在 SS 段的范围之内，则表示节点与总线的时序是同步的，当节点与总线同步时，采样点采集到的总线电平即可被确定为该位的电平。SS 段的大小固定为 1Tq。<br /><strong>2）PTS 段(PROP SEG)</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PTS 译为传播时间段，这个时间段是用于补偿网络的物理延时时间。是总线上输入比较器延时和输出驱动器延时总和的两倍。PTS 段的大小可以为 1~8Tq（可自定义）。<br /><strong>3）PBS1 段(PHASE SEG1)</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PBS1 译为相位缓冲段，主要用来补偿边沿阶段的误差，它的时间长度在重新同步的时候可以加长。PBS1 段的初始大小可以为 1~8Tq（可自定义）。<br /><strong>4）PBS2 段(PHASE SEG2)</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PBS2 这是另一个相位缓冲段，也是用来补偿边沿阶段误差的，它的时间长度在重新同步时可以缩短。PBS2 段的初始大小可以为 2~8Tq（可自定义）。</p><h4 id="%EF%BC%882%EF%BC%89%E9%80%9A%E8%AE%AF%E7%9A%84%E6%B3%A2%E7%89%B9%E7%8E%87" name="%EF%BC%882%EF%BC%89%E9%80%9A%E8%AE%AF%E7%9A%84%E6%B3%A2%E7%89%B9%E7%8E%87"><strong>（2）通讯的波特率</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总线上的各个通讯节点只要约定好1个Tq的时间长度以及每一个数据位占据多少个Tq，就可以确定CAN通讯的波特率。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例如，假设上图中的1Tq=1us，而每个数据位由19个Tq组成， 则传输一位数据需要时间T1bit&nbsp;=19us，从而每秒可以传输的数据位个数为：</p><p style="text-align:center">1x106&shy;/19 = 52631.6 (bps)</p><p>这个每秒可传输的数据位的个数即为通讯中的波特率。</p><h4 id="%EF%BC%883%EF%BC%89%E5%90%8C%E6%AD%A5%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90" name="%EF%BC%883%EF%BC%89%E5%90%8C%E6%AD%A5%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90"><strong>（3）同步过程分析</strong></h4><p>波特率只是约定了每个数据位的长度，数据同步还涉及到相位的细节，这个时候就需要用到数据位内的SS、PTS、PBS1及PBS2段了。（未细讲，置底查看参考文档链接）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&nbsp;1) 硬同步</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;若某个CAN节点通过总线发送数据时，它会发送一个表示通讯起始的信号(即帧起始信号)，该信号是一个由高变低的下降沿。 而挂载到CAN总线上的通讯节点在不发送数据时，会时刻检测总线上的信号。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;1） 每个设备都有一个位时序计时周期，当某个设备（发送方）率先发送报文，其他所有设备（接收方）收到SOF的下降沿时，接收方会将自己的位时序计时周期拨到SS段的位置，与发送方的位时序计时周期保持同步（在开始任务前，根据第一个下降沿&ldquo;对表&rdquo;）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）硬同步只在帧的第一个下降沿（SOF下降沿）有效</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3）经过硬同步后，若发送方和接收方的时钟没有误差，则后续所有数据位的采样点必然都会对齐数据位中心附近</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/e4f2b955a07b4e3698472997a5732f9e.png"></p><p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) 重新同步/再同步</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面的硬同步只是当存在帧起始信号时才起作用，如果在一帧很长的数据内，节点信号与总线信号相位有偏移时，这种同步方式就无能为力了。 因而需要引入重新同步方式，它利用普通数据位的高至低电平的跳变沿来同步(帧起始信号是特殊的跳变沿)。重新同步与硬同步方式相似的地方是它们都使用SS段来进行检测，同步的目的都是使 节点内的SS段把跳变沿包含起来。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;1）若发送方或接收方的时钟有误差，随着误差积累，数据位边沿逐渐偏离SS段，则此时接收方根据再同步补偿宽度值（SJW）通过加长PBS1段，或缩短PBS2段，以调整同步</p><p>&nbsp; &nbsp; &nbsp; &nbsp;2）再同步可以发生在第一个下降沿之后的每个数据位跳变边沿</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/060eb723ead546329bb3c400e7c390cc.png"></p><h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89CAN%E7%9A%84%E6%8A%A5%E6%96%87%E7%A7%8D%E7%B1%BB%E5%8F%8A%E7%BB%93%E6%9E%84" name="%EF%BC%88%E4%BA%8C%EF%BC%89CAN%E7%9A%84%E6%8A%A5%E6%96%87%E7%A7%8D%E7%B1%BB%E5%8F%8A%E7%BB%93%E6%9E%84">（二）CAN的报文种类及结构</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN使用的是两条差分信号线，只能表达一个信号， 简洁的物理层决定了CAN必然要配上一套更复杂的协议，如何用一个信号通道实现同样、甚至更强大的功能呢？CAN协议给出的解决方案是对数据、 操作命令(如读/写)以及同步信号进行打包，打包后的这些内容称为报文。报文的承载格式是数据帧。</p><h4 id="%EF%BC%881%EF%BC%89%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB" name="%EF%BC%881%EF%BC%89%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB"><strong>（1）报文的种类</strong></h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在原始数据段的前面加上传输起始标签、片选(识别)标签和控制标签，在数据的尾段加上CRC校验标签、应答标签和传输结束标签，把这些内容按特定的格式打包好， 就可以用一个通道表达各种信号了，各种各样的标签就如同SPI中各种通道上的信号，起到了协同传输的作用。当整个数据包被传输到其它设备时， 只要这些设备按格式去解读，就能还原出原始数据，这样的报文就被称为CAN的&ldquo;数据帧&rdquo;。</p><p>为了更有效地控制通讯，CAN一共规定了5种类型的帧， 它们的类型及用途说明如表帧的种类及其用途。</p><table><thead><tr><th style="width:69px">帧类型</th><th style="width:207px">用途</th><th style="width:413px">帧结构（以标准帧为例）</th></tr></thead><tbody><tr><td style="width:69px">数据帧</td><td style="width:207px">传输用户数据</td><td style="width:413px">帧起始 (SOF)&rarr;仲裁段 (ID+RTR)&rarr;控制段&rarr;数据段&rarr;CRC&rarr;ACK&rarr;帧结束</td></tr><tr><td style="width:69px">远程帧</td><td style="width:207px">请求其他节点发送数据</td><td style="width:413px">无数据段，RTR 位为 1（隐性），用于主机轮询从机</td></tr><tr><td style="width:69px">错误帧</td><td style="width:207px">检测到错误时发送报警</td><td style="width:413px">错误标志（6 个显性位）+ 错误界定符（8 个隐性位）</td></tr><tr><td style="width:69px">过载帧</td><td style="width:207px">节点处理能力不足时请求延迟</td><td style="width:413px">过载标志（6 个显性位）+ 过载界定符（8 个隐性位）</td></tr><tr><td style="width:69px">帧间隔</td><td style="width:207px">分隔连续帧</td><td style="width:413px">3 个隐性位，用于恢复总线空闲状态</td></tr></tbody></table><h4 id="%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%B8%A7%E7%9A%84%E7%BB%93%E6%9E%84" name="%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%B8%A7%E7%9A%84%E7%BB%93%E6%9E%84"><strong>（2）数据帧的结构</strong></h4><p><strong>SOF（Start of Frame）：帧起始，表示后面一段波形为传输的数据位 </strong></p><p><strong>ID（Identify）：标识符，区分功能，同时决定优先级 </strong></p><p><strong>RTR（Remote Transmission Request ）：远程请求位，区分数据帧和遥控帧 </strong></p><p><strong>IDE（Identifier Extension）：扩展标志位，区分标准格式和扩展格式 </strong></p><p><strong>SRR（Substitute Remote Request）：替代RTR，协议升级时留下的无意义位 </strong></p><p><strong>r0/r1（Reserve）：保留位，为后续协议升级留下空间 </strong></p><p><strong>DLC（Data Length Code）：数据长度，指示数据段有几个字节 </strong></p><p><strong>Data：数据段的1~8个字节有效数据 </strong></p><p><strong>CRC（Cyclic Redundancy Check）：循环冗余校验，校验数据是否正确 </strong></p><p><strong>ACK（Acknowledgement）：应答位，判断数据有没有被接收方接收 </strong></p><p><strong>CRC/ACK界定符：为应答位前后发送方和接收方释放总线留下时间 </strong></p><p><strong>EOF（End of Frame ）：帧结束，表示数据位已经传输完毕</strong></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/0b8a902d501c4ac1b0e25d55b4673266.png"></p><p style="text-align:center">数据帧</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据帧以一个显性位(逻辑0)开始，以7个连续的隐性位(逻辑1)结束，在它们之间，分别有仲裁段、控制段、数据段、CRC段和ACK段。</p><ul><li><p><strong>帧起始</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SOF段(Start Of Frame)，译为帧起始，帧起始信号只有一个数据位，是一个显性电平， 它用于通知各个节点将有数据传输，其它节点通过帧起始信号的电平跳变沿来进行硬同步。</p><ul><li><p><strong>仲裁段</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAN总线只有一对差分信号线，同一时间只能有一个设备操作总线发送数据，若多个设备同时有发送需求，该如何分配总线资源？ 解决问题的思路：制定资源分配规则，依次满足多个设备的发送需求，确保同一时间只有一个设备操作总线</p><p><strong><span style="background-color:#38d8f0">资源分配规则1 - 先占先得</span></strong></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）若当前已经有设备正在操作总线发送数据帧/遥控帧，则其他任何设备不能再同时发送数据帧/遥控帧（可以发送错误帧/过载帧破坏当前数据） </span></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）任何设备检测到连续11个隐性电平，即认为总线空闲，只有在总线空闲时，设备才能发送数据帧/遥控帧 </span></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3）一旦有设备正在发送数据帧/遥控帧，总线就会变为活跃状态，必然不会出现连续11个隐性电平，其他设备自然也不会破坏当前发送 </span></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4）若总线活跃状态其他设备有发送需求，则需要等待总线变为空闲，才能执行发送需求</span></p><p><strong><span style="background-color:#38d8f0">资源分配规则2 - 非破坏性仲裁</span></strong></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;若多个设备的发送需求同时到来或因等待而同时到来，则CAN总线协议会根据ID号（仲裁段）进行非破坏性仲裁，ID号小的（优先级高）取到总线控制权，ID号大的（优先级低）仲裁失利后将转入接收状态，等待下一次总线空闲时再尝试发送 </span></p><p><span style="color:#4da8ee">实现非破坏性仲裁需要两个要求： </span></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;线与特性：总线上任何一个设备发送显性电平0时，总线就会呈现显性电平0状态，只有当所有设备都发送隐性电平1时，总线才呈现隐性电平1状态，即：0 &amp; X &amp; X = 0，1 &amp; 1 &amp; 1 = 1 </span></p><p><span style="color:#4da8ee">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;回读机制：每个设备发出一个数据位后，都会读回总线当前的电平状态，以确认自己发出的电平是否被真实地发送出去了，根据线与特性，发出0读回必然是0，发出1读回不一定是1</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当同时有两个报文被发送时，总线会根据仲裁段的内容决定哪个数据包能被传输，这也是它名称的由来。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;仲裁段的内容主要为本数据帧的ID信息(标识符)，数据帧具有标准格式和扩展格式两种，区别就在于ID信息的长度，标准格式的ID为11位，扩展格式的ID为29位， 它在标准ID的基础上多出18位。在CAN协议中，ID起着重要的作用，它决定着数据帧发送的优先级，也决定着其它节点是否会接收这个数据帧。 CAN协议不对挂载在它之上的节点分配优先级和地址，对总线的占有权是由信息的重要性决定的，即对于重要的信息，我们会给它打包上一个优先级高的ID， 使它能够及时地发送出去。也正因为它这样的优先级分配原则，使得CAN的扩展性大大加强，在总线上增加或减少节点并不影响其它设备。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;报文的优先级，是通过对ID的仲裁来确定的。根据前面对物理层的分析我们知道如果总线上同时出现显性电平和隐性电平，总线的状态会被置为显性电平，CAN正是利用这个特性<strong>（线与特性）</strong>进行仲裁。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;若两个节点同时竞争CAN总线的占有权，当它们发送报文时，若首先出现隐性电平，则会失去对总线的占有权，进入接收状态。<strong>（即该两个节点同时发送字节，帧起始一样，然后到ID<span style="color:#4da8ee">（仲裁段部分）</span>，根据线与特性只要谁的ID为显性0<span style="color:#4da8ee">（ID小，优先级高）</span>则马上拉开总线，相对应的另外一个节点的ID的某位为隐性1就表示它的ID大<span style="color:#4da8ee">（因为前面比较过来都是一样大小的ID位）</span>，其优先级低被淘汰）</strong>见图仲裁过程&nbsp;，在开始阶段，两个设备发送的电平一样， 所以它们一直继续发送数据。到了图中箭头所指的时序处，节点单元1发送的为隐性电平，而此时节点单元2发送的为显性电平， 由于总线的&ldquo;线与&rdquo;特性使它表达出显示电平，因此单元2竞争总线成功，这个报文得以被继续发送出去。</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/f3af0b9bff204a83a907f4f48d46f9e6.png">https://i-blog.csdnimg.cn/direct/f3af0b9bff204a83a907f4f48d46f9e6.png</a>“ width&#x3D;”777” &#x2F;&gt;​</p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;仲裁段ID的优先级也影响着接收设备对报文的反应。因为在CAN总线上数据是以广播的形式发送的，所有连接在CAN总线的节点都会收到所有其它节点发出的有效数据， 因而我们的CAN控制器大多具有根据ID过滤报文的功能，它可以控制自己只接收某些ID的报文。</p><p>回看图&nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="数据帧的结构" href="https://doc.embedfire.com/mcu/stm32/f103badao/std/zh/latest/book/CAN.html#id21" title="数据帧的结构">数据帧的结构</a>&nbsp;中的数据帧格式，可看到仲裁段除了报文ID外，还有RTR、IDE和SRR位。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1) RTR位(Remote Transmission Request Bit)，译作远程传输请求位， 它是用于区分数据帧和遥控帧的，当它为显性电平时表示数据帧，隐性电平时表示遥控帧。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2) IDE位(Identifier Extension Bit)，译作标识符扩展位， 它是用于区分标准格式与扩展格式，当它为显性电平时表示标准格式，隐性电平时表示扩展格式。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3) SRR位(Substitute Remote Request Bit)，只存在于扩展格式，它用于替代标准格式中的RTR位。 由于扩展帧中的SRR位为隐性位，RTR在数据帧为显性位，所以在两个ID相同的标准格式报文与扩展格式报文中，标准格式的优先级较高。</p><p>额外：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据帧和遥控帧的优先级：数据帧和遥控帧ID号一样时，数据帧的优先级高于遥控帧</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;标准格式和扩展格式的优先级：标准格式11位ID号和扩展格式29位ID号的高11位一样时，标准格式的优先级高于扩展格式（SRR必须始终为1，以保证此要求）</p><p style="text-align:center"><img alt=)<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;填充位不会影响 CAN 总线仲裁的优先级。CAN 总线的填充位机制是指在发送数据时，当发送器检测到位流中有五个连续相同逻辑电平的位时，便在这五位后面自动插入一个补码位。接收方检测到填充位时，会自动移除填充位，恢复原始数据。由于填充位是根据特定规则自动插入和移除的，且所有节点都会遵循这一规则，因此不会改变仲裁段中原本 ID 的内容和顺序，也就不会影响到优先级。</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/6fc4bea5e5014c70b7fcd9c6f92addd6.jpeg"></p><ul><li><p><strong>控制段</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在控制段中的r1和r0为保留位，默认设置为显性位。它最主要的是DLC段(Data Length Code)，译为数据长度码， 它由4个数据位组成，用于表示本报文中的数据段含有多少个字节，DLC段表示的数字为0~8。</p><ul><li><p><strong>数据段</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数据段为数据帧的核心内容，它是节点要发送的原始信息，由0~8个字节组成，MSB先行。</p><ul><li><p><strong>CRC段</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了保证报文的正确传输，CAN的报文包含了一段15位的CRC校验码，一旦接收节点算出的CRC码跟接收到的CRC码不同，则它会向发送节点反馈出错信息，利用错误帧请求它重新发送。CRC部分的计算一般由CAN控制器硬件完成，出错时的处理则由软件控制最大重发数。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在CRC校验码之后，有一个CRC界定符，它为隐性位，主要作用是把CRC校验码与后面的ACK段间隔起来。</p><ul><li><p><strong>ACK段</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ACK段包括一个ACK槽位，和ACK界定符位。类似I2C总线，在ACK槽位中，发送节点发送的是隐性位，而接收节点则在这一位中发送显性位以示应答。在ACK槽和帧结束之间由ACK界定符间隔开。</p><ul><li><p><strong>帧结束</strong></p></li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EOF段(End Of Frame)，译为帧结束，帧结束段由发送节点发送的7个隐性位表示结束。</p><p><span style="background-color:#faa572">错误处理：</span></p><p><span style="background-color:#faa572">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;错误类型：&nbsp;位错误、填充错误、CRC错误、格式错误、应答错误</span></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/329790a70c2e4432a6afeedf7215ba07.png"></p><p><span style="background-color:#faa572">错误状态（限制抽风设备不断发送错误通知影响其他设备）：</span></p><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#faa572">1）主动错误状态的设备正常参与通信并在检测到错误时发出主动错误帧 </span></p><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#faa572">2）被动错误状态的设备正常参与通信但检测到错误时只能发出被动错误帧 </span></p><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#faa572">3）总线关闭状态的设备不能参与通信 </span></p><p><span style="background-color:null">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color:#faa572">4）每个设备内部管理一个TEC和REC，根据TEC和REC的值确定自己的状态</span></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/8e9e7bff29ff4f7ea290faa4326cfcbe.png"></p><h4>（3）遥控帧的结构</h4><p>遥控帧无数据段，RTR为隐性电平1，其他部分与数据帧相同。</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/1fc05735e2654b73bb31644af0d11a99.png">https://i-blog.csdnimg.cn/direct/1fc05735e2654b73bb31644af0d11a99.png</a>“ width&#x3D;”837” &#x2F;&gt;​</p></p><h4>（4）错误帧的结构</h4><p>总线上所有设备都会监督总线的数据，一旦发现&ldquo;位错误&rdquo;或&ldquo;填充错误&rdquo;或&ldquo;CRC错误&rdquo;或&ldquo;格式错误&rdquo;或&ldquo;应答错误&rdquo; ，这些设备便会发出错误帧来破坏数据，同时终止当前的发送设备</p><p><img alt="" height="305" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/86826c2e14df4b21befd7f0e74f2a785.png" width="835" />​</p><h4>（5）过载帧的结构</h4><p>当接收方收到大量数据而无法处理时，其可以发出过载帧，延缓发送方的数据发送，以平衡总线负载，避免数据丢失</p><p><img alt="" height="304" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/034da824a89f4352bcb3e4bca5105dae.png" width="833" />​</p><h4>（6）帧间隔的结构</h4><p>将数据帧和遥控帧与前面的帧分离开</p><p><img alt="" height="274" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/3686c397288c4b6896c5e8e876944e31.png" width="830" />​</p><h4>（7）位填充的结构</h4><p>位填充规则：发送方每发送5个相同电平后，自动追加一个相反电平的填充位，接收方检测到填充位时，会自动移除填充位，恢复原始数据</p><p>例如：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;即将发送：&nbsp;&nbsp; &nbsp;100000110&nbsp;&nbsp; &nbsp; &nbsp; 10000011110&nbsp;&nbsp; &nbsp;0111111111110 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;实际发送：&nbsp;&nbsp; &nbsp;1000001110&nbsp;&nbsp; &nbsp; &nbsp; 1000001111100&nbsp;&nbsp; &nbsp;011111011111010 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;实际接收：&nbsp;&nbsp; &nbsp;1000001110&nbsp;&nbsp; &nbsp; &nbsp; 1000001111100&nbsp;&nbsp; &nbsp;011111011111010 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;移除填充后： 100000110&nbsp;&nbsp; &nbsp; &nbsp; 10000011110&nbsp;&nbsp; &nbsp;0111111111110</p><p>位填充作用： 增加波形的定时信息，利于接收方执行&ldquo;再同步&rdquo;，防止波形长时间无变化，导致接收方不能精确掌握数据采样时机 将正常数据流与&ldquo;错误帧&rdquo;和&ldquo;过载帧&rdquo;区分开，标志&ldquo;错误帧&rdquo;和&ldquo;过载帧&rdquo;的特异性 保持CAN总线在发送正常数据流时的活跃状态，防止被误认为总线空闲</p><h2>6.STM32 CAN外设简介</h2><p>STM32内置bxCAN外设（CAN控制器），支持CAN2.0A和2.0B，可以自动发送CAN报文和按照过滤器自动接收指定CAN报文，程序只需处理报文数据而无需关注总线的电平细节</p><p>波特率最高可达1兆位/秒</p><p>3个可配置优先级的发送邮箱</p><p>2个3级深度的接收FIFO</p><p>14个过滤器组（互联型28个）</p><p>时间触发通信、自动离线恢复、自动唤醒、禁止自动重传、接收FIFO溢出处理方式可配置、发送优先级可配置、双CAN模式</p><p>STM32F103C8T6 CAN资源：CAN1</p><h3>（一）CAN网拓扑结构</h3><p><img alt=)<h3>（二）CAN框图</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/d2ee435696f641e7b18e6caa8b1da4e5.png"></p><h3>（三）CAN基本结构</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/cbdacdae1cd44c31a3ae87b7164d2686.png"></p><h3>（四）发送过程</h3><p>基本流程：选择一个空置邮箱&rarr;写入报文 &rarr;请求发送</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/2b26c2f654a644999216a5c4e9c7aa0f.png"></p><p>（五）接收过程</p><p>基本流程：接收到一个报文&rarr;匹配过滤器后进入FIFO 0或FIFO 1&rarr;CPU读取</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/6dc5fcb2563e4a43a3ced9e76460d9c8.png"></p><h3>（六）发送和接收配置位</h3><p>NART：置1，关闭自动重传，CAN报文只被发送1次，不管发送的结果如何（成功、出错或仲裁丢失）；置0，自动重传，CAN硬件在发送报文失败时会一直自动重传直到发送成功</p><p>TXFP：置1，优先级由发送请求的顺序来决定，先请求的先发送；置0，优先级由报文标识符来决定，标识符值小的先发送（标识符值相等时，邮箱号小的报文先发送）</p><p>RFLM：置1，接收FIFO锁定，FIFO溢出时，新收到的报文会被丢弃；置0，禁用FIFO锁定，FIFO溢出时，FIFO中最后收到的报文被新报文覆盖</p><h3>（七）标识符过滤器</h3><p>每个过滤器的核心由两个32位寄存器组成：R1[31:0]和R2[31:0]</p><p>FSCx：位宽设置 &nbsp; &nbsp; 置0，16位；置1，32位</p><p>FBMx：模式设置 &nbsp; &nbsp; 置0，屏蔽模式；置1，列表模式</p><p>FFAx：关联设置 &nbsp; &nbsp; 置0，FIFO 0；置1，FIFO 1</p><p>FACTx：激活设置 &nbsp; &nbsp; 置0，禁用；置1，启用</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/de58223ec01244ff9485541c6569a2a5.png"></p><ul><li><strong>屏蔽模式</strong>（Identifier Mask Mode）：用 &ldquo;ID + 屏蔽&rdquo; 组合，灵活筛选 ID（比如只想接收某一类 ID，或固定位段的 ID）。</li><li><strong>列表模式</strong>（Identifier List Mode）：此时 &ldquo;屏蔽&rdquo; 的逻辑会被 &ldquo;忽略&rdquo;（或强制设为全<code>1</code>），相当于要求 ID&nbsp;<strong>完全等于</strong>&nbsp;列表里的某个值（更严格的精确匹配）。</li></ul><h3>（八）测试模式</h3><p>静默模式：用于分析CAN总线的活动，不会对总线造成影响</p><p>环回模式：用于自测试，同时发送的报文可以在CAN_TX引脚上检测到</p><p>环回静默模式：用于热自测试，自测的同时不会影响CAN总线</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/4a99d47e6bdb425fa55830ef1fbf4afb.png"></p><h3>（九）工作模式</h3><p>初始化模式：用于配置CAN外设，禁止报文的接收和发送</p><p>正常模式：配置CAN外设后进入正常模式，以便正常接收和发送报文</p><p>睡眠模式：低功耗，CAN外设时钟停止，可使用软件唤醒或者硬件自动唤醒</p><p>AWUM：置1，自动唤醒，一旦检测到CAN总线活动，硬件就自动清零SLEEP，唤醒CAN外设；置0，手动唤醒，软件清零SLEEP，唤醒CAN外设</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/0323f172325b4353bb3c1b153b595e2d.png"></p><h3>（十）位时间特性</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/3d6969b6820049899e81e5d95a28d570.png"></p><p>波特率 = APB1时钟频率 / 分频系数 / 一位的Tq数量 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 36MHz / (BRP[9:0]+1) / (1 + (TS1[3:0]+1) + (TS2[2:0]+1))</p><h3>（十一）中断</h3><p>CAN外设占用4个专用的中断向量</p><p>（1）发送中断：发送邮箱空时产生</p><p>（2）FIFO 0中断：收到一个报文/FIFO 0满/FIFO 0溢出时产生</p><p>（3）FIFO 1中断：收到一个报文/FIFO 1满/FIFO 1溢出时产生</p><p>（4）状态改变错误中断：出错/唤醒/进入睡眠时产生</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/33326781fe6a4084b2bdc3ef7416d87e.png"></p><h3>（十二）时间触发通信</h3><p>（1）TTCM：置1，开启时间触发通信功能；置0，关闭时间触发通信功能</p><p>（2）CAN外设内置一个16位的计数器，用于记录时间戳</p><p>（3）TTCM置1后，该计数器在每个CAN位的时间自增一次，溢出后归零</p><p>（4）每个发送邮箱和接收FIFO都有一个TIME[15:0]寄存器，发送帧SOF时，硬件捕获计数器值到发送邮箱的TIME寄存器，接收帧SOF时，硬件捕获计数器值到接收FIFO的TIME寄存器</p><p>（5）发送邮箱可配置TGT位，捕获计数器值的同时，也把此值写入到数据帧数据段的最后两个字节，为了使用此功能，DLC必须设置为8</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/3244434bac574d678d07050761554750.png"></p><h3>（十三）错误处理和离线恢复</h3><p>（1）TEC和REC根据错误的情况增加或减少</p><p>（2）ABOM：置1，开启离线自动恢复，进入离线状态后，就自动开启恢复过程；置0，关闭离线自动恢复，软件必须先请求进入然后再退出初始化模式，随后恢复过程才被开启<img alt="" height="460" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/7f90973c189f43e5800f555be71704a4.png" width="781" /></p><h1 id="%E4%BA%8C%E3%80%81%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5" name="%E4%BA%8C%E3%80%81%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5">二、项目实践</h1><h2>（一）基于STM32F103C8T6 标准库的CAN设备一、二的程序编写</h2><p id="articleContentId"><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="【STM32】基于STM32F103C8T6标准库的工程模板创建（使用离线固件包纯手动创建）" href="https://blog.csdn.net/qq_73648789/article/details/149104675?spm=1001.2014.3001.5502" title="【STM32】基于STM32F103C8T6标准库的工程模板创建（使用离线固件包纯手动创建）">【STM32】基于STM32F103C8T6标准库的工程模板创建（使用离线固件包纯手动创建）</a></p><p>&nbsp;在基础模板上，移植OLED的驱动和编写按键和CAN驱动，参考江协。</p><p>OLED_Font.h</p><pre><code class="language-cpp">#ifndef __OLED_FONT_H#define __OLED_FONT_H#include "stm32f10x.h"                 /*OLED字模库，宽8像素，高16像素*/const uint8_t OLED_F8x16[][16]={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//  00x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00,//! 10x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//" 20x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,//# 30x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00,//$ 40xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00,//% 50x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10,//&amp; 60x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//' 70x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,//( 80x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,//) 90x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,//* 100x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00,//+ 110x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00,//, 120x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,//- 130x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,//. 140x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00,/// 150x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,//0 160x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//1 170x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,//2 180x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,//3 190x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,//4 200x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,//5 210x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,//6 220x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,//7 230x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,//8 240x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,//9 250x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,//: 260x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00,//; 270x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,//&lt; 280x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,//= 290x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,//&gt; 300x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00,//? 310xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00,//@ 320x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,//A 330x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,//B 340xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,//C 350x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,//D 360x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,//E 370x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,//F 380xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,//G 390x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,//H 400x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//I 410x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,//J 420x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,//K 430x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,//L 440x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,//M 450x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,//N 460xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,//O 470x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,//P 480xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,//Q 490x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,//R 500x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,//S 510x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//T 520x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//U 530x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,//V 540xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,//W 550x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,//X 560x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//Y 570x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,//Z 580x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,//[ 590x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,//\ 600x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,//] 610x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//^ 620x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,//_ 630x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//` 640x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,//a 650x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,//b 660x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,//c 670x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,//d 680x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,//e 690x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//f 700x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,//g 710x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//h 720x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//i 730x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,//j 740x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,//k 750x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//l 760x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,//m 770x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//n 780x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//o 790x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,//p 800x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,//q 810x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,//r 820x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,//s 830x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,//t 840x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,//u 850x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,//v 860x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,//w 870x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,//x 880x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,//y 890x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,//z 900x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40,//{ 910x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,//| 920x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00,//} 930x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//~ 94};#endif</code></pre><p>bsp_oled.h</p><pre><code class="language-cpp">#ifndef __BSP_OLED_H#define __BSP_OLED_H#include "stm32f10x.h"                 void OLED_Init(void);void OLED_Clear(void);void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char);void OLED_ShowString(uint8_t Line, uint8_t Column, char *String);void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length);void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);#endif</code></pre><p>bsp_oled.c</p><pre><code class="language-cpp">#include "bsp_oled.h"#include "stm32f10x.h"#include "OLED_Font.h"/*引脚配置*/#define OLED_W_SCL(x)GPIO_WriteBit(GPIOB, GPIO_Pin_8, (BitAction)(x))#define OLED_W_SDA(x)GPIO_WriteBit(GPIOB, GPIO_Pin_9, (BitAction)(x))/*引脚初始化*/void OLED_I2C_Init(void){    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);GPIO_InitTypeDef GPIO_InitStructure; GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_OD;GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8; GPIO_Init(GPIOB, &amp;GPIO_InitStructure);GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; GPIO_Init(GPIOB, &amp;GPIO_InitStructure);OLED_W_SCL(1);OLED_W_SDA(1);}/**  * @brief  I2C开始  * @param  无  * @retval 无  */void OLED_I2C_Start(void){OLED_W_SDA(1);OLED_W_SCL(1);OLED_W_SDA(0);OLED_W_SCL(0);}/**  * @brief  I2C停止  * @param  无  * @retval 无  */void OLED_I2C_Stop(void){OLED_W_SDA(0);OLED_W_SCL(1);OLED_W_SDA(1);}/**  * @brief  I2C发送一个字节  * @param  Byte 要发送的一个字节  * @retval 无  */void OLED_I2C_SendByte(uint8_t Byte){uint8_t i;for (i = 0; i &lt; 8; i++){OLED_W_SDA(!!(Byte &amp; (0x80 &gt;&gt; i)));OLED_W_SCL(1);OLED_W_SCL(0);}OLED_W_SCL(1);//额外的一个时钟，不处理应答信号OLED_W_SCL(0);}/**  * @brief  OLED写命令  * @param  Command 要写入的命令  * @retval 无  */void OLED_WriteCommand(uint8_t Command){OLED_I2C_Start();OLED_I2C_SendByte(0x78);//从机地址OLED_I2C_SendByte(0x00);//写命令OLED_I2C_SendByte(Command); OLED_I2C_Stop();}/**  * @brief  OLED写数据  * @param  Data 要写入的数据  * @retval 无  */void OLED_WriteData(uint8_t Data){OLED_I2C_Start();OLED_I2C_SendByte(0x78);//从机地址OLED_I2C_SendByte(0x40);//写数据OLED_I2C_SendByte(Data);OLED_I2C_Stop();}/**  * @brief  OLED设置光标位置  * @param  Y 以左上角为原点，向下方向的坐标，范围：0~7  * @param  X 以左上角为原点，向右方向的坐标，范围：0~127  * @retval 无  */void OLED_SetCursor(uint8_t Y, uint8_t X){OLED_WriteCommand(0xB0 | Y);//设置Y位置OLED_WriteCommand(0x10 | ((X &amp; 0xF0) &gt;&gt; 4));//设置X位置高4位OLED_WriteCommand(0x00 | (X &amp; 0x0F));//设置X位置低4位}/**  * @brief  OLED清屏  * @param  无  * @retval 无  */void OLED_Clear(void){  uint8_t i, j;for (j = 0; j &lt; 8; j++){OLED_SetCursor(j, 0);for(i = 0; i &lt; 128; i++){OLED_WriteData(0x00);}}}/**  * @brief  OLED显示一个字符  * @param  Line 行位置，范围：1~4  * @param  Column 列位置，范围：1~16  * @param  Char 要显示的一个字符，范围：ASCII可见字符  * @retval 无  */void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char){      uint8_t i;OLED_SetCursor((Line - 1) * 2, (Column - 1) * 8);//设置光标位置在上半部分for (i = 0; i &lt; 8; i++){OLED_WriteData(OLED_F8x16[Char - ' '][i]);//显示上半部分内容}OLED_SetCursor((Line - 1) * 2 + 1, (Column - 1) * 8);//设置光标位置在下半部分for (i = 0; i &lt; 8; i++){OLED_WriteData(OLED_F8x16[Char - ' '][i + 8]);//显示下半部分内容}}/**  * @brief  OLED显示字符串  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  String 要显示的字符串，范围：ASCII可见字符  * @retval 无  */void OLED_ShowString(uint8_t Line, uint8_t Column, char *String){uint8_t i;for (i = 0; String[i] != '\0'; i++){OLED_ShowChar(Line, Column + i, String[i]);}}/**  * @brief  OLED次方函数  * @retval 返回值等于X的Y次方  */uint32_t OLED_Pow(uint32_t X, uint32_t Y){uint32_t Result = 1;while (Y--){Result *= X;}return Result;}/**  * @brief  OLED显示数字（十进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~4294967295  * @param  Length 要显示数字的长度，范围：1~10  * @retval 无  */void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i;for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i, Number / OLED_Pow(10, Length - i - 1) % 10 + '0');}}/**  * @brief  OLED显示数字（十进制，带符号数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：-2147483648~2147483647  * @param  Length 要显示数字的长度，范围：1~10  * @retval 无  */void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length){uint8_t i;uint32_t Number1;if (Number &gt;= 0){OLED_ShowChar(Line, Column, '+');Number1 = Number;}else{OLED_ShowChar(Line, Column, '-');Number1 = -Number;}for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i + 1, Number1 / OLED_Pow(10, Length - i - 1) % 10 + '0');}}/**  * @brief  OLED显示数字（十六进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~0xFFFFFFFF  * @param  Length 要显示数字的长度，范围：1~8  * @retval 无  */void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i, SingleNumber;for (i = 0; i &lt; Length; i++){SingleNumber = Number / OLED_Pow(16, Length - i - 1) % 16;if (SingleNumber &lt; 10){OLED_ShowChar(Line, Column + i, SingleNumber + '0');}else{OLED_ShowChar(Line, Column + i, SingleNumber - 10 + 'A');}}}/**  * @brief  OLED显示数字（二进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~1111 1111 1111 1111  * @param  Length 要显示数字的长度，范围：1~16  * @retval 无  */void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i;for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i, Number / OLED_Pow(2, Length - i - 1) % 2 + '0');}}/**  * @brief  OLED初始化  * @param  无  * @retval 无  */void OLED_Init(void){uint32_t i, j;for (i = 0; i &lt; 1000; i++)//上电延时{for (j = 0; j &lt; 1000; j++);}OLED_I2C_Init();//端口初始化OLED_WriteCommand(0xAE);//关闭显示OLED_WriteCommand(0xD5);//设置显示时钟分频比/振荡器频率OLED_WriteCommand(0x80);OLED_WriteCommand(0xA8);//设置多路复用率OLED_WriteCommand(0x3F);OLED_WriteCommand(0xD3);//设置显示偏移OLED_WriteCommand(0x00);OLED_WriteCommand(0x40);//设置显示开始行OLED_WriteCommand(0xA1);//设置左右方向，0xA1正常 0xA0左右反置OLED_WriteCommand(0xC8);//设置上下方向，0xC8正常 0xC0上下反置OLED_WriteCommand(0xDA);//设置COM引脚硬件配置OLED_WriteCommand(0x12);OLED_WriteCommand(0x81);//设置对比度控制OLED_WriteCommand(0xCF);OLED_WriteCommand(0xD9);//设置预充电周期OLED_WriteCommand(0xF1);OLED_WriteCommand(0xDB);//设置VCOMH取消选择级别OLED_WriteCommand(0x30);OLED_WriteCommand(0xA4);//设置整个显示打开/关闭OLED_WriteCommand(0xA6);//设置正常/倒转显示OLED_WriteCommand(0x8D);//设置充电泵OLED_WriteCommand(0x14);OLED_WriteCommand(0xAF);//开启显示OLED_Clear();//OLED清屏}</code></pre><p>bsp_key.h</p><pre><code class="language-cpp">#ifndef __BSP_KEY_H#define __BSP_KEY_H#include "stm32f10x.h"#define KEY_GPIO_CLK RCC_APB2Periph_GPIOB#define KEY_GPIO_PORT GPIOB#define KEY1_GPIO_PIN GPIO_Pin_1#define KEY2_GPIO_PIN GPIO_Pin_11void Key_Init(void);uint8_t Key_GetNum(void);#endif</code></pre><p>bsp_key.c</p><pre><code class="language-cpp">#include "bsp_key.h"#include "stm32f10x.h"                  #include "Delay.h"/**  * 函    数：按键初始化  * 参    数：无  * 返 回 值：无  */void Key_Init(void){/*开启时钟*/RCC_APB2PeriphClockCmd(KEY_GPIO_CLK, ENABLE);//开启GPIOB的时钟/*GPIO初始化*/GPIO_InitTypeDef GPIO_InitStructure;GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;GPIO_InitStructure.GPIO_Pin = KEY1_GPIO_PIN | KEY2_GPIO_PIN;GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;GPIO_Init(KEY_GPIO_PORT, &amp;GPIO_InitStructure);}/**  * 函    数：按键获取键码  * 参    数：无  * 返 回 值：按下按键的键码值，范围：0~2，返回0代表没有按键按下  * 注意事项：此函数是阻塞式操作，当按键按住不放时，函数会卡住，直到按键松手  */uint8_t Key_GetNum(void){uint8_t KeyNum = 0;//定义变量，默认键码值为0if (GPIO_ReadInputDataBit(KEY_GPIO_PORT, KEY1_GPIO_PIN) == 0)//读PB1输入寄存器的状态，如果为0，则代表按键1按下{Delay_ms(20);//延时消抖while (GPIO_ReadInputDataBit(KEY_GPIO_PORT, KEY1_GPIO_PIN) == 0);//等待按键松手Delay_ms(20);//延时消抖KeyNum = 1;//置键码为1}if (GPIO_ReadInputDataBit(KEY_GPIO_PORT, KEY2_GPIO_PIN) == 0)//读PB11输入寄存器的状态，如果为0，则代表按键2按下{Delay_ms(20);//延时消抖while (GPIO_ReadInputDataBit(KEY_GPIO_PORT, KEY2_GPIO_PIN) == 0);//等待按键松手Delay_ms(20);//延时消抖KeyNum = 2;//置键码为2}return KeyNum;//返回键码值，如果没有按键按下，所有if都不成立，则键码为默认值0}</code></pre><p>bsp_can.h</p><pre><code class="language-cpp">#ifndef __BSP_CAN_H#define __BSP_CAN_H#include "stm32f10x.h"void BSP_CAN_Init(void);void BSP_CAN_Transmit(uint32_t Device_ID, uint8_t Length, uint8_t *Data);uint8_t BSP_CAN_ReceiveFlag(void);void BSP_CAN_Receive(uint32_t *Device_ID, uint8_t *Length, uint8_t *Data);#endif //__BSP_CAN_H</code></pre><p>bsp_can.c</p><pre><code class="language-cpp">#include "bsp_can.h"void BSP_CAN_Init(void){RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN1, ENABLE);GPIO_InitTypeDef GPIO_InitStructure;GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12; //PA12 CAN_TXGPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;GPIO_Init(GPIOA, &amp;GPIO_InitStructure);GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11; //PA11 CAN_RXGPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;GPIO_Init(GPIOA, &amp;GPIO_InitStructure);//CAN 基本配置CAN_InitTypeDef CAN_InitStructure;CAN_InitStructure.CAN_ABOM = DISABLE;// 配置CAN自动离线管理，使能后当错误计数器恢复正常时会自动退出离线状态CAN_InitStructure.CAN_AWUM = DISABLE;// 配置CAN自动唤醒模式，使能后接收到有效帧时自动从睡眠模式唤醒CAN_InitStructure.CAN_BS1 = CAN_BS1_2tq;// 配置位时序段1，取值范围CAN_BS1_1tq~CAN_BS1_16tq，影响采样点位置CAN_InitStructure.CAN_BS2 = CAN_BS2_3tq;// 配置位时序段2，取值范围CAN_BS2_1tq~CAN_BS2_8tq，影响位时间长度CAN_InitStructure.CAN_Mode = CAN_Mode_Normal;// 配置CAN工作模式，可选正常模式、静默模式、回环模式、静默回环模式CAN_InitStructure.CAN_NART = DISABLE;// 配置非自动重传模式，使能后发送失败不会自动重传CAN_InitStructure.CAN_Prescaler = 48;// 配置位时序分频器，用于设置CAN时钟周期，实际波特率=APB1时钟/(CAN_Prescaler*(1+CAN_BS1+CAN_BS2))CAN_InitStructure.CAN_RFLM = DISABLE;// 配置接收FIFO锁定模式，使能后FIFO溢出时不会覆盖旧消息CAN_InitStructure.CAN_SJW = CAN_SJW_2tq;// 配置同步跳转宽度，取值范围CAN_SJW_1tq~CAN_SJW_4tq，决定重新同步时允许的最大跳变宽度CAN_InitStructure.CAN_TTCM = DISABLE;// 配置时间触发通信模式，使能后支持按时间间隔发送消息CAN_InitStructure.CAN_TXFP = DISABLE;// 配置发送FIFO优先级，使能后按ID优先级而非请求顺序发送CAN_Init(CAN1, &amp;CAN_InitStructure);//CAN 过滤器配置CAN_FilterInitTypeDef CAN_FilterInitStructure;CAN_FilterInitStructure.CAN_FilterNumber = 0;// 配置过滤器编号，范围0~13（STM32F1系列）或0~27（STM32F4系列）CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0000;// 配置过滤器ID的高16位（对于标准帧ID，使用高11位；扩展帧使用高16位）CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;// 配置过滤器ID的低16位（仅用于扩展帧ID的剩余18位）CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x0000;// 配置过滤器掩码的高16位（对应ID高16位的屏蔽位，1表示必须匹配，0表示忽略）CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x0000;// 配置过滤器掩码的低16位（对应ID低16位的屏蔽位）CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_32bit;// 配置过滤器位宽，可选32位（可过滤1个扩展帧或2个标准帧）或16位（仅用于标准帧且过滤两个不同的标准帧 ID）CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask;// 配置过滤器工作模式，可选屏蔽/掩码模式（ID+Mask组合过滤）或列表模式（精确匹配列表中的ID）CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_Filter_FIFO0;// 配置匹配的报文存入的FIFO，可选FIFO0或FIFO1CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;// 使能当前过滤器CAN_FilterInit(&amp;CAN_FilterInitStructure);}void BSP_CAN_Transmit(uint32_t Device_ID, uint8_t Length, uint8_t *Data){CanTxMsg CAN_TX_Message;// 配置数据长度码(DLC)，取值0~8，表示数据段的字节数CAN_TX_Message.DLC = Length;// 配置扩展帧ID(29位)，但由于下面设置了标准帧模式，此值无效CAN_TX_Message.ExtId = Device_ID;// 配置标识符类型为标准帧(11位ID)，忽略ExtId字段CAN_TX_Message.IDE = CAN_Id_Standard;// 配置帧类型为数据帧，而非远程/遥控帧(远程/遥控帧用于请求数据)CAN_TX_Message.RTR = CAN_RTR_Data;// 配置标准帧ID(11位有效)，实际使用时会被自动扩展到16位CAN_TX_Message.StdId = Device_ID;// 将用户数据复制到CAN消息的数据段(最多8字节)for (uint8_t i = 0; i &lt; Length; i ++){CAN_TX_Message.Data[i] = Data[i];}uint8_t TransmitMailbox_Status = CAN_Transmit(CAN1, &amp;CAN_TX_Message);uint32_t Timeout = 0;while (CAN_TransmitStatus(CAN1, TransmitMailbox_Status) != CAN_TxStatus_Ok){Timeout ++;if (Timeout &gt; 100000){break;}}}uint8_t BSP_CAN_ReceiveFlag(void){//CAN_FIFO0 中有长度非0的数据就返回1if (CAN_MessagePending(CAN1, CAN_FIFO0) &gt; 0){return 1;}return 0;}void BSP_CAN_Receive(uint32_t *Device_ID, uint8_t *Length, uint8_t *Data){CanRxMsg CAN_RX_Message;CAN_Receive(CAN1, CAN_FIFO0, &amp;CAN_RX_Message);if (CAN_RX_Message.IDE == CAN_Id_Standard){*Device_ID = CAN_RX_Message.StdId;//向外部存储ID变量传接收到的标准帧ID值}else{*Device_ID = CAN_RX_Message.ExtId;//向外部存储ID变量传接收到的扩展帧ID值}if (CAN_RX_Message.RTR == CAN_RTR_Data){*Length = CAN_RX_Message.DLC;for (uint8_t i = 0; i &lt; *Length; i ++){Data[i] = CAN_RX_Message.Data[i];//将接收的数据段数据依次拷贝到数据存储区}}}</code></pre><p>&nbsp;main.c</p><pre><code class="language-cpp">#include "stm32f10x.h"                  #include "Delay.h"#include "bsp_oled.h"#include "bsp_key.h"#include "bsp_can.h"uint32_t CAN_Device_ID = 0x222;//ID:0x000 ~ 0x7FFuint32_t Rx_ID;uint8_t RX_Length;uint8_t RX_Data[8];int main(void){uint32_t TX_ID = CAN_Device_ID;uint8_t TX_Length = 4;uint8_t TX_Data[8] = {0x00, 0x11, 0x22, 0x33};OLED_Init();Key_Init();BSP_CAN_Init();OLED_Clear();OLED_ShowString(1, 1, "TxID:");OLED_ShowHexNum(1, 6, TX_ID, 4);OLED_ShowString(2, 1, "RxID:");OLED_ShowString(3, 1, "Leng:");OLED_ShowString(4, 1, "Data:");while (1){uint8_t KeyNum = Key_GetNum();if(1 == KeyNum){TX_Data[0] ++;TX_Data[1] ++;TX_Data[2] ++;TX_Data[3] ++;BSP_CAN_Transmit(TX_ID, TX_Length, TX_Data);}if (BSP_CAN_ReceiveFlag()){BSP_CAN_Receive(&amp;Rx_ID, &amp;RX_Length, RX_Data);//读取已有数据的队列OLED_ShowHexNum(2, 6, Rx_ID, 4);OLED_ShowHexNum(3, 6, RX_Length, 1);OLED_ShowHexNum(4, 6, RX_Data[0], 2);OLED_ShowHexNum(4, 9, RX_Data[1], 2);OLED_ShowHexNum(4, 12, RX_Data[2], 2);OLED_ShowHexNum(4, 15, RX_Data[3], 2);}}}</code></pre><h2>（二）基于STM32F103VET6+CubeMX HAL库的CAN设备三的程序编写</h2><h3>1.配置RCC</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/563cf1609b6c41169455bbf35719d0d7.png"></p><h3>2.开启SWD</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/15a503bef8e2430a955107c9f1fc47e1.png"></p><h3>3.配置CAN</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/685e37bdc0f64af6b1d062900199762b.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/33de648e7fc441a2840f2a4d382a3a14.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/461a9f98d9714d25ae22fe06725bd97e.png"></p><h3>4.配置PA0 GPIO下拉输入作为按键1，PB8/9配置为GPIO推挽输出使用模拟IIC</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/6e48a21ef4f04d959b617c28c7c2320a.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/0ec9705365ec4803ae2f2d188da4393b.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/f993a41ce5564c8db3df11038a40e2a7.png"></p><h3>5.配置时钟树</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/5ad1a95e266e4b76bd47264680a3d49b.png"></p><h3>6.工程配置</h3><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/45470c8a1d094218893081cdf712e54d.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/6a155a720df04dbd880c64e4925a600a.png"></p><h3>7.代码编写</h3><pre><code class="language-cpp">//部分APIHAL_CAN_Start    //开启CAN通讯HAL_CAN_Stop    //关闭CAN通讯HAL_CAN_RequestSleep    //尝试进入休眠模式HAL_CAN_WakeUp    //从休眠模式中唤醒HAL_CAN_IsSleepActive    //检查是否成功进入休眠模式HAL_CAN_AddTxMessage    //向 Tx 邮箱中增加一个消息,并且激活对应的传输请求HAL_CAN_AbortTxRequest    //请求中断传输HAL_CAN_IsTxMessagePending    //检查是否有传输请求在指定的 Tx 邮箱上等待HAL_CAN_GetRxMessage    //从Rx FIFO 收取一个 CAN 帧</code></pre><p>bsp_key.h</p><pre><code class="language-cpp">#ifndef __BSP_KEY_H#define __BSP_KEY_H#include "stm32f1xx_hal.h"uint8_t KEY_GetNum(void);#endif</code></pre><p>bsp_key.c</p><pre><code class="language-cpp">#include "bsp_key.h"uint8_t KEY_GetNum(void){uint8_t Key_Num = 0;if(HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0) == 1){HAL_Delay(20);while(HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0) == 1);HAL_Delay(8);Key_Num = 1;}return Key_Num;}</code></pre><p>bsp_oled.h</p><pre><code class="language-cpp">#ifndef __OLED_H#define __OLED_H#include "stm32f1xx_hal.h"void OLED_Init(void);void OLED_Clear(void);void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char);void OLED_ShowString(uint8_t Line, uint8_t Column, char *String);void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length);void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length);#endif</code></pre><p>bsp_oled.c</p><pre><code class="language-cpp">#include "gpio.h"#include "OLED_Font.h"/*引脚配置*///#define OLED_W_SCL(x)GPIO_WriteBit(GPIOB, GPIO_Pin_8, (BitAction)(x))//#define OLED_W_SDA(x)GPIO_WriteBit(GPIOB, GPIO_Pin_9, (BitAction)(x))void OLED_W_SCL(GPIO_PinState x){HAL_GPIO_WritePin(GPIOB, GPIO_PIN_8,x);}void OLED_W_SDA(GPIO_PinState x){HAL_GPIO_WritePin(GPIOB, GPIO_PIN_9,x);}/*引脚初始化*/void OLED_I2C_Init(void){//    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);////GPIO_InitTypeDef GPIO_InitStructure;// GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_OD;//GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;//GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;// GPIO_Init(GPIOB, &amp;GPIO_InitStructure);//GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;// GPIO_Init(GPIOB, &amp;GPIO_InitStructure); MX_GPIO_Init();OLED_W_SCL(1);OLED_W_SDA(1);}/**  * @brief  I2C开始  * @param  无  * @retval 无  */void OLED_I2C_Start(void){OLED_W_SDA(1);OLED_W_SCL(1);OLED_W_SDA(0);OLED_W_SCL(0);}/**  * @brief  I2C停止  * @param  无  * @retval 无  */void OLED_I2C_Stop(void){OLED_W_SDA(0);OLED_W_SCL(1);OLED_W_SDA(1);}/**  * @brief  I2C发送一个字节  * @param  Byte 要发送的一个字节  * @retval 无  */void OLED_I2C_SendByte(uint8_t Byte){uint8_t i;for (i = 0; i &lt; 8; i++){OLED_W_SDA(Byte &amp; (0x80 &gt;&gt; i));OLED_W_SCL(1);OLED_W_SCL(0);}OLED_W_SCL(1);//额外的一个时钟，不处理应答信号OLED_W_SCL(0);}/**  * @brief  OLED写命令  * @param  Command 要写入的命令  * @retval 无  */void OLED_WriteCommand(uint8_t Command){OLED_I2C_Start();OLED_I2C_SendByte(0x78);//从机地址OLED_I2C_SendByte(0x00);//写命令OLED_I2C_SendByte(Command); OLED_I2C_Stop();}/**  * @brief  OLED写数据  * @param  Data 要写入的数据  * @retval 无  */void OLED_WriteData(uint8_t Data){OLED_I2C_Start();OLED_I2C_SendByte(0x78);//从机地址OLED_I2C_SendByte(0x40);//写数据OLED_I2C_SendByte(Data);OLED_I2C_Stop();}/**  * @brief  OLED设置光标位置  * @param  Y 以左上角为原点，向下方向的坐标，范围：0~7  * @param  X 以左上角为原点，向右方向的坐标，范围：0~127  * @retval 无  */void OLED_SetCursor(uint8_t Y, uint8_t X){OLED_WriteCommand(0xB0 | Y);//设置Y位置OLED_WriteCommand(0x10 | ((X &amp; 0xF0) &gt;&gt; 4));//设置X位置高4位OLED_WriteCommand(0x00 | (X &amp; 0x0F));//设置X位置低4位}/**  * @brief  OLED清屏  * @param  无  * @retval 无  */void OLED_Clear(void){  uint8_t i, j;for (j = 0; j &lt; 8; j++){OLED_SetCursor(j, 0);for(i = 0; i &lt; 128; i++){OLED_WriteData(0x00);}}}/**  * @brief  OLED显示一个字符  * @param  Line 行位置，范围：1~4  * @param  Column 列位置，范围：1~16  * @param  Char 要显示的一个字符，范围：ASCII可见字符  * @retval 无  */void OLED_ShowChar(uint8_t Line, uint8_t Column, char Char){      uint8_t i;OLED_SetCursor((Line - 1) * 2, (Column - 1) * 8);//设置光标位置在上半部分for (i = 0; i &lt; 8; i++){OLED_WriteData(OLED_F8x16[Char - ' '][i]);//显示上半部分内容}OLED_SetCursor((Line - 1) * 2 + 1, (Column - 1) * 8);//设置光标位置在下半部分for (i = 0; i &lt; 8; i++){OLED_WriteData(OLED_F8x16[Char - ' '][i + 8]);//显示下半部分内容}}/**  * @brief  OLED显示字符串  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  String 要显示的字符串，范围：ASCII可见字符  * @retval 无  */void OLED_ShowString(uint8_t Line, uint8_t Column, char *String){uint8_t i;for (i = 0; String[i] != '\0'; i++){OLED_ShowChar(Line, Column + i, String[i]);}}/**  * @brief  OLED次方函数  * @retval 返回值等于X的Y次方  */uint32_t OLED_Pow(uint32_t X, uint32_t Y){uint32_t Result = 1;while (Y--){Result *= X;}return Result;}/**  * @brief  OLED显示数字（十进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~4294967295  * @param  Length 要显示数字的长度，范围：1~10  * @retval 无  */void OLED_ShowNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i;for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i, Number / OLED_Pow(10, Length - i - 1) % 10 + '0');}}/**  * @brief  OLED显示数字（十进制，带符号数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：-2147483648~2147483647  * @param  Length 要显示数字的长度，范围：1~10  * @retval 无  */void OLED_ShowSignedNum(uint8_t Line, uint8_t Column, int32_t Number, uint8_t Length){uint8_t i;uint32_t Number1;if (Number &gt;= 0){OLED_ShowChar(Line, Column, '+');Number1 = Number;}else{OLED_ShowChar(Line, Column, '-');Number1 = -Number;}for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i + 1, Number1 / OLED_Pow(10, Length - i - 1) % 10 + '0');}}/**  * @brief  OLED显示数字（十六进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~0xFFFFFFFF  * @param  Length 要显示数字的长度，范围：1~8  * @retval 无  */void OLED_ShowHexNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i, SingleNumber;for (i = 0; i &lt; Length; i++){SingleNumber = Number / OLED_Pow(16, Length - i - 1) % 16;if (SingleNumber &lt; 10){OLED_ShowChar(Line, Column + i, SingleNumber + '0');}else{OLED_ShowChar(Line, Column + i, SingleNumber - 10 + 'A');}}}/**  * @brief  OLED显示数字（二进制，正数）  * @param  Line 起始行位置，范围：1~4  * @param  Column 起始列位置，范围：1~16  * @param  Number 要显示的数字，范围：0~1111 1111 1111 1111  * @param  Length 要显示数字的长度，范围：1~16  * @retval 无  */void OLED_ShowBinNum(uint8_t Line, uint8_t Column, uint32_t Number, uint8_t Length){uint8_t i;for (i = 0; i &lt; Length; i++){OLED_ShowChar(Line, Column + i, Number / OLED_Pow(2, Length - i - 1) % 2 + '0');}}/**  * @brief  OLED初始化  * @param  无  * @retval 无  */void OLED_Init(void){uint32_t i, j;for (i = 0; i &lt; 1000; i++)//上电延时{for (j = 0; j &lt; 1000; j++);}OLED_I2C_Init();//端口初始化OLED_WriteCommand(0xAE);//关闭显示OLED_WriteCommand(0xD5);//设置显示时钟分频比/振荡器频率OLED_WriteCommand(0x80);OLED_WriteCommand(0xA8);//设置多路复用率OLED_WriteCommand(0x3F);OLED_WriteCommand(0xD3);//设置显示偏移OLED_WriteCommand(0x00);OLED_WriteCommand(0x40);//设置显示开始行OLED_WriteCommand(0xA1);//设置左右方向，0xA1正常 0xA0左右反置OLED_WriteCommand(0xC8);//设置上下方向，0xC8正常 0xC0上下反置OLED_WriteCommand(0xDA);//设置COM引脚硬件配置OLED_WriteCommand(0x12);OLED_WriteCommand(0x81);//设置对比度控制OLED_WriteCommand(0xCF);OLED_WriteCommand(0xD9);//设置预充电周期OLED_WriteCommand(0xF1);OLED_WriteCommand(0xDB);//设置VCOMH取消选择级别OLED_WriteCommand(0x30);OLED_WriteCommand(0xA4);//设置整个显示打开/关闭OLED_WriteCommand(0xA6);//设置正常/倒转显示OLED_WriteCommand(0x8D);//设置充电泵OLED_WriteCommand(0x14);OLED_WriteCommand(0xAF);//开启显示OLED_Clear();//OLED清屏}</code></pre><p>bsp_can.h</p><pre><code class="language-cpp">#ifndef __BSP_CAN_H#define __BSP_CAN_H#include "stm32f1xx_hal.h"void BSP_CAN_Filter_Config(void);void BSP_CAN_Transmit(CAN_HandleTypeDef* hcan, uint32_t Device_ID, uint8_t Length, uint8_t *Data);uint8_t BSP_CAN_ReceiveFlag(CAN_HandleTypeDef* hcan);void BSP_CAN_Receive(CAN_HandleTypeDef* hcan, uint32_t *Device_ID, uint8_t *Length, uint8_t *Data);#endif</code></pre><p>bsp_can.c</p><pre><code class="language-cpp">#include "bsp_can.h"#include "can.h"//由图形化配置了CAN的基础功能//配置过滤器void BSP_CAN_Filter_Config(void){    CAN_FilterTypeDef  sFilterConfig;        // 配置CAN过滤器0的基本参数sFilterConfig.FilterBank = 0;      // 设置过滤器编号为0（范围0-27）// 配置过滤器工作模式为标识符屏蔽模式sFilterConfig.FilterMode = CAN_FILTERMODE_IDMASK;  // 屏蔽模式：使用ID+MASK组合过滤// 配置过滤器位宽为32位sFilterConfig.FilterScale = CAN_FILTERSCALE_32BIT;  // 32位宽过滤器配置// 配置32位ID值（标准帧ID扩展到32位或扩展帧ID）sFilterConfig.FilterIdHigh = 0x0000;         // 32位ID的高16位sFilterConfig.FilterIdLow = 0x0000;          // 32位ID的低16位// 配置32位屏蔽码（对应位为1时表示必须匹配ID，为0时表示忽略该位）sFilterConfig.FilterMaskIdHigh = 0x0000;      // 32位MASK的高16位sFilterConfig.FilterMaskIdLow = 0x0000;       // 32位MASK的低16位// 配置匹配的报文存入RX FIFO 0sFilterConfig.FilterFIFOAssignment = CAN_RX_FIFO0; // 过滤器0关联到FIFO0// 激活此过滤器配置sFilterConfig.FilterActivation = ENABLE;           // 激活滤波器0// 配置双CAN模式下从CAN的过滤器起始编号//主 CAN 使用 0 至 7 号过滤器组（共 8 个）。//从 CAN 使用 8 至 27 号过滤器组（共 20 个）。sFilterConfig.SlaveStartFilterBank = 14;           // 从CAN使用过滤器14-27        //过滤器配置 //初始化过滤器    if (HAL_CAN_ConfigFilter(&amp;hcan, &amp;sFilterConfig) != HAL_OK)    {        while(1){}// Error_Handler();    }    //启动CAN外围设备    if (HAL_CAN_Start(&amp;hcan) != HAL_OK)    {        while(1){}// Error_Handler();    }          //激活可以RX通知，开启接受邮邮箱0挂起中断    if (HAL_CAN_ActivateNotification(&amp;hcan, CAN_IT_RX_FIFO0_MSG_PENDING) != HAL_OK)    {        while(1){}// Error_Handler();    }}void BSP_CAN_Transmit(CAN_HandleTypeDef* hcan, uint32_t Device_ID, uint8_t Length, uint8_t *Data){    CAN_TxHeaderTypeDef CAN_TxHeader;    uint32_t TxMailbox;//用于存储硬件分配的发送邮箱编号    // 配置CAN发送帧参数    CAN_TxHeader.StdId = Device_ID;            // 标准帧ID (11位)    CAN_TxHeader.ExtId = 0;                    // 扩展帧ID (29位，此处不使用)    CAN_TxHeader.IDE = CAN_ID_STD;             // 标准帧模式    CAN_TxHeader.RTR = CAN_RTR_DATA;           // 数据帧类型    CAN_TxHeader.DLC = Length;                 // 数据长度码(0-8字节)    CAN_TxHeader.TransmitGlobalTime = DISABLE; // 禁用时间戳功能    // 尝试发送CAN消息并获取邮箱号    if (HAL_CAN_AddTxMessage(hcan, &amp;CAN_TxHeader, Data, &amp;TxMailbox) != HAL_OK)    {        // 发送请求失败处理        Error_Handler();    }        // 等待发送完成或超时    uint32_t Timeout = 100000;    while (HAL_CAN_IsTxMessagePending(hcan, TxMailbox) &amp;&amp; (Timeout-- &gt; 0))    {        // 可添加低功耗等待逻辑或喂狗操作    }        if (Timeout == 0)    {        // 发送超时处理        Error_Handler();    }}uint8_t BSP_CAN_ReceiveFlag(CAN_HandleTypeDef* hcan){    // 检查CAN_FIFO0中待处理的消息数量    uint32_t pendingMessages = HAL_CAN_GetRxFifoFillLevel(hcan, CAN_RX_FIFO0);        // 如果有消息等待处理，返回1，否则返回0    return (pendingMessages &gt; 0) ? 1 : 0;}void BSP_CAN_Receive(CAN_HandleTypeDef* hcan, uint32_t *Device_ID, uint8_t *Length, uint8_t *Data){    CAN_RxHeaderTypeDef CAN_RxHeader;    uint8_t CAN_RxData[8];        // 从FIFO0接收CAN消息    if (HAL_CAN_GetRxMessage(hcan, CAN_RX_FIFO0, &amp;CAN_RxHeader, CAN_RxData) == HAL_OK)    {        // 根据帧类型提取ID        if (CAN_RxHeader.IDE == CAN_ID_STD)        {            *Device_ID = CAN_RxHeader.StdId;  // 标准帧ID (11位)        }        else        {            *Device_ID = CAN_RxHeader.ExtId;  // 扩展帧ID (29位)        }                // 仅处理数据帧（忽略远程帧）        if (CAN_RxHeader.RTR == CAN_RTR_DATA)        {            *Length = CAN_RxHeader.DLC;  // 获取数据长度                        // 复制数据到输出缓冲区（确保不超过DLC长度）            for (uint8_t i = 0; i &lt; *Length; i++)            {                Data[i] = CAN_RxData[i];            }        }    }    else    {        // 接收失败处理：可设置错误标志或返回错误码        *Length = 0;  // 标记无有效数据    }}</code></pre><p>main.c</p><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "can.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "bsp_key.h"#include "bsp_oled.h"#include "bsp_can.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV */uint32_t CAN_Device_ID = 0x333;//ID:0x000 ~ 0x7FFuint32_t Rx_ID;uint8_t RX_Length;uint8_t RX_Data[8];/* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */uint32_t TX_ID = CAN_Device_ID;uint8_t TX_Length = 4;uint8_t TX_Data[8] = {0x00, 0x11, 0x22, 0x33};  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  MX_GPIO_Init();  MX_CAN_Init();  /* USER CODE BEGIN 2 */OLED_Init();BSP_CAN_Filter_Config();OLED_Clear();OLED_ShowString(1, 1, "TxID:");OLED_ShowHexNum(1, 6, TX_ID, 4);OLED_ShowString(2, 1, "RxID:");OLED_ShowString(3, 1, "Leng:");OLED_ShowString(4, 1, "Data:");  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */  uint8_t KeyNum = KEY_GetNum();if(1 == KeyNum){TX_Data[0] ++;TX_Data[1] ++;TX_Data[2] ++;TX_Data[3] ++;BSP_CAN_Transmit(&amp;hcan, TX_ID, TX_Length, TX_Data);}if (BSP_CAN_ReceiveFlag(&amp;hcan)){BSP_CAN_Receive(&amp;hcan, &amp;Rx_ID, &amp;RX_Length, RX_Data);//读取已有数据的队列OLED_ShowHexNum(2, 6, Rx_ID, 4);OLED_ShowHexNum(3, 6, RX_Length, 1);OLED_ShowHexNum(4, 6, RX_Data[0], 2);OLED_ShowHexNum(4, 9, RX_Data[1], 2);OLED_ShowHexNum(4, 12, RX_Data[2], 2);OLED_ShowHexNum(4, 15, RX_Data[3], 2);}  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *//* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><h1>三、实验效果</h1><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/d7853b17300a44188ad0e237298a05f1.gif"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91CAN%E9%80%9A%E8%AE%AF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/df6e2b42601f4a3ea78139dc0f59aa9a.gif"></p><p>注：</p><p>（1）参考链接：<br />&nbsp; &nbsp; &nbsp; &nbsp;<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="42. CAN—通讯实验 — [野火]STM32库开发实战指南——基于野火霸道开发板 文档" href="https://doc.embedfire.com/mcu/stm32/f103badao/std/zh/latest/book/CAN.html#id12" title="42. CAN—通讯实验 — [野火]STM32库开发实战指南——基于野火霸道开发板 文档">42. CAN&mdash;通讯实验 &mdash; [野火]STM32库开发实战指南&mdash;&mdash;基于野火霸道开发板 文档</a></p><p>&nbsp; &nbsp; &nbsp; &nbsp;<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="CAN总线入门教程-全面细致 面包板教学 多机通信" href="https://www.bilibili.com/video/BV1vu4m1F7Gt/?spm_id_from=333.337.search-card.all.click&amp;vd_source=77379e487a8ecc7d4f9e65b8d9cd422d" title="CAN总线入门教程-全面细致 面包板教学 多机通信">CAN总线入门教程-全面细致 面包板教学 多机通信</a></p><p>（2）注意在CAN总线的连接，和CAN收发器的连接需要连接同一个5V电源和共地，即在同一条件下的差分信号传输。</p>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 单片机 嵌入式 CAN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】基于STM32F103C8T6标准库的工程模板创建（使用离线固件包纯手动创建）</title>
    <link href="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/"/>
    <url>/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 style="background-color:transparent">一、简介</h1><p>&nbsp; &nbsp; &nbsp; &nbsp;该文将展示STM32F103C8T6标准库的工程示例模板创建，但是，前提需要单片机入门的基础知识，提示这里不会展示如何安装Keil&nbsp;For ARM（MDK）和STM32F1系列的Keil固件包，这些将在其他文章进行阐述。</p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="STM32F1系列标准库源码下载链接" href="https://www.st.com.cn/zh/embedded-software/stsw-stm32054.html" title="STM32F1系列标准库源码下载链接">STM32F1系列标准库源码下载链接</a></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/88bbc5d4179c4e1fb742df2dff7f1012.png"></p><h1>二、工程创建</h1><h2>1.首先创建一个新的文件夹</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/511300645e3d4622b632b47971b7ce1c.png"></p><h2>2.在STM32_Example文件夹下建立以下文件夹</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/177859cc98334bdda480a56cdd86f4fd.png"></p><h2>3.然后将ST提供的F1系列的标准固件包的STM32F10x_StdPeriph_Driver外设源码文件夹整个复制到STM32_Example文件夹下，同时将STM32F10x_StdPeriph_Driver更名为Library</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/8c600719342746c69723bd3c22d873a9.png"></p><p>这个网页链接可以删掉</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/9d455a6014b248d0b7a84a39e4590593.png"></p><h2>4.将\STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\CoreSupport下的core_cm3.c/h文件复制到StartUp文件夹下，这里的core_cm3.c/h是STM32F1系列需要的内核支持文件，即内核是属于ARM的Cortex-M3架构</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/53556993d750424eb16eddbf0dbeb338.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/85011d3268b44c9ea169c2ca9a62487c.png"></p><h2>5.将\STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x文件夹下的这三个系统文件复制到StartUp文件夹下</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/618769dd358541dba6183a90976926ba.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/d90f4baebf4a4bd6bcba672926a23246.png"></p><h2>6.在嵌入式开发中，<code>.s</code>&nbsp;文件通常是用汇编语言编写的启动文件或底层初始化代码，其核心作用是<strong>建立硬件与高级语言（如 C）之间的桥梁</strong>，将\STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x\startup\arm的所有.s文件复制到StartUp文件夹下</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/24dcdc813bfc43cc8f3ca801de2d2ac0.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/f291fb845ec44399b6379134b143cdac.png"></p><h2>7.在ST给的例程中，即\STM32F10x_StdPeriph_Lib_V3.5.0\Project\STM32F10x_StdPeriph_Template文件夹下</h2><h2>main.c&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;stm32f10x_conf.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stm32f10x_it.c/h&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</h2><h2>四个文件复制到User文件夹下</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/61435a10fb6e4b07b5e8dadbdbfed139.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/5a0b90eaaeff4f26a84b0a74c3988383.png"></p><h2>8.文件移植完毕，就打开Keil创建工程，选择Project文件夹放Keil工程启动文件，命名并保存</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/a8a673df7cd849df91d6de3f84a8b2e1.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/c0de8b35c63b4d498ab76f44a59f4102.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/fad0e43712604b2b97bf6e19567db37b.png"></p><h2>9.选择MDK的对应芯片的支持包，选中STM32F103C8</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/776ef72c463b437289d2ade200b2fbb7.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/a5b4dc619beb40c59dc04bd19d6ef134.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/20d36068012448f1aa9cf4c21971a878.png"></p><p>这个是Keil自带的在线库配置工具，使用这个工具其实也可以配置标准库工程，但是，在这里我们是下载了离线的标准库来纯手动导入，那么就不使用这个工具了，直接点击OK关掉即可</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/58b7969c3a1b4e9e89d19f584a5a21d8.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/f89e6180468a4faab4a64952f68f867c.png"></p><p>以后启动该Keil工程就点击绿色可执行文件</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/d2271b8eab5b4a22ab3b2eebd32e80b8.png"></p><h2>10.点击红绿白彩色图标，创建我们的工程组结构</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/0ae2c4af76b449beac63e78f25e23ed1.png"></p><p>点红色的X可以删掉默认的组</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/3c361483896348ca8a4baad8eda22c9b.png"></p><p>建立4个组</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/978b846379394aafa1372a5f8be17f9f.png"></p><h2>11.选中中间的各组，点击ADD Files导入标准库文件</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/94b7ae1f364d4a899f09f8f2833fb275.jpeg"></p><p>StartUp</p><p>添加3个文件，一般是要.c文件，和.s文件，.h头文件在后面配置文件路径后编译器可以自行找到，除非需要改动.h头文件就导入到工程里</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/d2b8ce138cb54569a9a61f6273059c23.png"></p><p>Library</p><p>需要所有的外设源文件，或者按自己的需求导入</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/7bd57c867f3c438bbfe7d22357a752c4.png"></p><p>User</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/7061142f0b6542d0bf3caab5509e1db0.png"></p><p>BSP</p><p>有些习惯写Hardware，但是作用都一样，主要存放用户自己写的函数和一些外设（如温湿度模块）的驱动文件</p><h2>12.点击有些人常说的&ldquo;魔法棒&rdquo;，配置工程的详细设置</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/cf5622a7fa4642b183decd16c571de8b.jpeg"></p><p>C/C++</p><p>Define这里添加一下宏&nbsp;USE_STDPERIPH_DRIVER</p><p>优化等级最好选0，有些时候优化等级太高会出现一些问题</p><p>勾选C99，支持的C语言语法更丰富</p><p>最重要的就是最后一个框添加那些文件的具体路径，但是有些人会看到正点原子的包含头文件的方法写的是相对路径，如果以后那种遇到但是有问题就可以使用Keil的includepaths来添加文件</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/6c5ff09842ab4c01a5a67904fc9c269e.jpeg"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/fc4df9b47cfb471b8330473712c42e93.png"></p><p>Debug</p><p>这里主要选择下载/烧写方式</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/78b78760843a47f597995af87de6bb89.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/97782ffff72e427e9848e196c55c39b9.png"></p><p>这里点击setting后选择下载地址范围（一般是芯片自带默认配置），下载算法和下载模式（SW/JTAG），还有下载完成软件复位</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/fe8e814c8d744266b3e09ad1e0e34f2d.jpeg"></p><h2>13.除了汇编启动文件，main.c的main函数就是我们编写代码后的正式入口了，把这里移植过来的main.c里的东西删完</h2><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/3ba19758f3c943f88eed0647c1765bca.png"></p><p>main.c</p><pre><code class="language-cpp">#include "stm32f10x.h"                  // Device headerint main(void){RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);GPIO_InitTypeDef GPIO_InitStructure;GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;GPIO_Init(GPIOC, &amp;GPIO_InitStructure);GPIO_SetBits(GPIOC, GPIO_Pin_13);while(1){GPIO_SetBits(GPIOC, GPIO_Pin_13);        //空循环当时间间隙使用，观察STM32F103C8T6最小系统开发板的板载LED（PC13）闪烁效果for(int i = 0 ;i &lt; 3000;i++){for(int j = 0 ;j &lt; 200;j++){}}GPIO_ResetBits(GPIOC, GPIO_Pin_13);for(int i = 0 ;i &lt; 3000;i++){for(int j = 0 ;j &lt; 200;j++){}}}}</code></pre><p>在Keil中，单片机的main函数初始化后就会一直执行while（1）里的内容，同时还要求每个.c/h文件最后必须有一行空行</p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/1bd7c313e04f42f8b3bb959299d1eae7.png"></p><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/04f3a36fff29487dbc0a0a001db51ef9.png"></p><h1>三、实验效果</h1><p><img src="/2025/07/04/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32F103C8T6%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%EF%BC%88%E4%BD%BF%E7%94%A8%E7%A6%BB%E7%BA%BF%E5%9B%BA%E4%BB%B6%E5%8C%85%E7%BA%AF%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%EF%BC%89/bbcc643a996248ad81a67fae91d53021.gif"></p>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 单片机 嵌入式 Keil 标准库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【RT-Thread】基于RT-Thread Studio开发环境的RT-Thread多任务程序</title>
    <link href="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/"/>
    <url>/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1><strong>一、简介</strong></h1><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="RT-Thread Studio官网下载链接" href="https://www.rt-thread.org/studio.html" title="RT-Thread Studio官网下载链接">RT-Thread Studio官网下载链接</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RT-Thread Studio 主要包括工程创建和管理，代码编辑，SDK管理，RT-Thread配置，构建配置，调试配置，程序下载和调试等功能，结合图形化配置系统以及软件包和组件资源，减少重复工作，提高开发效率。</p><ul><li>社区版本永久免费</li><li>支持主流 C/C++ 语言开发</li><li>强大的代码编辑和重构功能</li><li>SDK 管理器支持在线下载更新 RT-Thread 最新源码包</li><li>简单易用的工程创建向导，快速验证原型</li><li>全新图形化配置系统，同时支持架构图和树形图配置</li><li>软件包市场提供丰富的可用软件包资源</li><li>丰富的调试功能，快速查看和跟踪定位代码问题</li></ul><h1><strong>二、工程创建</strong></h1><h2>1.首先打开RT-Thread Studio点击左上角的文件选项新建一个RT-Thread项目</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/d58a9fb8365b40e0bf5a3b3a6c2aa800.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/8ecc9da92cea45858a934c6f09b81cc2.png"></p><h2>2. 对应自己的实际硬件配置</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/d994bd13a9884d238bb6a9fe8832f4a3.png"></p><h2>3.生成后编译一下</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/d837dcc921bd427980568a3ab4f64be0.png"></p><h2>4.然后开始进行实现3个Led灯光闪烁任务，打开资源管理器的CubeMX进行我们想要的配置</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/0521aa4a69e74c75b3ccad16c60f4740.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/17a5d7ddcbff4026a3f3b01b72c2e2da.png"></p><h2>5.开启外部高速时钟</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/2003f30aac7a443eacff25710ae765ca.jpeg"></p><h2>6.开启SWD</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/516dc31ec360451185799a0f76f04202.png"></p><h2>7.开启PB0、PB1、PB5三个GPIO设置为输出高电平，使其熄灭灯光</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/51bdbce901964cb1878594a3d4e7ad2f.png"></p><h2>8.开启串口1，因为之前工程创建时选择了串口1后是RT-Thread帮助初始化的，但是现在会用到CubeMX生成配置，之前的会被弱化并以CubeMX的串口1配置为准</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/ab9ce1b7b99a4479854897554ff8f058.png"></p><p>如果没有开启CubeMX的串口1，就会报错</p><pre><code class="language-cpp">//串口报错../drivers/drv_usart.c:94:5: error: unknown type name 'UART_HandleTypeDef'     UART_HandleTypeDef handle;     ^../drivers/drv_usart.c: In function 'stm32_configure':../drivers/drv_usart.c:502:17: error: request for member 'Instance' in something not a structure or union     uart-&gt;handle.Instance          = uart-&gt;config-&gt;Instance;                 ^../drivers/drv_usart.c:503:17: error: request for member 'Init' in something not a structure or union     uart-&gt;handle.Init.BaudRate     = cfg-&gt;baud_rate;                 ^../drivers/drv_usart.c:504:17: error: request for member 'Init' in something not a structure or union     uart-&gt;handle.Init.HwFlowCtl    = UART_HWCONTROL_NONE;                 ^../drivers/drv_usart.c:504:38: error: 'UART_HWCONTROL_NONE' undeclared (first use in this function)     uart-&gt;handle.Init.HwFlowCtl    = UART_HWCONTROL_NONE;                                      ^../drivers/drv_usart.c:504:38: note: each undeclared identifier is reported only once for each function it appears in../drivers/drv_usart.c:505:17: error: request for member 'Init' in something not a structure or union     uart-&gt;handle.Init.Mode         = UART_MODE_TX_RX;                 ^../drivers/drv_usart.c:505:38: error: 'UART_MODE_TX_RX' undeclared (first use in this function)     uart-&gt;handle.Init.Mode         = UART_MODE_TX_RX;                                      ^../drivers/drv_usart.c:506:17: error: request for member 'Init' in something not a structure or union     uart-&gt;handle.Init.OverSampling = UART_OVERSAMPLING_16;                 ^../drivers/drv_usart.c:506:38: error: 'UART_OVERSAMPLING_16' undeclared (first use in this function)     uart-&gt;handle.Init.OverSampling = UART_OVERSAMPLING_16;                                      ^../drivers/drv_usart.c:510:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.WordLength = UART_WORDLENGTH_8B;                     ^../drivers/drv_usart.c:510:40: error: 'UART_WORDLENGTH_8B' undeclared (first use in this function)         uart-&gt;handle.Init.WordLength = UART_WORDLENGTH_8B;                                        ^../drivers/drv_usart.c:513:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.WordLength = UART_WORDLENGTH_9B;                     ^../drivers/drv_usart.c:513:40: error: 'UART_WORDLENGTH_9B' undeclared (first use in this function)         uart-&gt;handle.Init.WordLength = UART_WORDLENGTH_9B;                                        ^../drivers/drv_usart.c:516:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.WordLength = UART_WORDLENGTH_8B;                     ^../drivers/drv_usart.c:522:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.StopBits   = UART_STOPBITS_1;                     ^../drivers/drv_usart.c:522:40: error: 'UART_STOPBITS_1' undeclared (first use in this function)         uart-&gt;handle.Init.StopBits   = UART_STOPBITS_1;                                        ^../drivers/drv_usart.c:525:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.StopBits   = UART_STOPBITS_2;                     ^../drivers/drv_usart.c:525:40: error: 'UART_STOPBITS_2' undeclared (first use in this function)         uart-&gt;handle.Init.StopBits   = UART_STOPBITS_2;                                        ^../drivers/drv_usart.c:528:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.StopBits   = UART_STOPBITS_1;                     ^../drivers/drv_usart.c:534:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.Parity     = UART_PARITY_NONE;                     ^../drivers/drv_usart.c:534:40: error: 'UART_PARITY_NONE' undeclared (first use in this function)         uart-&gt;handle.Init.Parity     = UART_PARITY_NONE;                                        ^../drivers/drv_usart.c:537:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.Parity     = UART_PARITY_ODD;                     ^../drivers/drv_usart.c:537:40: error: 'UART_PARITY_ODD' undeclared (first use in this function)         uart-&gt;handle.Init.Parity     = UART_PARITY_ODD;                                        ^../drivers/drv_usart.c:540:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.Parity     = UART_PARITY_EVEN;                     ^../drivers/drv_usart.c:540:40: error: 'UART_PARITY_EVEN' undeclared (first use in this function)         uart-&gt;handle.Init.Parity     = UART_PARITY_EVEN;                                        ^../drivers/drv_usart.c:543:21: error: request for member 'Init' in something not a structure or union         uart-&gt;handle.Init.Parity     = UART_PARITY_NONE;                     ^../drivers/drv_usart.c:547:9: warning: implicit declaration of function 'HAL_UART_Init' [-Wimplicit-function-declaration]     if (HAL_UART_Init(&amp;uart-&gt;handle) != HAL_OK)         ^../drivers/drv_usart.c: In function 'stm32_control':../drivers/drv_usart.c:572:9: warning: implicit declaration of function '__HAL_UART_DISABLE_IT' [-Wimplicit-function-declaration]         __HAL_UART_DISABLE_IT(&amp;(uart-&gt;handle), UART_IT_RXNE);         ^../drivers/drv_usart.c:572:48: error: 'UART_IT_RXNE' undeclared (first use in this function)         __HAL_UART_DISABLE_IT(&amp;(uart-&gt;handle), UART_IT_RXNE);                                                ^../drivers/drv_usart.c:579:9: warning: implicit declaration of function '__HAL_UART_ENABLE_IT' [-Wimplicit-function-declaration]         __HAL_UART_ENABLE_IT(&amp;(uart-&gt;handle), UART_IT_RXNE);         ^../drivers/drv_usart.c: In function 'stm32_putc':../drivers/drv_usart.c:46:41: warning: implicit declaration of function '__HAL_UART_CLEAR_FLAG' [-Wimplicit-function-declaration] #define UART_INSTANCE_CLEAR_FUNCTION    __HAL_UART_CLEAR_FLAG                                         ^../drivers/drv_usart.c:597:5: note: in expansion of macro 'UART_INSTANCE_CLEAR_FUNCTION'     UART_INSTANCE_CLEAR_FUNCTION(&amp;(uart-&gt;handle), UART_FLAG_TC);     ^../drivers/drv_usart.c:597:51: error: 'UART_FLAG_TC' undeclared (first use in this function)     UART_INSTANCE_CLEAR_FUNCTION(&amp;(uart-&gt;handle), UART_FLAG_TC);                                                   ^../drivers/drv_usart.c:603:17: error: request for member 'Instance' in something not a structure or union     uart-&gt;handle.Instance-&gt;DR = c;                 ^../drivers/drv_usart.c:605:12: warning: implicit declaration of function '__HAL_UART_GET_FLAG' [-Wimplicit-function-declaration]     while (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_TC) == RESET);            ^../drivers/drv_usart.c: In function 'stm32_getc':../drivers/drv_usart.c:617:46: error: 'UART_FLAG_RXNE' undeclared (first use in this function)     if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_RXNE) != RESET)                                              ^../drivers/drv_usart.c:624:26: error: request for member 'Instance' in something not a structure or union         ch = uart-&gt;handle.Instance-&gt;DR &amp; 0xff;                          ^../drivers/drv_usart.c: In function 'stm32_dma_transmit':../drivers/drv_usart.c:643:13: warning: implicit declaration of function 'HAL_UART_Transmit_DMA' [-Wimplicit-function-declaration]         if (HAL_UART_Transmit_DMA(&amp;uart-&gt;handle, buf, size) == HAL_OK)             ^../drivers/drv_usart.c: In function 'uart_isr':../drivers/drv_usart.c:681:47: error: 'UART_FLAG_RXNE' undeclared (first use in this function)     if ((__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_RXNE) != RESET) &amp;&amp;                                               ^../drivers/drv_usart.c:682:14: warning: implicit declaration of function '__HAL_UART_GET_IT_SOURCE' [-Wimplicit-function-declaration]             (__HAL_UART_GET_IT_SOURCE(&amp;(uart-&gt;handle), UART_IT_RXNE) != RESET))              ^../drivers/drv_usart.c:682:56: error: 'UART_IT_RXNE' undeclared (first use in this function)             (__HAL_UART_GET_IT_SOURCE(&amp;(uart-&gt;handle), UART_IT_RXNE) != RESET))                                                        ^../drivers/drv_usart.c:716:50: error: 'UART_FLAG_ORE' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_ORE) != RESET)                                                  ^../drivers/drv_usart.c:718:13: warning: implicit declaration of function '__HAL_UART_CLEAR_OREFLAG' [-Wimplicit-function-declaration]             __HAL_UART_CLEAR_OREFLAG(&amp;uart-&gt;handle);             ^../drivers/drv_usart.c:720:50: error: 'UART_FLAG_NE' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_NE) != RESET)                                                  ^../drivers/drv_usart.c:722:13: warning: implicit declaration of function '__HAL_UART_CLEAR_NEFLAG' [-Wimplicit-function-declaration]             __HAL_UART_CLEAR_NEFLAG(&amp;uart-&gt;handle);             ^../drivers/drv_usart.c:724:50: error: 'UART_FLAG_FE' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_FE) != RESET)                                                  ^../drivers/drv_usart.c:726:13: warning: implicit declaration of function '__HAL_UART_CLEAR_FEFLAG' [-Wimplicit-function-declaration]             __HAL_UART_CLEAR_FEFLAG(&amp;uart-&gt;handle);             ^../drivers/drv_usart.c:728:50: error: 'UART_FLAG_PE' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_PE) != RESET)                                                  ^../drivers/drv_usart.c:730:13: warning: implicit declaration of function '__HAL_UART_CLEAR_PEFLAG' [-Wimplicit-function-declaration]             __HAL_UART_CLEAR_PEFLAG(&amp;uart-&gt;handle);             ^../drivers/drv_usart.c:735:50: error: 'UART_FLAG_LBD' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_LBD) != RESET)                                                  ^../drivers/drv_usart.c:740:50: error: 'UART_FLAG_CTS' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_CTS) != RESET)                                                  ^../drivers/drv_usart.c:744:50: error: 'UART_FLAG_TXE' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_TXE) != RESET)                                                  ^../drivers/drv_usart.c:748:50: error: 'UART_FLAG_TC' undeclared (first use in this function)         if (__HAL_UART_GET_FLAG(&amp;(uart-&gt;handle), UART_FLAG_TC) != RESET)                                                  ^make: *** [drivers/subdir.mk:69: drivers/drv_usart.o] Error 1make: *** Waiting for unfinished jobs...."make -j20 all" terminated with exit code 2. Build might be incomplete.23:37:30 Build Failed. 43 errors, 11 warnings. (took 18s.401ms)</code></pre><h2>9.配置时钟树</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/4032b7f45f034181b2446f1a148098b4.png"></p><h2>10.工程配置</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/db7479002cd6478394a69e55dc55a0f4.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/f4c48ddd95c847b18a1cffecd0c00055.png"></p><h2>11.生成完毕就彻底关掉CubeMX才能进行其他操作，然后编译运行一下</h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/aad59b9856ea48b3a98d88e749c356f6.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/f49e96bba1fa43c8bb936b4a687dcc97.png"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;至此，工程创建与配置差不多了。</p><h1><strong>三、代码的编写</strong></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在进行代码的编写前，需提醒一下对于RT-Thread该操作系统的整个框架和运行流程要有一定的了解，如下图：</p><p>框架：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/850d8ab2c1a0474f9a088554b7c5a3ca.png"></p><p>启动流程：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/1f906e8a68a449ce9e5a8c5fcf2e5a85.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;主要是启动流程，我们可以翻看工程代码与该流程是对应的。</p><h2><strong>1.不用在applications下的main.c里再进行HAL_Init();</strong></h2><p>（1）首先，经常使用CubeMX的朋友来说，CubeMX的代码结构是非常熟悉的，但是，在这里有些许区别，RT-Thread Studio是将需要的CubeMX的代码配置嵌入RT-Thread当中配合使用。__WEAK将CubeMX的main函数入口弱化，以applications下的main.c为入口，同时注意到gpio.c和usart.c等几个选项是灰色的其实就是并未处于编译状态。</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/098a8dac9c474840b679b05aaa146810.jpeg"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/ebc30e71b7a34353a8583319d32dc775.png"></p><p>同时提一下如何显示未参与编译的文件，设置过滤器不要过滤掉排除编译的文件</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/72beb9616cf345eda6a922ce85e1752c.jpeg"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/b56b304eed6f476cac4e9ea9a68d3c97.jpeg"></p><p>（2）看似没有进行像HAL库的HAL_Init和MX_GPIO_Init操作</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/6ba09baa67fe483dab19489805b83e11.png"></p><p>但是,到board.c下双击hw_board_init并按下F3可跳转到其定义，就会看到一些熟悉的&ldquo;老朋友&rdquo;了</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/619f4856047e402580f60ce31772f9f8.png"></p><p>下面就是：</p><pre><code class="language-cpp">/* HAL_Init() function is called at the beginning of the program */    HAL_Init();    /* enable interrupt */    __set_PRIMASK(0);    /* System clock initialization */    clk_init(clock_src, clock_src_freq, clock_target_freq);    /* disbale interrupt */    __set_PRIMASK(1);    rt_hw_systick_init();    /* Pin driver initialization is open by default */#ifdef RT_USING_PIN    extern int rt_hw_pin_init(void);    rt_hw_pin_init();#endif    /* USART driver initialization is open by default */#ifdef RT_USING_SERIAL    extern int rt_hw_usart_init(void);    rt_hw_usart_init();#endif</code></pre><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/5cf823aae1d34b7b8e3e14f736dfa136.png"></p><p>比如：GPIO通过其是否开启或存在对应宏定义，则开启对应的GPIO时钟，但GPIO的详细配置仍需自己配置</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/438d488d90f84f7995de7f3f198b4018.png"></p><p>（3）同时，可查看components.c其中有启动流程关键节点，便于理解源码</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/67509f1b7b414055b0b8c6832dc63e95.png"></p><h2><strong>2.查看时钟配置是否正确，转到clk_init查看详细内容，发现就是CubeMX的时钟配置。</strong></h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/f1a90a715c434acda63fd844b6e5e6c2.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/919c3120dd8a4914bd1bd89fcaa90953.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/3441b0f9b0c040e898e574abae8f07ba.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/143962ad56e84987842d537f73182e5a.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/7a722e2e73ed463fb82701b382bb806e.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，配置检查无误。</p><h2><strong>3.在main.c里，可使用HAL库的GPIO配置方法或者使用RT-Thread封装的GPIO配置方法，在这里可以先测试一下，低电平点亮来RT-Thread试一试是否初始化了GPIO输出，结果是并没有。（笔者在这里研究过RT-Thread在board.c只是帮我们开启了GPIO的时钟，只是没有配置GPIO输入输出模式）</strong></h2><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/6a2e4ea8eab54ac29d3bee2ad4c9a41f.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/634ff4a51d334b3985c47518df335d8e.jpeg"></p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="官方文档PIN设备例程" href="https://www.rt-thread.org/document/site/#/rt-thread-version/rt-thread-nano/nano-ref/nano-device-pin/nano-device-pin" title="官方文档PIN设备例程">官方文档PIN设备例程</a></p><p>RT-Thread通过PIN设备对芯片的GPIO引脚进行管理，应用程序可以通过其提供的一组PIN设备管理接口来操作GPIO，PIN设备管理接口如表所示：</p><table border="1" cellpadding="1" cellspacing="1" style="width:500px"><tbody><tr><td>接口</td><td>描述</td></tr><tr><td>rt_pin_get()</td><td>获取引脚编号</td></tr><tr><td>rt_pin_mode()</td><td>设置引脚模式</td></tr><tr><td>rt_pin_write()</td><td>设置引脚电平</td></tr><tr><td>rt_pin_read()&nbsp;</td><td>读取引脚电平</td></tr><tr><td>rt_pin_attach_irq()&nbsp;</td><td>绑定引脚中断回调函数</td></tr><tr><td>rt_pin_irq_enable()&nbsp;</td><td>使能引脚中断</td></tr><tr><td>rt_pin_detach_irq()</td><td>脱离引脚中断回调函数</td></tr></tbody></table><p>然后就设置并开启GPIO，但是会出现错误，尝试了包含很多个头文件才解决</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/85a04f4364594aecbd90aa4f6c1fa8c8.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/56c36fd9850a4f0a965ebc2f617ab876.png"></p><p>解决办法（<a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="参考链接" href="https://www.freesion.com/article/3789939074/" title="参考链接">参考链接</a>）：</p><pre><code class="language-cpp">//添加头文件#include "drv_common.h"#include "rtdevice.h"</code></pre><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/981c75d224bc4c77a0a4e90840729c30.png"></p><p>那么，还可以用HAL库来初始化GPIO配置：</p><p>右击CubeMX文件夹下的gpio.c，将其加入编译中，同时，在main.c添加头文件gpio.h，使用现成的HAL库GPIO配置（或者自己写也没有问题），替代掉 rt_pin_mode()、rt_pin_write()。</p><h2><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/c3a0226e5c5c471ebefb41e9c8f0c4c7.jpeg" /><br /><img alt="" height="1016" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/8a8ec25a781b4b96a7dfe3cecb869355.png" width="1493" />&nbsp;<img alt="" height="960" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/29d6b32a61d64bf88a6bd87d173a78e8.jpeg" width="1280" />4.正式编写多任务/线程代码</h2><p><strong><code>rt_thread_init</code>和<code>rt_thread_create的区别：</code></strong><br /><img alt="" height="528" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/5545eb9426424f6082d51f8e45e91bc7.png" width="808" /><br />这里LED0和LED1使用静态创建任务/线程，LED2使用动态创建任务/线程。</p><p>main.c</p><pre><code class="language-cpp">/* * Copyright (c) 2006-2025, RT-Thread Development Team * * SPDX-License-Identifier: Apache-2.0 * * Change Logs: * Date           Author       Notes * 2025-06-30     RT-Thread    first version */#include &lt;rtthread.h&gt;#define DBG_TAG "main"#define DBG_LVL DBG_LOG#include &lt;rtdbg.h&gt;#include "stm32f1xx_hal.h"#include "board.h"#include "drv_common.h"#include "rtdevice.h" //包含了pin.h#include "gpio.h" //CubueMX HAL库//LED的PIN#define PIN_LED0_GREEN GET_PIN(B, 0)#define PIN_LED1_BLUE GET_PIN(B, 1)//#define PIN_LED2_RED GET_PIN(B, 5)//静态线程//led0static struct rt_thread Led0_thread;  /*定义线程控制块*/static rt_uint8_t rt_Led0_thread_stack[1024]; /* 定义线程栈 *///led1static struct rt_thread Led1_thread;  /*定义线程控制块*/static rt_uint8_t rt_Led1_thread_stack[1024]; /* 定义线程栈 *///动态线程//rt_thread_create 的返回值是 rt_thread_t（即 struct rt_thread*，一个指针）。//Led2_thread 被声明为 struct rt_thread（一个结构体变量，而非指针）。//直接将指针赋值给结构体变量会导致类型不匹配。static rt_thread_t Led2_thread;//定义Led0线程函数static void Led0_thread_entry(void* parameter){    rt_pin_mode(PIN_LED0_GREEN, PIN_MODE_OUTPUT);    while(1)    {        rt_pin_write(PIN_LED0_GREEN, RESET);        rt_thread_delay(400);        rt_pin_write(PIN_LED0_GREEN, SET);        rt_thread_delay(400);    }}//定义Led1线程函数static void Led1_thread_entry(void* parameter){    rt_pin_mode(PIN_LED1_BLUE, PIN_MODE_OUTPUT);    while(1)    {        rt_pin_write(PIN_LED1_BLUE, RESET);        rt_thread_delay(600);        rt_pin_write(PIN_LED1_BLUE, SET);        rt_thread_delay(600);    }}//定义Led2线程函数static void Led2_thread_entry(void* parameter){    MX_GPIO_Init();    while(1)    {        HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_5);        rt_thread_delay(800);    }}int main(void){    int count = 1;    //静态创建Led0线程    rt_thread_init(&amp;Led0_thread,                    /*线程控制块*/                    "Led0",                         /*线程名字*/                    Led0_thread_entry,              /*线程入口函数*/                    RT_NULL,                        /*线程入口函数参数*/                    &amp;rt_Led0_thread_stack[0],       /*线程栈起始地址*/                    sizeof(rt_Led0_thread_stack),   /*线程栈大小*/                    3,                              /*线程的优先级*/                    20);                            /*线程时间片*/    rt_thread_startup(&amp;Led0_thread);//启动Led0线程    //静态创建Led1线程    rt_thread_init(&amp;Led1_thread,                    /*线程控制块*/                    "Led1",                         /*线程名字*/                    Led1_thread_entry,              /*线程入口函数*/                    RT_NULL,                        /*线程入口函数参数*/                    &amp;rt_Led1_thread_stack[0],       /*线程栈起始地址*/                    sizeof(rt_Led1_thread_stack),   /*线程栈大小*/                    3,                              /*线程的优先级*/                    20);                            /*线程时间片*/    rt_thread_startup(&amp;Led1_thread);//启动Led1线程    //动态创建Led2线程    Led2_thread = rt_thread_create("Led2",                  /*线程名字*/                                   Led2_thread_entry,      /*线程入口函数*/                                   RT_NULL,                /*线程入口函数参数*/                                   1024,                   /*线程栈大小*/                                   3,                      /*线程的优先级*/                                   5);                      /*线程时间片*/    rt_thread_startup(Led2_thread);//启动Led2线程    while (count++)    {        //rt_thread_mdelay(1000);    }    return RT_EOK;}</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注意：如果出现了关于void Error_Handler(void);的冲突，就注释掉gpio.h的main.h头文件</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/84489d313217434bab8dbc3f7adb5dc0.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/ba61f55e31a544aa839ac7c38bb29bb6.png"></p><p>下载时，可开启软件复位：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/6e401227a8f34f0aa73275bda73b63c3.jpeg"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/8d91ad618d164b6fa726902d92381198.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，完成多任务/线程项目示例运行。</p><p>额外演示一下FinSH组件的使用：</p><p>（1）开启FinSH组件，点击RT-Thread Settings</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/e93d3b9c6dca4468af47ebd4e8231504.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/b4cd44fef7cf41019d7c8459030baac6.jpeg"></p><p>（2）开启串口1配置，跟gpio.c的添加差不多</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/9c5997b66c904cac849c84ce8f9958b2.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/48bc1e06f1ad4a04990fd94636efdb5f.png"></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/13e0c99ca2144988a19decc85efa8584.png"></p><p>（3）随便找一个串口助手连接串口1，我这里用的是XShell8建立的串口终端通信会话</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/51414394c7564593990384e35fee46ae.png"></p><p>也可以使用其他的串口助手。</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/acebf32771864e15992b76473947963b.png"></p><p>（4）编写自定义的 MSH命令，这里未创建后续任务是需要另外一个灯，以及减少空间的使用</p><pre><code class="language-cpp">/* * Copyright (c) 2006-2025, RT-Thread Development Team * * SPDX-License-Identifier: Apache-2.0 * * Change Logs: * Date           Author       Notes * 2025-06-30     RT-Thread    first version */#include &lt;rtthread.h&gt;#define DBG_TAG "main"#define DBG_LVL DBG_LOG#include &lt;rtdbg.h&gt;#include "stm32f1xx_hal.h"#include "board.h"#include "drv_common.h"#include "rtdevice.h" //包含了pin.h#include "gpio.h" //CubueMX HAL库#include "usart.h"//LED的PIN#define PIN_LED0_GREEN GET_PIN(B, 0)#define PIN_LED1_BLUE GET_PIN(B, 1)#define PIN_LED2_RED GET_PIN(B, 5)//静态线程//led0static struct rt_thread Led0_thread;  /*定义线程控制块*/ALIGN(RT_ALIGN_SIZE)static rt_uint8_t rt_Led0_thread_stack[210]; /* 定义线程栈 *///led1static struct rt_thread Led1_thread;  /*定义线程控制块*/ALIGN(RT_ALIGN_SIZE)static rt_uint8_t rt_Led1_thread_stack[210]; /* 定义线程栈 *///动态线程//rt_thread_create 的返回值是 rt_thread_t（即 struct rt_thread*，一个指针）。//Led2_thread 被声明为 struct rt_thread（一个结构体变量，而非指针）。//直接将指针赋值给结构体变量会导致类型不匹配。static rt_thread_t Led2_thread;//定义Led0线程函数static void Led0_thread_entry(void* parameter){    rt_pin_mode(PIN_LED0_GREEN, PIN_MODE_OUTPUT);    while(1)    {        rt_pin_write(PIN_LED0_GREEN, RESET);        rt_thread_delay(400);        rt_pin_write(PIN_LED0_GREEN, SET);        rt_thread_delay(400);    }}//定义Led1线程函数static void Led1_thread_entry(void* parameter){    rt_pin_mode(PIN_LED1_BLUE, PIN_MODE_OUTPUT);    while(1)    {        rt_pin_write(PIN_LED1_BLUE, RESET);        rt_thread_delay(600);        rt_pin_write(PIN_LED1_BLUE, SET);        rt_thread_delay(600);    }}//定义Led2线程函数static void Led2_thread_entry(void* parameter){    MX_GPIO_Init();    while(1)    {        HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_5);        rt_thread_delay(800);    }}//MSH 自定义uint8_t MSH_Led_Flag = 0;void Close_All_Led(void){    rt_kprintf("Close_All_Led function called!\n");//    rt_pin_mode(PIN_LED0_GREEN, PIN_MODE_OUTPUT);//    rt_pin_write(PIN_LED0_GREEN, PIN_HIGH);////    rt_pin_mode(PIN_LED1_BLUE, PIN_MODE_OUTPUT);//    rt_pin_write(PIN_LED1_BLUE, PIN_HIGH);////    rt_pin_mode(PIN_LED2_RED, PIN_MODE_OUTPUT);//    rt_pin_write(PIN_LED2_RED, PIN_LOW);    MX_GPIO_Init();    if(MSH_Led_Flag == 0)    {        MSH_Led_Flag=1;        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_RESET);    }else{        MSH_Led_Flag=0;        HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_SET);    }}MSH_CMD_EXPORT(Close_All_Led , say Close_All_Led to STM32);int main(void){    int count = 1;    MX_USART1_UART_Init();    //静态创建Led0线程    rt_thread_init(&amp;Led0_thread,                    /*线程控制块*/                    "Led0",                         /*线程名字*/                    Led0_thread_entry,              /*线程入口函数*/                    RT_NULL,                        /*线程入口函数参数*/                    &amp;rt_Led0_thread_stack[0],       /*线程栈起始地址*/                    sizeof(rt_Led0_thread_stack),   /*线程栈大小*/                    3,                              /*线程的优先级*/                    20);                            /*线程时间片*/    rt_thread_startup(&amp;Led0_thread);//启动Led0线程//    //静态创建Led1线程//    rt_thread_init(&amp;Led1_thread,                    /*线程控制块*///                    "Led1",                         /*线程名字*///                    Led1_thread_entry,              /*线程入口函数*///                    RT_NULL,                        /*线程入口函数参数*///                    &amp;rt_Led1_thread_stack[0],       /*线程栈起始地址*///                    sizeof(rt_Led1_thread_stack),   /*线程栈大小*///                    3,                              /*线程的优先级*///                    20);                            /*线程时间片*///    rt_thread_startup(&amp;Led1_thread);//启动Led1线程////    //动态创建Led2线程//    Led2_thread = rt_thread_create("Led2",                  /*线程名字*///                                   Led2_thread_entry,      /*线程入口函数*///                                   RT_NULL,                /*线程入口函数参数*///                                   210,                   /*线程栈大小*///                                   3,                      /*线程的优先级*///                                   5);                      /*线程时间片*///    rt_thread_startup(Led2_thread);//启动Led2线程    while (count++)    {        rt_thread_mdelay(1000);    }    return RT_EOK;}</code></pre><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/2c2f68c56c3c49dcb95109ad6e03db27.png"></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，FinSH组件成功开启并且自定义的MSH命令完成。</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/67a3282f096a41b2bf748e33e0c4e220.png">https://i-blog.csdnimg.cn/direct/67a3282f096a41b2bf748e33e0c4e220.png</a>“ width&#x3D;”1919” &#x2F;&gt;问题（1）：出现栈溢出，需要调整任务&#x2F;线程的栈大小，或是调整FinSH线程栈大小</p></p><pre><code class="language-cpp">\ | /- RT -     Thread Operating System / | \     3.1.5 build Jul  1 2025 2006 - 2020 Copyright by rt-thread teamwarning: Led0 stack is close to end of stack address.warning: Led1 stack is close to end of stack address.warning: Led2 stack is close to end of stack address.warning: Led0 stack is close to end of stack address.warning: Led1 stack is close to end of stack address.psr: 0x01000000r00: 0x20003284r01: 0x20001470r02: 0x20001470r03: 0x20003284r04: 0x00000001r05: 0xdeadbeefr06: 0xdeadbeefr07: 0x200014c8r08: 0xdeadbeefr09: 0xdeadbeefr10: 0xdeadbeefr11: 0xdeadbeefr12: 0x00000000 lr: 0x08003447 pc: 0x080030b0hard fault on thread: Led1thread pri  status      sp     stack size max used left tick  error------ ---  ------- ---------- ----------  ------  ---------- ---Led2     3  suspend 0x0a0000a6 0x0a0000be    23%   0x00000000 536875644Led1     3  suspend 0x000000a6 0x000000be    100%   0x00000011 000Led0     3  suspend 0x000000a6 0x000000be    87%   0x00000012 000tshell  20  ready   0x00000040 0x00001000    01%   0x0000000a 000tidle   31  ready   0x00000040 0x00000100    25%   0x00000020 000timer    4  suspend 0x00000078 0x00000200    23%   0x00000009 000main    10  ready   0x00000074 0x00000800    13%   0x00000004 000bus fault:SCB_CFSR_BFSR:0x04 IMPRECISERR</code></pre><p>问题（1）的解决方案：</p><p><img alt=)<p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/b01a223c3bad44578fdb3d527f494a17.png"></p><p>问题（2）：如果出现卡死，没有msh</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/6c5452930c5540ec9e9bf83285e77324.png"></p><p>问题（2）的解决方案：一定要在main函数的while里加入rt_thread_mdelay，因为main也是一个线程，需要不断运行。（这个问题找了好久才解决）</p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="参考链接" href="https://blog.csdn.net/f371666/article/details/119606360?spm=1001.2101.3001.6650.18&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-18-119606360-blog-143119336.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-18-119606360-blog-143119336.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=23" title="参考链接">参考链接</a></p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/69a5cb908ff8413692c065994baca4f4.png"></p><h1>三、实验效果演示</h1><p>普通实验效果：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/68b4653c152c46248a74fe00729fe3bc.gif"></p><p>Finsh组件使用效果：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/611dd22561bd4a18a67ea7c56b0459c1.gif"></p><h1>四、RT-Thread相关知识补充（后续更新持续中）</h1><h2>1.线程</h2><h3>（1）线程状态</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;线程运行的过程中，同一时间内只允许一个线程在处理器中运行，从运行的过程上划分，线程有多种不同的运行状态，如初始状态、挂起状态、就绪状态等。在 RT-Thread 中，线程包含五种状态，操作系统会自动根据它运行的情况来动态调整它的状态。RT-Thread 中线程的五种状态，如下表所示：</p><table><thead><tr><th><p>状态</p></th><th><p>描述</p></th></tr></thead><tbody><tr><td><p>初始状态</p></td><td><p>当线程刚开始创建还没开始运行时就处于初始状态；在初始状态下，线程不参与调度。此状态在 RT-Thread 中的宏定义为 RT_THREAD_INIT</p></td></tr><tr><td><p>就绪状态</p></td><td><p>在就绪状态下，线程按照优先级排队，等待被执行；一旦当前线程运行完毕让出处理器，操作系统会马上寻找最高优先级的就绪态线程运行。此状态在 RT-Thread 中的宏定义为 RT_THREAD_READY</p></td></tr><tr><td><p>运行状态</p></td><td><p>线程当前正在运行。在单核系统中，只有 rt_thread_self() 函数返回的线程处于运行状态；在多核系统中，可能就不止这一个线程处于运行状态。此状态在 RT-Thread 中的宏定义为 RT_THREAD_RUNNING</p></td></tr><tr><td><p>挂起状态</p></td><td><p>也称阻塞态。它可能因为资源不可用而挂起等待，或线程主动延时一段时间而挂起。在挂起状态下，线程不参与调度。此状态在 RT-Thread 中的宏定义为 RT_THREAD_SUSPEND</p></td></tr><tr><td><p>关闭状态</p></td><td><p>当线程运行结束时将处于关闭状态。关闭状态的线程不参与线程的调度。此状态在 RT-Thread 中的宏定义为 RT_THREAD_CLOSE</p></td></tr></tbody></table><h3 name="%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E5%88%87%E6%8D%A2">（2）线程状态切换</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RT-Thread 提供一系列的操作系统调用接口，使得线程的状态在这五个状态之间来回切换。几种状态间的转换关系如下图所示：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/70899c9fc35d447693946d877828659e.png"></p><p>调用rt_thread_create函数时，系统会从动态堆内存中分配一个线程句柄以及按照参数中指定的栈大小从动态堆内存中分配相应的空间。分配出来的栈空间是按照 rtconfig.h 中配置的 RT_ALIGN_SIZE 方式对齐。线程创建 rt_thread_create() 的参数和返回值见下图：</p><p><img src="/2025/07/01/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ERT-Thread%20Studio%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84RT-Thread%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F/2b3cf7dffe6d4265b727d375ff306938.png"></p><p><strong>示例项目链接：</strong></p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread." href="https://github.com/Molesidy/RT-Thread" title="Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread."><span class="link-card-box" contenteditable="false"><span class="link-title">Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread.</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://github.com/Molesidy/RT-Thread</span></span></a></p>]]></content>
    
    
    <categories>
      
      <category>RT-Thread学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机 嵌入式硬件 RT-Thread stm32 RTOS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【RT-Thread】基于STM32+HAL库的RT-Thread移植（纯手动）</title>
    <link href="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/"/>
    <url>/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1><strong>一、简介</strong></h1><p><a class="link-info has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="RT-Thread官网" href="https://www.rt-thread.org/" title="RT-Thread官网"><span class="link-card-box" contenteditable="false"><span class="link-title">RT-Thread官网</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://www.rt-thread.org/</span></span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;现在，市面上存在多种的嵌入式实时操作系统（RTOS），其中的RT-Thread 是由中国团队开发的开源嵌入式实时操作系统（RTOS），诞生于 2006 年，具有高可靠性、轻量级、易移植等特点，广泛应用于工业控制、消费电子、物联网等领域。</p><p>其特点：</p><h3>1.&nbsp;<strong>开源与社区支持</strong></h3><ul><li><strong>许可证</strong>：遵循 Apache 2.0 开源许可证，商业使用无需付费。</li><li><strong>社区活跃</strong>：国内最大的 RTOS 社区之一，提供丰富的文档、教程和示例代码。</li><li><strong>企业支持</strong>：得到华为、腾讯、ST 等厂商的支持，生态完善。</li></ul><h3>2.&nbsp;<strong>核心特性</strong></h3><ul><li><strong>高可靠性</strong>：支持线程优先级、抢占式调度，适用于对实时性要求高的场景。</li><li><strong>资源占用小</strong>：内核最小仅需 3KB ROM、1.2KB RAM，可裁剪性强。</li><li><strong>组件丰富</strong>：<ul><li><strong>设备驱动</strong>：支持 UART、SPI、I2C、USB 等常见外设。</li><li><strong>文件系统</strong>：支持 FatFS、LittleFS 等。</li><li><strong>网络协议栈</strong>：支持 TCP/IP、MQTT、HTTP 等。</li><li><strong>工具链</strong>：提供图形化配置工具 RT-Thread Studio。</li></ul></li></ul><h3>3.&nbsp;<strong>架构与生态</strong></h3><ul><li><strong>组件化设计</strong>：内核、设备驱动、中间件分离，方便集成第三方库。</li><li><strong>软件包管理</strong>：通过<code>pkgs</code>工具快速集成蓝牙、GUI、AI 等功能模块。</li><li><strong>支持多架构</strong>：ARM Cortex-M/R/A、MIPS、RISC-V 等，适配超 200 款开发板。</li></ul><h3>4.&nbsp;<strong>开发工具</strong></h3><ul><li><strong>RT-Thread Studio</strong>：基于 Eclipse 的一站式开发环境，提供图形化配置、调试等功能。</li><li><strong>Env 工具</strong>：基于命令行的配置工具，适合 Linux 用户。</li><li><strong>调试支持</strong>：集成 GDB、OpenOCD、PyOCD 等调试工具。</li></ul><p>&nbsp; &nbsp; &nbsp; &nbsp; 在这里我将说明为什么会推荐RT-Thread？因为该RTOS经过长久的发展至现在已经拥有了非常丰富的系统生态，并且拥有大量的用户支持。同时，RT-Thread拥有标准版、nano版、smart版等多个版本可对应不同的需求进行应用并且裁剪的自由度很大。尤其是RT-Thread拥有着极其丰富的组件、各种各样的软件包和对应各大厂商的开发板的BSP（板级支持包）。同时，已经有着专业的集成开发环境RT-Thread Studio极大地方便了用户的使用，我后续会介绍RT-Thread Studio。</p><p>获取RT-Thread nano 源码：</p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="rt-thread.org/download.html" href="https://www.rt-thread.org/download.html" title="rt-thread.org/download.html"><span class="link-card-box" contenteditable="false"><span class="link-title">rt-thread.org/download.html</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://www.rt-thread.org/download.html</span></span></a></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ffe1e39ada6f41efa58bcea553de6b02.png"></p><h1><strong>二、创建裸机项目示例</strong></h1><h2><strong>1.打开STM32CubeMX进行初始化3个GPIO用于点灯</strong></h2><p>RCC</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/36b058b650c542b6ad0869a046dcbe36.png"></p><p>SWD</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/654ed926269948e093f251e57a9bdad2.png"></p><p>GPIO</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/2004fcd17ad246479bc44620ebfa433b.png"></p><p>注：因为后面没有使用finsh组件就可不用开启串口。</p><h2><strong>2.时钟树配置</strong></h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c8af90fe82a34edfb827cf7796a30a56.png"></p><h2><strong>3.工程配置</strong></h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/3c575ac072f842edae12a9f73633f0ca.png"></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9486c2fcfe474674a702bb6adc2a72fe.png"></p><h1><strong>三、RT-Thread移植</strong></h1><h2>1.将解压后地RT-Tread源码复制到工程文件夹目录下</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/43cfa2d945824210ace15ffa88c379fc.png"></p><p>再新建一个文件夹RT_Thread</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/01371e0ed9a34681aed04e04542221d6.png"></p><h2>2.将\STM32_RT_Thread\rt-thread-3.1.5\bsp\stm32\stm32f103-fire-arbitrary下的rtconfig.h复制到RT_Thread下的文件夹config</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/3d86e5633cf14ac989a609267316c544.png"></p><h2>3.将\STM32_RT_Thread\rt-thread-3.1.5\bsp\stm32\stm32f103-fire-arbitrary\board下的board.c、board.h复制到RT_Thread下的文件夹board</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/614bff94c1264b93a70c3a682e4c489f.png"></p><h2>4.根据自己的实际硬件平台具有的内核架构选择，将\STM32_RT_Thread\rt-thread-3.1.5\libcpu\arm\cortex-m3下的context_rvds.S、cpuport.c复制到\STM32_RT_Thread\RT_Thread\libcpu\arm\cortex-m3</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/744c3fae39ff40198346c031ad3fa4b0.png"></p><h2>5.在KEIL里新建4个组别RT_Thread/config，RT_Thread/libcpu，RT_Thread/src，RT_Thread/board</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/9a33e21f4d504d2197fae9c657a187be.png"></p><h2>6.将\STM32_RT_Thread\rt-thread-3.1.5下的include文件夹整个复制到\STM32_RT_Thread\RT_Thread下</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/48a4c31743af4ecc8e54b7a5cc7c9ce5.png"></p><h2>7.将\STM32_RT_Thread\rt-thread-3.1.5的components整个复制到\STM32_RT_Thread\RT_Thread下</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/09fe6ecd5cfc4e5cbc64cb2a8dfc4c5d.png"></p><p>由于\STM32_RT_Thread\RT_Thread\components下的finsh需要注册串口设备，我们这里只移植精简版就把finsh组件删去</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/c791c2a46325491fb145e4956946221c.png"></p><h2>8.4个组对应添加文件</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/1a2675e08c91444393f3439ff95e7f08.png"></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/d5aa491d89764a16b6b4c7cf9e97860b.png"></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/a765d672aead41c3ad74e4e9a8b57953.png"></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/8949726455634aecb9a19330a3e194b4.png"></p><h2>9.添加对应路径</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/bb5704e6a3f842c298bedb18b9152913.png"></p><h2>10.注释掉#define RT_USING_FINSH，因为暂时不会用到finsh组件</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/2c5c0e8417a94347b24410b16d58b154.png"></p><h2>11.注释掉board.h的内容</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/28bb3dc6757e49d78273cdb62a68560f.png"></p><h2>12.因为有重定义，则注释掉PendSV_Handler，SysTick_Handler，&nbsp;HardFault_Handler</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/48e32cd9f6454b4eb6ae20e5f0525c91.png"></p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/858301fe746e4536a309708eedb9797d.png"></p><h2>13.本来RT-Thread已经定义了void SystemClock_Config(void)，这里注释掉board.c的SystemClock_Config，后面将使用CubeMX生成的SystemClock_Config</h2><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/ddeadef2d7204b46b887c3a930022a1d.png"></p><h2>14.编写board.c，board. h</h2><p>board.h</p><pre><code class="language-cpp">/* * Copyright (c) 2006-2021, RT-Thread Development Team * * SPDX-License-Identifier: Apache-2.0 * * Change Logs: * Date           Author       Notes * 2018-11-06     balanceTWK   first version */#ifndef __BOARD_H__#define __BOARD_H__//#include &lt;rtthread.h&gt;//#include &lt;stm32f1xx.h&gt;//#include "drv_common.h"//#include "drv_gpio.h"//#ifdef __cplusplus//extern "C" {//#endif///* Internal SRAM memory size[Kbytes] &lt;8-64&gt;, Default: 64*///#define STM32_SRAM_SIZE      64//#define STM32_SRAM_END       (0x20000000 + STM32_SRAM_SIZE * 1024)//#define STM32_FLASH_START_ADRESS     ((uint32_t)0x08000000)//#define STM32_FLASH_SIZE             (512 * 1024)//#define STM32_FLASH_END_ADDRESS      ((uint32_t)(STM32_FLASH_START_ADRESS + STM32_FLASH_SIZE))//#if defined(__CC_ARM) || defined(__CLANG_ARM)//extern int Image$$RW_IRAM1$$ZI$$Limit;//#define HEAP_BEGIN      ((void *)&amp;Image$$RW_IRAM1$$ZI$$Limit)//#elif __ICCARM__//#pragma section="CSTACK"//#define HEAP_BEGIN      (__segment_end("CSTACK"))//#else//extern int __bss_end;//#define HEAP_BEGIN      ((void *)&amp;__bss_end)//#endif//#define HEAP_END        STM32_SRAM_END//void SystemClock_Config(void);//#ifdef __cplusplus//}//#endif#include "stm32f1xx_hal.h"void rt_hw_board_init(void);void SysTick_Handler(void);#endif /* __BOARD_H__ */</code></pre><p>board.c</p><pre><code class="language-cpp">#include "board.h" #include &lt;rthw.h&gt;#include &lt;rtthread.h&gt;#include "main.h"#include "gpio.h"#include "stdio.h"#if defined(RT_USING_USER_MAIN) &amp;&amp; defined(RT_USING_HEAP)/* * Please modify RT_HEAP_SIZE if you enable RT_USING_HEAP * the RT_HEAP_SIZE max value = (sram size - ZI size), 1024 means 1024 bytes */#define RT_HEAP_SIZE (15*1024)static rt_uint8_t rt_heap[RT_HEAP_SIZE]; RT_WEAK void *rt_heap_begin_get(void){    return rt_heap;} RT_WEAK void *rt_heap_end_get(void){    return rt_heap + RT_HEAP_SIZE;}#endif void rt_os_tick_callback(void){    rt_interrupt_enter();        rt_tick_increase();     rt_interrupt_leave();} /** * This function will initial your board. */void rt_hw_board_init(void){/* 初始化 SysTick *///这一句是加入的extern void SystemClock_Config(void);SystemClock_Config();//下面放置硬件初始化MX_GPIO_Init();//高电平关闭灯光，初始化关闭便于观察HAL_GPIO_WritePin(GPIOB, GPIO_PIN_0, GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5, GPIO_PIN_SET);#ifdef RT_USING_COMPONENTS_INIT    rt_components_board_init();#endif #if defined(RT_USING_USER_MAIN) &amp;&amp; defined(RT_USING_HEAP)    rt_system_heap_init(rt_heap_begin_get(), rt_heap_end_get());#endif} #ifdef RT_USING_CONSOLE static int uart_init(void){//#error "TODO 2: Enable the hardware uart and config baudrate."    return 0;}INIT_BOARD_EXPORT(uart_init); void rt_hw_console_output(const char *str){//#error "TODO 3: Output the string 'str' through the uart."} #endifvoid SysTick_Handler(void){    /* 进入中断 */    rt_interrupt_enter();     /* 更新时基 */    rt_tick_increase();     /* 离开中断 */    rt_interrupt_leave();}</code></pre><p>&nbsp;在board.c中将进行初始化，且看RT-Thread启动流程。</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/6e29899cd28c49558331d4de2cd72ca6.png"></p><h2>15.编写main.c</h2><pre><code class="language-cpp">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "board.h"#include "rtthread.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//*定义线程控制块*/static struct rt_thread led0_thread;/* 定义线程控栈时要求 RT_ALIGN_SIZE 个字节对齐 */ALIGN(RT_ALIGN_SIZE)/* 定义线程栈 */static rt_uint8_t rt_led0_thread_stack[1024];/*定义线程控制块*/static struct rt_thread led1_thread;/* 定义线程控栈时要求 RT_ALIGN_SIZE 个字节对齐 */ALIGN(RT_ALIGN_SIZE)/* 定义线程栈 */static rt_uint8_t rt_led1_thread_stack[1024];/*定义线程控制块*/static struct rt_thread led2_thread;/* 定义线程控栈时要求 RT_ALIGN_SIZE 个字节对齐 */ALIGN(RT_ALIGN_SIZE)/* 定义线程栈 */static rt_uint8_t rt_led2_thread_stack[1024];/* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *///声明线程函数static void led0_thread_entry(void* parameter);static void led1_thread_entry(void* parameter);static void led2_thread_entry(void* parameter);/* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 *//** 开发板硬件初始化，RTT 系统初始化已经在 main 函数之前完成，* 即在 component.c 文件中的 rtthread_startup()函数中完成了。* 所以在 main 函数中，只需要创建线程和启动线程即可。*/  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. *///  HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock *///  SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals *///MX_GPIO_Init();  /* USER CODE BEGIN 2 */  //初始化线程rt_thread_init(&amp;led0_thread,/*线程控制块*/"led0",/*线程名字*/led0_thread_entry,/*线程入口函数*/RT_NULL,                /*线程入口函数参数*/&amp;rt_led0_thread_stack[0],/*线程栈起始地址*/sizeof(rt_led0_thread_stack),/*线程栈大小*/3,/*线程的优先级*/20);/*线程时间片*///启动线程rt_thread_startup(&amp;led0_thread);rt_thread_init(&amp;led1_thread,/*线程控制块*/"led1",/*线程名字*/led1_thread_entry,/*线程入口函数*/RT_NULL,                /*线程入口函数参数*/&amp;rt_led1_thread_stack[0],/*线程栈起始地址*/sizeof(rt_led1_thread_stack),/*线程栈大小*/3,/*线程的优先级*/20);/*线程时间片*///启动线程rt_thread_startup(&amp;led1_thread);rt_thread_init(&amp;led2_thread,/*线程控制块*/"led2",/*线程名字*/led2_thread_entry,/*线程入口函数*/RT_NULL,                /*线程入口函数参数*/&amp;rt_led2_thread_stack[0],/*线程栈起始地址*/sizeof(rt_led2_thread_stack),/*线程栈大小*/3,/*线程的优先级*/20);/*线程时间片*///启动线程rt_thread_startup(&amp;led2_thread);  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};  /** Initializes the RCC Oscillators according to the specified parameters  * in the RCC_OscInitTypeDef structure.  */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /** Initializes the CPU, AHB and APB buses clocks  */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE BEGIN 4 *///定义线程函数static void led0_thread_entry(void* parameter){while(1){HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_0);rt_thread_delay(400);/* 延时 400 个 tick */}}//定义线程函数static void led1_thread_entry(void* parameter){while(1){HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_1);rt_thread_delay(600);/* 延时 600 个 tick */}}//定义线程函数static void led2_thread_entry(void* parameter){while(1){HAL_GPIO_TogglePin(GPIOB,GPIO_PIN_5);rt_thread_delay(800);/* 延时 800 个 tick */}}/* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，纯手动移植完成，后续会讲如何使用KEIL自带源码包移植RT-Thread和RT-Thread Studio的使用。</p><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/0847b717d6e04bd298d02d41b3b6bc68.png"></p><h1><strong>四、实验效果</strong></h1><p><img src="/2025/06/30/%E3%80%90RT-Thread%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84RT-Thread%E7%A7%BB%E6%A4%8D%EF%BC%88%E7%BA%AF%E6%89%8B%E5%8A%A8%EF%BC%89/20d8c979b8ec4c15849b22a776a37279.gif"></p><p><strong>移植成功项目示例链接：</strong></p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread." href="https://github.com/Molesidy/RT-Thread" title="Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread."><span class="link-card-box" contenteditable="false"><span class="link-title">Molesidy/RT-Thread: This repository stores the code achievements I obtained during the process of learning RT-Thread.</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://github.com/Molesidy/RT-Thread</span></span></a></p>]]></content>
    
    
    <categories>
      
      <category>RT-Thread学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RT-Thread 嵌入式 单片机 stm32</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】Sourcetree上传项目的过程记录</title>
    <link href="/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>一、简介</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sourcetree是一款免费的Git图形化客户端，它由Atlassian开发，提供了跨平台的支持，可运行在Windows和Mac操作系统上。Sourcetree可以让开发者更方便地使用Git来管理代码，不需要在命令行中输入复杂的Git命令，而是通过可视化的界面完成代码管理操作。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sourcetree支持多种Git工作流，例如<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Git Flow" href="https://zhida.zhihu.com/search?content_id=250922651&amp;content_type=Article&amp;match_order=1&amp;q=Git+Flow&amp;zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTE0NDQ5MTAsInEiOiJHaXQgRmxvdyIsInpoaWRhX3NvdXJjZSI6ImVudGl0eSIsImNvbnRlbnRfaWQiOjI1MDkyMjY1MSwiY29udGVudF90eXBlIjoiQXJ0aWNsZSIsIm1hdGNoX29yZGVyIjoxLCJ6ZF90b2tlbiI6bnVsbH0.JoZlBwm5qjutsxwYzAC2uPJO3j4FCS_Vm4LOuSPr9C4&amp;zhida_source=entity" title="Git Flow">Git Flow</a>、<a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="GitHub Flow" href="https://zhida.zhihu.com/search?content_id=250922651&amp;content_type=Article&amp;match_order=1&amp;q=GitHub+Flow&amp;zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTE0NDQ5MTAsInEiOiJHaXRIdWIgRmxvdyIsInpoaWRhX3NvdXJjZSI6ImVudGl0eSIsImNvbnRlbnRfaWQiOjI1MDkyMjY1MSwiY29udGVudF90eXBlIjoiQXJ0aWNsZSIsIm1hdGNoX29yZGVyIjoxLCJ6ZF90b2tlbiI6bnVsbH0.mxRRe83ULu4LQ_7ogjTZ6zsr4VsYDoj5Wxkq4Y-H6M0&amp;zhida_source=entity" title="GitHub Flow">GitHub Flow</a>等，可以帮助开发者更好地管理Git分支、合并代码、提交代码等操作。此外，Sourcetree还集成了一些实用的功能，例如自动提交、撤销提交、文件比较、文件历史记录等，方便开发者进行代码管理和版本控制。</p><p><strong>二、上传过程记录</strong></p><p>1.首先在GitHub上创建一个远程仓库</p><p><img src="/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/f4b0c6234302459ba40aaf678b21da4d.png"></p><p>2.创建完毕后，将其使用Git Bash克隆到一个本地文件夹下</p><p><img src="/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/f790b138f73549bf84ad8525cb5fc688.png"></p><p>3.然后打开Sourcetree，选择添加仓库选项（在这里就不用介绍关于Sourcetree的下载、安装和配置了，可移至其他优秀文章查看）</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/8d5b0992c8894f50ab176e573a2d8378.png">https://i-blog.csdnimg.cn/direct/8d5b0992c8894f50ab176e573a2d8378.png</a>“ width&#x3D;”1919” &#x2F;&gt;选中克隆到本地的文件夹（git仓库）</p></p><p><img alt=)<p>4.对本地仓库下进行添加或是修改文件</p><p>5.选中、暂存，然后点击右下角的提交选项并勾选推送远程，完成提交到本地仓库和远程仓库的过程</p><p><img src="/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/5c923935181847e2a69e2261ed317987.png"></p><p><img src="/2025/06/30/%E3%80%90Git%E3%80%91Sourcetree%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/184128560d7c411f97a96e4eabbeb3bb.jpeg"></p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git Sourcetree</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Git】仓库的创建与项目的提交</title>
    <link href="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/"/>
    <url>/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>前言：</strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关于git的下载、安装、配置等，本文未进行阐述，仅以此简单记录一下仓库的创建与项目的提交的过程，若需要git的下载、安装、配置等相关信息，请移步至其他优秀文章，同时提醒下面的步骤由于初次测试有一些麻烦，建议步骤是首先创建远程仓库后就克隆到本地进行修改再次推送，若是在本地另外创建的仓库初始化后一定要拉取一下保持同步再进行修改、添加文件提交。</p><p><strong>一、打开GitHub并创建远程仓库</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建完成便得到一个运程仓库。</p><p style="text-align:center"><strong><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/febef72fde9748bea31769e88fee5f86.png" /></strong></p><p style="text-align:center"><strong>二、在本地磁盘上创建一个文件夹并右击用Git Bash进行本地git仓库的初始化和本地项目的提交。</strong></p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/54ba834916e144309e1d455cdad3b993.png"></p><p>1.输入命令：<strong>git init，</strong>在当前所在目录下创建一个空的Git仓库，同时会在当前目录下生成.git文件夹</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/042f4582bc34452cbc0e19ee31198903.png"></p><p>2.输入命令：<strong>git add *(*表示文件/文件夹名)</strong>，选择要上传的文件/文件夹添加到Git仓库中，如果需把该目录下的所有文件/文件夹都暂存到Git仓库中，可输入命令<strong>git add .</strong>，<strong>.</strong>表示当前路径下的所有文件/文件夹</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/bfd0f81d19904c8294acb417872a9bed.png"></p><p>3.之后，输入命令：<strong>git commit -m &quot;此次提交时的备注&quot;（windows使用&quot;&quot;，Linux使用&#39;&#39;）</strong>将代码正式提交到本地仓库中</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/ad1de8054529487db097101bfa7e5979.png"></p><p>4.输入命令：<strong>git status</strong>，查看是否都已提交</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/2f60f1b319bb410297f35f2d7513e900.png"></p><p>5.输入命令：<strong>git remote add origin &quot;传输通道类型:仓库地址&quot;</strong>，关联远程仓库</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/84c65ec0d8b54ca1bb6edcb5742a6599.png"></p><p>6.输入命令：<strong>git remote -v</strong>，查看关联情况，出现可拉取和可推送信息则关联成功</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/ba0f0955c0514cceaf69df7a3eb4d7fe.png"></p><p>7.输入命令：<strong>git push -u origin&nbsp;main</strong>，就可以推送到远程仓库了，第一次传项目时远程仓库是空的需要加上<strong>-u</strong>，但是后面的推送就不需要加上<strong>-u</strong>了（我的默认分支命是<strong>main</strong>，若是你的仓库设置分支名是<strong>master</strong>可改为<strong>master</strong>）</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/ca07db5439ab4d42aa61a09c536350c3.png"></p><p>8.由于本地仓库没有远程仓库的readme.md文件导致不同步，所以应该在本地仓库初始化并关联远程仓库后先拉取一下保持同步，解决办法就是先拉取一下（<strong>git pull --rebase origin main</strong><br />）后再推送。（最好还是先创建远程仓库再将其克隆到本地进行修改）</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/98ab4260dedd4fc69953a6a6f8fffc77.png"></p><p>最后完成推送。</p><p><img src="/2025/06/28/%E3%80%90Git%E3%80%91%E4%BB%93%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BA%A4/c3edb8f588e54f71bf857b3fa63c273a.png"></p>]]></content>
    
    
    <categories>
      
      <category>Git学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【uC/OS】基于STM32+HAL库的uC/OS-III移植与多任务程序示例演示</title>
    <link href="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/"/>
    <url>/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>一、RTOS简介</strong></p><p id="main-toc" name="tableOfContents">1. 嵌入式实时操作系统（RTOS）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;嵌入式实时操作系统（RTOS）是面向嵌入式设备设计的专用操作系统，核心优势在于<strong>实时响应能力</strong>与<strong>任务执行确定性</strong>。这类系统专为处理时间敏感性强、需快速反馈的场景而生，例如汽车电子控制单元（ECU）、医疗监护设备、工业机器人控制系统等。在这些应用中，任务的执行时序和响应速度直接影响系统功能与安全性。</p><p>目前主流的嵌入式 RTOS 包括：</p><ul><li><strong>FreeRTOS</strong>：开源轻量级系统，广泛应用于消费电子与工业控制领域；</li><li><strong>uC/OS</strong>：模块化设计的商业 RTOS，支持多任务调度与实时性能优化；</li><li><strong>RT-Thread</strong>：国产开源 RTOS，集成丰富组件与生态支持；</li><li><strong>ThreadX</strong>：微软旗下商业 RTOS，常用于对可靠性要求极高的嵌入式场景。</li></ul><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RTOS不止以上的这几种，同时，RTOS通过精确的任务调度算法（如优先级抢占、时间片轮转）、中断管理机制及资源同步原语（互斥锁、信号量等），确保关键任务在指定时限内完成，满足嵌入式系统对实时性与稳定性的需求。</p><p>2.uC/OS-III简介<br /><strong>&nbsp; &nbsp; &nbsp; &nbsp;</strong> uC/OS-III（Micro C/OS-III）是由美国嵌入式系统专家 Jean J. Labrosse 开发的<strong>实时操作系统（RTOS）</strong>，专为嵌入式系统设计。其前身是 uC/OS-II，III 代在实时性、可靠性和可扩展性上进行了全面升级，广泛应用于工业控制、医疗设备、航空航天、消费电子等对实时性要求严格的领域。</p><p><strong>二、获取uC/OS-III源码</strong></p><p>1.官网下载链接：</p><p><a data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Micrium Software and Documentation - Silicon Labs" href="https://www.silabs.com/developers/micrium" title="Micrium Software and Documentation - Silicon Labs">Micrium Software and Documentation - Silicon Labs</a></p><p>2.git移植成功示例（含uC/OS源码）：</p><p><a class="has-card" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="Molesidy/uCOS: This repository is used to store porting routines for uCOS, including partial source code of uCOS II/III, and is intended for learning purposes only." href="https://github.com/Molesidy/uCOS" title="Molesidy/uCOS: This repository is used to store porting routines for uCOS, including partial source code of uCOS II/III, and is intended for learning purposes only."><span class="link-card-box" contenteditable="false"><span class="link-title">Molesidy/uCOS: This repository is used to store porting routines for uCOS, including partial source code of uCOS II/III, and is intended for learning purposes only.</span><span class="link-link"><img class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" />https://github.com/Molesidy/uCOS</span></span></a></p><p><strong>三、创建裸机项目工程示例</strong></p><p>1.使用STM32CubeMX创建工程，首先，选择系统时钟来源和开启SWD。</p><p><strong><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/fe88d847dd514d06b0c95971d10f47b4.jpeg" /></strong></p><p style="text-align:center"><strong><img alt="" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/0ace0c63a92d45c783d31b69c777314c.jpeg" /></strong></p><p>2.图形化配置3个GPIO（PB0，PB1，PB5）为GPIO输出，用于进行创建3个Led闪烁的任务以便测试。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/f581e70afb564e5e99d69e44b7e66e25.jpeg"></p><p>3.进行时钟树配置。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/283b49ae0504464ea39d786a3b6795f1.png"></p><p>4.最后进行工程的配置。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/5e9ab539ebd84e2fa99a46080bd79def.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/3d02535d07d343079bab6ed3c321183b.png"></p><p><strong>四、移植uC/OS源码到示例工程下</strong><br />1.在工程的文件夹下添加新的文件夹BSP、uCOS_III。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/75d2c08bf05e4505a789ae0db3b4a03e.jpeg"></p><p>2.将源码的4个文件夹放到新增的uCOS文件夹下，然后我对应将这4个文件重命名了一下，这个根据自己的习惯来。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/7bc559b4fb8a4d2c932d34dadd323f5e.jpeg"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/869baa64b3d44651b14a6415ec4721af.png"></p><p>3.在KEIL工程内部将uCOS_III的对应文件夹下的文件对应加入到KEIL工程组当中。</p><p>（1）uCOS_III_CONFIG</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/09552cd3f9f54d72bcf6e046c1224f65.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/eb1749cc998f4f32b24ac7f2d574c776.png"></p><p>（2）uCOS_III_CPU</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/e87d1e157448492bb822452330e00498.png"></p><p>将\STM32_uCOS_III\uCOS_III\uCOS_CPU\ARM-Cortex-M3\RealView下的文件加入到uCOS_III_CPU组中。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/9837b1d06b55499ea1846305f8f3b339.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/4a98cd8168f3452fa3e94b63e434e04f.png"></p><p>（3）uCOS_III_LIB</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/049a3801e53243f7a5e47af073997f9b.png"></p><p>将\STM32_uCOS_III\uCOS_III\uCOS_LIB\Ports\ARM-Cortex-M3\RealView下文件加入uCOS_III_LIB组中。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/65a0ce1c34ad41089c033bd236d929b5.png"></p><p>（4）uCOS_III_PORT<br />将\STM32_uCOS_III\uCOS_III\uCOS_III\Ports\ARM-Cortex-M3\Generic\RealView下文件加入到uCOS_III_PORT组中。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/66ffd10c078e40e590b3a37c24560a72.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/72c04f72d46742fe87a646c973a76a1c.png"></p><p>（5）uCOS_III_SOURCE</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/578d452d54d54efc958c8b1a94d696e9.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/61f5f880b32749eaa937c2f0a78b7448.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/68cf87444d074dcf919b6f0513342b66.png"></p><p>（6）uCOS_III_APP<br />新建2个用户文件user_app.h、user_app.c起来用于未来存放自己封装的应用函数，可建可不可建，这个示例的3个Led任务将会放在main.c中，并未涉及这个user_app.c/h。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/41d74f6a6425449496ce6a53cf6ee45f.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/505fc4d4cbd14cbf94bee9973a6af7a6.png"></p><p>（7）BSP</p><p>新建空白文件bsp.h、bsp.c，用于板级支持包初始化和其他调整。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/6ae1046b3e784e1ba9d858875be717e4.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/1f605361f3d7413fa0f9aa261502e6ae.png"></p><p>（8）导入文件所在的路径。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/111e87c1c78f4d5f8c2d3d348193a179.jpeg"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/e69ad9060f4d4f3fa6c2a8b7e82b9ccc.png"></p><p>4.添加文件完毕后，便是对代码进行修改。</p><p>（1）在bsp.h、bsp.c文件添加相应的代码。</p><p>bsp.h</p><pre><code class="language-cs">#ifndef  __BSP_H__#define  __BSP_H__ #include "stm32f1xx_hal.h" void BSP_Init(void); #endif</code></pre><p>bsp.c</p><pre><code class="language-cs">// bsp.c#include "includes.h" #define  DWT_CR      *(CPU_REG32 *)0xE0001000#define  DWT_CYCCNT  *(CPU_REG32 *)0xE0001004#define  DEM_CR      *(CPU_REG32 *)0xE000EDFC#define  DBGMCU_CR   *(CPU_REG32 *)0xE0042004 #define  DEM_CR_TRCENA                   (1 &lt;&lt; 24)#define  DWT_CR_CYCCNTENA                (1 &lt;&lt;  0) CPU_INT32U  BSP_CPU_ClkFreq (void){    return HAL_RCC_GetHCLKFreq();} void BSP_Tick_Init(void){CPU_INT32U cpu_clk_freq;CPU_INT32U cnts;cpu_clk_freq = BSP_CPU_ClkFreq();#if(OS_VERSION&gt;=3000u)cnts = cpu_clk_freq/(CPU_INT32U)OSCfg_TickRate_Hz;#elsecnts = cpu_clk_freq/(CPU_INT32U)OS_TICKS_PER_SEC;#endifOS_CPU_SysTickInit(cnts);}   void BSP_Init(void){BSP_Tick_Init();MX_GPIO_Init();}  #if (CPU_CFG_TS_TMR_EN == DEF_ENABLED)void  CPU_TS_TmrInit (void){    CPU_INT32U  cpu_clk_freq_hz;      DEM_CR         |= (CPU_INT32U)DEM_CR_TRCENA;                /* Enable Cortex-M3's DWT CYCCNT reg.                   */    DWT_CYCCNT      = (CPU_INT32U)0u;    DWT_CR         |= (CPU_INT32U)DWT_CR_CYCCNTENA;     cpu_clk_freq_hz = BSP_CPU_ClkFreq();    CPU_TS_TmrFreqSet(cpu_clk_freq_hz);}#endif  #if (CPU_CFG_TS_TMR_EN == DEF_ENABLED)CPU_TS_TMR  CPU_TS_TmrRd (void){    return ((CPU_TS_TMR)DWT_CYCCNT);}#endif  #if (CPU_CFG_TS_32_EN == DEF_ENABLED)CPU_INT64U  CPU_TS32_to_uSec (CPU_TS32  ts_cnts){CPU_INT64U  ts_us;  CPU_INT64U  fclk_freq;    fclk_freq = BSP_CPU_ClkFreq();  ts_us     = ts_cnts / (fclk_freq / DEF_TIME_NBR_uS_PER_SEC);   return (ts_us);}#endif  #if (CPU_CFG_TS_64_EN == DEF_ENABLED)CPU_INT64U  CPU_TS64_to_uSec (CPU_TS64  ts_cnts){CPU_INT64U  ts_us;CPU_INT64U  fclk_freq;    fclk_freq = BSP_CPU_ClkFreq();  ts_us     = ts_cnts / (fclk_freq / DEF_TIME_NBR_uS_PER_SEC);  return (ts_us);}#endif</code></pre><p>（2）修改STM32启动文件。</p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/a4aed71dea16432e9846f15e74008e31.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/349a7e146e994db799457cd4a4d2492b.png"></p><p>将上述所有PendSV_Handler和SysTick_Handler替换为</p><pre><code class="language-cs">OS_CPU_PendSVHandlerOS_CPU_SysTickHandler</code></pre><p>（3）修改app_cfg.h。</p><pre><code class="language-cs">//#define  APP_CFG_SERIAL_EN                          DEF_ENABLED //注释掉#define  APP_CFG_SERIAL_EN                          DEF_DISABLED //改为此句//#define  APP_TRACE                                  BSP_Ser_Printf //注释掉#define  APP_TRACE                                  (void) //改为此句</code></pre><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/080b183fde4b4b6588d02503abb3a42e.png"></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/edb7fb4f92b84acebce130640e1afd1d.png"></p><p>（4）修改includes.h。</p><pre><code class="language-cs">//#include  &lt;stm32f10x_lib.h&gt;#include "stm32f1xx_hal.h" //改为此句#include "gpio.h" //同时添加该头文件，以便uCOS初始化HAL库的MX_GPIO_Init</code></pre><pre><code class="language-cs">/***********************************************************************************************************                                              EXAMPLE CODE**                          (c) Copyright 2003-2013; Micrium, Inc.; Weston, FL**               All rights reserved.  Protected by international copyright laws.*               Knowledge of the source code may NOT be used to develop a similar product.*               Please help us continue to provide the Embedded community with the finest*               software available.  Your honesty is greatly appreciated.**********************************************************************************************************//************************************************************************************************************                                           MASTER INCLUDES**                                     ST Microelectronics STM32*                                              on the**                                     Micrium uC-Eval-STM32F107*                                         Evaluation Board** Filename      : includes.h* Version       : V1.00* Programmer(s) : EHS*                 DC**********************************************************************************************************/#ifndef  INCLUDES_PRESENT#define  INCLUDES_PRESENT/***********************************************************************************************************                                         STANDARD LIBRARIES**********************************************************************************************************/#include  &lt;stdarg.h&gt;#include  &lt;stdio.h&gt;#include  &lt;stdlib.h&gt;#include  &lt;math.h&gt;/***********************************************************************************************************                                              LIBRARIES**********************************************************************************************************/#include  &lt;cpu.h&gt;#include  &lt;lib_def.h&gt;#include  &lt;lib_ascii.h&gt;#include  &lt;lib_math.h&gt;#include  &lt;lib_mem.h&gt;#include  &lt;lib_str.h&gt;/***********************************************************************************************************                                              APP / BSP**********************************************************************************************************/#include  &lt;bsp.h&gt;/***********************************************************************************************************                                                 OS**********************************************************************************************************/#include  &lt;os.h&gt;/***********************************************************************************************************                                                 ST**********************************************************************************************************///#include  &lt;stm32f10x_lib.h&gt;#include "stm32f1xx_hal.h"#include "gpio.h"/***********************************************************************************************************                                            INCLUDES END**********************************************************************************************************/#endif</code></pre><p>（5）根据实际情况，可修改堆空间大小。</p><pre><code class="language-cs">//#define  LIB_MEM_CFG_HEAP_SIZE          27u * 1024u     /* Configure heap memory size         [see Note #2a].           */#define  LIB_MEM_CFG_HEAP_SIZE          5u * 1024u</code></pre><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/3d3d3d34887a40d0b714ab056f8e66fb.png"></p><p>（6）编写main.c函数。</p><pre><code class="language-cs">/* USER CODE BEGIN Header *//**  ******************************************************************************  * @file           : main.c  * @brief          : Main program body  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "main.h"#include "gpio.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include &lt;includes.h&gt;/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* 任务优先级 */#define START_TASK_PRIO3#define LED0_TASK_PRIO4#define LED1_TASK_PRIO4#define LED2_TASK_PRIO4 /* 任务堆栈大小*/#define START_STK_SIZE 256#define LED0_STK_SIZE 128#define LED1_STK_SIZE 128#define LED2_STK_SIZE 128/* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV *//* 任务栈 */CPU_STK START_TASK_STK[START_STK_SIZE];CPU_STK LED0_TASK_STK[LED0_STK_SIZE];CPU_STK LED1_TASK_STK[LED1_STK_SIZE];CPU_STK LED2_TASK_STK[LED2_STK_SIZE];/* 任务控制块 */OS_TCB StartTaskTCB;OS_TCB Led0TaskTCB;OS_TCB Led1TaskTCB;OS_TCB Led2TaskTCB;/* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);/* USER CODE BEGIN PFP *//* 任务函数定义 */void start_task(void *p_arg);static  void  AppTaskCreate(void);static  void  AppObjCreate(void);static  void  Led0_Task(void *p_arg);static  void  Led1_Task(void *p_arg);static  void  Led2_Task(void *p_arg);/* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//**  * @brief System Clock Configuration  * @retval None  */void SystemClock_Config(void){  RCC_OscInitTypeDef RCC_OscInitStruct = {0};  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};   /**Initializes the CPU, AHB and APB busses clocks   */  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;  RCC_OscInitStruct.HSEState = RCC_HSE_ON;  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)  {    Error_Handler();  }  /**Initializes the CPU, AHB and APB busses clocks   */  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;   if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)  {    Error_Handler();  }}/* USER CODE END 0 *//**  * @brief  The application entry point.  * @retval int  */int main(void){  /* USER CODE BEGIN 1 */OS_ERR err;OSInit(&amp;err);HAL_Init();SystemClock_Config();  /* USER CODE END 1 */  /* MCU Configuration--------------------------------------------------------*/  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */  //HAL_Init();  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* Configure the system clock */  //SystemClock_Config();  /* USER CODE BEGIN SysInit */  /* USER CODE END SysInit */  /* Initialize all configured peripherals */  //MX_GPIO_Init();  /* USER CODE BEGIN 2 *//* 创建任务 */OSTaskCreate((OS_TCB     *)&amp;StartTaskTCB,                /* Create the start task                                */ (CPU_CHAR   *)"start task", (OS_TASK_PTR ) start_task, (void       *) 0, (OS_PRIO     ) START_TASK_PRIO, (CPU_STK    *)&amp;START_TASK_STK[0], (CPU_STK_SIZE) START_STK_SIZE/10, (CPU_STK_SIZE) START_STK_SIZE, (OS_MSG_QTY  ) 0, (OS_TICK     ) 0, (void       *) 0, (OS_OPT      )(OS_OPT_TASK_STK_CHK | OS_OPT_TASK_STK_CLR), (OS_ERR     *)&amp;err);/* 启动多任务系统，控制权交给uC/OS-III */OSStart(&amp;err);            /* Start multitasking (i.e. give control to uC/OS-III). */  /* USER CODE END 2 */  /* Infinite loop */  /* USER CODE BEGIN WHILE */  while (1)  {    /* USER CODE END WHILE */    /* USER CODE BEGIN 3 */  }  /* USER CODE END 3 */}/**  * @brief System Clock Configuration  * @retval None  *///void SystemClock_Config(void)//{//  RCC_OscInitTypeDef RCC_OscInitStruct = {0};//  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};//  /** Initializes the RCC Oscillators according to the specified parameters//  * in the RCC_OscInitTypeDef structure.//  *///  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;//  RCC_OscInitStruct.HSEState = RCC_HSE_ON;//  RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;//  RCC_OscInitStruct.HSIState = RCC_HSI_ON;//  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;//  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;//  RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;//  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)//  {//    Error_Handler();//  }//  /** Initializes the CPU, AHB and APB buses clocks//  *///  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK//                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;//  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;//  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;//  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;//  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;//  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)//  {//    Error_Handler();//  }//}/* USER CODE BEGIN 4 */void start_task(void *p_arg){OS_ERR err;p_arg = p_arg;BSP_Init();                                                   /* Initialize BSP functions */CPU_Init();Mem_Init();                                                 /* Initialize Memory Management Module */ #if OS_CFG_STAT_TASK_EN &gt; 0uOSStatTaskCPUUsageInit(&amp;err);  //统计任务                #endif#ifdef CPU_CFG_INT_DIS_MEAS_EN//如果使能了测量中断关闭时间    CPU_IntDisMeasMaxCurReset();#endif #ifOS_CFG_SCHED_ROUND_ROBIN_EN  //当使用时间片轮转的时候 //使能时间片轮转调度功能,时间片长度为1个系统时钟节拍，既1*5=5msOSSchedRoundRobinCfg(DEF_ENABLED,1,&amp;err);  #endifAppTaskCreate();                                                                       AppObjCreate();                                             }static  void  Led0_Task (void *p_arg){OS_ERR err;(void)p_arg;HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_SET);while (DEF_TRUE){HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_RESET);OSTimeDlyHMSM(0, 0, 0, 300,OS_OPT_TIME_HMSM_STRICT,&amp;err);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_SET);OSTimeDlyHMSM(0, 0, 0, 300,OS_OPT_TIME_HMSM_STRICT,&amp;err);}} static  void  Led1_Task (void *p_arg){OS_ERR  err; (void)p_arg;HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_SET);while (DEF_TRUE){HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_RESET);OSTimeDlyHMSM(0, 0, 0, 600,OS_OPT_TIME_HMSM_STRICT,&amp;err);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_SET);OSTimeDlyHMSM(0, 0, 0, 600,OS_OPT_TIME_HMSM_STRICT,&amp;err);}} static  void  Led2_Task (void *p_arg){OS_ERR err;(void)p_arg;HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_SET);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_5,GPIO_PIN_SET);while (DEF_TRUE){HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_RESET);OSTimeDlyHMSM(0, 0, 0, 900,OS_OPT_TIME_HMSM_STRICT,&amp;err);HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET);OSTimeDlyHMSM(0, 0, 0, 900,OS_OPT_TIME_HMSM_STRICT,&amp;err);}  }  /* USER CODE BEGIN 4 *//**  * 函数功能: 创建应用任务  * 输入参数: p_arg 是在创建该任务时传递的形参  * 返 回 值: 无  * 说    明：无  */static  void  AppTaskCreate (void){OS_ERR err;CPU_SR_ALLOC();OS_CRITICAL_ENTER();//进入临界区/* 创建LED0任务 */OSTaskCreate((OS_TCB * )&amp;Led0TaskTCB, (CPU_CHAR* )"Led0_Task",                  (OS_TASK_PTR )Led0_Task,                  (void* )0,                 (OS_PRIO  )LED0_TASK_PRIO,                      (CPU_STK   * )&amp;LED0_TASK_STK[0],                 (CPU_STK_SIZE)LED0_STK_SIZE/10,                 (CPU_STK_SIZE)LED0_STK_SIZE,                 (OS_MSG_QTY  )0,                 (OS_TICK  )0,                 (void   * )0,                 (OS_OPT      )OS_OPT_TASK_STK_CHK|OS_OPT_TASK_STK_CLR,                 (OS_ERR * )&amp;err); /* 创建LED1任务 */OSTaskCreate((OS_TCB * )&amp;Led1TaskTCB, (CPU_CHAR* )"Led1_Task",                  (OS_TASK_PTR )Led1_Task,                  (void* )0,                 (OS_PRIO  )LED1_TASK_PRIO,                      (CPU_STK   * )&amp;LED1_TASK_STK[0],                 (CPU_STK_SIZE)LED1_STK_SIZE/10,                 (CPU_STK_SIZE)LED1_STK_SIZE,                 (OS_MSG_QTY  )0,                 (OS_TICK  )0,                 (void   * )0,                 (OS_OPT      )OS_OPT_TASK_STK_CHK|OS_OPT_TASK_STK_CLR,                 (OS_ERR * )&amp;err);  /* 创建LED2任务 */OSTaskCreate((OS_TCB * )&amp;Led2TaskTCB, (CPU_CHAR* )"Led2_Task",                  (OS_TASK_PTR )Led2_Task,                  (void* )0,                 (OS_PRIO  )LED2_TASK_PRIO,                      (CPU_STK   * )&amp;LED2_TASK_STK[0],                 (CPU_STK_SIZE)LED2_STK_SIZE/10,                 (CPU_STK_SIZE)LED2_STK_SIZE,                 (OS_MSG_QTY  )0,                 (OS_TICK  )0,                 (void   * )0,                 (OS_OPT      )OS_OPT_TASK_STK_CHK|OS_OPT_TASK_STK_CLR,                  (OS_ERR * )&amp;err); OS_TaskSuspend((OS_TCB*)&amp;StartTaskTCB,&amp;err);//挂起开始任务 OS_CRITICAL_EXIT();//进入临界区}  /**  * 函数功能: uCOSIII内核对象创建  * 输入参数: 无  * 返 回 值: 无  * 说    明：无  */static  void  AppObjCreate (void){ }/* USER CODE END 4 *//**  * @brief  This function is executed in case of error occurrence.  * @retval None  */void Error_Handler(void){  /* USER CODE BEGIN Error_Handler_Debug */  /* User can add his own implementation to report the HAL error return state */  __disable_irq();  while (1)  {  }  /* USER CODE END Error_Handler_Debug */}#ifdef  USE_FULL_ASSERT/**  * @brief  Reports the name of the source file and the source line number  *         where the assert_param error has occurred.  * @param  file: pointer to the source file name  * @param  line: assert_param error line source number  * @retval None  */void assert_failed(uint8_t *file, uint32_t line){  /* USER CODE BEGIN 6 */  /* User can add his own implementation to report the file name and line number,     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */  /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */</code></pre><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/2cbff0f957964a0583537b9ca9731e74.png"></p><p>最后，移植成功并成功运行多任务！</p><p><strong>五、实验效果演示</strong></p><p><img src="/2025/06/28/%E3%80%90uC!OS%E3%80%91%E5%9F%BA%E4%BA%8ESTM32+HAL%E5%BA%93%E7%9A%84uC!OS-III%E7%A7%BB%E6%A4%8D%E4%B8%8E%E5%A4%9A%E4%BB%BB%E5%8A%A1%E7%A8%8B%E5%BA%8F%E7%A4%BA%E4%BE%8B%E6%BC%94%E7%A4%BA/6db9138003734f59993f9e6bb9c28cc4.gif"></p><p>注：<br />（1）使用的硬件平台是野火指南者。<br />（2）若移植过程有误，可在评论区指出。<br />（3）参考博客：</p><p><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="                        【STM32】uc/OS-III多任务程序" href="https://blog.csdn.net/star68_/article/details/139422777?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-4-139422777-blog-121698499.235^v43^pc_blog_bottom_relevance_base8&amp;spm=1001.2101.3001.4242.3&amp;utm_relevant_index=6" title="                        【STM32】uc/OS-III多任务程序">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 【STM32】uc/OS-III多任务程序</a><br /><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="                          STM32基于HAL库移植uC/OS-III" href="https://blog.csdn.net/m0_74773601/article/details/144710901?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-5-144710901-blog-128479276.235^v43^pc_blog_bottom_relevance_base8&amp;spm=1001.2101.3001.4242.4&amp;utm_relevant_index=8" title="                          STM32基于HAL库移植uC/OS-III">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STM32基于HAL库移植uC/OS-III</a><br /><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="                          STM32 —— UCOS 移植" href="https://ppqppl.blog.csdn.net/article/details/128479276?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-128479276-blog-137204748.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-128479276-blog-137204748.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=9" title="                          STM32 —— UCOS 移植">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STM32 &mdash;&mdash; UCOS 移植</a>&nbsp;<br /><a class="link-info" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="                          ​​​​​​​STM32关于uc/OS-III的多任务程序  " href="https://blog.csdn.net/2201_75516394/article/details/139551898?spm=1001.2101.3001.6650.13&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-13-139551898-blog-139550247.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-13-139551898-blog-139550247.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=22" title="                          STM32关于uc/OS-III的多任务程序  ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STM32关于uc/OS-III的多任务程序&nbsp;</a>&nbsp;</p>]]></content>
    
    
    <categories>
      
      <category>uC/OS学习专栏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>stm32 嵌入式硬件 单片机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】基于STM32CubeMX的凭借Queue队列管理的串口空闲中断接收数据（有操作系统）</title>
    <link href="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/"/>
    <url>/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>一、框架概述</strong></p><p>　　该方案采用的是基于FreeRTOS下的凭借Queue队列管理的串口空闲中断来接收数据。</p><p><strong>&nbsp;二、STM32CubeMX的配置</strong></p><p>１、时钟配置</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/535693f6b6624840aa9c30c44cd4d356.png"></p><p>２、时钟源换为TIM6（systick需要提供给FreeRTOS）</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/313c27fc1cdd4a66973b7589ec88bed3.png"></p><p>3、串口配置（这里未开启DMA）</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/0ccbc679d38449098a9d7105012ffa4e.png"></p><p>&nbsp;<img alt="" height="1017" isbindedload="true" src="https://i-blog.csdnimg.cn/direct/497d0e1b5f9f4cb79341c7b1044d19a2.png" width="1919" /></p><p>4、FreeRTOS的配置（开启后就直接按默认配置，若有自身需求，请自行进行其他的配置）</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/bdeadff653ce4afa938fe808b15357fc.png"></p><p>5、时钟树的配置</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/2bb45496cc3041aeb4c425dc059f5775.png"></p><p>6、工程的配置</p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/457fa5cd4a86492d993ad2e15450d405.png"></p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/b3c35846a8d64391a5b5fd7431681dd7.png"></p><p>　　至此，STM32CubeMX配置完毕。</p><p><strong>三、代码编写</strong></p><p><strong>freertos.c</strong></p><pre><code>/* USER CODE BEGIN Header *//**  ******************************************************************************  * File Name          : freertos.c  * Description        : Code for freertos applications  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "FreeRTOS.h"#include "task.h"#include "main.h"#include "cmsis_os.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "BSP_USART.h"#include "queue.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN Variables *///定义串口测试任务句柄static TaskHandle_t sg_xUART_TestOfTaskHandle;//定义接收队列句柄QueueHandle_t g_xQueueHandle_UART_RX;/* USER CODE END Variables */osThreadId defaultTaskHandle;/* Private function prototypes -----------------------------------------------*//* USER CODE BEGIN FunctionPrototypes *//* USER CODE END FunctionPrototypes */void StartDefaultTask(void const * argument);void MX_FREERTOS_Init(void); /* (MISRA C 2004 rule 8.1) *//* GetIdleTaskMemory prototype (linked to static allocation support) */void vApplicationGetIdleTaskMemory( StaticTask_t **ppxIdleTaskTCBBuffer, StackType_t **ppxIdleTaskStackBuffer, uint32_t *pulIdleTaskStackSize );/* USER CODE BEGIN GET_IDLE_TASK_MEMORY */static StaticTask_t xIdleTaskTCBBuffer;static StackType_t xIdleStack[configMINIMAL_STACK_SIZE];void vApplicationGetIdleTaskMemory( StaticTask_t **ppxIdleTaskTCBBuffer, StackType_t **ppxIdleTaskStackBuffer, uint32_t *pulIdleTaskStackSize ){  *ppxIdleTaskTCBBuffer = &amp;xIdleTaskTCBBuffer;  *ppxIdleTaskStackBuffer = &amp;xIdleStack[0];  *pulIdleTaskStackSize = configMINIMAL_STACK_SIZE;  /* place for user code */}/* USER CODE END GET_IDLE_TASK_MEMORY *//**  * @brief  FreeRTOS initialization  * @param  None  * @retval None  */void MX_FREERTOS_Init(void) {  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* USER CODE BEGIN RTOS_MUTEX */  /* add mutexes, ... */  /* USER CODE END RTOS_MUTEX */  /* USER CODE BEGIN RTOS_SEMAPHORES */  /* add semaphores, ... */  /* USER CODE END RTOS_SEMAPHORES */  /* USER CODE BEGIN RTOS_TIMERS */  /* start timers, add new ones, ... */  /* USER CODE END RTOS_TIMERS */  /* USER CODE BEGIN RTOS_QUEUES */  /* add queues, ... *///动态创建接收队列g_xQueueHandle_UART_RX = xQueueCreate(3, sizeof(uint8_t));  /* USER CODE END RTOS_QUEUES */  /* Create the thread(s) */  /* definition and creation of defaultTask */  osThreadDef(defaultTask, StartDefaultTask, osPriorityNormal, 0, 256);  defaultTaskHandle = osThreadCreate(osThread(defaultTask), NULL);  /* USER CODE BEGIN RTOS_THREADS */  /* add threads, ... */  //动态创建串口测试任务xTaskCreate(UART_Test, "UART_Test_TASK", 128, NULL, osPriorityNormal+1, &amp;sg_xUART_TestOfTaskHandle);  /* USER CODE END RTOS_THREADS */}/* USER CODE BEGIN Header_StartDefaultTask *//**  * @brief  Function implementing the defaultTask thread.  * @param  argument: Not used  * @retval None  *//* USER CODE END Header_StartDefaultTask */void StartDefaultTask(void const * argument){  /* USER CODE BEGIN StartDefaultTask */  /* Infinite loop */  for(;;)  {    osDelay(1);  }  /* USER CODE END StartDefaultTask */}/* Private application code --------------------------------------------------*//* USER CODE BEGIN Application *//* USER CODE END Application */</code></pre><p>BSP_USART.h</p><pre><code>#ifndef __BSP_USART_H#define __BSP_USART_H#include "stm32f1xx_hal.h"#define Buffer_Total_Length 10void UART_Test(void *pvParamter);void UsartPrintf(UART_HandleTypeDef *USARTx, char *fmt,...);#endif</code></pre><p>BSP_USART.c</p><pre><code>#include "BSP_USART.h"//STM32#include "usart.h"//FreeRTOS#include "freertos.h"#include "queue.h"#include "semphr.h"//C#include "stdio.h"#include &lt;stdarg.h&gt;#include &lt;string.h&gt;//外部声明extern QueueHandle_t g_xQueueHandle_UART_RX;//接受数组uint8_t RX_Buffer[Buffer_Total_Length] = {0};//用户测试数组uint8_t USER_RX_Buffer[Buffer_Total_Length] = {0};//初始化void UART_Init(void ){__HAL_UART_ENABLE_IT(&amp;huart1, UART_IT_IDLE);HAL_UART_Receive_IT(&amp;huart1, RX_Buffer, sizeof(RX_Buffer));}//测试任务void UART_Test(void *pvParamter){UART_Init();while(1){if(xQueueReceive(g_xQueueHandle_UART_RX, USER_RX_Buffer, portMAX_DELAY) == pdTRUE){//打印并回显接收的数据的第一个字符UsartPrintf(&amp;huart1, "%d", USER_RX_Buffer[0]);}}}//自定义打印函数void UsartPrintf(UART_HandleTypeDef *USARTx, char *fmt, ...){    unsigned char UsartPrintfBuf[256];    va_list ap;    unsigned int len;        va_start(ap, fmt);    len = vsnprintf((char *)UsartPrintfBuf, sizeof(UsartPrintfBuf), fmt, ap);    va_end(ap);        if (len &gt; 0) {        HAL_UART_Transmit(USARTx, UsartPrintfBuf, len, 1000);        while(HAL_UART_GetState(USARTx) == HAL_UART_STATE_BUSY_TX);    }}// 在BSP_USART.c中添加中断回调实现void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart){    if (huart == &amp;huart1) {// 将接收到的数据发送到队列        if (g_xQueueHandle_UART_RX != NULL) {            xQueueSendFromISR(g_xQueueHandle_UART_RX, RX_Buffer, NULL);        }        // 继续监听下一个字节        HAL_UART_Receive_IT(&amp;huart1, RX_Buffer, sizeof(RX_Buffer));    }}</code></pre><p><strong>四、实验效果</strong></p><p><img src="/2025/05/28/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84%E5%87%AD%E5%80%9FQueue%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/19fe0d4c2b0146dfa76556386bea0603.png"></p><p><strong>注意事项：</strong></p><p>1、使用的硬件平台是野火指南者开发板（STM32F103VET6）。</p><p>2、本来的设想是队列加二值信号量来构建一下对于接收数据的管理，但是，在过程中发现如果在这个中断回调里使用释放二值信号量（任务while中等待获取二值信号量），会导致无法进入中断完成回调函数里，目前原因未知，所以放弃使用二值信号量。</p><p>3、在这个过程中，注意到了对于void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)；这个中断接收完成回调函数，进入这个回调函数之前就对接收缓存非空、空闲中断标志位置1并且清零了，所以不用在这个中断接收完成回调函数里使用if(__HAL_UART_GET_FLAG(&amp;huart1, UART_FLAG_RXNE/IDLE)==SET){};这个再去判断一次了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 嵌入式硬件 单片机 FreeRTOS Queue 串口</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【STM32】基于STM32CubeMX的Semphr+DMA的串口空闲中断接收变长数据（有操作系统）</title>
    <link href="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/"/>
    <url>/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><p><strong>一、框架概述</strong></p><p>　　在嵌入式系统的串口通信设计中，针对高吞吐量、低延迟的数据传输需求，可使用DMA辅助处理串口的数据，能够大幅缓解单片机的运行压力，提高串口数据的处理能力，实现可靠通信。我的方案采用的是基于FreeRTOS下的Semphr+DMA的串口空闲中断来接收变长数据。</p><p><strong>&nbsp;二、STM32CubeMX的配置</strong></p><p>１、时钟配置</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/cdaf3eef6d9746d3bf66e7c00bd21dc8.png"></p><p>２、时钟源换为TIM6（systick需要提供给FreeRTOS）</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/310f83033a924d42920e38c82ae90ed0.png"></p><p>３、串口配置</p><p>![](<a href="https://i-blog.csdnimg.cn/direct/cb0ab4a582a548a6acdf6f0e68f49b67.png">https://i-blog.csdnimg.cn/direct/cb0ab4a582a548a6acdf6f0e68f49b67.png</a>“ width&#x3D;”1919” &#x2F;&gt;&lt;img alt&#x3D;)</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/3987eaa1202b4771bf3d8b521f8aa166.png"></p><p>４、中间件FreeRTOS的配置（由于只演示本方案，这里按照默认的配置即可）</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/b4c484837a3c4f06a704fcea0daf07b7.png"></p><p>５、时钟树的配置</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/4f64a93648ba46edb1371c4c49a8e54f.png"></p><p>６、工程的设置</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/088384713fcd448a8dc4df0d0c6f9ee6.png"></p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/286f0687db2044ecacd8e4c1006a7cac.png"></p><p>　　至此，CubeMX配置完毕。</p><p><strong>三、代码编写</strong></p><p>　　首先，先编译运行一下，如果出现以下情况，请将CubeMX的HAL库固件包版本换成1.8.5版本：</p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/268c7da38ccb4308b610017b11d9a1f2.png"></p><p>以下代码：</p><p>freertos.c</p><pre><code>/* USER CODE BEGIN Header *//**  ******************************************************************************  * File Name          : freertos.c  * Description        : Code for freertos applications  ******************************************************************************  * @attention  *  * Copyright (c) 2025 STMicroelectronics.  * All rights reserved.  *  * This software is licensed under terms that can be found in the LICENSE file  * in the root directory of this software component.  * If no LICENSE file comes with this software, it is provided AS-IS.  *  ******************************************************************************  *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include "FreeRTOS.h"#include "task.h"#include "main.h"#include "cmsis_os.h"/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include "semphr.h"#include "BSP_USART.h"/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD *//* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM *//* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN Variables *///外部声明extern UART_HandleTypeDef huart1;//定义UART_TEST任务句柄TaskHandle_t g_xUART_TestOfTaskHandle;static BaseType_t sg_xUART_TestOfTask_ret;//定义串口接收触发信号量句柄SemaphoreHandle_t g_sUartRx_Semaphore;/* USER CODE END Variables *//* Definitions for defaultTask */osThreadId_t defaultTaskHandle;const osThreadAttr_t defaultTask_attributes = {  .name = "defaultTask",  .stack_size = 128 * 4,  .priority = (osPriority_t) osPriorityNormal,};/* Private function prototypes -----------------------------------------------*//* USER CODE BEGIN FunctionPrototypes *//* USER CODE END FunctionPrototypes */void StartDefaultTask(void *argument);void MX_FREERTOS_Init(void); /* (MISRA C 2004 rule 8.1) *//**  * @brief  FreeRTOS initialization  * @param  None  * @retval None  */void MX_FREERTOS_Init(void) {  /* USER CODE BEGIN Init */  /* USER CODE END Init */  /* USER CODE BEGIN RTOS_MUTEX */  /* add mutexes, ... */  /* USER CODE END RTOS_MUTEX */  /* USER CODE BEGIN RTOS_SEMAPHORES */  /* add semaphores, ... *///创建串口接收触发信号量句柄的对应的二值信号量g_sUartRx_Semaphore = xSemaphoreCreateBinary();  /* USER CODE END RTOS_SEMAPHORES */  /* USER CODE BEGIN RTOS_TIMERS */  /* start timers, add new ones, ... */  /* USER CODE END RTOS_TIMERS */  /* USER CODE BEGIN RTOS_QUEUES */  /* add queues, ... */  /* USER CODE END RTOS_QUEUES */  /* Create the thread(s) */  /* creation of defaultTask */  defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, &amp;defaultTask_attributes);  /* USER CODE BEGIN RTOS_THREADS */  /* add threads, ... */  //动态创建串口任务  sg_xUART_TestOfTask_ret = xTaskCreate(UART_Test, "UART_Test_TASK", 128, NULL, osPriorityNormal+1, &amp;g_xUART_TestOfTaskHandle);  if(sg_xUART_TestOfTask_ret != pdPASS)  {  HAL_UART_Transmit_DMA(&amp;huart1, (const uint8_t *)"error", 5);  }    /* USER CODE END RTOS_THREADS */  /* USER CODE BEGIN RTOS_EVENTS */  /* add events, ... */  /* USER CODE END RTOS_EVENTS */}/* USER CODE BEGIN Header_StartDefaultTask *//**  * @brief  Function implementing the defaultTask thread.  * @param  argument: Not used  * @retval None  *//* USER CODE END Header_StartDefaultTask */void StartDefaultTask(void *argument){  /* USER CODE BEGIN StartDefaultTask */  /* Infinite loop */  for(;;)  {    osDelay(1);  }  /* USER CODE END StartDefaultTask */}/* Private application code --------------------------------------------------*//* USER CODE BEGIN Application *//* USER CODE END Application */</code></pre><p>&nbsp;BSP_USART.h</p><pre><code>#ifndef __BSP_USART_H#define __BSP_USART_H#include "stm32f1xx_hal.h"//宏定义//总体的接收缓存池，根据自身需要选择开多大#define Buffer_Total_Length 128//函数声明void UART1_Init(void);void UART_Test(void *pvParameters);void BSP_UART1_IRQ(UART_HandleTypeDef *huart);#endif</code></pre><p>BSP_USART.c</p><pre><code>#include "BSP_USART.h"//STM32#include "usart.h"#include "dma.h"//FreeRTOS#include "FreeRTOS.h"#include "semphr.h"//C库#include "string.h"//外部声明extern DMA_HandleTypeDef hdma_usart1_rx;extern SemaphoreHandle_t g_sUartRx_Semaphore;//定义发送数组 接收数组uint8_t TX_Buffer[Buffer_Total_Length] = {0};uint8_t RX_Buffer[Buffer_Total_Length] = {0};//用户测试数组uint8_t User_Test_Buffer[Buffer_Total_Length] = {0};//定义存放用于计算出实际接收长度uint16_t Buffer_real_Length = 0;void UART1_Init(void){//使能空闲中断和接收DMA    HAL_UARTEx_ReceiveToIdle_DMA(&amp;huart1, RX_Buffer, Buffer_Total_Length);}//串口任务void UART_Test(void *pvParameters){//初始化UART1_Init();while(1){//获取二值信号量if(xSemaphoreTake(g_sUartRx_Semaphore, portMAX_DELAY) == pdTRUE){//回显测试HAL_UART_Transmit(&amp;huart1, User_Test_Buffer, Buffer_real_Length, HAL_MAX_DELAY);}}}void BSP_UART1_IRQ(UART_HandleTypeDef *huart){    if(huart == &amp;huart1){        if(__HAL_UART_GET_FLAG(&amp;huart1, UART_FLAG_IDLE) == SET){//清除标志位__HAL_UART_CLEAR_IDLEFLAG(&amp;huart1);//赋值xHighPriorityTaskWokenBaseType_t xHighPriorityTaskWoken = pdFALSE;//释放二值信号量xSemaphoreGiveFromISR(g_sUartRx_Semaphore, &amp;xHighPriorityTaskWoken);//停止DMA处理其中的数据            HAL_UART_DMAStop(&amp;huart1);//计算实际接收长度            Buffer_real_Length = Buffer_Total_Length  - __HAL_DMA_GET_COUNTER(&amp;hdma_usart1_rx);//将数据copy出来用于后面的回显测试            memcpy(User_Test_Buffer, RX_Buffer, Buffer_real_Length);//再次启动            HAL_UARTEx_ReceiveToIdle_DMA(&amp;huart1, RX_Buffer, Buffer_Total_Length);//取消上下文切换portYIELD_FROM_ISR(xHighPriorityTaskWoken);        }    }}</code></pre><p>stm32f1xx_it.c</p><pre><code>/*只需要改动两处，其他代码略*//* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes *///加入头文件#include "BSP_USART.h"/* USER CODE END Includes *//**  * @brief This function handles USART1 global interrupt.  */void USART1_IRQHandler(void){  /* USER CODE BEGIN USART1_IRQn 0 */    //使用自己的中断服务函数BSP_UART1_IRQ(&amp;huart1);  /* USER CODE END USART1_IRQn 0 */  HAL_UART_IRQHandler(&amp;huart1);  /* USER CODE BEGIN USART1_IRQn 1 */  /* USER CODE END USART1_IRQn 1 */}</code></pre><p><strong>四、实验效果</strong></p><p><img src="/2025/05/25/%E3%80%90STM32%E3%80%91%E5%9F%BA%E4%BA%8ESTM32CubeMX%E7%9A%84Semphr+DMA%E7%9A%84%E4%B8%B2%E5%8F%A3%E7%A9%BA%E9%97%B2%E4%B8%AD%E6%96%AD%E6%8E%A5%E6%94%B6%E5%8F%98%E9%95%BF%E6%95%B0%E6%8D%AE%EF%BC%88%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%89/2ba98408580a447caaa821ec881214c6.png"></p><p><strong>注意事项：</strong></p><p>１、这只是作者的一种实现方案，但是还存在一些问题仍待完善。</p><p>２、自定义的中断服务函数那里，为什么不用HAL库的中断回调函数</p><pre><code>void HAL_UART_IdleCallback(UART_HandleTypeDef *huart);</code></pre><p>呢？因为那么做了后，作者发现它会无法自动进入该中断回调函数，所以就自定义成一个中断服务函数并放入对应中断位置处去运行，目前原因未知，有待解决。</p><p>3、硬件平台是野火的指南者。</p>]]></content>
    
    
    
    <tags>
      
      <tag>stm32 嵌入式硬件 单片机</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
